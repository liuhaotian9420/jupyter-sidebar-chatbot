"use strict";
(self["webpackChunk_jupyterlab_application_top"] = self["webpackChunk_jupyterlab_application_top"] || []).push([["vendors-node_modules_microsoft_fast-foundation_dist_esm_index_js"],{

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/accordion-item/accordion-item.js":
/*!*******************************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/accordion-item/accordion-item.js ***!
  \*******************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   AccordionItem: () => (/* binding */ AccordionItem)
/* harmony export */ });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! tslib */ "./node_modules/@microsoft/fast-foundation/node_modules/tslib/tslib.es6.js");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @microsoft/fast-element */ "webpack/sharing/consume/default/@microsoft/fast-element/@microsoft/fast-element");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _foundation_element_foundation_element_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../foundation-element/foundation-element.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/foundation-element/foundation-element.js");
/* harmony import */ var _patterns_start_end_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../patterns/start-end.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/patterns/start-end.js");
/* harmony import */ var _utilities_apply_mixins_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utilities/apply-mixins.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/utilities/apply-mixins.js");





/**
 * An individual item in an {@link @microsoft/fast-foundation#(Accordion:class) }.
 *
 * @slot start - Content which can be provided between the heading and the icon
 * @slot end - Content which can be provided between the start slot and icon
 * @slot heading - Content which serves as the accordion item heading and text of the expand button
 * @slot - The default slot for accordion item content
 * @slot expanded-icon - The expanded icon
 * @slot collapsed-icon - The collapsed icon
 * @fires change - Fires a custom 'change' event when the button is invoked
 * @csspart heading - Wraps the button
 * @csspart button - The button which serves to invoke the item
 * @csspart heading-content - Wraps the slot for the heading content within the button
 * @csspart icon - The icon container
 * @csspart expanded-icon - The expanded icon slot
 * @csspart collapsed-icon - The collapsed icon
 * @csspart region - The wrapper for the accordion item content
 *
 * @public
 */
class AccordionItem extends _foundation_element_foundation_element_js__WEBPACK_IMPORTED_MODULE_1__.FoundationElement {
    constructor() {
        super(...arguments);
        /**
         * Configures the {@link https://www.w3.org/TR/wai-aria-1.1/#aria-level | level} of the
         * heading element.
         *
         * @defaultValue 2
         * @public
         * @remarks
         * HTML attribute: heading-level
         */
        this.headinglevel = 2;
        /**
         * Expands or collapses the item.
         *
         * @public
         * @remarks
         * HTML attribute: expanded
         */
        this.expanded = false;
        /**
         * @internal
         */
        this.clickHandler = (e) => {
            this.expanded = !this.expanded;
            this.change();
        };
        this.change = () => {
            this.$emit("change");
        };
    }
}
(0,tslib__WEBPACK_IMPORTED_MODULE_2__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({
        attribute: "heading-level",
        mode: "fromView",
        converter: _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.nullableNumberConverter,
    })
], AccordionItem.prototype, "headinglevel", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_2__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ mode: "boolean" })
], AccordionItem.prototype, "expanded", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_2__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr
], AccordionItem.prototype, "id", void 0);
(0,_utilities_apply_mixins_js__WEBPACK_IMPORTED_MODULE_3__.applyMixins)(AccordionItem, _patterns_start_end_js__WEBPACK_IMPORTED_MODULE_4__.StartEnd);


/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/accordion-item/accordion-item.template.js":
/*!****************************************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/accordion-item/accordion-item.template.js ***!
  \****************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   accordionItemTemplate: () => (/* binding */ accordionItemTemplate)
/* harmony export */ });
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @microsoft/fast-element */ "webpack/sharing/consume/default/@microsoft/fast-element/@microsoft/fast-element");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _patterns_start_end_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../patterns/start-end.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/patterns/start-end.js");


/**
 * The template for the {@link @microsoft/fast-foundation#(AccordionItem:class)} component.
 * @public
 */
const accordionItemTemplate = (context, definition) => (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.html) `
    <template class="${x => (x.expanded ? "expanded" : "")}">
        <div
            class="heading"
            part="heading"
            role="heading"
            aria-level="${x => x.headinglevel}"
        >
            <button
                class="button"
                part="button"
                ${(0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.ref)("expandbutton")}
                aria-expanded="${x => x.expanded}"
                aria-controls="${x => x.id}-panel"
                id="${x => x.id}"
                @click="${(x, c) => x.clickHandler(c.event)}"
            >
                <span class="heading-content" part="heading-content">
                    <slot name="heading"></slot>
                </span>
            </button>
            ${(0,_patterns_start_end_js__WEBPACK_IMPORTED_MODULE_1__.startSlotTemplate)(context, definition)}
            ${(0,_patterns_start_end_js__WEBPACK_IMPORTED_MODULE_1__.endSlotTemplate)(context, definition)}
            <span class="icon" part="icon" aria-hidden="true">
                <slot name="expanded-icon" part="expanded-icon">
                    ${definition.expandedIcon || ""}
                </slot>
                <slot name="collapsed-icon" part="collapsed-icon">
                    ${definition.collapsedIcon || ""}
                </slot>
            <span>
        </div>
        <div
            class="region"
            part="region"
            id="${x => x.id}-panel"
            role="region"
            aria-labelledby="${x => x.id}"
        >
            <slot></slot>
        </div>
    </template>
`;


/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/accordion-item/index.js":
/*!**********************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/accordion-item/index.js ***!
  \**********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   AccordionItem: () => (/* reexport safe */ _accordion_item_js__WEBPACK_IMPORTED_MODULE_1__.AccordionItem),
/* harmony export */   accordionItemTemplate: () => (/* reexport safe */ _accordion_item_template_js__WEBPACK_IMPORTED_MODULE_0__.accordionItemTemplate)
/* harmony export */ });
/* harmony import */ var _accordion_item_template_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./accordion-item.template.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/accordion-item/accordion-item.template.js");
/* harmony import */ var _accordion_item_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./accordion-item.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/accordion-item/accordion-item.js");




/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/accordion/accordion.js":
/*!*********************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/accordion/accordion.js ***!
  \*********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Accordion: () => (/* binding */ Accordion),
/* harmony export */   AccordionExpandMode: () => (/* binding */ AccordionExpandMode)
/* harmony export */ });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! tslib */ "./node_modules/@microsoft/fast-foundation/node_modules/tslib/tslib.es6.js");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @microsoft/fast-element */ "webpack/sharing/consume/default/@microsoft/fast-element/@microsoft/fast-element");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @microsoft/fast-web-utilities */ "./node_modules/@microsoft/fast-web-utilities/dist/key-codes.js");
/* harmony import */ var _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @microsoft/fast-web-utilities */ "./node_modules/@microsoft/fast-web-utilities/dist/numbers.js");
/* harmony import */ var _foundation_element_foundation_element_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../foundation-element/foundation-element.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/foundation-element/foundation-element.js");
/* harmony import */ var _accordion_item_accordion_item_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../accordion-item/accordion-item.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/accordion-item/accordion-item.js");





/**
 * Expand mode for {@link Accordion}
 * @public
 */
const AccordionExpandMode = {
    /**
     * Designates only a single {@link @microsoft/fast-foundation#(AccordionItem:class) } can be open a time.
     */
    single: "single",
    /**
     * Designates multiple {@link @microsoft/fast-foundation#(AccordionItem:class) | AccordionItems} can be open simultaneously.
     */
    multi: "multi",
};
/**
 * An Accordion Custom HTML Element
 * Implements {@link https://www.w3.org/TR/wai-aria-practices-1.1/#accordion | ARIA Accordion}.
 *
 * @fires change - Fires a custom 'change' event when the active item changes
 * @csspart item - The slot for the accordion items
 * @public
 *
 * @remarks
 * Designed to be used with {@link @microsoft/fast-foundation#accordionTemplate} and {@link @microsoft/fast-foundation#(AccordionItem:class)}.
 */
class Accordion extends _foundation_element_foundation_element_js__WEBPACK_IMPORTED_MODULE_1__.FoundationElement {
    constructor() {
        super(...arguments);
        /**
         * Controls the expand mode of the Accordion, either allowing
         * single or multiple item expansion.
         * @public
         *
         * @remarks
         * HTML attribute: expand-mode
         */
        this.expandmode = AccordionExpandMode.multi;
        this.activeItemIndex = 0;
        this.change = () => {
            this.$emit("change", this.activeid);
        };
        this.setItems = () => {
            var _a;
            if (this.accordionItems.length === 0) {
                return;
            }
            this.accordionIds = this.getItemIds();
            this.accordionItems.forEach((item, index) => {
                if (item instanceof _accordion_item_accordion_item_js__WEBPACK_IMPORTED_MODULE_2__.AccordionItem) {
                    item.addEventListener("change", this.activeItemChange);
                    if (this.isSingleExpandMode()) {
                        this.activeItemIndex !== index
                            ? (item.expanded = false)
                            : (item.expanded = true);
                    }
                }
                const itemId = this.accordionIds[index];
                item.setAttribute("id", typeof itemId !== "string" ? `accordion-${index + 1}` : itemId);
                this.activeid = this.accordionIds[this.activeItemIndex];
                item.addEventListener("keydown", this.handleItemKeyDown);
                item.addEventListener("focus", this.handleItemFocus);
            });
            if (this.isSingleExpandMode()) {
                const expandedItem = (_a = this.findExpandedItem()) !== null && _a !== void 0 ? _a : this.accordionItems[0];
                expandedItem.setAttribute("aria-disabled", "true");
            }
        };
        this.removeItemListeners = (oldValue) => {
            oldValue.forEach((item, index) => {
                item.removeEventListener("change", this.activeItemChange);
                item.removeEventListener("keydown", this.handleItemKeyDown);
                item.removeEventListener("focus", this.handleItemFocus);
            });
        };
        this.activeItemChange = (event) => {
            if (event.defaultPrevented || event.target !== event.currentTarget) {
                return;
            }
            event.preventDefault();
            const selectedItem = event.target;
            this.activeid = selectedItem.getAttribute("id");
            if (this.isSingleExpandMode()) {
                this.resetItems();
                selectedItem.expanded = true;
                selectedItem.setAttribute("aria-disabled", "true");
                this.accordionItems.forEach((item) => {
                    if (!item.hasAttribute("disabled") && item.id !== this.activeid) {
                        item.removeAttribute("aria-disabled");
                    }
                });
            }
            this.activeItemIndex = Array.from(this.accordionItems).indexOf(selectedItem);
            this.change();
        };
        this.handleItemKeyDown = (event) => {
            // only handle the keydown if the event target is the accordion item
            // prevents arrow keys from moving focus to accordion headers when focus is on accordion item panel content
            if (event.target !== event.currentTarget) {
                return;
            }
            this.accordionIds = this.getItemIds();
            switch (event.key) {
                case _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_3__.keyArrowUp:
                    event.preventDefault();
                    this.adjust(-1);
                    break;
                case _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_3__.keyArrowDown:
                    event.preventDefault();
                    this.adjust(1);
                    break;
                case _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_3__.keyHome:
                    this.activeItemIndex = 0;
                    this.focusItem();
                    break;
                case _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_3__.keyEnd:
                    this.activeItemIndex = this.accordionItems.length - 1;
                    this.focusItem();
                    break;
            }
        };
        this.handleItemFocus = (event) => {
            // update the active item index if the focus moves to an accordion item via a different method other than the up and down arrow key actions
            // only do so if the focus is actually on the accordion item and not on any of its children
            if (event.target === event.currentTarget) {
                const focusedItem = event.target;
                const focusedIndex = (this.activeItemIndex = Array.from(this.accordionItems).indexOf(focusedItem));
                if (this.activeItemIndex !== focusedIndex && focusedIndex !== -1) {
                    this.activeItemIndex = focusedIndex;
                    this.activeid = this.accordionIds[this.activeItemIndex];
                }
            }
        };
    }
    /**
     * @internal
     */
    accordionItemsChanged(oldValue, newValue) {
        if (this.$fastController.isConnected) {
            this.removeItemListeners(oldValue);
            this.setItems();
        }
    }
    findExpandedItem() {
        for (let item = 0; item < this.accordionItems.length; item++) {
            if (this.accordionItems[item].getAttribute("expanded") === "true") {
                return this.accordionItems[item];
            }
        }
        return null;
    }
    resetItems() {
        this.accordionItems.forEach((item, index) => {
            item.expanded = false;
        });
    }
    getItemIds() {
        return this.accordionItems.map((accordionItem) => {
            return accordionItem.getAttribute("id");
        });
    }
    isSingleExpandMode() {
        return this.expandmode === AccordionExpandMode.single;
    }
    adjust(adjustment) {
        this.activeItemIndex = (0,_microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_4__.wrapInBounds)(0, this.accordionItems.length - 1, this.activeItemIndex + adjustment);
        this.focusItem();
    }
    focusItem() {
        const element = this.accordionItems[this.activeItemIndex];
        if (element instanceof _accordion_item_accordion_item_js__WEBPACK_IMPORTED_MODULE_2__.AccordionItem) {
            element.expandbutton.focus();
        }
    }
}
(0,tslib__WEBPACK_IMPORTED_MODULE_5__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ attribute: "expand-mode" })
], Accordion.prototype, "expandmode", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_5__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.observable
], Accordion.prototype, "accordionItems", void 0);


/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/accordion/accordion.template.js":
/*!******************************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/accordion/accordion.template.js ***!
  \******************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   accordionTemplate: () => (/* binding */ accordionTemplate)
/* harmony export */ });
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @microsoft/fast-element */ "webpack/sharing/consume/default/@microsoft/fast-element/@microsoft/fast-element");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__);

/**
 * The template for the {@link @microsoft/fast-foundation#Accordion} component.
 * @public
 */
const accordionTemplate = (context, definition) => /* TODO: deprecate slot name `item` to only support default slot https://github.com/microsoft/fast/issues/5515 */ (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.html) `
    <template>
        <slot ${(0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.slotted)({ property: "accordionItems", filter: (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.elements)() })}></slot>
        <slot name="item" part="item" ${(0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.slotted)("accordionItems")}></slot>
    </template>
`;


/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/accordion/index.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/accordion/index.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Accordion: () => (/* reexport safe */ _accordion_js__WEBPACK_IMPORTED_MODULE_1__.Accordion),
/* harmony export */   AccordionExpandMode: () => (/* reexport safe */ _accordion_js__WEBPACK_IMPORTED_MODULE_1__.AccordionExpandMode),
/* harmony export */   accordionTemplate: () => (/* reexport safe */ _accordion_template_js__WEBPACK_IMPORTED_MODULE_0__.accordionTemplate)
/* harmony export */ });
/* harmony import */ var _accordion_template_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./accordion.template.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/accordion/accordion.template.js");
/* harmony import */ var _accordion_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./accordion.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/accordion/accordion.js");




/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/anchor/anchor.js":
/*!***************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/anchor/anchor.js ***!
  \***************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Anchor: () => (/* binding */ Anchor),
/* harmony export */   DelegatesARIALink: () => (/* binding */ DelegatesARIALink)
/* harmony export */ });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! tslib */ "./node_modules/@microsoft/fast-foundation/node_modules/tslib/tslib.es6.js");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @microsoft/fast-element */ "webpack/sharing/consume/default/@microsoft/fast-element/@microsoft/fast-element");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _foundation_element_foundation_element_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../foundation-element/foundation-element.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/foundation-element/foundation-element.js");
/* harmony import */ var _patterns_index_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../patterns/index.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/patterns/aria-global.js");
/* harmony import */ var _patterns_index_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../patterns/index.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/patterns/start-end.js");
/* harmony import */ var _utilities_apply_mixins_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utilities/apply-mixins.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/utilities/apply-mixins.js");





/**
 * An Anchor Custom HTML Element.
 * Based largely on the {@link https://developer.mozilla.org/en-US/docs/Web/HTML/Element/a | <a> element }.
 *
 * @slot start - Content which can be provided before the anchor content
 * @slot end - Content which can be provided after the anchor content
 * @slot - The default slot for anchor content
 * @csspart control - The anchor element
 * @csspart content - The element wrapping anchor content
 *
 * @public
 */
class Anchor extends _foundation_element_foundation_element_js__WEBPACK_IMPORTED_MODULE_1__.FoundationElement {
    constructor() {
        super(...arguments);
        /**
         * Overrides the focus call for where delegatesFocus is unsupported.
         * This check works for Chrome, Edge Chromium, FireFox, and Safari
         * Relevant PR on the Firefox browser: https://phabricator.services.mozilla.com/D123858
         */
        this.handleUnsupportedDelegatesFocus = () => {
            var _a;
            // Check to see if delegatesFocus is supported
            if (window.ShadowRoot &&
                !window.ShadowRoot.prototype.hasOwnProperty("delegatesFocus") &&
                ((_a = this.$fastController.definition.shadowOptions) === null || _a === void 0 ? void 0 : _a.delegatesFocus)) {
                this.focus = () => {
                    var _a;
                    (_a = this.control) === null || _a === void 0 ? void 0 : _a.focus();
                };
            }
        };
    }
    /**
     * @internal
     */
    connectedCallback() {
        super.connectedCallback();
        this.handleUnsupportedDelegatesFocus();
    }
}
(0,tslib__WEBPACK_IMPORTED_MODULE_2__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr
], Anchor.prototype, "download", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_2__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr
], Anchor.prototype, "href", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_2__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr
], Anchor.prototype, "hreflang", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_2__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr
], Anchor.prototype, "ping", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_2__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr
], Anchor.prototype, "referrerpolicy", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_2__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr
], Anchor.prototype, "rel", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_2__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr
], Anchor.prototype, "target", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_2__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr
], Anchor.prototype, "type", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_2__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.observable
], Anchor.prototype, "defaultSlottedContent", void 0);
/**
 * Includes ARIA states and properties relating to the ARIA link role
 *
 * @public
 */
class DelegatesARIALink {
}
(0,tslib__WEBPACK_IMPORTED_MODULE_2__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ attribute: "aria-expanded" })
], DelegatesARIALink.prototype, "ariaExpanded", void 0);
(0,_utilities_apply_mixins_js__WEBPACK_IMPORTED_MODULE_3__.applyMixins)(DelegatesARIALink, _patterns_index_js__WEBPACK_IMPORTED_MODULE_4__.ARIAGlobalStatesAndProperties);
(0,_utilities_apply_mixins_js__WEBPACK_IMPORTED_MODULE_3__.applyMixins)(Anchor, _patterns_index_js__WEBPACK_IMPORTED_MODULE_5__.StartEnd, DelegatesARIALink);


/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/anchor/anchor.template.js":
/*!************************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/anchor/anchor.template.js ***!
  \************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   anchorTemplate: () => (/* binding */ anchorTemplate)
/* harmony export */ });
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @microsoft/fast-element */ "webpack/sharing/consume/default/@microsoft/fast-element/@microsoft/fast-element");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _patterns_start_end_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../patterns/start-end.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/patterns/start-end.js");


/**
 * The template for the {@link @microsoft/fast-foundation#(Anchor:class)} component.
 * @public
 */
const anchorTemplate = (context, definition) => (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.html) `
    <a
        class="control"
        part="control"
        download="${x => x.download}"
        href="${x => x.href}"
        hreflang="${x => x.hreflang}"
        ping="${x => x.ping}"
        referrerpolicy="${x => x.referrerpolicy}"
        rel="${x => x.rel}"
        target="${x => x.target}"
        type="${x => x.type}"
        aria-atomic="${x => x.ariaAtomic}"
        aria-busy="${x => x.ariaBusy}"
        aria-controls="${x => x.ariaControls}"
        aria-current="${x => x.ariaCurrent}"
        aria-describedby="${x => x.ariaDescribedby}"
        aria-details="${x => x.ariaDetails}"
        aria-disabled="${x => x.ariaDisabled}"
        aria-errormessage="${x => x.ariaErrormessage}"
        aria-expanded="${x => x.ariaExpanded}"
        aria-flowto="${x => x.ariaFlowto}"
        aria-haspopup="${x => x.ariaHaspopup}"
        aria-hidden="${x => x.ariaHidden}"
        aria-invalid="${x => x.ariaInvalid}"
        aria-keyshortcuts="${x => x.ariaKeyshortcuts}"
        aria-label="${x => x.ariaLabel}"
        aria-labelledby="${x => x.ariaLabelledby}"
        aria-live="${x => x.ariaLive}"
        aria-owns="${x => x.ariaOwns}"
        aria-relevant="${x => x.ariaRelevant}"
        aria-roledescription="${x => x.ariaRoledescription}"
        ${(0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.ref)("control")}
    >
        ${(0,_patterns_start_end_js__WEBPACK_IMPORTED_MODULE_1__.startSlotTemplate)(context, definition)}
        <span class="content" part="content">
            <slot ${(0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.slotted)("defaultSlottedContent")}></slot>
        </span>
        ${(0,_patterns_start_end_js__WEBPACK_IMPORTED_MODULE_1__.endSlotTemplate)(context, definition)}
    </a>
`;


/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/anchor/index.js":
/*!**************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/anchor/index.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Anchor: () => (/* reexport safe */ _anchor_js__WEBPACK_IMPORTED_MODULE_1__.Anchor),
/* harmony export */   DelegatesARIALink: () => (/* reexport safe */ _anchor_js__WEBPACK_IMPORTED_MODULE_1__.DelegatesARIALink),
/* harmony export */   anchorTemplate: () => (/* reexport safe */ _anchor_template_js__WEBPACK_IMPORTED_MODULE_0__.anchorTemplate)
/* harmony export */ });
/* harmony import */ var _anchor_template_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./anchor.template.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/anchor/anchor.template.js");
/* harmony import */ var _anchor_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./anchor.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/anchor/anchor.js");




/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/anchored-region/anchored-region-config.js":
/*!****************************************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/anchored-region/anchored-region-config.js ***!
  \****************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   FlyoutPosBottom: () => (/* binding */ FlyoutPosBottom),
/* harmony export */   FlyoutPosBottomFill: () => (/* binding */ FlyoutPosBottomFill),
/* harmony export */   FlyoutPosTallest: () => (/* binding */ FlyoutPosTallest),
/* harmony export */   FlyoutPosTallestFill: () => (/* binding */ FlyoutPosTallestFill),
/* harmony export */   FlyoutPosTop: () => (/* binding */ FlyoutPosTop),
/* harmony export */   FlyoutPosTopFill: () => (/* binding */ FlyoutPosTopFill)
/* harmony export */ });
/**
 * Building blocks - partial configs
 */
/**
 * A region that matches the size and position of the anchor horizontally
 */
const horizontalAnchorOverlay = {
    horizontalDefaultPosition: "center",
    horizontalPositioningMode: "locktodefault",
    horizontalInset: false,
    horizontalScaling: "anchor",
};
/**
 * Exported configs
 */
/**
 * A region that always places itself above the anchor, has
 * a width to match the anchor, and is sized vertically by content
 *
 * @public
 */
const FlyoutPosTop = Object.assign(Object.assign({}, horizontalAnchorOverlay), { verticalDefaultPosition: "top", verticalPositioningMode: "locktodefault", verticalInset: false, verticalScaling: "content" });
/**
 * A region that always places itself below the anchor, has
 * a width to match the anchor, and is sized vertically by content
 *
 * @public
 */
const FlyoutPosBottom = Object.assign(Object.assign({}, horizontalAnchorOverlay), { verticalDefaultPosition: "bottom", verticalPositioningMode: "locktodefault", verticalInset: false, verticalScaling: "content" });
/**
 * A region that places itself above or below the anchor
 * based on available space, has a width to match the anchor,
 * and is sized vertically by content
 *
 * @public
 */
const FlyoutPosTallest = Object.assign(Object.assign({}, horizontalAnchorOverlay), { verticalPositioningMode: "dynamic", verticalInset: false, verticalScaling: "content" });
/**
 * A region that always places itself above the anchor, has
 * a width to match the anchor, and is sized vertically by available space
 *
 * @public
 */
const FlyoutPosTopFill = Object.assign(Object.assign({}, FlyoutPosTop), { verticalScaling: "fill" });
/**
 * A region that always places itself below the anchor, has
 * a width to match the anchor, and is sized vertically by available space
 *
 * @public
 */
const FlyoutPosBottomFill = Object.assign(Object.assign({}, FlyoutPosBottom), { verticalScaling: "fill" });
/**
 * A region that places itself above or below the anchor
 * based on available space, has a width to match the anchor,
 * and is sized vertically by available space
 *
 * @public
 */
const FlyoutPosTallestFill = Object.assign(Object.assign({}, FlyoutPosTallest), { verticalScaling: "fill" });


/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/anchored-region/anchored-region.js":
/*!*********************************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/anchored-region/anchored-region.js ***!
  \*********************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   AnchoredRegion: () => (/* binding */ AnchoredRegion)
/* harmony export */ });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! tslib */ "./node_modules/@microsoft/fast-foundation/node_modules/tslib/tslib.es6.js");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @microsoft/fast-element */ "webpack/sharing/consume/default/@microsoft/fast-element/@microsoft/fast-element");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @microsoft/fast-web-utilities */ "./node_modules/@microsoft/fast-web-utilities/dist/localization.js");
/* harmony import */ var _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @microsoft/fast-web-utilities */ "./node_modules/@microsoft/fast-web-utilities/dist/events.js");
/* harmony import */ var _foundation_element_foundation_element_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../foundation-element/foundation-element.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/foundation-element/foundation-element.js");
/* harmony import */ var _utilities_direction_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utilities/direction.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/utilities/direction.js");
/* harmony import */ var _utilities_intersection_service_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../utilities/intersection-service.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/utilities/intersection-service.js");






/**
 * An anchored region Custom HTML Element.
 *
 * @slot - The default slot for the content
 * @fires loaded - Fires a custom 'loaded' event when the region is loaded and visible
 * @fires positionchange - Fires a custom 'positionchange' event when the position has changed
 *
 * @public
 */
class AnchoredRegion extends _foundation_element_foundation_element_js__WEBPACK_IMPORTED_MODULE_1__.FoundationElement {
    constructor() {
        super(...arguments);
        /**
         * The HTML ID of the anchor element this region is positioned relative to
         *
         * @public
         * @remarks
         * HTML Attribute: anchor
         */
        this.anchor = "";
        /**
         * The HTML ID of the viewport element this region is positioned relative to
         *
         * @public
         * @remarks
         * HTML Attribute: anchor
         */
        this.viewport = "";
        /**
         * Sets what logic the component uses to determine horizontal placement.
         * 'locktodefault' forces the default position
         * 'dynamic' decides placement based on available space
         * 'uncontrolled' does not control placement on the horizontal axis
         *
         * @public
         * @remarks
         * HTML Attribute: horizontal-positioning-mode
         */
        this.horizontalPositioningMode = "uncontrolled";
        /**
         * The default horizontal position of the region relative to the anchor element
         *
         * @public
         * @remarks
         * HTML Attribute: horizontal-default-position
         */
        this.horizontalDefaultPosition = "unset";
        /**
         * Whether the region remains in the viewport (ie. detaches from the anchor) on the horizontal axis
         *
         * @public
         * @remarks
         * HTML Attribute: horizontal-viewport-lock
         */
        this.horizontalViewportLock = false;
        /**
         * Whether the region overlaps the anchor on the horizontal axis
         *
         * @public
         * @remarks
         * HTML Attribute: horizontal-inset
         */
        this.horizontalInset = false;
        /**
         * Defines how the width of the region is calculated
         *
         * @public
         * @remarks
         * HTML Attribute: horizontal-scaling
         */
        this.horizontalScaling = "content";
        /**
         * Sets what logic the component uses to determine vertical placement.
         * 'locktodefault' forces the default position
         * 'dynamic' decides placement based on available space
         * 'uncontrolled' does not control placement on the vertical axis
         *
         * @public
         * @remarks
         * HTML Attribute: vertical-positioning-mode
         */
        this.verticalPositioningMode = "uncontrolled";
        /**
         * The default vertical position of the region relative to the anchor element
         *
         * @public
         * @remarks
         * HTML Attribute: vertical-default-position
         */
        this.verticalDefaultPosition = "unset";
        /**
         * Whether the region remains in the viewport (ie. detaches from the anchor) on the vertical axis
         *
         * @public
         * @remarks
         * HTML Attribute: vertical-viewport-lock
         */
        this.verticalViewportLock = false;
        /**
         * Whether the region overlaps the anchor on the vertical axis
         *
         * @public
         * @remarks
         * HTML Attribute: vertical-inset
         */
        this.verticalInset = false;
        /**
         * Defines how the height of the region is calculated
         *
         * @public
         * @remarks
         * HTML Attribute: vertical-scaling
         */
        this.verticalScaling = "content";
        /**
         * Whether the region is positioned using css "position: fixed".
         * Otherwise the region uses "position: absolute".
         * Fixed placement allows the region to break out of parent containers,
         *
         * @public
         * @remarks
         * HTML Attribute: fixed-placement
         */
        this.fixedPlacement = false;
        /**
         * Defines what triggers the anchored region to revaluate positioning
         *
         * @public
         * @remarks
         * HTML Attribute: auto-update-mode
         */
        this.autoUpdateMode = "anchor";
        /**
         * The HTML element being used as the anchor
         *
         * @public
         */
        this.anchorElement = null;
        /**
         * The HTML element being used as the viewport
         *
         * @public
         */
        this.viewportElement = null;
        /**
         * indicates that an initial positioning pass on layout has completed
         *
         * @internal
         */
        this.initialLayoutComplete = false;
        this.resizeDetector = null;
        /**
         * base offsets between the positioner's base position and the anchor's
         */
        this.baseHorizontalOffset = 0;
        this.baseVerticalOffset = 0;
        this.pendingPositioningUpdate = false;
        this.pendingReset = false;
        this.currentDirection = _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_2__.Direction.ltr;
        this.regionVisible = false;
        // indicates that a layout update should occur even if geometry has not changed
        // used to ensure some attribute changes are applied
        this.forceUpdate = false;
        // defines how big a difference in pixels there must be between states to
        // justify a layout update that affects the dom (prevents repeated sub-pixel corrections)
        this.updateThreshold = 0.5;
        /**
         * update position
         */
        this.update = () => {
            if (!this.pendingPositioningUpdate) {
                this.requestPositionUpdates();
            }
        };
        /**
         * starts observers
         */
        this.startObservers = () => {
            this.stopObservers();
            if (this.anchorElement === null) {
                return;
            }
            this.requestPositionUpdates();
            if (this.resizeDetector !== null) {
                this.resizeDetector.observe(this.anchorElement);
                this.resizeDetector.observe(this);
            }
        };
        /**
         * get position updates
         */
        this.requestPositionUpdates = () => {
            if (this.anchorElement === null || this.pendingPositioningUpdate) {
                return;
            }
            AnchoredRegion.intersectionService.requestPosition(this, this.handleIntersection);
            AnchoredRegion.intersectionService.requestPosition(this.anchorElement, this.handleIntersection);
            if (this.viewportElement !== null) {
                AnchoredRegion.intersectionService.requestPosition(this.viewportElement, this.handleIntersection);
            }
            this.pendingPositioningUpdate = true;
        };
        /**
         * stops observers
         */
        this.stopObservers = () => {
            if (this.pendingPositioningUpdate) {
                this.pendingPositioningUpdate = false;
                AnchoredRegion.intersectionService.cancelRequestPosition(this, this.handleIntersection);
                if (this.anchorElement !== null) {
                    AnchoredRegion.intersectionService.cancelRequestPosition(this.anchorElement, this.handleIntersection);
                }
                if (this.viewportElement !== null) {
                    AnchoredRegion.intersectionService.cancelRequestPosition(this.viewportElement, this.handleIntersection);
                }
            }
            if (this.resizeDetector !== null) {
                this.resizeDetector.disconnect();
            }
        };
        /**
         * Gets the viewport element by id, or defaults to document root
         */
        this.getViewport = () => {
            if (typeof this.viewport !== "string" || this.viewport === "") {
                return document.documentElement;
            }
            return document.getElementById(this.viewport);
        };
        /**
         *  Gets the anchor element by id
         */
        this.getAnchor = () => {
            return document.getElementById(this.anchor);
        };
        /**
         *  Handle intersections
         */
        this.handleIntersection = (entries) => {
            if (!this.pendingPositioningUpdate) {
                return;
            }
            this.pendingPositioningUpdate = false;
            if (!this.applyIntersectionEntries(entries)) {
                return;
            }
            this.updateLayout();
        };
        /**
         *  iterate through intersection entries and apply data
         */
        this.applyIntersectionEntries = (entries) => {
            const regionEntry = entries.find(x => x.target === this);
            const anchorEntry = entries.find(x => x.target === this.anchorElement);
            const viewportEntry = entries.find(x => x.target === this.viewportElement);
            if (regionEntry === undefined ||
                viewportEntry === undefined ||
                anchorEntry === undefined) {
                return false;
            }
            // don't update the dom unless there is a significant difference in rect positions
            if (!this.regionVisible ||
                this.forceUpdate ||
                this.regionRect === undefined ||
                this.anchorRect === undefined ||
                this.viewportRect === undefined ||
                this.isRectDifferent(this.anchorRect, anchorEntry.boundingClientRect) ||
                this.isRectDifferent(this.viewportRect, viewportEntry.boundingClientRect) ||
                this.isRectDifferent(this.regionRect, regionEntry.boundingClientRect)) {
                this.regionRect = regionEntry.boundingClientRect;
                this.anchorRect = anchorEntry.boundingClientRect;
                if (this.viewportElement === document.documentElement) {
                    this.viewportRect = new DOMRectReadOnly(viewportEntry.boundingClientRect.x +
                        document.documentElement.scrollLeft, viewportEntry.boundingClientRect.y +
                        document.documentElement.scrollTop, viewportEntry.boundingClientRect.width, viewportEntry.boundingClientRect.height);
                }
                else {
                    this.viewportRect = viewportEntry.boundingClientRect;
                }
                this.updateRegionOffset();
                this.forceUpdate = false;
                return true;
            }
            return false;
        };
        /**
         *  Update the offset values
         */
        this.updateRegionOffset = () => {
            if (this.anchorRect && this.regionRect) {
                this.baseHorizontalOffset =
                    this.baseHorizontalOffset +
                        (this.anchorRect.left - this.regionRect.left) +
                        (this.translateX - this.baseHorizontalOffset);
                this.baseVerticalOffset =
                    this.baseVerticalOffset +
                        (this.anchorRect.top - this.regionRect.top) +
                        (this.translateY - this.baseVerticalOffset);
            }
        };
        /**
         *  compare rects to see if there is enough change to justify a DOM update
         */
        this.isRectDifferent = (rectA, rectB) => {
            if (Math.abs(rectA.top - rectB.top) > this.updateThreshold ||
                Math.abs(rectA.right - rectB.right) > this.updateThreshold ||
                Math.abs(rectA.bottom - rectB.bottom) > this.updateThreshold ||
                Math.abs(rectA.left - rectB.left) > this.updateThreshold) {
                return true;
            }
            return false;
        };
        /**
         *  Handle resize events
         */
        this.handleResize = (entries) => {
            this.update();
        };
        /**
         * resets the component
         */
        this.reset = () => {
            if (!this.pendingReset) {
                return;
            }
            this.pendingReset = false;
            if (this.anchorElement === null) {
                this.anchorElement = this.getAnchor();
            }
            if (this.viewportElement === null) {
                this.viewportElement = this.getViewport();
            }
            this.currentDirection = (0,_utilities_direction_js__WEBPACK_IMPORTED_MODULE_3__.getDirection)(this);
            this.startObservers();
        };
        /**
         *  Recalculate layout related state values
         */
        this.updateLayout = () => {
            let desiredVerticalPosition = undefined;
            let desiredHorizontalPosition = undefined;
            if (this.horizontalPositioningMode !== "uncontrolled") {
                const horizontalOptions = this.getPositioningOptions(this.horizontalInset);
                if (this.horizontalDefaultPosition === "center") {
                    desiredHorizontalPosition = "center";
                }
                else if (this.horizontalDefaultPosition !== "unset") {
                    let dirCorrectedHorizontalDefaultPosition = this
                        .horizontalDefaultPosition;
                    if (dirCorrectedHorizontalDefaultPosition === "start" ||
                        dirCorrectedHorizontalDefaultPosition === "end") {
                        // if direction changes we reset the layout
                        const newDirection = (0,_utilities_direction_js__WEBPACK_IMPORTED_MODULE_3__.getDirection)(this);
                        if (newDirection !== this.currentDirection) {
                            this.currentDirection = newDirection;
                            this.initialize();
                            return;
                        }
                        if (this.currentDirection === _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_2__.Direction.ltr) {
                            dirCorrectedHorizontalDefaultPosition =
                                dirCorrectedHorizontalDefaultPosition === "start"
                                    ? "left"
                                    : "right";
                        }
                        else {
                            dirCorrectedHorizontalDefaultPosition =
                                dirCorrectedHorizontalDefaultPosition === "start"
                                    ? "right"
                                    : "left";
                        }
                    }
                    switch (dirCorrectedHorizontalDefaultPosition) {
                        case "left":
                            desiredHorizontalPosition = this.horizontalInset
                                ? "insetStart"
                                : "start";
                            break;
                        case "right":
                            desiredHorizontalPosition = this.horizontalInset
                                ? "insetEnd"
                                : "end";
                            break;
                    }
                }
                const horizontalThreshold = this.horizontalThreshold !== undefined
                    ? this.horizontalThreshold
                    : this.regionRect !== undefined
                        ? this.regionRect.width
                        : 0;
                const anchorLeft = this.anchorRect !== undefined ? this.anchorRect.left : 0;
                const anchorRight = this.anchorRect !== undefined ? this.anchorRect.right : 0;
                const anchorWidth = this.anchorRect !== undefined ? this.anchorRect.width : 0;
                const viewportLeft = this.viewportRect !== undefined ? this.viewportRect.left : 0;
                const viewportRight = this.viewportRect !== undefined ? this.viewportRect.right : 0;
                if (desiredHorizontalPosition === undefined ||
                    (!(this.horizontalPositioningMode === "locktodefault") &&
                        this.getAvailableSpace(desiredHorizontalPosition, anchorLeft, anchorRight, anchorWidth, viewportLeft, viewportRight) < horizontalThreshold)) {
                    desiredHorizontalPosition =
                        this.getAvailableSpace(horizontalOptions[0], anchorLeft, anchorRight, anchorWidth, viewportLeft, viewportRight) >
                            this.getAvailableSpace(horizontalOptions[1], anchorLeft, anchorRight, anchorWidth, viewportLeft, viewportRight)
                            ? horizontalOptions[0]
                            : horizontalOptions[1];
                }
            }
            if (this.verticalPositioningMode !== "uncontrolled") {
                const verticalOptions = this.getPositioningOptions(this.verticalInset);
                if (this.verticalDefaultPosition === "center") {
                    desiredVerticalPosition = "center";
                }
                else if (this.verticalDefaultPosition !== "unset") {
                    switch (this.verticalDefaultPosition) {
                        case "top":
                            desiredVerticalPosition = this.verticalInset
                                ? "insetStart"
                                : "start";
                            break;
                        case "bottom":
                            desiredVerticalPosition = this.verticalInset ? "insetEnd" : "end";
                            break;
                    }
                }
                const verticalThreshold = this.verticalThreshold !== undefined
                    ? this.verticalThreshold
                    : this.regionRect !== undefined
                        ? this.regionRect.height
                        : 0;
                const anchorTop = this.anchorRect !== undefined ? this.anchorRect.top : 0;
                const anchorBottom = this.anchorRect !== undefined ? this.anchorRect.bottom : 0;
                const anchorHeight = this.anchorRect !== undefined ? this.anchorRect.height : 0;
                const viewportTop = this.viewportRect !== undefined ? this.viewportRect.top : 0;
                const viewportBottom = this.viewportRect !== undefined ? this.viewportRect.bottom : 0;
                if (desiredVerticalPosition === undefined ||
                    (!(this.verticalPositioningMode === "locktodefault") &&
                        this.getAvailableSpace(desiredVerticalPosition, anchorTop, anchorBottom, anchorHeight, viewportTop, viewportBottom) < verticalThreshold)) {
                    desiredVerticalPosition =
                        this.getAvailableSpace(verticalOptions[0], anchorTop, anchorBottom, anchorHeight, viewportTop, viewportBottom) >
                            this.getAvailableSpace(verticalOptions[1], anchorTop, anchorBottom, anchorHeight, viewportTop, viewportBottom)
                            ? verticalOptions[0]
                            : verticalOptions[1];
                }
            }
            const nextPositionerDimension = this.getNextRegionDimension(desiredHorizontalPosition, desiredVerticalPosition);
            const positionChanged = this.horizontalPosition !== desiredHorizontalPosition ||
                this.verticalPosition !== desiredVerticalPosition;
            this.setHorizontalPosition(desiredHorizontalPosition, nextPositionerDimension);
            this.setVerticalPosition(desiredVerticalPosition, nextPositionerDimension);
            this.updateRegionStyle();
            if (!this.initialLayoutComplete) {
                this.initialLayoutComplete = true;
                this.requestPositionUpdates();
                return;
            }
            if (!this.regionVisible) {
                this.regionVisible = true;
                this.style.removeProperty("pointer-events");
                this.style.removeProperty("opacity");
                this.classList.toggle("loaded", true);
                this.$emit("loaded", this, { bubbles: false });
            }
            this.updatePositionClasses();
            if (positionChanged) {
                // emit change event
                this.$emit("positionchange", this, { bubbles: false });
            }
        };
        /**
         *  Updates the style string applied to the region element as well as the css classes attached
         *  to the root element
         */
        this.updateRegionStyle = () => {
            this.style.width = this.regionWidth;
            this.style.height = this.regionHeight;
            this.style.transform = `translate(${this.translateX}px, ${this.translateY}px)`;
        };
        /**
         *  Updates the css classes that reflect the current position of the element
         */
        this.updatePositionClasses = () => {
            this.classList.toggle("top", this.verticalPosition === "start");
            this.classList.toggle("bottom", this.verticalPosition === "end");
            this.classList.toggle("inset-top", this.verticalPosition === "insetStart");
            this.classList.toggle("inset-bottom", this.verticalPosition === "insetEnd");
            this.classList.toggle("vertical-center", this.verticalPosition === "center");
            this.classList.toggle("left", this.horizontalPosition === "start");
            this.classList.toggle("right", this.horizontalPosition === "end");
            this.classList.toggle("inset-left", this.horizontalPosition === "insetStart");
            this.classList.toggle("inset-right", this.horizontalPosition === "insetEnd");
            this.classList.toggle("horizontal-center", this.horizontalPosition === "center");
        };
        /**
         * Get horizontal positioning state based on desired position
         */
        this.setHorizontalPosition = (desiredHorizontalPosition, nextPositionerDimension) => {
            if (desiredHorizontalPosition === undefined ||
                this.regionRect === undefined ||
                this.anchorRect === undefined ||
                this.viewportRect === undefined) {
                return;
            }
            let nextRegionWidth = 0;
            switch (this.horizontalScaling) {
                case "anchor":
                case "fill":
                    nextRegionWidth = this.horizontalViewportLock
                        ? this.viewportRect.width
                        : nextPositionerDimension.width;
                    this.regionWidth = `${nextRegionWidth}px`;
                    break;
                case "content":
                    nextRegionWidth = this.regionRect.width;
                    this.regionWidth = "unset";
                    break;
            }
            let sizeDelta = 0;
            switch (desiredHorizontalPosition) {
                case "start":
                    this.translateX = this.baseHorizontalOffset - nextRegionWidth;
                    if (this.horizontalViewportLock &&
                        this.anchorRect.left > this.viewportRect.right) {
                        this.translateX =
                            this.translateX -
                                (this.anchorRect.left - this.viewportRect.right);
                    }
                    break;
                case "insetStart":
                    this.translateX =
                        this.baseHorizontalOffset - nextRegionWidth + this.anchorRect.width;
                    if (this.horizontalViewportLock &&
                        this.anchorRect.right > this.viewportRect.right) {
                        this.translateX =
                            this.translateX -
                                (this.anchorRect.right - this.viewportRect.right);
                    }
                    break;
                case "insetEnd":
                    this.translateX = this.baseHorizontalOffset;
                    if (this.horizontalViewportLock &&
                        this.anchorRect.left < this.viewportRect.left) {
                        this.translateX =
                            this.translateX - (this.anchorRect.left - this.viewportRect.left);
                    }
                    break;
                case "end":
                    this.translateX = this.baseHorizontalOffset + this.anchorRect.width;
                    if (this.horizontalViewportLock &&
                        this.anchorRect.right < this.viewportRect.left) {
                        this.translateX =
                            this.translateX -
                                (this.anchorRect.right - this.viewportRect.left);
                    }
                    break;
                case "center":
                    sizeDelta = (this.anchorRect.width - nextRegionWidth) / 2;
                    this.translateX = this.baseHorizontalOffset + sizeDelta;
                    if (this.horizontalViewportLock) {
                        const regionLeft = this.anchorRect.left + sizeDelta;
                        const regionRight = this.anchorRect.right - sizeDelta;
                        if (regionLeft < this.viewportRect.left &&
                            !(regionRight > this.viewportRect.right)) {
                            this.translateX =
                                this.translateX - (regionLeft - this.viewportRect.left);
                        }
                        else if (regionRight > this.viewportRect.right &&
                            !(regionLeft < this.viewportRect.left)) {
                            this.translateX =
                                this.translateX - (regionRight - this.viewportRect.right);
                        }
                    }
                    break;
            }
            this.horizontalPosition = desiredHorizontalPosition;
        };
        /**
         * Set vertical positioning state based on desired position
         */
        this.setVerticalPosition = (desiredVerticalPosition, nextPositionerDimension) => {
            if (desiredVerticalPosition === undefined ||
                this.regionRect === undefined ||
                this.anchorRect === undefined ||
                this.viewportRect === undefined) {
                return;
            }
            let nextRegionHeight = 0;
            switch (this.verticalScaling) {
                case "anchor":
                case "fill":
                    nextRegionHeight = this.verticalViewportLock
                        ? this.viewportRect.height
                        : nextPositionerDimension.height;
                    this.regionHeight = `${nextRegionHeight}px`;
                    break;
                case "content":
                    nextRegionHeight = this.regionRect.height;
                    this.regionHeight = "unset";
                    break;
            }
            let sizeDelta = 0;
            switch (desiredVerticalPosition) {
                case "start":
                    this.translateY = this.baseVerticalOffset - nextRegionHeight;
                    if (this.verticalViewportLock &&
                        this.anchorRect.top > this.viewportRect.bottom) {
                        this.translateY =
                            this.translateY -
                                (this.anchorRect.top - this.viewportRect.bottom);
                    }
                    break;
                case "insetStart":
                    this.translateY =
                        this.baseVerticalOffset - nextRegionHeight + this.anchorRect.height;
                    if (this.verticalViewportLock &&
                        this.anchorRect.bottom > this.viewportRect.bottom) {
                        this.translateY =
                            this.translateY -
                                (this.anchorRect.bottom - this.viewportRect.bottom);
                    }
                    break;
                case "insetEnd":
                    this.translateY = this.baseVerticalOffset;
                    if (this.verticalViewportLock &&
                        this.anchorRect.top < this.viewportRect.top) {
                        this.translateY =
                            this.translateY - (this.anchorRect.top - this.viewportRect.top);
                    }
                    break;
                case "end":
                    this.translateY = this.baseVerticalOffset + this.anchorRect.height;
                    if (this.verticalViewportLock &&
                        this.anchorRect.bottom < this.viewportRect.top) {
                        this.translateY =
                            this.translateY -
                                (this.anchorRect.bottom - this.viewportRect.top);
                    }
                    break;
                case "center":
                    sizeDelta = (this.anchorRect.height - nextRegionHeight) / 2;
                    this.translateY = this.baseVerticalOffset + sizeDelta;
                    if (this.verticalViewportLock) {
                        const regionTop = this.anchorRect.top + sizeDelta;
                        const regionBottom = this.anchorRect.bottom - sizeDelta;
                        if (regionTop < this.viewportRect.top &&
                            !(regionBottom > this.viewportRect.bottom)) {
                            this.translateY =
                                this.translateY - (regionTop - this.viewportRect.top);
                        }
                        else if (regionBottom > this.viewportRect.bottom &&
                            !(regionTop < this.viewportRect.top)) {
                            this.translateY =
                                this.translateY - (regionBottom - this.viewportRect.bottom);
                        }
                    }
            }
            this.verticalPosition = desiredVerticalPosition;
        };
        /**
         *  Get available positions based on positioning mode
         */
        this.getPositioningOptions = (inset) => {
            if (inset) {
                return ["insetStart", "insetEnd"];
            }
            return ["start", "end"];
        };
        /**
         *  Get the space available for a particular relative position
         */
        this.getAvailableSpace = (positionOption, anchorStart, anchorEnd, anchorSpan, viewportStart, viewportEnd) => {
            const spaceStart = anchorStart - viewportStart;
            const spaceEnd = viewportEnd - (anchorStart + anchorSpan);
            switch (positionOption) {
                case "start":
                    return spaceStart;
                case "insetStart":
                    return spaceStart + anchorSpan;
                case "insetEnd":
                    return spaceEnd + anchorSpan;
                case "end":
                    return spaceEnd;
                case "center":
                    return Math.min(spaceStart, spaceEnd) * 2 + anchorSpan;
            }
        };
        /**
         * Get region dimensions
         */
        this.getNextRegionDimension = (desiredHorizontalPosition, desiredVerticalPosition) => {
            const newRegionDimension = {
                height: this.regionRect !== undefined ? this.regionRect.height : 0,
                width: this.regionRect !== undefined ? this.regionRect.width : 0,
            };
            if (desiredHorizontalPosition !== undefined &&
                this.horizontalScaling === "fill") {
                newRegionDimension.width = this.getAvailableSpace(desiredHorizontalPosition, this.anchorRect !== undefined ? this.anchorRect.left : 0, this.anchorRect !== undefined ? this.anchorRect.right : 0, this.anchorRect !== undefined ? this.anchorRect.width : 0, this.viewportRect !== undefined ? this.viewportRect.left : 0, this.viewportRect !== undefined ? this.viewportRect.right : 0);
            }
            else if (this.horizontalScaling === "anchor") {
                newRegionDimension.width =
                    this.anchorRect !== undefined ? this.anchorRect.width : 0;
            }
            if (desiredVerticalPosition !== undefined && this.verticalScaling === "fill") {
                newRegionDimension.height = this.getAvailableSpace(desiredVerticalPosition, this.anchorRect !== undefined ? this.anchorRect.top : 0, this.anchorRect !== undefined ? this.anchorRect.bottom : 0, this.anchorRect !== undefined ? this.anchorRect.height : 0, this.viewportRect !== undefined ? this.viewportRect.top : 0, this.viewportRect !== undefined ? this.viewportRect.bottom : 0);
            }
            else if (this.verticalScaling === "anchor") {
                newRegionDimension.height =
                    this.anchorRect !== undefined ? this.anchorRect.height : 0;
            }
            return newRegionDimension;
        };
        /**
         * starts event listeners that can trigger auto updating
         */
        this.startAutoUpdateEventListeners = () => {
            window.addEventListener(_microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_4__.eventResize, this.update, { passive: true });
            window.addEventListener(_microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_4__.eventScroll, this.update, {
                passive: true,
                capture: true,
            });
            if (this.resizeDetector !== null && this.viewportElement !== null) {
                this.resizeDetector.observe(this.viewportElement);
            }
        };
        /**
         * stops event listeners that can trigger auto updating
         */
        this.stopAutoUpdateEventListeners = () => {
            window.removeEventListener(_microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_4__.eventResize, this.update);
            window.removeEventListener(_microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_4__.eventScroll, this.update);
            if (this.resizeDetector !== null && this.viewportElement !== null) {
                this.resizeDetector.unobserve(this.viewportElement);
            }
        };
    }
    anchorChanged() {
        if (this.initialLayoutComplete) {
            this.anchorElement = this.getAnchor();
        }
    }
    viewportChanged() {
        if (this.initialLayoutComplete) {
            this.viewportElement = this.getViewport();
        }
    }
    horizontalPositioningModeChanged() {
        this.requestReset();
    }
    horizontalDefaultPositionChanged() {
        this.updateForAttributeChange();
    }
    horizontalViewportLockChanged() {
        this.updateForAttributeChange();
    }
    horizontalInsetChanged() {
        this.updateForAttributeChange();
    }
    horizontalThresholdChanged() {
        this.updateForAttributeChange();
    }
    horizontalScalingChanged() {
        this.updateForAttributeChange();
    }
    verticalPositioningModeChanged() {
        this.requestReset();
    }
    verticalDefaultPositionChanged() {
        this.updateForAttributeChange();
    }
    verticalViewportLockChanged() {
        this.updateForAttributeChange();
    }
    verticalInsetChanged() {
        this.updateForAttributeChange();
    }
    verticalThresholdChanged() {
        this.updateForAttributeChange();
    }
    verticalScalingChanged() {
        this.updateForAttributeChange();
    }
    fixedPlacementChanged() {
        if (this.$fastController.isConnected &&
            this.initialLayoutComplete) {
            this.initialize();
        }
    }
    autoUpdateModeChanged(prevMode, newMode) {
        if (this.$fastController.isConnected &&
            this.initialLayoutComplete) {
            if (prevMode === "auto") {
                this.stopAutoUpdateEventListeners();
            }
            if (newMode === "auto") {
                this.startAutoUpdateEventListeners();
            }
        }
    }
    anchorElementChanged() {
        this.requestReset();
    }
    viewportElementChanged() {
        if (this.$fastController.isConnected &&
            this.initialLayoutComplete) {
            this.initialize();
        }
    }
    /**
     * @internal
     */
    connectedCallback() {
        super.connectedCallback();
        if (this.autoUpdateMode === "auto") {
            this.startAutoUpdateEventListeners();
        }
        this.initialize();
    }
    /**
     * @internal
     */
    disconnectedCallback() {
        super.disconnectedCallback();
        if (this.autoUpdateMode === "auto") {
            this.stopAutoUpdateEventListeners();
        }
        this.stopObservers();
        this.disconnectResizeDetector();
    }
    /**
     * @internal
     */
    adoptedCallback() {
        this.initialize();
    }
    /**
     * destroys the instance's resize observer
     */
    disconnectResizeDetector() {
        if (this.resizeDetector !== null) {
            this.resizeDetector.disconnect();
            this.resizeDetector = null;
        }
    }
    /**
     * initializes the instance's resize observer
     */
    initializeResizeDetector() {
        this.disconnectResizeDetector();
        this.resizeDetector = new window.ResizeObserver(this.handleResize);
    }
    /**
     * react to attribute changes that don't require a reset
     */
    updateForAttributeChange() {
        if (this.$fastController.isConnected &&
            this.initialLayoutComplete) {
            this.forceUpdate = true;
            this.update();
        }
    }
    /**
     * fully initializes the component
     */
    initialize() {
        this.initializeResizeDetector();
        if (this.anchorElement === null) {
            this.anchorElement = this.getAnchor();
        }
        this.requestReset();
    }
    /**
     * Request a reset if there are currently no open requests
     */
    requestReset() {
        if (this.$fastController.isConnected &&
            this.pendingReset === false) {
            this.setInitialState();
            _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.DOM.queueUpdate(() => this.reset());
            this.pendingReset = true;
        }
    }
    /**
     * sets the starting configuration for component internal values
     */
    setInitialState() {
        this.initialLayoutComplete = false;
        this.regionVisible = false;
        this.translateX = 0;
        this.translateY = 0;
        this.baseHorizontalOffset = 0;
        this.baseVerticalOffset = 0;
        this.viewportRect = undefined;
        this.regionRect = undefined;
        this.anchorRect = undefined;
        this.verticalPosition = undefined;
        this.horizontalPosition = undefined;
        this.style.opacity = "0";
        this.style.pointerEvents = "none";
        this.forceUpdate = false;
        this.style.position = this.fixedPlacement ? "fixed" : "absolute";
        this.updatePositionClasses();
        this.updateRegionStyle();
    }
}
AnchoredRegion.intersectionService = new _utilities_intersection_service_js__WEBPACK_IMPORTED_MODULE_5__.IntersectionService();
(0,tslib__WEBPACK_IMPORTED_MODULE_6__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr
], AnchoredRegion.prototype, "anchor", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_6__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr
], AnchoredRegion.prototype, "viewport", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_6__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ attribute: "horizontal-positioning-mode" })
], AnchoredRegion.prototype, "horizontalPositioningMode", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_6__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ attribute: "horizontal-default-position" })
], AnchoredRegion.prototype, "horizontalDefaultPosition", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_6__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ attribute: "horizontal-viewport-lock", mode: "boolean" })
], AnchoredRegion.prototype, "horizontalViewportLock", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_6__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ attribute: "horizontal-inset", mode: "boolean" })
], AnchoredRegion.prototype, "horizontalInset", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_6__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ attribute: "horizontal-threshold" })
], AnchoredRegion.prototype, "horizontalThreshold", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_6__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ attribute: "horizontal-scaling" })
], AnchoredRegion.prototype, "horizontalScaling", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_6__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ attribute: "vertical-positioning-mode" })
], AnchoredRegion.prototype, "verticalPositioningMode", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_6__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ attribute: "vertical-default-position" })
], AnchoredRegion.prototype, "verticalDefaultPosition", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_6__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ attribute: "vertical-viewport-lock", mode: "boolean" })
], AnchoredRegion.prototype, "verticalViewportLock", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_6__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ attribute: "vertical-inset", mode: "boolean" })
], AnchoredRegion.prototype, "verticalInset", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_6__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ attribute: "vertical-threshold" })
], AnchoredRegion.prototype, "verticalThreshold", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_6__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ attribute: "vertical-scaling" })
], AnchoredRegion.prototype, "verticalScaling", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_6__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ attribute: "fixed-placement", mode: "boolean" })
], AnchoredRegion.prototype, "fixedPlacement", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_6__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ attribute: "auto-update-mode" })
], AnchoredRegion.prototype, "autoUpdateMode", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_6__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.observable
], AnchoredRegion.prototype, "anchorElement", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_6__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.observable
], AnchoredRegion.prototype, "viewportElement", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_6__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.observable
], AnchoredRegion.prototype, "initialLayoutComplete", void 0);


/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/anchored-region/anchored-region.template.js":
/*!******************************************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/anchored-region/anchored-region.template.js ***!
  \******************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   anchoredRegionTemplate: () => (/* binding */ anchoredRegionTemplate)
/* harmony export */ });
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @microsoft/fast-element */ "webpack/sharing/consume/default/@microsoft/fast-element/@microsoft/fast-element");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__);

/**
 * The template for the {@link @microsoft/fast-foundation#(AnchoredRegion:class)} component.
 * @public
 */
const anchoredRegionTemplate = (context, definition) => (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.html) `
    <template class="${x => (x.initialLayoutComplete ? "loaded" : "")}">
        ${(0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.when)(x => x.initialLayoutComplete, (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.html) `
                <slot></slot>
            `)}
    </template>
`;


/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/anchored-region/index.js":
/*!***********************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/anchored-region/index.js ***!
  \***********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   AnchoredRegion: () => (/* reexport safe */ _anchored_region_js__WEBPACK_IMPORTED_MODULE_1__.AnchoredRegion),
/* harmony export */   FlyoutPosBottom: () => (/* reexport safe */ _anchored_region_config_js__WEBPACK_IMPORTED_MODULE_2__.FlyoutPosBottom),
/* harmony export */   FlyoutPosBottomFill: () => (/* reexport safe */ _anchored_region_config_js__WEBPACK_IMPORTED_MODULE_2__.FlyoutPosBottomFill),
/* harmony export */   FlyoutPosTallest: () => (/* reexport safe */ _anchored_region_config_js__WEBPACK_IMPORTED_MODULE_2__.FlyoutPosTallest),
/* harmony export */   FlyoutPosTallestFill: () => (/* reexport safe */ _anchored_region_config_js__WEBPACK_IMPORTED_MODULE_2__.FlyoutPosTallestFill),
/* harmony export */   FlyoutPosTop: () => (/* reexport safe */ _anchored_region_config_js__WEBPACK_IMPORTED_MODULE_2__.FlyoutPosTop),
/* harmony export */   FlyoutPosTopFill: () => (/* reexport safe */ _anchored_region_config_js__WEBPACK_IMPORTED_MODULE_2__.FlyoutPosTopFill),
/* harmony export */   anchoredRegionTemplate: () => (/* reexport safe */ _anchored_region_template_js__WEBPACK_IMPORTED_MODULE_0__.anchoredRegionTemplate)
/* harmony export */ });
/* harmony import */ var _anchored_region_template_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./anchored-region.template.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/anchored-region/anchored-region.template.js");
/* harmony import */ var _anchored_region_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./anchored-region.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/anchored-region/anchored-region.js");
/* harmony import */ var _anchored_region_config_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./anchored-region-config.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/anchored-region/anchored-region-config.js");





/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/avatar/avatar.js":
/*!***************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/avatar/avatar.js ***!
  \***************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Avatar: () => (/* binding */ Avatar)
/* harmony export */ });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! tslib */ "./node_modules/@microsoft/fast-foundation/node_modules/tslib/tslib.es6.js");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @microsoft/fast-element */ "webpack/sharing/consume/default/@microsoft/fast-element/@microsoft/fast-element");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _foundation_element_foundation_element_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../foundation-element/foundation-element.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/foundation-element/foundation-element.js");



/**
 * An Avatar Custom HTML Element
 *
 * @slot media - Used for media such as an image
 * @slot - The default slot for avatar text, commonly a name or initials
 * @slot badge - Used to provide a badge, such as a status badge
 * @csspart backplate - The wrapping container for the avatar
 * @csspart link - The avatar link
 * @csspart media - The media slot
 * @csspart content - The default slot
 *
 * @public
 */
class Avatar extends _foundation_element_foundation_element_js__WEBPACK_IMPORTED_MODULE_1__.FoundationElement {
    /**
     * Internal
     */
    connectedCallback() {
        super.connectedCallback();
        if (!this.shape) {
            this.shape = "circle";
        }
    }
}
(0,tslib__WEBPACK_IMPORTED_MODULE_2__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr
], Avatar.prototype, "fill", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_2__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr
], Avatar.prototype, "color", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_2__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr
], Avatar.prototype, "link", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_2__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr
], Avatar.prototype, "shape", void 0);


/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/avatar/avatar.template.js":
/*!************************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/avatar/avatar.template.js ***!
  \************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   avatarTemplate: () => (/* binding */ avatarTemplate)
/* harmony export */ });
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @microsoft/fast-element */ "webpack/sharing/consume/default/@microsoft/fast-element/@microsoft/fast-element");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__);

/**
 * The template for {@link @microsoft/fast-foundation#Avatar} component.
 * @public
 */
const avatarTemplate = (context, definition) => (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.html) `
    <div
        class="backplate ${x => x.shape}"
        part="backplate"
        style="${x => x.fill ? `background-color: var(--avatar-fill-${x.fill});` : void 0}"
    >
        <a
            class="link"
            part="link"
            href="${x => (x.link ? x.link : void 0)}"
            style="${x => (x.color ? `color: var(--avatar-color-${x.color});` : void 0)}"
        >
            <slot name="media" part="media">${definition.media || ""}</slot>
            <slot class="content" part="content"><slot>
        </a>
    </div>
    <slot name="badge" part="badge"></slot>
`;


/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/avatar/index.js":
/*!**************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/avatar/index.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Avatar: () => (/* reexport safe */ _avatar_js__WEBPACK_IMPORTED_MODULE_1__.Avatar),
/* harmony export */   avatarTemplate: () => (/* reexport safe */ _avatar_template_js__WEBPACK_IMPORTED_MODULE_0__.avatarTemplate)
/* harmony export */ });
/* harmony import */ var _avatar_template_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./avatar.template.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/avatar/avatar.template.js");
/* harmony import */ var _avatar_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./avatar.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/avatar/avatar.js");




/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/badge/badge.js":
/*!*************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/badge/badge.js ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Badge: () => (/* binding */ Badge)
/* harmony export */ });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! tslib */ "./node_modules/@microsoft/fast-foundation/node_modules/tslib/tslib.es6.js");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @microsoft/fast-element */ "webpack/sharing/consume/default/@microsoft/fast-element/@microsoft/fast-element");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _foundation_element_foundation_element_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../foundation-element/foundation-element.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/foundation-element/foundation-element.js");



/**
 * A Badge Custom HTML Element.
 * @slot - The default slot for the badge
 * @csspart control - The element representing the badge, which wraps the default slot
 *
 * @public
 */
class Badge extends _foundation_element_foundation_element_js__WEBPACK_IMPORTED_MODULE_1__.FoundationElement {
    constructor() {
        super(...arguments);
        this.generateBadgeStyle = () => {
            if (!this.fill && !this.color) {
                return;
            }
            const fill = `background-color: var(--badge-fill-${this.fill});`;
            const color = `color: var(--badge-color-${this.color});`;
            if (this.fill && !this.color) {
                return fill;
            }
            else if (this.color && !this.fill) {
                return color;
            }
            else {
                return `${color} ${fill}`;
            }
        };
    }
}
(0,tslib__WEBPACK_IMPORTED_MODULE_2__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ attribute: "fill" })
], Badge.prototype, "fill", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_2__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ attribute: "color" })
], Badge.prototype, "color", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_2__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ mode: "boolean" })
], Badge.prototype, "circular", void 0);


/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/badge/badge.template.js":
/*!**********************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/badge/badge.template.js ***!
  \**********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   badgeTemplate: () => (/* binding */ badgeTemplate)
/* harmony export */ });
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @microsoft/fast-element */ "webpack/sharing/consume/default/@microsoft/fast-element/@microsoft/fast-element");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__);

/**
 * The template for the {@link @microsoft/fast-foundation#Badge} component.
 * @public
 */
const badgeTemplate = (context, definition) => (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.html) `
    <template class="${x => (x.circular ? "circular" : "")}">
        <div class="control" part="control" style="${x => x.generateBadgeStyle()}">
            <slot></slot>
        </div>
    </template>
`;


/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/badge/index.js":
/*!*************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/badge/index.js ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Badge: () => (/* reexport safe */ _badge_js__WEBPACK_IMPORTED_MODULE_1__.Badge),
/* harmony export */   badgeTemplate: () => (/* reexport safe */ _badge_template_js__WEBPACK_IMPORTED_MODULE_0__.badgeTemplate)
/* harmony export */ });
/* harmony import */ var _badge_template_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./badge.template.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/badge/badge.template.js");
/* harmony import */ var _badge_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./badge.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/badge/badge.js");




/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/breadcrumb-item/breadcrumb-item.js":
/*!*********************************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/breadcrumb-item/breadcrumb-item.js ***!
  \*********************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   BreadcrumbItem: () => (/* binding */ BreadcrumbItem)
/* harmony export */ });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! tslib */ "./node_modules/@microsoft/fast-foundation/node_modules/tslib/tslib.es6.js");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @microsoft/fast-element */ "webpack/sharing/consume/default/@microsoft/fast-element/@microsoft/fast-element");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _anchor_anchor_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../anchor/anchor.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/anchor/anchor.js");
/* harmony import */ var _patterns_index_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../patterns/index.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/patterns/start-end.js");
/* harmony import */ var _utilities_apply_mixins_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utilities/apply-mixins.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/utilities/apply-mixins.js");





/**
 * A Breadcrumb Item Custom HTML Element.
 *
 * @public
 */
class BreadcrumbItem extends _anchor_anchor_js__WEBPACK_IMPORTED_MODULE_1__.Anchor {
    constructor() {
        super(...arguments);
        /**
         * @internal
         */
        this.separator = true;
    }
}
(0,tslib__WEBPACK_IMPORTED_MODULE_2__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.observable
], BreadcrumbItem.prototype, "separator", void 0);
(0,_utilities_apply_mixins_js__WEBPACK_IMPORTED_MODULE_3__.applyMixins)(BreadcrumbItem, _patterns_index_js__WEBPACK_IMPORTED_MODULE_4__.StartEnd, _anchor_anchor_js__WEBPACK_IMPORTED_MODULE_1__.DelegatesARIALink);


/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/breadcrumb-item/breadcrumb-item.template.js":
/*!******************************************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/breadcrumb-item/breadcrumb-item.template.js ***!
  \******************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   breadcrumbItemTemplate: () => (/* binding */ breadcrumbItemTemplate)
/* harmony export */ });
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @microsoft/fast-element */ "webpack/sharing/consume/default/@microsoft/fast-element/@microsoft/fast-element");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _anchor_anchor_template_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../anchor/anchor.template.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/anchor/anchor.template.js");
/* harmony import */ var _patterns_start_end_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../patterns/start-end.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/patterns/start-end.js");



/**
 * The template for the {@link @microsoft/fast-foundation#(BreadcrumbItem:class)} component.
 * @public
 */
const breadcrumbItemTemplate = (context, definition) => (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.html) `
    <div role="listitem" class="listitem" part="listitem">
        ${(0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.when)(x => x.href && x.href.length > 0, (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.html) `
                ${(0,_anchor_anchor_template_js__WEBPACK_IMPORTED_MODULE_1__.anchorTemplate)(context, definition)}
            `)}
        ${(0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.when)(x => !x.href, (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.html) `
                ${(0,_patterns_start_end_js__WEBPACK_IMPORTED_MODULE_2__.startSlotTemplate)(context, definition)}
                <slot></slot>
                ${(0,_patterns_start_end_js__WEBPACK_IMPORTED_MODULE_2__.endSlotTemplate)(context, definition)}
            `)}
        ${(0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.when)(x => x.separator, (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.html) `
                <span class="separator" part="separator" aria-hidden="true">
                    <slot name="separator">${definition.separator || ""}</slot>
                </span>
            `)}
    </div>
`;


/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/breadcrumb-item/index.js":
/*!***********************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/breadcrumb-item/index.js ***!
  \***********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   BreadcrumbItem: () => (/* reexport safe */ _breadcrumb_item_js__WEBPACK_IMPORTED_MODULE_1__.BreadcrumbItem),
/* harmony export */   breadcrumbItemTemplate: () => (/* reexport safe */ _breadcrumb_item_template_js__WEBPACK_IMPORTED_MODULE_0__.breadcrumbItemTemplate)
/* harmony export */ });
/* harmony import */ var _breadcrumb_item_template_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./breadcrumb-item.template.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/breadcrumb-item/breadcrumb-item.template.js");
/* harmony import */ var _breadcrumb_item_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./breadcrumb-item.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/breadcrumb-item/breadcrumb-item.js");




/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/breadcrumb/breadcrumb.js":
/*!***********************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/breadcrumb/breadcrumb.js ***!
  \***********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Breadcrumb: () => (/* binding */ Breadcrumb)
/* harmony export */ });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! tslib */ "./node_modules/@microsoft/fast-foundation/node_modules/tslib/tslib.es6.js");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @microsoft/fast-element */ "webpack/sharing/consume/default/@microsoft/fast-element/@microsoft/fast-element");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _breadcrumb_item_breadcrumb_item_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../breadcrumb-item/breadcrumb-item.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/breadcrumb-item/breadcrumb-item.js");
/* harmony import */ var _foundation_element_foundation_element_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../foundation-element/foundation-element.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/foundation-element/foundation-element.js");




/**
 * A Breadcrumb Custom HTML Element.
 * @slot - The default slot for the breadcrumb items
 * @csspart list - The element wrapping the slotted items
 *
 * @public
 */
class Breadcrumb extends _foundation_element_foundation_element_js__WEBPACK_IMPORTED_MODULE_1__.FoundationElement {
    slottedBreadcrumbItemsChanged() {
        if (this.$fastController.isConnected) {
            if (this.slottedBreadcrumbItems === undefined ||
                this.slottedBreadcrumbItems.length === 0) {
                return;
            }
            const lastNode = this.slottedBreadcrumbItems[this.slottedBreadcrumbItems.length - 1];
            this.slottedBreadcrumbItems.forEach((item) => {
                const itemIsLastNode = item === lastNode;
                this.setItemSeparator(item, itemIsLastNode);
                this.setAriaCurrent(item, itemIsLastNode);
            });
        }
    }
    setItemSeparator(item, isLastNode) {
        if (item instanceof _breadcrumb_item_breadcrumb_item_js__WEBPACK_IMPORTED_MODULE_2__.BreadcrumbItem) {
            item.separator = !isLastNode;
        }
    }
    /**
     * Finds href on childnodes in the light DOM or shadow DOM.
     * We look in the shadow DOM because we insert an anchor when breadcrumb-item has an href.
     */
    findChildWithHref(node) {
        var _a, _b;
        if (node.childElementCount > 0) {
            return node.querySelector("a[href]");
        }
        else if ((_a = node.shadowRoot) === null || _a === void 0 ? void 0 : _a.childElementCount) {
            return (_b = node.shadowRoot) === null || _b === void 0 ? void 0 : _b.querySelector("a[href]");
        }
        else
            return null;
    }
    /**
     *  Sets ARIA Current for the current node
     * If child node with an anchor tag and with href is found then set aria-current to correct value for the child node,
     * otherwise apply aria-current to the host element, with an href
     */
    setAriaCurrent(item, isLastNode) {
        const childNodeWithHref = this.findChildWithHref(item);
        if (childNodeWithHref === null &&
            item.hasAttribute("href") &&
            item instanceof _breadcrumb_item_breadcrumb_item_js__WEBPACK_IMPORTED_MODULE_2__.BreadcrumbItem) {
            isLastNode
                ? item.setAttribute("aria-current", "page")
                : item.removeAttribute("aria-current");
        }
        else if (childNodeWithHref !== null) {
            isLastNode
                ? childNodeWithHref.setAttribute("aria-current", "page")
                : childNodeWithHref.removeAttribute("aria-current");
        }
    }
}
(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.observable
], Breadcrumb.prototype, "slottedBreadcrumbItems", void 0);


/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/breadcrumb/breadcrumb.template.js":
/*!********************************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/breadcrumb/breadcrumb.template.js ***!
  \********************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   breadcrumbTemplate: () => (/* binding */ breadcrumbTemplate)
/* harmony export */ });
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @microsoft/fast-element */ "webpack/sharing/consume/default/@microsoft/fast-element/@microsoft/fast-element");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__);

/**
 * The template for the {@link @microsoft/fast-foundation#Breadcrumb} component.
 * @public
 */
const breadcrumbTemplate = (context, definition) => (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.html) `
    <template role="navigation">
        <div role="list" class="list" part="list">
            <slot
                ${(0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.slotted)({ property: "slottedBreadcrumbItems", filter: (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.elements)() })}
            ></slot>
        </div>
    </template>
`;


/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/breadcrumb/index.js":
/*!******************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/breadcrumb/index.js ***!
  \******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Breadcrumb: () => (/* reexport safe */ _breadcrumb_js__WEBPACK_IMPORTED_MODULE_1__.Breadcrumb),
/* harmony export */   breadcrumbTemplate: () => (/* reexport safe */ _breadcrumb_template_js__WEBPACK_IMPORTED_MODULE_0__.breadcrumbTemplate)
/* harmony export */ });
/* harmony import */ var _breadcrumb_template_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./breadcrumb.template.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/breadcrumb/breadcrumb.template.js");
/* harmony import */ var _breadcrumb_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./breadcrumb.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/breadcrumb/breadcrumb.js");




/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/button/button.form-associated.js":
/*!*******************************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/button/button.form-associated.js ***!
  \*******************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   FormAssociatedButton: () => (/* binding */ FormAssociatedButton)
/* harmony export */ });
/* harmony import */ var _form_associated_form_associated_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../form-associated/form-associated.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/form-associated/form-associated.js");
/* harmony import */ var _foundation_element_foundation_element_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../foundation-element/foundation-element.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/foundation-element/foundation-element.js");


class _Button extends _foundation_element_foundation_element_js__WEBPACK_IMPORTED_MODULE_0__.FoundationElement {
}
/**
 * A form-associated base class for the {@link @microsoft/fast-foundation#(Button:class)} component.
 *
 * @internal
 */
class FormAssociatedButton extends (0,_form_associated_form_associated_js__WEBPACK_IMPORTED_MODULE_1__.FormAssociated)(_Button) {
    constructor() {
        super(...arguments);
        this.proxy = document.createElement("input");
    }
}


/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/button/button.js":
/*!***************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/button/button.js ***!
  \***************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Button: () => (/* binding */ Button),
/* harmony export */   DelegatesARIAButton: () => (/* binding */ DelegatesARIAButton)
/* harmony export */ });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! tslib */ "./node_modules/@microsoft/fast-foundation/node_modules/tslib/tslib.es6.js");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @microsoft/fast-element */ "webpack/sharing/consume/default/@microsoft/fast-element/@microsoft/fast-element");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _patterns_index_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../patterns/index.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/patterns/aria-global.js");
/* harmony import */ var _patterns_index_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../patterns/index.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/patterns/start-end.js");
/* harmony import */ var _utilities_apply_mixins_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utilities/apply-mixins.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/utilities/apply-mixins.js");
/* harmony import */ var _button_form_associated_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./button.form-associated.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/button/button.form-associated.js");





/**
 * A Button Custom HTML Element.
 * Based largely on the {@link https://developer.mozilla.org/en-US/docs/Web/HTML/Element/button | <button> element }.
 *
 * @slot start - Content which can be provided before the button content
 * @slot end - Content which can be provided after the button content
 * @slot - The default slot for button content
 * @csspart control - The button element
 * @csspart content - The element wrapping button content
 *
 * @public
 */
class Button extends _button_form_associated_js__WEBPACK_IMPORTED_MODULE_1__.FormAssociatedButton {
    constructor() {
        super(...arguments);
        /**
         * Prevent events to propagate if disabled and has no slotted content wrapped in HTML elements
         * @internal
         */
        this.handleClick = (e) => {
            var _a;
            if (this.disabled && ((_a = this.defaultSlottedContent) === null || _a === void 0 ? void 0 : _a.length) <= 1) {
                e.stopPropagation();
            }
        };
        /**
         * Submits the parent form
         */
        this.handleSubmission = () => {
            if (!this.form) {
                return;
            }
            const attached = this.proxy.isConnected;
            if (!attached) {
                this.attachProxy();
            }
            // Browser support for requestSubmit is not comprehensive
            // so click the proxy if it isn't supported
            typeof this.form.requestSubmit === "function"
                ? this.form.requestSubmit(this.proxy)
                : this.proxy.click();
            if (!attached) {
                this.detachProxy();
            }
        };
        /**
         * Resets the parent form
         */
        this.handleFormReset = () => {
            var _a;
            (_a = this.form) === null || _a === void 0 ? void 0 : _a.reset();
        };
        /**
         * Overrides the focus call for where delegatesFocus is unsupported.
         * This check works for Chrome, Edge Chromium, FireFox, and Safari
         * Relevant PR on the Firefox browser: https://phabricator.services.mozilla.com/D123858
         */
        this.handleUnsupportedDelegatesFocus = () => {
            var _a;
            // Check to see if delegatesFocus is supported
            if (window.ShadowRoot &&
                !window.ShadowRoot.prototype.hasOwnProperty("delegatesFocus") &&
                ((_a = this.$fastController.definition.shadowOptions) === null || _a === void 0 ? void 0 : _a.delegatesFocus)) {
                this.focus = () => {
                    this.control.focus();
                };
            }
        };
    }
    formactionChanged() {
        if (this.proxy instanceof HTMLInputElement) {
            this.proxy.formAction = this.formaction;
        }
    }
    formenctypeChanged() {
        if (this.proxy instanceof HTMLInputElement) {
            this.proxy.formEnctype = this.formenctype;
        }
    }
    formmethodChanged() {
        if (this.proxy instanceof HTMLInputElement) {
            this.proxy.formMethod = this.formmethod;
        }
    }
    formnovalidateChanged() {
        if (this.proxy instanceof HTMLInputElement) {
            this.proxy.formNoValidate = this.formnovalidate;
        }
    }
    formtargetChanged() {
        if (this.proxy instanceof HTMLInputElement) {
            this.proxy.formTarget = this.formtarget;
        }
    }
    typeChanged(previous, next) {
        if (this.proxy instanceof HTMLInputElement) {
            this.proxy.type = this.type;
        }
        next === "submit" && this.addEventListener("click", this.handleSubmission);
        previous === "submit" && this.removeEventListener("click", this.handleSubmission);
        next === "reset" && this.addEventListener("click", this.handleFormReset);
        previous === "reset" && this.removeEventListener("click", this.handleFormReset);
    }
    /** {@inheritDoc (FormAssociated:interface).validate} */
    validate() {
        super.validate(this.control);
    }
    /**
     * @internal
     */
    connectedCallback() {
        var _a;
        super.connectedCallback();
        this.proxy.setAttribute("type", this.type);
        this.handleUnsupportedDelegatesFocus();
        const elements = Array.from((_a = this.control) === null || _a === void 0 ? void 0 : _a.children);
        if (elements) {
            elements.forEach((span) => {
                span.addEventListener("click", this.handleClick);
            });
        }
    }
    /**
     * @internal
     */
    disconnectedCallback() {
        var _a;
        super.disconnectedCallback();
        const elements = Array.from((_a = this.control) === null || _a === void 0 ? void 0 : _a.children);
        if (elements) {
            elements.forEach((span) => {
                span.removeEventListener("click", this.handleClick);
            });
        }
    }
}
(0,tslib__WEBPACK_IMPORTED_MODULE_2__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ mode: "boolean" })
], Button.prototype, "autofocus", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_2__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ attribute: "form" })
], Button.prototype, "formId", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_2__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr
], Button.prototype, "formaction", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_2__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr
], Button.prototype, "formenctype", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_2__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr
], Button.prototype, "formmethod", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_2__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ mode: "boolean" })
], Button.prototype, "formnovalidate", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_2__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr
], Button.prototype, "formtarget", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_2__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr
], Button.prototype, "type", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_2__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.observable
], Button.prototype, "defaultSlottedContent", void 0);
/**
 * Includes ARIA states and properties relating to the ARIA button role
 *
 * @public
 */
class DelegatesARIAButton {
}
(0,tslib__WEBPACK_IMPORTED_MODULE_2__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ attribute: "aria-expanded" })
], DelegatesARIAButton.prototype, "ariaExpanded", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_2__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ attribute: "aria-pressed" })
], DelegatesARIAButton.prototype, "ariaPressed", void 0);
(0,_utilities_apply_mixins_js__WEBPACK_IMPORTED_MODULE_3__.applyMixins)(DelegatesARIAButton, _patterns_index_js__WEBPACK_IMPORTED_MODULE_4__.ARIAGlobalStatesAndProperties);
(0,_utilities_apply_mixins_js__WEBPACK_IMPORTED_MODULE_3__.applyMixins)(Button, _patterns_index_js__WEBPACK_IMPORTED_MODULE_5__.StartEnd, DelegatesARIAButton);


/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/button/button.template.js":
/*!************************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/button/button.template.js ***!
  \************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   buttonTemplate: () => (/* binding */ buttonTemplate)
/* harmony export */ });
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @microsoft/fast-element */ "webpack/sharing/consume/default/@microsoft/fast-element/@microsoft/fast-element");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _patterns_start_end_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../patterns/start-end.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/patterns/start-end.js");


/**
 * The template for the {@link @microsoft/fast-foundation#(Button:class)} component.
 * @public
 */
const buttonTemplate = (context, definition) => (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.html) `
    <button
        class="control"
        part="control"
        ?autofocus="${x => x.autofocus}"
        ?disabled="${x => x.disabled}"
        form="${x => x.formId}"
        formaction="${x => x.formaction}"
        formenctype="${x => x.formenctype}"
        formmethod="${x => x.formmethod}"
        formnovalidate="${x => x.formnovalidate}"
        formtarget="${x => x.formtarget}"
        name="${x => x.name}"
        type="${x => x.type}"
        value="${x => x.value}"
        aria-atomic="${x => x.ariaAtomic}"
        aria-busy="${x => x.ariaBusy}"
        aria-controls="${x => x.ariaControls}"
        aria-current="${x => x.ariaCurrent}"
        aria-describedby="${x => x.ariaDescribedby}"
        aria-details="${x => x.ariaDetails}"
        aria-disabled="${x => x.ariaDisabled}"
        aria-errormessage="${x => x.ariaErrormessage}"
        aria-expanded="${x => x.ariaExpanded}"
        aria-flowto="${x => x.ariaFlowto}"
        aria-haspopup="${x => x.ariaHaspopup}"
        aria-hidden="${x => x.ariaHidden}"
        aria-invalid="${x => x.ariaInvalid}"
        aria-keyshortcuts="${x => x.ariaKeyshortcuts}"
        aria-label="${x => x.ariaLabel}"
        aria-labelledby="${x => x.ariaLabelledby}"
        aria-live="${x => x.ariaLive}"
        aria-owns="${x => x.ariaOwns}"
        aria-pressed="${x => x.ariaPressed}"
        aria-relevant="${x => x.ariaRelevant}"
        aria-roledescription="${x => x.ariaRoledescription}"
        ${(0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.ref)("control")}
    >
        ${(0,_patterns_start_end_js__WEBPACK_IMPORTED_MODULE_1__.startSlotTemplate)(context, definition)}
        <span class="content" part="content">
            <slot ${(0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.slotted)("defaultSlottedContent")}></slot>
        </span>
        ${(0,_patterns_start_end_js__WEBPACK_IMPORTED_MODULE_1__.endSlotTemplate)(context, definition)}
    </button>
`;


/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/button/index.js":
/*!**************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/button/index.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Button: () => (/* reexport safe */ _button_js__WEBPACK_IMPORTED_MODULE_1__.Button),
/* harmony export */   DelegatesARIAButton: () => (/* reexport safe */ _button_js__WEBPACK_IMPORTED_MODULE_1__.DelegatesARIAButton),
/* harmony export */   buttonTemplate: () => (/* reexport safe */ _button_template_js__WEBPACK_IMPORTED_MODULE_0__.buttonTemplate)
/* harmony export */ });
/* harmony import */ var _button_template_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./button.template.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/button/button.template.js");
/* harmony import */ var _button_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./button.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/button/button.js");




/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/calendar/calendar.js":
/*!*******************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/calendar/calendar.js ***!
  \*******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Calendar: () => (/* binding */ Calendar)
/* harmony export */ });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! tslib */ "./node_modules/@microsoft/fast-foundation/node_modules/tslib/tslib.es6.js");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @microsoft/fast-element */ "webpack/sharing/consume/default/@microsoft/fast-element/@microsoft/fast-element");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @microsoft/fast-web-utilities */ "./node_modules/@microsoft/fast-web-utilities/dist/key-codes.js");
/* harmony import */ var _foundation_element_foundation_element_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../foundation-element/foundation-element.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/foundation-element/foundation-element.js");
/* harmony import */ var _date_formatter_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./date-formatter.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/calendar/date-formatter.js");





/**
 * Calendar component
 *
 * @slot - The default slot for calendar content
 * @fires dateselected - Fires a custom 'dateselected' event when Enter is invoked via keyboard on a date
 *
 * @public
 */
class Calendar extends _foundation_element_foundation_element_js__WEBPACK_IMPORTED_MODULE_1__.FoundationElement {
    constructor() {
        super(...arguments);
        /**
         * date formatter utitlity for getting localized strings
         * @public
         */
        this.dateFormatter = new _date_formatter_js__WEBPACK_IMPORTED_MODULE_2__.DateFormatter();
        /**
         * Readonly attribute for turning off data-grid
         * @public
         */
        this.readonly = false;
        /**
         * String repesentation of the full locale including market, calendar type and numbering system
         * @public
         */
        this.locale = "en-US";
        /**
         * Month to display
         * @public
         */
        this.month = new Date().getMonth() + 1;
        /**
         * Year of the month to display
         * @public
         */
        this.year = new Date().getFullYear();
        /**
         * Format style for the day
         * @public
         */
        this.dayFormat = "numeric";
        /**
         * Format style for the week day labels
         * @public
         */
        this.weekdayFormat = "short";
        /**
         * Format style for the month label
         * @public
         */
        this.monthFormat = "long";
        /**
         * Format style for the year used in the title
         * @public
         */
        this.yearFormat = "numeric";
        /**
         * Minimum number of weeks to show for the month
         * This can be used to normalize the calendar view
         *  when changing or across multiple calendars
         * @public
         */
        this.minWeeks = 0;
        /**
         * A list of dates that should be shown as disabled
         * @public
         */
        this.disabledDates = "";
        /**
         * A list of dates that should be shown as highlighted
         * @public
         */
        this.selectedDates = "";
        /**
         * The number of miliseconds in a day
         * @internal
         */
        this.oneDayInMs = 86400000;
    }
    localeChanged() {
        this.dateFormatter.locale = this.locale;
    }
    dayFormatChanged() {
        this.dateFormatter.dayFormat = this.dayFormat;
    }
    weekdayFormatChanged() {
        this.dateFormatter.weekdayFormat = this.weekdayFormat;
    }
    monthFormatChanged() {
        this.dateFormatter.monthFormat = this.monthFormat;
    }
    yearFormatChanged() {
        this.dateFormatter.yearFormat = this.yearFormat;
    }
    /**
     * Gets data needed to render about a calendar month as well as the previous and next months
     * @param year - year of the calendar
     * @param month - month of the calendar
     * @returns - an object with data about the current and 2 surrounding months
     * @public
     */
    getMonthInfo(month = this.month, year = this.year) {
        const getFirstDay = (date) => new Date(date.getFullYear(), date.getMonth(), 1).getDay();
        const getLength = (date) => {
            const nextMonth = new Date(date.getFullYear(), date.getMonth() + 1, 1);
            return new Date(nextMonth.getTime() - this.oneDayInMs).getDate();
        };
        const thisMonth = new Date(year, month - 1);
        const nextMonth = new Date(year, month);
        const previousMonth = new Date(year, month - 2);
        return {
            length: getLength(thisMonth),
            month,
            start: getFirstDay(thisMonth),
            year,
            previous: {
                length: getLength(previousMonth),
                month: previousMonth.getMonth() + 1,
                start: getFirstDay(previousMonth),
                year: previousMonth.getFullYear(),
            },
            next: {
                length: getLength(nextMonth),
                month: nextMonth.getMonth() + 1,
                start: getFirstDay(nextMonth),
                year: nextMonth.getFullYear(),
            },
        };
    }
    /**
     * A list of calendar days
     * @param info - an object containing the information needed to render a calendar month
     * @param minWeeks - minimum number of weeks to show
     * @returns a list of days in a calendar month
     * @public
     */
    getDays(info = this.getMonthInfo(), minWeeks = this.minWeeks) {
        minWeeks = minWeeks > 10 ? 10 : minWeeks;
        const { start, length, previous, next } = info;
        const days = [];
        let dayCount = 1 - start;
        while (dayCount < length + 1 ||
            days.length < minWeeks ||
            days[days.length - 1].length % 7 !== 0) {
            const { month, year } = dayCount < 1 ? previous : dayCount > length ? next : info;
            const day = dayCount < 1
                ? previous.length + dayCount
                : dayCount > length
                    ? dayCount - length
                    : dayCount;
            const dateString = `${month}-${day}-${year}`;
            const disabled = this.dateInString(dateString, this.disabledDates);
            const selected = this.dateInString(dateString, this.selectedDates);
            const date = {
                day,
                month,
                year,
                disabled,
                selected,
            };
            const target = days[days.length - 1];
            if (days.length === 0 || target.length % 7 === 0) {
                days.push([date]);
            }
            else {
                target.push(date);
            }
            dayCount++;
        }
        return days;
    }
    /**
     * A helper function that checks if a date exists in a list of dates
     * @param date - A date objec that includes the day, month and year
     * @param datesString - a comma separated list of dates
     * @returns - Returns true if it found the date in the list of dates
     * @public
     */
    dateInString(date, datesString) {
        const dates = datesString.split(",").map(str => str.trim());
        date =
            typeof date === "string"
                ? date
                : `${date.getMonth() + 1}-${date.getDate()}-${date.getFullYear()}`;
        return dates.some(d => d === date);
    }
    /**
     * Creates a class string for the day container
     * @param date - date of the calendar cell
     * @returns - string of class names
     * @public
     */
    getDayClassNames(date, todayString) {
        const { day, month, year, disabled, selected } = date;
        const today = todayString === `${month}-${day}-${year}`;
        const inactive = this.month !== month;
        return [
            "day",
            today && "today",
            inactive && "inactive",
            disabled && "disabled",
            selected && "selected",
        ]
            .filter(Boolean)
            .join(" ");
    }
    /**
     * Returns a list of weekday labels
     * @returns An array of weekday text and full text if abbreviated
     * @public
     */
    getWeekdayText() {
        const weekdayText = this.dateFormatter.getWeekdays().map(text => ({ text }));
        if (this.weekdayFormat !== "long") {
            const longText = this.dateFormatter.getWeekdays("long");
            weekdayText.forEach((weekday, index) => {
                weekday.abbr = longText[index];
            });
        }
        return weekdayText;
    }
    /**
     * Emits the "date-select" event with the day, month and year.
     * @param date - Date cell
     * @public
     */
    handleDateSelect(event, day) {
        event.preventDefault;
        this.$emit("dateselected", day);
    }
    /**
     * Handles keyboard events on a cell
     * @param event - Keyboard event
     * @param date - Date of the cell selected
     */
    handleKeydown(event, date) {
        if (event.key === _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_3__.keyEnter) {
            this.handleDateSelect(event, date);
        }
        return true;
    }
}
(0,tslib__WEBPACK_IMPORTED_MODULE_4__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ mode: "boolean" })
], Calendar.prototype, "readonly", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_4__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr
], Calendar.prototype, "locale", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_4__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ converter: _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.nullableNumberConverter })
], Calendar.prototype, "month", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_4__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ converter: _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.nullableNumberConverter })
], Calendar.prototype, "year", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_4__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ attribute: "day-format", mode: "fromView" })
], Calendar.prototype, "dayFormat", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_4__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ attribute: "weekday-format", mode: "fromView" })
], Calendar.prototype, "weekdayFormat", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_4__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ attribute: "month-format", mode: "fromView" })
], Calendar.prototype, "monthFormat", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_4__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ attribute: "year-format", mode: "fromView" })
], Calendar.prototype, "yearFormat", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_4__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ attribute: "min-weeks", converter: _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.nullableNumberConverter })
], Calendar.prototype, "minWeeks", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_4__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ attribute: "disabled-dates" })
], Calendar.prototype, "disabledDates", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_4__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ attribute: "selected-dates" })
], Calendar.prototype, "selectedDates", void 0);


/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/calendar/calendar.template.js":
/*!****************************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/calendar/calendar.template.js ***!
  \****************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   CalendarTitleTemplate: () => (/* binding */ CalendarTitleTemplate),
/* harmony export */   calendarCellTemplate: () => (/* binding */ calendarCellTemplate),
/* harmony export */   calendarRowTemplate: () => (/* binding */ calendarRowTemplate),
/* harmony export */   calendarTemplate: () => (/* binding */ calendarTemplate),
/* harmony export */   calendarWeekdayTemplate: () => (/* binding */ calendarWeekdayTemplate),
/* harmony export */   interactiveCalendarGridTemplate: () => (/* binding */ interactiveCalendarGridTemplate),
/* harmony export */   noninteractiveCalendarTemplate: () => (/* binding */ noninteractiveCalendarTemplate)
/* harmony export */ });
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @microsoft/fast-element */ "webpack/sharing/consume/default/@microsoft/fast-element/@microsoft/fast-element");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _patterns_start_end_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../patterns/start-end.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/patterns/start-end.js");
/* harmony import */ var _data_grid_index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../data-grid/index.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/data-grid/data-grid-cell.js");
/* harmony import */ var _data_grid_index_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../data-grid/index.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/data-grid/data-grid-row.js");
/* harmony import */ var _data_grid_index_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../data-grid/index.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/data-grid/data-grid.js");



/**
 * A basic Calendar title template that includes the month and year
 * @returns - A calendar title template
 * @public
 */
const CalendarTitleTemplate = (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.html) `
    <div
        class="title"
        part="title"
        aria-label="${(x) => x.dateFormatter.getDate(`${x.month}-2-${x.year}`, {
    month: "long",
    year: "numeric",
})}"
    >
        <span part="month">
            ${(x) => x.dateFormatter.getMonth(x.month)}
        </span>
        <span part="year">${(x) => x.dateFormatter.getYear(x.year)}</span>
    </div>
`;
/**
 * Calendar weekday label template
 * @returns - The weekday labels template
 * @public
 */
const calendarWeekdayTemplate = context => {
    const cellTag = context.tagFor(_data_grid_index_js__WEBPACK_IMPORTED_MODULE_1__.DataGridCell);
    return (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.html) `
        <${cellTag}
            class="week-day"
            part="week-day"
            tabindex="-1"
            grid-column="${(x, c) => c.index + 1}"
            abbr="${x => x.abbr}"
        >
            ${x => x.text}
        </${cellTag}>
    `;
};
/**
 * A calendar day template
 * @param context - Element definition context for getting the cell tag for calendar-cell
 * @param todayString - A string representation for todays date
 * @returns - A calendar cell template for a given date
 * @public
 */
const calendarCellTemplate = (context, todayString) => {
    const cellTag = context.tagFor(_data_grid_index_js__WEBPACK_IMPORTED_MODULE_1__.DataGridCell);
    return (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.html) `
        <${cellTag}
            class="${(x, c) => c.parentContext.parent.getDayClassNames(x, todayString)}"
            part="day"
            tabindex="-1"
            role="gridcell"
            grid-column="${(x, c) => c.index + 1}"
            @click="${(x, c) => c.parentContext.parent.handleDateSelect(c.event, x)}"
            @keydown="${(x, c) => c.parentContext.parent.handleKeydown(c.event, x)}"
            aria-label="${(x, c) => c.parentContext.parent.dateFormatter.getDate(`${x.month}-${x.day}-${x.year}`, { month: "long", day: "numeric" })}"
        >
            <div
                class="date"
                part="${x => todayString === `${x.month}-${x.day}-${x.year}` ? "today" : "date"}"
            >
                ${(x, c) => c.parentContext.parent.dateFormatter.getDay(x.day)}
            </div>
            <slot name="${x => x.month}-${x => x.day}-${x => x.year}"></slot>
        </${cellTag}>
    `;
};
/**
 *
 * @param context - Element definition context for getting the cell tag for calendar-cell
 * @param todayString - A string representation for todays date
 * @returns - A template for a week of days
 * @public
 */
const calendarRowTemplate = (context, todayString) => {
    const rowTag = context.tagFor(_data_grid_index_js__WEBPACK_IMPORTED_MODULE_2__.DataGridRow);
    return (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.html) `
        <${rowTag}
            class="week"
            part="week"
            role="row"
            role-type="default"
            grid-template-columns="1fr 1fr 1fr 1fr 1fr 1fr 1fr"
        >
        ${(0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.repeat)(x => x, calendarCellTemplate(context, todayString), {
        positioning: true,
    })}
        </${rowTag}>
    `;
};
/**
 * Interactive template using DataGrid
 * @param context - The templates context
 * @param todayString - string representation of todays date
 * @returns - interactive calendar template
 *
 * @internal
 */
const interactiveCalendarGridTemplate = (context, todayString) => {
    const gridTag = context.tagFor(_data_grid_index_js__WEBPACK_IMPORTED_MODULE_3__.DataGrid);
    const rowTag = context.tagFor(_data_grid_index_js__WEBPACK_IMPORTED_MODULE_2__.DataGridRow);
    return (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.html) `
    <${gridTag} class="days interact" part="days" generate-header="none">
        <${rowTag}
            class="week-days"
            part="week-days"
            role="row"
            row-type="header"
            grid-template-columns="1fr 1fr 1fr 1fr 1fr 1fr 1fr"
        >
            ${(0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.repeat)(x => x.getWeekdayText(), calendarWeekdayTemplate(context), {
        positioning: true,
    })}
        </${rowTag}>
        ${(0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.repeat)(x => x.getDays(), calendarRowTemplate(context, todayString))}
    </${gridTag}>
`;
};
/**
 * Non-interactive calendar template used for a readonly calendar
 * @param todayString - string representation of todays date
 * @returns - non-interactive calendar template
 *
 * @internal
 */
const noninteractiveCalendarTemplate = (todayString) => {
    return (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.html) `
        <div class="days" part="days">
            <div class="week-days" part="week-days">
                ${(0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.repeat)(x => x.getWeekdayText(), (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.html) `
                        <div class="week-day" part="week-day" abbr="${x => x.abbr}">
                            ${x => x.text}
                        </div>
                    `)}
            </div>
            ${(0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.repeat)(x => x.getDays(), (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.html) `
                    <div class="week">
                        ${(0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.repeat)(x => x, (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.html) `
                                <div
                                    class="${(x, c) => c.parentContext.parent.getDayClassNames(x, todayString)}"
                                    part="day"
                                    aria-label="${(x, c) => c.parentContext.parent.dateFormatter.getDate(`${x.month}-${x.day}-${x.year}`, { month: "long", day: "numeric" })}"
                                >
                                    <div
                                        class="date"
                                        part="${x => todayString ===
        `${x.month}-${x.day}-${x.year}`
        ? "today"
        : "date"}"
                                    >
                                        ${(x, c) => c.parentContext.parent.dateFormatter.getDay(x.day)}
                                    </div>
                                    <slot
                                        name="${x => x.month}-${x => x.day}-${x => x.year}"
                                    ></slot>
                                </div>
                            `)}
                    </div>
                `)}
        </div>
    `;
};
/**
 * The template for the {@link @microsoft/fast-foundation#(Calendar:class)} component.
 *
 * @param context - Element definition context for getting the cell tag for calendar-cell
 * @param definition - Foundation element definition
 * @returns - a template for a calendar month
 * @public
 */
const calendarTemplate = (context, definition) => {
    var _a;
    const today = new Date();
    const todayString = `${today.getMonth() + 1}-${today.getDate()}-${today.getFullYear()}`;
    return (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.html) `
        <template>
            ${_patterns_start_end_js__WEBPACK_IMPORTED_MODULE_4__.startTemplate}
            ${definition.title instanceof Function
        ? definition.title(context, definition)
        : (_a = definition.title) !== null && _a !== void 0 ? _a : ""}
            <slot></slot>
            ${(0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.when)(x => x.readonly, noninteractiveCalendarTemplate(todayString), interactiveCalendarGridTemplate(context, todayString))}
            ${_patterns_start_end_js__WEBPACK_IMPORTED_MODULE_4__.endTemplate}
        </template>
    `;
};


/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/calendar/date-formatter.js":
/*!*************************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/calendar/date-formatter.js ***!
  \*************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DateFormatter: () => (/* binding */ DateFormatter)
/* harmony export */ });
/**
 * Date formatting utility
 * @public
 */
class DateFormatter {
    constructor(config) {
        /**
         * Formatting for the day
         * @public
         */
        this.dayFormat = "numeric";
        /**
         * Formatting for the weekday labels
         * @public
         */
        this.weekdayFormat = "long";
        /**
         * Formatting for the month
         * @public
         */
        this.monthFormat = "long";
        /**
         * Formatting for the year
         * @public
         */
        this.yearFormat = "numeric";
        /**
         * Date used for formatting
         */
        this.date = new Date();
        /**
         * Add properties on construction
         */
        if (config) {
            for (const key in config) {
                const value = config[key];
                if (key === "date") {
                    this.date = this.getDateObject(value);
                }
                else {
                    this[key] = value;
                }
            }
        }
    }
    /**
     * Helper function to make sure that the DateFormatter is working with an instance of Date
     * @param date - The date as an object, string or Date insance
     * @returns - A Date instance
     * @public
     */
    getDateObject(date) {
        if (typeof date === "string") {
            const dates = date.split(/[/-]/);
            if (dates.length < 3) {
                return new Date();
            }
            return new Date(parseInt(dates[2], 10), parseInt(dates[0], 10) - 1, parseInt(dates[1], 10));
        }
        else if ("day" in date && "month" in date && "year" in date) {
            const { day, month, year } = date;
            return new Date(year, month - 1, day);
        }
        return date;
    }
    /**
     *
     * @param date - a valide date as either a Date, string, objec or a DateFormatter
     * @param format - The formatting for the string
     * @param locale - locale data used for formatting
     * @returns A localized string of the date provided
     * @public
     */
    getDate(date = this.date, format = {
        weekday: this.weekdayFormat,
        month: this.monthFormat,
        day: this.dayFormat,
        year: this.yearFormat,
    }, locale = this.locale) {
        const dateObj = this.getDateObject(date);
        if (!dateObj.getTime()) {
            return "";
        }
        const optionsWithTimeZone = Object.assign({ timeZone: Intl.DateTimeFormat().resolvedOptions().timeZone }, format);
        return new Intl.DateTimeFormat(locale, optionsWithTimeZone).format(dateObj);
    }
    /**
     *
     * @param day - Day to localize
     * @param format - The formatting for the day
     * @param locale - The locale data used for formatting
     * @returns - A localized number for the day
     * @public
     */
    getDay(day = this.date.getDate(), format = this.dayFormat, locale = this.locale) {
        return this.getDate({ month: 1, day, year: 2020 }, { day: format }, locale);
    }
    /**
     *
     * @param month - The month to localize
     * @param format - The formatting for the month
     * @param locale - The locale data used for formatting
     * @returns - A localized name of the month
     * @public
     */
    getMonth(month = this.date.getMonth() + 1, format = this.monthFormat, locale = this.locale) {
        return this.getDate({ month, day: 2, year: 2020 }, { month: format }, locale);
    }
    /**
     *
     * @param year - The year to localize
     * @param format - The formatting for the year
     * @param locale - The locale data used for formatting
     * @returns - A localized string for the year
     * @public
     */
    getYear(year = this.date.getFullYear(), format = this.yearFormat, locale = this.locale) {
        return this.getDate({ month: 2, day: 2, year }, { year: format }, locale);
    }
    /**
     *
     * @param weekday - The number of the weekday, defaults to Sunday
     * @param format - The formatting for the weekday label
     * @param locale - The locale data used for formatting
     * @returns - A formatted weekday label
     * @public
     */
    getWeekday(weekday = 0, format = this.weekdayFormat, locale = this.locale) {
        const date = `1-${weekday + 1}-2017`;
        return this.getDate(date, { weekday: format }, locale);
    }
    /**
     *
     * @param format - The formatting for the weekdays
     * @param locale - The locale data used for formatting
     * @returns - An array of the weekday labels
     * @public
     */
    getWeekdays(format = this.weekdayFormat, locale = this.locale) {
        return Array(7)
            .fill(null)
            .map((_, day) => this.getWeekday(day, format, locale));
    }
}


/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/calendar/index.js":
/*!****************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/calendar/index.js ***!
  \****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Calendar: () => (/* reexport safe */ _calendar_js__WEBPACK_IMPORTED_MODULE_0__.Calendar),
/* harmony export */   CalendarTitleTemplate: () => (/* reexport safe */ _calendar_template_js__WEBPACK_IMPORTED_MODULE_1__.CalendarTitleTemplate),
/* harmony export */   DateFormatter: () => (/* reexport safe */ _date_formatter_js__WEBPACK_IMPORTED_MODULE_2__.DateFormatter),
/* harmony export */   calendarCellTemplate: () => (/* reexport safe */ _calendar_template_js__WEBPACK_IMPORTED_MODULE_1__.calendarCellTemplate),
/* harmony export */   calendarRowTemplate: () => (/* reexport safe */ _calendar_template_js__WEBPACK_IMPORTED_MODULE_1__.calendarRowTemplate),
/* harmony export */   calendarTemplate: () => (/* reexport safe */ _calendar_template_js__WEBPACK_IMPORTED_MODULE_1__.calendarTemplate),
/* harmony export */   calendarWeekdayTemplate: () => (/* reexport safe */ _calendar_template_js__WEBPACK_IMPORTED_MODULE_1__.calendarWeekdayTemplate),
/* harmony export */   interactiveCalendarGridTemplate: () => (/* reexport safe */ _calendar_template_js__WEBPACK_IMPORTED_MODULE_1__.interactiveCalendarGridTemplate),
/* harmony export */   noninteractiveCalendarTemplate: () => (/* reexport safe */ _calendar_template_js__WEBPACK_IMPORTED_MODULE_1__.noninteractiveCalendarTemplate)
/* harmony export */ });
/* harmony import */ var _calendar_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./calendar.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/calendar/calendar.js");
/* harmony import */ var _calendar_template_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./calendar.template.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/calendar/calendar.template.js");
/* harmony import */ var _date_formatter_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./date-formatter.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/calendar/date-formatter.js");





/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/card/card.js":
/*!***********************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/card/card.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Card: () => (/* binding */ Card)
/* harmony export */ });
/* harmony import */ var _foundation_element_foundation_element_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../foundation-element/foundation-element.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/foundation-element/foundation-element.js");

/**
 * An Card Custom HTML Element.
 *
 * @slot - The default slot for the card content
 *
 * @public
 */
class Card extends _foundation_element_foundation_element_js__WEBPACK_IMPORTED_MODULE_0__.FoundationElement {
}


/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/card/card.template.js":
/*!********************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/card/card.template.js ***!
  \********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   cardTemplate: () => (/* binding */ cardTemplate)
/* harmony export */ });
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @microsoft/fast-element */ "webpack/sharing/consume/default/@microsoft/fast-element/@microsoft/fast-element");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__);

/**
 * The template for the {@link @microsoft/fast-foundation#Card} component.
 * @public
 */
const cardTemplate = (context, definition) => (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.html) `
    <slot></slot>
`;


/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/card/index.js":
/*!************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/card/index.js ***!
  \************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Card: () => (/* reexport safe */ _card_js__WEBPACK_IMPORTED_MODULE_1__.Card),
/* harmony export */   cardTemplate: () => (/* reexport safe */ _card_template_js__WEBPACK_IMPORTED_MODULE_0__.cardTemplate)
/* harmony export */ });
/* harmony import */ var _card_template_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./card.template.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/card/card.template.js");
/* harmony import */ var _card_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./card.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/card/card.js");




/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/checkbox/checkbox.form-associated.js":
/*!***********************************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/checkbox/checkbox.form-associated.js ***!
  \***********************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   FormAssociatedCheckbox: () => (/* binding */ FormAssociatedCheckbox)
/* harmony export */ });
/* harmony import */ var _form_associated_form_associated_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../form-associated/form-associated.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/form-associated/form-associated.js");
/* harmony import */ var _foundation_element_foundation_element_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../foundation-element/foundation-element.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/foundation-element/foundation-element.js");


class _Checkbox extends _foundation_element_foundation_element_js__WEBPACK_IMPORTED_MODULE_0__.FoundationElement {
}
/**
 * A form-associated base class for the {@link @microsoft/fast-foundation#(Checkbox:class)} component.
 *
 * @internal
 */
class FormAssociatedCheckbox extends (0,_form_associated_form_associated_js__WEBPACK_IMPORTED_MODULE_1__.CheckableFormAssociated)(_Checkbox) {
    constructor() {
        super(...arguments);
        this.proxy = document.createElement("input");
    }
}


/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/checkbox/checkbox.js":
/*!*******************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/checkbox/checkbox.js ***!
  \*******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Checkbox: () => (/* binding */ Checkbox)
/* harmony export */ });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! tslib */ "./node_modules/@microsoft/fast-foundation/node_modules/tslib/tslib.es6.js");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @microsoft/fast-element */ "webpack/sharing/consume/default/@microsoft/fast-element/@microsoft/fast-element");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @microsoft/fast-web-utilities */ "./node_modules/@microsoft/fast-web-utilities/dist/key-codes.js");
/* harmony import */ var _checkbox_form_associated_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./checkbox.form-associated.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/checkbox/checkbox.form-associated.js");




/**
 * A Checkbox Custom HTML Element.
 * Implements the {@link https://www.w3.org/TR/wai-aria-1.1/#checkbox | ARIA checkbox }.
 *
 * @slot checked-indicator - The checked indicator
 * @slot indeterminate-indicator - The indeterminate indicator
 * @slot - The default slot for the label
 * @csspart control - The element representing the visual checkbox control
 * @csspart label - The label
 * @fires change - Emits a custom change event when the checked state changes
 *
 * @public
 */
class Checkbox extends _checkbox_form_associated_js__WEBPACK_IMPORTED_MODULE_1__.FormAssociatedCheckbox {
    constructor() {
        super();
        /**
         * The element's value to be included in form submission when checked.
         * Default to "on" to reach parity with input[type="checkbox"]
         *
         * @internal
         */
        this.initialValue = "on";
        /**
         * The indeterminate state of the control
         */
        this.indeterminate = false;
        /**
         * @internal
         */
        this.keypressHandler = (e) => {
            if (this.readOnly) {
                return;
            }
            switch (e.key) {
                case _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_2__.keySpace:
                    if (this.indeterminate) {
                        this.indeterminate = false;
                    }
                    this.checked = !this.checked;
                    break;
            }
        };
        /**
         * @internal
         */
        this.clickHandler = (e) => {
            if (!this.disabled && !this.readOnly) {
                if (this.indeterminate) {
                    this.indeterminate = false;
                }
                this.checked = !this.checked;
            }
        };
        this.proxy.setAttribute("type", "checkbox");
    }
    readOnlyChanged() {
        if (this.proxy instanceof HTMLInputElement) {
            this.proxy.readOnly = this.readOnly;
        }
    }
}
(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ attribute: "readonly", mode: "boolean" })
], Checkbox.prototype, "readOnly", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.observable
], Checkbox.prototype, "defaultSlottedNodes", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.observable
], Checkbox.prototype, "indeterminate", void 0);


/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/checkbox/checkbox.template.js":
/*!****************************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/checkbox/checkbox.template.js ***!
  \****************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   checkboxTemplate: () => (/* binding */ checkboxTemplate)
/* harmony export */ });
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @microsoft/fast-element */ "webpack/sharing/consume/default/@microsoft/fast-element/@microsoft/fast-element");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__);

/**
 * The template for the {@link @microsoft/fast-foundation#(Checkbox:class)} component.
 * @public
 */
const checkboxTemplate = (context, definition) => (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.html) `
    <template
        role="checkbox"
        aria-checked="${x => x.checked}"
        aria-required="${x => x.required}"
        aria-disabled="${x => x.disabled}"
        aria-readonly="${x => x.readOnly}"
        tabindex="${x => (x.disabled ? null : 0)}"
        @keypress="${(x, c) => x.keypressHandler(c.event)}"
        @click="${(x, c) => x.clickHandler(c.event)}"
        class="${x => (x.readOnly ? "readonly" : "")} ${x => x.checked ? "checked" : ""} ${x => (x.indeterminate ? "indeterminate" : "")}"
    >
        <div part="control" class="control">
            <slot name="checked-indicator">
                ${definition.checkedIndicator || ""}
            </slot>
            <slot name="indeterminate-indicator">
                ${definition.indeterminateIndicator || ""}
            </slot>
        </div>
        <label
            part="label"
            class="${x => x.defaultSlottedNodes && x.defaultSlottedNodes.length
    ? "label"
    : "label label__hidden"}"
        >
            <slot ${(0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.slotted)("defaultSlottedNodes")}></slot>
        </label>
    </template>
`;


/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/checkbox/index.js":
/*!****************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/checkbox/index.js ***!
  \****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Checkbox: () => (/* reexport safe */ _checkbox_js__WEBPACK_IMPORTED_MODULE_1__.Checkbox),
/* harmony export */   checkboxTemplate: () => (/* reexport safe */ _checkbox_template_js__WEBPACK_IMPORTED_MODULE_0__.checkboxTemplate)
/* harmony export */ });
/* harmony import */ var _checkbox_template_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./checkbox.template.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/checkbox/checkbox.template.js");
/* harmony import */ var _checkbox_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./checkbox.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/checkbox/checkbox.js");




/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/combobox/combobox.form-associated.js":
/*!***********************************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/combobox/combobox.form-associated.js ***!
  \***********************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   FormAssociatedCombobox: () => (/* binding */ FormAssociatedCombobox)
/* harmony export */ });
/* harmony import */ var _form_associated_form_associated_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../form-associated/form-associated.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/form-associated/form-associated.js");
/* harmony import */ var _listbox_listbox_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../listbox/listbox.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/listbox/listbox.js");


class _Combobox extends _listbox_listbox_js__WEBPACK_IMPORTED_MODULE_0__.Listbox {
}
/**
 * A form-associated base class for the {@link (Combobox:class)} component.
 *
 * @internal
 */
class FormAssociatedCombobox extends (0,_form_associated_form_associated_js__WEBPACK_IMPORTED_MODULE_1__.FormAssociated)(_Combobox) {
    constructor() {
        super(...arguments);
        this.proxy = document.createElement("input");
    }
}


/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/combobox/combobox.js":
/*!*******************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/combobox/combobox.js ***!
  \*******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Combobox: () => (/* binding */ Combobox),
/* harmony export */   DelegatesARIACombobox: () => (/* binding */ DelegatesARIACombobox)
/* harmony export */ });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! tslib */ "./node_modules/@microsoft/fast-foundation/node_modules/tslib/tslib.es6.js");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @microsoft/fast-element */ "webpack/sharing/consume/default/@microsoft/fast-element/@microsoft/fast-element");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @microsoft/fast-web-utilities */ "./node_modules/@microsoft/fast-web-utilities/dist/strings.js");
/* harmony import */ var _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @microsoft/fast-web-utilities */ "./node_modules/@microsoft/fast-web-utilities/dist/numbers.js");
/* harmony import */ var _listbox_listbox_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../listbox/listbox.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/listbox/listbox.js");
/* harmony import */ var _patterns_start_end_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../patterns/start-end.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/patterns/start-end.js");
/* harmony import */ var _select_select_options_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../select/select.options.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/select/select.options.js");
/* harmony import */ var _utilities_apply_mixins_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../utilities/apply-mixins.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/utilities/apply-mixins.js");
/* harmony import */ var _combobox_form_associated_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./combobox.form-associated.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/combobox/combobox.form-associated.js");
/* harmony import */ var _combobox_options_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./combobox.options.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/combobox/combobox.options.js");









/**
 * A Combobox Custom HTML Element.
 * Implements the {@link https://w3c.github.io/aria-practices/#combobox | ARIA combobox }.
 *
 * @slot start - Content which can be provided before the input
 * @slot end - Content which can be provided after the input
 * @slot control - Used to replace the input element representing the combobox
 * @slot indicator - The visual indicator representing the expanded state
 * @slot - The default slot for the options
 * @csspart control - The wrapper element containing the input area, including start and end
 * @csspart selected-value - The input element representing the selected value
 * @csspart indicator - The element wrapping the indicator slot
 * @csspart listbox - The wrapper for the listbox slotted options
 * @fires change - Fires a custom 'change' event when the value updates
 *
 * @public
 */
class Combobox extends _combobox_form_associated_js__WEBPACK_IMPORTED_MODULE_1__.FormAssociatedCombobox {
    constructor() {
        super(...arguments);
        /**
         * The internal value property.
         *
         * @internal
         */
        this._value = "";
        /**
         * The collection of currently filtered options.
         *
         * @public
         */
        this.filteredOptions = [];
        /**
         * The current filter value.
         *
         * @internal
         */
        this.filter = "";
        /**
         * The initial state of the position attribute.
         *
         * @internal
         */
        this.forcedPosition = false;
        /**
         * The unique id for the internal listbox element.
         *
         * @internal
         */
        this.listboxId = (0,_microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_2__.uniqueId)("listbox-");
        /**
         * The max height for the listbox when opened.
         *
         * @internal
         */
        this.maxHeight = 0;
        /**
         * The open attribute.
         *
         * @public
         * @remarks
         * HTML Attribute: open
         */
        this.open = false;
    }
    /**
     * Reset the element to its first selectable option when its parent form is reset.
     *
     * @internal
     */
    formResetCallback() {
        super.formResetCallback();
        this.setDefaultSelectedOption();
        this.updateValue();
    }
    /** {@inheritDoc (FormAssociated:interface).validate} */
    validate() {
        super.validate(this.control);
    }
    get isAutocompleteInline() {
        return (this.autocomplete === _combobox_options_js__WEBPACK_IMPORTED_MODULE_3__.ComboboxAutocomplete.inline || this.isAutocompleteBoth);
    }
    get isAutocompleteList() {
        return this.autocomplete === _combobox_options_js__WEBPACK_IMPORTED_MODULE_3__.ComboboxAutocomplete.list || this.isAutocompleteBoth;
    }
    get isAutocompleteBoth() {
        return this.autocomplete === _combobox_options_js__WEBPACK_IMPORTED_MODULE_3__.ComboboxAutocomplete.both;
    }
    /**
     * Sets focus and synchronize ARIA attributes when the open property changes.
     *
     * @param prev - the previous open value
     * @param next - the current open value
     *
     * @internal
     */
    openChanged() {
        if (this.open) {
            this.ariaControls = this.listboxId;
            this.ariaExpanded = "true";
            this.setPositioning();
            this.focusAndScrollOptionIntoView();
            // focus is directed to the element when `open` is changed programmatically
            _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.DOM.queueUpdate(() => this.focus());
            return;
        }
        this.ariaControls = "";
        this.ariaExpanded = "false";
    }
    /**
     * The list of options.
     *
     * @public
     * @remarks
     * Overrides `Listbox.options`.
     */
    get options() {
        _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.Observable.track(this, "options");
        return this.filteredOptions.length ? this.filteredOptions : this._options;
    }
    set options(value) {
        this._options = value;
        _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.Observable.notify(this, "options");
    }
    /**
     * Updates the placeholder on the proxy element.
     * @internal
     */
    placeholderChanged() {
        if (this.proxy instanceof HTMLInputElement) {
            this.proxy.placeholder = this.placeholder;
        }
    }
    positionChanged(prev, next) {
        this.positionAttribute = next;
        this.setPositioning();
    }
    /**
     * The value property.
     *
     * @public
     */
    get value() {
        _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.Observable.track(this, "value");
        return this._value;
    }
    set value(next) {
        var _a, _b, _c;
        const prev = `${this._value}`;
        if (this.$fastController.isConnected && this.options) {
            const selectedIndex = this.options.findIndex(el => el.text.toLowerCase() === next.toLowerCase());
            const prevSelectedValue = (_a = this.options[this.selectedIndex]) === null || _a === void 0 ? void 0 : _a.text;
            const nextSelectedValue = (_b = this.options[selectedIndex]) === null || _b === void 0 ? void 0 : _b.text;
            this.selectedIndex =
                prevSelectedValue !== nextSelectedValue
                    ? selectedIndex
                    : this.selectedIndex;
            next = ((_c = this.firstSelectedOption) === null || _c === void 0 ? void 0 : _c.text) || next;
        }
        if (prev !== next) {
            this._value = next;
            super.valueChanged(prev, next);
            _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.Observable.notify(this, "value");
        }
    }
    /**
     * Handle opening and closing the listbox when the combobox is clicked.
     *
     * @param e - the mouse event
     * @internal
     */
    clickHandler(e) {
        if (this.disabled) {
            return;
        }
        if (this.open) {
            const captured = e.target.closest(`option,[role=option]`);
            if (!captured || captured.disabled) {
                return;
            }
            this.selectedOptions = [captured];
            this.control.value = captured.text;
            this.clearSelectionRange();
            this.updateValue(true);
        }
        this.open = !this.open;
        if (this.open) {
            this.control.focus();
        }
        return true;
    }
    connectedCallback() {
        super.connectedCallback();
        this.forcedPosition = !!this.positionAttribute;
        if (this.value) {
            this.initialValue = this.value;
        }
    }
    /**
     * Synchronize the `aria-disabled` property when the `disabled` property changes.
     *
     * @param prev - The previous disabled value
     * @param next - The next disabled value
     *
     * @internal
     */
    disabledChanged(prev, next) {
        if (super.disabledChanged) {
            super.disabledChanged(prev, next);
        }
        this.ariaDisabled = this.disabled ? "true" : "false";
    }
    /**
     * Filter available options by text value.
     *
     * @public
     */
    filterOptions() {
        if (!this.autocomplete || this.autocomplete === _combobox_options_js__WEBPACK_IMPORTED_MODULE_3__.ComboboxAutocomplete.none) {
            this.filter = "";
        }
        const filter = this.filter.toLowerCase();
        this.filteredOptions = this._options.filter(o => o.text.toLowerCase().startsWith(this.filter.toLowerCase()));
        if (this.isAutocompleteList) {
            if (!this.filteredOptions.length && !filter) {
                this.filteredOptions = this._options;
            }
            this._options.forEach(o => {
                o.hidden = !this.filteredOptions.includes(o);
            });
        }
    }
    /**
     * Focus the control and scroll the first selected option into view.
     *
     * @internal
     * @remarks
     * Overrides: `Listbox.focusAndScrollOptionIntoView`
     */
    focusAndScrollOptionIntoView() {
        if (this.contains(document.activeElement)) {
            this.control.focus();
            if (this.firstSelectedOption) {
                requestAnimationFrame(() => {
                    var _a;
                    (_a = this.firstSelectedOption) === null || _a === void 0 ? void 0 : _a.scrollIntoView({ block: "nearest" });
                });
            }
        }
    }
    /**
     * Handle focus state when the element or its children lose focus.
     *
     * @param e - The focus event
     * @internal
     */
    focusoutHandler(e) {
        this.syncValue();
        if (!this.open) {
            return true;
        }
        const focusTarget = e.relatedTarget;
        if (this.isSameNode(focusTarget)) {
            this.focus();
            return;
        }
        if (!this.options || !this.options.includes(focusTarget)) {
            this.open = false;
        }
    }
    /**
     * Handle content changes on the control input.
     *
     * @param e - the input event
     * @internal
     */
    inputHandler(e) {
        this.filter = this.control.value;
        this.filterOptions();
        if (!this.isAutocompleteInline) {
            this.selectedIndex = this.options
                .map(option => option.text)
                .indexOf(this.control.value);
        }
        if (e.inputType.includes("deleteContent") || !this.filter.length) {
            return true;
        }
        if (this.isAutocompleteList && !this.open) {
            this.open = true;
        }
        if (this.isAutocompleteInline) {
            if (this.filteredOptions.length) {
                this.selectedOptions = [this.filteredOptions[0]];
                this.selectedIndex = this.options.indexOf(this.firstSelectedOption);
                this.setInlineSelection();
            }
            else {
                this.selectedIndex = -1;
            }
        }
        return;
    }
    /**
     * Handle keydown actions for listbox navigation.
     *
     * @param e - the keyboard event
     * @internal
     */
    keydownHandler(e) {
        const key = e.key;
        if (e.ctrlKey || e.shiftKey) {
            return true;
        }
        switch (key) {
            case "Enter": {
                this.syncValue();
                if (this.isAutocompleteInline) {
                    this.filter = this.value;
                }
                this.open = false;
                this.clearSelectionRange();
                break;
            }
            case "Escape": {
                if (!this.isAutocompleteInline) {
                    this.selectedIndex = -1;
                }
                if (this.open) {
                    this.open = false;
                    break;
                }
                this.value = "";
                this.control.value = "";
                this.filter = "";
                this.filterOptions();
                break;
            }
            case "Tab": {
                this.setInputToSelection();
                if (!this.open) {
                    return true;
                }
                e.preventDefault();
                this.open = false;
                break;
            }
            case "ArrowUp":
            case "ArrowDown": {
                this.filterOptions();
                if (!this.open) {
                    this.open = true;
                    break;
                }
                if (this.filteredOptions.length > 0) {
                    super.keydownHandler(e);
                }
                if (this.isAutocompleteInline) {
                    this.setInlineSelection();
                }
                break;
            }
            default: {
                return true;
            }
        }
    }
    /**
     * Handle keyup actions for value input and text field manipulations.
     *
     * @param e - the keyboard event
     * @internal
     */
    keyupHandler(e) {
        const key = e.key;
        switch (key) {
            case "ArrowLeft":
            case "ArrowRight":
            case "Backspace":
            case "Delete":
            case "Home":
            case "End": {
                this.filter = this.control.value;
                this.selectedIndex = -1;
                this.filterOptions();
                break;
            }
        }
    }
    /**
     * Ensure that the selectedIndex is within the current allowable filtered range.
     *
     * @param prev - the previous selected index value
     * @param next - the current selected index value
     *
     * @internal
     */
    selectedIndexChanged(prev, next) {
        if (this.$fastController.isConnected) {
            next = (0,_microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_4__.limit)(-1, this.options.length - 1, next);
            // we only want to call the super method when the selectedIndex is in range
            if (next !== this.selectedIndex) {
                this.selectedIndex = next;
                return;
            }
            super.selectedIndexChanged(prev, next);
        }
    }
    /**
     * Move focus to the previous selectable option.
     *
     * @internal
     * @remarks
     * Overrides `Listbox.selectPreviousOption`
     */
    selectPreviousOption() {
        if (!this.disabled && this.selectedIndex >= 0) {
            this.selectedIndex = this.selectedIndex - 1;
        }
    }
    /**
     * Set the default selected options at initialization or reset.
     *
     * @internal
     * @remarks
     * Overrides `Listbox.setDefaultSelectedOption`
     */
    setDefaultSelectedOption() {
        if (this.$fastController.isConnected && this.options) {
            const selectedIndex = this.options.findIndex(el => el.getAttribute("selected") !== null || el.selected);
            this.selectedIndex = selectedIndex;
            if (!this.dirtyValue && this.firstSelectedOption) {
                this.value = this.firstSelectedOption.text;
            }
            this.setSelectedOptions();
        }
    }
    /**
     * Focus and set the content of the control based on the first selected option.
     *
     * @internal
     */
    setInputToSelection() {
        if (this.firstSelectedOption) {
            this.control.value = this.firstSelectedOption.text;
            this.control.focus();
        }
    }
    /**
     * Focus, set and select the content of the control based on the first selected option.
     *
     * @internal
     */
    setInlineSelection() {
        if (this.firstSelectedOption) {
            this.setInputToSelection();
            this.control.setSelectionRange(this.filter.length, this.control.value.length, "backward");
        }
    }
    /**
     * Determines if a value update should involve emitting a change event, then updates the value.
     *
     * @internal
     */
    syncValue() {
        var _a;
        const newValue = this.selectedIndex > -1 ? (_a = this.firstSelectedOption) === null || _a === void 0 ? void 0 : _a.text : this.control.value;
        this.updateValue(this.value !== newValue);
    }
    /**
     * Calculate and apply listbox positioning based on available viewport space.
     *
     * @param force - direction to force the listbox to display
     * @public
     */
    setPositioning() {
        const currentBox = this.getBoundingClientRect();
        const viewportHeight = window.innerHeight;
        const availableBottom = viewportHeight - currentBox.bottom;
        this.position = this.forcedPosition
            ? this.positionAttribute
            : currentBox.top > availableBottom
                ? _select_select_options_js__WEBPACK_IMPORTED_MODULE_5__.SelectPosition.above
                : _select_select_options_js__WEBPACK_IMPORTED_MODULE_5__.SelectPosition.below;
        this.positionAttribute = this.forcedPosition
            ? this.positionAttribute
            : this.position;
        this.maxHeight =
            this.position === _select_select_options_js__WEBPACK_IMPORTED_MODULE_5__.SelectPosition.above ? ~~currentBox.top : ~~availableBottom;
    }
    /**
     * Ensure that the entire list of options is used when setting the selected property.
     *
     * @param prev - the previous list of selected options
     * @param next - the current list of selected options
     *
     * @internal
     * @remarks
     * Overrides: `Listbox.selectedOptionsChanged`
     */
    selectedOptionsChanged(prev, next) {
        if (this.$fastController.isConnected) {
            this._options.forEach(o => {
                o.selected = next.includes(o);
            });
        }
    }
    /**
     * Synchronize the form-associated proxy and update the value property of the element.
     *
     * @param prev - the previous collection of slotted option elements
     * @param next - the next collection of slotted option elements
     *
     * @internal
     */
    slottedOptionsChanged(prev, next) {
        super.slottedOptionsChanged(prev, next);
        this.updateValue();
    }
    /**
     * Sets the value and to match the first selected option.
     *
     * @param shouldEmit - if true, the change event will be emitted
     *
     * @internal
     */
    updateValue(shouldEmit) {
        var _a;
        if (this.$fastController.isConnected) {
            this.value = ((_a = this.firstSelectedOption) === null || _a === void 0 ? void 0 : _a.text) || this.control.value;
            this.control.value = this.value;
        }
        if (shouldEmit) {
            this.$emit("change");
        }
    }
    /**
     * @internal
     */
    clearSelectionRange() {
        const controlValueLength = this.control.value.length;
        this.control.setSelectionRange(controlValueLength, controlValueLength);
    }
}
(0,tslib__WEBPACK_IMPORTED_MODULE_6__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ attribute: "autocomplete", mode: "fromView" })
], Combobox.prototype, "autocomplete", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_6__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.observable
], Combobox.prototype, "maxHeight", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_6__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ attribute: "open", mode: "boolean" })
], Combobox.prototype, "open", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_6__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr
], Combobox.prototype, "placeholder", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_6__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ attribute: "position" })
], Combobox.prototype, "positionAttribute", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_6__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.observable
], Combobox.prototype, "position", void 0);
/**
 * Includes ARIA states and properties relating to the ARIA combobox role.
 *
 * @public
 */
class DelegatesARIACombobox {
}
(0,tslib__WEBPACK_IMPORTED_MODULE_6__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.observable
], DelegatesARIACombobox.prototype, "ariaAutoComplete", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_6__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.observable
], DelegatesARIACombobox.prototype, "ariaControls", void 0);
(0,_utilities_apply_mixins_js__WEBPACK_IMPORTED_MODULE_7__.applyMixins)(DelegatesARIACombobox, _listbox_listbox_js__WEBPACK_IMPORTED_MODULE_8__.DelegatesARIAListbox);
(0,_utilities_apply_mixins_js__WEBPACK_IMPORTED_MODULE_7__.applyMixins)(Combobox, _patterns_start_end_js__WEBPACK_IMPORTED_MODULE_9__.StartEnd, DelegatesARIACombobox);


/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/combobox/combobox.options.js":
/*!***************************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/combobox/combobox.options.js ***!
  \***************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ComboboxAutocomplete: () => (/* binding */ ComboboxAutocomplete)
/* harmony export */ });
/**
 * Autocomplete values for combobox.
 * @public
 */
const ComboboxAutocomplete = {
    inline: "inline",
    list: "list",
    both: "both",
    none: "none",
};


/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/combobox/combobox.template.js":
/*!****************************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/combobox/combobox.template.js ***!
  \****************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   comboboxTemplate: () => (/* binding */ comboboxTemplate)
/* harmony export */ });
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @microsoft/fast-element */ "webpack/sharing/consume/default/@microsoft/fast-element/@microsoft/fast-element");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _listbox_listbox_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../listbox/listbox.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/listbox/listbox.js");
/* harmony import */ var _patterns_start_end_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../patterns/start-end.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/patterns/start-end.js");



/**
 * The template for the {@link @microsoft/fast-foundation#(Combobox:class)} component.
 * @public
 */
const comboboxTemplate = (context, definition) => (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.html) `
    <template
        aria-disabled="${x => x.ariaDisabled}"
        autocomplete="${x => x.autocomplete}"
        class="${x => (x.open ? "open" : "")} ${x => x.disabled ? "disabled" : ""} ${x => x.position}"
        ?open="${x => x.open}"
        tabindex="${x => (!x.disabled ? "0" : null)}"
        @click="${(x, c) => x.clickHandler(c.event)}"
        @focusout="${(x, c) => x.focusoutHandler(c.event)}"
        @keydown="${(x, c) => x.keydownHandler(c.event)}"
    >
        <div class="control" part="control">
            ${(0,_patterns_start_end_js__WEBPACK_IMPORTED_MODULE_1__.startSlotTemplate)(context, definition)}
            <slot name="control">
                <input
                    aria-activedescendant="${x => x.open ? x.ariaActiveDescendant : null}"
                    aria-autocomplete="${x => x.ariaAutoComplete}"
                    aria-controls="${x => x.ariaControls}"
                    aria-disabled="${x => x.ariaDisabled}"
                    aria-expanded="${x => x.ariaExpanded}"
                    aria-haspopup="listbox"
                    class="selected-value"
                    part="selected-value"
                    placeholder="${x => x.placeholder}"
                    role="combobox"
                    type="text"
                    ?disabled="${x => x.disabled}"
                    :value="${x => x.value}"
                    @input="${(x, c) => x.inputHandler(c.event)}"
                    @keyup="${(x, c) => x.keyupHandler(c.event)}"
                    ${(0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.ref)("control")}
                />
                <div class="indicator" part="indicator" aria-hidden="true">
                    <slot name="indicator">
                        ${definition.indicator || ""}
                    </slot>
                </div>
            </slot>
            ${(0,_patterns_start_end_js__WEBPACK_IMPORTED_MODULE_1__.endSlotTemplate)(context, definition)}
        </div>
        <div
            class="listbox"
            id="${x => x.listboxId}"
            part="listbox"
            role="listbox"
            ?disabled="${x => x.disabled}"
            ?hidden="${x => !x.open}"
            ${(0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.ref)("listbox")}
        >
            <slot
                ${(0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.slotted)({
    filter: _listbox_listbox_js__WEBPACK_IMPORTED_MODULE_2__.Listbox.slottedOptionFilter,
    flatten: true,
    property: "slottedOptions",
})}
            ></slot>
        </div>
    </template>
`;


/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/combobox/index.js":
/*!****************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/combobox/index.js ***!
  \****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Combobox: () => (/* reexport safe */ _combobox_js__WEBPACK_IMPORTED_MODULE_0__.Combobox),
/* harmony export */   ComboboxAutocomplete: () => (/* reexport safe */ _combobox_options_js__WEBPACK_IMPORTED_MODULE_1__.ComboboxAutocomplete),
/* harmony export */   DelegatesARIACombobox: () => (/* reexport safe */ _combobox_js__WEBPACK_IMPORTED_MODULE_0__.DelegatesARIACombobox),
/* harmony export */   comboboxTemplate: () => (/* reexport safe */ _combobox_template_js__WEBPACK_IMPORTED_MODULE_2__.comboboxTemplate)
/* harmony export */ });
/* harmony import */ var _combobox_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./combobox.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/combobox/combobox.js");
/* harmony import */ var _combobox_options_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./combobox.options.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/combobox/combobox.options.js");
/* harmony import */ var _combobox_template_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./combobox.template.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/combobox/combobox.template.js");





/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/data-grid/data-grid-cell.js":
/*!**************************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/data-grid/data-grid-cell.js ***!
  \**************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DataGridCell: () => (/* binding */ DataGridCell),
/* harmony export */   DataGridCellTypes: () => (/* reexport safe */ _data_grid_options_js__WEBPACK_IMPORTED_MODULE_1__.DataGridCellTypes)
/* harmony export */ });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! tslib */ "./node_modules/@microsoft/fast-foundation/node_modules/tslib/tslib.es6.js");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @microsoft/fast-element */ "webpack/sharing/consume/default/@microsoft/fast-element/@microsoft/fast-element");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @microsoft/fast-web-utilities */ "./node_modules/@microsoft/fast-web-utilities/dist/events.js");
/* harmony import */ var _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @microsoft/fast-web-utilities */ "./node_modules/@microsoft/fast-web-utilities/dist/key-codes.js");
/* harmony import */ var _foundation_element_foundation_element_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../foundation-element/foundation-element.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/foundation-element/foundation-element.js");
/* harmony import */ var _data_grid_options_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./data-grid.options.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/data-grid/data-grid.options.js");






const defaultCellContentsTemplate = (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.html) `
    <template>
        ${x => x.rowData === null ||
    x.columnDefinition === null ||
    x.columnDefinition.columnDataKey === null
    ? null
    : x.rowData[x.columnDefinition.columnDataKey]}
    </template>
`;
const defaultHeaderCellContentsTemplate = (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.html) `
    <template>
        ${x => x.columnDefinition === null
    ? null
    : x.columnDefinition.title === undefined
        ? x.columnDefinition.columnDataKey
        : x.columnDefinition.title}
    </template>
`;
/**
 * A Data Grid Cell Custom HTML Element.
 *
 * @fires cell-focused - Fires a custom 'cell-focused' event when focus is on the cell or its contents
 * @slot - The default slot for cell contents.  The "cell contents template" renders here.
 * @public
 */
class DataGridCell extends _foundation_element_foundation_element_js__WEBPACK_IMPORTED_MODULE_2__.FoundationElement {
    constructor() {
        super(...arguments);
        /**
         * The type of cell
         *
         * @public
         * @remarks
         * HTML Attribute: cell-type
         */
        this.cellType = _data_grid_options_js__WEBPACK_IMPORTED_MODULE_1__.DataGridCellTypes.default;
        /**
         * The base data for the parent row
         *
         * @public
         */
        this.rowData = null;
        /**
         * The base data for the column
         *
         * @public
         */
        this.columnDefinition = null;
        this.isActiveCell = false;
        this.customCellView = null;
        this.updateCellStyle = () => {
            this.style.gridColumn = this.gridColumn;
        };
    }
    cellTypeChanged() {
        if (this.$fastController.isConnected) {
            this.updateCellView();
        }
    }
    gridColumnChanged() {
        if (this.$fastController.isConnected) {
            this.updateCellStyle();
        }
    }
    columnDefinitionChanged(oldValue, newValue) {
        if (this.$fastController.isConnected) {
            this.updateCellView();
        }
    }
    /**
     * @internal
     */
    connectedCallback() {
        var _a;
        super.connectedCallback();
        this.addEventListener(_microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_3__.eventFocusIn, this.handleFocusin);
        this.addEventListener(_microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_3__.eventFocusOut, this.handleFocusout);
        this.addEventListener(_microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_3__.eventKeyDown, this.handleKeydown);
        this.style.gridColumn = `${((_a = this.columnDefinition) === null || _a === void 0 ? void 0 : _a.gridColumn) === undefined
            ? 0
            : this.columnDefinition.gridColumn}`;
        this.updateCellView();
        this.updateCellStyle();
    }
    /**
     * @internal
     */
    disconnectedCallback() {
        super.disconnectedCallback();
        this.removeEventListener(_microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_3__.eventFocusIn, this.handleFocusin);
        this.removeEventListener(_microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_3__.eventFocusOut, this.handleFocusout);
        this.removeEventListener(_microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_3__.eventKeyDown, this.handleKeydown);
        this.disconnectCellView();
    }
    handleFocusin(e) {
        if (this.isActiveCell) {
            return;
        }
        this.isActiveCell = true;
        switch (this.cellType) {
            case _data_grid_options_js__WEBPACK_IMPORTED_MODULE_1__.DataGridCellTypes.columnHeader:
                if (this.columnDefinition !== null &&
                    this.columnDefinition.headerCellInternalFocusQueue !== true &&
                    typeof this.columnDefinition.headerCellFocusTargetCallback ===
                        "function") {
                    // move focus to the focus target
                    const focusTarget = this.columnDefinition.headerCellFocusTargetCallback(this);
                    if (focusTarget !== null) {
                        focusTarget.focus();
                    }
                }
                break;
            default:
                if (this.columnDefinition !== null &&
                    this.columnDefinition.cellInternalFocusQueue !== true &&
                    typeof this.columnDefinition.cellFocusTargetCallback === "function") {
                    // move focus to the focus target
                    const focusTarget = this.columnDefinition.cellFocusTargetCallback(this);
                    if (focusTarget !== null) {
                        focusTarget.focus();
                    }
                }
                break;
        }
        this.$emit("cell-focused", this);
    }
    handleFocusout(e) {
        if (this !== document.activeElement && !this.contains(document.activeElement)) {
            this.isActiveCell = false;
        }
    }
    handleKeydown(e) {
        if (e.defaultPrevented ||
            this.columnDefinition === null ||
            (this.cellType === _data_grid_options_js__WEBPACK_IMPORTED_MODULE_1__.DataGridCellTypes.default &&
                this.columnDefinition.cellInternalFocusQueue !== true) ||
            (this.cellType === _data_grid_options_js__WEBPACK_IMPORTED_MODULE_1__.DataGridCellTypes.columnHeader &&
                this.columnDefinition.headerCellInternalFocusQueue !== true)) {
            return;
        }
        switch (e.key) {
            case _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_4__.keyEnter:
            case _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_4__.keyFunction2:
                if (this.contains(document.activeElement) &&
                    document.activeElement !== this) {
                    return;
                }
                switch (this.cellType) {
                    case _data_grid_options_js__WEBPACK_IMPORTED_MODULE_1__.DataGridCellTypes.columnHeader:
                        if (this.columnDefinition.headerCellFocusTargetCallback !==
                            undefined) {
                            const focusTarget = this.columnDefinition.headerCellFocusTargetCallback(this);
                            if (focusTarget !== null) {
                                focusTarget.focus();
                            }
                            e.preventDefault();
                        }
                        break;
                    default:
                        if (this.columnDefinition.cellFocusTargetCallback !== undefined) {
                            const focusTarget = this.columnDefinition.cellFocusTargetCallback(this);
                            if (focusTarget !== null) {
                                focusTarget.focus();
                            }
                            e.preventDefault();
                        }
                        break;
                }
                break;
            case _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_4__.keyEscape:
                if (this.contains(document.activeElement) &&
                    document.activeElement !== this) {
                    this.focus();
                    e.preventDefault();
                }
                break;
        }
    }
    updateCellView() {
        this.disconnectCellView();
        if (this.columnDefinition === null) {
            return;
        }
        switch (this.cellType) {
            case _data_grid_options_js__WEBPACK_IMPORTED_MODULE_1__.DataGridCellTypes.columnHeader:
                if (this.columnDefinition.headerCellTemplate !== undefined) {
                    this.customCellView = this.columnDefinition.headerCellTemplate.render(this, this);
                }
                else {
                    this.customCellView = defaultHeaderCellContentsTemplate.render(this, this);
                }
                break;
            case undefined:
            case _data_grid_options_js__WEBPACK_IMPORTED_MODULE_1__.DataGridCellTypes.rowHeader:
            case _data_grid_options_js__WEBPACK_IMPORTED_MODULE_1__.DataGridCellTypes.default:
                if (this.columnDefinition.cellTemplate !== undefined) {
                    this.customCellView = this.columnDefinition.cellTemplate.render(this, this);
                }
                else {
                    this.customCellView = defaultCellContentsTemplate.render(this, this);
                }
                break;
        }
    }
    disconnectCellView() {
        if (this.customCellView !== null) {
            this.customCellView.dispose();
            this.customCellView = null;
        }
    }
}
(0,tslib__WEBPACK_IMPORTED_MODULE_5__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ attribute: "cell-type" })
], DataGridCell.prototype, "cellType", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_5__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ attribute: "grid-column" })
], DataGridCell.prototype, "gridColumn", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_5__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.observable
], DataGridCell.prototype, "rowData", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_5__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.observable
], DataGridCell.prototype, "columnDefinition", void 0);


/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/data-grid/data-grid-cell.template.js":
/*!***********************************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/data-grid/data-grid-cell.template.js ***!
  \***********************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   dataGridCellTemplate: () => (/* binding */ dataGridCellTemplate)
/* harmony export */ });
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @microsoft/fast-element */ "webpack/sharing/consume/default/@microsoft/fast-element/@microsoft/fast-element");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__);

/**
 * Generates a template for the {@link @microsoft/fast-foundation#DataGridCell} component using
 * the provided prefix.
 * @public
 */
const dataGridCellTemplate = (context, definition) => {
    return (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.html) `
        <template
            tabindex="-1"
            role="${x => !x.cellType || x.cellType === "default" ? "gridcell" : x.cellType}"
            class="
            ${x => x.cellType === "columnheader"
        ? "column-header"
        : x.cellType === "rowheader"
            ? "row-header"
            : ""}
            "
        >
            <slot></slot>
        </template>
    `;
};


/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/data-grid/data-grid-row.js":
/*!*************************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/data-grid/data-grid-row.js ***!
  \*************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DataGridRow: () => (/* binding */ DataGridRow)
/* harmony export */ });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! tslib */ "./node_modules/@microsoft/fast-foundation/node_modules/tslib/tslib.es6.js");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @microsoft/fast-element */ "webpack/sharing/consume/default/@microsoft/fast-element/@microsoft/fast-element");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @microsoft/fast-web-utilities */ "./node_modules/@microsoft/fast-web-utilities/dist/events.js");
/* harmony import */ var _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @microsoft/fast-web-utilities */ "./node_modules/@microsoft/fast-web-utilities/dist/key-codes.js");
/* harmony import */ var _foundation_element_foundation_element_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../foundation-element/foundation-element.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/foundation-element/foundation-element.js");
/* harmony import */ var _data_grid_options_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./data-grid.options.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/data-grid/data-grid.options.js");





/**
 * A Data Grid Row Custom HTML Element.
 *
 * @fires row-focused - Fires a custom 'row-focused' event when focus is on an element (usually a cell or its contents) in the row
 * @slot - The default slot for custom cell elements
 * @public
 */
class DataGridRow extends _foundation_element_foundation_element_js__WEBPACK_IMPORTED_MODULE_1__.FoundationElement {
    constructor() {
        super(...arguments);
        /**
         * The type of row
         *
         * @public
         * @remarks
         * HTML Attribute: row-type
         */
        this.rowType = _data_grid_options_js__WEBPACK_IMPORTED_MODULE_2__.DataGridRowTypes.default;
        /**
         * The base data for this row
         *
         * @public
         */
        this.rowData = null;
        /**
         * The column definitions of the row
         *
         * @public
         */
        this.columnDefinitions = null;
        /**
         * Whether focus is on/in a cell within this row.
         *
         * @internal
         */
        this.isActiveRow = false;
        this.cellsRepeatBehavior = null;
        this.cellsPlaceholder = null;
        /**
         * @internal
         */
        this.focusColumnIndex = 0;
        this.refocusOnLoad = false;
        this.updateRowStyle = () => {
            this.style.gridTemplateColumns = this.gridTemplateColumns;
        };
    }
    gridTemplateColumnsChanged() {
        if (this.$fastController.isConnected) {
            this.updateRowStyle();
        }
    }
    rowTypeChanged() {
        if (this.$fastController.isConnected) {
            this.updateItemTemplate();
        }
    }
    rowDataChanged() {
        if (this.rowData !== null && this.isActiveRow) {
            this.refocusOnLoad = true;
            return;
        }
    }
    cellItemTemplateChanged() {
        this.updateItemTemplate();
    }
    headerCellItemTemplateChanged() {
        this.updateItemTemplate();
    }
    /**
     * @internal
     */
    connectedCallback() {
        super.connectedCallback();
        // note that row elements can be reused with a different data object
        // as the parent grid's repeat behavior reacts to changes in the data set.
        if (this.cellsRepeatBehavior === null) {
            this.cellsPlaceholder = document.createComment("");
            this.appendChild(this.cellsPlaceholder);
            this.updateItemTemplate();
            this.cellsRepeatBehavior = new _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.RepeatDirective(x => x.columnDefinitions, x => x.activeCellItemTemplate, { positioning: true }).createBehavior(this.cellsPlaceholder);
            /* eslint-disable-next-line @typescript-eslint/no-non-null-assertion */
            this.$fastController.addBehaviors([this.cellsRepeatBehavior]);
        }
        this.addEventListener("cell-focused", this.handleCellFocus);
        this.addEventListener(_microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_3__.eventFocusOut, this.handleFocusout);
        this.addEventListener(_microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_3__.eventKeyDown, this.handleKeydown);
        this.updateRowStyle();
        if (this.refocusOnLoad) {
            // if focus was on the row when data changed try to refocus on same cell
            this.refocusOnLoad = false;
            if (this.cellElements.length > this.focusColumnIndex) {
                this.cellElements[this.focusColumnIndex].focus();
            }
        }
    }
    /**
     * @internal
     */
    disconnectedCallback() {
        super.disconnectedCallback();
        this.removeEventListener("cell-focused", this.handleCellFocus);
        this.removeEventListener(_microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_3__.eventFocusOut, this.handleFocusout);
        this.removeEventListener(_microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_3__.eventKeyDown, this.handleKeydown);
    }
    handleFocusout(e) {
        if (!this.contains(e.target)) {
            this.isActiveRow = false;
            this.focusColumnIndex = 0;
        }
    }
    handleCellFocus(e) {
        this.isActiveRow = true;
        this.focusColumnIndex = this.cellElements.indexOf(e.target);
        this.$emit("row-focused", this);
    }
    handleKeydown(e) {
        if (e.defaultPrevented) {
            return;
        }
        let newFocusColumnIndex = 0;
        switch (e.key) {
            case _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_4__.keyArrowLeft:
                // focus left one cell
                newFocusColumnIndex = Math.max(0, this.focusColumnIndex - 1);
                this.cellElements[newFocusColumnIndex].focus();
                e.preventDefault();
                break;
            case _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_4__.keyArrowRight:
                // focus right one cell
                newFocusColumnIndex = Math.min(this.cellElements.length - 1, this.focusColumnIndex + 1);
                this.cellElements[newFocusColumnIndex].focus();
                e.preventDefault();
                break;
            case _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_4__.keyHome:
                if (!e.ctrlKey) {
                    this.cellElements[0].focus();
                    e.preventDefault();
                }
                break;
            case _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_4__.keyEnd:
                if (!e.ctrlKey) {
                    // focus last cell of the row
                    this.cellElements[this.cellElements.length - 1].focus();
                    e.preventDefault();
                }
                break;
        }
    }
    updateItemTemplate() {
        this.activeCellItemTemplate =
            this.rowType === _data_grid_options_js__WEBPACK_IMPORTED_MODULE_2__.DataGridRowTypes.default &&
                this.cellItemTemplate !== undefined
                ? this.cellItemTemplate
                : this.rowType === _data_grid_options_js__WEBPACK_IMPORTED_MODULE_2__.DataGridRowTypes.default &&
                    this.cellItemTemplate === undefined
                    ? this.defaultCellItemTemplate
                    : this.headerCellItemTemplate !== undefined
                        ? this.headerCellItemTemplate
                        : this.defaultHeaderCellItemTemplate;
    }
}
(0,tslib__WEBPACK_IMPORTED_MODULE_5__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ attribute: "grid-template-columns" })
], DataGridRow.prototype, "gridTemplateColumns", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_5__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ attribute: "row-type" })
], DataGridRow.prototype, "rowType", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_5__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.observable
], DataGridRow.prototype, "rowData", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_5__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.observable
], DataGridRow.prototype, "columnDefinitions", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_5__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.observable
], DataGridRow.prototype, "cellItemTemplate", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_5__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.observable
], DataGridRow.prototype, "headerCellItemTemplate", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_5__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.observable
], DataGridRow.prototype, "rowIndex", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_5__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.observable
], DataGridRow.prototype, "isActiveRow", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_5__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.observable
], DataGridRow.prototype, "activeCellItemTemplate", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_5__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.observable
], DataGridRow.prototype, "defaultCellItemTemplate", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_5__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.observable
], DataGridRow.prototype, "defaultHeaderCellItemTemplate", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_5__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.observable
], DataGridRow.prototype, "cellElements", void 0);


/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/data-grid/data-grid-row.template.js":
/*!**********************************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/data-grid/data-grid-row.template.js ***!
  \**********************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   dataGridRowTemplate: () => (/* binding */ dataGridRowTemplate)
/* harmony export */ });
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @microsoft/fast-element */ "webpack/sharing/consume/default/@microsoft/fast-element/@microsoft/fast-element");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _data_grid_cell_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./data-grid-cell.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/data-grid/data-grid-cell.js");


function createCellItemTemplate(context) {
    const cellTag = context.tagFor(_data_grid_cell_js__WEBPACK_IMPORTED_MODULE_1__.DataGridCell);
    return (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.html) `
    <${cellTag}
        cell-type="${x => (x.isRowHeader ? "rowheader" : undefined)}"
        grid-column="${(x, c) => c.index + 1}"
        :rowData="${(x, c) => c.parent.rowData}"
        :columnDefinition="${x => x}"
    ></${cellTag}>
`;
}
function createHeaderCellItemTemplate(context) {
    const cellTag = context.tagFor(_data_grid_cell_js__WEBPACK_IMPORTED_MODULE_1__.DataGridCell);
    return (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.html) `
    <${cellTag}
        cell-type="columnheader"
        grid-column="${(x, c) => c.index + 1}"
        :columnDefinition="${x => x}"
    ></${cellTag}>
`;
}
/**
 * Generates a template for the {@link @microsoft/fast-foundation#DataGridRow} component using
 * the provided prefix.
 *
 * @public
 */
const dataGridRowTemplate = (context, definition) => {
    const cellItemTemplate = createCellItemTemplate(context);
    const headerCellItemTemplate = createHeaderCellItemTemplate(context);
    return (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.html) `
        <template
            role="row"
            class="${x => (x.rowType !== "default" ? x.rowType : "")}"
            :defaultCellItemTemplate="${cellItemTemplate}"
            :defaultHeaderCellItemTemplate="${headerCellItemTemplate}"
            ${(0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.children)({
        property: "cellElements",
        filter: (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.elements)('[role="cell"],[role="gridcell"],[role="columnheader"],[role="rowheader"]'),
    })}
        >
            <slot ${(0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.slotted)("slottedCellElements")}></slot>
        </template>
    `;
};


/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/data-grid/data-grid.js":
/*!*********************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/data-grid/data-grid.js ***!
  \*********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DataGrid: () => (/* binding */ DataGrid),
/* harmony export */   DataGridRowTypes: () => (/* reexport safe */ _data_grid_options_js__WEBPACK_IMPORTED_MODULE_1__.DataGridRowTypes),
/* harmony export */   GenerateHeaderOptions: () => (/* reexport safe */ _data_grid_options_js__WEBPACK_IMPORTED_MODULE_1__.GenerateHeaderOptions)
/* harmony export */ });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! tslib */ "./node_modules/@microsoft/fast-foundation/node_modules/tslib/tslib.es6.js");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @microsoft/fast-element */ "webpack/sharing/consume/default/@microsoft/fast-element/@microsoft/fast-element");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @microsoft/fast-web-utilities */ "./node_modules/@microsoft/fast-web-utilities/dist/events.js");
/* harmony import */ var _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @microsoft/fast-web-utilities */ "./node_modules/@microsoft/fast-web-utilities/dist/key-codes.js");
/* harmony import */ var _foundation_element_foundation_element_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../foundation-element/foundation-element.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/foundation-element/foundation-element.js");
/* harmony import */ var _data_grid_options_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./data-grid.options.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/data-grid/data-grid.options.js");






/**
 * A Data Grid Custom HTML Element.
 *
 * @slot - The default slot for custom row elements
 * @public
 */
class DataGrid extends _foundation_element_foundation_element_js__WEBPACK_IMPORTED_MODULE_2__.FoundationElement {
    constructor() {
        super();
        /**
         * When true the component will not add itself to the tab queue.
         * Default is false.
         *
         * @public
         * @remarks
         * HTML Attribute: no-tabbing
         */
        this.noTabbing = false;
        /**
         *  Whether the grid should automatically generate a header row and its type
         *
         * @public
         * @remarks
         * HTML Attribute: generate-header
         */
        this.generateHeader = _data_grid_options_js__WEBPACK_IMPORTED_MODULE_1__.GenerateHeaderOptions.default;
        /**
         * The data being displayed in the grid
         *
         * @public
         */
        this.rowsData = [];
        /**
         * The column definitions of the grid
         *
         * @public
         */
        this.columnDefinitions = null;
        /**
         * The index of the row that will receive focus the next time the
         * grid is focused. This value changes as focus moves to different
         * rows within the grid.  Changing this value when focus is already
         * within the grid moves focus to the specified row.
         *
         * @public
         */
        this.focusRowIndex = 0;
        /**
         * The index of the column that will receive focus the next time the
         * grid is focused. This value changes as focus moves to different rows
         * within the grid.  Changing this value when focus is already within
         * the grid moves focus to the specified column.
         *
         * @public
         */
        this.focusColumnIndex = 0;
        this.rowsPlaceholder = null;
        this.generatedHeader = null;
        this.isUpdatingFocus = false;
        this.pendingFocusUpdate = false;
        this.rowindexUpdateQueued = false;
        this.columnDefinitionsStale = true;
        this.generatedGridTemplateColumns = "";
        this.focusOnCell = (rowIndex, columnIndex, scrollIntoView) => {
            if (this.rowElements.length === 0) {
                this.focusRowIndex = 0;
                this.focusColumnIndex = 0;
                return;
            }
            const focusRowIndex = Math.max(0, Math.min(this.rowElements.length - 1, rowIndex));
            const focusRow = this.rowElements[focusRowIndex];
            const cells = focusRow.querySelectorAll('[role="cell"], [role="gridcell"], [role="columnheader"], [role="rowheader"]');
            const focusColumnIndex = Math.max(0, Math.min(cells.length - 1, columnIndex));
            const focusTarget = cells[focusColumnIndex];
            if (scrollIntoView &&
                this.scrollHeight !== this.clientHeight &&
                ((focusRowIndex < this.focusRowIndex && this.scrollTop > 0) ||
                    (focusRowIndex > this.focusRowIndex &&
                        this.scrollTop < this.scrollHeight - this.clientHeight))) {
                focusTarget.scrollIntoView({ block: "center", inline: "center" });
            }
            focusTarget.focus();
        };
        this.onChildListChange = (mutations, 
        /* eslint-disable-next-line @typescript-eslint/no-unused-vars */
        observer) => {
            if (mutations && mutations.length) {
                mutations.forEach((mutation) => {
                    mutation.addedNodes.forEach((newNode) => {
                        if (newNode.nodeType === 1 &&
                            newNode.getAttribute("role") === "row") {
                            newNode.columnDefinitions = this.columnDefinitions;
                        }
                    });
                });
                this.queueRowIndexUpdate();
            }
        };
        this.queueRowIndexUpdate = () => {
            if (!this.rowindexUpdateQueued) {
                this.rowindexUpdateQueued = true;
                _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.DOM.queueUpdate(this.updateRowIndexes);
            }
        };
        this.updateRowIndexes = () => {
            let newGridTemplateColumns = this.gridTemplateColumns;
            if (newGridTemplateColumns === undefined) {
                // try to generate columns based on manual rows
                if (this.generatedGridTemplateColumns === "" && this.rowElements.length > 0) {
                    const firstRow = this.rowElements[0];
                    this.generatedGridTemplateColumns = new Array(firstRow.cellElements.length)
                        .fill("1fr")
                        .join(" ");
                }
                newGridTemplateColumns = this.generatedGridTemplateColumns;
            }
            this.rowElements.forEach((element, index) => {
                const thisRow = element;
                thisRow.rowIndex = index;
                thisRow.gridTemplateColumns = newGridTemplateColumns;
                if (this.columnDefinitionsStale) {
                    thisRow.columnDefinitions = this.columnDefinitions;
                }
            });
            this.rowindexUpdateQueued = false;
            this.columnDefinitionsStale = false;
        };
    }
    /**
     *  generates a gridTemplateColumns based on columndata array
     */
    static generateTemplateColumns(columnDefinitions) {
        let templateColumns = "";
        columnDefinitions.forEach((column) => {
            templateColumns = `${templateColumns}${templateColumns === "" ? "" : " "}${"1fr"}`;
        });
        return templateColumns;
    }
    noTabbingChanged() {
        if (this.$fastController.isConnected) {
            if (this.noTabbing) {
                this.setAttribute("tabIndex", "-1");
            }
            else {
                this.setAttribute("tabIndex", this.contains(document.activeElement) ||
                    this === document.activeElement
                    ? "-1"
                    : "0");
            }
        }
    }
    generateHeaderChanged() {
        if (this.$fastController.isConnected) {
            this.toggleGeneratedHeader();
        }
    }
    gridTemplateColumnsChanged() {
        if (this.$fastController.isConnected) {
            this.updateRowIndexes();
        }
    }
    rowsDataChanged() {
        if (this.columnDefinitions === null && this.rowsData.length > 0) {
            this.columnDefinitions = DataGrid.generateColumns(this.rowsData[0]);
        }
        if (this.$fastController.isConnected) {
            this.toggleGeneratedHeader();
        }
    }
    columnDefinitionsChanged() {
        if (this.columnDefinitions === null) {
            this.generatedGridTemplateColumns = "";
            return;
        }
        this.generatedGridTemplateColumns = DataGrid.generateTemplateColumns(this.columnDefinitions);
        if (this.$fastController.isConnected) {
            this.columnDefinitionsStale = true;
            this.queueRowIndexUpdate();
        }
    }
    headerCellItemTemplateChanged() {
        if (this.$fastController.isConnected) {
            if (this.generatedHeader !== null) {
                this.generatedHeader.headerCellItemTemplate = this.headerCellItemTemplate;
            }
        }
    }
    focusRowIndexChanged() {
        if (this.$fastController.isConnected) {
            this.queueFocusUpdate();
        }
    }
    focusColumnIndexChanged() {
        if (this.$fastController.isConnected) {
            this.queueFocusUpdate();
        }
    }
    /**
     * @internal
     */
    connectedCallback() {
        super.connectedCallback();
        if (this.rowItemTemplate === undefined) {
            this.rowItemTemplate = this.defaultRowItemTemplate;
        }
        this.rowsPlaceholder = document.createComment("");
        this.appendChild(this.rowsPlaceholder);
        this.toggleGeneratedHeader();
        this.rowsRepeatBehavior = new _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.RepeatDirective(x => x.rowsData, x => x.rowItemTemplate, { positioning: true }).createBehavior(this.rowsPlaceholder);
        /* eslint-disable-next-line @typescript-eslint/no-non-null-assertion */
        this.$fastController.addBehaviors([this.rowsRepeatBehavior]);
        this.addEventListener("row-focused", this.handleRowFocus);
        this.addEventListener(_microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_3__.eventFocus, this.handleFocus);
        this.addEventListener(_microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_3__.eventKeyDown, this.handleKeydown);
        this.addEventListener(_microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_3__.eventFocusOut, this.handleFocusOut);
        this.observer = new MutationObserver(this.onChildListChange);
        // only observe if nodes are added or removed
        this.observer.observe(this, { childList: true });
        if (this.noTabbing) {
            this.setAttribute("tabindex", "-1");
        }
        _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.DOM.queueUpdate(this.queueRowIndexUpdate);
    }
    /**
     * @internal
     */
    disconnectedCallback() {
        super.disconnectedCallback();
        this.removeEventListener("row-focused", this.handleRowFocus);
        this.removeEventListener(_microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_3__.eventFocus, this.handleFocus);
        this.removeEventListener(_microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_3__.eventKeyDown, this.handleKeydown);
        this.removeEventListener(_microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_3__.eventFocusOut, this.handleFocusOut);
        // disconnect observer
        this.observer.disconnect();
        this.rowsPlaceholder = null;
        this.generatedHeader = null;
    }
    /**
     * @internal
     */
    handleRowFocus(e) {
        this.isUpdatingFocus = true;
        const focusRow = e.target;
        this.focusRowIndex = this.rowElements.indexOf(focusRow);
        this.focusColumnIndex = focusRow.focusColumnIndex;
        this.setAttribute("tabIndex", "-1");
        this.isUpdatingFocus = false;
    }
    /**
     * @internal
     */
    handleFocus(e) {
        this.focusOnCell(this.focusRowIndex, this.focusColumnIndex, true);
    }
    /**
     * @internal
     */
    handleFocusOut(e) {
        if (e.relatedTarget === null || !this.contains(e.relatedTarget)) {
            this.setAttribute("tabIndex", this.noTabbing ? "-1" : "0");
        }
    }
    /**
     * @internal
     */
    handleKeydown(e) {
        if (e.defaultPrevented) {
            return;
        }
        let newFocusRowIndex;
        const maxIndex = this.rowElements.length - 1;
        const currentGridBottom = this.offsetHeight + this.scrollTop;
        const lastRow = this.rowElements[maxIndex];
        switch (e.key) {
            case _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_4__.keyArrowUp:
                e.preventDefault();
                // focus up one row
                this.focusOnCell(this.focusRowIndex - 1, this.focusColumnIndex, true);
                break;
            case _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_4__.keyArrowDown:
                e.preventDefault();
                // focus down one row
                this.focusOnCell(this.focusRowIndex + 1, this.focusColumnIndex, true);
                break;
            case _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_4__.keyPageUp:
                e.preventDefault();
                if (this.rowElements.length === 0) {
                    this.focusOnCell(0, 0, false);
                    break;
                }
                if (this.focusRowIndex === 0) {
                    this.focusOnCell(0, this.focusColumnIndex, false);
                    return;
                }
                newFocusRowIndex = this.focusRowIndex - 1;
                for (newFocusRowIndex; newFocusRowIndex >= 0; newFocusRowIndex--) {
                    const thisRow = this.rowElements[newFocusRowIndex];
                    if (thisRow.offsetTop < this.scrollTop) {
                        this.scrollTop =
                            thisRow.offsetTop + thisRow.clientHeight - this.clientHeight;
                        break;
                    }
                }
                this.focusOnCell(newFocusRowIndex, this.focusColumnIndex, false);
                break;
            case _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_4__.keyPageDown:
                e.preventDefault();
                if (this.rowElements.length === 0) {
                    this.focusOnCell(0, 0, false);
                    break;
                }
                // focus down one "page"
                if (this.focusRowIndex >= maxIndex ||
                    lastRow.offsetTop + lastRow.offsetHeight <= currentGridBottom) {
                    this.focusOnCell(maxIndex, this.focusColumnIndex, false);
                    return;
                }
                newFocusRowIndex = this.focusRowIndex + 1;
                for (newFocusRowIndex; newFocusRowIndex <= maxIndex; newFocusRowIndex++) {
                    const thisRow = this.rowElements[newFocusRowIndex];
                    if (thisRow.offsetTop + thisRow.offsetHeight > currentGridBottom) {
                        let stickyHeaderOffset = 0;
                        if (this.generateHeader === _data_grid_options_js__WEBPACK_IMPORTED_MODULE_1__.GenerateHeaderOptions.sticky &&
                            this.generatedHeader !== null) {
                            stickyHeaderOffset = this.generatedHeader.clientHeight;
                        }
                        this.scrollTop = thisRow.offsetTop - stickyHeaderOffset;
                        break;
                    }
                }
                this.focusOnCell(newFocusRowIndex, this.focusColumnIndex, false);
                break;
            case _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_4__.keyHome:
                if (e.ctrlKey) {
                    e.preventDefault();
                    // focus first cell of first row
                    this.focusOnCell(0, 0, true);
                }
                break;
            case _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_4__.keyEnd:
                if (e.ctrlKey && this.columnDefinitions !== null) {
                    e.preventDefault();
                    // focus last cell of last row
                    this.focusOnCell(this.rowElements.length - 1, this.columnDefinitions.length - 1, true);
                }
                break;
        }
    }
    queueFocusUpdate() {
        if (this.isUpdatingFocus &&
            (this.contains(document.activeElement) || this === document.activeElement)) {
            return;
        }
        if (this.pendingFocusUpdate === false) {
            this.pendingFocusUpdate = true;
            _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.DOM.queueUpdate(() => this.updateFocus());
        }
    }
    updateFocus() {
        this.pendingFocusUpdate = false;
        this.focusOnCell(this.focusRowIndex, this.focusColumnIndex, true);
    }
    toggleGeneratedHeader() {
        if (this.generatedHeader !== null) {
            this.removeChild(this.generatedHeader);
            this.generatedHeader = null;
        }
        if (this.generateHeader !== _data_grid_options_js__WEBPACK_IMPORTED_MODULE_1__.GenerateHeaderOptions.none &&
            this.rowsData.length > 0) {
            const generatedHeaderElement = document.createElement(this.rowElementTag);
            this.generatedHeader = generatedHeaderElement;
            this.generatedHeader.columnDefinitions = this.columnDefinitions;
            this.generatedHeader.gridTemplateColumns = this.gridTemplateColumns;
            this.generatedHeader.rowType =
                this.generateHeader === _data_grid_options_js__WEBPACK_IMPORTED_MODULE_1__.GenerateHeaderOptions.sticky
                    ? _data_grid_options_js__WEBPACK_IMPORTED_MODULE_1__.DataGridRowTypes.stickyHeader
                    : _data_grid_options_js__WEBPACK_IMPORTED_MODULE_1__.DataGridRowTypes.header;
            if (this.firstChild !== null || this.rowsPlaceholder !== null) {
                this.insertBefore(generatedHeaderElement, this.firstChild !== null ? this.firstChild : this.rowsPlaceholder);
            }
            return;
        }
    }
}
/**
 *  generates a basic column definition by examining sample row data
 */
DataGrid.generateColumns = (row) => {
    return Object.getOwnPropertyNames(row).map((property, index) => {
        return {
            columnDataKey: property,
            gridColumn: `${index}`,
        };
    });
};
(0,tslib__WEBPACK_IMPORTED_MODULE_5__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ attribute: "no-tabbing", mode: "boolean" })
], DataGrid.prototype, "noTabbing", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_5__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ attribute: "generate-header" })
], DataGrid.prototype, "generateHeader", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_5__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ attribute: "grid-template-columns" })
], DataGrid.prototype, "gridTemplateColumns", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_5__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.observable
], DataGrid.prototype, "rowsData", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_5__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.observable
], DataGrid.prototype, "columnDefinitions", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_5__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.observable
], DataGrid.prototype, "rowItemTemplate", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_5__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.observable
], DataGrid.prototype, "cellItemTemplate", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_5__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.observable
], DataGrid.prototype, "headerCellItemTemplate", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_5__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.observable
], DataGrid.prototype, "focusRowIndex", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_5__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.observable
], DataGrid.prototype, "focusColumnIndex", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_5__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.observable
], DataGrid.prototype, "defaultRowItemTemplate", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_5__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.observable
], DataGrid.prototype, "rowElementTag", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_5__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.observable
], DataGrid.prototype, "rowElements", void 0);


/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/data-grid/data-grid.options.js":
/*!*****************************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/data-grid/data-grid.options.js ***!
  \*****************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DataGridCellTypes: () => (/* binding */ DataGridCellTypes),
/* harmony export */   DataGridRowTypes: () => (/* binding */ DataGridRowTypes),
/* harmony export */   GenerateHeaderOptions: () => (/* binding */ GenerateHeaderOptions)
/* harmony export */ });
/**
 * Enumerates the data grid auto generated header options
 * default option generates a non-sticky header row
 *
 * @public
 */
const GenerateHeaderOptions = {
    none: "none",
    default: "default",
    sticky: "sticky",
};
/**
 * Enumerates possible data grid cell types.
 *
 * @public
 */
const DataGridCellTypes = {
    default: "default",
    columnHeader: "columnheader",
    rowHeader: "rowheader",
};
/**
 * Enumerates possible data grid row types
 *
 * @public
 */
const DataGridRowTypes = {
    default: "default",
    header: "header",
    stickyHeader: "sticky-header",
};


/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/data-grid/data-grid.template.js":
/*!******************************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/data-grid/data-grid.template.js ***!
  \******************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   dataGridTemplate: () => (/* binding */ dataGridTemplate)
/* harmony export */ });
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @microsoft/fast-element */ "webpack/sharing/consume/default/@microsoft/fast-element/@microsoft/fast-element");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _data_grid_row_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./data-grid-row.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/data-grid/data-grid-row.js");


function createRowItemTemplate(context) {
    const rowTag = context.tagFor(_data_grid_row_js__WEBPACK_IMPORTED_MODULE_1__.DataGridRow);
    return (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.html) `
    <${rowTag}
        :rowData="${x => x}"
        :cellItemTemplate="${(x, c) => c.parent.cellItemTemplate}"
        :headerCellItemTemplate="${(x, c) => c.parent.headerCellItemTemplate}"
    ></${rowTag}>
`;
}
/**
 * Generates a template for the {@link @microsoft/fast-foundation#DataGrid} component using
 * the provided prefix.
 *
 * @public
 */
const dataGridTemplate = (context, definition) => {
    const rowItemTemplate = createRowItemTemplate(context);
    const rowTag = context.tagFor(_data_grid_row_js__WEBPACK_IMPORTED_MODULE_1__.DataGridRow);
    return (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.html) `
        <template
            role="grid"
            tabindex="0"
            :rowElementTag="${() => rowTag}"
            :defaultRowItemTemplate="${rowItemTemplate}"
            ${(0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.children)({
        property: "rowElements",
        filter: (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.elements)("[role=row]"),
    })}
        >
            <slot></slot>
        </template>
    `;
};


/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/data-grid/index.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/data-grid/index.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DataGrid: () => (/* reexport safe */ _data_grid_js__WEBPACK_IMPORTED_MODULE_1__.DataGrid),
/* harmony export */   DataGridCell: () => (/* reexport safe */ _data_grid_cell_js__WEBPACK_IMPORTED_MODULE_5__.DataGridCell),
/* harmony export */   DataGridCellTypes: () => (/* reexport safe */ _data_grid_cell_js__WEBPACK_IMPORTED_MODULE_5__.DataGridCellTypes),
/* harmony export */   DataGridRow: () => (/* reexport safe */ _data_grid_row_js__WEBPACK_IMPORTED_MODULE_3__.DataGridRow),
/* harmony export */   DataGridRowTypes: () => (/* reexport safe */ _data_grid_js__WEBPACK_IMPORTED_MODULE_1__.DataGridRowTypes),
/* harmony export */   GenerateHeaderOptions: () => (/* reexport safe */ _data_grid_js__WEBPACK_IMPORTED_MODULE_1__.GenerateHeaderOptions),
/* harmony export */   dataGridCellTemplate: () => (/* reexport safe */ _data_grid_cell_template_js__WEBPACK_IMPORTED_MODULE_4__.dataGridCellTemplate),
/* harmony export */   dataGridRowTemplate: () => (/* reexport safe */ _data_grid_row_template_js__WEBPACK_IMPORTED_MODULE_2__.dataGridRowTemplate),
/* harmony export */   dataGridTemplate: () => (/* reexport safe */ _data_grid_template_js__WEBPACK_IMPORTED_MODULE_0__.dataGridTemplate)
/* harmony export */ });
/* harmony import */ var _data_grid_template_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./data-grid.template.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/data-grid/data-grid.template.js");
/* harmony import */ var _data_grid_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./data-grid.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/data-grid/data-grid.js");
/* harmony import */ var _data_grid_row_template_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./data-grid-row.template.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/data-grid/data-grid-row.template.js");
/* harmony import */ var _data_grid_row_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./data-grid-row.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/data-grid/data-grid-row.js");
/* harmony import */ var _data_grid_cell_template_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./data-grid-cell.template.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/data-grid/data-grid-cell.template.js");
/* harmony import */ var _data_grid_cell_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./data-grid-cell.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/data-grid/data-grid-cell.js");








/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/design-system/component-presentation.js":
/*!**************************************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/design-system/component-presentation.js ***!
  \**************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ComponentPresentation: () => (/* binding */ ComponentPresentation),
/* harmony export */   DefaultComponentPresentation: () => (/* binding */ DefaultComponentPresentation)
/* harmony export */ });
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @microsoft/fast-element */ "webpack/sharing/consume/default/@microsoft/fast-element/@microsoft/fast-element");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _di_di_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../di/di.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/di/di.js");


function presentationKeyFromTag(tagName) {
    return `${tagName.toLowerCase()}:presentation`;
}
const presentationRegistry = new Map();
/**
 * An API gateway to component presentation features.
 * @public
 */
const ComponentPresentation = Object.freeze({
    /**
     * Defines a component presentation for an element.
     * @param tagName - The element name to define the presentation for.
     * @param presentation - The presentation that will be applied to matching elements.
     * @param container - The dependency injection container to register the configuration in.
     * @public
     */
    define(tagName, presentation, container) {
        const key = presentationKeyFromTag(tagName);
        const existing = presentationRegistry.get(key);
        if (existing === void 0) {
            presentationRegistry.set(key, presentation);
        }
        else {
            // false indicates that we have more than one presentation
            // registered for a tagName and we must resolve through DI
            presentationRegistry.set(key, false);
        }
        container.register(_di_di_js__WEBPACK_IMPORTED_MODULE_1__.Registration.instance(key, presentation));
    },
    /**
     * Finds a component presentation for the specified element name,
     * searching the DOM hierarchy starting from the provided element.
     * @param tagName - The name of the element to locate the presentation for.
     * @param element - The element to begin the search from.
     * @returns The component presentation or null if none is found.
     * @public
     */
    forTag(tagName, element) {
        const key = presentationKeyFromTag(tagName);
        const existing = presentationRegistry.get(key);
        if (existing === false) {
            const container = _di_di_js__WEBPACK_IMPORTED_MODULE_1__.DI.findResponsibleContainer(element);
            return container.get(key);
        }
        return existing || null;
    },
});
/**
 * The default implementation of ComponentPresentation, used by FoundationElement.
 * @public
 */
class DefaultComponentPresentation {
    /**
     * Creates an instance of DefaultComponentPresentation.
     * @param template - The template to apply to the element.
     * @param styles - The styles to apply to the element.
     * @public
     */
    constructor(template, styles) {
        this.template = template || null;
        this.styles =
            styles === void 0
                ? null
                : Array.isArray(styles)
                    ? _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.ElementStyles.create(styles)
                    : styles instanceof _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.ElementStyles
                        ? styles
                        : _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.ElementStyles.create([styles]);
    }
    /**
     * Applies the presentation details to the specified element.
     * @param element - The element to apply the presentation details to.
     * @public
     */
    applyTo(element) {
        const controller = element.$fastController;
        if (controller.template === null) {
            controller.template = this.template;
        }
        if (controller.styles === null) {
            controller.styles = this.styles;
        }
    }
}


/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/design-system/design-system.js":
/*!*****************************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/design-system/design-system.js ***!
  \*****************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DesignSystem: () => (/* binding */ DesignSystem),
/* harmony export */   ElementDisambiguation: () => (/* binding */ ElementDisambiguation)
/* harmony export */ });
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @microsoft/fast-element */ "webpack/sharing/consume/default/@microsoft/fast-element/@microsoft/fast-element");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _foundation_element_foundation_element_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../foundation-element/foundation-element.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/foundation-element/foundation-element.js");
/* harmony import */ var _di_di_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../di/di.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/di/di.js");
/* harmony import */ var _design_token_design_token_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../design-token/design-token.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/design-token/design-token.js");
/* harmony import */ var _component_presentation_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./component-presentation.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/design-system/component-presentation.js");





/* eslint-disable @typescript-eslint/no-non-null-assertion */
/**
 * Indicates what to do with an ambiguous (duplicate) element.
 * @public
 */
const ElementDisambiguation = Object.freeze({
    /**
     * Skip defining the element but still call the provided callback passed
     * to DesignSystemRegistrationContext.tryDefineElement
     */
    definitionCallbackOnly: null,
    /**
     * Ignore the duplicate element entirely.
     */
    ignoreDuplicate: Symbol(),
});
const elementTypesByTag = new Map();
const elementTagsByType = new Map();
let rootDesignSystem = null;
const designSystemKey = _di_di_js__WEBPACK_IMPORTED_MODULE_1__.DI.createInterface(x => x.cachedCallback(handler => {
    if (rootDesignSystem === null) {
        rootDesignSystem = new DefaultDesignSystem(null, handler);
    }
    return rootDesignSystem;
}));
/**
 * An API gateway to design system features.
 * @public
 */
const DesignSystem = Object.freeze({
    /**
     * Returns the HTML element name that the type is defined as.
     * @param type - The type to lookup.
     * @public
     */
    tagFor(type) {
        return elementTagsByType.get(type);
    },
    /**
     * Searches the DOM hierarchy for the design system that is responsible
     * for the provided element.
     * @param element - The element to locate the design system for.
     * @returns The located design system.
     * @public
     */
    responsibleFor(element) {
        const owned = element.$$designSystem$$;
        if (owned) {
            return owned;
        }
        const container = _di_di_js__WEBPACK_IMPORTED_MODULE_1__.DI.findResponsibleContainer(element);
        return container.get(designSystemKey);
    },
    /**
     * Gets the DesignSystem if one is explicitly defined on the provided element;
     * otherwise creates a design system defined directly on the element.
     * @param element - The element to get or create a design system for.
     * @returns The design system.
     * @public
     */
    getOrCreate(node) {
        if (!node) {
            if (rootDesignSystem === null) {
                rootDesignSystem = _di_di_js__WEBPACK_IMPORTED_MODULE_1__.DI.getOrCreateDOMContainer().get(designSystemKey);
            }
            return rootDesignSystem;
        }
        const owned = node.$$designSystem$$;
        if (owned) {
            return owned;
        }
        const container = _di_di_js__WEBPACK_IMPORTED_MODULE_1__.DI.getOrCreateDOMContainer(node);
        if (container.has(designSystemKey, false)) {
            return container.get(designSystemKey);
        }
        else {
            const system = new DefaultDesignSystem(node, container);
            container.register(_di_di_js__WEBPACK_IMPORTED_MODULE_1__.Registration.instance(designSystemKey, system));
            return system;
        }
    },
});
function extractTryDefineElementParams(params, elementDefinitionType, elementDefinitionCallback) {
    if (typeof params === "string") {
        return {
            name: params,
            type: elementDefinitionType,
            callback: elementDefinitionCallback,
        };
    }
    else {
        return params;
    }
}
class DefaultDesignSystem {
    constructor(owner, container) {
        this.owner = owner;
        this.container = container;
        this.designTokensInitialized = false;
        this.prefix = "fast";
        this.shadowRootMode = undefined;
        this.disambiguate = () => ElementDisambiguation.definitionCallbackOnly;
        if (owner !== null) {
            owner.$$designSystem$$ = this;
        }
    }
    withPrefix(prefix) {
        this.prefix = prefix;
        return this;
    }
    withShadowRootMode(mode) {
        this.shadowRootMode = mode;
        return this;
    }
    withElementDisambiguation(callback) {
        this.disambiguate = callback;
        return this;
    }
    withDesignTokenRoot(root) {
        this.designTokenRoot = root;
        return this;
    }
    register(...registrations) {
        const container = this.container;
        const elementDefinitionEntries = [];
        const disambiguate = this.disambiguate;
        const shadowRootMode = this.shadowRootMode;
        const context = {
            elementPrefix: this.prefix,
            tryDefineElement(params, elementDefinitionType, elementDefinitionCallback) {
                const extractedParams = extractTryDefineElementParams(params, elementDefinitionType, elementDefinitionCallback);
                const { name, callback, baseClass } = extractedParams;
                let { type } = extractedParams;
                let elementName = name;
                let typeFoundByName = elementTypesByTag.get(elementName);
                let needsDefine = true;
                while (typeFoundByName) {
                    const result = disambiguate(elementName, type, typeFoundByName);
                    switch (result) {
                        case ElementDisambiguation.ignoreDuplicate:
                            return;
                        case ElementDisambiguation.definitionCallbackOnly:
                            needsDefine = false;
                            typeFoundByName = void 0;
                            break;
                        default:
                            elementName = result;
                            typeFoundByName = elementTypesByTag.get(elementName);
                            break;
                    }
                }
                if (needsDefine) {
                    if (elementTagsByType.has(type) || type === _foundation_element_foundation_element_js__WEBPACK_IMPORTED_MODULE_2__.FoundationElement) {
                        type = class extends type {
                        };
                    }
                    elementTypesByTag.set(elementName, type);
                    elementTagsByType.set(type, elementName);
                    if (baseClass) {
                        elementTagsByType.set(baseClass, elementName);
                    }
                }
                elementDefinitionEntries.push(new ElementDefinitionEntry(container, elementName, type, shadowRootMode, callback, needsDefine));
            },
        };
        if (!this.designTokensInitialized) {
            this.designTokensInitialized = true;
            if (this.designTokenRoot !== null) {
                _design_token_design_token_js__WEBPACK_IMPORTED_MODULE_3__.DesignToken.registerRoot(this.designTokenRoot);
            }
        }
        container.registerWithContext(context, ...registrations);
        for (const entry of elementDefinitionEntries) {
            entry.callback(entry);
            if (entry.willDefine && entry.definition !== null) {
                entry.definition.define();
            }
        }
        return this;
    }
}
class ElementDefinitionEntry {
    constructor(container, name, type, shadowRootMode, callback, willDefine) {
        this.container = container;
        this.name = name;
        this.type = type;
        this.shadowRootMode = shadowRootMode;
        this.callback = callback;
        this.willDefine = willDefine;
        this.definition = null;
    }
    definePresentation(presentation) {
        _component_presentation_js__WEBPACK_IMPORTED_MODULE_4__.ComponentPresentation.define(this.name, presentation, this.container);
    }
    defineElement(definition) {
        this.definition = new _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.FASTElementDefinition(this.type, Object.assign(Object.assign({}, definition), { name: this.name }));
    }
    tagFor(type) {
        return DesignSystem.tagFor(type);
    }
}
/* eslint-enable @typescript-eslint/no-non-null-assertion */


/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/design-system/index.js":
/*!*********************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/design-system/index.js ***!
  \*********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ComponentPresentation: () => (/* reexport safe */ _component_presentation_js__WEBPACK_IMPORTED_MODULE_1__.ComponentPresentation),
/* harmony export */   DefaultComponentPresentation: () => (/* reexport safe */ _component_presentation_js__WEBPACK_IMPORTED_MODULE_1__.DefaultComponentPresentation),
/* harmony export */   DesignSystem: () => (/* reexport safe */ _design_system_js__WEBPACK_IMPORTED_MODULE_0__.DesignSystem),
/* harmony export */   ElementDisambiguation: () => (/* reexport safe */ _design_system_js__WEBPACK_IMPORTED_MODULE_0__.ElementDisambiguation)
/* harmony export */ });
/* harmony import */ var _design_system_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./design-system.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/design-system/design-system.js");
/* harmony import */ var _component_presentation_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./component-presentation.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/design-system/component-presentation.js");





/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/design-token/custom-property-manager.js":
/*!**************************************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/design-token/custom-property-manager.js ***!
  \**************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   PropertyTargetManager: () => (/* binding */ PropertyTargetManager),
/* harmony export */   RootStyleSheetTarget: () => (/* binding */ RootStyleSheetTarget),
/* harmony export */   defaultElement: () => (/* binding */ defaultElement)
/* harmony export */ });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! tslib */ "./node_modules/@microsoft/fast-foundation/node_modules/tslib/tslib.es6.js");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @microsoft/fast-element */ "webpack/sharing/consume/default/@microsoft/fast-element/@microsoft/fast-element");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__);


const defaultElement = document.createElement("div");
function isFastElement(element) {
    return element instanceof _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.FASTElement;
}
class QueuedStyleSheetTarget {
    setProperty(name, value) {
        _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.DOM.queueUpdate(() => this.target.setProperty(name, value));
    }
    removeProperty(name) {
        _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.DOM.queueUpdate(() => this.target.removeProperty(name));
    }
}
/**
 * Handles setting properties for a FASTElement using Constructable Stylesheets
 */
class ConstructableStyleSheetTarget extends QueuedStyleSheetTarget {
    constructor(source) {
        super();
        const sheet = new CSSStyleSheet();
        this.target = sheet.cssRules[sheet.insertRule(":host{}")].style;
        source.$fastController.addStyles(_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.ElementStyles.create([sheet]));
    }
}
class DocumentStyleSheetTarget extends QueuedStyleSheetTarget {
    constructor() {
        super();
        const sheet = new CSSStyleSheet();
        this.target = sheet.cssRules[sheet.insertRule(":root{}")].style;
        document.adoptedStyleSheets = [
            ...document.adoptedStyleSheets,
            sheet,
        ];
    }
}
class HeadStyleElementStyleSheetTarget extends QueuedStyleSheetTarget {
    constructor() {
        super();
        this.style = document.createElement("style");
        document.head.appendChild(this.style);
        const { sheet } = this.style;
        // Because the HTMLStyleElement has been appended,
        // there shouldn't exist a case where `sheet` is null,
        // but if-check it just in case.
        if (sheet) {
            // https://github.com/jsdom/jsdom uses https://github.com/NV/CSSOM for it's CSSOM implementation,
            // which implements the DOM Level 2 spec for CSSStyleSheet where insertRule() requires an index argument.
            const index = sheet.insertRule(":root{}", sheet.cssRules.length);
            this.target = sheet.cssRules[index].style;
        }
    }
}
/**
 * Handles setting properties for a FASTElement using an HTMLStyleElement
 */
class StyleElementStyleSheetTarget {
    constructor(target) {
        this.store = new Map();
        this.target = null;
        const controller = target.$fastController;
        this.style = document.createElement("style");
        controller.addStyles(this.style);
        _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.Observable.getNotifier(controller).subscribe(this, "isConnected");
        this.handleChange(controller, "isConnected");
    }
    targetChanged() {
        if (this.target !== null) {
            for (const [key, value] of this.store.entries()) {
                this.target.setProperty(key, value);
            }
        }
    }
    setProperty(name, value) {
        this.store.set(name, value);
        _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.DOM.queueUpdate(() => {
            if (this.target !== null) {
                this.target.setProperty(name, value);
            }
        });
    }
    removeProperty(name) {
        this.store.delete(name);
        _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.DOM.queueUpdate(() => {
            if (this.target !== null) {
                this.target.removeProperty(name);
            }
        });
    }
    handleChange(source, key) {
        // HTMLStyleElement.sheet is null if the element isn't connected to the DOM,
        // so this method reacts to changes in DOM connection for the element hosting
        // the HTMLStyleElement.
        //
        // All rules applied via the CSSOM also get cleared when the element disconnects,
        // so we need to add a new rule each time and populate it with the stored properties
        const { sheet } = this.style;
        if (sheet) {
            // Safari will throw if we try to use the return result of insertRule()
            // to index the rule inline, so store as a const prior to indexing.
            // https://github.com/jsdom/jsdom uses https://github.com/NV/CSSOM for it's CSSOM implementation,
            // which implements the DOM Level 2 spec for CSSStyleSheet where insertRule() requires an index argument.
            const index = sheet.insertRule(":host{}", sheet.cssRules.length);
            this.target = sheet.cssRules[index].style;
        }
        else {
            this.target = null;
        }
    }
}
(0,tslib__WEBPACK_IMPORTED_MODULE_1__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.observable
], StyleElementStyleSheetTarget.prototype, "target", void 0);
/**
 * Handles setting properties for a normal HTMLElement
 */
class ElementStyleSheetTarget {
    constructor(source) {
        this.target = source.style;
    }
    setProperty(name, value) {
        _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.DOM.queueUpdate(() => this.target.setProperty(name, value));
    }
    removeProperty(name) {
        _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.DOM.queueUpdate(() => this.target.removeProperty(name));
    }
}
/**
 * Controls emission for default values. This control is capable
 * of emitting to multiple {@link PropertyTarget | PropertyTargets},
 * and only emits if it has at least one root.
 *
 * @internal
 */
class RootStyleSheetTarget {
    setProperty(name, value) {
        RootStyleSheetTarget.properties[name] = value;
        for (const target of RootStyleSheetTarget.roots.values()) {
            PropertyTargetManager.getOrCreate(RootStyleSheetTarget.normalizeRoot(target)).setProperty(name, value);
        }
    }
    removeProperty(name) {
        delete RootStyleSheetTarget.properties[name];
        for (const target of RootStyleSheetTarget.roots.values()) {
            PropertyTargetManager.getOrCreate(RootStyleSheetTarget.normalizeRoot(target)).removeProperty(name);
        }
    }
    static registerRoot(root) {
        const { roots } = RootStyleSheetTarget;
        if (!roots.has(root)) {
            roots.add(root);
            const target = PropertyTargetManager.getOrCreate(this.normalizeRoot(root));
            for (const key in RootStyleSheetTarget.properties) {
                target.setProperty(key, RootStyleSheetTarget.properties[key]);
            }
        }
    }
    static unregisterRoot(root) {
        const { roots } = RootStyleSheetTarget;
        if (roots.has(root)) {
            roots.delete(root);
            const target = PropertyTargetManager.getOrCreate(RootStyleSheetTarget.normalizeRoot(root));
            for (const key in RootStyleSheetTarget.properties) {
                target.removeProperty(key);
            }
        }
    }
    /**
     * Returns the document when provided the default element,
     * otherwise is a no-op
     * @param root - the root to normalize
     */
    static normalizeRoot(root) {
        return root === defaultElement ? document : root;
    }
}
RootStyleSheetTarget.roots = new Set();
RootStyleSheetTarget.properties = {};
// Caches PropertyTarget instances
const propertyTargetCache = new WeakMap();
// Use Constructable StyleSheets for FAST elements when supported, otherwise use
// HTMLStyleElement instances
const propertyTargetCtor = _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.DOM.supportsAdoptedStyleSheets
    ? ConstructableStyleSheetTarget
    : StyleElementStyleSheetTarget;
/**
 * Manages creation and caching of PropertyTarget instances.
 *
 * @internal
 */
const PropertyTargetManager = Object.freeze({
    getOrCreate(source) {
        if (propertyTargetCache.has(source)) {
            /* eslint-disable-next-line @typescript-eslint/no-non-null-assertion */
            return propertyTargetCache.get(source);
        }
        let target;
        if (source === defaultElement) {
            target = new RootStyleSheetTarget();
        }
        else if (source instanceof Document) {
            target = _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.DOM.supportsAdoptedStyleSheets
                ? new DocumentStyleSheetTarget()
                : new HeadStyleElementStyleSheetTarget();
        }
        else if (isFastElement(source)) {
            target = new propertyTargetCtor(source);
        }
        else {
            target = new ElementStyleSheetTarget(source);
        }
        propertyTargetCache.set(source, target);
        return target;
    },
});


/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/design-token/design-token.js":
/*!***************************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/design-token/design-token.js ***!
  \***************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DesignToken: () => (/* binding */ DesignToken)
/* harmony export */ });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! tslib */ "./node_modules/@microsoft/fast-foundation/node_modules/tslib/tslib.es6.js");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @microsoft/fast-element */ "webpack/sharing/consume/default/@microsoft/fast-element/@microsoft/fast-element");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _utilities_composed_parent_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utilities/composed-parent.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/utilities/composed-parent.js");
/* harmony import */ var _utilities_composed_contains_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utilities/composed-contains.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/utilities/composed-contains.js");
/* harmony import */ var _custom_property_manager_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./custom-property-manager.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/design-token/custom-property-manager.js");






/**
 * Implementation of {@link (DesignToken:interface)}
 */
class DesignTokenImpl extends _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.CSSDirective {
    constructor(configuration) {
        super();
        this.subscribers = new WeakMap();
        this._appliedTo = new Set();
        this.name = configuration.name;
        if (configuration.cssCustomPropertyName !== null) {
            this.cssCustomProperty = `--${configuration.cssCustomPropertyName}`;
            this.cssVar = `var(${this.cssCustomProperty})`;
        }
        this.id = DesignTokenImpl.uniqueId();
        DesignTokenImpl.tokensById.set(this.id, this);
    }
    get appliedTo() {
        return [...this._appliedTo];
    }
    static from(nameOrConfig) {
        return new DesignTokenImpl({
            name: typeof nameOrConfig === "string" ? nameOrConfig : nameOrConfig.name,
            cssCustomPropertyName: typeof nameOrConfig === "string"
                ? nameOrConfig
                : nameOrConfig.cssCustomPropertyName === void 0
                    ? nameOrConfig.name
                    : nameOrConfig.cssCustomPropertyName,
        });
    }
    static isCSSDesignToken(token) {
        return typeof token.cssCustomProperty === "string";
    }
    static isDerivedDesignTokenValue(value) {
        return typeof value === "function";
    }
    /**
     * Gets a token by ID. Returns undefined if the token was not found.
     * @param id - The ID of the token
     * @returns
     */
    static getTokenById(id) {
        return DesignTokenImpl.tokensById.get(id);
    }
    getOrCreateSubscriberSet(target = this) {
        return (this.subscribers.get(target) ||
            (this.subscribers.set(target, new Set()) && this.subscribers.get(target)));
    }
    createCSS() {
        return this.cssVar || "";
    }
    getValueFor(element) {
        const value = DesignTokenNode.getOrCreate(element).get(this);
        if (value !== undefined) {
            return value;
        }
        throw new Error(`Value could not be retrieved for token named "${this.name}". Ensure the value is set for ${element} or an ancestor of ${element}.`);
    }
    setValueFor(element, value) {
        this._appliedTo.add(element);
        if (value instanceof DesignTokenImpl) {
            value = this.alias(value);
        }
        DesignTokenNode.getOrCreate(element).set(this, value);
        return this;
    }
    deleteValueFor(element) {
        this._appliedTo.delete(element);
        if (DesignTokenNode.existsFor(element)) {
            DesignTokenNode.getOrCreate(element).delete(this);
        }
        return this;
    }
    withDefault(value) {
        this.setValueFor(_custom_property_manager_js__WEBPACK_IMPORTED_MODULE_1__.defaultElement, value);
        return this;
    }
    subscribe(subscriber, target) {
        const subscriberSet = this.getOrCreateSubscriberSet(target);
        if (target && !DesignTokenNode.existsFor(target)) {
            DesignTokenNode.getOrCreate(target);
        }
        if (!subscriberSet.has(subscriber)) {
            subscriberSet.add(subscriber);
        }
    }
    unsubscribe(subscriber, target) {
        const list = this.subscribers.get(target || this);
        if (list && list.has(subscriber)) {
            list.delete(subscriber);
        }
    }
    /**
     * Notifies subscribers that the value for an element has changed.
     * @param element - The element to emit a notification for
     */
    notify(element) {
        const record = Object.freeze({ token: this, target: element });
        if (this.subscribers.has(this)) {
            this.subscribers.get(this).forEach(sub => sub.handleChange(record));
        }
        if (this.subscribers.has(element)) {
            this.subscribers.get(element).forEach(sub => sub.handleChange(record));
        }
    }
    /**
     * Alias the token to the provided token.
     * @param token - the token to alias to
     */
    alias(token) {
        return ((target) => token.getValueFor(target));
    }
}
DesignTokenImpl.uniqueId = (() => {
    let id = 0;
    return () => {
        id++;
        return id.toString(16);
    };
})();
/**
 * Token storage by token ID
 */
DesignTokenImpl.tokensById = new Map();
class CustomPropertyReflector {
    startReflection(token, target) {
        token.subscribe(this, target);
        this.handleChange({ token, target });
    }
    stopReflection(token, target) {
        token.unsubscribe(this, target);
        this.remove(token, target);
    }
    handleChange(record) {
        const { token, target } = record;
        this.add(token, target);
    }
    add(token, target) {
        _custom_property_manager_js__WEBPACK_IMPORTED_MODULE_1__.PropertyTargetManager.getOrCreate(target).setProperty(token.cssCustomProperty, this.resolveCSSValue(DesignTokenNode.getOrCreate(target).get(token)));
    }
    remove(token, target) {
        _custom_property_manager_js__WEBPACK_IMPORTED_MODULE_1__.PropertyTargetManager.getOrCreate(target).removeProperty(token.cssCustomProperty);
    }
    resolveCSSValue(value) {
        return value && typeof value.createCSS === "function" ? value.createCSS() : value;
    }
}
/**
 * A light wrapper around BindingObserver to handle value caching and
 * token notification
 */
class DesignTokenBindingObserver {
    constructor(source, token, node) {
        this.source = source;
        this.token = token;
        this.node = node;
        this.dependencies = new Set();
        this.observer = _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.Observable.binding(source, this, false);
        // This is a little bit hacky because it's using internal APIs of BindingObserverImpl.
        // BindingObserverImpl queues updates to batch it's notifications which doesn't work for this
        // scenario because the DesignToken.getValueFor API is not async. Without this, using DesignToken.getValueFor()
        // after DesignToken.setValueFor() when setting a dependency of the value being retrieved can return a stale
        // value. Assigning .handleChange to .call forces immediate invocation of this classes handleChange() method,
        // allowing resolution of values synchronously.
        // TODO: https://github.com/microsoft/fast/issues/5110
        this.observer.handleChange = this.observer.call;
        this.handleChange();
    }
    disconnect() {
        this.observer.disconnect();
    }
    /**
     * @internal
     */
    handleChange() {
        this.node.store.set(this.token, this.observer.observe(this.node.target, _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.defaultExecutionContext));
    }
}
/**
 * Stores resolved token/value pairs and notifies on changes
 */
class Store {
    constructor() {
        this.values = new Map();
    }
    set(token, value) {
        if (this.values.get(token) !== value) {
            this.values.set(token, value);
            _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.Observable.getNotifier(this).notify(token.id);
        }
    }
    get(token) {
        _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.Observable.track(this, token.id);
        return this.values.get(token);
    }
    delete(token) {
        this.values.delete(token);
    }
    all() {
        return this.values.entries();
    }
}
const nodeCache = new WeakMap();
const childToParent = new WeakMap();
/**
 * A node responsible for setting and getting token values,
 * emitting values to CSS custom properties, and maintaining
 * inheritance structures.
 */
class DesignTokenNode {
    constructor(target) {
        this.target = target;
        /**
         * Stores all resolved token values for a node
         */
        this.store = new Store();
        /**
         * All children assigned to the node
         */
        this.children = [];
        /**
         * All values explicitly assigned to the node in their raw form
         */
        this.assignedValues = new Map();
        /**
         * Tokens currently being reflected to CSS custom properties
         */
        this.reflecting = new Set();
        /**
         * Binding observers for assigned and inherited derived values.
         */
        this.bindingObservers = new Map();
        /**
         * Emits notifications to token when token values
         * change the DesignTokenNode
         */
        this.tokenValueChangeHandler = {
            handleChange: (source, arg) => {
                const token = DesignTokenImpl.getTokenById(arg);
                if (token) {
                    // Notify any token subscribers
                    token.notify(this.target);
                    if (DesignTokenImpl.isCSSDesignToken(token)) {
                        const parent = this.parent;
                        const reflecting = this.isReflecting(token);
                        if (parent) {
                            const parentValue = parent.get(token);
                            const sourceValue = source.get(token);
                            if (parentValue !== sourceValue && !reflecting) {
                                this.reflectToCSS(token);
                            }
                            else if (parentValue === sourceValue && reflecting) {
                                this.stopReflectToCSS(token);
                            }
                        }
                        else if (!reflecting) {
                            this.reflectToCSS(token);
                        }
                    }
                }
            },
        };
        nodeCache.set(target, this);
        // Map store change notifications to token change notifications
        _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.Observable.getNotifier(this.store).subscribe(this.tokenValueChangeHandler);
        if (target instanceof _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.FASTElement) {
            target.$fastController.addBehaviors([this]);
        }
        else if (target.isConnected) {
            this.bind();
        }
    }
    /**
     * Returns a DesignTokenNode for an element.
     * Creates a new instance if one does not already exist for a node,
     * otherwise returns the cached instance
     *
     * @param target - The HTML element to retrieve a DesignTokenNode for
     */
    static getOrCreate(target) {
        return nodeCache.get(target) || new DesignTokenNode(target);
    }
    /**
     * Determines if a DesignTokenNode has been created for a target
     * @param target - The element to test
     */
    static existsFor(target) {
        return nodeCache.has(target);
    }
    /**
     * Searches for and return the nearest parent DesignTokenNode.
     * Null is returned if no node is found or the node provided is for a default element.
     */
    static findParent(node) {
        if (!(_custom_property_manager_js__WEBPACK_IMPORTED_MODULE_1__.defaultElement === node.target)) {
            let parent = (0,_utilities_composed_parent_js__WEBPACK_IMPORTED_MODULE_2__.composedParent)(node.target);
            while (parent !== null) {
                if (nodeCache.has(parent)) {
                    return nodeCache.get(parent);
                }
                parent = (0,_utilities_composed_parent_js__WEBPACK_IMPORTED_MODULE_2__.composedParent)(parent);
            }
            return DesignTokenNode.getOrCreate(_custom_property_manager_js__WEBPACK_IMPORTED_MODULE_1__.defaultElement);
        }
        return null;
    }
    /**
     * Finds the closest node with a value explicitly assigned for a token, otherwise null.
     * @param token - The token to look for
     * @param start - The node to start looking for value assignment
     * @returns
     */
    static findClosestAssignedNode(token, start) {
        let current = start;
        do {
            if (current.has(token)) {
                return current;
            }
            current = current.parent
                ? current.parent
                : current.target !== _custom_property_manager_js__WEBPACK_IMPORTED_MODULE_1__.defaultElement
                    ? DesignTokenNode.getOrCreate(_custom_property_manager_js__WEBPACK_IMPORTED_MODULE_1__.defaultElement)
                    : null;
        } while (current !== null);
        return null;
    }
    /**
     * The parent DesignTokenNode, or null.
     */
    get parent() {
        return childToParent.get(this) || null;
    }
    /**
     * Checks if a token has been assigned an explicit value the node.
     * @param token - the token to check.
     */
    has(token) {
        return this.assignedValues.has(token);
    }
    /**
     * Gets the value of a token for a node
     * @param token - The token to retrieve the value for
     * @returns
     */
    get(token) {
        const value = this.store.get(token);
        if (value !== undefined) {
            return value;
        }
        const raw = this.getRaw(token);
        if (raw !== undefined) {
            this.hydrate(token, raw);
            return this.get(token);
        }
    }
    /**
     * Retrieves the raw assigned value of a token from the nearest assigned node.
     * @param token - The token to retrieve a raw value for
     * @returns
     */
    getRaw(token) {
        var _a;
        if (this.assignedValues.has(token)) {
            return this.assignedValues.get(token);
        }
        return (_a = DesignTokenNode.findClosestAssignedNode(token, this)) === null || _a === void 0 ? void 0 : _a.getRaw(token);
    }
    /**
     * Sets a token to a value for a node
     * @param token - The token to set
     * @param value - The value to set the token to
     */
    set(token, value) {
        if (DesignTokenImpl.isDerivedDesignTokenValue(this.assignedValues.get(token))) {
            this.tearDownBindingObserver(token);
        }
        this.assignedValues.set(token, value);
        if (DesignTokenImpl.isDerivedDesignTokenValue(value)) {
            this.setupBindingObserver(token, value);
        }
        else {
            this.store.set(token, value);
        }
    }
    /**
     * Deletes a token value for the node.
     * @param token - The token to delete the value for
     */
    delete(token) {
        this.assignedValues.delete(token);
        this.tearDownBindingObserver(token);
        const upstream = this.getRaw(token);
        if (upstream) {
            this.hydrate(token, upstream);
        }
        else {
            this.store.delete(token);
        }
    }
    /**
     * Invoked when the DesignTokenNode.target is attached to the document
     */
    bind() {
        const parent = DesignTokenNode.findParent(this);
        if (parent) {
            parent.appendChild(this);
        }
        for (const key of this.assignedValues.keys()) {
            key.notify(this.target);
        }
    }
    /**
     * Invoked when the DesignTokenNode.target is detached from the document
     */
    unbind() {
        if (this.parent) {
            const parent = childToParent.get(this);
            parent.removeChild(this);
        }
    }
    /**
     * Appends a child to a parent DesignTokenNode.
     * @param child - The child to append to the node
     */
    appendChild(child) {
        if (child.parent) {
            childToParent.get(child).removeChild(child);
        }
        const reParent = this.children.filter(x => child.contains(x));
        childToParent.set(child, this);
        this.children.push(child);
        reParent.forEach(x => child.appendChild(x));
        _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.Observable.getNotifier(this.store).subscribe(child);
        // How can we not notify *every* subscriber?
        for (const [token, value] of this.store.all()) {
            child.hydrate(token, this.bindingObservers.has(token) ? this.getRaw(token) : value);
        }
    }
    /**
     * Removes a child from a node.
     * @param child - The child to remove.
     */
    removeChild(child) {
        const childIndex = this.children.indexOf(child);
        if (childIndex !== -1) {
            this.children.splice(childIndex, 1);
        }
        _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.Observable.getNotifier(this.store).unsubscribe(child);
        return child.parent === this ? childToParent.delete(child) : false;
    }
    /**
     * Tests whether a provided node is contained by
     * the calling node.
     * @param test - The node to test
     */
    contains(test) {
        return (0,_utilities_composed_contains_js__WEBPACK_IMPORTED_MODULE_3__.composedContains)(this.target, test.target);
    }
    /**
     * Instructs the node to reflect a design token for the provided token.
     * @param token - The design token to reflect
     */
    reflectToCSS(token) {
        if (!this.isReflecting(token)) {
            this.reflecting.add(token);
            DesignTokenNode.cssCustomPropertyReflector.startReflection(token, this.target);
        }
    }
    /**
     * Stops reflecting a DesignToken to CSS
     * @param token - The design token to stop reflecting
     */
    stopReflectToCSS(token) {
        if (this.isReflecting(token)) {
            this.reflecting.delete(token);
            DesignTokenNode.cssCustomPropertyReflector.stopReflection(token, this.target);
        }
    }
    /**
     * Determines if a token is being reflected to CSS for a node.
     * @param token - The token to check for reflection
     * @returns
     */
    isReflecting(token) {
        return this.reflecting.has(token);
    }
    /**
     * Handle changes to upstream tokens
     * @param source - The parent DesignTokenNode
     * @param property - The token ID that changed
     */
    handleChange(source, property) {
        const token = DesignTokenImpl.getTokenById(property);
        if (!token) {
            return;
        }
        this.hydrate(token, this.getRaw(token));
    }
    /**
     * Hydrates a token with a DesignTokenValue, making retrieval available.
     * @param token - The token to hydrate
     * @param value - The value to hydrate
     */
    hydrate(token, value) {
        if (!this.has(token)) {
            const observer = this.bindingObservers.get(token);
            if (DesignTokenImpl.isDerivedDesignTokenValue(value)) {
                if (observer) {
                    // If the binding source doesn't match, we need
                    // to update the binding
                    if (observer.source !== value) {
                        this.tearDownBindingObserver(token);
                        this.setupBindingObserver(token, value);
                    }
                }
                else {
                    this.setupBindingObserver(token, value);
                }
            }
            else {
                if (observer) {
                    this.tearDownBindingObserver(token);
                }
                this.store.set(token, value);
            }
        }
    }
    /**
     * Sets up a binding observer for a derived token value that notifies token
     * subscribers on change.
     *
     * @param token - The token to notify when the binding updates
     * @param source - The binding source
     */
    setupBindingObserver(token, source) {
        const binding = new DesignTokenBindingObserver(source, token, this);
        this.bindingObservers.set(token, binding);
        return binding;
    }
    /**
     * Tear down a binding observer for a token.
     */
    tearDownBindingObserver(token) {
        if (this.bindingObservers.has(token)) {
            this.bindingObservers.get(token).disconnect();
            this.bindingObservers.delete(token);
            return true;
        }
        return false;
    }
}
/**
 * Responsible for reflecting tokens to CSS custom properties
 */
DesignTokenNode.cssCustomPropertyReflector = new CustomPropertyReflector();
(0,tslib__WEBPACK_IMPORTED_MODULE_4__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.observable
], DesignTokenNode.prototype, "children", void 0);
function create(nameOrConfig) {
    return DesignTokenImpl.from(nameOrConfig);
}
/* eslint-enable @typescript-eslint/no-unused-vars */
/**
 * Factory object for creating {@link (DesignToken:interface)} instances.
 * @public
 */
const DesignToken = Object.freeze({
    create,
    /**
     * Informs DesignToken that an HTMLElement for which tokens have
     * been set has been connected to the document.
     *
     * The browser does not provide a reliable mechanism to observe an HTMLElement's connectedness
     * in all scenarios, so invoking this method manually is necessary when:
     *
     * 1. Token values are set for an HTMLElement.
     * 2. The HTMLElement does not inherit from FASTElement.
     * 3. The HTMLElement is not connected to the document when token values are set.
     *
     * @param element - The element to notify
     * @returns - true if notification was successful, otherwise false.
     */
    notifyConnection(element) {
        if (!element.isConnected || !DesignTokenNode.existsFor(element)) {
            return false;
        }
        DesignTokenNode.getOrCreate(element).bind();
        return true;
    },
    /**
     * Informs DesignToken that an HTMLElement for which tokens have
     * been set has been disconnected to the document.
     *
     * The browser does not provide a reliable mechanism to observe an HTMLElement's connectedness
     * in all scenarios, so invoking this method manually is necessary when:
     *
     * 1. Token values are set for an HTMLElement.
     * 2. The HTMLElement does not inherit from FASTElement.
     *
     * @param element - The element to notify
     * @returns - true if notification was successful, otherwise false.
     */
    notifyDisconnection(element) {
        if (element.isConnected || !DesignTokenNode.existsFor(element)) {
            return false;
        }
        DesignTokenNode.getOrCreate(element).unbind();
        return true;
    },
    /**
     * Registers and element or document as a DesignToken root.
     * {@link CSSDesignToken | CSSDesignTokens} with default values assigned via
     * {@link (DesignToken:interface).withDefault} will emit CSS custom properties to all
     * registered roots.
     * @param target - The root to register
     */
    registerRoot(target = _custom_property_manager_js__WEBPACK_IMPORTED_MODULE_1__.defaultElement) {
        _custom_property_manager_js__WEBPACK_IMPORTED_MODULE_1__.RootStyleSheetTarget.registerRoot(target);
    },
    /**
     * Unregister an element or document as a DesignToken root.
     * @param target - The root to deregister
     */
    unregisterRoot(target = _custom_property_manager_js__WEBPACK_IMPORTED_MODULE_1__.defaultElement) {
        _custom_property_manager_js__WEBPACK_IMPORTED_MODULE_1__.RootStyleSheetTarget.unregisterRoot(target);
    },
});
/* eslint-enable @typescript-eslint/no-non-null-assertion */


/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/di/di.js":
/*!*******************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/di/di.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Container: () => (/* binding */ Container),
/* harmony export */   ContainerConfiguration: () => (/* binding */ ContainerConfiguration),
/* harmony export */   ContainerImpl: () => (/* binding */ ContainerImpl),
/* harmony export */   DI: () => (/* binding */ DI),
/* harmony export */   DefaultResolver: () => (/* binding */ DefaultResolver),
/* harmony export */   FactoryImpl: () => (/* binding */ FactoryImpl),
/* harmony export */   Registration: () => (/* binding */ Registration),
/* harmony export */   ResolverBuilder: () => (/* binding */ ResolverBuilder),
/* harmony export */   ResolverImpl: () => (/* binding */ ResolverImpl),
/* harmony export */   ServiceLocator: () => (/* binding */ ServiceLocator),
/* harmony export */   all: () => (/* binding */ all),
/* harmony export */   ignore: () => (/* binding */ ignore),
/* harmony export */   inject: () => (/* binding */ inject),
/* harmony export */   lazy: () => (/* binding */ lazy),
/* harmony export */   newInstanceForScope: () => (/* binding */ newInstanceForScope),
/* harmony export */   newInstanceOf: () => (/* binding */ newInstanceOf),
/* harmony export */   optional: () => (/* binding */ optional),
/* harmony export */   singleton: () => (/* binding */ singleton),
/* harmony export */   transient: () => (/* binding */ transient),
/* harmony export */   validateKey: () => (/* binding */ validateKey)
/* harmony export */ });
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @microsoft/fast-element */ "webpack/sharing/consume/default/@microsoft/fast-element/@microsoft/fast-element");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__);
/**
 * Big thanks to https://github.com/fkleuver and the https://github.com/aurelia/aurelia project
 * for the bulk of this code and many of the associated tests.
 */

// Tiny polyfill for TypeScript's Reflect metadata API.
const metadataByTarget = new Map();
if (!("metadata" in Reflect)) {
    Reflect.metadata = function (key, value) {
        return function (target) {
            Reflect.defineMetadata(key, value, target);
        };
    };
    Reflect.defineMetadata = function (key, value, target) {
        let metadata = metadataByTarget.get(target);
        if (metadata === void 0) {
            metadataByTarget.set(target, (metadata = new Map()));
        }
        metadata.set(key, value);
    };
    Reflect.getOwnMetadata = function (key, target) {
        const metadata = metadataByTarget.get(target);
        if (metadata !== void 0) {
            return metadata.get(key);
        }
        return void 0;
    };
}
/**
 * A utility class used that constructs and registers resolvers for a dependency
 * injection container. Supports a standard set of object lifetimes.
 * @public
 */
class ResolverBuilder {
    /**
     *
     * @param container - The container to create resolvers for.
     * @param key - The key to register resolvers under.
     */
    constructor(container, key) {
        this.container = container;
        this.key = key;
    }
    /**
     * Creates a resolver for an existing object instance.
     * @param value - The instance to resolve.
     * @returns The resolver.
     */
    instance(value) {
        return this.registerResolver(0 /* instance */, value);
    }
    /**
     * Creates a resolver that enforces a singleton lifetime.
     * @param value - The type to create and cache the singleton for.
     * @returns The resolver.
     */
    singleton(value) {
        return this.registerResolver(1 /* singleton */, value);
    }
    /**
     * Creates a resolver that creates a new instance for every dependency request.
     * @param value - The type to create instances of.
     * @returns - The resolver.
     */
    transient(value) {
        return this.registerResolver(2 /* transient */, value);
    }
    /**
     * Creates a resolver that invokes a callback function for every dependency resolution
     * request, allowing custom logic to return the dependency.
     * @param value - The callback to call during resolution.
     * @returns The resolver.
     */
    callback(value) {
        return this.registerResolver(3 /* callback */, value);
    }
    /**
     * Creates a resolver that invokes a callback function the first time that a dependency
     * resolution is requested. The returned value is then cached and provided for all
     * subsequent requests.
     * @param value - The callback to call during the first resolution.
     * @returns The resolver.
     */
    cachedCallback(value) {
        return this.registerResolver(3 /* callback */, cacheCallbackResult(value));
    }
    /**
     * Aliases the current key to a different key.
     * @param destinationKey - The key to point the alias to.
     * @returns The resolver.
     */
    aliasTo(destinationKey) {
        return this.registerResolver(5 /* alias */, destinationKey);
    }
    registerResolver(strategy, state) {
        const { container, key } = this;
        /* eslint-disable-next-line @typescript-eslint/no-non-null-assertion */
        this.container = this.key = (void 0);
        return container.registerResolver(key, new ResolverImpl(key, strategy, state));
    }
}
function cloneArrayWithPossibleProps(source) {
    const clone = source.slice();
    const keys = Object.keys(source);
    const len = keys.length;
    let key;
    for (let i = 0; i < len; ++i) {
        key = keys[i];
        if (!isArrayIndex(key)) {
            clone[key] = source[key];
        }
    }
    return clone;
}
/**
 * A set of default resolvers useful in configuring a container.
 * @public
 */
const DefaultResolver = Object.freeze({
    /**
     * Disables auto-registration and throws for all un-registered dependencies.
     * @param key - The key to create the resolver for.
     */
    none(key) {
        throw Error(`${key.toString()} not registered, did you forget to add @singleton()?`);
    },
    /**
     * Provides default singleton resolution behavior during auto-registration.
     * @param key - The key to create the resolver for.
     * @returns The resolver.
     */
    singleton(key) {
        return new ResolverImpl(key, 1 /* singleton */, key);
    },
    /**
     * Provides default transient resolution behavior during auto-registration.
     * @param key - The key to create the resolver for.
     * @returns The resolver.
     */
    transient(key) {
        return new ResolverImpl(key, 2 /* transient */, key);
    },
});
/**
 * Configuration for a dependency injection container.
 * @public
 */
const ContainerConfiguration = Object.freeze({
    /**
     * The default configuration used when creating a DOM-disconnected container.
     * @remarks
     * The default creates a root container, with no parent container. It does not handle
     * owner requests and it uses singleton resolution behavior for auto-registration.
     */
    default: Object.freeze({
        parentLocator: () => null,
        responsibleForOwnerRequests: false,
        defaultResolver: DefaultResolver.singleton,
    }),
});
const dependencyLookup = new Map();
function getParamTypes(key) {
    return (Type) => {
        return Reflect.getOwnMetadata(key, Type);
    };
}
let rootDOMContainer = null;
/**
 * The gateway to dependency injection APIs.
 * @public
 */
const DI = Object.freeze({
    /**
     * Creates a new dependency injection container.
     * @param config - The configuration for the container.
     * @returns A newly created dependency injection container.
     */
    createContainer(config) {
        return new ContainerImpl(null, Object.assign({}, ContainerConfiguration.default, config));
    },
    /**
     * Finds the dependency injection container responsible for providing dependencies
     * to the specified node.
     * @param node - The node to find the responsible container for.
     * @returns The container responsible for providing dependencies to the node.
     * @remarks
     * This will be the same as the parent container if the specified node
     * does not itself host a container configured with responsibleForOwnerRequests.
     */
    findResponsibleContainer(node) {
        const owned = node.$$container$$;
        if (owned && owned.responsibleForOwnerRequests) {
            return owned;
        }
        return DI.findParentContainer(node);
    },
    /**
     * Find the dependency injection container up the DOM tree from this node.
     * @param node - The node to find the parent container for.
     * @returns The parent container of this node.
     * @remarks
     * This will be the same as the responsible container if the specified node
     * does not itself host a container configured with responsibleForOwnerRequests.
     */
    findParentContainer(node) {
        const event = new CustomEvent(DILocateParentEventType, {
            bubbles: true,
            composed: true,
            cancelable: true,
            detail: { container: void 0 },
        });
        node.dispatchEvent(event);
        return event.detail.container || DI.getOrCreateDOMContainer();
    },
    /**
     * Returns a dependency injection container if one is explicitly owned by the specified
     * node. If one is not owned, then a new container is created and assigned to the node.
     * @param node - The node to find or create the container for.
     * @param config - The configuration for the container if one needs to be created.
     * @returns The located or created container.
     * @remarks
     * This API does not search for a responsible or parent container. It looks only for a container
     * directly defined on the specified node and creates one at that location if one does not
     * already exist.
     */
    getOrCreateDOMContainer(node, config) {
        if (!node) {
            return (rootDOMContainer ||
                (rootDOMContainer = new ContainerImpl(null, Object.assign({}, ContainerConfiguration.default, config, {
                    parentLocator: () => null,
                }))));
        }
        return (node.$$container$$ ||
            new ContainerImpl(node, Object.assign({}, ContainerConfiguration.default, config, {
                parentLocator: DI.findParentContainer,
            })));
    },
    /**
     * Gets the "design:paramtypes" metadata for the specified type.
     * @param Type - The type to get the metadata for.
     * @returns The metadata array or undefined if no metadata is found.
     */
    getDesignParamtypes: getParamTypes("design:paramtypes"),
    /**
     * Gets the "di:paramtypes" metadata for the specified type.
     * @param Type - The type to get the metadata for.
     * @returns The metadata array or undefined if no metadata is found.
     */
    getAnnotationParamtypes: getParamTypes("di:paramtypes"),
    /**
     *
     * @param Type - Gets the "di:paramtypes" metadata for the specified type. If none is found,
     * an empty metadata array is created and added.
     * @returns The metadata array.
     */
    getOrCreateAnnotationParamTypes(Type) {
        let annotationParamtypes = this.getAnnotationParamtypes(Type);
        if (annotationParamtypes === void 0) {
            Reflect.defineMetadata("di:paramtypes", (annotationParamtypes = []), Type);
        }
        return annotationParamtypes;
    },
    /**
     * Gets the dependency keys representing what is needed to instantiate the specified type.
     * @param Type - The type to get the dependencies for.
     * @returns An array of dependency keys.
     */
    getDependencies(Type) {
        // Note: Every detail of this getDependencies method is pretty deliberate at the moment, and probably not yet 100% tested from every possible angle,
        // so be careful with making changes here as it can have a huge impact on complex end user apps.
        // Preferably, only make changes to the dependency resolution process via a RFC.
        let dependencies = dependencyLookup.get(Type);
        if (dependencies === void 0) {
            // Type.length is the number of constructor parameters. If this is 0, it could mean the class has an empty constructor
            // but it could also mean the class has no constructor at all (in which case it inherits the constructor from the prototype).
            // Non-zero constructor length + no paramtypes means emitDecoratorMetadata is off, or the class has no decorator.
            // We're not doing anything with the above right now, but it's good to keep in mind for any future issues.
            const inject = Type.inject;
            if (inject === void 0) {
                // design:paramtypes is set by tsc when emitDecoratorMetadata is enabled.
                const designParamtypes = DI.getDesignParamtypes(Type);
                // di:paramtypes is set by the parameter decorator from DI.createInterface or by @inject
                const annotationParamtypes = DI.getAnnotationParamtypes(Type);
                if (designParamtypes === void 0) {
                    if (annotationParamtypes === void 0) {
                        // Only go up the prototype if neither static inject nor any of the paramtypes is defined, as
                        // there is no sound way to merge a type's deps with its prototype's deps
                        const Proto = Object.getPrototypeOf(Type);
                        if (typeof Proto === "function" && Proto !== Function.prototype) {
                            dependencies = cloneArrayWithPossibleProps(DI.getDependencies(Proto));
                        }
                        else {
                            dependencies = [];
                        }
                    }
                    else {
                        // No design:paramtypes so just use the di:paramtypes
                        dependencies = cloneArrayWithPossibleProps(annotationParamtypes);
                    }
                }
                else if (annotationParamtypes === void 0) {
                    // No di:paramtypes so just use the design:paramtypes
                    dependencies = cloneArrayWithPossibleProps(designParamtypes);
                }
                else {
                    // We've got both, so merge them (in case of conflict on same index, di:paramtypes take precedence)
                    dependencies = cloneArrayWithPossibleProps(designParamtypes);
                    let len = annotationParamtypes.length;
                    let auAnnotationParamtype;
                    for (let i = 0; i < len; ++i) {
                        auAnnotationParamtype = annotationParamtypes[i];
                        if (auAnnotationParamtype !== void 0) {
                            dependencies[i] = auAnnotationParamtype;
                        }
                    }
                    const keys = Object.keys(annotationParamtypes);
                    len = keys.length;
                    let key;
                    for (let i = 0; i < len; ++i) {
                        key = keys[i];
                        if (!isArrayIndex(key)) {
                            dependencies[key] = annotationParamtypes[key];
                        }
                    }
                }
            }
            else {
                // Ignore paramtypes if we have static inject
                dependencies = cloneArrayWithPossibleProps(inject);
            }
            dependencyLookup.set(Type, dependencies);
        }
        return dependencies;
    },
    /**
     * Defines a property on a web component class. The value of this property will
     * be resolved from the dependency injection container responsible for the element
     * instance, based on where it is connected in the DOM.
     * @param target - The target to define the property on.
     * @param propertyName - The name of the property to define.
     * @param key - The dependency injection key.
     * @param respectConnection - Indicates whether or not to update the property value if the
     * hosting component is disconnected and then re-connected at a different location in the DOM.
     * @remarks
     * The respectConnection option is only applicable to elements that descend from FASTElement.
     */
    defineProperty(target, propertyName, key, respectConnection = false) {
        const diPropertyKey = `$di_${propertyName}`;
        Reflect.defineProperty(target, propertyName, {
            get: function () {
                let value = this[diPropertyKey];
                if (value === void 0) {
                    const container = this instanceof HTMLElement
                        ? DI.findResponsibleContainer(this)
                        : DI.getOrCreateDOMContainer();
                    value = container.get(key);
                    this[diPropertyKey] = value;
                    if (respectConnection && this instanceof _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.FASTElement) {
                        const notifier = this.$fastController;
                        const handleChange = () => {
                            const newContainer = DI.findResponsibleContainer(this);
                            const newValue = newContainer.get(key);
                            const oldValue = this[diPropertyKey];
                            if (newValue !== oldValue) {
                                this[diPropertyKey] = value;
                                notifier.notify(propertyName);
                            }
                        };
                        notifier.subscribe({ handleChange }, "isConnected");
                    }
                }
                return value;
            },
        });
    },
    /**
     * Creates a dependency injection key.
     * @param nameConfigOrCallback - A friendly name for the key or a lambda that configures a
     * default resolution for the dependency.
     * @param configuror - If a friendly name was provided for the first parameter, then an optional
     * lambda that configures a default resolution for the dependency can be provided second.
     * @returns The created key.
     * @remarks
     * The created key can be used as a property decorator or constructor parameter decorator,
     * in addition to its standard use in an inject array or through direct container APIs.
     */
    createInterface(nameConfigOrCallback, configuror) {
        const configure = typeof nameConfigOrCallback === "function"
            ? nameConfigOrCallback
            : configuror;
        const friendlyName = typeof nameConfigOrCallback === "string"
            ? nameConfigOrCallback
            : nameConfigOrCallback && "friendlyName" in nameConfigOrCallback
                ? nameConfigOrCallback.friendlyName || defaultFriendlyName
                : defaultFriendlyName;
        const respectConnection = typeof nameConfigOrCallback === "string"
            ? false
            : nameConfigOrCallback && "respectConnection" in nameConfigOrCallback
                ? nameConfigOrCallback.respectConnection || false
                : false;
        const Interface = function (target, property, index) {
            if (target == null || new.target !== undefined) {
                throw new Error(`No registration for interface: '${Interface.friendlyName}'`);
            }
            if (property) {
                DI.defineProperty(target, property, Interface, respectConnection);
            }
            else {
                const annotationParamtypes = DI.getOrCreateAnnotationParamTypes(target);
                annotationParamtypes[index] = Interface;
            }
        };
        Interface.$isInterface = true;
        Interface.friendlyName = friendlyName == null ? "(anonymous)" : friendlyName;
        if (configure != null) {
            Interface.register = function (container, key) {
                return configure(new ResolverBuilder(container, key !== null && key !== void 0 ? key : Interface));
            };
        }
        Interface.toString = function toString() {
            return `InterfaceSymbol<${Interface.friendlyName}>`;
        };
        return Interface;
    },
    /**
     * A decorator that specifies what to inject into its target.
     * @param dependencies - The dependencies to inject.
     * @returns The decorator to be applied to the target class.
     * @remarks
     * The decorator can be used to decorate a class, listing all of the classes dependencies.
     * Or it can be used to decorate a constructor paramter, indicating what to inject for that
     * parameter.
     * Or it can be used for a web component property, indicating what that property should resolve to.
     */
    inject(...dependencies) {
        return function (target, key, descriptor) {
            if (typeof descriptor === "number") {
                // It's a parameter decorator.
                const annotationParamtypes = DI.getOrCreateAnnotationParamTypes(target);
                const dep = dependencies[0];
                if (dep !== void 0) {
                    annotationParamtypes[descriptor] = dep;
                }
            }
            else if (key) {
                DI.defineProperty(target, key, dependencies[0]);
            }
            else {
                const annotationParamtypes = descriptor
                    ? DI.getOrCreateAnnotationParamTypes(descriptor.value)
                    : DI.getOrCreateAnnotationParamTypes(target);
                let dep;
                for (let i = 0; i < dependencies.length; ++i) {
                    dep = dependencies[i];
                    if (dep !== void 0) {
                        annotationParamtypes[i] = dep;
                    }
                }
            }
        };
    },
    /**
     * Registers the `target` class as a transient dependency; each time the dependency is resolved
     * a new instance will be created.
     *
     * @param target - The class / constructor function to register as transient.
     * @returns The same class, with a static `register` method that takes a container and returns the appropriate resolver.
     *
     * @example
     * On an existing class
     * ```ts
     * class Foo { }
     * DI.transient(Foo);
     * ```
     *
     * @example
     * Inline declaration
     *
     * ```ts
     * const Foo = DI.transient(class { });
     * // Foo is now strongly typed with register
     * Foo.register(container);
     * ```
     *
     * @public
     */
    transient(target) {
        target.register = function register(container) {
            const registration = Registration.transient(target, target);
            return registration.register(container);
        };
        target.registerInRequestor = false;
        return target;
    },
    /**
     * Registers the `target` class as a singleton dependency; the class will only be created once. Each
     * consecutive time the dependency is resolved, the same instance will be returned.
     *
     * @param target - The class / constructor function to register as a singleton.
     * @returns The same class, with a static `register` method that takes a container and returns the appropriate resolver.
     * @example
     * On an existing class
     * ```ts
     * class Foo { }
     * DI.singleton(Foo);
     * ```
     *
     * @example
     * Inline declaration
     * ```ts
     * const Foo = DI.singleton(class { });
     * // Foo is now strongly typed with register
     * Foo.register(container);
     * ```
     *
     * @public
     */
    singleton(target, options = defaultSingletonOptions) {
        target.register = function register(container) {
            const registration = Registration.singleton(target, target);
            return registration.register(container);
        };
        target.registerInRequestor = options.scoped;
        return target;
    },
});
/**
 * The interface key that resolves the dependency injection container itself.
 * @public
 */
const Container = DI.createInterface("Container");
/**
 * The interface key that resolves the service locator itself.
 * @public
 */
const ServiceLocator = Container;
function createResolver(getter) {
    return function (key) {
        const resolver = function (target, property, descriptor) {
            DI.inject(resolver)(target, property, descriptor);
        };
        resolver.$isResolver = true;
        resolver.resolve = function (handler, requestor) {
            return getter(key, handler, requestor);
        };
        return resolver;
    };
}
/**
 * A decorator that specifies what to inject into its target.
 * @param dependencies - The dependencies to inject.
 * @returns The decorator to be applied to the target class.
 * @remarks
 * The decorator can be used to decorate a class, listing all of the classes dependencies.
 * Or it can be used to decorate a constructor paramter, indicating what to inject for that
 * parameter.
 * Or it can be used for a web component property, indicating what that property should resolve to.
 *
 * @public
 */
const inject = DI.inject;
function transientDecorator(target) {
    return DI.transient(target);
}
function transient(target) {
    return target == null ? transientDecorator : transientDecorator(target);
}
const defaultSingletonOptions = { scoped: false };
function singletonDecorator(target) {
    return DI.singleton(target);
}
/**
 * @public
 */
function singleton(targetOrOptions) {
    if (typeof targetOrOptions === "function") {
        return DI.singleton(targetOrOptions);
    }
    return function ($target) {
        return DI.singleton($target, targetOrOptions);
    };
}
function createAllResolver(getter) {
    return function (key, searchAncestors) {
        searchAncestors = !!searchAncestors;
        const resolver = function (target, property, descriptor) {
            DI.inject(resolver)(target, property, descriptor);
        };
        resolver.$isResolver = true;
        resolver.resolve = function (handler, requestor) {
            /* eslint-disable-next-line @typescript-eslint/no-non-null-assertion */
            return getter(key, handler, requestor, searchAncestors);
        };
        return resolver;
    };
}
/**
 * A decorator and DI resolver that will resolve an array of all dependencies
 * registered with the specified key.
 * @param key - The key to resolve all dependencies for.
 * @param searchAncestors - [optional] Indicates whether to search ancestor containers.
 * @public
 */
const all = createAllResolver((key, handler, requestor, searchAncestors) => requestor.getAll(key, searchAncestors));
/**
 * A decorator that lazily injects a dependency depending on whether the `Key` is present at the time of function call.
 *
 * @example
 * You need to make your argument a function that returns the type, for example
 * ```ts
 * class Foo {
 *   constructor( @lazy('random') public random: () => number )
 * }
 * const foo = container.get(Foo); // instanceof Foo
 * foo.random(); // throws
 * ```
 * would throw an exception because you haven't registered `'random'` before calling the method.
 * @example
 * This, would give you a new 'Math.random()' number each time.
 * ```ts
 * class Foo {
 *   constructor( @lazy('random') public random: () => random )
 * }
 * container.register(Registration.callback('random', Math.random ));
 * container.get(Foo).random(); // some random number
 * container.get(Foo).random(); // another random number
 * ```
 *
 * `@lazy` does not manage the lifecycle of the underlying key. If you want a singleton, you have to register as a
 * `singleton`, `transient` would also behave as you would expect, providing you a new instance each time.
 *
 * @param key - The key to lazily resolve.
 * see {@link DI.createInterface} on interactions with interfaces
 *
 * @public
 */
const lazy = createResolver((key, handler, requestor) => {
    return () => requestor.get(key);
});
/**
 * A decorator that allows you to optionally inject a dependency depending on whether the [[`Key`]] is present, for example:
 * @example
 * ```ts
 * class Foo {
 *   constructor( @inject('mystring') public str: string = 'somestring' )
 * }
 * container.get(Foo); // throws
 * ```
 * would fail
 *
 * @example
 * ```ts
 * class Foo {
 *   constructor( @optional('mystring') public str: string = 'somestring' )
 * }
 * container.get(Foo).str // somestring
 * ```
 * if you use it without a default it will inject `undefined`, so remember to mark your input type as
 * possibly `undefined`!
 *
 * @param key - The key to optionally resolve.
 * see {@link DI.createInterface} on interactions with interfaces
 *
 * @public
 */
const optional = createResolver((key, handler, requestor) => {
    if (requestor.has(key, true)) {
        return requestor.get(key);
    }
    else {
        return undefined;
    }
});
/**
 * A decorator that tells the container not to try to inject a dependency.
 *
 * @public
 */
function ignore(target, property, descriptor) {
    DI.inject(ignore)(target, property, descriptor);
}
// Hack: casting below used to prevent TS from generate a namespace which can't be commented
// and results in documentation validation errors.
ignore.$isResolver = true;
ignore.resolve = () => undefined;
/**
 * A decorator that indicates that a new instance should be injected scoped to the
 * container that requested the instance.
 * @param key - The dependency key for the new instance.
 * @remarks
 * This creates a resolver with an instance strategy pointing to the new instance, effectively
 * making this a singleton, scoped to the container or DOM's subtree.
 *
 * @public
 */
const newInstanceForScope = createResolver((key, handler, requestor) => {
    const instance = createNewInstance(key, handler);
    const resolver = new ResolverImpl(key, 0 /* instance */, instance);
    requestor.registerResolver(key, resolver);
    return instance;
});
/**
 * A decorator that indicates that a new instance should be injected.
 * @param key - The dependency key for the new instance.
 * @remarks
 * The instance is not internally cached with a resolver as newInstanceForScope does.
 *
 * @public
 */
const newInstanceOf = createResolver((key, handler, _requestor) => createNewInstance(key, handler));
function createNewInstance(key, handler) {
    /* eslint-disable-next-line @typescript-eslint/no-non-null-assertion */
    return handler.getFactory(key).construct(handler);
}
/** @internal */
class ResolverImpl {
    constructor(key, strategy, state) {
        this.key = key;
        this.strategy = strategy;
        this.state = state;
        this.resolving = false;
    }
    get $isResolver() {
        return true;
    }
    register(container) {
        return container.registerResolver(this.key, this);
    }
    resolve(handler, requestor) {
        switch (this.strategy) {
            case 0 /* instance */:
                return this.state;
            case 1 /* singleton */: {
                if (this.resolving) {
                    throw new Error(`Cyclic dependency found: ${this.state.name}`);
                }
                this.resolving = true;
                this.state = handler
                    .getFactory(this.state)
                    .construct(requestor);
                this.strategy = 0 /* instance */;
                this.resolving = false;
                return this.state;
            }
            case 2 /* transient */: {
                // Always create transients from the requesting container
                const factory = handler.getFactory(this.state);
                if (factory === null) {
                    throw new Error(`Resolver for ${String(this.key)} returned a null factory`);
                }
                return factory.construct(requestor);
            }
            case 3 /* callback */:
                return this.state(handler, requestor, this);
            case 4 /* array */:
                return this.state[0].resolve(handler, requestor);
            case 5 /* alias */:
                return requestor.get(this.state);
            default:
                throw new Error(`Invalid resolver strategy specified: ${this.strategy}.`);
        }
    }
    getFactory(container) {
        var _a, _b, _c;
        switch (this.strategy) {
            case 1 /* singleton */:
            case 2 /* transient */:
                return container.getFactory(this.state);
            case 5 /* alias */:
                return (_c = (_b = (_a = container.getResolver(this.state)) === null || _a === void 0 ? void 0 : _a.getFactory) === null || _b === void 0 ? void 0 : _b.call(_a, container)) !== null && _c !== void 0 ? _c : null;
            default:
                return null;
        }
    }
}
function containerGetKey(d) {
    return this.get(d);
}
function transformInstance(inst, transform) {
    return transform(inst);
}
/** @internal */
class FactoryImpl {
    constructor(Type, dependencies) {
        this.Type = Type;
        this.dependencies = dependencies;
        this.transformers = null;
    }
    construct(container, dynamicDependencies) {
        let instance;
        if (dynamicDependencies === void 0) {
            instance = new this.Type(...this.dependencies.map(containerGetKey, container));
        }
        else {
            instance = new this.Type(...this.dependencies.map(containerGetKey, container), ...dynamicDependencies);
        }
        if (this.transformers == null) {
            return instance;
        }
        return this.transformers.reduce(transformInstance, instance);
    }
    registerTransformer(transformer) {
        (this.transformers || (this.transformers = [])).push(transformer);
    }
}
const containerResolver = {
    $isResolver: true,
    resolve(handler, requestor) {
        return requestor;
    },
};
function isRegistry(obj) {
    return typeof obj.register === "function";
}
function isSelfRegistry(obj) {
    return isRegistry(obj) && typeof obj.registerInRequestor === "boolean";
}
function isRegisterInRequester(obj) {
    return isSelfRegistry(obj) && obj.registerInRequestor;
}
function isClass(obj) {
    return obj.prototype !== void 0;
}
const InstrinsicTypeNames = new Set([
    "Array",
    "ArrayBuffer",
    "Boolean",
    "DataView",
    "Date",
    "Error",
    "EvalError",
    "Float32Array",
    "Float64Array",
    "Function",
    "Int8Array",
    "Int16Array",
    "Int32Array",
    "Map",
    "Number",
    "Object",
    "Promise",
    "RangeError",
    "ReferenceError",
    "RegExp",
    "Set",
    "SharedArrayBuffer",
    "String",
    "SyntaxError",
    "TypeError",
    "Uint8Array",
    "Uint8ClampedArray",
    "Uint16Array",
    "Uint32Array",
    "URIError",
    "WeakMap",
    "WeakSet",
]);
const DILocateParentEventType = "__DI_LOCATE_PARENT__";
const factories = new Map();
/**
 * @internal
 */
class ContainerImpl {
    constructor(owner, config) {
        this.owner = owner;
        this.config = config;
        this._parent = void 0;
        this.registerDepth = 0;
        this.context = null;
        if (owner !== null) {
            owner.$$container$$ = this;
        }
        this.resolvers = new Map();
        this.resolvers.set(Container, containerResolver);
        if (owner instanceof Node) {
            owner.addEventListener(DILocateParentEventType, (e) => {
                if (e.composedPath()[0] !== this.owner) {
                    e.detail.container = this;
                    e.stopImmediatePropagation();
                }
            });
        }
    }
    get parent() {
        if (this._parent === void 0) {
            this._parent = this.config.parentLocator(this.owner);
        }
        return this._parent;
    }
    get depth() {
        return this.parent === null ? 0 : this.parent.depth + 1;
    }
    get responsibleForOwnerRequests() {
        return this.config.responsibleForOwnerRequests;
    }
    registerWithContext(context, ...params) {
        this.context = context;
        this.register(...params);
        this.context = null;
        return this;
    }
    register(...params) {
        if (++this.registerDepth === 100) {
            throw new Error("Unable to autoregister dependency");
            // Most likely cause is trying to register a plain object that does not have a
            // register method and is not a class constructor
        }
        let current;
        let keys;
        let value;
        let j;
        let jj;
        const context = this.context;
        for (let i = 0, ii = params.length; i < ii; ++i) {
            current = params[i];
            if (!isObject(current)) {
                continue;
            }
            if (isRegistry(current)) {
                current.register(this, context);
            }
            else if (isClass(current)) {
                Registration.singleton(current, current).register(this);
            }
            else {
                keys = Object.keys(current);
                j = 0;
                jj = keys.length;
                for (; j < jj; ++j) {
                    value = current[keys[j]];
                    if (!isObject(value)) {
                        continue;
                    }
                    // note: we could remove this if-branch and call this.register directly
                    // - the extra check is just a perf tweak to create fewer unnecessary arrays by the spread operator
                    if (isRegistry(value)) {
                        value.register(this, context);
                    }
                    else {
                        this.register(value);
                    }
                }
            }
        }
        --this.registerDepth;
        return this;
    }
    registerResolver(key, resolver) {
        validateKey(key);
        const resolvers = this.resolvers;
        const result = resolvers.get(key);
        if (result == null) {
            resolvers.set(key, resolver);
        }
        else if (result instanceof ResolverImpl &&
            result.strategy === 4 /* array */) {
            result.state.push(resolver);
        }
        else {
            resolvers.set(key, new ResolverImpl(key, 4 /* array */, [result, resolver]));
        }
        return resolver;
    }
    registerTransformer(key, transformer) {
        const resolver = this.getResolver(key);
        if (resolver == null) {
            return false;
        }
        if (resolver.getFactory) {
            const factory = resolver.getFactory(this);
            if (factory == null) {
                return false;
            }
            // This type cast is a bit of a hacky one, necessary due to the duplicity of IResolverLike.
            // Problem is that that interface's type arg can be of type Key, but the getFactory method only works on
            // type Constructable. So the return type of that optional method has this additional constraint, which
            // seems to confuse the type checker.
            factory.registerTransformer(transformer);
            return true;
        }
        return false;
    }
    getResolver(key, autoRegister = true) {
        validateKey(key);
        if (key.resolve !== void 0) {
            return key;
        }
        /* eslint-disable-next-line @typescript-eslint/no-this-alias */
        let current = this;
        let resolver;
        while (current != null) {
            resolver = current.resolvers.get(key);
            if (resolver == null) {
                if (current.parent == null) {
                    const handler = isRegisterInRequester(key)
                        ? this
                        : current;
                    return autoRegister ? this.jitRegister(key, handler) : null;
                }
                current = current.parent;
            }
            else {
                return resolver;
            }
        }
        return null;
    }
    has(key, searchAncestors = false) {
        return this.resolvers.has(key)
            ? true
            : searchAncestors && this.parent != null
                ? this.parent.has(key, true)
                : false;
    }
    get(key) {
        validateKey(key);
        if (key.$isResolver) {
            return key.resolve(this, this);
        }
        /* eslint-disable-next-line @typescript-eslint/no-this-alias */
        let current = this;
        let resolver;
        while (current != null) {
            resolver = current.resolvers.get(key);
            if (resolver == null) {
                if (current.parent == null) {
                    const handler = isRegisterInRequester(key)
                        ? this
                        : current;
                    resolver = this.jitRegister(key, handler);
                    return resolver.resolve(current, this);
                }
                current = current.parent;
            }
            else {
                return resolver.resolve(current, this);
            }
        }
        throw new Error(`Unable to resolve key: ${String(key)}`);
    }
    getAll(key, searchAncestors = false) {
        validateKey(key);
        /* eslint-disable-next-line @typescript-eslint/no-this-alias */
        const requestor = this;
        let current = requestor;
        let resolver;
        if (searchAncestors) {
            let resolutions = _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.emptyArray;
            while (current != null) {
                resolver = current.resolvers.get(key);
                if (resolver != null) {
                    resolutions = resolutions.concat(
                    /* eslint-disable-next-line @typescript-eslint/no-non-null-assertion */
                    buildAllResponse(resolver, current, requestor));
                }
                current = current.parent;
            }
            return resolutions;
        }
        else {
            while (current != null) {
                resolver = current.resolvers.get(key);
                if (resolver == null) {
                    current = current.parent;
                    if (current == null) {
                        return _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.emptyArray;
                    }
                }
                else {
                    return buildAllResponse(resolver, current, requestor);
                }
            }
        }
        return _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.emptyArray;
    }
    getFactory(Type) {
        let factory = factories.get(Type);
        if (factory === void 0) {
            if (isNativeFunction(Type)) {
                throw new Error(`${Type.name} is a native function and therefore cannot be safely constructed by DI. If this is intentional, please use a callback or cachedCallback resolver.`);
            }
            factories.set(Type, (factory = new FactoryImpl(Type, DI.getDependencies(Type))));
        }
        return factory;
    }
    registerFactory(key, factory) {
        factories.set(key, factory);
    }
    createChild(config) {
        return new ContainerImpl(null, Object.assign({}, this.config, config, { parentLocator: () => this }));
    }
    jitRegister(keyAsValue, handler) {
        if (typeof keyAsValue !== "function") {
            throw new Error(`Attempted to jitRegister something that is not a constructor: '${keyAsValue}'. Did you forget to register this dependency?`);
        }
        if (InstrinsicTypeNames.has(keyAsValue.name)) {
            throw new Error(`Attempted to jitRegister an intrinsic type: ${keyAsValue.name}. Did you forget to add @inject(Key)`);
        }
        if (isRegistry(keyAsValue)) {
            const registrationResolver = keyAsValue.register(handler);
            if (!(registrationResolver instanceof Object) ||
                registrationResolver.resolve == null) {
                const newResolver = handler.resolvers.get(keyAsValue);
                if (newResolver != void 0) {
                    return newResolver;
                }
                throw new Error("A valid resolver was not returned from the static register method");
            }
            return registrationResolver;
        }
        else if (keyAsValue.$isInterface) {
            throw new Error(`Attempted to jitRegister an interface: ${keyAsValue.friendlyName}`);
        }
        else {
            const resolver = this.config.defaultResolver(keyAsValue, handler);
            handler.resolvers.set(keyAsValue, resolver);
            return resolver;
        }
    }
}
const cache = new WeakMap();
function cacheCallbackResult(fun) {
    return function (handler, requestor, resolver) {
        if (cache.has(resolver)) {
            return cache.get(resolver);
        }
        const t = fun(handler, requestor, resolver);
        cache.set(resolver, t);
        return t;
    };
}
/**
 * You can use the resulting Registration of any of the factory methods
 * to register with the container.
 *
 * @example
 * ```
 * class Foo {}
 * const container = DI.createContainer();
 * container.register(Registration.instance(Foo, new Foo()));
 * container.get(Foo);
 * ```
 *
 * @public
 */
const Registration = Object.freeze({
    /**
     * Allows you to pass an instance.
     * Every time you request this {@link Key} you will get this instance back.
     *
     * @example
     * ```
     * Registration.instance(Foo, new Foo()));
     * ```
     *
     * @param key - The key to register the instance under.
     * @param value - The instance to return when the key is requested.
     */
    instance(key, value) {
        return new ResolverImpl(key, 0 /* instance */, value);
    },
    /**
     * Creates an instance from the class.
     * Every time you request this {@link Key} you will get the same one back.
     *
     * @example
     * ```
     * Registration.singleton(Foo, Foo);
     * ```
     *
     * @param key - The key to register the singleton under.
     * @param value - The class to instantiate as a singleton when first requested.
     */
    singleton(key, value) {
        return new ResolverImpl(key, 1 /* singleton */, value);
    },
    /**
     * Creates an instance from a class.
     * Every time you request this {@link Key} you will get a new instance.
     *
     * @example
     * ```
     * Registration.instance(Foo, Foo);
     * ```
     *
     * @param key - The key to register the instance type under.
     * @param value - The class to instantiate each time the key is requested.
     */
    transient(key, value) {
        return new ResolverImpl(key, 2 /* transient */, value);
    },
    /**
     * Delegates to a callback function to provide the dependency.
     * Every time you request this {@link Key} the callback will be invoked to provide
     * the dependency.
     *
     * @example
     * ```
     * Registration.callback(Foo, () => new Foo());
     * Registration.callback(Bar, (c: Container) => new Bar(c.get(Foo)));
     * ```
     *
     * @param key - The key to register the callback for.
     * @param callback - The function that is expected to return the dependency.
     */
    callback(key, callback) {
        return new ResolverImpl(key, 3 /* callback */, callback);
    },
    /**
     * Delegates to a callback function to provide the dependency and then caches the
     * dependency for future requests.
     *
     * @example
     * ```
     * Registration.cachedCallback(Foo, () => new Foo());
     * Registration.cachedCallback(Bar, (c: Container) => new Bar(c.get(Foo)));
     * ```
     *
     * @param key - The key to register the callback for.
     * @param callback - The function that is expected to return the dependency.
     * @remarks
     * If you pass the same Registration to another container, the same cached value will be used.
     * Should all references to the resolver returned be removed, the cache will expire.
     */
    cachedCallback(key, callback) {
        return new ResolverImpl(key, 3 /* callback */, cacheCallbackResult(callback));
    },
    /**
     * Creates an alternate {@link Key} to retrieve an instance by.
     *
     * @example
     * ```
     * Register.singleton(Foo, Foo)
     * Register.aliasTo(Foo, MyFoos);
     *
     * container.getAll(MyFoos) // contains an instance of Foo
     * ```
     *
     * @param originalKey - The original key that has been registered.
     * @param aliasKey - The alias to the original key.
     */
    aliasTo(originalKey, aliasKey) {
        return new ResolverImpl(aliasKey, 5 /* alias */, originalKey);
    },
});
/** @internal */
function validateKey(key) {
    if (key === null || key === void 0) {
        throw new Error("key/value cannot be null or undefined. Are you trying to inject/register something that doesn't exist with DI?");
    }
}
function buildAllResponse(resolver, handler, requestor) {
    if (resolver instanceof ResolverImpl &&
        resolver.strategy === 4 /* array */) {
        const state = resolver.state;
        let i = state.length;
        const results = new Array(i);
        while (i--) {
            results[i] = state[i].resolve(handler, requestor);
        }
        return results;
    }
    return [resolver.resolve(handler, requestor)];
}
const defaultFriendlyName = "(anonymous)";
function isObject(value) {
    return (typeof value === "object" && value !== null) || typeof value === "function";
}
/**
 * Determine whether the value is a native function.
 *
 * @param fn - The function to check.
 * @returns `true` is the function is a native function, otherwise `false`
 */
const isNativeFunction = (function () {
    const lookup = new WeakMap();
    let isNative = false;
    let sourceText = "";
    let i = 0;
    return function (fn) {
        isNative = lookup.get(fn);
        if (isNative === void 0) {
            sourceText = fn.toString();
            i = sourceText.length;
            // http://www.ecma-international.org/ecma-262/#prod-NativeFunction
            isNative =
                // 29 is the length of 'function () { [native code] }' which is the smallest length of a native function string
                i >= 29 &&
                    // 100 seems to be a safe upper bound of the max length of a native function. In Chrome and FF it's 56, in Edge it's 61.
                    i <= 100 &&
                    // This whole heuristic *could* be tricked by a comment. Do we need to care about that?
                    sourceText.charCodeAt(i - 1) === 0x7d && // }
                    // TODO: the spec is a little vague about the precise constraints, so we do need to test this across various browsers to make sure just one whitespace is a safe assumption.
                    sourceText.charCodeAt(i - 2) <= 0x20 && // whitespace
                    sourceText.charCodeAt(i - 3) === 0x5d && // ]
                    sourceText.charCodeAt(i - 4) === 0x65 && // e
                    sourceText.charCodeAt(i - 5) === 0x64 && // d
                    sourceText.charCodeAt(i - 6) === 0x6f && // o
                    sourceText.charCodeAt(i - 7) === 0x63 && // c
                    sourceText.charCodeAt(i - 8) === 0x20 && //
                    sourceText.charCodeAt(i - 9) === 0x65 && // e
                    sourceText.charCodeAt(i - 10) === 0x76 && // v
                    sourceText.charCodeAt(i - 11) === 0x69 && // i
                    sourceText.charCodeAt(i - 12) === 0x74 && // t
                    sourceText.charCodeAt(i - 13) === 0x61 && // a
                    sourceText.charCodeAt(i - 14) === 0x6e && // n
                    sourceText.charCodeAt(i - 15) === 0x58; // [
            lookup.set(fn, isNative);
        }
        return isNative;
    };
})();
const isNumericLookup = {};
function isArrayIndex(value) {
    switch (typeof value) {
        case "number":
            return value >= 0 && (value | 0) === value;
        case "string": {
            const result = isNumericLookup[value];
            if (result !== void 0) {
                return result;
            }
            const length = value.length;
            if (length === 0) {
                return (isNumericLookup[value] = false);
            }
            let ch = 0;
            for (let i = 0; i < length; ++i) {
                ch = value.charCodeAt(i);
                if ((i === 0 && ch === 0x30 && length > 1) /* must not start with 0 */ ||
                    ch < 0x30 /* 0 */ ||
                    ch > 0x39 /* 9 */) {
                    return (isNumericLookup[value] = false);
                }
            }
            return (isNumericLookup[value] = true);
        }
        default:
            return false;
    }
}


/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/di/index.js":
/*!**********************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/di/index.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Container: () => (/* reexport safe */ _di_js__WEBPACK_IMPORTED_MODULE_0__.Container),
/* harmony export */   ContainerConfiguration: () => (/* reexport safe */ _di_js__WEBPACK_IMPORTED_MODULE_0__.ContainerConfiguration),
/* harmony export */   ContainerImpl: () => (/* reexport safe */ _di_js__WEBPACK_IMPORTED_MODULE_0__.ContainerImpl),
/* harmony export */   DI: () => (/* reexport safe */ _di_js__WEBPACK_IMPORTED_MODULE_0__.DI),
/* harmony export */   DefaultResolver: () => (/* reexport safe */ _di_js__WEBPACK_IMPORTED_MODULE_0__.DefaultResolver),
/* harmony export */   FactoryImpl: () => (/* reexport safe */ _di_js__WEBPACK_IMPORTED_MODULE_0__.FactoryImpl),
/* harmony export */   Registration: () => (/* reexport safe */ _di_js__WEBPACK_IMPORTED_MODULE_0__.Registration),
/* harmony export */   ResolverBuilder: () => (/* reexport safe */ _di_js__WEBPACK_IMPORTED_MODULE_0__.ResolverBuilder),
/* harmony export */   ResolverImpl: () => (/* reexport safe */ _di_js__WEBPACK_IMPORTED_MODULE_0__.ResolverImpl),
/* harmony export */   ServiceLocator: () => (/* reexport safe */ _di_js__WEBPACK_IMPORTED_MODULE_0__.ServiceLocator),
/* harmony export */   all: () => (/* reexport safe */ _di_js__WEBPACK_IMPORTED_MODULE_0__.all),
/* harmony export */   ignore: () => (/* reexport safe */ _di_js__WEBPACK_IMPORTED_MODULE_0__.ignore),
/* harmony export */   inject: () => (/* reexport safe */ _di_js__WEBPACK_IMPORTED_MODULE_0__.inject),
/* harmony export */   lazy: () => (/* reexport safe */ _di_js__WEBPACK_IMPORTED_MODULE_0__.lazy),
/* harmony export */   newInstanceForScope: () => (/* reexport safe */ _di_js__WEBPACK_IMPORTED_MODULE_0__.newInstanceForScope),
/* harmony export */   newInstanceOf: () => (/* reexport safe */ _di_js__WEBPACK_IMPORTED_MODULE_0__.newInstanceOf),
/* harmony export */   optional: () => (/* reexport safe */ _di_js__WEBPACK_IMPORTED_MODULE_0__.optional),
/* harmony export */   singleton: () => (/* reexport safe */ _di_js__WEBPACK_IMPORTED_MODULE_0__.singleton),
/* harmony export */   transient: () => (/* reexport safe */ _di_js__WEBPACK_IMPORTED_MODULE_0__.transient),
/* harmony export */   validateKey: () => (/* reexport safe */ _di_js__WEBPACK_IMPORTED_MODULE_0__.validateKey)
/* harmony export */ });
/* harmony import */ var _di_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./di.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/di/di.js");



/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/dialog/dialog.js":
/*!***************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/dialog/dialog.js ***!
  \***************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Dialog: () => (/* binding */ Dialog)
/* harmony export */ });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! tslib */ "./node_modules/@microsoft/fast-foundation/node_modules/tslib/tslib.es6.js");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @microsoft/fast-element */ "webpack/sharing/consume/default/@microsoft/fast-element/@microsoft/fast-element");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @microsoft/fast-web-utilities */ "./node_modules/@microsoft/fast-web-utilities/dist/key-codes.js");
/* harmony import */ var tabbable__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! tabbable */ "./node_modules/tabbable/dist/index.esm.js");
/* harmony import */ var _foundation_element_foundation_element_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../foundation-element/foundation-element.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/foundation-element/foundation-element.js");





/**
 * A Switch Custom HTML Element.
 * Implements the {@link https://www.w3.org/TR/wai-aria-1.1/#dialog | ARIA dialog }.
 *
 * @slot - The default slot for the dialog content
 * @csspart positioning-region - A wrapping element used to center the dialog and position the modal overlay
 * @csspart overlay - The modal dialog overlay
 * @csspart control - The dialog element
 * @fires cancel - Fires a custom 'cancel' event when the modal overlay is clicked
 * @fires close - Fires a custom 'close' event when the dialog is hidden
 *
 * @public
 */
class Dialog extends _foundation_element_foundation_element_js__WEBPACK_IMPORTED_MODULE_1__.FoundationElement {
    constructor() {
        super(...arguments);
        /**
         * Indicates the element is modal. When modal, user mouse interaction will be limited to the contents of the element by a modal
         * overlay.  Clicks on the overlay will cause the dialog to emit a "dismiss" event.
         * @public
         * @defaultValue - true
         * @remarks
         * HTML Attribute: modal
         */
        this.modal = true;
        /**
         * The hidden state of the element.
         *
         * @public
         * @defaultValue - false
         * @remarks
         * HTML Attribute: hidden
         */
        this.hidden = false;
        /**
         * Indicates that the dialog should trap focus.
         *
         * @public
         * @defaultValue - true
         * @remarks
         * HTML Attribute: trap-focus
         */
        this.trapFocus = true;
        this.trapFocusChanged = () => {
            if (this.$fastController.isConnected) {
                this.updateTrapFocus();
            }
        };
        /**
         * @internal
         */
        this.isTrappingFocus = false;
        this.handleDocumentKeydown = (e) => {
            if (!e.defaultPrevented && !this.hidden) {
                switch (e.key) {
                    case _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_2__.keyEscape:
                        this.dismiss();
                        e.preventDefault();
                        break;
                    case _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_2__.keyTab:
                        this.handleTabKeyDown(e);
                        break;
                }
            }
        };
        this.handleDocumentFocus = (e) => {
            if (!e.defaultPrevented && this.shouldForceFocus(e.target)) {
                this.focusFirstElement();
                e.preventDefault();
            }
        };
        this.handleTabKeyDown = (e) => {
            if (!this.trapFocus || this.hidden) {
                return;
            }
            const bounds = this.getTabQueueBounds();
            if (bounds.length === 0) {
                return;
            }
            if (bounds.length === 1) {
                // keep focus on single element
                bounds[0].focus();
                e.preventDefault();
                return;
            }
            if (e.shiftKey && e.target === bounds[0]) {
                bounds[bounds.length - 1].focus();
                e.preventDefault();
            }
            else if (!e.shiftKey && e.target === bounds[bounds.length - 1]) {
                bounds[0].focus();
                e.preventDefault();
            }
            return;
        };
        this.getTabQueueBounds = () => {
            const bounds = [];
            return Dialog.reduceTabbableItems(bounds, this);
        };
        /**
         * focus on first element of tab queue
         */
        this.focusFirstElement = () => {
            const bounds = this.getTabQueueBounds();
            if (bounds.length > 0) {
                bounds[0].focus();
            }
            else {
                if (this.dialog instanceof HTMLElement) {
                    this.dialog.focus();
                }
            }
        };
        /**
         * we should only focus if focus has not already been brought to the dialog
         */
        this.shouldForceFocus = (currentFocusElement) => {
            return this.isTrappingFocus && !this.contains(currentFocusElement);
        };
        /**
         * we should we be active trapping focus
         */
        this.shouldTrapFocus = () => {
            return this.trapFocus && !this.hidden;
        };
        /**
         *
         *
         * @internal
         */
        this.updateTrapFocus = (shouldTrapFocusOverride) => {
            const shouldTrapFocus = shouldTrapFocusOverride === undefined
                ? this.shouldTrapFocus()
                : shouldTrapFocusOverride;
            if (shouldTrapFocus && !this.isTrappingFocus) {
                this.isTrappingFocus = true;
                // Add an event listener for focusin events if we are trapping focus
                document.addEventListener("focusin", this.handleDocumentFocus);
                _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.DOM.queueUpdate(() => {
                    if (this.shouldForceFocus(document.activeElement)) {
                        this.focusFirstElement();
                    }
                });
            }
            else if (!shouldTrapFocus && this.isTrappingFocus) {
                this.isTrappingFocus = false;
                // remove event listener if we are not trapping focus
                document.removeEventListener("focusin", this.handleDocumentFocus);
            }
        };
    }
    /**
     * @internal
     */
    dismiss() {
        this.$emit("dismiss");
        // implement `<dialog>` interface
        this.$emit("cancel");
    }
    /**
     * The method to show the dialog.
     *
     * @public
     */
    show() {
        this.hidden = false;
    }
    /**
     * The method to hide the dialog.
     *
     * @public
     */
    hide() {
        this.hidden = true;
        // implement `<dialog>` interface
        this.$emit("close");
    }
    /**
     * @internal
     */
    connectedCallback() {
        super.connectedCallback();
        document.addEventListener("keydown", this.handleDocumentKeydown);
        this.notifier = _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.Observable.getNotifier(this);
        this.notifier.subscribe(this, "hidden");
        this.updateTrapFocus();
    }
    /**
     * @internal
     */
    disconnectedCallback() {
        super.disconnectedCallback();
        // remove keydown event listener
        document.removeEventListener("keydown", this.handleDocumentKeydown);
        // if we are trapping focus remove the focusin listener
        this.updateTrapFocus(false);
        this.notifier.unsubscribe(this, "hidden");
    }
    /**
     * @internal
     */
    handleChange(source, propertyName) {
        switch (propertyName) {
            case "hidden":
                this.updateTrapFocus();
                break;
            default:
                break;
        }
    }
    /**
     * Reduce a collection to only its focusable elements.
     *
     * @param elements - Collection of elements to reduce
     * @param element - The current element
     *
     * @internal
     */
    static reduceTabbableItems(elements, element) {
        if (element.getAttribute("tabindex") === "-1") {
            return elements;
        }
        if ((0,tabbable__WEBPACK_IMPORTED_MODULE_3__.isTabbable)(element) ||
            (Dialog.isFocusableFastElement(element) && Dialog.hasTabbableShadow(element))) {
            elements.push(element);
            return elements;
        }
        if (element.childElementCount) {
            return elements.concat(Array.from(element.children).reduce(Dialog.reduceTabbableItems, []));
        }
        return elements;
    }
    /**
     * Test if element is focusable fast element
     *
     * @param element - The element to check
     *
     * @internal
     */
    static isFocusableFastElement(element) {
        var _a, _b;
        return !!((_b = (_a = element.$fastController) === null || _a === void 0 ? void 0 : _a.definition.shadowOptions) === null || _b === void 0 ? void 0 : _b.delegatesFocus);
    }
    /**
     * Test if the element has a focusable shadow
     *
     * @param element - The element to check
     *
     * @internal
     */
    static hasTabbableShadow(element) {
        var _a, _b;
        return Array.from((_b = (_a = element.shadowRoot) === null || _a === void 0 ? void 0 : _a.querySelectorAll("*")) !== null && _b !== void 0 ? _b : []).some(x => {
            return (0,tabbable__WEBPACK_IMPORTED_MODULE_3__.isTabbable)(x);
        });
    }
}
(0,tslib__WEBPACK_IMPORTED_MODULE_4__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ mode: "boolean" })
], Dialog.prototype, "modal", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_4__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ mode: "boolean" })
], Dialog.prototype, "hidden", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_4__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ attribute: "trap-focus", mode: "boolean" })
], Dialog.prototype, "trapFocus", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_4__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ attribute: "aria-describedby" })
], Dialog.prototype, "ariaDescribedby", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_4__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ attribute: "aria-labelledby" })
], Dialog.prototype, "ariaLabelledby", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_4__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ attribute: "aria-label" })
], Dialog.prototype, "ariaLabel", void 0);


/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/dialog/dialog.template.js":
/*!************************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/dialog/dialog.template.js ***!
  \************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   dialogTemplate: () => (/* binding */ dialogTemplate)
/* harmony export */ });
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @microsoft/fast-element */ "webpack/sharing/consume/default/@microsoft/fast-element/@microsoft/fast-element");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__);

/**
 * The template for the {@link @microsoft/fast-foundation#Dialog} component.
 * @public
 */
const dialogTemplate = (context, definition) => (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.html) `
    <div class="positioning-region" part="positioning-region">
        ${(0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.when)(x => x.modal, (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.html) `
                <div
                    class="overlay"
                    part="overlay"
                    role="presentation"
                    @click="${x => x.dismiss()}"
                ></div>
            `)}
        <div
            role="dialog"
            tabindex="-1"
            class="control"
            part="control"
            aria-modal="${x => x.modal}"
            aria-describedby="${x => x.ariaDescribedby}"
            aria-labelledby="${x => x.ariaLabelledby}"
            aria-label="${x => x.ariaLabel}"
            ${(0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.ref)("dialog")}
        >
            <slot></slot>
        </div>
    </div>
`;


/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/dialog/index.js":
/*!**************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/dialog/index.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Dialog: () => (/* reexport safe */ _dialog_js__WEBPACK_IMPORTED_MODULE_1__.Dialog),
/* harmony export */   dialogTemplate: () => (/* reexport safe */ _dialog_template_js__WEBPACK_IMPORTED_MODULE_0__.dialogTemplate)
/* harmony export */ });
/* harmony import */ var _dialog_template_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./dialog.template.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/dialog/dialog.template.js");
/* harmony import */ var _dialog_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./dialog.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/dialog/dialog.js");




/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/directives/reflect-attributes.js":
/*!*******************************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/directives/reflect-attributes.js ***!
  \*******************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   reflectAttributes: () => (/* binding */ reflectAttributes)
/* harmony export */ });
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @microsoft/fast-element */ "webpack/sharing/consume/default/@microsoft/fast-element/@microsoft/fast-element");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__);

const observer = new MutationObserver((mutations) => {
    for (const mutation of mutations) {
        AttributeReflectionSubscriptionSet.getOrCreateFor(mutation.target).notify(mutation.attributeName);
    }
});
class AttributeReflectionSubscriptionSet extends _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.SubscriberSet {
    constructor(source) {
        super(source);
        this.watchedAttributes = new Set();
        AttributeReflectionSubscriptionSet.subscriberCache.set(source, this);
    }
    subscribe(subscriber) {
        super.subscribe(subscriber);
        if (!this.watchedAttributes.has(subscriber.attributes)) {
            this.watchedAttributes.add(subscriber.attributes);
            this.observe();
        }
    }
    unsubscribe(subscriber) {
        super.unsubscribe(subscriber);
        if (this.watchedAttributes.has(subscriber.attributes)) {
            this.watchedAttributes.delete(subscriber.attributes);
            this.observe();
        }
    }
    static getOrCreateFor(source) {
        return (this.subscriberCache.get(source) ||
            new AttributeReflectionSubscriptionSet(source));
    }
    observe() {
        const attributeFilter = [];
        for (const attributes of this.watchedAttributes.values()) {
            for (let i = 0; i < attributes.length; i++) {
                attributeFilter.push(attributes[i]);
            }
        }
        observer.observe(this.source, { attributeFilter });
    }
}
AttributeReflectionSubscriptionSet.subscriberCache = new WeakMap();
class ReflectAttrBehavior {
    constructor(target, attributes) {
        this.target = target;
        this.attributes = Object.freeze(attributes);
    }
    bind(source) {
        AttributeReflectionSubscriptionSet.getOrCreateFor(source).subscribe(this);
        // Reflect any existing attributes because MutationObserver will only
        // handle *changes* to attributes.
        if (source.hasAttributes()) {
            for (let i = 0; i < source.attributes.length; i++) {
                this.handleChange(source, source.attributes[i].name);
            }
        }
    }
    unbind(source) {
        AttributeReflectionSubscriptionSet.getOrCreateFor(source).unsubscribe(this);
    }
    handleChange(source, arg) {
        // In cases where two or more ReflectAttrBehavior instances are bound to the same element,
        // they will share a Subscriber implementation. In that case, this handle change can be invoked with
        // attributes an instances doesn't need to reflect. This guards against reflecting attrs
        // that shouldn't be reflected.
        if (this.attributes.includes(arg)) {
            _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.DOM.setAttribute(this.target, arg, source.getAttribute(arg));
        }
    }
}
/**
 * Reflects attributes from the host element to the target element of the directive.
 * @param attributes - The attributes to reflect
 *
 * @beta
 * @example
 * ```ts
 * const template = html`
 *     <button
 *         ${reflectAttributes("aria-label", "aria-describedby")}
 *     >
 *          hello world
 *     </button
 * `
 * ```
 */
function reflectAttributes(...attributes) {
    return new _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.AttachedBehaviorHTMLDirective("fast-reflect-attr", ReflectAttrBehavior, attributes);
}


/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/disclosure/disclosure.js":
/*!***********************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/disclosure/disclosure.js ***!
  \***********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Disclosure: () => (/* binding */ Disclosure)
/* harmony export */ });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! tslib */ "./node_modules/@microsoft/fast-foundation/node_modules/tslib/tslib.es6.js");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @microsoft/fast-element */ "webpack/sharing/consume/default/@microsoft/fast-element/@microsoft/fast-element");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _foundation_element_foundation_element_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../foundation-element/foundation-element.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/foundation-element/foundation-element.js");



/**
 * A Disclosure Custom HTML Element.
 * Based largely on the {@link https://w3c.github.io/aria-practices/#disclosure | disclosure element }.
 *
 * @slot start - Content which can be provided before the summary content
 * @slot end - Content which can be provided after the summary content
 * @slot title - The summary content
 * @slot - The default slot for the disclosure content
 * @fires toggle - fires a toggle event when the summary is toggled
 *
 * @public
 */
class Disclosure extends _foundation_element_foundation_element_js__WEBPACK_IMPORTED_MODULE_1__.FoundationElement {
    /**
     * @internal
     */
    connectedCallback() {
        super.connectedCallback();
        this.setup();
    }
    /**
     * @internal
     */
    disconnectedCallback() {
        super.disconnectedCallback();
        this.details.removeEventListener("toggle", this.onToggle);
    }
    /**
     * Show extra content.
     */
    show() {
        this.details.open = true;
    }
    /**
     * Hide extra content.
     */
    hide() {
        this.details.open = false;
    }
    /**
     * Toggle the current(expanded/collapsed) state.
     */
    toggle() {
        this.details.open = !this.details.open;
    }
    /**
     * Register listener and set default disclosure mode
     */
    setup() {
        this.onToggle = this.onToggle.bind(this);
        this.details.addEventListener("toggle", this.onToggle);
        if (this.expanded) {
            this.show();
        }
    }
    /**
     * Update the aria attr and fire `toggle` event
     */
    onToggle() {
        this.expanded = this.details.open;
        this.$emit("toggle");
    }
}
(0,tslib__WEBPACK_IMPORTED_MODULE_2__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ mode: "boolean" })
], Disclosure.prototype, "expanded", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_2__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr
], Disclosure.prototype, "title", void 0);


/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/disclosure/disclosure.template.js":
/*!********************************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/disclosure/disclosure.template.js ***!
  \********************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   disclosureTemplate: () => (/* binding */ disclosureTemplate)
/* harmony export */ });
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @microsoft/fast-element */ "webpack/sharing/consume/default/@microsoft/fast-element/@microsoft/fast-element");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__);

/**
 * The template for the {@link @microsoft/fast-foundation#Disclosure} component.
 * @public
 */
const disclosureTemplate = (context, definition) => (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.html) `
    <details class="disclosure" ${(0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.ref)("details")}>
        <summary
            class="invoker"
            role="button"
            aria-controls="disclosure-content"
            aria-expanded="${x => x.expanded}"
        >
            <slot name="start"></slot>
            <slot name="title">${x => x.title}</slot>
            <slot name="end"></slot>
        </summary>
        <div id="disclosure-content"><slot></slot></div>
    </details>
`;


/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/disclosure/index.js":
/*!******************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/disclosure/index.js ***!
  \******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Disclosure: () => (/* reexport safe */ _disclosure_js__WEBPACK_IMPORTED_MODULE_1__.Disclosure),
/* harmony export */   disclosureTemplate: () => (/* reexport safe */ _disclosure_template_js__WEBPACK_IMPORTED_MODULE_0__.disclosureTemplate)
/* harmony export */ });
/* harmony import */ var _disclosure_template_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./disclosure.template.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/disclosure/disclosure.template.js");
/* harmony import */ var _disclosure_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./disclosure.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/disclosure/disclosure.js");




/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/divider/divider.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/divider/divider.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Divider: () => (/* binding */ Divider),
/* harmony export */   DividerRole: () => (/* reexport safe */ _divider_options_js__WEBPACK_IMPORTED_MODULE_1__.DividerRole)
/* harmony export */ });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! tslib */ "./node_modules/@microsoft/fast-foundation/node_modules/tslib/tslib.es6.js");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @microsoft/fast-element */ "webpack/sharing/consume/default/@microsoft/fast-element/@microsoft/fast-element");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @microsoft/fast-web-utilities */ "./node_modules/@microsoft/fast-web-utilities/dist/aria.js");
/* harmony import */ var _foundation_element_foundation_element_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../foundation-element/foundation-element.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/foundation-element/foundation-element.js");
/* harmony import */ var _divider_options_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./divider.options.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/divider/divider.options.js");






/**
 * A Divider Custom HTML Element.
 * Implements the {@link https://www.w3.org/TR/wai-aria-1.1/#separator | ARIA separator } or {@link https://www.w3.org/TR/wai-aria-1.1/#presentation | ARIA presentation}.
 *
 * @public
 */
class Divider extends _foundation_element_foundation_element_js__WEBPACK_IMPORTED_MODULE_2__.FoundationElement {
    constructor() {
        super(...arguments);
        /**
         * The role of the element.
         *
         * @public
         * @remarks
         * HTML Attribute: role
         */
        this.role = _divider_options_js__WEBPACK_IMPORTED_MODULE_1__.DividerRole.separator;
        /**
         * The orientation of the divider.
         *
         * @public
         * @remarks
         * HTML Attribute: orientation
         */
        this.orientation = _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_3__.Orientation.horizontal;
    }
}
(0,tslib__WEBPACK_IMPORTED_MODULE_4__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr
], Divider.prototype, "role", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_4__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr
], Divider.prototype, "orientation", void 0);


/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/divider/divider.options.js":
/*!*************************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/divider/divider.options.js ***!
  \*************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DividerRole: () => (/* binding */ DividerRole)
/* harmony export */ });
/**
 * Divider roles
 * @public
 */
const DividerRole = {
    /**
     * The divider semantically separates content
     */
    separator: "separator",
    /**
     * The divider has no semantic value and is for visual presentation only.
     */
    presentation: "presentation",
};


/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/divider/divider.template.js":
/*!**************************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/divider/divider.template.js ***!
  \**************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   dividerTemplate: () => (/* binding */ dividerTemplate)
/* harmony export */ });
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @microsoft/fast-element */ "webpack/sharing/consume/default/@microsoft/fast-element/@microsoft/fast-element");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__);

/**
 * The template for the {@link @microsoft/fast-foundation#Divider} component.
 * @public
 */
const dividerTemplate = (context, definition) => (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.html) `
    <template role="${x => x.role}" aria-orientation="${x => x.orientation}"></template>
`;


/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/divider/index.js":
/*!***************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/divider/index.js ***!
  \***************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Divider: () => (/* reexport safe */ _divider_js__WEBPACK_IMPORTED_MODULE_1__.Divider),
/* harmony export */   DividerRole: () => (/* reexport safe */ _divider_js__WEBPACK_IMPORTED_MODULE_1__.DividerRole),
/* harmony export */   dividerTemplate: () => (/* reexport safe */ _divider_template_js__WEBPACK_IMPORTED_MODULE_0__.dividerTemplate)
/* harmony export */ });
/* harmony import */ var _divider_template_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./divider.template.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/divider/divider.template.js");
/* harmony import */ var _divider_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./divider.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/divider/divider.js");




/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/flipper/flipper.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/flipper/flipper.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Flipper: () => (/* binding */ Flipper),
/* harmony export */   FlipperDirection: () => (/* reexport safe */ _flipper_options_js__WEBPACK_IMPORTED_MODULE_1__.FlipperDirection)
/* harmony export */ });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! tslib */ "./node_modules/@microsoft/fast-foundation/node_modules/tslib/tslib.es6.js");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @microsoft/fast-element */ "webpack/sharing/consume/default/@microsoft/fast-element/@microsoft/fast-element");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _foundation_element_foundation_element_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../foundation-element/foundation-element.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/foundation-element/foundation-element.js");
/* harmony import */ var _flipper_options_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./flipper.options.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/flipper/flipper.options.js");





/**
 * A Flipper Custom HTML Element.
 * Flippers are a form of button that implies directional content navigation, such as in a carousel.
 *
 * @slot next - The next flipper content
 * @slot previous - The previous flipper content
 * @csspart next - Wraps the next flipper content
 * @csspart previous - Wraps the previous flipper content
 * @fires click - Fires a custom 'click' event when Enter or Space is invoked via keyboard and the flipper is exposed to assistive technologies.
 *
 * @public
 */
class Flipper extends _foundation_element_foundation_element_js__WEBPACK_IMPORTED_MODULE_2__.FoundationElement {
    constructor() {
        super(...arguments);
        /**
         * Indicates the flipper should be hidden from assistive technology. Because flippers are often supplementary navigation, they are often hidden from assistive technology.
         *
         * @public
         * @defaultValue - true
         * @remarks
         * HTML Attribute: aria-hidden
         */
        this.hiddenFromAT = true;
        /**
         * The direction that the flipper implies navigating.
         *
         * @public
         * @remarks
         * HTML Attribute: direction
         */
        this.direction = _flipper_options_js__WEBPACK_IMPORTED_MODULE_1__.FlipperDirection.next;
    }
    /**
     * Simulate a click event when the flipper has focus and the user hits enter or space keys
     * Blur focus if the user hits escape key
     * @param e - Keyboard event
     * @public
     */
    keyupHandler(e) {
        if (!this.hiddenFromAT) {
            const key = e.key;
            if (key === "Enter" || key === "Space") {
                this.$emit("click", e);
            }
            if (key === "Escape") {
                this.blur();
            }
        }
    }
}
(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ mode: "boolean" })
], Flipper.prototype, "disabled", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ attribute: "aria-hidden", converter: _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.booleanConverter })
], Flipper.prototype, "hiddenFromAT", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr
], Flipper.prototype, "direction", void 0);


/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/flipper/flipper.options.js":
/*!*************************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/flipper/flipper.options.js ***!
  \*************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   FlipperDirection: () => (/* binding */ FlipperDirection)
/* harmony export */ });
/**
 * The direction options for flipper.
 * @public
 */
const FlipperDirection = {
    next: "next",
    previous: "previous",
};


/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/flipper/flipper.template.js":
/*!**************************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/flipper/flipper.template.js ***!
  \**************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   flipperTemplate: () => (/* binding */ flipperTemplate)
/* harmony export */ });
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @microsoft/fast-element */ "webpack/sharing/consume/default/@microsoft/fast-element/@microsoft/fast-element");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _flipper_options_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./flipper.options.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/flipper/flipper.options.js");


/**
 * The template for the {@link @microsoft/fast-foundation#Flipper} component.
 * @public
 */
const flipperTemplate = (context, definition) => (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.html) `
    <template
        role="button"
        aria-disabled="${x => (x.disabled ? true : void 0)}"
        tabindex="${x => (x.hiddenFromAT ? -1 : 0)}"
        class="${x => x.direction} ${x => (x.disabled ? "disabled" : "")}"
        @keyup="${(x, c) => x.keyupHandler(c.event)}"
    >
        ${(0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.when)(x => x.direction === _flipper_options_js__WEBPACK_IMPORTED_MODULE_1__.FlipperDirection.next, (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.html) `
                <span part="next" class="next">
                    <slot name="next">
                        ${definition.next || ""}
                    </slot>
                </span>
            `)}
        ${(0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.when)(x => x.direction === _flipper_options_js__WEBPACK_IMPORTED_MODULE_1__.FlipperDirection.previous, (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.html) `
                <span part="previous" class="previous">
                    <slot name="previous">
                        ${definition.previous || ""}
                    </slot>
                </span>
            `)}
    </template>
`;


/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/flipper/index.js":
/*!***************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/flipper/index.js ***!
  \***************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Flipper: () => (/* reexport safe */ _flipper_js__WEBPACK_IMPORTED_MODULE_1__.Flipper),
/* harmony export */   FlipperDirection: () => (/* reexport safe */ _flipper_js__WEBPACK_IMPORTED_MODULE_1__.FlipperDirection),
/* harmony export */   flipperTemplate: () => (/* reexport safe */ _flipper_template_js__WEBPACK_IMPORTED_MODULE_0__.flipperTemplate)
/* harmony export */ });
/* harmony import */ var _flipper_template_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./flipper.template.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/flipper/flipper.template.js");
/* harmony import */ var _flipper_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./flipper.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/flipper/flipper.js");




/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/form-associated/form-associated.js":
/*!*********************************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/form-associated/form-associated.js ***!
  \*********************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   CheckableFormAssociated: () => (/* binding */ CheckableFormAssociated),
/* harmony export */   FormAssociated: () => (/* binding */ FormAssociated),
/* harmony export */   supportsElementInternals: () => (/* binding */ supportsElementInternals)
/* harmony export */ });
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @microsoft/fast-element */ "webpack/sharing/consume/default/@microsoft/fast-element/@microsoft/fast-element");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @microsoft/fast-web-utilities */ "./node_modules/@microsoft/fast-web-utilities/dist/key-codes.js");


const proxySlotName = "form-associated-proxy";
const ElementInternalsKey = "ElementInternals";
/**
 * @alpha
 */
const supportsElementInternals = ElementInternalsKey in window &&
    "setFormValue" in window[ElementInternalsKey].prototype;
const InternalsMap = new WeakMap();
/**
 * Base function for providing Custom Element Form Association.
 *
 * @alpha
 */
function FormAssociated(BaseCtor) {
    const C = class extends BaseCtor {
        constructor(...args) {
            super(...args);
            /**
             * Track whether the value has been changed from the initial value
             */
            this.dirtyValue = false;
            /**
             * Sets the element's disabled state. A disabled element will not be included during form submission.
             *
             * @remarks
             * HTML Attribute: disabled
             */
            this.disabled = false;
            /**
             * These are events that are still fired by the proxy
             * element based on user / programmatic interaction.
             *
             * The proxy implementation should be transparent to
             * the app author, so block these events from emitting.
             */
            this.proxyEventsToBlock = ["change", "click"];
            this.proxyInitialized = false;
            this.required = false;
            this.initialValue = this.initialValue || "";
            if (!this.elementInternals) {
                // When elementInternals is not supported, formResetCallback is
                // bound to an event listener, so ensure the handler's `this`
                // context is correct.
                this.formResetCallback = this.formResetCallback.bind(this);
            }
        }
        /**
         * Must evaluate to true to enable elementInternals.
         * Feature detects API support and resolve respectively
         *
         * @internal
         */
        static get formAssociated() {
            return supportsElementInternals;
        }
        /**
         * Returns the validity state of the element
         *
         * @alpha
         */
        get validity() {
            return this.elementInternals
                ? this.elementInternals.validity
                : this.proxy.validity;
        }
        /**
         * Retrieve a reference to the associated form.
         * Returns null if not associated to any form.
         *
         * @alpha
         */
        get form() {
            return this.elementInternals ? this.elementInternals.form : this.proxy.form;
        }
        /**
         * Retrieve the localized validation message,
         * or custom validation message if set.
         *
         * @alpha
         */
        get validationMessage() {
            return this.elementInternals
                ? this.elementInternals.validationMessage
                : this.proxy.validationMessage;
        }
        /**
         * Whether the element will be validated when the
         * form is submitted
         */
        get willValidate() {
            return this.elementInternals
                ? this.elementInternals.willValidate
                : this.proxy.willValidate;
        }
        /**
         * A reference to all associated label elements
         */
        get labels() {
            if (this.elementInternals) {
                return Object.freeze(Array.from(this.elementInternals.labels));
            }
            else if (this.proxy instanceof HTMLElement &&
                this.proxy.ownerDocument &&
                this.id) {
                // Labels associated by wrapping the element: <label><custom-element></custom-element></label>
                const parentLabels = this.proxy.labels;
                // Labels associated using the `for` attribute
                const forLabels = Array.from(this.proxy.getRootNode().querySelectorAll(`[for='${this.id}']`));
                const labels = parentLabels
                    ? forLabels.concat(Array.from(parentLabels))
                    : forLabels;
                return Object.freeze(labels);
            }
            else {
                return _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.emptyArray;
            }
        }
        /**
         * Invoked when the `value` property changes
         * @param previous - the previous value
         * @param next - the new value
         *
         * @remarks
         * If elements extending `FormAssociated` implement a `valueChanged` method
         * They must be sure to invoke `super.valueChanged(previous, next)` to ensure
         * proper functioning of `FormAssociated`
         */
        valueChanged(previous, next) {
            this.dirtyValue = true;
            if (this.proxy instanceof HTMLElement) {
                this.proxy.value = this.value;
            }
            this.currentValue = this.value;
            this.setFormValue(this.value);
            this.validate();
        }
        currentValueChanged() {
            this.value = this.currentValue;
        }
        /**
         * Invoked when the `initialValue` property changes
         *
         * @param previous - the previous value
         * @param next - the new value
         *
         * @remarks
         * If elements extending `FormAssociated` implement a `initialValueChanged` method
         * They must be sure to invoke `super.initialValueChanged(previous, next)` to ensure
         * proper functioning of `FormAssociated`
         */
        initialValueChanged(previous, next) {
            // If the value is clean and the component is connected to the DOM
            // then set value equal to the attribute value.
            if (!this.dirtyValue) {
                this.value = this.initialValue;
                this.dirtyValue = false;
            }
        }
        /**
         * Invoked when the `disabled` property changes
         *
         * @param previous - the previous value
         * @param next - the new value
         *
         * @remarks
         * If elements extending `FormAssociated` implement a `disabledChanged` method
         * They must be sure to invoke `super.disabledChanged(previous, next)` to ensure
         * proper functioning of `FormAssociated`
         */
        disabledChanged(previous, next) {
            if (this.proxy instanceof HTMLElement) {
                this.proxy.disabled = this.disabled;
            }
            _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.DOM.queueUpdate(() => this.classList.toggle("disabled", this.disabled));
        }
        /**
         * Invoked when the `name` property changes
         *
         * @param previous - the previous value
         * @param next - the new value
         *
         * @remarks
         * If elements extending `FormAssociated` implement a `nameChanged` method
         * They must be sure to invoke `super.nameChanged(previous, next)` to ensure
         * proper functioning of `FormAssociated`
         */
        nameChanged(previous, next) {
            if (this.proxy instanceof HTMLElement) {
                this.proxy.name = this.name;
            }
        }
        /**
         * Invoked when the `required` property changes
         *
         * @param previous - the previous value
         * @param next - the new value
         *
         * @remarks
         * If elements extending `FormAssociated` implement a `requiredChanged` method
         * They must be sure to invoke `super.requiredChanged(previous, next)` to ensure
         * proper functioning of `FormAssociated`
         */
        requiredChanged(prev, next) {
            if (this.proxy instanceof HTMLElement) {
                this.proxy.required = this.required;
            }
            _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.DOM.queueUpdate(() => this.classList.toggle("required", this.required));
            this.validate();
        }
        /**
         * The element internals object. Will only exist
         * in browsers supporting the attachInternals API
         */
        get elementInternals() {
            if (!supportsElementInternals) {
                return null;
            }
            let internals = InternalsMap.get(this);
            if (!internals) {
                internals = this.attachInternals();
                InternalsMap.set(this, internals);
            }
            return internals;
        }
        /**
         * @internal
         */
        connectedCallback() {
            super.connectedCallback();
            this.addEventListener("keypress", this._keypressHandler);
            if (!this.value) {
                this.value = this.initialValue;
                this.dirtyValue = false;
            }
            if (!this.elementInternals) {
                this.attachProxy();
                if (this.form) {
                    this.form.addEventListener("reset", this.formResetCallback);
                }
            }
        }
        /**
         * @internal
         */
        disconnectedCallback() {
            super.disconnectedCallback();
            this.proxyEventsToBlock.forEach(name => this.proxy.removeEventListener(name, this.stopPropagation));
            if (!this.elementInternals && this.form) {
                this.form.removeEventListener("reset", this.formResetCallback);
            }
        }
        /**
         * Return the current validity of the element.
         */
        checkValidity() {
            return this.elementInternals
                ? this.elementInternals.checkValidity()
                : this.proxy.checkValidity();
        }
        /**
         * Return the current validity of the element.
         * If false, fires an invalid event at the element.
         */
        reportValidity() {
            return this.elementInternals
                ? this.elementInternals.reportValidity()
                : this.proxy.reportValidity();
        }
        /**
         * Set the validity of the control. In cases when the elementInternals object is not
         * available (and the proxy element is used to report validity), this function will
         * do nothing unless a message is provided, at which point the setCustomValidity method
         * of the proxy element will be invoked with the provided message.
         * @param flags - Validity flags
         * @param message - Optional message to supply
         * @param anchor - Optional element used by UA to display an interactive validation UI
         */
        setValidity(flags, message, anchor) {
            if (this.elementInternals) {
                this.elementInternals.setValidity(flags, message, anchor);
            }
            else if (typeof message === "string") {
                this.proxy.setCustomValidity(message);
            }
        }
        /**
         * Invoked when a connected component's form or fieldset has its disabled
         * state changed.
         * @param disabled - the disabled value of the form / fieldset
         */
        formDisabledCallback(disabled) {
            this.disabled = disabled;
        }
        formResetCallback() {
            this.value = this.initialValue;
            this.dirtyValue = false;
        }
        /**
         * Attach the proxy element to the DOM
         */
        attachProxy() {
            var _a;
            if (!this.proxyInitialized) {
                this.proxyInitialized = true;
                this.proxy.style.display = "none";
                this.proxyEventsToBlock.forEach(name => this.proxy.addEventListener(name, this.stopPropagation));
                // These are typically mapped to the proxy during
                // property change callbacks, but during initialization
                // on the initial call of the callback, the proxy is
                // still undefined. We should find a better way to address this.
                this.proxy.disabled = this.disabled;
                this.proxy.required = this.required;
                if (typeof this.name === "string") {
                    this.proxy.name = this.name;
                }
                if (typeof this.value === "string") {
                    this.proxy.value = this.value;
                }
                this.proxy.setAttribute("slot", proxySlotName);
                this.proxySlot = document.createElement("slot");
                this.proxySlot.setAttribute("name", proxySlotName);
            }
            (_a = this.shadowRoot) === null || _a === void 0 ? void 0 : _a.appendChild(this.proxySlot);
            this.appendChild(this.proxy);
        }
        /**
         * Detach the proxy element from the DOM
         */
        detachProxy() {
            var _a;
            this.removeChild(this.proxy);
            (_a = this.shadowRoot) === null || _a === void 0 ? void 0 : _a.removeChild(this.proxySlot);
        }
        /** {@inheritDoc (FormAssociated:interface).validate} */
        validate(anchor) {
            if (this.proxy instanceof HTMLElement) {
                this.setValidity(this.proxy.validity, this.proxy.validationMessage, anchor);
            }
        }
        /**
         * Associates the provided value (and optional state) with the parent form.
         * @param value - The value to set
         * @param state - The state object provided to during session restores and when autofilling.
         */
        setFormValue(value, state) {
            if (this.elementInternals) {
                this.elementInternals.setFormValue(value, state || value);
            }
        }
        _keypressHandler(e) {
            switch (e.key) {
                case _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_1__.keyEnter:
                    if (this.form instanceof HTMLFormElement) {
                        // Implicit submission
                        const defaultButton = this.form.querySelector("[type=submit]");
                        defaultButton === null || defaultButton === void 0 ? void 0 : defaultButton.click();
                    }
                    break;
            }
        }
        /**
         * Used to stop propagation of proxy element events
         * @param e - Event object
         */
        stopPropagation(e) {
            e.stopPropagation();
        }
    };
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ mode: "boolean" })(C.prototype, "disabled");
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ mode: "fromView", attribute: "value" })(C.prototype, "initialValue");
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ attribute: "current-value" })(C.prototype, "currentValue");
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)(C.prototype, "name");
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ mode: "boolean" })(C.prototype, "required");
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.observable)(C.prototype, "value");
    return C;
}
/**
 * @alpha
 */
function CheckableFormAssociated(BaseCtor) {
    class C extends FormAssociated(BaseCtor) {
    }
    class D extends C {
        constructor(...args) {
            super(args);
            /**
             * Tracks whether the "checked" property has been changed.
             * This is necessary to provide consistent behavior with
             * normal input checkboxes
             */
            this.dirtyChecked = false;
            /**
             * Provides the default checkedness of the input element
             * Passed down to proxy
             *
             * @public
             * @remarks
             * HTML Attribute: checked
             */
            this.checkedAttribute = false;
            /**
             * The checked state of the control.
             *
             * @public
             */
            this.checked = false;
            // Re-initialize dirtyChecked because initialization of other values
            // causes it to become true
            this.dirtyChecked = false;
        }
        checkedAttributeChanged() {
            this.defaultChecked = this.checkedAttribute;
        }
        /**
         * @internal
         */
        defaultCheckedChanged() {
            if (!this.dirtyChecked) {
                // Setting this.checked will cause us to enter a dirty state,
                // but if we are clean when defaultChecked is changed, we want to stay
                // in a clean state, so reset this.dirtyChecked
                this.checked = this.defaultChecked;
                this.dirtyChecked = false;
            }
        }
        checkedChanged(prev, next) {
            if (!this.dirtyChecked) {
                this.dirtyChecked = true;
            }
            this.currentChecked = this.checked;
            this.updateForm();
            if (this.proxy instanceof HTMLInputElement) {
                this.proxy.checked = this.checked;
            }
            if (prev !== undefined) {
                this.$emit("change");
            }
            this.validate();
        }
        currentCheckedChanged(prev, next) {
            this.checked = this.currentChecked;
        }
        updateForm() {
            const value = this.checked ? this.value : null;
            this.setFormValue(value, value);
        }
        connectedCallback() {
            super.connectedCallback();
            this.updateForm();
        }
        formResetCallback() {
            super.formResetCallback();
            this.checked = !!this.checkedAttribute;
            this.dirtyChecked = false;
        }
    }
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ attribute: "checked", mode: "boolean" })(D.prototype, "checkedAttribute");
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ attribute: "current-checked", converter: _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.booleanConverter })(D.prototype, "currentChecked");
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.observable)(D.prototype, "defaultChecked");
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.observable)(D.prototype, "checked");
    return D;
}


/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/form-associated/index.js":
/*!***********************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/form-associated/index.js ***!
  \***********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   CheckableFormAssociated: () => (/* reexport safe */ _form_associated_js__WEBPACK_IMPORTED_MODULE_0__.CheckableFormAssociated),
/* harmony export */   FormAssociated: () => (/* reexport safe */ _form_associated_js__WEBPACK_IMPORTED_MODULE_0__.FormAssociated),
/* harmony export */   supportsElementInternals: () => (/* reexport safe */ _form_associated_js__WEBPACK_IMPORTED_MODULE_0__.supportsElementInternals)
/* harmony export */ });
/* harmony import */ var _form_associated_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./form-associated.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/form-associated/form-associated.js");



/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/foundation-element/foundation-element.js":
/*!***************************************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/foundation-element/foundation-element.js ***!
  \***************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   FoundationElement: () => (/* binding */ FoundationElement),
/* harmony export */   FoundationElementRegistry: () => (/* binding */ FoundationElementRegistry)
/* harmony export */ });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! tslib */ "./node_modules/@microsoft/fast-foundation/node_modules/tslib/tslib.es6.js");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @microsoft/fast-element */ "webpack/sharing/consume/default/@microsoft/fast-element/@microsoft/fast-element");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _design_system_component_presentation_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../design-system/component-presentation.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/design-system/component-presentation.js");



/**
 * Defines a foundation element class that:
 * 1. Connects the element to its ComponentPresentation
 * 2. Allows resolving the element template from the instance or ComponentPresentation
 * 3. Allows resolving the element styles from the instance or ComponentPresentation
 *
 * @public
 */
class FoundationElement extends _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.FASTElement {
    constructor() {
        super(...arguments);
        this._presentation = void 0;
    }
    /**
     * A property which resolves the ComponentPresentation instance
     * for the current component.
     * @public
     */
    get $presentation() {
        if (this._presentation === void 0) {
            this._presentation = _design_system_component_presentation_js__WEBPACK_IMPORTED_MODULE_1__.ComponentPresentation.forTag(this.tagName, this);
        }
        return this._presentation;
    }
    templateChanged() {
        if (this.template !== undefined) {
            this.$fastController.template = this.template;
        }
    }
    stylesChanged() {
        if (this.styles !== undefined) {
            this.$fastController.styles = this.styles;
        }
    }
    /**
     * The connected callback for this FASTElement.
     * @remarks
     * This method is invoked by the platform whenever this FoundationElement
     * becomes connected to the document.
     * @public
     */
    connectedCallback() {
        if (this.$presentation !== null) {
            this.$presentation.applyTo(this);
        }
        super.connectedCallback();
    }
    /**
     * Defines an element registry function with a set of element definition defaults.
     * @param elementDefinition - The definition of the element to create the registry
     * function for.
     * @public
     */
    static compose(elementDefinition) {
        return (overrideDefinition = {}) => new FoundationElementRegistry(this === FoundationElement
            ? class extends FoundationElement {
            }
            : this, elementDefinition, overrideDefinition);
    }
}
(0,tslib__WEBPACK_IMPORTED_MODULE_2__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.observable
], FoundationElement.prototype, "template", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_2__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.observable
], FoundationElement.prototype, "styles", void 0);
function resolveOption(option, context, definition) {
    if (typeof option === "function") {
        return option(context, definition);
    }
    return option;
}
/**
 * Registry capable of defining presentation properties for a DOM Container hierarchy.
 *
 * @internal
 */
/* eslint-disable @typescript-eslint/no-unused-vars */
class FoundationElementRegistry {
    constructor(type, elementDefinition, overrideDefinition) {
        this.type = type;
        this.elementDefinition = elementDefinition;
        this.overrideDefinition = overrideDefinition;
        this.definition = Object.assign(Object.assign({}, this.elementDefinition), this.overrideDefinition);
    }
    register(container, context) {
        const definition = this.definition;
        const overrideDefinition = this.overrideDefinition;
        const prefix = definition.prefix || context.elementPrefix;
        const name = `${prefix}-${definition.baseName}`;
        context.tryDefineElement({
            name,
            type: this.type,
            baseClass: this.elementDefinition.baseClass,
            callback: x => {
                const presentation = new _design_system_component_presentation_js__WEBPACK_IMPORTED_MODULE_1__.DefaultComponentPresentation(resolveOption(definition.template, x, definition), resolveOption(definition.styles, x, definition));
                x.definePresentation(presentation);
                let shadowOptions = resolveOption(definition.shadowOptions, x, definition);
                if (x.shadowRootMode) {
                    // If the design system has overridden the shadow root mode, we need special handling.
                    if (shadowOptions) {
                        // If there are shadow options present in the definition, then
                        // either the component itself has specified an option or the
                        // registry function has overridden it.
                        if (!overrideDefinition.shadowOptions) {
                            // There were shadow options provided by the component and not overridden by
                            // the registry.
                            shadowOptions.mode = x.shadowRootMode;
                        }
                    }
                    else if (shadowOptions !== null) {
                        // If the component author did not provide shadow options,
                        // and did not null them out (light dom opt-in) then they
                        // were relying on the FASTElement default. So, if the
                        // design system provides a mode, we need to create the options
                        // to override the default.
                        shadowOptions = { mode: x.shadowRootMode };
                    }
                }
                x.defineElement({
                    elementOptions: resolveOption(definition.elementOptions, x, definition),
                    shadowOptions,
                    attributes: resolveOption(definition.attributes, x, definition),
                });
            },
        });
    }
}
/* eslint-enable @typescript-eslint/no-unused-vars */


/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/foundation-element/index.js":
/*!**************************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/foundation-element/index.js ***!
  \**************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   FoundationElement: () => (/* reexport safe */ _foundation_element_js__WEBPACK_IMPORTED_MODULE_0__.FoundationElement),
/* harmony export */   FoundationElementRegistry: () => (/* reexport safe */ _foundation_element_js__WEBPACK_IMPORTED_MODULE_0__.FoundationElementRegistry)
/* harmony export */ });
/* harmony import */ var _foundation_element_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./foundation-element.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/foundation-element/foundation-element.js");



/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/horizontal-scroll/horizontal-scroll.js":
/*!*************************************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/horizontal-scroll/horizontal-scroll.js ***!
  \*************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   HorizontalScroll: () => (/* binding */ HorizontalScroll)
/* harmony export */ });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! tslib */ "./node_modules/@microsoft/fast-foundation/node_modules/tslib/tslib.es6.js");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @microsoft/fast-element */ "webpack/sharing/consume/default/@microsoft/fast-element/@microsoft/fast-element");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _foundation_element_foundation_element_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../foundation-element/foundation-element.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/foundation-element/foundation-element.js");



/**
 * A HorizontalScroll Custom HTML Element
 *
 * @slot start - Content which can be provided before the scroll area
 * @slot end - Content which can be provided after the scroll area
 * @csspart scroll-area - Wraps the entire scrollable region
 * @csspart scroll-view - The visible scroll area
 * @csspart content-container - The container for the content
 * @csspart scroll-prev - The previous flipper container
 * @csspart scroll-action-previous - The element wrapping the previous flipper
 * @csspart scroll-next - The next flipper container
 * @csspart scroll-action-next - The element wrapping the next flipper
 * @fires scrollstart - Fires a custom 'scrollstart' event when scrolling
 * @fires scrollend - Fires a custom 'scrollend' event when scrolling stops
 *
 * @public
 */
class HorizontalScroll extends _foundation_element_foundation_element_js__WEBPACK_IMPORTED_MODULE_1__.FoundationElement {
    constructor() {
        super(...arguments);
        /**
         * @internal
         */
        this.framesPerSecond = 60;
        /**
         * Flag indicating that the items are being updated
         *
         * @internal
         */
        this.updatingItems = false;
        /**
         * Speed of scroll in pixels per second
         * @public
         */
        this.speed = 600;
        /**
         * Attribute used for easing, defaults to ease-in-out
         * @public
         */
        this.easing = "ease-in-out";
        /**
         * Attribute to hide flippers from assistive technology
         * @public
         */
        this.flippersHiddenFromAT = false;
        /**
         * Scrolling state
         * @internal
         */
        this.scrolling = false;
        /**
         * Detects if the component has been resized
         * @internal
         */
        this.resizeDetector = null;
    }
    /**
     * The calculated duration for a frame.
     *
     * @internal
     */
    get frameTime() {
        return 1000 / this.framesPerSecond;
    }
    /**
     * Firing scrollstart and scrollend events
     * @internal
     */
    scrollingChanged(prev, next) {
        if (this.scrollContainer) {
            const event = this.scrolling == true ? "scrollstart" : "scrollend";
            this.$emit(event, this.scrollContainer.scrollLeft);
        }
    }
    /**
     * In RTL mode
     * @internal
     */
    get isRtl() {
        return (this.scrollItems.length > 1 &&
            this.scrollItems[0].offsetLeft > this.scrollItems[1].offsetLeft);
    }
    connectedCallback() {
        super.connectedCallback();
        this.initializeResizeDetector();
    }
    disconnectedCallback() {
        this.disconnectResizeDetector();
        super.disconnectedCallback();
    }
    /**
     * Updates scroll stops and flippers when scroll items change
     * @param previous - current scroll items
     * @param next - new updated scroll items
     * @public
     */
    scrollItemsChanged(previous, next) {
        if (next && !this.updatingItems) {
            _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.DOM.queueUpdate(() => this.setStops());
        }
    }
    /**
     * destroys the instance's resize observer
     * @internal
     */
    disconnectResizeDetector() {
        if (this.resizeDetector) {
            this.resizeDetector.disconnect();
            this.resizeDetector = null;
        }
    }
    /**
     * initializes the instance's resize observer
     * @internal
     */
    initializeResizeDetector() {
        this.disconnectResizeDetector();
        this.resizeDetector = new window.ResizeObserver(this.resized.bind(this));
        this.resizeDetector.observe(this);
    }
    /**
     * Looks for slots and uses child nodes instead
     * @internal
     */
    updateScrollStops() {
        this.updatingItems = true;
        const updatedItems = this.scrollItems.reduce((scrollItems, scrollItem) => {
            if (scrollItem instanceof HTMLSlotElement) {
                return scrollItems.concat(scrollItem.assignedElements());
            }
            scrollItems.push(scrollItem);
            return scrollItems;
        }, []);
        this.scrollItems = updatedItems;
        this.updatingItems = false;
    }
    /**
     * Finds all of the scroll stops between elements
     * @internal
     */
    setStops() {
        this.updateScrollStops();
        const { scrollContainer: container } = this;
        const { scrollLeft } = container;
        const { width: containerWidth, left: containerLeft, } = container.getBoundingClientRect();
        this.width = containerWidth;
        let lastStop = 0;
        let stops = this.scrollItems
            .map((item, index) => {
            const { left, width } = item.getBoundingClientRect();
            const leftPosition = Math.round(left + scrollLeft - containerLeft);
            const right = Math.round(leftPosition + width);
            if (this.isRtl) {
                return -right;
            }
            lastStop = right;
            return index === 0 ? 0 : leftPosition;
        })
            .concat(lastStop);
        /* Fixes a FireFox bug where it doesn't scroll to the start */
        stops = this.fixScrollMisalign(stops);
        /* Sort to zero */
        stops.sort((a, b) => Math.abs(a) - Math.abs(b));
        this.scrollStops = stops;
        this.setFlippers();
    }
    /**
     * Checks to see if the stops are returning values
     *  otherwise it will try to reinitialize them
     *
     * @returns boolean indicating that current scrollStops are valid non-zero values
     * @internal
     */
    validateStops(reinit = true) {
        const hasStops = () => !!this.scrollStops.find((stop) => stop > 0);
        if (!hasStops() && reinit) {
            this.setStops();
        }
        return hasStops();
    }
    /**
     *
     */
    fixScrollMisalign(stops) {
        if (this.isRtl && stops.some(stop => stop > 0)) {
            stops.sort((a, b) => b - a);
            const offset = stops[0];
            stops = stops.map(stop => stop - offset);
        }
        return stops;
    }
    /**
     * Sets the controls view if enabled
     * @internal
     */
    setFlippers() {
        var _a, _b;
        const position = this.scrollContainer.scrollLeft;
        (_a = this.previousFlipperContainer) === null || _a === void 0 ? void 0 : _a.classList.toggle("disabled", position === 0);
        if (this.scrollStops) {
            const lastStop = Math.abs(this.scrollStops[this.scrollStops.length - 1]);
            (_b = this.nextFlipperContainer) === null || _b === void 0 ? void 0 : _b.classList.toggle("disabled", this.validateStops(false) && Math.abs(position) + this.width >= lastStop);
        }
    }
    /**
     * Function that can scroll an item into view.
     * @param item - An item index, a scroll item or a child of one of the scroll items
     * @param padding - Padding of the viewport where the active item shouldn't be
     * @param rightPadding - Optional right padding. Uses the padding if not defined
     *
     * @public
     */
    scrollInView(item, padding = 0, rightPadding) {
        var _a;
        if (typeof item !== "number" && item) {
            item = this.scrollItems.findIndex(scrollItem => scrollItem === item || scrollItem.contains(item));
        }
        if (item !== undefined) {
            rightPadding = rightPadding !== null && rightPadding !== void 0 ? rightPadding : padding;
            const { scrollContainer: container, scrollStops, scrollItems: items } = this;
            const { scrollLeft } = this.scrollContainer;
            const { width: containerWidth } = container.getBoundingClientRect();
            const itemStart = scrollStops[item];
            const { width } = items[item].getBoundingClientRect();
            const itemEnd = itemStart + width;
            const isBefore = scrollLeft + padding > itemStart;
            if (isBefore || scrollLeft + containerWidth - rightPadding < itemEnd) {
                const stops = [...scrollStops].sort((a, b) => (isBefore ? b - a : a - b));
                const scrollTo = (_a = stops.find(position => isBefore
                    ? position + padding < itemStart
                    : position + containerWidth - (rightPadding !== null && rightPadding !== void 0 ? rightPadding : 0) > itemEnd)) !== null && _a !== void 0 ? _a : 0;
                this.scrollToPosition(scrollTo);
            }
        }
    }
    /**
     * Lets the user arrow left and right through the horizontal scroll
     * @param e - Keyboard event
     * @public
     */
    keyupHandler(e) {
        const key = e.key;
        switch (key) {
            case "ArrowLeft":
                this.scrollToPrevious();
                break;
            case "ArrowRight":
                this.scrollToNext();
                break;
        }
    }
    /**
     * Scrolls items to the left
     * @public
     */
    scrollToPrevious() {
        this.validateStops();
        const scrollPosition = this.scrollContainer.scrollLeft;
        const current = this.scrollStops.findIndex((stop, index) => stop >= scrollPosition &&
            (this.isRtl ||
                index === this.scrollStops.length - 1 ||
                this.scrollStops[index + 1] > scrollPosition));
        const right = Math.abs(this.scrollStops[current + 1]);
        let nextIndex = this.scrollStops.findIndex(stop => Math.abs(stop) + this.width > right);
        if (nextIndex >= current || nextIndex === -1) {
            nextIndex = current > 0 ? current - 1 : 0;
        }
        this.scrollToPosition(this.scrollStops[nextIndex], scrollPosition);
    }
    /**
     * Scrolls items to the right
     * @public
     */
    scrollToNext() {
        this.validateStops();
        const scrollPosition = this.scrollContainer.scrollLeft;
        const current = this.scrollStops.findIndex(stop => Math.abs(stop) >= Math.abs(scrollPosition));
        const outOfView = this.scrollStops.findIndex(stop => Math.abs(scrollPosition) + this.width <= Math.abs(stop));
        let nextIndex = current;
        if (outOfView > current + 2) {
            nextIndex = outOfView - 2;
        }
        else if (current < this.scrollStops.length - 2) {
            nextIndex = current + 1;
        }
        this.scrollToPosition(this.scrollStops[nextIndex], scrollPosition);
    }
    /**
     * Handles scrolling with easing
     * @param position - starting position
     * @param newPosition - position to scroll to
     * @public
     */
    scrollToPosition(newPosition, position = this.scrollContainer.scrollLeft) {
        var _a;
        if (this.scrolling) {
            return;
        }
        this.scrolling = true;
        const seconds = (_a = this.duration) !== null && _a !== void 0 ? _a : `${Math.abs(newPosition - position) / this.speed}s`;
        this.content.style.setProperty("transition-duration", seconds);
        const computedDuration = parseFloat(getComputedStyle(this.content).getPropertyValue("transition-duration"));
        const transitionendHandler = (e) => {
            if (e && e.target !== e.currentTarget) {
                return;
            }
            this.content.style.setProperty("transition-duration", "0s");
            this.content.style.removeProperty("transform");
            this.scrollContainer.style.setProperty("scroll-behavior", "auto");
            this.scrollContainer.scrollLeft = newPosition;
            this.setFlippers();
            this.content.removeEventListener("transitionend", transitionendHandler);
            this.scrolling = false;
        };
        if (computedDuration === 0) {
            transitionendHandler();
            return;
        }
        this.content.addEventListener("transitionend", transitionendHandler);
        const maxScrollValue = this.scrollContainer.scrollWidth - this.scrollContainer.clientWidth;
        let transitionStop = this.scrollContainer.scrollLeft - Math.min(newPosition, maxScrollValue);
        if (this.isRtl) {
            transitionStop =
                this.scrollContainer.scrollLeft +
                    Math.min(Math.abs(newPosition), maxScrollValue);
        }
        this.content.style.setProperty("transition-property", "transform");
        this.content.style.setProperty("transition-timing-function", this.easing);
        this.content.style.setProperty("transform", `translateX(${transitionStop}px)`);
    }
    /**
     * Monitors resize event on the horizontal-scroll element
     * @public
     */
    resized() {
        if (this.resizeTimeout) {
            this.resizeTimeout = clearTimeout(this.resizeTimeout);
        }
        this.resizeTimeout = setTimeout(() => {
            this.width = this.scrollContainer.offsetWidth;
            this.setFlippers();
        }, this.frameTime);
    }
    /**
     * Monitors scrolled event on the content container
     * @public
     */
    scrolled() {
        if (this.scrollTimeout) {
            this.scrollTimeout = clearTimeout(this.scrollTimeout);
        }
        this.scrollTimeout = setTimeout(() => {
            this.setFlippers();
        }, this.frameTime);
    }
}
(0,tslib__WEBPACK_IMPORTED_MODULE_2__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ converter: _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.nullableNumberConverter })
], HorizontalScroll.prototype, "speed", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_2__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr
], HorizontalScroll.prototype, "duration", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_2__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr
], HorizontalScroll.prototype, "easing", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_2__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ attribute: "flippers-hidden-from-at", converter: _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.booleanConverter })
], HorizontalScroll.prototype, "flippersHiddenFromAT", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_2__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.observable
], HorizontalScroll.prototype, "scrolling", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_2__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.observable
], HorizontalScroll.prototype, "scrollItems", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_2__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ attribute: "view" })
], HorizontalScroll.prototype, "view", void 0);


/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/horizontal-scroll/horizontal-scroll.template.js":
/*!**********************************************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/horizontal-scroll/horizontal-scroll.template.js ***!
  \**********************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   horizontalScrollTemplate: () => (/* binding */ horizontalScrollTemplate)
/* harmony export */ });
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @microsoft/fast-element */ "webpack/sharing/consume/default/@microsoft/fast-element/@microsoft/fast-element");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _patterns_start_end_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../patterns/start-end.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/patterns/start-end.js");


/**
 * @public
 */
const horizontalScrollTemplate = (context, definition) => {
    var _a, _b;
    return (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.html) `
    <template
        class="horizontal-scroll"
        @keyup="${(x, c) => x.keyupHandler(c.event)}"
    >
        ${(0,_patterns_start_end_js__WEBPACK_IMPORTED_MODULE_1__.startSlotTemplate)(context, definition)}
        <div class="scroll-area" part="scroll-area">
            <div
                class="scroll-view"
                part="scroll-view"
                @scroll="${x => x.scrolled()}"
                ${(0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.ref)("scrollContainer")}
            >
                <div class="content-container" part="content-container" ${(0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.ref)("content")}>
                    <slot
                        ${(0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.slotted)({
        property: "scrollItems",
        filter: (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.elements)(),
    })}
                    ></slot>
                </div>
            </div>
            ${(0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.when)(x => x.view !== "mobile", (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.html) `
                    <div
                        class="scroll scroll-prev"
                        part="scroll-prev"
                        ${(0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.ref)("previousFlipperContainer")}
                    >
                        <div class="scroll-action" part="scroll-action-previous">
                            <slot name="previous-flipper">
                                ${definition.previousFlipper instanceof Function
        ? definition.previousFlipper(context, definition)
        : (_a = definition.previousFlipper) !== null && _a !== void 0 ? _a : ""}
                            </slot>
                        </div>
                    </div>
                    <div
                        class="scroll scroll-next"
                        part="scroll-next"
                        ${(0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.ref)("nextFlipperContainer")}
                    >
                        <div class="scroll-action" part="scroll-action-next">
                            <slot name="next-flipper">
                                ${definition.nextFlipper instanceof Function
        ? definition.nextFlipper(context, definition)
        : (_b = definition.nextFlipper) !== null && _b !== void 0 ? _b : ""}
                            </slot>
                        </div>
                    </div>
                `)}
        </div>
        ${(0,_patterns_start_end_js__WEBPACK_IMPORTED_MODULE_1__.endSlotTemplate)(context, definition)}
    </template>
`;
};


/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/horizontal-scroll/index.js":
/*!*************************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/horizontal-scroll/index.js ***!
  \*************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   HorizontalScroll: () => (/* reexport safe */ _horizontal_scroll_js__WEBPACK_IMPORTED_MODULE_0__.HorizontalScroll),
/* harmony export */   horizontalScrollTemplate: () => (/* reexport safe */ _horizontal_scroll_template_js__WEBPACK_IMPORTED_MODULE_1__.horizontalScrollTemplate)
/* harmony export */ });
/* harmony import */ var _horizontal_scroll_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./horizontal-scroll.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/horizontal-scroll/horizontal-scroll.js");
/* harmony import */ var _horizontal_scroll_template_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./horizontal-scroll.template.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/horizontal-scroll/horizontal-scroll.template.js");




/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/index.js":
/*!*******************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/index.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ARIAGlobalStatesAndProperties: () => (/* reexport safe */ _patterns_index_js__WEBPACK_IMPORTED_MODULE_30__.ARIAGlobalStatesAndProperties),
/* harmony export */   Accordion: () => (/* reexport safe */ _accordion_index_js__WEBPACK_IMPORTED_MODULE_1__.Accordion),
/* harmony export */   AccordionExpandMode: () => (/* reexport safe */ _accordion_index_js__WEBPACK_IMPORTED_MODULE_1__.AccordionExpandMode),
/* harmony export */   AccordionItem: () => (/* reexport safe */ _accordion_item_index_js__WEBPACK_IMPORTED_MODULE_0__.AccordionItem),
/* harmony export */   Anchor: () => (/* reexport safe */ _anchor_index_js__WEBPACK_IMPORTED_MODULE_2__.Anchor),
/* harmony export */   AnchoredRegion: () => (/* reexport safe */ _anchored_region_index_js__WEBPACK_IMPORTED_MODULE_3__.AnchoredRegion),
/* harmony export */   Avatar: () => (/* reexport safe */ _avatar_index_js__WEBPACK_IMPORTED_MODULE_4__.Avatar),
/* harmony export */   Badge: () => (/* reexport safe */ _badge_index_js__WEBPACK_IMPORTED_MODULE_5__.Badge),
/* harmony export */   BaseProgress: () => (/* reexport safe */ _progress_index_js__WEBPACK_IMPORTED_MODULE_32__.BaseProgress),
/* harmony export */   Breadcrumb: () => (/* reexport safe */ _breadcrumb_index_js__WEBPACK_IMPORTED_MODULE_7__.Breadcrumb),
/* harmony export */   BreadcrumbItem: () => (/* reexport safe */ _breadcrumb_item_index_js__WEBPACK_IMPORTED_MODULE_6__.BreadcrumbItem),
/* harmony export */   Button: () => (/* reexport safe */ _button_index_js__WEBPACK_IMPORTED_MODULE_8__.Button),
/* harmony export */   Calendar: () => (/* reexport safe */ _calendar_index_js__WEBPACK_IMPORTED_MODULE_9__.Calendar),
/* harmony export */   CalendarTitleTemplate: () => (/* reexport safe */ _calendar_index_js__WEBPACK_IMPORTED_MODULE_9__.CalendarTitleTemplate),
/* harmony export */   Card: () => (/* reexport safe */ _card_index_js__WEBPACK_IMPORTED_MODULE_10__.Card),
/* harmony export */   CheckableFormAssociated: () => (/* reexport safe */ _form_associated_index_js__WEBPACK_IMPORTED_MODULE_22__.CheckableFormAssociated),
/* harmony export */   Checkbox: () => (/* reexport safe */ _checkbox_index_js__WEBPACK_IMPORTED_MODULE_11__.Checkbox),
/* harmony export */   Combobox: () => (/* reexport safe */ _combobox_index_js__WEBPACK_IMPORTED_MODULE_12__.Combobox),
/* harmony export */   ComboboxAutocomplete: () => (/* reexport safe */ _combobox_index_js__WEBPACK_IMPORTED_MODULE_12__.ComboboxAutocomplete),
/* harmony export */   ComponentPresentation: () => (/* reexport safe */ _design_system_index_js__WEBPACK_IMPORTED_MODULE_14__.ComponentPresentation),
/* harmony export */   Container: () => (/* reexport safe */ _di_index_js__WEBPACK_IMPORTED_MODULE_16__.Container),
/* harmony export */   ContainerConfiguration: () => (/* reexport safe */ _di_index_js__WEBPACK_IMPORTED_MODULE_16__.ContainerConfiguration),
/* harmony export */   ContainerImpl: () => (/* reexport safe */ _di_index_js__WEBPACK_IMPORTED_MODULE_16__.ContainerImpl),
/* harmony export */   DI: () => (/* reexport safe */ _di_index_js__WEBPACK_IMPORTED_MODULE_16__.DI),
/* harmony export */   DataGrid: () => (/* reexport safe */ _data_grid_index_js__WEBPACK_IMPORTED_MODULE_13__.DataGrid),
/* harmony export */   DataGridCell: () => (/* reexport safe */ _data_grid_index_js__WEBPACK_IMPORTED_MODULE_13__.DataGridCell),
/* harmony export */   DataGridCellTypes: () => (/* reexport safe */ _data_grid_index_js__WEBPACK_IMPORTED_MODULE_13__.DataGridCellTypes),
/* harmony export */   DataGridRow: () => (/* reexport safe */ _data_grid_index_js__WEBPACK_IMPORTED_MODULE_13__.DataGridRow),
/* harmony export */   DataGridRowTypes: () => (/* reexport safe */ _data_grid_index_js__WEBPACK_IMPORTED_MODULE_13__.DataGridRowTypes),
/* harmony export */   DateFormatter: () => (/* reexport safe */ _calendar_index_js__WEBPACK_IMPORTED_MODULE_9__.DateFormatter),
/* harmony export */   DefaultComponentPresentation: () => (/* reexport safe */ _design_system_index_js__WEBPACK_IMPORTED_MODULE_14__.DefaultComponentPresentation),
/* harmony export */   DefaultResolver: () => (/* reexport safe */ _di_index_js__WEBPACK_IMPORTED_MODULE_16__.DefaultResolver),
/* harmony export */   DelegatesARIAButton: () => (/* reexport safe */ _button_index_js__WEBPACK_IMPORTED_MODULE_8__.DelegatesARIAButton),
/* harmony export */   DelegatesARIACombobox: () => (/* reexport safe */ _combobox_index_js__WEBPACK_IMPORTED_MODULE_12__.DelegatesARIACombobox),
/* harmony export */   DelegatesARIALink: () => (/* reexport safe */ _anchor_index_js__WEBPACK_IMPORTED_MODULE_2__.DelegatesARIALink),
/* harmony export */   DelegatesARIAListbox: () => (/* reexport safe */ _listbox_index_js__WEBPACK_IMPORTED_MODULE_25__.DelegatesARIAListbox),
/* harmony export */   DelegatesARIAListboxOption: () => (/* reexport safe */ _listbox_option_index_js__WEBPACK_IMPORTED_MODULE_24__.DelegatesARIAListboxOption),
/* harmony export */   DelegatesARIASearch: () => (/* reexport safe */ _search_index_js__WEBPACK_IMPORTED_MODULE_36__.DelegatesARIASearch),
/* harmony export */   DelegatesARIASelect: () => (/* reexport safe */ _select_index_js__WEBPACK_IMPORTED_MODULE_37__.DelegatesARIASelect),
/* harmony export */   DelegatesARIATextbox: () => (/* reexport safe */ _text_field_index_js__WEBPACK_IMPORTED_MODULE_46__.DelegatesARIATextbox),
/* harmony export */   DelegatesARIAToolbar: () => (/* reexport safe */ _toolbar_index_js__WEBPACK_IMPORTED_MODULE_47__.DelegatesARIAToolbar),
/* harmony export */   DesignSystem: () => (/* reexport safe */ _design_system_index_js__WEBPACK_IMPORTED_MODULE_14__.DesignSystem),
/* harmony export */   DesignToken: () => (/* reexport safe */ _design_token_design_token_js__WEBPACK_IMPORTED_MODULE_15__.DesignToken),
/* harmony export */   Dialog: () => (/* reexport safe */ _dialog_index_js__WEBPACK_IMPORTED_MODULE_17__.Dialog),
/* harmony export */   Disclosure: () => (/* reexport safe */ _disclosure_index_js__WEBPACK_IMPORTED_MODULE_19__.Disclosure),
/* harmony export */   Divider: () => (/* reexport safe */ _divider_index_js__WEBPACK_IMPORTED_MODULE_20__.Divider),
/* harmony export */   DividerRole: () => (/* reexport safe */ _divider_index_js__WEBPACK_IMPORTED_MODULE_20__.DividerRole),
/* harmony export */   ElementDisambiguation: () => (/* reexport safe */ _design_system_index_js__WEBPACK_IMPORTED_MODULE_14__.ElementDisambiguation),
/* harmony export */   FactoryImpl: () => (/* reexport safe */ _di_index_js__WEBPACK_IMPORTED_MODULE_16__.FactoryImpl),
/* harmony export */   Flipper: () => (/* reexport safe */ _flipper_index_js__WEBPACK_IMPORTED_MODULE_21__.Flipper),
/* harmony export */   FlipperDirection: () => (/* reexport safe */ _flipper_index_js__WEBPACK_IMPORTED_MODULE_21__.FlipperDirection),
/* harmony export */   FlyoutPosBottom: () => (/* reexport safe */ _anchored_region_index_js__WEBPACK_IMPORTED_MODULE_3__.FlyoutPosBottom),
/* harmony export */   FlyoutPosBottomFill: () => (/* reexport safe */ _anchored_region_index_js__WEBPACK_IMPORTED_MODULE_3__.FlyoutPosBottomFill),
/* harmony export */   FlyoutPosTallest: () => (/* reexport safe */ _anchored_region_index_js__WEBPACK_IMPORTED_MODULE_3__.FlyoutPosTallest),
/* harmony export */   FlyoutPosTallestFill: () => (/* reexport safe */ _anchored_region_index_js__WEBPACK_IMPORTED_MODULE_3__.FlyoutPosTallestFill),
/* harmony export */   FlyoutPosTop: () => (/* reexport safe */ _anchored_region_index_js__WEBPACK_IMPORTED_MODULE_3__.FlyoutPosTop),
/* harmony export */   FlyoutPosTopFill: () => (/* reexport safe */ _anchored_region_index_js__WEBPACK_IMPORTED_MODULE_3__.FlyoutPosTopFill),
/* harmony export */   FormAssociated: () => (/* reexport safe */ _form_associated_index_js__WEBPACK_IMPORTED_MODULE_22__.FormAssociated),
/* harmony export */   FoundationElement: () => (/* reexport safe */ _foundation_element_index_js__WEBPACK_IMPORTED_MODULE_23__.FoundationElement),
/* harmony export */   FoundationElementRegistry: () => (/* reexport safe */ _foundation_element_index_js__WEBPACK_IMPORTED_MODULE_23__.FoundationElementRegistry),
/* harmony export */   GenerateHeaderOptions: () => (/* reexport safe */ _data_grid_index_js__WEBPACK_IMPORTED_MODULE_13__.GenerateHeaderOptions),
/* harmony export */   HorizontalScroll: () => (/* reexport safe */ _horizontal_scroll_index_js__WEBPACK_IMPORTED_MODULE_35__.HorizontalScroll),
/* harmony export */   Listbox: () => (/* reexport safe */ _listbox_index_js__WEBPACK_IMPORTED_MODULE_25__.Listbox),
/* harmony export */   ListboxElement: () => (/* reexport safe */ _listbox_index_js__WEBPACK_IMPORTED_MODULE_25__.ListboxElement),
/* harmony export */   ListboxOption: () => (/* reexport safe */ _listbox_option_index_js__WEBPACK_IMPORTED_MODULE_24__.ListboxOption),
/* harmony export */   MatchMediaBehavior: () => (/* reexport safe */ _utilities_index_js__WEBPACK_IMPORTED_MODULE_51__.MatchMediaBehavior),
/* harmony export */   MatchMediaStyleSheetBehavior: () => (/* reexport safe */ _utilities_index_js__WEBPACK_IMPORTED_MODULE_51__.MatchMediaStyleSheetBehavior),
/* harmony export */   Menu: () => (/* reexport safe */ _menu_index_js__WEBPACK_IMPORTED_MODULE_28__.Menu),
/* harmony export */   MenuItem: () => (/* reexport safe */ _menu_item_index_js__WEBPACK_IMPORTED_MODULE_27__.MenuItem),
/* harmony export */   MenuItemRole: () => (/* reexport safe */ _menu_item_index_js__WEBPACK_IMPORTED_MODULE_27__.MenuItemRole),
/* harmony export */   NumberField: () => (/* reexport safe */ _number_field_index_js__WEBPACK_IMPORTED_MODULE_29__.NumberField),
/* harmony export */   Picker: () => (/* reexport safe */ _picker_index_js__WEBPACK_IMPORTED_MODULE_26__.Picker),
/* harmony export */   PickerList: () => (/* reexport safe */ _picker_index_js__WEBPACK_IMPORTED_MODULE_26__.PickerList),
/* harmony export */   PickerListItem: () => (/* reexport safe */ _picker_index_js__WEBPACK_IMPORTED_MODULE_26__.PickerListItem),
/* harmony export */   PickerMenu: () => (/* reexport safe */ _picker_index_js__WEBPACK_IMPORTED_MODULE_26__.PickerMenu),
/* harmony export */   PickerMenuOption: () => (/* reexport safe */ _picker_index_js__WEBPACK_IMPORTED_MODULE_26__.PickerMenuOption),
/* harmony export */   PropertyStyleSheetBehavior: () => (/* reexport safe */ _utilities_index_js__WEBPACK_IMPORTED_MODULE_51__.PropertyStyleSheetBehavior),
/* harmony export */   Radio: () => (/* reexport safe */ _radio_index_js__WEBPACK_IMPORTED_MODULE_34__.Radio),
/* harmony export */   RadioGroup: () => (/* reexport safe */ _radio_group_index_js__WEBPACK_IMPORTED_MODULE_33__.RadioGroup),
/* harmony export */   Registration: () => (/* reexport safe */ _di_index_js__WEBPACK_IMPORTED_MODULE_16__.Registration),
/* harmony export */   ResolverBuilder: () => (/* reexport safe */ _di_index_js__WEBPACK_IMPORTED_MODULE_16__.ResolverBuilder),
/* harmony export */   ResolverImpl: () => (/* reexport safe */ _di_index_js__WEBPACK_IMPORTED_MODULE_16__.ResolverImpl),
/* harmony export */   Search: () => (/* reexport safe */ _search_index_js__WEBPACK_IMPORTED_MODULE_36__.Search),
/* harmony export */   Select: () => (/* reexport safe */ _select_index_js__WEBPACK_IMPORTED_MODULE_37__.Select),
/* harmony export */   SelectPosition: () => (/* reexport safe */ _select_index_js__WEBPACK_IMPORTED_MODULE_37__.SelectPosition),
/* harmony export */   ServiceLocator: () => (/* reexport safe */ _di_index_js__WEBPACK_IMPORTED_MODULE_16__.ServiceLocator),
/* harmony export */   Skeleton: () => (/* reexport safe */ _skeleton_index_js__WEBPACK_IMPORTED_MODULE_38__.Skeleton),
/* harmony export */   Slider: () => (/* reexport safe */ _slider_index_js__WEBPACK_IMPORTED_MODULE_40__.Slider),
/* harmony export */   SliderLabel: () => (/* reexport safe */ _slider_label_index_js__WEBPACK_IMPORTED_MODULE_39__.SliderLabel),
/* harmony export */   SliderMode: () => (/* reexport safe */ _slider_index_js__WEBPACK_IMPORTED_MODULE_40__.SliderMode),
/* harmony export */   StartEnd: () => (/* reexport safe */ _patterns_index_js__WEBPACK_IMPORTED_MODULE_30__.StartEnd),
/* harmony export */   Switch: () => (/* reexport safe */ _switch_index_js__WEBPACK_IMPORTED_MODULE_41__.Switch),
/* harmony export */   Tab: () => (/* reexport safe */ _tab_index_js__WEBPACK_IMPORTED_MODULE_43__.Tab),
/* harmony export */   TabPanel: () => (/* reexport safe */ _tab_panel_index_js__WEBPACK_IMPORTED_MODULE_42__.TabPanel),
/* harmony export */   Tabs: () => (/* reexport safe */ _tabs_index_js__WEBPACK_IMPORTED_MODULE_44__.Tabs),
/* harmony export */   TabsOrientation: () => (/* reexport safe */ _tabs_index_js__WEBPACK_IMPORTED_MODULE_44__.TabsOrientation),
/* harmony export */   TextArea: () => (/* reexport safe */ _text_area_index_js__WEBPACK_IMPORTED_MODULE_45__.TextArea),
/* harmony export */   TextAreaResize: () => (/* reexport safe */ _text_area_index_js__WEBPACK_IMPORTED_MODULE_45__.TextAreaResize),
/* harmony export */   TextField: () => (/* reexport safe */ _text_field_index_js__WEBPACK_IMPORTED_MODULE_46__.TextField),
/* harmony export */   TextFieldType: () => (/* reexport safe */ _text_field_index_js__WEBPACK_IMPORTED_MODULE_46__.TextFieldType),
/* harmony export */   Toolbar: () => (/* reexport safe */ _toolbar_index_js__WEBPACK_IMPORTED_MODULE_47__.Toolbar),
/* harmony export */   Tooltip: () => (/* reexport safe */ _tooltip_index_js__WEBPACK_IMPORTED_MODULE_48__.Tooltip),
/* harmony export */   TooltipPosition: () => (/* reexport safe */ _tooltip_index_js__WEBPACK_IMPORTED_MODULE_48__.TooltipPosition),
/* harmony export */   TreeItem: () => (/* reexport safe */ _tree_item_index_js__WEBPACK_IMPORTED_MODULE_49__.TreeItem),
/* harmony export */   TreeView: () => (/* reexport safe */ _tree_view_index_js__WEBPACK_IMPORTED_MODULE_50__.TreeView),
/* harmony export */   accordionItemTemplate: () => (/* reexport safe */ _accordion_item_index_js__WEBPACK_IMPORTED_MODULE_0__.accordionItemTemplate),
/* harmony export */   accordionTemplate: () => (/* reexport safe */ _accordion_index_js__WEBPACK_IMPORTED_MODULE_1__.accordionTemplate),
/* harmony export */   all: () => (/* reexport safe */ _di_index_js__WEBPACK_IMPORTED_MODULE_16__.all),
/* harmony export */   anchorTemplate: () => (/* reexport safe */ _anchor_index_js__WEBPACK_IMPORTED_MODULE_2__.anchorTemplate),
/* harmony export */   anchoredRegionTemplate: () => (/* reexport safe */ _anchored_region_index_js__WEBPACK_IMPORTED_MODULE_3__.anchoredRegionTemplate),
/* harmony export */   applyMixins: () => (/* reexport safe */ _utilities_index_js__WEBPACK_IMPORTED_MODULE_51__.applyMixins),
/* harmony export */   avatarTemplate: () => (/* reexport safe */ _avatar_index_js__WEBPACK_IMPORTED_MODULE_4__.avatarTemplate),
/* harmony export */   badgeTemplate: () => (/* reexport safe */ _badge_index_js__WEBPACK_IMPORTED_MODULE_5__.badgeTemplate),
/* harmony export */   breadcrumbItemTemplate: () => (/* reexport safe */ _breadcrumb_item_index_js__WEBPACK_IMPORTED_MODULE_6__.breadcrumbItemTemplate),
/* harmony export */   breadcrumbTemplate: () => (/* reexport safe */ _breadcrumb_index_js__WEBPACK_IMPORTED_MODULE_7__.breadcrumbTemplate),
/* harmony export */   buttonTemplate: () => (/* reexport safe */ _button_index_js__WEBPACK_IMPORTED_MODULE_8__.buttonTemplate),
/* harmony export */   calendarCellTemplate: () => (/* reexport safe */ _calendar_index_js__WEBPACK_IMPORTED_MODULE_9__.calendarCellTemplate),
/* harmony export */   calendarRowTemplate: () => (/* reexport safe */ _calendar_index_js__WEBPACK_IMPORTED_MODULE_9__.calendarRowTemplate),
/* harmony export */   calendarTemplate: () => (/* reexport safe */ _calendar_index_js__WEBPACK_IMPORTED_MODULE_9__.calendarTemplate),
/* harmony export */   calendarWeekdayTemplate: () => (/* reexport safe */ _calendar_index_js__WEBPACK_IMPORTED_MODULE_9__.calendarWeekdayTemplate),
/* harmony export */   cardTemplate: () => (/* reexport safe */ _card_index_js__WEBPACK_IMPORTED_MODULE_10__.cardTemplate),
/* harmony export */   checkboxTemplate: () => (/* reexport safe */ _checkbox_index_js__WEBPACK_IMPORTED_MODULE_11__.checkboxTemplate),
/* harmony export */   comboboxTemplate: () => (/* reexport safe */ _combobox_index_js__WEBPACK_IMPORTED_MODULE_12__.comboboxTemplate),
/* harmony export */   composedContains: () => (/* reexport safe */ _utilities_index_js__WEBPACK_IMPORTED_MODULE_51__.composedContains),
/* harmony export */   composedParent: () => (/* reexport safe */ _utilities_index_js__WEBPACK_IMPORTED_MODULE_51__.composedParent),
/* harmony export */   darkModeStylesheetBehavior: () => (/* reexport safe */ _utilities_index_js__WEBPACK_IMPORTED_MODULE_51__.darkModeStylesheetBehavior),
/* harmony export */   dataGridCellTemplate: () => (/* reexport safe */ _data_grid_index_js__WEBPACK_IMPORTED_MODULE_13__.dataGridCellTemplate),
/* harmony export */   dataGridRowTemplate: () => (/* reexport safe */ _data_grid_index_js__WEBPACK_IMPORTED_MODULE_13__.dataGridRowTemplate),
/* harmony export */   dataGridTemplate: () => (/* reexport safe */ _data_grid_index_js__WEBPACK_IMPORTED_MODULE_13__.dataGridTemplate),
/* harmony export */   dialogTemplate: () => (/* reexport safe */ _dialog_index_js__WEBPACK_IMPORTED_MODULE_17__.dialogTemplate),
/* harmony export */   disabledCursor: () => (/* reexport safe */ _utilities_index_js__WEBPACK_IMPORTED_MODULE_51__.disabledCursor),
/* harmony export */   disclosureTemplate: () => (/* reexport safe */ _disclosure_index_js__WEBPACK_IMPORTED_MODULE_19__.disclosureTemplate),
/* harmony export */   display: () => (/* reexport safe */ _utilities_index_js__WEBPACK_IMPORTED_MODULE_51__.display),
/* harmony export */   dividerTemplate: () => (/* reexport safe */ _divider_index_js__WEBPACK_IMPORTED_MODULE_20__.dividerTemplate),
/* harmony export */   endSlotTemplate: () => (/* reexport safe */ _patterns_index_js__WEBPACK_IMPORTED_MODULE_30__.endSlotTemplate),
/* harmony export */   endTemplate: () => (/* reexport safe */ _patterns_index_js__WEBPACK_IMPORTED_MODULE_30__.endTemplate),
/* harmony export */   flipperTemplate: () => (/* reexport safe */ _flipper_index_js__WEBPACK_IMPORTED_MODULE_21__.flipperTemplate),
/* harmony export */   focusVisible: () => (/* reexport safe */ _utilities_index_js__WEBPACK_IMPORTED_MODULE_51__.focusVisible),
/* harmony export */   forcedColorsStylesheetBehavior: () => (/* reexport safe */ _utilities_index_js__WEBPACK_IMPORTED_MODULE_51__.forcedColorsStylesheetBehavior),
/* harmony export */   getDirection: () => (/* reexport safe */ _utilities_index_js__WEBPACK_IMPORTED_MODULE_51__.getDirection),
/* harmony export */   hidden: () => (/* reexport safe */ _utilities_index_js__WEBPACK_IMPORTED_MODULE_51__.hidden),
/* harmony export */   horizontalScrollTemplate: () => (/* reexport safe */ _horizontal_scroll_index_js__WEBPACK_IMPORTED_MODULE_35__.horizontalScrollTemplate),
/* harmony export */   ignore: () => (/* reexport safe */ _di_index_js__WEBPACK_IMPORTED_MODULE_16__.ignore),
/* harmony export */   inject: () => (/* reexport safe */ _di_index_js__WEBPACK_IMPORTED_MODULE_16__.inject),
/* harmony export */   interactiveCalendarGridTemplate: () => (/* reexport safe */ _calendar_index_js__WEBPACK_IMPORTED_MODULE_9__.interactiveCalendarGridTemplate),
/* harmony export */   isListboxOption: () => (/* reexport safe */ _listbox_option_index_js__WEBPACK_IMPORTED_MODULE_24__.isListboxOption),
/* harmony export */   isTreeItemElement: () => (/* reexport safe */ _tree_item_index_js__WEBPACK_IMPORTED_MODULE_49__.isTreeItemElement),
/* harmony export */   lazy: () => (/* reexport safe */ _di_index_js__WEBPACK_IMPORTED_MODULE_16__.lazy),
/* harmony export */   lightModeStylesheetBehavior: () => (/* reexport safe */ _utilities_index_js__WEBPACK_IMPORTED_MODULE_51__.lightModeStylesheetBehavior),
/* harmony export */   listboxOptionTemplate: () => (/* reexport safe */ _listbox_option_index_js__WEBPACK_IMPORTED_MODULE_24__.listboxOptionTemplate),
/* harmony export */   listboxTemplate: () => (/* reexport safe */ _listbox_index_js__WEBPACK_IMPORTED_MODULE_25__.listboxTemplate),
/* harmony export */   menuItemTemplate: () => (/* reexport safe */ _menu_item_index_js__WEBPACK_IMPORTED_MODULE_27__.menuItemTemplate),
/* harmony export */   menuTemplate: () => (/* reexport safe */ _menu_index_js__WEBPACK_IMPORTED_MODULE_28__.menuTemplate),
/* harmony export */   newInstanceForScope: () => (/* reexport safe */ _di_index_js__WEBPACK_IMPORTED_MODULE_16__.newInstanceForScope),
/* harmony export */   newInstanceOf: () => (/* reexport safe */ _di_index_js__WEBPACK_IMPORTED_MODULE_16__.newInstanceOf),
/* harmony export */   noninteractiveCalendarTemplate: () => (/* reexport safe */ _calendar_index_js__WEBPACK_IMPORTED_MODULE_9__.noninteractiveCalendarTemplate),
/* harmony export */   numberFieldTemplate: () => (/* reexport safe */ _number_field_index_js__WEBPACK_IMPORTED_MODULE_29__.numberFieldTemplate),
/* harmony export */   optional: () => (/* reexport safe */ _di_index_js__WEBPACK_IMPORTED_MODULE_16__.optional),
/* harmony export */   pickerListItemTemplate: () => (/* reexport safe */ _picker_index_js__WEBPACK_IMPORTED_MODULE_26__.pickerListItemTemplate),
/* harmony export */   pickerListTemplate: () => (/* reexport safe */ _picker_index_js__WEBPACK_IMPORTED_MODULE_26__.pickerListTemplate),
/* harmony export */   pickerMenuOptionTemplate: () => (/* reexport safe */ _picker_index_js__WEBPACK_IMPORTED_MODULE_26__.pickerMenuOptionTemplate),
/* harmony export */   pickerMenuTemplate: () => (/* reexport safe */ _picker_index_js__WEBPACK_IMPORTED_MODULE_26__.pickerMenuTemplate),
/* harmony export */   pickerTemplate: () => (/* reexport safe */ _picker_index_js__WEBPACK_IMPORTED_MODULE_26__.pickerTemplate),
/* harmony export */   progressRingTemplate: () => (/* reexport safe */ _progress_ring_index_js__WEBPACK_IMPORTED_MODULE_31__.progressRingTemplate),
/* harmony export */   progressTemplate: () => (/* reexport safe */ _progress_index_js__WEBPACK_IMPORTED_MODULE_32__.progressTemplate),
/* harmony export */   radioGroupTemplate: () => (/* reexport safe */ _radio_group_index_js__WEBPACK_IMPORTED_MODULE_33__.radioGroupTemplate),
/* harmony export */   radioTemplate: () => (/* reexport safe */ _radio_index_js__WEBPACK_IMPORTED_MODULE_34__.radioTemplate),
/* harmony export */   reflectAttributes: () => (/* reexport safe */ _directives_reflect_attributes_js__WEBPACK_IMPORTED_MODULE_18__.reflectAttributes),
/* harmony export */   roleForMenuItem: () => (/* reexport safe */ _menu_item_index_js__WEBPACK_IMPORTED_MODULE_27__.roleForMenuItem),
/* harmony export */   searchTemplate: () => (/* reexport safe */ _search_index_js__WEBPACK_IMPORTED_MODULE_36__.searchTemplate),
/* harmony export */   selectTemplate: () => (/* reexport safe */ _select_index_js__WEBPACK_IMPORTED_MODULE_37__.selectTemplate),
/* harmony export */   singleton: () => (/* reexport safe */ _di_index_js__WEBPACK_IMPORTED_MODULE_16__.singleton),
/* harmony export */   skeletonTemplate: () => (/* reexport safe */ _skeleton_index_js__WEBPACK_IMPORTED_MODULE_38__.skeletonTemplate),
/* harmony export */   sliderLabelTemplate: () => (/* reexport safe */ _slider_label_index_js__WEBPACK_IMPORTED_MODULE_39__.sliderLabelTemplate),
/* harmony export */   sliderTemplate: () => (/* reexport safe */ _slider_index_js__WEBPACK_IMPORTED_MODULE_40__.sliderTemplate),
/* harmony export */   startSlotTemplate: () => (/* reexport safe */ _patterns_index_js__WEBPACK_IMPORTED_MODULE_30__.startSlotTemplate),
/* harmony export */   startTemplate: () => (/* reexport safe */ _patterns_index_js__WEBPACK_IMPORTED_MODULE_30__.startTemplate),
/* harmony export */   supportsElementInternals: () => (/* reexport safe */ _form_associated_index_js__WEBPACK_IMPORTED_MODULE_22__.supportsElementInternals),
/* harmony export */   switchTemplate: () => (/* reexport safe */ _switch_index_js__WEBPACK_IMPORTED_MODULE_41__.switchTemplate),
/* harmony export */   tabPanelTemplate: () => (/* reexport safe */ _tab_panel_index_js__WEBPACK_IMPORTED_MODULE_42__.tabPanelTemplate),
/* harmony export */   tabTemplate: () => (/* reexport safe */ _tab_index_js__WEBPACK_IMPORTED_MODULE_43__.tabTemplate),
/* harmony export */   tabsTemplate: () => (/* reexport safe */ _tabs_index_js__WEBPACK_IMPORTED_MODULE_44__.tabsTemplate),
/* harmony export */   textAreaTemplate: () => (/* reexport safe */ _text_area_index_js__WEBPACK_IMPORTED_MODULE_45__.textAreaTemplate),
/* harmony export */   textFieldTemplate: () => (/* reexport safe */ _text_field_index_js__WEBPACK_IMPORTED_MODULE_46__.textFieldTemplate),
/* harmony export */   toolbarTemplate: () => (/* reexport safe */ _toolbar_index_js__WEBPACK_IMPORTED_MODULE_47__.toolbarTemplate),
/* harmony export */   tooltipTemplate: () => (/* reexport safe */ _tooltip_index_js__WEBPACK_IMPORTED_MODULE_48__.tooltipTemplate),
/* harmony export */   transient: () => (/* reexport safe */ _di_index_js__WEBPACK_IMPORTED_MODULE_16__.transient),
/* harmony export */   treeItemTemplate: () => (/* reexport safe */ _tree_item_index_js__WEBPACK_IMPORTED_MODULE_49__.treeItemTemplate),
/* harmony export */   treeViewTemplate: () => (/* reexport safe */ _tree_view_index_js__WEBPACK_IMPORTED_MODULE_50__.treeViewTemplate),
/* harmony export */   validateKey: () => (/* reexport safe */ _di_index_js__WEBPACK_IMPORTED_MODULE_16__.validateKey),
/* harmony export */   whitespaceFilter: () => (/* reexport safe */ _utilities_index_js__WEBPACK_IMPORTED_MODULE_51__.whitespaceFilter)
/* harmony export */ });
/* harmony import */ var _accordion_item_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./accordion-item/index.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/accordion-item/index.js");
/* harmony import */ var _accordion_index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./accordion/index.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/accordion/index.js");
/* harmony import */ var _anchor_index_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./anchor/index.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/anchor/index.js");
/* harmony import */ var _anchored_region_index_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./anchored-region/index.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/anchored-region/index.js");
/* harmony import */ var _avatar_index_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./avatar/index.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/avatar/index.js");
/* harmony import */ var _badge_index_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./badge/index.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/badge/index.js");
/* harmony import */ var _breadcrumb_item_index_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./breadcrumb-item/index.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/breadcrumb-item/index.js");
/* harmony import */ var _breadcrumb_index_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./breadcrumb/index.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/breadcrumb/index.js");
/* harmony import */ var _button_index_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./button/index.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/button/index.js");
/* harmony import */ var _calendar_index_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./calendar/index.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/calendar/index.js");
/* harmony import */ var _card_index_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./card/index.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/card/index.js");
/* harmony import */ var _checkbox_index_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./checkbox/index.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/checkbox/index.js");
/* harmony import */ var _combobox_index_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./combobox/index.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/combobox/index.js");
/* harmony import */ var _data_grid_index_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./data-grid/index.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/data-grid/index.js");
/* harmony import */ var _design_system_index_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./design-system/index.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/design-system/index.js");
/* harmony import */ var _design_token_design_token_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./design-token/design-token.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/design-token/design-token.js");
/* harmony import */ var _di_index_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./di/index.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/di/index.js");
/* harmony import */ var _dialog_index_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./dialog/index.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/dialog/index.js");
/* harmony import */ var _directives_reflect_attributes_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./directives/reflect-attributes.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/directives/reflect-attributes.js");
/* harmony import */ var _disclosure_index_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./disclosure/index.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/disclosure/index.js");
/* harmony import */ var _divider_index_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./divider/index.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/divider/index.js");
/* harmony import */ var _flipper_index_js__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ./flipper/index.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/flipper/index.js");
/* harmony import */ var _form_associated_index_js__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ./form-associated/index.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/form-associated/index.js");
/* harmony import */ var _foundation_element_index_js__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ./foundation-element/index.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/foundation-element/index.js");
/* harmony import */ var _listbox_option_index_js__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ./listbox-option/index.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/listbox-option/index.js");
/* harmony import */ var _listbox_index_js__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ./listbox/index.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/listbox/index.js");
/* harmony import */ var _picker_index_js__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ./picker/index.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/picker/index.js");
/* harmony import */ var _menu_item_index_js__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ./menu-item/index.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/menu-item/index.js");
/* harmony import */ var _menu_index_js__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ./menu/index.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/menu/index.js");
/* harmony import */ var _number_field_index_js__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! ./number-field/index.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/number-field/index.js");
/* harmony import */ var _patterns_index_js__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! ./patterns/index.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/patterns/index.js");
/* harmony import */ var _progress_ring_index_js__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! ./progress-ring/index.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/progress-ring/index.js");
/* harmony import */ var _progress_index_js__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(/*! ./progress/index.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/progress/index.js");
/* harmony import */ var _radio_group_index_js__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(/*! ./radio-group/index.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/radio-group/index.js");
/* harmony import */ var _radio_index_js__WEBPACK_IMPORTED_MODULE_34__ = __webpack_require__(/*! ./radio/index.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/radio/index.js");
/* harmony import */ var _horizontal_scroll_index_js__WEBPACK_IMPORTED_MODULE_35__ = __webpack_require__(/*! ./horizontal-scroll/index.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/horizontal-scroll/index.js");
/* harmony import */ var _search_index_js__WEBPACK_IMPORTED_MODULE_36__ = __webpack_require__(/*! ./search/index.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/search/index.js");
/* harmony import */ var _select_index_js__WEBPACK_IMPORTED_MODULE_37__ = __webpack_require__(/*! ./select/index.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/select/index.js");
/* harmony import */ var _skeleton_index_js__WEBPACK_IMPORTED_MODULE_38__ = __webpack_require__(/*! ./skeleton/index.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/skeleton/index.js");
/* harmony import */ var _slider_label_index_js__WEBPACK_IMPORTED_MODULE_39__ = __webpack_require__(/*! ./slider-label/index.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/slider-label/index.js");
/* harmony import */ var _slider_index_js__WEBPACK_IMPORTED_MODULE_40__ = __webpack_require__(/*! ./slider/index.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/slider/index.js");
/* harmony import */ var _switch_index_js__WEBPACK_IMPORTED_MODULE_41__ = __webpack_require__(/*! ./switch/index.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/switch/index.js");
/* harmony import */ var _tab_panel_index_js__WEBPACK_IMPORTED_MODULE_42__ = __webpack_require__(/*! ./tab-panel/index.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/tab-panel/index.js");
/* harmony import */ var _tab_index_js__WEBPACK_IMPORTED_MODULE_43__ = __webpack_require__(/*! ./tab/index.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/tab/index.js");
/* harmony import */ var _tabs_index_js__WEBPACK_IMPORTED_MODULE_44__ = __webpack_require__(/*! ./tabs/index.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/tabs/index.js");
/* harmony import */ var _text_area_index_js__WEBPACK_IMPORTED_MODULE_45__ = __webpack_require__(/*! ./text-area/index.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/text-area/index.js");
/* harmony import */ var _text_field_index_js__WEBPACK_IMPORTED_MODULE_46__ = __webpack_require__(/*! ./text-field/index.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/text-field/index.js");
/* harmony import */ var _toolbar_index_js__WEBPACK_IMPORTED_MODULE_47__ = __webpack_require__(/*! ./toolbar/index.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/toolbar/index.js");
/* harmony import */ var _tooltip_index_js__WEBPACK_IMPORTED_MODULE_48__ = __webpack_require__(/*! ./tooltip/index.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/tooltip/index.js");
/* harmony import */ var _tree_item_index_js__WEBPACK_IMPORTED_MODULE_49__ = __webpack_require__(/*! ./tree-item/index.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/tree-item/index.js");
/* harmony import */ var _tree_view_index_js__WEBPACK_IMPORTED_MODULE_50__ = __webpack_require__(/*! ./tree-view/index.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/tree-view/index.js");
/* harmony import */ var _utilities_index_js__WEBPACK_IMPORTED_MODULE_51__ = __webpack_require__(/*! ./utilities/index.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/utilities/index.js");




















































// export our utilities



/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/listbox-option/index.js":
/*!**********************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/listbox-option/index.js ***!
  \**********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DelegatesARIAListboxOption: () => (/* reexport safe */ _listbox_option_js__WEBPACK_IMPORTED_MODULE_0__.DelegatesARIAListboxOption),
/* harmony export */   ListboxOption: () => (/* reexport safe */ _listbox_option_js__WEBPACK_IMPORTED_MODULE_0__.ListboxOption),
/* harmony export */   isListboxOption: () => (/* reexport safe */ _listbox_option_js__WEBPACK_IMPORTED_MODULE_0__.isListboxOption),
/* harmony export */   listboxOptionTemplate: () => (/* reexport safe */ _listbox_option_template_js__WEBPACK_IMPORTED_MODULE_1__.listboxOptionTemplate)
/* harmony export */ });
/* harmony import */ var _listbox_option_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./listbox-option.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/listbox-option/listbox-option.js");
/* harmony import */ var _listbox_option_template_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./listbox-option.template.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/listbox-option/listbox-option.template.js");




/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/listbox-option/listbox-option.js":
/*!*******************************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/listbox-option/listbox-option.js ***!
  \*******************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DelegatesARIAListboxOption: () => (/* binding */ DelegatesARIAListboxOption),
/* harmony export */   ListboxOption: () => (/* binding */ ListboxOption),
/* harmony export */   isListboxOption: () => (/* binding */ isListboxOption)
/* harmony export */ });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! tslib */ "./node_modules/@microsoft/fast-foundation/node_modules/tslib/tslib.es6.js");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @microsoft/fast-element */ "webpack/sharing/consume/default/@microsoft/fast-element/@microsoft/fast-element");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @microsoft/fast-web-utilities */ "./node_modules/@microsoft/fast-web-utilities/dist/dom.js");
/* harmony import */ var _foundation_element_foundation_element_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../foundation-element/foundation-element.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/foundation-element/foundation-element.js");
/* harmony import */ var _patterns_aria_global_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../patterns/aria-global.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/patterns/aria-global.js");
/* harmony import */ var _patterns_start_end_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../patterns/start-end.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/patterns/start-end.js");
/* harmony import */ var _utilities_apply_mixins_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utilities/apply-mixins.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/utilities/apply-mixins.js");







/**
 * Determines if the element is a {@link (ListboxOption:class)}
 *
 * @param element - the element to test.
 * @public
 */
function isListboxOption(el) {
    return ((0,_microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_1__.isHTMLElement)(el) &&
        (el.getAttribute("role") === "option" ||
            el instanceof HTMLOptionElement));
}
/**
 * An Option Custom HTML Element.
 * Implements {@link https://www.w3.org/TR/wai-aria-1.1/#option | ARIA option }.
 *
 * @slot start - Content which can be provided before the listbox option content
 * @slot end - Content which can be provided after the listbox option content
 * @slot - The default slot for listbox option content
 * @csspart content - Wraps the listbox option content
 *
 * @public
 */
class ListboxOption extends _foundation_element_foundation_element_js__WEBPACK_IMPORTED_MODULE_2__.FoundationElement {
    constructor(text, value, defaultSelected, selected) {
        super();
        /**
         * The defaultSelected state of the option.
         * @public
         */
        this.defaultSelected = false;
        /**
         * Tracks whether the "selected" property has been changed.
         * @internal
         */
        this.dirtySelected = false;
        /**
         * The checked state of the control.
         *
         * @public
         */
        this.selected = this.defaultSelected;
        /**
         * Track whether the value has been changed from the initial value
         */
        this.dirtyValue = false;
        if (text) {
            this.textContent = text;
        }
        if (value) {
            this.initialValue = value;
        }
        if (defaultSelected) {
            this.defaultSelected = defaultSelected;
        }
        if (selected) {
            this.selected = selected;
        }
        this.proxy = new Option(`${this.textContent}`, this.initialValue, this.defaultSelected, this.selected);
        this.proxy.disabled = this.disabled;
    }
    /**
     * Updates the ariaChecked property when the checked property changes.
     *
     * @param prev - the previous checked value
     * @param next - the current checked value
     *
     * @public
     */
    checkedChanged(prev, next) {
        if (typeof next === "boolean") {
            this.ariaChecked = next ? "true" : "false";
            return;
        }
        this.ariaChecked = null;
    }
    /**
     * Updates the proxy's text content when the default slot changes.
     * @param prev - the previous content value
     * @param next - the current content value
     *
     * @internal
     */
    contentChanged(prev, next) {
        if (this.proxy instanceof HTMLOptionElement) {
            this.proxy.textContent = this.textContent;
        }
        this.$emit("contentchange", null, { bubbles: true });
    }
    defaultSelectedChanged() {
        if (!this.dirtySelected) {
            this.selected = this.defaultSelected;
            if (this.proxy instanceof HTMLOptionElement) {
                this.proxy.selected = this.defaultSelected;
            }
        }
    }
    disabledChanged(prev, next) {
        this.ariaDisabled = this.disabled ? "true" : "false";
        if (this.proxy instanceof HTMLOptionElement) {
            this.proxy.disabled = this.disabled;
        }
    }
    selectedAttributeChanged() {
        this.defaultSelected = this.selectedAttribute;
        if (this.proxy instanceof HTMLOptionElement) {
            this.proxy.defaultSelected = this.defaultSelected;
        }
    }
    selectedChanged() {
        this.ariaSelected = this.selected ? "true" : "false";
        if (!this.dirtySelected) {
            this.dirtySelected = true;
        }
        if (this.proxy instanceof HTMLOptionElement) {
            this.proxy.selected = this.selected;
        }
    }
    initialValueChanged(previous, next) {
        // If the value is clean and the component is connected to the DOM
        // then set value equal to the attribute value.
        if (!this.dirtyValue) {
            this.value = this.initialValue;
            this.dirtyValue = false;
        }
    }
    get label() {
        var _a;
        return (_a = this.value) !== null && _a !== void 0 ? _a : this.text;
    }
    get text() {
        var _a, _b;
        return (_b = (_a = this.textContent) === null || _a === void 0 ? void 0 : _a.replace(/\s+/g, " ").trim()) !== null && _b !== void 0 ? _b : "";
    }
    set value(next) {
        const newValue = `${next !== null && next !== void 0 ? next : ""}`;
        this._value = newValue;
        this.dirtyValue = true;
        if (this.proxy instanceof HTMLOptionElement) {
            this.proxy.value = newValue;
        }
        _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.Observable.notify(this, "value");
    }
    get value() {
        var _a;
        _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.Observable.track(this, "value");
        return (_a = this._value) !== null && _a !== void 0 ? _a : this.text;
    }
    get form() {
        return this.proxy ? this.proxy.form : null;
    }
}
(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.observable
], ListboxOption.prototype, "checked", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.observable
], ListboxOption.prototype, "content", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.observable
], ListboxOption.prototype, "defaultSelected", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ mode: "boolean" })
], ListboxOption.prototype, "disabled", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ attribute: "selected", mode: "boolean" })
], ListboxOption.prototype, "selectedAttribute", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.observable
], ListboxOption.prototype, "selected", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ attribute: "value", mode: "fromView" })
], ListboxOption.prototype, "initialValue", void 0);
/**
 * States and properties relating to the ARIA `option` role.
 *
 * @public
 */
class DelegatesARIAListboxOption {
}
(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.observable
], DelegatesARIAListboxOption.prototype, "ariaChecked", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.observable
], DelegatesARIAListboxOption.prototype, "ariaPosInSet", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.observable
], DelegatesARIAListboxOption.prototype, "ariaSelected", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.observable
], DelegatesARIAListboxOption.prototype, "ariaSetSize", void 0);
(0,_utilities_apply_mixins_js__WEBPACK_IMPORTED_MODULE_4__.applyMixins)(DelegatesARIAListboxOption, _patterns_aria_global_js__WEBPACK_IMPORTED_MODULE_5__.ARIAGlobalStatesAndProperties);
(0,_utilities_apply_mixins_js__WEBPACK_IMPORTED_MODULE_4__.applyMixins)(ListboxOption, _patterns_start_end_js__WEBPACK_IMPORTED_MODULE_6__.StartEnd, DelegatesARIAListboxOption);


/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/listbox-option/listbox-option.template.js":
/*!****************************************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/listbox-option/listbox-option.template.js ***!
  \****************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   listboxOptionTemplate: () => (/* binding */ listboxOptionTemplate)
/* harmony export */ });
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @microsoft/fast-element */ "webpack/sharing/consume/default/@microsoft/fast-element/@microsoft/fast-element");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _patterns_start_end_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../patterns/start-end.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/patterns/start-end.js");


/**
 * The template for the {@link @microsoft/fast-foundation#(ListboxOption:class)} component.
 * @public
 */
const listboxOptionTemplate = (context, definition) => (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.html) `
    <template
        aria-checked="${x => x.ariaChecked}"
        aria-disabled="${x => x.ariaDisabled}"
        aria-posinset="${x => x.ariaPosInSet}"
        aria-selected="${x => x.ariaSelected}"
        aria-setsize="${x => x.ariaSetSize}"
        class="${x => [x.checked && "checked", x.selected && "selected", x.disabled && "disabled"]
    .filter(Boolean)
    .join(" ")}"
        role="option"
    >
        ${(0,_patterns_start_end_js__WEBPACK_IMPORTED_MODULE_1__.startSlotTemplate)(context, definition)}
        <span class="content" part="content">
            <slot ${(0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.slotted)("content")}></slot>
        </span>
        ${(0,_patterns_start_end_js__WEBPACK_IMPORTED_MODULE_1__.endSlotTemplate)(context, definition)}
    </template>
`;


/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/listbox/index.js":
/*!***************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/listbox/index.js ***!
  \***************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DelegatesARIAListbox: () => (/* reexport safe */ _listbox_js__WEBPACK_IMPORTED_MODULE_0__.DelegatesARIAListbox),
/* harmony export */   Listbox: () => (/* reexport safe */ _listbox_js__WEBPACK_IMPORTED_MODULE_0__.Listbox),
/* harmony export */   ListboxElement: () => (/* reexport safe */ _listbox_element_js__WEBPACK_IMPORTED_MODULE_1__.ListboxElement),
/* harmony export */   listboxTemplate: () => (/* reexport safe */ _listbox_template_js__WEBPACK_IMPORTED_MODULE_2__.listboxTemplate)
/* harmony export */ });
/* harmony import */ var _listbox_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./listbox.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/listbox/listbox.js");
/* harmony import */ var _listbox_element_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./listbox.element.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/listbox/listbox.element.js");
/* harmony import */ var _listbox_template_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./listbox.template.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/listbox/listbox.template.js");





/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/listbox/listbox.element.js":
/*!*************************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/listbox/listbox.element.js ***!
  \*************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ListboxElement: () => (/* binding */ ListboxElement)
/* harmony export */ });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! tslib */ "./node_modules/@microsoft/fast-foundation/node_modules/tslib/tslib.es6.js");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @microsoft/fast-element */ "webpack/sharing/consume/default/@microsoft/fast-element/@microsoft/fast-element");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @microsoft/fast-web-utilities */ "./node_modules/@microsoft/fast-web-utilities/dist/numbers.js");
/* harmony import */ var _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @microsoft/fast-web-utilities */ "./node_modules/@microsoft/fast-web-utilities/dist/key-codes.js");
/* harmony import */ var _listbox_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./listbox.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/listbox/listbox.js");




/**
 * A Listbox Custom HTML Element.
 * Implements the {@link https://w3c.github.io/aria/#listbox | ARIA listbox }.
 *
 * @public
 */
class ListboxElement extends _listbox_js__WEBPACK_IMPORTED_MODULE_1__.Listbox {
    constructor() {
        super(...arguments);
        /**
         * The index of the most recently checked option.
         *
         * @internal
         * @remarks
         * Multiple-selection mode only.
         */
        this.activeIndex = -1;
        /**
         * The start index when checking a range of options.
         *
         * @internal
         */
        this.rangeStartIndex = -1;
    }
    /**
     * Returns the last checked option.
     *
     * @internal
     */
    get activeOption() {
        return this.options[this.activeIndex];
    }
    /**
     * Returns the list of checked options.
     *
     * @internal
     */
    get checkedOptions() {
        var _a;
        return (_a = this.options) === null || _a === void 0 ? void 0 : _a.filter(o => o.checked);
    }
    /**
     * Returns the index of the first selected option.
     *
     * @internal
     */
    get firstSelectedOptionIndex() {
        return this.options.indexOf(this.firstSelectedOption);
    }
    /**
     * Updates the `ariaActiveDescendant` property when the active index changes.
     *
     * @param prev - the previous active index
     * @param next - the next active index
     *
     * @internal
     */
    activeIndexChanged(prev, next) {
        var _a, _b;
        this.ariaActiveDescendant = (_b = (_a = this.options[next]) === null || _a === void 0 ? void 0 : _a.id) !== null && _b !== void 0 ? _b : "";
        this.focusAndScrollOptionIntoView();
    }
    /**
     * Toggles the checked state for the currently active option.
     *
     * @remarks
     * Multiple-selection mode only.
     *
     * @internal
     */
    checkActiveIndex() {
        if (!this.multiple) {
            return;
        }
        const activeItem = this.activeOption;
        if (activeItem) {
            activeItem.checked = true;
        }
    }
    /**
     * Sets the active index to the first option and marks it as checked.
     *
     * @remarks
     * Multi-selection mode only.
     *
     * @param preserveChecked - mark all options unchecked before changing the active index
     *
     * @internal
     */
    checkFirstOption(preserveChecked = false) {
        if (preserveChecked) {
            if (this.rangeStartIndex === -1) {
                this.rangeStartIndex = this.activeIndex + 1;
            }
            this.options.forEach((o, i) => {
                o.checked = (0,_microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_2__.inRange)(i, this.rangeStartIndex);
            });
        }
        else {
            this.uncheckAllOptions();
        }
        this.activeIndex = 0;
        this.checkActiveIndex();
    }
    /**
     * Decrements the active index and sets the matching option as checked.
     *
     * @remarks
     * Multi-selection mode only.
     *
     * @param preserveChecked - mark all options unchecked before changing the active index
     *
     * @internal
     */
    checkLastOption(preserveChecked = false) {
        if (preserveChecked) {
            if (this.rangeStartIndex === -1) {
                this.rangeStartIndex = this.activeIndex;
            }
            this.options.forEach((o, i) => {
                o.checked = (0,_microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_2__.inRange)(i, this.rangeStartIndex, this.options.length);
            });
        }
        else {
            this.uncheckAllOptions();
        }
        this.activeIndex = this.options.length - 1;
        this.checkActiveIndex();
    }
    /**
     * @override
     * @internal
     */
    connectedCallback() {
        super.connectedCallback();
        this.addEventListener("focusout", this.focusoutHandler);
    }
    /**
     * @override
     * @internal
     */
    disconnectedCallback() {
        this.removeEventListener("focusout", this.focusoutHandler);
        super.disconnectedCallback();
    }
    /**
     * Increments the active index and marks the matching option as checked.
     *
     * @remarks
     * Multiple-selection mode only.
     *
     * @param preserveChecked - mark all options unchecked before changing the active index
     *
     * @internal
     */
    checkNextOption(preserveChecked = false) {
        if (preserveChecked) {
            if (this.rangeStartIndex === -1) {
                this.rangeStartIndex = this.activeIndex;
            }
            this.options.forEach((o, i) => {
                o.checked = (0,_microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_2__.inRange)(i, this.rangeStartIndex, this.activeIndex + 1);
            });
        }
        else {
            this.uncheckAllOptions();
        }
        this.activeIndex += this.activeIndex < this.options.length - 1 ? 1 : 0;
        this.checkActiveIndex();
    }
    /**
     * Decrements the active index and marks the matching option as checked.
     *
     * @remarks
     * Multiple-selection mode only.
     *
     * @param preserveChecked - mark all options unchecked before changing the active index
     *
     * @internal
     */
    checkPreviousOption(preserveChecked = false) {
        if (preserveChecked) {
            if (this.rangeStartIndex === -1) {
                this.rangeStartIndex = this.activeIndex;
            }
            if (this.checkedOptions.length === 1) {
                this.rangeStartIndex += 1;
            }
            this.options.forEach((o, i) => {
                o.checked = (0,_microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_2__.inRange)(i, this.activeIndex, this.rangeStartIndex);
            });
        }
        else {
            this.uncheckAllOptions();
        }
        this.activeIndex -= this.activeIndex > 0 ? 1 : 0;
        this.checkActiveIndex();
    }
    /**
     * Handles click events for listbox options.
     *
     * @param e - the event object
     *
     * @override
     * @internal
     */
    clickHandler(e) {
        var _a;
        if (!this.multiple) {
            return super.clickHandler(e);
        }
        const captured = (_a = e.target) === null || _a === void 0 ? void 0 : _a.closest(`[role=option]`);
        if (!captured || captured.disabled) {
            return;
        }
        this.uncheckAllOptions();
        this.activeIndex = this.options.indexOf(captured);
        this.checkActiveIndex();
        this.toggleSelectedForAllCheckedOptions();
        return true;
    }
    /**
     * @override
     * @internal
     */
    focusAndScrollOptionIntoView() {
        super.focusAndScrollOptionIntoView(this.activeOption);
    }
    /**
     * In multiple-selection mode:
     * If any options are selected, the first selected option is checked when
     * the listbox receives focus. If no options are selected, the first
     * selectable option is checked.
     *
     * @override
     * @internal
     */
    focusinHandler(e) {
        if (!this.multiple) {
            return super.focusinHandler(e);
        }
        if (!this.shouldSkipFocus && e.target === e.currentTarget) {
            this.uncheckAllOptions();
            if (this.activeIndex === -1) {
                this.activeIndex =
                    this.firstSelectedOptionIndex !== -1
                        ? this.firstSelectedOptionIndex
                        : 0;
            }
            this.checkActiveIndex();
            this.setSelectedOptions();
            this.focusAndScrollOptionIntoView();
        }
        this.shouldSkipFocus = false;
    }
    /**
     * Unchecks all options when the listbox loses focus.
     *
     * @internal
     */
    focusoutHandler(e) {
        if (this.multiple) {
            this.uncheckAllOptions();
        }
    }
    /**
     * Handles keydown actions for listbox navigation and typeahead
     *
     * @override
     * @internal
     */
    keydownHandler(e) {
        if (!this.multiple) {
            return super.keydownHandler(e);
        }
        if (this.disabled) {
            return true;
        }
        const { key, shiftKey } = e;
        this.shouldSkipFocus = false;
        switch (key) {
            // Select the first available option
            case _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_3__.keyHome: {
                this.checkFirstOption(shiftKey);
                return;
            }
            // Select the next selectable option
            case _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_3__.keyArrowDown: {
                this.checkNextOption(shiftKey);
                return;
            }
            // Select the previous selectable option
            case _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_3__.keyArrowUp: {
                this.checkPreviousOption(shiftKey);
                return;
            }
            // Select the last available option
            case _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_3__.keyEnd: {
                this.checkLastOption(shiftKey);
                return;
            }
            case _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_3__.keyTab: {
                this.focusAndScrollOptionIntoView();
                return true;
            }
            case _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_3__.keyEscape: {
                this.uncheckAllOptions();
                this.checkActiveIndex();
                return true;
            }
            case _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_3__.keySpace: {
                e.preventDefault();
                if (this.typeAheadExpired) {
                    this.toggleSelectedForAllCheckedOptions();
                    return;
                }
            }
            // Send key to Typeahead handler
            default: {
                if (key.length === 1) {
                    this.handleTypeAhead(`${key}`);
                }
                return true;
            }
        }
    }
    /**
     * Prevents `focusin` events from firing before `click` events when the
     * element is unfocused.
     *
     * @override
     * @internal
     */
    mousedownHandler(e) {
        if (e.offsetX >= 0 && e.offsetX <= this.scrollWidth) {
            return super.mousedownHandler(e);
        }
    }
    /**
     * Switches between single-selection and multi-selection mode.
     *
     * @internal
     */
    multipleChanged(prev, next) {
        var _a;
        this.ariaMultiSelectable = next ? "true" : null;
        (_a = this.options) === null || _a === void 0 ? void 0 : _a.forEach(o => {
            o.checked = next ? false : undefined;
        });
        this.setSelectedOptions();
    }
    /**
     * Sets an option as selected and gives it focus.
     *
     * @override
     * @public
     */
    setSelectedOptions() {
        if (!this.multiple) {
            super.setSelectedOptions();
            return;
        }
        if (this.$fastController.isConnected && this.options) {
            this.selectedOptions = this.options.filter(o => o.selected);
            this.focusAndScrollOptionIntoView();
        }
    }
    /**
     * Ensures the size is a positive integer when the property is updated.
     *
     * @param prev - the previous size value
     * @param next - the current size value
     *
     * @internal
     */
    sizeChanged(prev, next) {
        var _a;
        const size = Math.max(0, parseInt((_a = next === null || next === void 0 ? void 0 : next.toFixed()) !== null && _a !== void 0 ? _a : "", 10));
        if (size !== next) {
            _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.DOM.queueUpdate(() => {
                this.size = size;
            });
        }
    }
    /**
     * Toggles the selected state of the provided options. If any provided items
     * are in an unselected state, all items are set to selected. If every
     * provided item is selected, they are all unselected.
     *
     * @internal
     */
    toggleSelectedForAllCheckedOptions() {
        const enabledCheckedOptions = this.checkedOptions.filter(o => !o.disabled);
        const force = !enabledCheckedOptions.every(o => o.selected);
        enabledCheckedOptions.forEach(o => (o.selected = force));
        this.selectedIndex = this.options.indexOf(enabledCheckedOptions[enabledCheckedOptions.length - 1]);
        this.setSelectedOptions();
    }
    /**
     * @override
     * @internal
     */
    typeaheadBufferChanged(prev, next) {
        if (!this.multiple) {
            super.typeaheadBufferChanged(prev, next);
            return;
        }
        if (this.$fastController.isConnected) {
            const typeaheadMatches = this.getTypeaheadMatches();
            const activeIndex = this.options.indexOf(typeaheadMatches[0]);
            if (activeIndex > -1) {
                this.activeIndex = activeIndex;
                this.uncheckAllOptions();
                this.checkActiveIndex();
            }
            this.typeAheadExpired = false;
        }
    }
    /**
     * Unchecks all options.
     *
     * @remarks
     * Multiple-selection mode only.
     *
     * @param preserveChecked - reset the rangeStartIndex
     *
     * @internal
     */
    uncheckAllOptions(preserveChecked = false) {
        this.options.forEach(o => (o.checked = this.multiple ? false : undefined));
        if (!preserveChecked) {
            this.rangeStartIndex = -1;
        }
    }
}
(0,tslib__WEBPACK_IMPORTED_MODULE_4__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.observable
], ListboxElement.prototype, "activeIndex", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_4__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ mode: "boolean" })
], ListboxElement.prototype, "multiple", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_4__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ converter: _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.nullableNumberConverter })
], ListboxElement.prototype, "size", void 0);


/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/listbox/listbox.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/listbox/listbox.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DelegatesARIAListbox: () => (/* binding */ DelegatesARIAListbox),
/* harmony export */   Listbox: () => (/* binding */ Listbox)
/* harmony export */ });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! tslib */ "./node_modules/@microsoft/fast-foundation/node_modules/tslib/tslib.es6.js");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @microsoft/fast-element */ "webpack/sharing/consume/default/@microsoft/fast-element/@microsoft/fast-element");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @microsoft/fast-web-utilities */ "./node_modules/@microsoft/fast-web-utilities/dist/key-codes.js");
/* harmony import */ var _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @microsoft/fast-web-utilities */ "./node_modules/@microsoft/fast-web-utilities/dist/array.js");
/* harmony import */ var _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @microsoft/fast-web-utilities */ "./node_modules/@microsoft/fast-web-utilities/dist/strings.js");
/* harmony import */ var _foundation_element_foundation_element_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../foundation-element/foundation-element.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/foundation-element/foundation-element.js");
/* harmony import */ var _listbox_option_listbox_option_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../listbox-option/listbox-option.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/listbox-option/listbox-option.js");
/* harmony import */ var _patterns_aria_global_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../patterns/aria-global.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/patterns/aria-global.js");
/* harmony import */ var _utilities_apply_mixins_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../utilities/apply-mixins.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/utilities/apply-mixins.js");







/**
 * A Listbox Custom HTML Element.
 * Implements the {@link https://www.w3.org/TR/wai-aria-1.1/#listbox | ARIA listbox }.
 *
 * @slot - The default slot for the listbox options
 *
 * @public
 */
class Listbox extends _foundation_element_foundation_element_js__WEBPACK_IMPORTED_MODULE_1__.FoundationElement {
    constructor() {
        super(...arguments);
        /**
         * The internal unfiltered list of selectable options.
         *
         * @internal
         */
        this._options = [];
        /**
         * The index of the selected option.
         *
         * @public
         */
        this.selectedIndex = -1;
        /**
         * A collection of the selected options.
         *
         * @public
         */
        this.selectedOptions = [];
        /**
         * A standard `click` event creates a `focus` event before firing, so a
         * `mousedown` event is used to skip that initial focus.
         *
         * @internal
         */
        this.shouldSkipFocus = false;
        /**
         * The current typeahead buffer string.
         *
         * @internal
         */
        this.typeaheadBuffer = "";
        /**
         * Flag for the typeahead timeout expiration.
         *
         * @internal
         */
        this.typeaheadExpired = true;
        /**
         * The timeout ID for the typeahead handler.
         *
         * @internal
         */
        this.typeaheadTimeout = -1;
    }
    /**
     * The first selected option.
     *
     * @internal
     */
    get firstSelectedOption() {
        var _a;
        return (_a = this.selectedOptions[0]) !== null && _a !== void 0 ? _a : null;
    }
    /**
     * Returns true if there is one or more selectable option.
     *
     * @internal
     */
    get hasSelectableOptions() {
        return this.options.length > 0 && !this.options.every(o => o.disabled);
    }
    /**
     * The number of options.
     *
     * @public
     */
    get length() {
        var _a, _b;
        return (_b = (_a = this.options) === null || _a === void 0 ? void 0 : _a.length) !== null && _b !== void 0 ? _b : 0;
    }
    /**
     * The list of options.
     *
     * @public
     */
    get options() {
        _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.Observable.track(this, "options");
        return this._options;
    }
    set options(value) {
        this._options = value;
        _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.Observable.notify(this, "options");
    }
    /**
     * Flag for the typeahead timeout expiration.
     *
     * @deprecated use `Listbox.typeaheadExpired`
     * @internal
     */
    get typeAheadExpired() {
        return this.typeaheadExpired;
    }
    set typeAheadExpired(value) {
        this.typeaheadExpired = value;
    }
    /**
     * Handle click events for listbox options.
     *
     * @internal
     */
    clickHandler(e) {
        const captured = e.target.closest(`option,[role=option]`);
        if (captured && !captured.disabled) {
            this.selectedIndex = this.options.indexOf(captured);
            return true;
        }
    }
    /**
     * Ensures that the provided option is focused and scrolled into view.
     *
     * @param optionToFocus - The option to focus
     * @internal
     */
    focusAndScrollOptionIntoView(optionToFocus = this.firstSelectedOption) {
        // To ensure that the browser handles both `focus()` and `scrollIntoView()`, the
        // timing here needs to guarantee that they happen on different frames. Since this
        // function is typically called from the `openChanged` observer, `DOM.queueUpdate`
        // causes the calls to be grouped into the same frame. To prevent this,
        // `requestAnimationFrame` is used instead of `DOM.queueUpdate`.
        if (this.contains(document.activeElement) && optionToFocus !== null) {
            optionToFocus.focus();
            requestAnimationFrame(() => {
                optionToFocus.scrollIntoView({ block: "nearest" });
            });
        }
    }
    /**
     * Handles `focusin` actions for the component. When the component receives focus,
     * the list of selected options is refreshed and the first selected option is scrolled
     * into view.
     *
     * @internal
     */
    focusinHandler(e) {
        if (!this.shouldSkipFocus && e.target === e.currentTarget) {
            this.setSelectedOptions();
            this.focusAndScrollOptionIntoView();
        }
        this.shouldSkipFocus = false;
    }
    /**
     * Returns the options which match the current typeahead buffer.
     *
     * @internal
     */
    getTypeaheadMatches() {
        const pattern = this.typeaheadBuffer.replace(/[.*+\-?^${}()|[\]\\]/g, "\\$&");
        const re = new RegExp(`^${pattern}`, "gi");
        return this.options.filter((o) => o.text.trim().match(re));
    }
    /**
     * Determines the index of the next option which is selectable, if any.
     *
     * @param prev - the previous selected index
     * @param next - the next index to select
     *
     * @internal
     */
    getSelectableIndex(prev = this.selectedIndex, next) {
        const direction = prev > next ? -1 : prev < next ? 1 : 0;
        const potentialDirection = prev + direction;
        let nextSelectableOption = null;
        switch (direction) {
            case -1: {
                nextSelectableOption = this.options.reduceRight((nextSelectableOption, thisOption, index) => !nextSelectableOption &&
                    !thisOption.disabled &&
                    index < potentialDirection
                    ? thisOption
                    : nextSelectableOption, nextSelectableOption);
                break;
            }
            case 1: {
                nextSelectableOption = this.options.reduce((nextSelectableOption, thisOption, index) => !nextSelectableOption &&
                    !thisOption.disabled &&
                    index > potentialDirection
                    ? thisOption
                    : nextSelectableOption, nextSelectableOption);
                break;
            }
        }
        return this.options.indexOf(nextSelectableOption);
    }
    /**
     * Handles external changes to child options.
     *
     * @param source - the source object
     * @param propertyName - the property
     *
     * @internal
     */
    handleChange(source, propertyName) {
        switch (propertyName) {
            case "selected": {
                if (Listbox.slottedOptionFilter(source)) {
                    this.selectedIndex = this.options.indexOf(source);
                }
                this.setSelectedOptions();
                break;
            }
        }
    }
    /**
     * Moves focus to an option whose label matches characters typed by the user.
     * Consecutive keystrokes are batched into a buffer of search text used
     * to match against the set of options.  If `TYPE_AHEAD_TIMEOUT_MS` passes
     * between consecutive keystrokes, the search restarts.
     *
     * @param key - the key to be evaluated
     *
     * @internal
     */
    handleTypeAhead(key) {
        if (this.typeaheadTimeout) {
            window.clearTimeout(this.typeaheadTimeout);
        }
        this.typeaheadTimeout = window.setTimeout(() => (this.typeaheadExpired = true), Listbox.TYPE_AHEAD_TIMEOUT_MS);
        if (key.length > 1) {
            return;
        }
        this.typeaheadBuffer = `${this.typeaheadExpired ? "" : this.typeaheadBuffer}${key}`;
    }
    /**
     * Handles `keydown` actions for listbox navigation and typeahead.
     *
     * @internal
     */
    keydownHandler(e) {
        if (this.disabled) {
            return true;
        }
        this.shouldSkipFocus = false;
        const key = e.key;
        switch (key) {
            // Select the first available option
            case _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_2__.keyHome: {
                if (!e.shiftKey) {
                    e.preventDefault();
                    this.selectFirstOption();
                }
                break;
            }
            // Select the next selectable option
            case _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_2__.keyArrowDown: {
                if (!e.shiftKey) {
                    e.preventDefault();
                    this.selectNextOption();
                }
                break;
            }
            // Select the previous selectable option
            case _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_2__.keyArrowUp: {
                if (!e.shiftKey) {
                    e.preventDefault();
                    this.selectPreviousOption();
                }
                break;
            }
            // Select the last available option
            case _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_2__.keyEnd: {
                e.preventDefault();
                this.selectLastOption();
                break;
            }
            case _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_2__.keyTab: {
                this.focusAndScrollOptionIntoView();
                return true;
            }
            case _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_2__.keyEnter:
            case _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_2__.keyEscape: {
                return true;
            }
            case _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_2__.keySpace: {
                if (this.typeaheadExpired) {
                    return true;
                }
            }
            // Send key to Typeahead handler
            default: {
                if (key.length === 1) {
                    this.handleTypeAhead(`${key}`);
                }
                return true;
            }
        }
    }
    /**
     * Prevents `focusin` events from firing before `click` events when the
     * element is unfocused.
     *
     * @internal
     */
    mousedownHandler(e) {
        this.shouldSkipFocus = !this.contains(document.activeElement);
        return true;
    }
    /**
     * Switches between single-selection and multi-selection mode.
     *
     * @param prev - the previous value of the `multiple` attribute
     * @param next - the next value of the `multiple` attribute
     *
     * @internal
     */
    multipleChanged(prev, next) {
        this.ariaMultiSelectable = next ? "true" : null;
    }
    /**
     * Updates the list of selected options when the `selectedIndex` changes.
     *
     * @param prev - the previous selected index value
     * @param next - the current selected index value
     *
     * @internal
     */
    selectedIndexChanged(prev, next) {
        var _a;
        if (!this.hasSelectableOptions) {
            this.selectedIndex = -1;
            return;
        }
        if (((_a = this.options[this.selectedIndex]) === null || _a === void 0 ? void 0 : _a.disabled) && typeof prev === "number") {
            const selectableIndex = this.getSelectableIndex(prev, next);
            const newNext = selectableIndex > -1 ? selectableIndex : prev;
            this.selectedIndex = newNext;
            if (next === newNext) {
                this.selectedIndexChanged(next, newNext);
            }
            return;
        }
        this.setSelectedOptions();
    }
    /**
     * Updates the selectedness of each option when the list of selected options changes.
     *
     * @param prev - the previous list of selected options
     * @param next - the current list of selected options
     *
     * @internal
     */
    selectedOptionsChanged(prev, next) {
        var _a;
        const filteredNext = next.filter(Listbox.slottedOptionFilter);
        (_a = this.options) === null || _a === void 0 ? void 0 : _a.forEach(o => {
            const notifier = _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.Observable.getNotifier(o);
            notifier.unsubscribe(this, "selected");
            o.selected = filteredNext.includes(o);
            notifier.subscribe(this, "selected");
        });
    }
    /**
     * Moves focus to the first selectable option.
     *
     * @public
     */
    selectFirstOption() {
        var _a, _b;
        if (!this.disabled) {
            this.selectedIndex = (_b = (_a = this.options) === null || _a === void 0 ? void 0 : _a.findIndex(o => !o.disabled)) !== null && _b !== void 0 ? _b : -1;
        }
    }
    /**
     * Moves focus to the last selectable option.
     *
     * @internal
     */
    selectLastOption() {
        if (!this.disabled) {
            this.selectedIndex = (0,_microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_3__.findLastIndex)(this.options, o => !o.disabled);
        }
    }
    /**
     * Moves focus to the next selectable option.
     *
     * @internal
     */
    selectNextOption() {
        if (!this.disabled && this.selectedIndex < this.options.length - 1) {
            this.selectedIndex += 1;
        }
    }
    /**
     * Moves focus to the previous selectable option.
     *
     * @internal
     */
    selectPreviousOption() {
        if (!this.disabled && this.selectedIndex > 0) {
            this.selectedIndex = this.selectedIndex - 1;
        }
    }
    /**
     * Updates the selected index to match the first selected option.
     *
     * @internal
     */
    setDefaultSelectedOption() {
        var _a, _b;
        this.selectedIndex = (_b = (_a = this.options) === null || _a === void 0 ? void 0 : _a.findIndex(el => el.defaultSelected)) !== null && _b !== void 0 ? _b : -1;
    }
    /**
     * Sets an option as selected and gives it focus.
     *
     * @public
     */
    setSelectedOptions() {
        var _a, _b, _c;
        if ((_a = this.options) === null || _a === void 0 ? void 0 : _a.length) {
            this.selectedOptions = [this.options[this.selectedIndex]];
            this.ariaActiveDescendant = (_c = (_b = this.firstSelectedOption) === null || _b === void 0 ? void 0 : _b.id) !== null && _c !== void 0 ? _c : "";
            this.focusAndScrollOptionIntoView();
        }
    }
    /**
     * Updates the list of options and resets the selected option when the slotted option content changes.
     *
     * @param prev - the previous list of slotted options
     * @param next - the current list of slotted options
     *
     * @internal
     */
    slottedOptionsChanged(prev, next) {
        this.options = next.reduce((options, item) => {
            if ((0,_listbox_option_listbox_option_js__WEBPACK_IMPORTED_MODULE_4__.isListboxOption)(item)) {
                options.push(item);
            }
            return options;
        }, []);
        const setSize = `${this.options.length}`;
        this.options.forEach((option, index) => {
            if (!option.id) {
                option.id = (0,_microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_5__.uniqueId)("option-");
            }
            option.ariaPosInSet = `${index + 1}`;
            option.ariaSetSize = setSize;
        });
        if (this.$fastController.isConnected) {
            this.setSelectedOptions();
            this.setDefaultSelectedOption();
        }
    }
    /**
     * Updates the filtered list of options when the typeahead buffer changes.
     *
     * @param prev - the previous typeahead buffer value
     * @param next - the current typeahead buffer value
     *
     * @internal
     */
    typeaheadBufferChanged(prev, next) {
        if (this.$fastController.isConnected) {
            const typeaheadMatches = this.getTypeaheadMatches();
            if (typeaheadMatches.length) {
                const selectedIndex = this.options.indexOf(typeaheadMatches[0]);
                if (selectedIndex > -1) {
                    this.selectedIndex = selectedIndex;
                }
            }
            this.typeaheadExpired = false;
        }
    }
}
/**
 * A static filter to include only selectable options.
 *
 * @param n - element to filter
 * @public
 */
Listbox.slottedOptionFilter = (n) => (0,_listbox_option_listbox_option_js__WEBPACK_IMPORTED_MODULE_4__.isListboxOption)(n) && !n.hidden;
/**
 * Typeahead timeout in milliseconds.
 *
 * @internal
 */
Listbox.TYPE_AHEAD_TIMEOUT_MS = 1000;
(0,tslib__WEBPACK_IMPORTED_MODULE_6__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ mode: "boolean" })
], Listbox.prototype, "disabled", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_6__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.observable
], Listbox.prototype, "selectedIndex", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_6__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.observable
], Listbox.prototype, "selectedOptions", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_6__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.observable
], Listbox.prototype, "slottedOptions", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_6__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.observable
], Listbox.prototype, "typeaheadBuffer", void 0);
/**
 * Includes ARIA states and properties relating to the ARIA listbox role
 *
 * @public
 */
class DelegatesARIAListbox {
}
(0,tslib__WEBPACK_IMPORTED_MODULE_6__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.observable
], DelegatesARIAListbox.prototype, "ariaActiveDescendant", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_6__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.observable
], DelegatesARIAListbox.prototype, "ariaDisabled", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_6__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.observable
], DelegatesARIAListbox.prototype, "ariaExpanded", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_6__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.observable
], DelegatesARIAListbox.prototype, "ariaMultiSelectable", void 0);
(0,_utilities_apply_mixins_js__WEBPACK_IMPORTED_MODULE_7__.applyMixins)(DelegatesARIAListbox, _patterns_aria_global_js__WEBPACK_IMPORTED_MODULE_8__.ARIAGlobalStatesAndProperties);
(0,_utilities_apply_mixins_js__WEBPACK_IMPORTED_MODULE_7__.applyMixins)(Listbox, DelegatesARIAListbox);


/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/listbox/listbox.template.js":
/*!**************************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/listbox/listbox.template.js ***!
  \**************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   listboxTemplate: () => (/* binding */ listboxTemplate)
/* harmony export */ });
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @microsoft/fast-element */ "webpack/sharing/consume/default/@microsoft/fast-element/@microsoft/fast-element");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _listbox_element_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./listbox.element.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/listbox/listbox.element.js");


/**
 * The template for the {@link @microsoft/fast-foundation#(Listbox:class)} component.
 * @public
 */
const listboxTemplate = (context, definition) => (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.html) `
    <template
        aria-activedescendant="${x => x.ariaActiveDescendant}"
        aria-multiselectable="${x => x.ariaMultiSelectable}"
        class="listbox"
        role="listbox"
        tabindex="${x => (!x.disabled ? "0" : null)}"
        @click="${(x, c) => x.clickHandler(c.event)}"
        @focusin="${(x, c) => x.focusinHandler(c.event)}"
        @keydown="${(x, c) => x.keydownHandler(c.event)}"
        @mousedown="${(x, c) => x.mousedownHandler(c.event)}"
    >
        <slot
            ${(0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.slotted)({
    filter: _listbox_element_js__WEBPACK_IMPORTED_MODULE_1__.ListboxElement.slottedOptionFilter,
    flatten: true,
    property: "slottedOptions",
})}
        ></slot>
    </template>
`;


/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/menu-item/index.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/menu-item/index.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   MenuItem: () => (/* reexport safe */ _menu_item_js__WEBPACK_IMPORTED_MODULE_1__.MenuItem),
/* harmony export */   MenuItemRole: () => (/* reexport safe */ _menu_item_js__WEBPACK_IMPORTED_MODULE_1__.MenuItemRole),
/* harmony export */   menuItemTemplate: () => (/* reexport safe */ _menu_item_template_js__WEBPACK_IMPORTED_MODULE_0__.menuItemTemplate),
/* harmony export */   roleForMenuItem: () => (/* reexport safe */ _menu_item_js__WEBPACK_IMPORTED_MODULE_1__.roleForMenuItem)
/* harmony export */ });
/* harmony import */ var _menu_item_template_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./menu-item.template.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/menu-item/menu-item.template.js");
/* harmony import */ var _menu_item_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./menu-item.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/menu-item/menu-item.js");




/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/menu-item/menu-item.js":
/*!*********************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/menu-item/menu-item.js ***!
  \*********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   MenuItem: () => (/* binding */ MenuItem),
/* harmony export */   MenuItemRole: () => (/* reexport safe */ _menu_item_options_js__WEBPACK_IMPORTED_MODULE_1__.MenuItemRole),
/* harmony export */   roleForMenuItem: () => (/* reexport safe */ _menu_item_options_js__WEBPACK_IMPORTED_MODULE_1__.roleForMenuItem)
/* harmony export */ });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! tslib */ "./node_modules/@microsoft/fast-foundation/node_modules/tslib/tslib.es6.js");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @microsoft/fast-element */ "webpack/sharing/consume/default/@microsoft/fast-element/@microsoft/fast-element");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @microsoft/fast-web-utilities */ "./node_modules/@microsoft/fast-web-utilities/dist/localization.js");
/* harmony import */ var _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @microsoft/fast-web-utilities */ "./node_modules/@microsoft/fast-web-utilities/dist/key-codes.js");
/* harmony import */ var _foundation_element_foundation_element_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../foundation-element/foundation-element.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/foundation-element/foundation-element.js");
/* harmony import */ var _patterns_start_end_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../patterns/start-end.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/patterns/start-end.js");
/* harmony import */ var _utilities_direction_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../utilities/direction.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/utilities/direction.js");
/* harmony import */ var _utilities_apply_mixins_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../utilities/apply-mixins.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/utilities/apply-mixins.js");
/* harmony import */ var _menu_item_options_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./menu-item.options.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/menu-item/menu-item.options.js");









/**
 * A Switch Custom HTML Element.
 * Implements {@link https://www.w3.org/TR/wai-aria-1.1/#menuitem | ARIA menuitem }, {@link https://www.w3.org/TR/wai-aria-1.1/#menuitemcheckbox | ARIA menuitemcheckbox}, or {@link https://www.w3.org/TR/wai-aria-1.1/#menuitemradio | ARIA menuitemradio }.
 *
 * @slot checked-indicator - The checked indicator
 * @slot radio-indicator - The radio indicator
 * @slot start - Content which can be provided before the menu item content
 * @slot end - Content which can be provided after the menu item content
 * @slot - The default slot for menu item content
 * @slot expand-collapse-indicator - The expand/collapse indicator
 * @slot submenu - Used to nest menu's within menu items
 * @csspart input-container - The element representing the visual checked or radio indicator
 * @csspart checkbox - The element wrapping the `menuitemcheckbox` indicator
 * @csspart radio - The element wrapping the `menuitemradio` indicator
 * @csspart content - The element wrapping the menu item content
 * @csspart expand-collapse-glyph-container - The element wrapping the expand collapse element
 * @csspart expand-collapse - The expand/collapse element
 * @csspart submenu-region - The container for the submenu, used for positioning
 * @fires expanded-change - Fires a custom 'expanded-change' event when the expanded state changes
 * @fires change - Fires a custom 'change' event when a non-submenu item with a role of `menuitemcheckbox`, `menuitemradio`, or `menuitem` is invoked
 *
 * @public
 */
class MenuItem extends _foundation_element_foundation_element_js__WEBPACK_IMPORTED_MODULE_2__.FoundationElement {
    constructor() {
        super(...arguments);
        /**
         * The role of the element.
         *
         * @public
         * @remarks
         * HTML Attribute: role
         */
        this.role = _menu_item_options_js__WEBPACK_IMPORTED_MODULE_1__.MenuItemRole.menuitem;
        /**
         * @internal
         */
        this.hasSubmenu = false;
        /**
         * Track current direction to pass to the anchored region
         *
         * @internal
         */
        this.currentDirection = _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_3__.Direction.ltr;
        this.focusSubmenuOnLoad = false;
        /**
         * @internal
         */
        this.handleMenuItemKeyDown = (e) => {
            if (e.defaultPrevented) {
                return false;
            }
            switch (e.key) {
                case _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_4__.keyEnter:
                case _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_4__.keySpace:
                    this.invoke();
                    return false;
                case _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_4__.keyArrowRight:
                    //open/focus on submenu
                    this.expandAndFocus();
                    return false;
                case _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_4__.keyArrowLeft:
                    //close submenu
                    if (this.expanded) {
                        this.expanded = false;
                        this.focus();
                        return false;
                    }
            }
            return true;
        };
        /**
         * @internal
         */
        this.handleMenuItemClick = (e) => {
            if (e.defaultPrevented || this.disabled) {
                return false;
            }
            this.invoke();
            return false;
        };
        /**
         * @internal
         */
        this.submenuLoaded = () => {
            if (!this.focusSubmenuOnLoad) {
                return;
            }
            this.focusSubmenuOnLoad = false;
            if (this.hasSubmenu) {
                this.submenu.focus();
                this.setAttribute("tabindex", "-1");
            }
        };
        /**
         * @internal
         */
        this.handleMouseOver = (e) => {
            if (this.disabled || !this.hasSubmenu || this.expanded) {
                return false;
            }
            this.expanded = true;
            return false;
        };
        /**
         * @internal
         */
        this.handleMouseOut = (e) => {
            if (!this.expanded || this.contains(document.activeElement)) {
                return false;
            }
            this.expanded = false;
            return false;
        };
        /**
         * @internal
         */
        this.expandAndFocus = () => {
            if (!this.hasSubmenu) {
                return;
            }
            this.focusSubmenuOnLoad = true;
            this.expanded = true;
        };
        /**
         * @internal
         */
        this.invoke = () => {
            if (this.disabled) {
                return;
            }
            switch (this.role) {
                case _menu_item_options_js__WEBPACK_IMPORTED_MODULE_1__.MenuItemRole.menuitemcheckbox:
                    this.checked = !this.checked;
                    break;
                case _menu_item_options_js__WEBPACK_IMPORTED_MODULE_1__.MenuItemRole.menuitem:
                    // update submenu
                    this.updateSubmenu();
                    if (this.hasSubmenu) {
                        this.expandAndFocus();
                    }
                    else {
                        this.$emit("change");
                    }
                    break;
                case _menu_item_options_js__WEBPACK_IMPORTED_MODULE_1__.MenuItemRole.menuitemradio:
                    if (!this.checked) {
                        this.checked = true;
                    }
                    break;
            }
        };
        /**
         * Gets the submenu element if any
         *
         * @internal
         */
        this.updateSubmenu = () => {
            this.submenu = this.domChildren().find((element) => {
                return element.getAttribute("role") === "menu";
            });
            this.hasSubmenu = this.submenu === undefined ? false : true;
        };
    }
    expandedChanged(oldValue) {
        if (this.$fastController.isConnected) {
            if (this.submenu === undefined) {
                return;
            }
            if (this.expanded === false) {
                this.submenu.collapseExpandedItem();
            }
            else {
                this.currentDirection = (0,_utilities_direction_js__WEBPACK_IMPORTED_MODULE_5__.getDirection)(this);
            }
            this.$emit("expanded-change", this, { bubbles: false });
        }
    }
    checkedChanged(oldValue, newValue) {
        if (this.$fastController.isConnected) {
            this.$emit("change");
        }
    }
    /**
     * @internal
     */
    connectedCallback() {
        super.connectedCallback();
        _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.DOM.queueUpdate(() => {
            this.updateSubmenu();
        });
        if (!this.startColumnCount) {
            this.startColumnCount = 1;
        }
        this.observer = new MutationObserver(this.updateSubmenu);
    }
    /**
     * @internal
     */
    disconnectedCallback() {
        super.disconnectedCallback();
        this.submenu = undefined;
        if (this.observer !== undefined) {
            this.observer.disconnect();
            this.observer = undefined;
        }
    }
    /**
     * get an array of valid DOM children
     */
    domChildren() {
        return Array.from(this.children).filter(child => !child.hasAttribute("hidden"));
    }
}
(0,tslib__WEBPACK_IMPORTED_MODULE_6__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ mode: "boolean" })
], MenuItem.prototype, "disabled", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_6__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ mode: "boolean" })
], MenuItem.prototype, "expanded", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_6__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.observable
], MenuItem.prototype, "startColumnCount", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_6__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr
], MenuItem.prototype, "role", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_6__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ mode: "boolean" })
], MenuItem.prototype, "checked", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_6__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.observable
], MenuItem.prototype, "submenuRegion", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_6__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.observable
], MenuItem.prototype, "hasSubmenu", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_6__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.observable
], MenuItem.prototype, "currentDirection", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_6__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.observable
], MenuItem.prototype, "submenu", void 0);
(0,_utilities_apply_mixins_js__WEBPACK_IMPORTED_MODULE_7__.applyMixins)(MenuItem, _patterns_start_end_js__WEBPACK_IMPORTED_MODULE_8__.StartEnd);


/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/menu-item/menu-item.options.js":
/*!*****************************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/menu-item/menu-item.options.js ***!
  \*****************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   MenuItemRole: () => (/* binding */ MenuItemRole),
/* harmony export */   roleForMenuItem: () => (/* binding */ roleForMenuItem)
/* harmony export */ });
/**
 * Menu items roles.
 * @public
 */
const MenuItemRole = {
    /**
     * The menu item has a "menuitem" role
     */
    menuitem: "menuitem",
    /**
     * The menu item has a "menuitemcheckbox" role
     */
    menuitemcheckbox: "menuitemcheckbox",
    /**
     * The menu item has a "menuitemradio" role
     */
    menuitemradio: "menuitemradio",
};
/**
 * @internal
 */
const roleForMenuItem = {
    [MenuItemRole.menuitem]: "menuitem",
    [MenuItemRole.menuitemcheckbox]: "menuitemcheckbox",
    [MenuItemRole.menuitemradio]: "menuitemradio",
};


/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/menu-item/menu-item.template.js":
/*!******************************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/menu-item/menu-item.template.js ***!
  \******************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   menuItemTemplate: () => (/* binding */ menuItemTemplate)
/* harmony export */ });
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @microsoft/fast-element */ "webpack/sharing/consume/default/@microsoft/fast-element/@microsoft/fast-element");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _anchored_region_anchored_region_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../anchored-region/anchored-region.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/anchored-region/anchored-region.js");
/* harmony import */ var _patterns_start_end_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../patterns/start-end.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/patterns/start-end.js");
/* harmony import */ var _menu_item_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./menu-item.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/menu-item/menu-item.options.js");




/**
 * Generates a template for the {@link @microsoft/fast-foundation#(MenuItem:class)} component using
 * the provided prefix.
 *
 * @public
 */
const menuItemTemplate = (context, definition) => (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.html) `
    <template
        role="${x => x.role}"
        aria-haspopup="${x => (x.hasSubmenu ? "menu" : void 0)}"
        aria-checked="${x => (x.role !== _menu_item_js__WEBPACK_IMPORTED_MODULE_1__.MenuItemRole.menuitem ? x.checked : void 0)}"
        aria-disabled="${x => x.disabled}"
        aria-expanded="${x => x.expanded}"
        @keydown="${(x, c) => x.handleMenuItemKeyDown(c.event)}"
        @click="${(x, c) => x.handleMenuItemClick(c.event)}"
        @mouseover="${(x, c) => x.handleMouseOver(c.event)}"
        @mouseout="${(x, c) => x.handleMouseOut(c.event)}"
        class="${x => (x.disabled ? "disabled" : "")} ${x => x.expanded ? "expanded" : ""} ${x => `indent-${x.startColumnCount}`}"
    >
            ${(0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.when)(x => x.role === _menu_item_js__WEBPACK_IMPORTED_MODULE_1__.MenuItemRole.menuitemcheckbox, (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.html) `
                    <div part="input-container" class="input-container">
                        <span part="checkbox" class="checkbox">
                            <slot name="checkbox-indicator">
                                ${definition.checkboxIndicator || ""}
                            </slot>
                        </span>
                    </div>
                `)}
            ${(0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.when)(x => x.role === _menu_item_js__WEBPACK_IMPORTED_MODULE_1__.MenuItemRole.menuitemradio, (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.html) `
                    <div part="input-container" class="input-container">
                        <span part="radio" class="radio">
                            <slot name="radio-indicator">
                                ${definition.radioIndicator || ""}
                            </slot>
                        </span>
                    </div>
                `)}
        </div>
        ${(0,_patterns_start_end_js__WEBPACK_IMPORTED_MODULE_2__.startSlotTemplate)(context, definition)}
        <span class="content" part="content">
            <slot></slot>
        </span>
        ${(0,_patterns_start_end_js__WEBPACK_IMPORTED_MODULE_2__.endSlotTemplate)(context, definition)}
        ${(0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.when)(x => x.hasSubmenu, (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.html) `
                <div
                    part="expand-collapse-glyph-container"
                    class="expand-collapse-glyph-container"
                >
                    <span part="expand-collapse" class="expand-collapse">
                        <slot name="expand-collapse-indicator">
                            ${definition.expandCollapseGlyph || ""}
                        </slot>
                    </span>
                </div>
            `)}
        ${(0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.when)(x => x.expanded, (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.html) `
                <${context.tagFor(_anchored_region_anchored_region_js__WEBPACK_IMPORTED_MODULE_3__.AnchoredRegion)}
                    :anchorElement="${x => x}"
                    vertical-positioning-mode="dynamic"
                    vertical-default-position="bottom"
                    vertical-inset="true"
                    horizontal-positioning-mode="dynamic"
                    horizontal-default-position="end"
                    class="submenu-region"
                    dir="${x => x.currentDirection}"
                    @loaded="${x => x.submenuLoaded()}"
                    ${(0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.ref)("submenuRegion")}
                    part="submenu-region"
                >
                    <slot name="submenu"></slot>
                </${context.tagFor(_anchored_region_anchored_region_js__WEBPACK_IMPORTED_MODULE_3__.AnchoredRegion)}>
            `)}
    </template>
`;


/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/menu/index.js":
/*!************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/menu/index.js ***!
  \************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Menu: () => (/* reexport safe */ _menu_js__WEBPACK_IMPORTED_MODULE_1__.Menu),
/* harmony export */   menuTemplate: () => (/* reexport safe */ _menu_template_js__WEBPACK_IMPORTED_MODULE_0__.menuTemplate)
/* harmony export */ });
/* harmony import */ var _menu_template_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./menu.template.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/menu/menu.template.js");
/* harmony import */ var _menu_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./menu.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/menu/menu.js");




/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/menu/menu.js":
/*!***********************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/menu/menu.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Menu: () => (/* binding */ Menu)
/* harmony export */ });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! tslib */ "./node_modules/@microsoft/fast-foundation/node_modules/tslib/tslib.es6.js");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @microsoft/fast-element */ "webpack/sharing/consume/default/@microsoft/fast-element/@microsoft/fast-element");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @microsoft/fast-web-utilities */ "./node_modules/@microsoft/fast-web-utilities/dist/dom.js");
/* harmony import */ var _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @microsoft/fast-web-utilities */ "./node_modules/@microsoft/fast-web-utilities/dist/key-codes.js");
/* harmony import */ var _menu_item_index_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../menu-item/index.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/menu-item/menu-item.options.js");
/* harmony import */ var _menu_item_index_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../menu-item/index.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/menu-item/menu-item.js");
/* harmony import */ var _foundation_element_foundation_element_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../foundation-element/foundation-element.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/foundation-element/foundation-element.js");





/**
 * A Menu Custom HTML Element.
 * Implements the {@link https://www.w3.org/TR/wai-aria-1.1/#menu | ARIA menu }.
 *
 * @slot - The default slot for the menu items
 *
 * @public
 */
class Menu extends _foundation_element_foundation_element_js__WEBPACK_IMPORTED_MODULE_1__.FoundationElement {
    constructor() {
        super(...arguments);
        this.expandedItem = null;
        /**
         * The index of the focusable element in the items array
         * defaults to -1
         */
        this.focusIndex = -1;
        /**
         * @internal
         */
        this.isNestedMenu = () => {
            return (this.parentElement !== null &&
                (0,_microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_2__.isHTMLElement)(this.parentElement) &&
                this.parentElement.getAttribute("role") === "menuitem");
        };
        /**
         * if focus is moving out of the menu, reset to a stable initial state
         * @internal
         */
        this.handleFocusOut = (e) => {
            if (!this.contains(e.relatedTarget) && this.menuItems !== undefined) {
                this.collapseExpandedItem();
                // find our first focusable element
                const focusIndex = this.menuItems.findIndex(this.isFocusableElement);
                // set the current focus index's tabindex to -1
                this.menuItems[this.focusIndex].setAttribute("tabindex", "-1");
                // set the first focusable element tabindex to 0
                this.menuItems[focusIndex].setAttribute("tabindex", "0");
                // set the focus index
                this.focusIndex = focusIndex;
            }
        };
        this.handleItemFocus = (e) => {
            const targetItem = e.target;
            if (this.menuItems !== undefined &&
                targetItem !== this.menuItems[this.focusIndex]) {
                this.menuItems[this.focusIndex].setAttribute("tabindex", "-1");
                this.focusIndex = this.menuItems.indexOf(targetItem);
                targetItem.setAttribute("tabindex", "0");
            }
        };
        this.handleExpandedChanged = (e) => {
            if (e.defaultPrevented ||
                e.target === null ||
                this.menuItems === undefined ||
                this.menuItems.indexOf(e.target) < 0) {
                return;
            }
            e.preventDefault();
            const changedItem = e.target;
            // closing an expanded item without opening another
            if (this.expandedItem !== null &&
                changedItem === this.expandedItem &&
                changedItem.expanded === false) {
                this.expandedItem = null;
                return;
            }
            if (changedItem.expanded) {
                if (this.expandedItem !== null && this.expandedItem !== changedItem) {
                    this.expandedItem.expanded = false;
                }
                this.menuItems[this.focusIndex].setAttribute("tabindex", "-1");
                this.expandedItem = changedItem;
                this.focusIndex = this.menuItems.indexOf(changedItem);
                changedItem.setAttribute("tabindex", "0");
            }
        };
        this.removeItemListeners = () => {
            if (this.menuItems !== undefined) {
                this.menuItems.forEach((item) => {
                    item.removeEventListener("expanded-change", this.handleExpandedChanged);
                    item.removeEventListener("focus", this.handleItemFocus);
                });
            }
        };
        this.setItems = () => {
            const newItems = this.domChildren();
            this.removeItemListeners();
            this.menuItems = newItems;
            const menuItems = this.menuItems.filter(this.isMenuItemElement);
            // if our focus index is not -1 we have items
            if (menuItems.length) {
                this.focusIndex = 0;
            }
            function elementIndent(el) {
                const role = el.getAttribute("role");
                const startSlot = el.querySelector("[slot=start]");
                if (role !== _menu_item_index_js__WEBPACK_IMPORTED_MODULE_3__.MenuItemRole.menuitem && startSlot === null) {
                    return 1;
                }
                else if (role === _menu_item_index_js__WEBPACK_IMPORTED_MODULE_3__.MenuItemRole.menuitem && startSlot !== null) {
                    return 1;
                }
                else if (role !== _menu_item_index_js__WEBPACK_IMPORTED_MODULE_3__.MenuItemRole.menuitem && startSlot !== null) {
                    return 2;
                }
                else {
                    return 0;
                }
            }
            const indent = menuItems.reduce((accum, current) => {
                const elementValue = elementIndent(current);
                return accum > elementValue ? accum : elementValue;
            }, 0);
            menuItems.forEach((item, index) => {
                item.setAttribute("tabindex", index === 0 ? "0" : "-1");
                item.addEventListener("expanded-change", this.handleExpandedChanged);
                item.addEventListener("focus", this.handleItemFocus);
                if (item instanceof _menu_item_index_js__WEBPACK_IMPORTED_MODULE_4__.MenuItem) {
                    item.startColumnCount = indent;
                }
            });
        };
        /**
         * handle change from child element
         */
        this.changeHandler = (e) => {
            if (this.menuItems === undefined) {
                return;
            }
            const changedMenuItem = e.target;
            const changeItemIndex = this.menuItems.indexOf(changedMenuItem);
            if (changeItemIndex === -1) {
                return;
            }
            if (changedMenuItem.role === "menuitemradio" &&
                changedMenuItem.checked === true) {
                for (let i = changeItemIndex - 1; i >= 0; --i) {
                    const item = this.menuItems[i];
                    const role = item.getAttribute("role");
                    if (role === _menu_item_index_js__WEBPACK_IMPORTED_MODULE_3__.MenuItemRole.menuitemradio) {
                        item.checked = false;
                    }
                    if (role === "separator") {
                        break;
                    }
                }
                const maxIndex = this.menuItems.length - 1;
                for (let i = changeItemIndex + 1; i <= maxIndex; ++i) {
                    const item = this.menuItems[i];
                    const role = item.getAttribute("role");
                    if (role === _menu_item_index_js__WEBPACK_IMPORTED_MODULE_3__.MenuItemRole.menuitemradio) {
                        item.checked = false;
                    }
                    if (role === "separator") {
                        break;
                    }
                }
            }
        };
        /**
         * check if the item is a menu item
         */
        this.isMenuItemElement = (el) => {
            return ((0,_microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_2__.isHTMLElement)(el) &&
                Menu.focusableElementRoles.hasOwnProperty(el.getAttribute("role")));
        };
        /**
         * check if the item is focusable
         */
        this.isFocusableElement = (el) => {
            return this.isMenuItemElement(el);
        };
    }
    itemsChanged(oldValue, newValue) {
        // only update children after the component is connected and
        // the setItems has run on connectedCallback
        // (menuItems is undefined until then)
        if (this.$fastController.isConnected && this.menuItems !== undefined) {
            this.setItems();
        }
    }
    /**
     * @internal
     */
    connectedCallback() {
        super.connectedCallback();
        _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.DOM.queueUpdate(() => {
            // wait until children have had a chance to
            // connect before setting/checking their props/attributes
            this.setItems();
        });
        this.addEventListener("change", this.changeHandler);
    }
    /**
     * @internal
     */
    disconnectedCallback() {
        super.disconnectedCallback();
        this.removeItemListeners();
        this.menuItems = undefined;
        this.removeEventListener("change", this.changeHandler);
    }
    /**
     * Focuses the first item in the menu.
     *
     * @public
     */
    focus() {
        this.setFocus(0, 1);
    }
    /**
     * Collapses any expanded menu items.
     *
     * @public
     */
    collapseExpandedItem() {
        if (this.expandedItem !== null) {
            this.expandedItem.expanded = false;
            this.expandedItem = null;
        }
    }
    /**
     * @internal
     */
    handleMenuKeyDown(e) {
        if (e.defaultPrevented || this.menuItems === undefined) {
            return;
        }
        switch (e.key) {
            case _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_5__.keyArrowDown:
                // go forward one index
                this.setFocus(this.focusIndex + 1, 1);
                return;
            case _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_5__.keyArrowUp:
                // go back one index
                this.setFocus(this.focusIndex - 1, -1);
                return;
            case _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_5__.keyEnd:
                // set focus on last item
                this.setFocus(this.menuItems.length - 1, -1);
                return;
            case _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_5__.keyHome:
                // set focus on first item
                this.setFocus(0, 1);
                return;
            default:
                // if we are not handling the event, do not prevent default
                return true;
        }
    }
    /**
     * get an array of valid DOM children
     */
    domChildren() {
        return Array.from(this.children).filter(child => !child.hasAttribute("hidden"));
    }
    setFocus(focusIndex, adjustment) {
        if (this.menuItems === undefined) {
            return;
        }
        while (focusIndex >= 0 && focusIndex < this.menuItems.length) {
            const child = this.menuItems[focusIndex];
            if (this.isFocusableElement(child)) {
                // change the previous index to -1
                if (this.focusIndex > -1 &&
                    this.menuItems.length >= this.focusIndex - 1) {
                    this.menuItems[this.focusIndex].setAttribute("tabindex", "-1");
                }
                // update the focus index
                this.focusIndex = focusIndex;
                // update the tabindex of next focusable element
                child.setAttribute("tabindex", "0");
                // focus the element
                child.focus();
                break;
            }
            focusIndex += adjustment;
        }
    }
}
Menu.focusableElementRoles = _menu_item_index_js__WEBPACK_IMPORTED_MODULE_3__.roleForMenuItem;
(0,tslib__WEBPACK_IMPORTED_MODULE_6__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.observable
], Menu.prototype, "items", void 0);


/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/menu/menu.template.js":
/*!********************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/menu/menu.template.js ***!
  \********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   menuTemplate: () => (/* binding */ menuTemplate)
/* harmony export */ });
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @microsoft/fast-element */ "webpack/sharing/consume/default/@microsoft/fast-element/@microsoft/fast-element");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__);

/**
 * The template for the {@link @microsoft/fast-foundation#Menu} component.
 * @public
 */
const menuTemplate = (context, definition) => (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.html) `
    <template
        slot="${x => (x.slot ? x.slot : x.isNestedMenu() ? "submenu" : void 0)}"
        role="menu"
        @keydown="${(x, c) => x.handleMenuKeyDown(c.event)}"
        @focusout="${(x, c) => x.handleFocusOut(c.event)}"
    >
        <slot ${(0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.slotted)("items")}></slot>
    </template>
`;


/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/number-field/index.js":
/*!********************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/number-field/index.js ***!
  \********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   NumberField: () => (/* reexport safe */ _number_field_js__WEBPACK_IMPORTED_MODULE_1__.NumberField),
/* harmony export */   numberFieldTemplate: () => (/* reexport safe */ _number_field_template_js__WEBPACK_IMPORTED_MODULE_0__.numberFieldTemplate)
/* harmony export */ });
/* harmony import */ var _number_field_template_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./number-field.template.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/number-field/number-field.template.js");
/* harmony import */ var _number_field_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./number-field.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/number-field/number-field.js");




/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/number-field/number-field.form-associated.js":
/*!*******************************************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/number-field/number-field.form-associated.js ***!
  \*******************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   FormAssociatedNumberField: () => (/* binding */ FormAssociatedNumberField)
/* harmony export */ });
/* harmony import */ var _form_associated_form_associated_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../form-associated/form-associated.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/form-associated/form-associated.js");
/* harmony import */ var _foundation_element_foundation_element_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../foundation-element/foundation-element.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/foundation-element/foundation-element.js");


class _NumberField extends _foundation_element_foundation_element_js__WEBPACK_IMPORTED_MODULE_0__.FoundationElement {
}
/**
 * A form-associated base class for the {@link @microsoft/fast-foundation#(NumberField:class)} component.
 *
 * @internal
 */
class FormAssociatedNumberField extends (0,_form_associated_form_associated_js__WEBPACK_IMPORTED_MODULE_1__.FormAssociated)(_NumberField) {
    constructor() {
        super(...arguments);
        this.proxy = document.createElement("input");
    }
}


/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/number-field/number-field.js":
/*!***************************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/number-field/number-field.js ***!
  \***************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   NumberField: () => (/* binding */ NumberField)
/* harmony export */ });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! tslib */ "./node_modules/@microsoft/fast-foundation/node_modules/tslib/tslib.es6.js");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @microsoft/fast-element */ "webpack/sharing/consume/default/@microsoft/fast-element/@microsoft/fast-element");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @microsoft/fast-web-utilities */ "./node_modules/@microsoft/fast-web-utilities/dist/key-codes.js");
/* harmony import */ var _patterns_start_end_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../patterns/start-end.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/patterns/start-end.js");
/* harmony import */ var _utilities_apply_mixins_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utilities/apply-mixins.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/utilities/apply-mixins.js");
/* harmony import */ var _text_field_text_field_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../text-field/text-field.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/text-field/text-field.js");
/* harmony import */ var _number_field_form_associated_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./number-field.form-associated.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/number-field/number-field.form-associated.js");







/**
 * A Number Field Custom HTML Element.
 * Based largely on the {@link https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input/number | <input type="number" /> element }.
 *
 * @slot start - Content which can be provided before the number field input
 * @slot end - Content which can be provided after the number field input
 * @slot - The default slot for the label
 * @slot step-up-glyph - The glyph for the step up control
 * @slot step-down-glyph - The glyph for the step down control
 * @csspart label - The label
 * @csspart root - The element wrapping the control, including start and end slots
 * @csspart control - The element representing the input
 * @csspart controls - The step up and step down controls
 * @csspart step-up - The step up control
 * @csspart step-down - The step down control
 * @fires input - Fires a custom 'input' event when the value has changed
 * @fires change - Fires a custom 'change' event when the value has changed
 *
 * @public
 */
class NumberField extends _number_field_form_associated_js__WEBPACK_IMPORTED_MODULE_1__.FormAssociatedNumberField {
    constructor() {
        super(...arguments);
        /**
         * When true, spin buttons will not be rendered
         * @public
         * @remarks
         * HTML Attribute: autofocus
         */
        this.hideStep = false;
        /**
         * Amount to increment or decrement the value by
         * @public
         * @remarks
         * HTMLAttribute: step
         */
        this.step = 1;
        /**
         * Flag to indicate that the value change is from the user input
         * @internal
         */
        this.isUserInput = false;
    }
    /**
     * Ensures that the max is greater than the min and that the value
     *  is less than the max
     * @param previous - the previous max value
     * @param next - updated max value
     *
     * @internal
     */
    maxChanged(previous, next) {
        var _a;
        this.max = Math.max(next, (_a = this.min) !== null && _a !== void 0 ? _a : next);
        const min = Math.min(this.min, this.max);
        if (this.min !== undefined && this.min !== min) {
            this.min = min;
        }
        this.value = this.getValidValue(this.value);
    }
    /**
     * Ensures that the min is less than the max and that the value
     *  is greater than the min
     * @param previous - previous min value
     * @param next - updated min value
     *
     * @internal
     */
    minChanged(previous, next) {
        var _a;
        this.min = Math.min(next, (_a = this.max) !== null && _a !== void 0 ? _a : next);
        const max = Math.max(this.min, this.max);
        if (this.max !== undefined && this.max !== max) {
            this.max = max;
        }
        this.value = this.getValidValue(this.value);
    }
    /**
     * The value property, typed as a number.
     *
     * @public
     */
    get valueAsNumber() {
        return parseFloat(super.value);
    }
    set valueAsNumber(next) {
        this.value = next.toString();
    }
    /**
     * Validates that the value is a number between the min and max
     * @param previous - previous stored value
     * @param next - value being updated
     * @param updateControl - should the text field be updated with value, defaults to true
     * @internal
     */
    valueChanged(previous, next) {
        this.value = this.getValidValue(next);
        if (next !== this.value) {
            return;
        }
        if (this.control && !this.isUserInput) {
            this.control.value = this.value;
        }
        super.valueChanged(previous, this.value);
        if (previous !== undefined && !this.isUserInput) {
            this.$emit("input");
            this.$emit("change");
        }
        this.isUserInput = false;
    }
    /** {@inheritDoc (FormAssociated:interface).validate} */
    validate() {
        super.validate(this.control);
    }
    /**
     * Sets the internal value to a valid number between the min and max properties
     * @param value - user input
     *
     * @internal
     */
    getValidValue(value) {
        var _a, _b;
        let validValue = parseFloat(parseFloat(value).toPrecision(12));
        if (isNaN(validValue)) {
            validValue = "";
        }
        else {
            validValue = Math.min(validValue, (_a = this.max) !== null && _a !== void 0 ? _a : validValue);
            validValue = Math.max(validValue, (_b = this.min) !== null && _b !== void 0 ? _b : validValue).toString();
        }
        return validValue;
    }
    /**
     * Increments the value using the step value
     *
     * @public
     */
    stepUp() {
        const value = parseFloat(this.value);
        const stepUpValue = !isNaN(value)
            ? value + this.step
            : this.min > 0
                ? this.min
                : this.max < 0
                    ? this.max
                    : !this.min
                        ? this.step
                        : 0;
        this.value = stepUpValue.toString();
    }
    /**
     * Decrements the value using the step value
     *
     * @public
     */
    stepDown() {
        const value = parseFloat(this.value);
        const stepDownValue = !isNaN(value)
            ? value - this.step
            : this.min > 0
                ? this.min
                : this.max < 0
                    ? this.max
                    : !this.min
                        ? 0 - this.step
                        : 0;
        this.value = stepDownValue.toString();
    }
    /**
     * Sets up the initial state of the number field
     * @internal
     */
    connectedCallback() {
        super.connectedCallback();
        this.proxy.setAttribute("type", "number");
        this.validate();
        this.control.value = this.value;
        if (this.autofocus) {
            _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.DOM.queueUpdate(() => {
                this.focus();
            });
        }
    }
    /**
     * Selects all the text in the number field
     *
     * @public
     */
    select() {
        this.control.select();
        /**
         * The select event does not permeate the shadow DOM boundary.
         * This fn effectively proxies the select event,
         * emitting a `select` event whenever the internal
         * control emits a `select` event
         */
        this.$emit("select");
    }
    /**
     * Handles the internal control's `input` event
     * @internal
     */
    handleTextInput() {
        this.control.value = this.control.value.replace(/[^0-9\-+e.]/g, "");
        this.isUserInput = true;
        this.value = this.control.value;
    }
    /**
     * Change event handler for inner control.
     * @remarks
     * "Change" events are not `composable` so they will not
     * permeate the shadow DOM boundary. This fn effectively proxies
     * the change event, emitting a `change` event whenever the internal
     * control emits a `change` event
     * @internal
     */
    handleChange() {
        this.$emit("change");
    }
    /**
     * Handles the internal control's `keydown` event
     * @internal
     */
    handleKeyDown(e) {
        const key = e.key;
        switch (key) {
            case _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_2__.keyArrowUp:
                this.stepUp();
                return false;
            case _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_2__.keyArrowDown:
                this.stepDown();
                return false;
        }
        return true;
    }
    /**
     * Handles populating the input field with a validated value when
     *  leaving the input field.
     * @internal
     */
    handleBlur() {
        this.control.value = this.value;
    }
}
(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ attribute: "readonly", mode: "boolean" })
], NumberField.prototype, "readOnly", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ mode: "boolean" })
], NumberField.prototype, "autofocus", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ attribute: "hide-step", mode: "boolean" })
], NumberField.prototype, "hideStep", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr
], NumberField.prototype, "placeholder", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr
], NumberField.prototype, "list", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ converter: _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.nullableNumberConverter })
], NumberField.prototype, "maxlength", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ converter: _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.nullableNumberConverter })
], NumberField.prototype, "minlength", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ converter: _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.nullableNumberConverter })
], NumberField.prototype, "size", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ converter: _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.nullableNumberConverter })
], NumberField.prototype, "step", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ converter: _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.nullableNumberConverter })
], NumberField.prototype, "max", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ converter: _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.nullableNumberConverter })
], NumberField.prototype, "min", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.observable
], NumberField.prototype, "defaultSlottedNodes", void 0);
(0,_utilities_apply_mixins_js__WEBPACK_IMPORTED_MODULE_4__.applyMixins)(NumberField, _patterns_start_end_js__WEBPACK_IMPORTED_MODULE_5__.StartEnd, _text_field_text_field_js__WEBPACK_IMPORTED_MODULE_6__.DelegatesARIATextbox);


/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/number-field/number-field.template.js":
/*!************************************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/number-field/number-field.template.js ***!
  \************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   numberFieldTemplate: () => (/* binding */ numberFieldTemplate)
/* harmony export */ });
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @microsoft/fast-element */ "webpack/sharing/consume/default/@microsoft/fast-element/@microsoft/fast-element");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _patterns_start_end_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../patterns/start-end.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/patterns/start-end.js");


/**
 * The template for the {@link @microsoft/fast-foundation#(NumberField:class)} component.
 * @public
 */
const numberFieldTemplate = (context, definition) => (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.html) `
    <template class="${x => (x.readOnly ? "readonly" : "")}">
        <label
            part="label"
            for="control"
            class="${x => x.defaultSlottedNodes && x.defaultSlottedNodes.length
    ? "label"
    : "label label__hidden"}"
        >
            <slot ${(0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.slotted)("defaultSlottedNodes")}></slot>
        </label>
        <div class="root" part="root">
            ${(0,_patterns_start_end_js__WEBPACK_IMPORTED_MODULE_1__.startSlotTemplate)(context, definition)}
            <input
                class="control"
                part="control"
                id="control"
                @input="${x => x.handleTextInput()}"
                @change="${x => x.handleChange()}"
                @keydown="${(x, c) => x.handleKeyDown(c.event)}"
                @blur="${(x, c) => x.handleBlur()}"
                ?autofocus="${x => x.autofocus}"
                ?disabled="${x => x.disabled}"
                list="${x => x.list}"
                maxlength="${x => x.maxlength}"
                minlength="${x => x.minlength}"
                placeholder="${x => x.placeholder}"
                ?readonly="${x => x.readOnly}"
                ?required="${x => x.required}"
                size="${x => x.size}"
                type="text"
                inputmode="numeric"
                min="${x => x.min}"
                max="${x => x.max}"
                step="${x => x.step}"
                aria-atomic="${x => x.ariaAtomic}"
                aria-busy="${x => x.ariaBusy}"
                aria-controls="${x => x.ariaControls}"
                aria-current="${x => x.ariaCurrent}"
                aria-describedby="${x => x.ariaDescribedby}"
                aria-details="${x => x.ariaDetails}"
                aria-disabled="${x => x.ariaDisabled}"
                aria-errormessage="${x => x.ariaErrormessage}"
                aria-flowto="${x => x.ariaFlowto}"
                aria-haspopup="${x => x.ariaHaspopup}"
                aria-hidden="${x => x.ariaHidden}"
                aria-invalid="${x => x.ariaInvalid}"
                aria-keyshortcuts="${x => x.ariaKeyshortcuts}"
                aria-label="${x => x.ariaLabel}"
                aria-labelledby="${x => x.ariaLabelledby}"
                aria-live="${x => x.ariaLive}"
                aria-owns="${x => x.ariaOwns}"
                aria-relevant="${x => x.ariaRelevant}"
                aria-roledescription="${x => x.ariaRoledescription}"
                ${(0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.ref)("control")}
            />
            ${(0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.when)(x => !x.hideStep && !x.readOnly && !x.disabled, (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.html) `
                    <div class="controls" part="controls">
                        <div class="step-up" part="step-up" @click="${x => x.stepUp()}">
                            <slot name="step-up-glyph">
                                ${definition.stepUpGlyph || ""}
                            </slot>
                        </div>
                        <div
                            class="step-down"
                            part="step-down"
                            @click="${x => x.stepDown()}"
                        >
                            <slot name="step-down-glyph">
                                ${definition.stepDownGlyph || ""}
                            </slot>
                        </div>
                    </div>
                `)}
            ${(0,_patterns_start_end_js__WEBPACK_IMPORTED_MODULE_1__.endSlotTemplate)(context, definition)}
        </div>
    </template>
`;


/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/patterns/aria-global.js":
/*!**********************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/patterns/aria-global.js ***!
  \**********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ARIAGlobalStatesAndProperties: () => (/* binding */ ARIAGlobalStatesAndProperties)
/* harmony export */ });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! tslib */ "./node_modules/@microsoft/fast-foundation/node_modules/tslib/tslib.es6.js");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @microsoft/fast-element */ "webpack/sharing/consume/default/@microsoft/fast-element/@microsoft/fast-element");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__);


/**
 * Some states and properties are applicable to all host language elements regardless of whether a role is applied.
 * The following global states and properties are supported by all roles and by all base markup elements.
 * {@link https://www.w3.org/TR/wai-aria-1.1/#global_states}
 *
 * This is intended to be used as a mixin. Be sure you extend FASTElement.
 *
 * @public
 */
class ARIAGlobalStatesAndProperties {
}
(0,tslib__WEBPACK_IMPORTED_MODULE_1__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ attribute: "aria-atomic" })
], ARIAGlobalStatesAndProperties.prototype, "ariaAtomic", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_1__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ attribute: "aria-busy" })
], ARIAGlobalStatesAndProperties.prototype, "ariaBusy", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_1__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ attribute: "aria-controls" })
], ARIAGlobalStatesAndProperties.prototype, "ariaControls", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_1__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ attribute: "aria-current" })
], ARIAGlobalStatesAndProperties.prototype, "ariaCurrent", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_1__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ attribute: "aria-describedby" })
], ARIAGlobalStatesAndProperties.prototype, "ariaDescribedby", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_1__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ attribute: "aria-details" })
], ARIAGlobalStatesAndProperties.prototype, "ariaDetails", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_1__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ attribute: "aria-disabled" })
], ARIAGlobalStatesAndProperties.prototype, "ariaDisabled", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_1__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ attribute: "aria-errormessage" })
], ARIAGlobalStatesAndProperties.prototype, "ariaErrormessage", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_1__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ attribute: "aria-flowto" })
], ARIAGlobalStatesAndProperties.prototype, "ariaFlowto", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_1__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ attribute: "aria-haspopup" })
], ARIAGlobalStatesAndProperties.prototype, "ariaHaspopup", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_1__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ attribute: "aria-hidden" })
], ARIAGlobalStatesAndProperties.prototype, "ariaHidden", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_1__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ attribute: "aria-invalid" })
], ARIAGlobalStatesAndProperties.prototype, "ariaInvalid", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_1__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ attribute: "aria-keyshortcuts" })
], ARIAGlobalStatesAndProperties.prototype, "ariaKeyshortcuts", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_1__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ attribute: "aria-label" })
], ARIAGlobalStatesAndProperties.prototype, "ariaLabel", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_1__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ attribute: "aria-labelledby" })
], ARIAGlobalStatesAndProperties.prototype, "ariaLabelledby", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_1__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ attribute: "aria-live" })
], ARIAGlobalStatesAndProperties.prototype, "ariaLive", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_1__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ attribute: "aria-owns" })
], ARIAGlobalStatesAndProperties.prototype, "ariaOwns", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_1__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ attribute: "aria-relevant" })
], ARIAGlobalStatesAndProperties.prototype, "ariaRelevant", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_1__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ attribute: "aria-roledescription" })
], ARIAGlobalStatesAndProperties.prototype, "ariaRoledescription", void 0);


/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/patterns/index.js":
/*!****************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/patterns/index.js ***!
  \****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ARIAGlobalStatesAndProperties: () => (/* reexport safe */ _aria_global_js__WEBPACK_IMPORTED_MODULE_0__.ARIAGlobalStatesAndProperties),
/* harmony export */   StartEnd: () => (/* reexport safe */ _start_end_js__WEBPACK_IMPORTED_MODULE_1__.StartEnd),
/* harmony export */   endSlotTemplate: () => (/* reexport safe */ _start_end_js__WEBPACK_IMPORTED_MODULE_1__.endSlotTemplate),
/* harmony export */   endTemplate: () => (/* reexport safe */ _start_end_js__WEBPACK_IMPORTED_MODULE_1__.endTemplate),
/* harmony export */   startSlotTemplate: () => (/* reexport safe */ _start_end_js__WEBPACK_IMPORTED_MODULE_1__.startSlotTemplate),
/* harmony export */   startTemplate: () => (/* reexport safe */ _start_end_js__WEBPACK_IMPORTED_MODULE_1__.startTemplate)
/* harmony export */ });
/* harmony import */ var _aria_global_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./aria-global.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/patterns/aria-global.js");
/* harmony import */ var _start_end_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./start-end.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/patterns/start-end.js");




/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/patterns/start-end.js":
/*!********************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/patterns/start-end.js ***!
  \********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   StartEnd: () => (/* binding */ StartEnd),
/* harmony export */   endSlotTemplate: () => (/* binding */ endSlotTemplate),
/* harmony export */   endTemplate: () => (/* binding */ endTemplate),
/* harmony export */   startSlotTemplate: () => (/* binding */ startSlotTemplate),
/* harmony export */   startTemplate: () => (/* binding */ startTemplate)
/* harmony export */ });
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @microsoft/fast-element */ "webpack/sharing/consume/default/@microsoft/fast-element/@microsoft/fast-element");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__);

/**
 * A mixin class implementing start and end elements.
 * These are generally used to decorate text elements with icons or other visual indicators.
 * @public
 */
class StartEnd {
    handleStartContentChange() {
        this.startContainer.classList.toggle("start", this.start.assignedNodes().length > 0);
    }
    handleEndContentChange() {
        this.endContainer.classList.toggle("end", this.end.assignedNodes().length > 0);
    }
}
/**
 * The template for the end element.
 * For use with {@link StartEnd}
 *
 * @public
 */
const endSlotTemplate = (context, definition) => (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.html) `
    <span
        part="end"
        ${(0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.ref)("endContainer")}
        class=${x => (definition.end ? "end" : void 0)}
    >
        <slot name="end" ${(0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.ref)("end")} @slotchange="${x => x.handleEndContentChange()}">
            ${definition.end || ""}
        </slot>
    </span>
`;
/**
 * The template for the start element.
 * For use with {@link StartEnd}
 *
 * @public
 */
const startSlotTemplate = (context, definition) => (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.html) `
    <span
        part="start"
        ${(0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.ref)("startContainer")}
        class="${x => (definition.start ? "start" : void 0)}"
    >
        <slot
            name="start"
            ${(0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.ref)("start")}
            @slotchange="${x => x.handleStartContentChange()}"
        >
            ${definition.start || ""}
        </slot>
    </span>
`;
/**
 * The template for the end element.
 * For use with {@link StartEnd}
 *
 * @public
 * @deprecated - use endSlotTemplate
 */
const endTemplate = (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.html) `
    <span part="end" ${(0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.ref)("endContainer")}>
        <slot
            name="end"
            ${(0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.ref)("end")}
            @slotchange="${x => x.handleEndContentChange()}"
        ></slot>
    </span>
`;
/**
 * The template for the start element.
 * For use with {@link StartEnd}
 *
 * @public
 * @deprecated - use startSlotTemplate
 */
const startTemplate = (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.html) `
    <span part="start" ${(0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.ref)("startContainer")}>
        <slot
            name="start"
            ${(0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.ref)("start")}
            @slotchange="${x => x.handleStartContentChange()}"
        ></slot>
    </span>
`;


/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/picker/index.js":
/*!**************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/picker/index.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Picker: () => (/* reexport safe */ _picker_js__WEBPACK_IMPORTED_MODULE_1__.Picker),
/* harmony export */   PickerList: () => (/* reexport safe */ _picker_list_js__WEBPACK_IMPORTED_MODULE_7__.PickerList),
/* harmony export */   PickerListItem: () => (/* reexport safe */ _picker_list_item_js__WEBPACK_IMPORTED_MODULE_9__.PickerListItem),
/* harmony export */   PickerMenu: () => (/* reexport safe */ _picker_menu_js__WEBPACK_IMPORTED_MODULE_3__.PickerMenu),
/* harmony export */   PickerMenuOption: () => (/* reexport safe */ _picker_menu_option_js__WEBPACK_IMPORTED_MODULE_5__.PickerMenuOption),
/* harmony export */   pickerListItemTemplate: () => (/* reexport safe */ _picker_list_item_template_js__WEBPACK_IMPORTED_MODULE_8__.pickerListItemTemplate),
/* harmony export */   pickerListTemplate: () => (/* reexport safe */ _picker_list_template_js__WEBPACK_IMPORTED_MODULE_6__.pickerListTemplate),
/* harmony export */   pickerMenuOptionTemplate: () => (/* reexport safe */ _picker_menu_option_template_js__WEBPACK_IMPORTED_MODULE_4__.pickerMenuOptionTemplate),
/* harmony export */   pickerMenuTemplate: () => (/* reexport safe */ _picker_menu_template_js__WEBPACK_IMPORTED_MODULE_2__.pickerMenuTemplate),
/* harmony export */   pickerTemplate: () => (/* reexport safe */ _picker_template_js__WEBPACK_IMPORTED_MODULE_0__.pickerTemplate)
/* harmony export */ });
/* harmony import */ var _picker_template_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./picker.template.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/picker/picker.template.js");
/* harmony import */ var _picker_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./picker.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/picker/picker.js");
/* harmony import */ var _picker_menu_template_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./picker-menu.template.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/picker/picker-menu.template.js");
/* harmony import */ var _picker_menu_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./picker-menu.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/picker/picker-menu.js");
/* harmony import */ var _picker_menu_option_template_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./picker-menu-option.template.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/picker/picker-menu-option.template.js");
/* harmony import */ var _picker_menu_option_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./picker-menu-option.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/picker/picker-menu-option.js");
/* harmony import */ var _picker_list_template_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./picker-list.template.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/picker/picker-list.template.js");
/* harmony import */ var _picker_list_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./picker-list.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/picker/picker-list.js");
/* harmony import */ var _picker_list_item_template_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./picker-list-item.template.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/picker/picker-list-item.template.js");
/* harmony import */ var _picker_list_item_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./picker-list-item.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/picker/picker-list-item.js");












/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/picker/picker-list-item.js":
/*!*************************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/picker/picker-list-item.js ***!
  \*************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   PickerListItem: () => (/* binding */ PickerListItem)
/* harmony export */ });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! tslib */ "./node_modules/@microsoft/fast-foundation/node_modules/tslib/tslib.es6.js");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @microsoft/fast-element */ "webpack/sharing/consume/default/@microsoft/fast-element/@microsoft/fast-element");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @microsoft/fast-web-utilities */ "./node_modules/@microsoft/fast-web-utilities/dist/key-codes.js");
/* harmony import */ var _foundation_element_foundation_element_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../foundation-element/foundation-element.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/foundation-element/foundation-element.js");




const defaultContentsTemplate = (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.html) `
    <template>
        ${x => x.value}
    </template>
`;
/**
 * A picker list item Custom HTML Element.
 *
 * @alpha
 */
class PickerListItem extends _foundation_element_foundation_element_js__WEBPACK_IMPORTED_MODULE_1__.FoundationElement {
    contentsTemplateChanged() {
        if (this.$fastController.isConnected) {
            this.updateView();
        }
    }
    /**
     * @internal
     */
    connectedCallback() {
        super.connectedCallback();
        this.updateView();
    }
    /**
     * @internal
     */
    disconnectedCallback() {
        this.disconnectView();
        super.disconnectedCallback();
    }
    handleKeyDown(e) {
        if (e.defaultPrevented) {
            return false;
        }
        if (e.key === _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_2__.keyEnter) {
            this.handleInvoke();
            return false;
        }
        return true;
    }
    handleClick(e) {
        if (!e.defaultPrevented) {
            this.handleInvoke();
        }
        return false;
    }
    handleInvoke() {
        this.$emit("pickeriteminvoked");
    }
    updateView() {
        var _a, _b;
        this.disconnectView();
        this.customView =
            (_b = (_a = this.contentsTemplate) === null || _a === void 0 ? void 0 : _a.render(this, this)) !== null && _b !== void 0 ? _b : defaultContentsTemplate.render(this, this);
    }
    disconnectView() {
        var _a;
        (_a = this.customView) === null || _a === void 0 ? void 0 : _a.dispose();
        this.customView = undefined;
    }
}
(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ attribute: "value" })
], PickerListItem.prototype, "value", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.observable
], PickerListItem.prototype, "contentsTemplate", void 0);


/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/picker/picker-list-item.template.js":
/*!**********************************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/picker/picker-list-item.template.js ***!
  \**********************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   pickerListItemTemplate: () => (/* binding */ pickerListItemTemplate)
/* harmony export */ });
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @microsoft/fast-element */ "webpack/sharing/consume/default/@microsoft/fast-element/@microsoft/fast-element");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__);

/**
 *
 * @public
 */
const pickerListItemTemplate = (context, definition) => {
    return (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.html) `
        <template
            role="listitem"
            tabindex="0"
            @click="${(x, c) => x.handleClick(c.event)}"
            @keydown="${(x, c) => x.handleKeyDown(c.event)}"
        >
            <slot></slot>
        </template>
    `;
};


/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/picker/picker-list.js":
/*!********************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/picker/picker-list.js ***!
  \********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   PickerList: () => (/* binding */ PickerList)
/* harmony export */ });
/* harmony import */ var _foundation_element_foundation_element_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../foundation-element/foundation-element.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/foundation-element/foundation-element.js");

/**
 * A List Picker Menu Custom HTML Element.
 *
 * @alpha
 */
class PickerList extends _foundation_element_foundation_element_js__WEBPACK_IMPORTED_MODULE_0__.FoundationElement {
}


/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/picker/picker-list.template.js":
/*!*****************************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/picker/picker-list.template.js ***!
  \*****************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   pickerListTemplate: () => (/* binding */ pickerListTemplate)
/* harmony export */ });
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @microsoft/fast-element */ "webpack/sharing/consume/default/@microsoft/fast-element/@microsoft/fast-element");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__);

/**
 *
 * @public
 */
const pickerListTemplate = (context, definition) => {
    return (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.html) `
        <template slot="list-region" role="list" class="picker-list">
            <slot></slot>
            <slot name="input-region"></slot>
        </template>
    `;
};


/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/picker/picker-menu-option.js":
/*!***************************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/picker/picker-menu-option.js ***!
  \***************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   PickerMenuOption: () => (/* binding */ PickerMenuOption)
/* harmony export */ });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! tslib */ "./node_modules/@microsoft/fast-foundation/node_modules/tslib/tslib.es6.js");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @microsoft/fast-element */ "webpack/sharing/consume/default/@microsoft/fast-element/@microsoft/fast-element");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _foundation_element_foundation_element_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../foundation-element/foundation-element.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/foundation-element/foundation-element.js");



const defaultContentsTemplate = (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.html) `
    <template>
        ${x => x.value}
    </template>
`;
/**
 * A picker list item Custom HTML Element.
 *
 * @alpha
 */
class PickerMenuOption extends _foundation_element_foundation_element_js__WEBPACK_IMPORTED_MODULE_1__.FoundationElement {
    contentsTemplateChanged() {
        if (this.$fastController.isConnected) {
            this.updateView();
        }
    }
    /**
     * @internal
     */
    connectedCallback() {
        super.connectedCallback();
        this.updateView();
    }
    /**
     * @internal
     */
    disconnectedCallback() {
        super.disconnectedCallback();
        this.disconnectView();
    }
    handleClick(e) {
        if (e.defaultPrevented) {
            return false;
        }
        this.handleInvoked();
        return false;
    }
    handleInvoked() {
        this.$emit("pickeroptioninvoked");
    }
    updateView() {
        var _a, _b;
        this.disconnectView();
        this.customView =
            (_b = (_a = this.contentsTemplate) === null || _a === void 0 ? void 0 : _a.render(this, this)) !== null && _b !== void 0 ? _b : defaultContentsTemplate.render(this, this);
    }
    disconnectView() {
        var _a;
        (_a = this.customView) === null || _a === void 0 ? void 0 : _a.dispose();
        this.customView = undefined;
    }
}
(0,tslib__WEBPACK_IMPORTED_MODULE_2__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ attribute: "value" })
], PickerMenuOption.prototype, "value", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_2__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.observable
], PickerMenuOption.prototype, "contentsTemplate", void 0);


/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/picker/picker-menu-option.template.js":
/*!************************************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/picker/picker-menu-option.template.js ***!
  \************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   pickerMenuOptionTemplate: () => (/* binding */ pickerMenuOptionTemplate)
/* harmony export */ });
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @microsoft/fast-element */ "webpack/sharing/consume/default/@microsoft/fast-element/@microsoft/fast-element");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__);

/**
 *
 * @public
 */
const pickerMenuOptionTemplate = (context, definition) => {
    return (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.html) `
        <template
            role="listitem"
            tabindex="-1"
            @click="${(x, c) => x.handleClick(c.event)}"
        >
            <slot></slot>
        </template>
    `;
};


/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/picker/picker-menu.js":
/*!********************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/picker/picker-menu.js ***!
  \********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   PickerMenu: () => (/* binding */ PickerMenu)
/* harmony export */ });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! tslib */ "./node_modules/@microsoft/fast-foundation/node_modules/tslib/tslib.es6.js");
/* harmony import */ var _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @microsoft/fast-web-utilities */ "./node_modules/@microsoft/fast-web-utilities/dist/strings.js");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @microsoft/fast-element */ "webpack/sharing/consume/default/@microsoft/fast-element/@microsoft/fast-element");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _foundation_element_foundation_element_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../foundation-element/foundation-element.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/foundation-element/foundation-element.js");




/**
 * A List Picker Menu Custom HTML Element.
 *
 * @alpha
 */
class PickerMenu extends _foundation_element_foundation_element_js__WEBPACK_IMPORTED_MODULE_1__.FoundationElement {
    constructor() {
        super(...arguments);
        /**
         * Children that are list items
         *
         * @internal
         */
        this.optionElements = [];
    }
    menuElementsChanged() {
        this.updateOptions();
    }
    headerElementsChanged() {
        this.updateOptions();
    }
    footerElementsChanged() {
        this.updateOptions();
    }
    updateOptions() {
        this.optionElements.splice(0, this.optionElements.length);
        this.addSlottedListItems(this.headerElements);
        this.addSlottedListItems(this.menuElements);
        this.addSlottedListItems(this.footerElements);
        this.$emit("optionsupdated", { bubbles: false });
    }
    addSlottedListItems(slotChildren) {
        if (slotChildren === undefined) {
            return;
        }
        slotChildren.forEach((child) => {
            if (child.nodeType === 1 && child.getAttribute("role") === "listitem") {
                child.id = child.id || (0,_microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_2__.uniqueId)("option-");
                this.optionElements.push(child);
            }
        });
    }
}
(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.observable
], PickerMenu.prototype, "menuElements", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.observable
], PickerMenu.prototype, "headerElements", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.observable
], PickerMenu.prototype, "footerElements", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.observable
], PickerMenu.prototype, "suggestionsAvailableText", void 0);


/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/picker/picker-menu.template.js":
/*!*****************************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/picker/picker-menu.template.js ***!
  \*****************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   pickerMenuTemplate: () => (/* binding */ pickerMenuTemplate)
/* harmony export */ });
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @microsoft/fast-element */ "webpack/sharing/consume/default/@microsoft/fast-element/@microsoft/fast-element");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__);

/**
 * The template for the List Picker component.
 * @public
 */
const pickerMenuTemplate = (context, definition) => {
    return (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.html) `
        <template role="list" slot="menu-region">
            <div class="options-display" part="options-display">
                <div class="header-region" part="header-region">
                    <slot name="header-region" ${(0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.slotted)("headerElements")}></slot>
                </div>

                <slot ${(0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.slotted)("menuElements")}></slot>
                <div class="footer-region" part="footer-region">
                    <slot name="footer-region" ${(0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.slotted)("footerElements")}></slot>
                </div>
                <div
                    role="alert"
                    aria-live="polite"
                    part="suggestions-available-alert"
                    class="suggestions-available-alert"
                >
                    ${x => x.suggestionsAvailableText}
                </div>
            </div>
        </template>
    `;
};


/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/picker/picker.form-associated.js":
/*!*******************************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/picker/picker.form-associated.js ***!
  \*******************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   FormAssociatedPicker: () => (/* binding */ FormAssociatedPicker)
/* harmony export */ });
/* harmony import */ var _form_associated_form_associated_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../form-associated/form-associated.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/form-associated/form-associated.js");
/* harmony import */ var _foundation_element_foundation_element_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../foundation-element/foundation-element.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/foundation-element/foundation-element.js");


class _Picker extends _foundation_element_foundation_element_js__WEBPACK_IMPORTED_MODULE_0__.FoundationElement {
}
/**
 * A form-associated base class for the {@link @microsoft/fast-foundation#(Picker:class)} component.
 *
 * @internal
 */
class FormAssociatedPicker extends (0,_form_associated_form_associated_js__WEBPACK_IMPORTED_MODULE_1__.FormAssociated)(_Picker) {
    constructor() {
        super(...arguments);
        this.proxy = document.createElement("input");
    }
}


/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/picker/picker.js":
/*!***************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/picker/picker.js ***!
  \***************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Picker: () => (/* binding */ Picker)
/* harmony export */ });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! tslib */ "./node_modules/@microsoft/fast-foundation/node_modules/tslib/tslib.es6.js");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @microsoft/fast-element */ "webpack/sharing/consume/default/@microsoft/fast-element/@microsoft/fast-element");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @microsoft/fast-web-utilities */ "./node_modules/@microsoft/fast-web-utilities/dist/strings.js");
/* harmony import */ var _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @microsoft/fast-web-utilities */ "./node_modules/@microsoft/fast-web-utilities/dist/key-codes.js");
/* harmony import */ var _anchored_region_index_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../anchored-region/index.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/anchored-region/anchored-region-config.js");
/* harmony import */ var _picker_menu_option_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./picker-menu-option.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/picker/picker-menu-option.js");
/* harmony import */ var _picker_list_item_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./picker-list-item.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/picker/picker-list-item.js");
/* harmony import */ var _picker_form_associated_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./picker.form-associated.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/picker/picker.form-associated.js");







const pickerInputTemplate = (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.html) `
    <input
        slot="input-region"
        role="combobox"
        type="text"
        autocapitalize="off"
        autocomplete="off"
        haspopup="list"
        aria-label="${x => x.label}"
        aria-labelledby="${x => x.labelledBy}"
        placeholder="${x => x.placeholder}"
        ${(0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.ref)("inputElement")}
    ></input>
`;
/**
 * A Picker Custom HTML Element.  This is an early "alpha" version of the component.
 * Developers should expect the api to evolve, breaking changes are possible.
 *
 * @alpha
 */
class Picker extends _picker_form_associated_js__WEBPACK_IMPORTED_MODULE_1__.FormAssociatedPicker {
    constructor() {
        super(...arguments);
        /**
         * Currently selected items. Comma delineated string ie. "apples,oranges".
         *
         * @alpha
         * @remarks
         * HTML Attribute: selection
         */
        this.selection = "";
        /**
         * Whether the component should remove an option from the list when it is in the selection
         *
         * @alpha
         * @remarks
         * HTML Attribute: filter-selected
         */
        this.filterSelected = true;
        /**
         * Whether the component should remove options based on the current query
         *
         * @alpha
         * @remarks
         * HTML Attribute: filter-query
         */
        this.filterQuery = true;
        /**
         * The text to present to assistive technolgies when no suggestions are available.
         *
         * @alpha
         * @remarks
         * HTML Attribute: no-suggestions-text
         */
        this.noSuggestionsText = "No suggestions available";
        /**
         *  The text to present to assistive technolgies when suggestions are available.
         *
         * @alpha
         * @remarks
         * HTML Attribute: suggestions-available-text
         */
        this.suggestionsAvailableText = "Suggestions available";
        /**
         * The text to present to assistive technologies when suggestions are loading.
         *
         * @alpha
         * @remarks
         * HTML Attribute: loading-text
         */
        this.loadingText = "Loading suggestions";
        /**
         * Controls menu placement
         *
         * @alpha
         * @remarks
         * HTML Attribute: menu-placement
         */
        this.menuPlacement = "bottom-fill";
        /**
         * Whether to display a loading state if the menu is opened.
         *
         * @alpha
         */
        this.showLoading = false;
        /**
         *  Current list of options in array form
         *
         * @alpha
         */
        this.optionsList = [];
        /**
         *  Current list of filtered options in array form
         *
         * @internal
         */
        this.filteredOptionsList = [];
        /**
         *  Indicates if the flyout menu is open or not
         *
         * @internal
         */
        this.flyoutOpen = false;
        /**
         *  Index of currently active menu option
         *
         * @internal
         */
        this.menuFocusIndex = -1;
        /**
         *  Internal flag to indicate no options available display should be shown.
         *
         * @internal
         */
        this.showNoOptions = false;
        /**
         *
         *
         * @internal
         */
        this.selectedItems = [];
        this.inputElementView = null;
        /**
         * Handle input event from input element
         */
        this.handleTextInput = (e) => {
            this.query = this.inputElement.value;
        };
        /**
         * Handle click event from input element
         */
        this.handleInputClick = (e) => {
            e.preventDefault();
            this.toggleFlyout(true);
        };
        /**
         * Sets properties on the anchored region once it is instanciated.
         */
        this.setRegionProps = () => {
            if (!this.flyoutOpen) {
                return;
            }
            if (this.region === null || this.region === undefined) {
                // TODO: limit this
                _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.DOM.queueUpdate(this.setRegionProps);
                return;
            }
            this.region.anchorElement = this.inputElement;
        };
        /**
         * matches menu placement values with the associated menu config
         */
        this.configLookup = {
            top: _anchored_region_index_js__WEBPACK_IMPORTED_MODULE_2__.FlyoutPosTop,
            bottom: _anchored_region_index_js__WEBPACK_IMPORTED_MODULE_2__.FlyoutPosBottom,
            tallest: _anchored_region_index_js__WEBPACK_IMPORTED_MODULE_2__.FlyoutPosTallest,
            "top-fill": _anchored_region_index_js__WEBPACK_IMPORTED_MODULE_2__.FlyoutPosTopFill,
            "bottom-fill": _anchored_region_index_js__WEBPACK_IMPORTED_MODULE_2__.FlyoutPosBottomFill,
            "tallest-fill": _anchored_region_index_js__WEBPACK_IMPORTED_MODULE_2__.FlyoutPosTallestFill,
        };
    }
    selectionChanged() {
        if (this.$fastController.isConnected) {
            this.handleSelectionChange();
            if (this.proxy instanceof HTMLInputElement) {
                this.proxy.value = this.selection;
                this.validate();
            }
        }
    }
    optionsChanged() {
        this.optionsList = this.options
            .split(",")
            .map(opt => opt.trim())
            .filter(opt => opt !== "");
    }
    menuPlacementChanged() {
        if (this.$fastController.isConnected) {
            this.updateMenuConfig();
        }
    }
    showLoadingChanged() {
        if (this.$fastController.isConnected) {
            _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.DOM.queueUpdate(() => {
                this.setFocusedOption(0);
            });
        }
    }
    listItemTemplateChanged() {
        this.updateListItemTemplate();
    }
    defaultListItemTemplateChanged() {
        this.updateListItemTemplate();
    }
    menuOptionTemplateChanged() {
        this.updateOptionTemplate();
    }
    defaultMenuOptionTemplateChanged() {
        this.updateOptionTemplate();
    }
    optionsListChanged() {
        this.updateFilteredOptions();
    }
    queryChanged() {
        if (this.$fastController.isConnected) {
            if (this.inputElement.value !== this.query) {
                this.inputElement.value = this.query;
            }
            this.updateFilteredOptions();
            this.$emit("querychange", { bubbles: false });
        }
    }
    filteredOptionsListChanged() {
        if (this.$fastController.isConnected) {
            this.showNoOptions =
                this.filteredOptionsList.length === 0 &&
                    this.menuElement.querySelectorAll('[role="listitem"]').length === 0;
            this.setFocusedOption(this.showNoOptions ? -1 : 0);
        }
    }
    flyoutOpenChanged() {
        if (this.flyoutOpen) {
            _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.DOM.queueUpdate(this.setRegionProps);
            this.$emit("menuopening", { bubbles: false });
        }
        else {
            this.$emit("menuclosing", { bubbles: false });
        }
    }
    showNoOptionsChanged() {
        if (this.$fastController.isConnected) {
            _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.DOM.queueUpdate(() => {
                this.setFocusedOption(0);
            });
        }
    }
    /**
     * @internal
     */
    connectedCallback() {
        super.connectedCallback();
        this.listElement = document.createElement(this.selectedListTag);
        this.appendChild(this.listElement);
        this.itemsPlaceholderElement = document.createComment("");
        this.listElement.append(this.itemsPlaceholderElement);
        this.inputElementView = pickerInputTemplate.render(this, this.listElement);
        const match = this.menuTag.toUpperCase();
        this.menuElement = Array.from(this.children).find((element) => {
            return element.tagName === match;
        });
        if (this.menuElement === undefined) {
            this.menuElement = document.createElement(this.menuTag);
            this.appendChild(this.menuElement);
        }
        if (this.menuElement.id === "") {
            this.menuElement.id = (0,_microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_3__.uniqueId)("listbox-");
        }
        this.menuId = this.menuElement.id;
        this.optionsPlaceholder = document.createComment("");
        this.menuElement.append(this.optionsPlaceholder);
        this.updateMenuConfig();
        _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.DOM.queueUpdate(() => this.initialize());
    }
    disconnectedCallback() {
        super.disconnectedCallback();
        this.toggleFlyout(false);
        this.inputElement.removeEventListener("input", this.handleTextInput);
        this.inputElement.removeEventListener("click", this.handleInputClick);
        if (this.inputElementView !== null) {
            this.inputElementView.dispose();
            this.inputElementView = null;
        }
    }
    /**
     * Move focus to the input element
     * @public
     */
    focus() {
        this.inputElement.focus();
    }
    /**
     * Initialize the component.  This is delayed a frame to ensure children are connected as well.
     */
    initialize() {
        this.updateListItemTemplate();
        this.updateOptionTemplate();
        this.itemsRepeatBehavior = new _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.RepeatDirective(x => x.selectedItems, x => x.activeListItemTemplate, { positioning: true }).createBehavior(this.itemsPlaceholderElement);
        this.inputElement.addEventListener("input", this.handleTextInput);
        this.inputElement.addEventListener("click", this.handleInputClick);
        /* eslint-disable-next-line @typescript-eslint/no-non-null-assertion */
        this.$fastController.addBehaviors([this.itemsRepeatBehavior]);
        this.menuElement.suggestionsAvailableText = this.suggestionsAvailableText;
        this.menuElement.addEventListener("optionsupdated", this.handleMenuOptionsUpdated);
        this.optionsRepeatBehavior = new _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.RepeatDirective(x => x.filteredOptionsList, x => x.activeMenuOptionTemplate, { positioning: true }).createBehavior(this.optionsPlaceholder);
        /* eslint-disable-next-line @typescript-eslint/no-non-null-assertion */
        this.$fastController.addBehaviors([this.optionsRepeatBehavior]);
        this.handleSelectionChange();
    }
    /**
     * Toggles the menu flyout
     */
    toggleFlyout(open) {
        if (this.flyoutOpen === open) {
            return;
        }
        if (open && document.activeElement === this.inputElement) {
            this.flyoutOpen = open;
            _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.DOM.queueUpdate(() => {
                if (this.menuElement !== undefined) {
                    this.setFocusedOption(0);
                }
                else {
                    this.disableMenu();
                }
            });
            return;
        }
        this.flyoutOpen = false;
        this.disableMenu();
        return;
    }
    /**
     * Handle the menu options updated event from the child menu
     */
    handleMenuOptionsUpdated(e) {
        e.preventDefault();
        if (this.flyoutOpen) {
            this.setFocusedOption(0);
        }
    }
    /**
     * Handle key down events.
     */
    handleKeyDown(e) {
        if (e.defaultPrevented) {
            return false;
        }
        switch (e.key) {
            // TODO: what should "home" and "end" keys do, exactly?
            //
            // case keyHome: {
            //     if (!this.flyoutOpen) {
            //         this.toggleFlyout(true);
            //     } else {
            //         if (this.menuElement.optionElements.length > 0) {
            //             this.setFocusedOption(0);
            //         }
            //     }
            //     return false;
            // }
            // case keyEnd: {
            //     if (!this.flyoutOpen) {
            //         this.toggleFlyout(true);
            //     } else {
            //         if (this.menuElement.optionElements.length > 0) {
            //             this.toggleFlyout(true);
            //             this.setFocusedOption(this.menuElement.optionElements.length - 1);
            //         }
            //     }
            //     return false;
            // }
            case _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_4__.keyArrowDown: {
                if (!this.flyoutOpen) {
                    this.toggleFlyout(true);
                }
                else {
                    const nextFocusOptionIndex = this.flyoutOpen
                        ? Math.min(this.menuFocusIndex + 1, this.menuElement.optionElements.length - 1)
                        : 0;
                    this.setFocusedOption(nextFocusOptionIndex);
                }
                return false;
            }
            case _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_4__.keyArrowUp: {
                if (!this.flyoutOpen) {
                    this.toggleFlyout(true);
                }
                else {
                    const previousFocusOptionIndex = this.flyoutOpen
                        ? Math.max(this.menuFocusIndex - 1, 0)
                        : 0;
                    this.setFocusedOption(previousFocusOptionIndex);
                }
                return false;
            }
            case _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_4__.keyEscape: {
                this.toggleFlyout(false);
                return false;
            }
            case _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_4__.keyEnter: {
                if (this.menuFocusIndex !== -1 &&
                    this.menuElement.optionElements.length > this.menuFocusIndex) {
                    this.menuElement.optionElements[this.menuFocusIndex].click();
                }
                return false;
            }
            case _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_4__.keyArrowRight: {
                if (document.activeElement !== this.inputElement) {
                    this.incrementFocusedItem(1);
                    return false;
                }
                // don't block if arrow keys moving caret in input element
                return true;
            }
            case _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_4__.keyArrowLeft: {
                if (this.inputElement.selectionStart === 0) {
                    this.incrementFocusedItem(-1);
                    return false;
                }
                // don't block if arrow keys moving caret in input element
                return true;
            }
            case _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_4__.keyDelete:
            case _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_4__.keyBackspace: {
                if (document.activeElement === null) {
                    return true;
                }
                if (document.activeElement === this.inputElement) {
                    if (this.inputElement.selectionStart === 0) {
                        this.selection = this.selectedItems
                            .slice(0, this.selectedItems.length - 1)
                            .toString();
                        this.toggleFlyout(false);
                        return false;
                    }
                    // let text deletion proceed
                    return true;
                }
                const selectedItems = Array.from(this.listElement.children);
                const currentFocusedItemIndex = selectedItems.indexOf(document.activeElement);
                if (currentFocusedItemIndex > -1) {
                    // delete currently focused item
                    this.selection = this.selectedItems
                        .splice(currentFocusedItemIndex, 1)
                        .toString();
                    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.DOM.queueUpdate(() => {
                        selectedItems[Math.min(selectedItems.length, currentFocusedItemIndex)].focus();
                    });
                    return false;
                }
                return true;
            }
        }
        this.toggleFlyout(true);
        return true;
    }
    /**
     * Handle focus in events.
     */
    handleFocusIn(e) {
        return false;
    }
    /**
     * Handle focus out events.
     */
    handleFocusOut(e) {
        if (this.menuElement === undefined ||
            !this.menuElement.contains(e.relatedTarget)) {
            this.toggleFlyout(false);
        }
        return false;
    }
    /**
     * The list of selected items has changed
     */
    handleSelectionChange() {
        if (this.selectedItems.toString() === this.selection) {
            return;
        }
        this.selectedItems = this.selection === "" ? [] : this.selection.split(",");
        this.updateFilteredOptions();
        _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.DOM.queueUpdate(() => {
            this.checkMaxItems();
        });
        this.$emit("selectionchange", { bubbles: false });
    }
    /**
     * Anchored region is loaded, menu and options exist in the DOM.
     */
    handleRegionLoaded(e) {
        _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.DOM.queueUpdate(() => {
            this.setFocusedOption(0);
            this.$emit("menuloaded", { bubbles: false });
        });
    }
    /**
     * Checks if the maximum number of items has been chosen and updates the ui.
     */
    checkMaxItems() {
        if (this.inputElement === undefined) {
            return;
        }
        if (this.maxSelected !== undefined &&
            this.selectedItems.length >= this.maxSelected) {
            if (document.activeElement === this.inputElement) {
                const selectedItemInstances = Array.from(this.listElement.querySelectorAll("[role='listitem']"));
                selectedItemInstances[selectedItemInstances.length - 1].focus();
            }
            this.inputElement.hidden = true;
        }
        else {
            this.inputElement.hidden = false;
        }
    }
    /**
     * A list item has been invoked.
     */
    handleItemInvoke(e) {
        if (e.defaultPrevented) {
            return false;
        }
        if (e.target instanceof _picker_list_item_js__WEBPACK_IMPORTED_MODULE_5__.PickerListItem) {
            const listItems = Array.from(this.listElement.querySelectorAll("[role='listitem']"));
            const itemIndex = listItems.indexOf(e.target);
            if (itemIndex !== -1) {
                const newSelection = this.selectedItems.slice();
                newSelection.splice(itemIndex, 1);
                this.selection = newSelection.toString();
                _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.DOM.queueUpdate(() => this.incrementFocusedItem(0));
            }
            return false;
        }
        return true;
    }
    /**
     * A menu option has been invoked.
     */
    handleOptionInvoke(e) {
        if (e.defaultPrevented) {
            return false;
        }
        if (e.target instanceof _picker_menu_option_js__WEBPACK_IMPORTED_MODULE_6__.PickerMenuOption) {
            if (e.target.value !== undefined) {
                this.selection = `${this.selection}${this.selection === "" ? "" : ","}${e.target.value}`;
            }
            this.inputElement.value = "";
            this.query = "";
            this.inputElement.focus();
            this.toggleFlyout(false);
            return false;
        }
        // const value: string = (e.target as PickerMenuOption).value;
        return true;
    }
    /**
     * Increments the focused list item by the specified amount
     */
    incrementFocusedItem(increment) {
        if (this.selectedItems.length === 0) {
            this.inputElement.focus();
            return;
        }
        const selectedItemsAsElements = Array.from(this.listElement.querySelectorAll("[role='listitem']"));
        if (document.activeElement !== null) {
            let currentFocusedItemIndex = selectedItemsAsElements.indexOf(document.activeElement);
            if (currentFocusedItemIndex === -1) {
                // use the input element
                currentFocusedItemIndex = selectedItemsAsElements.length;
            }
            const newFocusedItemIndex = Math.min(selectedItemsAsElements.length, Math.max(0, currentFocusedItemIndex + increment));
            if (newFocusedItemIndex === selectedItemsAsElements.length) {
                if (this.maxSelected !== undefined &&
                    this.selectedItems.length >= this.maxSelected) {
                    selectedItemsAsElements[newFocusedItemIndex - 1].focus();
                }
                else {
                    this.inputElement.focus();
                }
            }
            else {
                selectedItemsAsElements[newFocusedItemIndex].focus();
            }
        }
    }
    /**
     * Disables the menu. Note that the menu can be open, just doens't have any valid options on display.
     */
    disableMenu() {
        var _a, _b, _c;
        this.menuFocusIndex = -1;
        this.menuFocusOptionId = undefined;
        (_a = this.inputElement) === null || _a === void 0 ? void 0 : _a.removeAttribute("aria-activedescendant");
        (_b = this.inputElement) === null || _b === void 0 ? void 0 : _b.removeAttribute("aria-owns");
        (_c = this.inputElement) === null || _c === void 0 ? void 0 : _c.removeAttribute("aria-expanded");
    }
    /**
     * Sets the currently focused menu option by index
     */
    setFocusedOption(optionIndex) {
        if (!this.flyoutOpen ||
            optionIndex === -1 ||
            this.showNoOptions ||
            this.showLoading) {
            this.disableMenu();
            return;
        }
        if (this.menuElement.optionElements.length === 0) {
            return;
        }
        this.menuElement.optionElements.forEach((element) => {
            element.setAttribute("aria-selected", "false");
        });
        this.menuFocusIndex = optionIndex;
        if (this.menuFocusIndex > this.menuElement.optionElements.length - 1) {
            this.menuFocusIndex = this.menuElement.optionElements.length - 1;
        }
        this.menuFocusOptionId = this.menuElement.optionElements[this.menuFocusIndex].id;
        this.inputElement.setAttribute("aria-owns", this.menuId);
        this.inputElement.setAttribute("aria-expanded", "true");
        this.inputElement.setAttribute("aria-activedescendant", this.menuFocusOptionId);
        const focusedOption = this.menuElement.optionElements[this.menuFocusIndex];
        focusedOption.setAttribute("aria-selected", "true");
        this.menuElement.scrollTo(0, focusedOption.offsetTop);
    }
    /**
     * Updates the template used for the list item repeat behavior
     */
    updateListItemTemplate() {
        var _a;
        this.activeListItemTemplate =
            (_a = this.listItemTemplate) !== null && _a !== void 0 ? _a : this.defaultListItemTemplate;
    }
    /**
     * Updates the template used for the menu option repeat behavior
     */
    updateOptionTemplate() {
        var _a;
        this.activeMenuOptionTemplate =
            (_a = this.menuOptionTemplate) !== null && _a !== void 0 ? _a : this.defaultMenuOptionTemplate;
    }
    /**
     * Updates the filtered options array
     */
    updateFilteredOptions() {
        this.filteredOptionsList = this.optionsList.slice(0);
        if (this.filterSelected) {
            this.filteredOptionsList = this.filteredOptionsList.filter(el => this.selectedItems.indexOf(el) === -1);
        }
        if (this.filterQuery && this.query !== "" && this.query !== undefined) {
            this.filteredOptionsList = this.filteredOptionsList.filter(el => el.indexOf(this.query) !== -1);
        }
    }
    /**
     * Updates the menu configuration
     */
    updateMenuConfig() {
        let newConfig = this.configLookup[this.menuPlacement];
        if (newConfig === null) {
            newConfig = _anchored_region_index_js__WEBPACK_IMPORTED_MODULE_2__.FlyoutPosBottomFill;
        }
        this.menuConfig = Object.assign(Object.assign({}, newConfig), { autoUpdateMode: "auto", fixedPlacement: true, horizontalViewportLock: false, verticalViewportLock: false });
    }
}
(0,tslib__WEBPACK_IMPORTED_MODULE_7__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ attribute: "selection" })
], Picker.prototype, "selection", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_7__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ attribute: "options" })
], Picker.prototype, "options", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_7__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ attribute: "filter-selected", mode: "boolean" })
], Picker.prototype, "filterSelected", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_7__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ attribute: "filter-query", mode: "boolean" })
], Picker.prototype, "filterQuery", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_7__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ attribute: "max-selected" })
], Picker.prototype, "maxSelected", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_7__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ attribute: "no-suggestions-text" })
], Picker.prototype, "noSuggestionsText", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_7__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ attribute: "suggestions-available-text" })
], Picker.prototype, "suggestionsAvailableText", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_7__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ attribute: "loading-text" })
], Picker.prototype, "loadingText", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_7__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ attribute: "label" })
], Picker.prototype, "label", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_7__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ attribute: "labelledby" })
], Picker.prototype, "labelledBy", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_7__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ attribute: "placeholder" })
], Picker.prototype, "placeholder", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_7__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ attribute: "menu-placement" })
], Picker.prototype, "menuPlacement", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_7__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.observable
], Picker.prototype, "showLoading", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_7__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.observable
], Picker.prototype, "listItemTemplate", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_7__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.observable
], Picker.prototype, "defaultListItemTemplate", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_7__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.observable
], Picker.prototype, "activeListItemTemplate", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_7__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.observable
], Picker.prototype, "menuOptionTemplate", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_7__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.observable
], Picker.prototype, "defaultMenuOptionTemplate", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_7__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.observable
], Picker.prototype, "activeMenuOptionTemplate", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_7__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.observable
], Picker.prototype, "listItemContentsTemplate", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_7__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.observable
], Picker.prototype, "menuOptionContentsTemplate", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_7__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.observable
], Picker.prototype, "optionsList", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_7__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.observable
], Picker.prototype, "query", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_7__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.observable
], Picker.prototype, "filteredOptionsList", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_7__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.observable
], Picker.prototype, "flyoutOpen", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_7__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.observable
], Picker.prototype, "menuId", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_7__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.observable
], Picker.prototype, "selectedListTag", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_7__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.observable
], Picker.prototype, "menuTag", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_7__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.observable
], Picker.prototype, "menuFocusIndex", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_7__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.observable
], Picker.prototype, "menuFocusOptionId", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_7__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.observable
], Picker.prototype, "showNoOptions", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_7__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.observable
], Picker.prototype, "menuConfig", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_7__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.observable
], Picker.prototype, "selectedItems", void 0);


/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/picker/picker.template.js":
/*!************************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/picker/picker.template.js ***!
  \************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   pickerTemplate: () => (/* binding */ pickerTemplate)
/* harmony export */ });
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @microsoft/fast-element */ "webpack/sharing/consume/default/@microsoft/fast-element/@microsoft/fast-element");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _anchored_region_anchored_region_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../anchored-region/anchored-region.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/anchored-region/anchored-region.js");
/* harmony import */ var _picker_menu_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./picker-menu.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/picker/picker-menu.js");
/* harmony import */ var _picker_menu_option_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./picker-menu-option.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/picker/picker-menu-option.js");
/* harmony import */ var _picker_list_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./picker-list.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/picker/picker-list.js");
/* harmony import */ var _picker_list_item_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./picker-list-item.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/picker/picker-list-item.js");






function createDefaultListItemTemplate(context) {
    const pickerListItemTag = context.tagFor(_picker_list_item_js__WEBPACK_IMPORTED_MODULE_1__.PickerListItem);
    return (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.html) `
    <${pickerListItemTag}
        value="${x => x}"
        :contentsTemplate="${(x, c) => c.parent.listItemContentsTemplate}"
    >
    </${pickerListItemTag}>
    `;
}
function createDefaultMenuOptionTemplate(context) {
    const pickerMenuOptionTag = context.tagFor(_picker_menu_option_js__WEBPACK_IMPORTED_MODULE_2__.PickerMenuOption);
    return (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.html) `
    <${pickerMenuOptionTag}
        value="${x => x}"
        :contentsTemplate="${(x, c) => c.parent.menuOptionContentsTemplate}"
    >
    </${pickerMenuOptionTag}>
    `;
}
/**
 * The template for the List Picker component.
 * @public
 */
const pickerTemplate = (context, definition) => {
    const anchoredRegionTag = context.tagFor(_anchored_region_anchored_region_js__WEBPACK_IMPORTED_MODULE_3__.AnchoredRegion);
    const pickerMenuTag = context.tagFor(_picker_menu_js__WEBPACK_IMPORTED_MODULE_4__.PickerMenu);
    const pickerListTag = context.tagFor(_picker_list_js__WEBPACK_IMPORTED_MODULE_5__.PickerList);
    const progressRingTag = context.tagFor(_picker_list_js__WEBPACK_IMPORTED_MODULE_5__.PickerList);
    const defaultListItemTemplate = createDefaultListItemTemplate(context);
    const defaultMenuOptionTemplate = createDefaultMenuOptionTemplate(context);
    return (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.html) `
        <template
            :selectedListTag="${() => pickerListTag}"
            :menuTag="${() => pickerMenuTag}"
            :defaultListItemTemplate="${defaultListItemTemplate}"
            :defaultMenuOptionTemplate="${defaultMenuOptionTemplate}"
            @focusin="${(x, c) => x.handleFocusIn(c.event)}"
            @focusout="${(x, c) => x.handleFocusOut(c.event)}"
            @keydown="${(x, c) => x.handleKeyDown(c.event)}"
            @pickeriteminvoked="${(x, c) => x.handleItemInvoke(c.event)}"
            @pickeroptioninvoked="${(x, c) => x.handleOptionInvoke(c.event)}"
        >
            <slot name="list-region"></slot>

            ${(0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.when)(x => x.flyoutOpen, (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.html) `
                <${anchoredRegionTag}
                    class="region"
                    part="region"
                    auto-update-mode="${x => x.menuConfig.autoUpdateMode}"
                    fixed-placement="${x => x.menuConfig.fixedPlacement}"
                    vertical-positioning-mode="${x => x.menuConfig.verticalPositioningMode}"
                    vertical-default-position="${x => x.menuConfig.verticalDefaultPosition}"
                    vertical-scaling="${x => x.menuConfig.verticalScaling}"
                    vertical-inset="${x => x.menuConfig.verticalInset}"
                    vertical-viewport-lock="${x => x.menuConfig.verticalViewportLock}"
                    horizontal-positioning-mode="${x => x.menuConfig.horizontalPositioningMode}"
                    horizontal-default-position="${x => x.menuConfig.horizontalDefaultPosition}"
                    horizontal-scaling="${x => x.menuConfig.horizontalScaling}"
                    horizontal-inset="${x => x.menuConfig.horizontalInset}"
                    horizontal-viewport-lock="${x => x.menuConfig.horizontalViewportLock}"
                    @loaded="${(x, c) => x.handleRegionLoaded(c.event)}"
                    ${(0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.ref)("region")}
                >
                    ${(0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.when)(x => !x.showNoOptions && !x.showLoading, (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.html) `
                            <slot name="menu-region"></slot>
                        `)}
                    ${(0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.when)(x => x.showNoOptions && !x.showLoading, (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.html) `
                            <div class="no-options-display" part="no-options-display">
                                <slot name="no-options-region">
                                    ${x => x.noSuggestionsText}
                                </slot>
                            </div>
                        `)}
                    ${(0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.when)(x => x.showLoading, (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.html) `
                            <div class="loading-display" part="loading-display">
                                <slot name="loading-region">
                                    <${progressRingTag}
                                        part="loading-progress"
                                        class="loading-progress
                                        slot="loading-region"
                                    ></${progressRingTag}>
                                        ${x => x.loadingText}
                                </slot>
                            </div>
                        `)}
                </${anchoredRegionTag}>
            `)}
        </template>
    `;
};


/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/progress-ring/index.js":
/*!*********************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/progress-ring/index.js ***!
  \*********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   progressRingTemplate: () => (/* reexport safe */ _progress_ring_template_js__WEBPACK_IMPORTED_MODULE_0__.progressRingTemplate)
/* harmony export */ });
/* harmony import */ var _progress_ring_template_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./progress-ring.template.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/progress-ring/progress-ring.template.js");



/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/progress-ring/progress-ring.template.js":
/*!**************************************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/progress-ring/progress-ring.template.js ***!
  \**************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   progressRingTemplate: () => (/* binding */ progressRingTemplate)
/* harmony export */ });
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @microsoft/fast-element */ "webpack/sharing/consume/default/@microsoft/fast-element/@microsoft/fast-element");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__);

const progressSegments = 44;
/**
 * The template for the {@link @microsoft/fast-foundation#BaseProgress} component.
 * @public
 */
const progressRingTemplate = (context, definition) => (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.html) `
    <template
        role="progressbar"
        aria-valuenow="${x => x.value}"
        aria-valuemin="${x => x.min}"
        aria-valuemax="${x => x.max}"
        class="${x => (x.paused ? "paused" : "")}"
    >
        ${(0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.when)(x => typeof x.value === "number", (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.html) `
                <svg
                    class="progress"
                    part="progress"
                    viewBox="0 0 16 16"
                    slot="determinate"
                >
                    <circle
                        class="background"
                        part="background"
                        cx="8px"
                        cy="8px"
                        r="7px"
                    ></circle>
                    <circle
                        class="determinate"
                        part="determinate"
                        style="stroke-dasharray: ${x => (progressSegments * x.percentComplete) /
    100}px ${progressSegments}px"
                        cx="8px"
                        cy="8px"
                        r="7px"
                    ></circle>
                </svg>
            `, (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.html) `
                <slot name="indeterminate" slot="indeterminate">
                    ${definition.indeterminateIndicator || ""}
                </slot>
            `)}
    </template>
`;


/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/progress/base-progress.js":
/*!************************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/progress/base-progress.js ***!
  \************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   BaseProgress: () => (/* binding */ BaseProgress)
/* harmony export */ });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! tslib */ "./node_modules/@microsoft/fast-foundation/node_modules/tslib/tslib.es6.js");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @microsoft/fast-element */ "webpack/sharing/consume/default/@microsoft/fast-element/@microsoft/fast-element");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _foundation_element_foundation_element_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../foundation-element/foundation-element.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/foundation-element/foundation-element.js");



/**
 * An Progress HTML Element.
 * Implements the {@link https://www.w3.org/TR/wai-aria-1.1/#progressbar | ARIA progressbar }.
 *
 * @slot indeterminate - The slot for a custom indeterminate indicator
 * @csspart progress - Represents the progress element
 * @csspart determinate - The determinate indicator
 * @csspart indeterminate - The indeterminate indicator
 *
 * @public
 */
class BaseProgress extends _foundation_element_foundation_element_js__WEBPACK_IMPORTED_MODULE_1__.FoundationElement {
    constructor() {
        super(...arguments);
        /**
         * Indicates progress in %
         * @internal
         */
        this.percentComplete = 0;
    }
    valueChanged() {
        if (this.$fastController.isConnected) {
            this.updatePercentComplete();
        }
    }
    minChanged() {
        if (this.$fastController.isConnected) {
            this.updatePercentComplete();
        }
    }
    maxChanged() {
        if (this.$fastController.isConnected) {
            this.updatePercentComplete();
        }
    }
    /**
     * @internal
     */
    connectedCallback() {
        super.connectedCallback();
        this.updatePercentComplete();
    }
    updatePercentComplete() {
        const min = typeof this.min === "number" ? this.min : 0;
        const max = typeof this.max === "number" ? this.max : 100;
        const value = typeof this.value === "number" ? this.value : 0;
        const range = max - min;
        this.percentComplete =
            range === 0 ? 0 : Math.fround(((value - min) / range) * 100);
    }
}
(0,tslib__WEBPACK_IMPORTED_MODULE_2__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ converter: _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.nullableNumberConverter })
], BaseProgress.prototype, "value", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_2__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ converter: _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.nullableNumberConverter })
], BaseProgress.prototype, "min", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_2__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ converter: _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.nullableNumberConverter })
], BaseProgress.prototype, "max", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_2__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ mode: "boolean" })
], BaseProgress.prototype, "paused", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_2__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.observable
], BaseProgress.prototype, "percentComplete", void 0);


/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/progress/index.js":
/*!****************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/progress/index.js ***!
  \****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   BaseProgress: () => (/* reexport safe */ _base_progress_js__WEBPACK_IMPORTED_MODULE_0__.BaseProgress),
/* harmony export */   progressTemplate: () => (/* reexport safe */ _progress_template_js__WEBPACK_IMPORTED_MODULE_1__.progressTemplate)
/* harmony export */ });
/* harmony import */ var _base_progress_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base-progress.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/progress/base-progress.js");
/* harmony import */ var _progress_template_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./progress.template.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/progress/progress.template.js");




/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/progress/progress.template.js":
/*!****************************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/progress/progress.template.js ***!
  \****************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   progressTemplate: () => (/* binding */ progressTemplate)
/* harmony export */ });
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @microsoft/fast-element */ "webpack/sharing/consume/default/@microsoft/fast-element/@microsoft/fast-element");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__);

/**
 * The template for the {@link @microsoft/fast-foundation#BaseProgress} component.
 * @public
 */
const progressTemplate = (context, defintion) => (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.html) `
    <template
        role="progressbar"
        aria-valuenow="${x => x.value}"
        aria-valuemin="${x => x.min}"
        aria-valuemax="${x => x.max}"
        class="${x => (x.paused ? "paused" : "")}"
    >
        ${(0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.when)(x => typeof x.value === "number", (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.html) `
                <div class="progress" part="progress" slot="determinate">
                    <div
                        class="determinate"
                        part="determinate"
                        style="width: ${x => x.percentComplete}%"
                    ></div>
                </div>
            `, (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.html) `
                <div class="progress" part="progress" slot="indeterminate">
                    <slot class="indeterminate" name="indeterminate">
                        ${defintion.indeterminateIndicator1 || ""}
                        ${defintion.indeterminateIndicator2 || ""}
                    </slot>
                </div>
            `)}
    </template>
`;


/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/radio-group/index.js":
/*!*******************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/radio-group/index.js ***!
  \*******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   RadioGroup: () => (/* reexport safe */ _radio_group_js__WEBPACK_IMPORTED_MODULE_1__.RadioGroup),
/* harmony export */   radioGroupTemplate: () => (/* reexport safe */ _radio_group_template_js__WEBPACK_IMPORTED_MODULE_0__.radioGroupTemplate)
/* harmony export */ });
/* harmony import */ var _radio_group_template_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./radio-group.template.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/radio-group/radio-group.template.js");
/* harmony import */ var _radio_group_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./radio-group.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/radio-group/radio-group.js");




/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/radio-group/radio-group.js":
/*!*************************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/radio-group/radio-group.js ***!
  \*************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   RadioGroup: () => (/* binding */ RadioGroup)
/* harmony export */ });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! tslib */ "./node_modules/@microsoft/fast-foundation/node_modules/tslib/tslib.es6.js");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @microsoft/fast-element */ "webpack/sharing/consume/default/@microsoft/fast-element/@microsoft/fast-element");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @microsoft/fast-web-utilities */ "./node_modules/@microsoft/fast-web-utilities/dist/aria.js");
/* harmony import */ var _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @microsoft/fast-web-utilities */ "./node_modules/@microsoft/fast-web-utilities/dist/key-codes.js");
/* harmony import */ var _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @microsoft/fast-web-utilities */ "./node_modules/@microsoft/fast-web-utilities/dist/localization.js");
/* harmony import */ var _utilities_direction_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../utilities/direction.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/utilities/direction.js");
/* harmony import */ var _foundation_element_foundation_element_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../foundation-element/foundation-element.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/foundation-element/foundation-element.js");





/**
 * An Radio Group Custom HTML Element.
 * Implements the {@link https://www.w3.org/TR/wai-aria-1.1/#radiogroup | ARIA radiogroup }.
 *
 * @slot label - The slot for the label
 * @slot - The default slot for radio buttons
 * @csspart positioning-region - The positioning region for laying out the radios
 * @fires change - Fires a custom 'change' event when the value changes
 *
 * @public
 */
class RadioGroup extends _foundation_element_foundation_element_js__WEBPACK_IMPORTED_MODULE_1__.FoundationElement {
    constructor() {
        super(...arguments);
        /**
         * The orientation of the group
         *
         * @public
         * @remarks
         * HTML Attribute: orientation
         */
        this.orientation = _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_2__.Orientation.horizontal;
        this.radioChangeHandler = (e) => {
            const changedRadio = e.target;
            if (changedRadio.checked) {
                this.slottedRadioButtons.forEach((radio) => {
                    if (radio !== changedRadio) {
                        radio.checked = false;
                        if (!this.isInsideFoundationToolbar) {
                            radio.setAttribute("tabindex", "-1");
                        }
                    }
                });
                this.selectedRadio = changedRadio;
                this.value = changedRadio.value;
                changedRadio.setAttribute("tabindex", "0");
                this.focusedRadio = changedRadio;
            }
            e.stopPropagation();
        };
        this.moveToRadioByIndex = (group, index) => {
            const radio = group[index];
            if (!this.isInsideToolbar) {
                radio.setAttribute("tabindex", "0");
                if (radio.readOnly) {
                    this.slottedRadioButtons.forEach((nextRadio) => {
                        if (nextRadio !== radio) {
                            nextRadio.setAttribute("tabindex", "-1");
                        }
                    });
                }
                else {
                    radio.checked = true;
                    this.selectedRadio = radio;
                }
            }
            this.focusedRadio = radio;
            radio.focus();
        };
        this.moveRightOffGroup = () => {
            var _a;
            (_a = this.nextElementSibling) === null || _a === void 0 ? void 0 : _a.focus();
        };
        this.moveLeftOffGroup = () => {
            var _a;
            (_a = this.previousElementSibling) === null || _a === void 0 ? void 0 : _a.focus();
        };
        /**
         * @internal
         */
        this.focusOutHandler = (e) => {
            const group = this.slottedRadioButtons;
            const radio = e.target;
            const index = radio !== null ? group.indexOf(radio) : 0;
            const focusedIndex = this.focusedRadio
                ? group.indexOf(this.focusedRadio)
                : -1;
            if ((focusedIndex === 0 && index === focusedIndex) ||
                (focusedIndex === group.length - 1 && focusedIndex === index)) {
                if (!this.selectedRadio) {
                    this.focusedRadio = group[0];
                    this.focusedRadio.setAttribute("tabindex", "0");
                    group.forEach((nextRadio) => {
                        if (nextRadio !== this.focusedRadio) {
                            nextRadio.setAttribute("tabindex", "-1");
                        }
                    });
                }
                else {
                    this.focusedRadio = this.selectedRadio;
                    if (!this.isInsideFoundationToolbar) {
                        this.selectedRadio.setAttribute("tabindex", "0");
                        group.forEach((nextRadio) => {
                            if (nextRadio !== this.selectedRadio) {
                                nextRadio.setAttribute("tabindex", "-1");
                            }
                        });
                    }
                }
            }
            return true;
        };
        /**
         * @internal
         */
        this.clickHandler = (e) => {
            const radio = e.target;
            if (radio) {
                const group = this.slottedRadioButtons;
                if (radio.checked || group.indexOf(radio) === 0) {
                    radio.setAttribute("tabindex", "0");
                    this.selectedRadio = radio;
                }
                else {
                    radio.setAttribute("tabindex", "-1");
                    this.selectedRadio = null;
                }
                this.focusedRadio = radio;
            }
            e.preventDefault();
        };
        this.shouldMoveOffGroupToTheRight = (index, group, key) => {
            return index === group.length && this.isInsideToolbar && key === _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_3__.keyArrowRight;
        };
        this.shouldMoveOffGroupToTheLeft = (group, key) => {
            const index = this.focusedRadio ? group.indexOf(this.focusedRadio) - 1 : 0;
            return index < 0 && this.isInsideToolbar && key === _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_3__.keyArrowLeft;
        };
        this.checkFocusedRadio = () => {
            if (this.focusedRadio !== null &&
                !this.focusedRadio.readOnly &&
                !this.focusedRadio.checked) {
                this.focusedRadio.checked = true;
                this.focusedRadio.setAttribute("tabindex", "0");
                this.focusedRadio.focus();
                this.selectedRadio = this.focusedRadio;
            }
        };
        this.moveRight = (e) => {
            const group = this.slottedRadioButtons;
            let index = 0;
            index = this.focusedRadio ? group.indexOf(this.focusedRadio) + 1 : 1;
            if (this.shouldMoveOffGroupToTheRight(index, group, e.key)) {
                this.moveRightOffGroup();
                return;
            }
            else if (index === group.length) {
                index = 0;
            }
            /* looping to get to next radio that is not disabled */
            /* matching native radio/radiogroup which does not select an item if there is only 1 in the group */
            while (index < group.length && group.length > 1) {
                if (!group[index].disabled) {
                    this.moveToRadioByIndex(group, index);
                    break;
                }
                else if (this.focusedRadio && index === group.indexOf(this.focusedRadio)) {
                    break;
                }
                else if (index + 1 >= group.length) {
                    if (this.isInsideToolbar) {
                        break;
                    }
                    else {
                        index = 0;
                    }
                }
                else {
                    index += 1;
                }
            }
        };
        this.moveLeft = (e) => {
            const group = this.slottedRadioButtons;
            let index = 0;
            index = this.focusedRadio ? group.indexOf(this.focusedRadio) - 1 : 0;
            index = index < 0 ? group.length - 1 : index;
            if (this.shouldMoveOffGroupToTheLeft(group, e.key)) {
                this.moveLeftOffGroup();
                return;
            }
            /* looping to get to next radio that is not disabled */
            while (index >= 0 && group.length > 1) {
                if (!group[index].disabled) {
                    this.moveToRadioByIndex(group, index);
                    break;
                }
                else if (this.focusedRadio && index === group.indexOf(this.focusedRadio)) {
                    break;
                }
                else if (index - 1 < 0) {
                    index = group.length - 1;
                }
                else {
                    index -= 1;
                }
            }
        };
        /**
         * keyboard handling per https://w3c.github.io/aria-practices/#for-radio-groups-not-contained-in-a-toolbar
         * navigation is different when there is an ancestor with role='toolbar'
         *
         * @internal
         */
        this.keydownHandler = (e) => {
            const key = e.key;
            if (key in _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_3__.ArrowKeys && this.isInsideFoundationToolbar) {
                return true;
            }
            switch (key) {
                case _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_3__.keyEnter: {
                    this.checkFocusedRadio();
                    break;
                }
                case _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_3__.keyArrowRight:
                case _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_3__.keyArrowDown: {
                    if (this.direction === _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_4__.Direction.ltr) {
                        this.moveRight(e);
                    }
                    else {
                        this.moveLeft(e);
                    }
                    break;
                }
                case _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_3__.keyArrowLeft:
                case _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_3__.keyArrowUp: {
                    if (this.direction === _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_4__.Direction.ltr) {
                        this.moveLeft(e);
                    }
                    else {
                        this.moveRight(e);
                    }
                    break;
                }
                default: {
                    return true;
                }
            }
        };
    }
    readOnlyChanged() {
        if (this.slottedRadioButtons !== undefined) {
            this.slottedRadioButtons.forEach((radio) => {
                if (this.readOnly) {
                    radio.readOnly = true;
                }
                else {
                    radio.readOnly = false;
                }
            });
        }
    }
    disabledChanged() {
        if (this.slottedRadioButtons !== undefined) {
            this.slottedRadioButtons.forEach((radio) => {
                if (this.disabled) {
                    radio.disabled = true;
                }
                else {
                    radio.disabled = false;
                }
            });
        }
    }
    nameChanged() {
        if (this.slottedRadioButtons) {
            this.slottedRadioButtons.forEach((radio) => {
                radio.setAttribute("name", this.name);
            });
        }
    }
    valueChanged() {
        if (this.slottedRadioButtons) {
            this.slottedRadioButtons.forEach((radio) => {
                if (radio.value === this.value) {
                    radio.checked = true;
                    this.selectedRadio = radio;
                }
            });
        }
        this.$emit("change");
    }
    slottedRadioButtonsChanged(oldValue, newValue) {
        if (this.slottedRadioButtons && this.slottedRadioButtons.length > 0) {
            this.setupRadioButtons();
        }
    }
    get parentToolbar() {
        return this.closest('[role="toolbar"]');
    }
    get isInsideToolbar() {
        var _a;
        return ((_a = this.parentToolbar) !== null && _a !== void 0 ? _a : false);
    }
    get isInsideFoundationToolbar() {
        var _a;
        return !!((_a = this.parentToolbar) === null || _a === void 0 ? void 0 : _a["$fastController"]);
    }
    /**
     * @internal
     */
    connectedCallback() {
        super.connectedCallback();
        this.direction = (0,_utilities_direction_js__WEBPACK_IMPORTED_MODULE_5__.getDirection)(this);
        this.setupRadioButtons();
    }
    disconnectedCallback() {
        this.slottedRadioButtons.forEach((radio) => {
            radio.removeEventListener("change", this.radioChangeHandler);
        });
    }
    setupRadioButtons() {
        const checkedRadios = this.slottedRadioButtons.filter((radio) => {
            return radio.hasAttribute("checked");
        });
        const numberOfCheckedRadios = checkedRadios ? checkedRadios.length : 0;
        if (numberOfCheckedRadios > 1) {
            const lastCheckedRadio = checkedRadios[numberOfCheckedRadios - 1];
            lastCheckedRadio.checked = true;
        }
        let foundMatchingVal = false;
        this.slottedRadioButtons.forEach((radio) => {
            if (this.name !== undefined) {
                radio.setAttribute("name", this.name);
            }
            if (this.disabled) {
                radio.disabled = true;
            }
            if (this.readOnly) {
                radio.readOnly = true;
            }
            if (this.value && this.value === radio.value) {
                this.selectedRadio = radio;
                this.focusedRadio = radio;
                radio.checked = true;
                radio.setAttribute("tabindex", "0");
                foundMatchingVal = true;
            }
            else {
                if (!this.isInsideFoundationToolbar) {
                    radio.setAttribute("tabindex", "-1");
                }
                radio.checked = false;
            }
            radio.addEventListener("change", this.radioChangeHandler);
        });
        if (this.value === undefined && this.slottedRadioButtons.length > 0) {
            const checkedRadios = this.slottedRadioButtons.filter((radio) => {
                return radio.hasAttribute("checked");
            });
            const numberOfCheckedRadios = checkedRadios !== null ? checkedRadios.length : 0;
            if (numberOfCheckedRadios > 0 && !foundMatchingVal) {
                const lastCheckedRadio = checkedRadios[numberOfCheckedRadios - 1];
                lastCheckedRadio.checked = true;
                this.focusedRadio = lastCheckedRadio;
                lastCheckedRadio.setAttribute("tabindex", "0");
            }
            else {
                this.slottedRadioButtons[0].setAttribute("tabindex", "0");
                this.focusedRadio = this.slottedRadioButtons[0];
            }
        }
    }
}
(0,tslib__WEBPACK_IMPORTED_MODULE_6__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ attribute: "readonly", mode: "boolean" })
], RadioGroup.prototype, "readOnly", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_6__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ attribute: "disabled", mode: "boolean" })
], RadioGroup.prototype, "disabled", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_6__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr
], RadioGroup.prototype, "name", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_6__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr
], RadioGroup.prototype, "value", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_6__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr
], RadioGroup.prototype, "orientation", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_6__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.observable
], RadioGroup.prototype, "childItems", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_6__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.observable
], RadioGroup.prototype, "slottedRadioButtons", void 0);


/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/radio-group/radio-group.template.js":
/*!**********************************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/radio-group/radio-group.template.js ***!
  \**********************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   radioGroupTemplate: () => (/* binding */ radioGroupTemplate)
/* harmony export */ });
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @microsoft/fast-element */ "webpack/sharing/consume/default/@microsoft/fast-element/@microsoft/fast-element");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @microsoft/fast-web-utilities */ "./node_modules/@microsoft/fast-web-utilities/dist/aria.js");


/**
 * The template for the {@link @microsoft/fast-foundation#RadioGroup} component.
 * @public
 */
const radioGroupTemplate = (context, definition) => (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.html) `
    <template
        role="radiogroup"
        aria-disabled="${x => x.disabled}"
        aria-readonly="${x => x.readOnly}"
        @click="${(x, c) => x.clickHandler(c.event)}"
        @keydown="${(x, c) => x.keydownHandler(c.event)}"
        @focusout="${(x, c) => x.focusOutHandler(c.event)}"
    >
        <slot name="label"></slot>
        <div
            class="positioning-region ${x => x.orientation === _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_1__.Orientation.horizontal ? "horizontal" : "vertical"}"
            part="positioning-region"
        >
            <slot
                ${(0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.slotted)({
    property: "slottedRadioButtons",
    filter: (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.elements)("[role=radio]"),
})}
            ></slot>
        </div>
    </template>
`;


/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/radio/index.js":
/*!*************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/radio/index.js ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Radio: () => (/* reexport safe */ _radio_js__WEBPACK_IMPORTED_MODULE_1__.Radio),
/* harmony export */   radioTemplate: () => (/* reexport safe */ _radio_template_js__WEBPACK_IMPORTED_MODULE_0__.radioTemplate)
/* harmony export */ });
/* harmony import */ var _radio_template_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./radio.template.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/radio/radio.template.js");
/* harmony import */ var _radio_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./radio.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/radio/radio.js");




/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/radio/radio.form-associated.js":
/*!*****************************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/radio/radio.form-associated.js ***!
  \*****************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   FormAssociatedRadio: () => (/* binding */ FormAssociatedRadio)
/* harmony export */ });
/* harmony import */ var _form_associated_form_associated_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../form-associated/form-associated.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/form-associated/form-associated.js");
/* harmony import */ var _foundation_element_foundation_element_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../foundation-element/foundation-element.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/foundation-element/foundation-element.js");


class _Radio extends _foundation_element_foundation_element_js__WEBPACK_IMPORTED_MODULE_0__.FoundationElement {
}
/**
 * A form-associated base class for the {@link @microsoft/fast-foundation#(Radio:class)} component.
 *
 * @internal
 */
class FormAssociatedRadio extends (0,_form_associated_form_associated_js__WEBPACK_IMPORTED_MODULE_1__.CheckableFormAssociated)(_Radio) {
    constructor() {
        super(...arguments);
        this.proxy = document.createElement("input");
    }
}


/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/radio/radio.js":
/*!*************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/radio/radio.js ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Radio: () => (/* binding */ Radio)
/* harmony export */ });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! tslib */ "./node_modules/@microsoft/fast-foundation/node_modules/tslib/tslib.es6.js");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @microsoft/fast-element */ "webpack/sharing/consume/default/@microsoft/fast-element/@microsoft/fast-element");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @microsoft/fast-web-utilities */ "./node_modules/@microsoft/fast-web-utilities/dist/key-codes.js");
/* harmony import */ var _radio_form_associated_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./radio.form-associated.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/radio/radio.form-associated.js");




/**
 * A Radio Custom HTML Element.
 * Implements the {@link https://www.w3.org/TR/wai-aria-1.1/#radio | ARIA radio }.
 *
 * @slot checked-indicator - The checked indicator
 * @slot - The default slot for the label
 * @csspart control - The element representing the visual radio control
 * @csspart label - The label
 * @fires change - Emits a custom change event when the checked state changes
 *
 * @public
 */
class Radio extends _radio_form_associated_js__WEBPACK_IMPORTED_MODULE_1__.FormAssociatedRadio {
    constructor() {
        super();
        /**
         * The element's value to be included in form submission when checked.
         * Default to "on" to reach parity with input[type="radio"]
         *
         * @internal
         */
        this.initialValue = "on";
        /**
         * @internal
         */
        this.keypressHandler = (e) => {
            switch (e.key) {
                case _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_2__.keySpace:
                    if (!this.checked && !this.readOnly) {
                        this.checked = true;
                    }
                    return;
            }
            return true;
        };
        this.proxy.setAttribute("type", "radio");
    }
    readOnlyChanged() {
        if (this.proxy instanceof HTMLInputElement) {
            this.proxy.readOnly = this.readOnly;
        }
    }
    /**
     * @internal
     */
    defaultCheckedChanged() {
        var _a;
        if (this.$fastController.isConnected && !this.dirtyChecked) {
            // Setting this.checked will cause us to enter a dirty state,
            // but if we are clean when defaultChecked is changed, we want to stay
            // in a clean state, so reset this.dirtyChecked
            if (!this.isInsideRadioGroup()) {
                this.checked = (_a = this.defaultChecked) !== null && _a !== void 0 ? _a : false;
                this.dirtyChecked = false;
            }
        }
    }
    /**
     * @internal
     */
    connectedCallback() {
        var _a, _b;
        super.connectedCallback();
        this.validate();
        if (((_a = this.parentElement) === null || _a === void 0 ? void 0 : _a.getAttribute("role")) !== "radiogroup" &&
            this.getAttribute("tabindex") === null) {
            if (!this.disabled) {
                this.setAttribute("tabindex", "0");
            }
        }
        if (this.checkedAttribute) {
            if (!this.dirtyChecked) {
                // Setting this.checked will cause us to enter a dirty state,
                // but if we are clean when defaultChecked is changed, we want to stay
                // in a clean state, so reset this.dirtyChecked
                if (!this.isInsideRadioGroup()) {
                    this.checked = (_b = this.defaultChecked) !== null && _b !== void 0 ? _b : false;
                    this.dirtyChecked = false;
                }
            }
        }
    }
    isInsideRadioGroup() {
        const parent = this.closest("[role=radiogroup]");
        return parent !== null;
    }
    /**
     * @internal
     */
    clickHandler(e) {
        if (!this.disabled && !this.readOnly && !this.checked) {
            this.checked = true;
        }
    }
}
(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ attribute: "readonly", mode: "boolean" })
], Radio.prototype, "readOnly", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.observable
], Radio.prototype, "name", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.observable
], Radio.prototype, "defaultSlottedNodes", void 0);


/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/radio/radio.template.js":
/*!**********************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/radio/radio.template.js ***!
  \**********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   radioTemplate: () => (/* binding */ radioTemplate)
/* harmony export */ });
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @microsoft/fast-element */ "webpack/sharing/consume/default/@microsoft/fast-element/@microsoft/fast-element");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__);

/**
 * The template for the {@link @microsoft/fast-foundation#(Radio:class)} component.
 * @public
 */
const radioTemplate = (context, definition) => (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.html) `
    <template
        role="radio"
        class="${x => (x.checked ? "checked" : "")} ${x => x.readOnly ? "readonly" : ""}"
        aria-checked="${x => x.checked}"
        aria-required="${x => x.required}"
        aria-disabled="${x => x.disabled}"
        aria-readonly="${x => x.readOnly}"
        @keypress="${(x, c) => x.keypressHandler(c.event)}"
        @click="${(x, c) => x.clickHandler(c.event)}"
    >
        <div part="control" class="control">
            <slot name="checked-indicator">
                ${definition.checkedIndicator || ""}
            </slot>
        </div>
        <label
            part="label"
            class="${x => x.defaultSlottedNodes && x.defaultSlottedNodes.length
    ? "label"
    : "label label__hidden"}"
        >
            <slot ${(0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.slotted)("defaultSlottedNodes")}></slot>
        </label>
    </template>
`;


/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/search/index.js":
/*!**************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/search/index.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DelegatesARIASearch: () => (/* reexport safe */ _search_js__WEBPACK_IMPORTED_MODULE_1__.DelegatesARIASearch),
/* harmony export */   Search: () => (/* reexport safe */ _search_js__WEBPACK_IMPORTED_MODULE_1__.Search),
/* harmony export */   searchTemplate: () => (/* reexport safe */ _search_template_js__WEBPACK_IMPORTED_MODULE_0__.searchTemplate)
/* harmony export */ });
/* harmony import */ var _search_template_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./search.template.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/search/search.template.js");
/* harmony import */ var _search_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./search.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/search/search.js");




/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/search/search.form-associated.js":
/*!*******************************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/search/search.form-associated.js ***!
  \*******************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   FormAssociatedSearch: () => (/* binding */ FormAssociatedSearch)
/* harmony export */ });
/* harmony import */ var _form_associated_form_associated_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../form-associated/form-associated.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/form-associated/form-associated.js");
/* harmony import */ var _foundation_element_foundation_element_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../foundation-element/foundation-element.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/foundation-element/foundation-element.js");


class _Search extends _foundation_element_foundation_element_js__WEBPACK_IMPORTED_MODULE_0__.FoundationElement {
}
/**
 * A form-associated base class for the {@link @microsoft/fast-foundation#(Search:class)} component.
 *
 * @internal
 */
class FormAssociatedSearch extends (0,_form_associated_form_associated_js__WEBPACK_IMPORTED_MODULE_1__.FormAssociated)(_Search) {
    constructor() {
        super(...arguments);
        this.proxy = document.createElement("input");
    }
}


/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/search/search.js":
/*!***************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/search/search.js ***!
  \***************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DelegatesARIASearch: () => (/* binding */ DelegatesARIASearch),
/* harmony export */   Search: () => (/* binding */ Search)
/* harmony export */ });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! tslib */ "./node_modules/@microsoft/fast-foundation/node_modules/tslib/tslib.es6.js");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @microsoft/fast-element */ "webpack/sharing/consume/default/@microsoft/fast-element/@microsoft/fast-element");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _patterns_index_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../patterns/index.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/patterns/aria-global.js");
/* harmony import */ var _patterns_index_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../patterns/index.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/patterns/start-end.js");
/* harmony import */ var _utilities_apply_mixins_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utilities/apply-mixins.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/utilities/apply-mixins.js");
/* harmony import */ var _search_form_associated_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./search.form-associated.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/search/search.form-associated.js");





/**
 * A Search Custom HTML Element.
 * Based largely on the {@link https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input/search | <input type="search" /> element }.
 *
 * @slot start - Content which can be provided before the search input
 * @slot end - Content which can be provided after the search clear button
 * @slot - The default slot for the label
 * @slot close-button - The clear button
 * @slot close-glyph - The clear glyph
 * @csspart label - The label
 * @csspart root - The element wrapping the control, including start and end slots
 * @csspart control - The element representing the input
 * @csspart clear-button - The button to clear the input
 *
 * @public
 */
class Search extends _search_form_associated_js__WEBPACK_IMPORTED_MODULE_1__.FormAssociatedSearch {
    readOnlyChanged() {
        if (this.proxy instanceof HTMLInputElement) {
            this.proxy.readOnly = this.readOnly;
            this.validate();
        }
    }
    autofocusChanged() {
        if (this.proxy instanceof HTMLInputElement) {
            this.proxy.autofocus = this.autofocus;
            this.validate();
        }
    }
    placeholderChanged() {
        if (this.proxy instanceof HTMLInputElement) {
            this.proxy.placeholder = this.placeholder;
        }
    }
    listChanged() {
        if (this.proxy instanceof HTMLInputElement) {
            this.proxy.setAttribute("list", this.list);
            this.validate();
        }
    }
    maxlengthChanged() {
        if (this.proxy instanceof HTMLInputElement) {
            this.proxy.maxLength = this.maxlength;
            this.validate();
        }
    }
    minlengthChanged() {
        if (this.proxy instanceof HTMLInputElement) {
            this.proxy.minLength = this.minlength;
            this.validate();
        }
    }
    patternChanged() {
        if (this.proxy instanceof HTMLInputElement) {
            this.proxy.pattern = this.pattern;
            this.validate();
        }
    }
    sizeChanged() {
        if (this.proxy instanceof HTMLInputElement) {
            this.proxy.size = this.size;
        }
    }
    spellcheckChanged() {
        if (this.proxy instanceof HTMLInputElement) {
            this.proxy.spellcheck = this.spellcheck;
        }
    }
    /**
     * @internal
     */
    connectedCallback() {
        super.connectedCallback();
        this.validate();
        if (this.autofocus) {
            _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.DOM.queueUpdate(() => {
                this.focus();
            });
        }
    }
    /** {@inheritDoc (FormAssociated:interface).validate} */
    validate() {
        super.validate(this.control);
    }
    /**
     * Handles the internal control's `input` event
     * @internal
     */
    handleTextInput() {
        this.value = this.control.value;
    }
    /**
     * Handles the control's clear value event
     * @public
     */
    handleClearInput() {
        this.value = "";
        this.control.focus();
        this.handleChange();
    }
    /**
     * Change event handler for inner control.
     * @remarks
     * "Change" events are not `composable` so they will not
     * permeate the shadow DOM boundary. This fn effectively proxies
     * the change event, emitting a `change` event whenever the internal
     * control emits a `change` event
     * @internal
     */
    handleChange() {
        this.$emit("change");
    }
}
(0,tslib__WEBPACK_IMPORTED_MODULE_2__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ attribute: "readonly", mode: "boolean" })
], Search.prototype, "readOnly", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_2__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ mode: "boolean" })
], Search.prototype, "autofocus", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_2__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr
], Search.prototype, "placeholder", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_2__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr
], Search.prototype, "list", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_2__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ converter: _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.nullableNumberConverter })
], Search.prototype, "maxlength", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_2__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ converter: _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.nullableNumberConverter })
], Search.prototype, "minlength", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_2__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr
], Search.prototype, "pattern", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_2__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ converter: _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.nullableNumberConverter })
], Search.prototype, "size", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_2__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ mode: "boolean" })
], Search.prototype, "spellcheck", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_2__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.observable
], Search.prototype, "defaultSlottedNodes", void 0);
/**
 * Includes ARIA states and properties relating to the ARIA textbox role
 *
 * @public
 */
class DelegatesARIASearch {
}
(0,_utilities_apply_mixins_js__WEBPACK_IMPORTED_MODULE_3__.applyMixins)(DelegatesARIASearch, _patterns_index_js__WEBPACK_IMPORTED_MODULE_4__.ARIAGlobalStatesAndProperties);
(0,_utilities_apply_mixins_js__WEBPACK_IMPORTED_MODULE_3__.applyMixins)(Search, _patterns_index_js__WEBPACK_IMPORTED_MODULE_5__.StartEnd, DelegatesARIASearch);


/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/search/search.template.js":
/*!************************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/search/search.template.js ***!
  \************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   searchTemplate: () => (/* binding */ searchTemplate)
/* harmony export */ });
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @microsoft/fast-element */ "webpack/sharing/consume/default/@microsoft/fast-element/@microsoft/fast-element");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _patterns_start_end_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../patterns/start-end.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/patterns/start-end.js");
/* harmony import */ var _utilities_whitespace_filter_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utilities/whitespace-filter.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/utilities/whitespace-filter.js");



/**
 * The template for the {@link @microsoft/fast-foundation#(Search:class)} component.
 * @public
 */
const searchTemplate = (context, definition) => (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.html) `
    <template
        class="
            ${x => (x.readOnly ? "readonly" : "")}
        "
    >
        <label
            part="label"
            for="control"
            class="${x => x.defaultSlottedNodes && x.defaultSlottedNodes.length
    ? "label"
    : "label label__hidden"}"
        >
            <slot
                ${(0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.slotted)({ property: "defaultSlottedNodes", filter: _utilities_whitespace_filter_js__WEBPACK_IMPORTED_MODULE_1__.whitespaceFilter })}
            ></slot>
        </label>
        <div class="root" part="root" ${(0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.ref)("root")}>
            ${(0,_patterns_start_end_js__WEBPACK_IMPORTED_MODULE_2__.startSlotTemplate)(context, definition)}
            <div class="input-wrapper" part="input-wrapper">
                <input
                    class="control"
                    part="control"
                    id="control"
                    @input="${x => x.handleTextInput()}"
                    @change="${x => x.handleChange()}"
                    ?autofocus="${x => x.autofocus}"
                    ?disabled="${x => x.disabled}"
                    list="${x => x.list}"
                    maxlength="${x => x.maxlength}"
                    minlength="${x => x.minlength}"
                    pattern="${x => x.pattern}"
                    placeholder="${x => x.placeholder}"
                    ?readonly="${x => x.readOnly}"
                    ?required="${x => x.required}"
                    size="${x => x.size}"
                    ?spellcheck="${x => x.spellcheck}"
                    :value="${x => x.value}"
                    type="search"
                    aria-atomic="${x => x.ariaAtomic}"
                    aria-busy="${x => x.ariaBusy}"
                    aria-controls="${x => x.ariaControls}"
                    aria-current="${x => x.ariaCurrent}"
                    aria-describedby="${x => x.ariaDescribedby}"
                    aria-details="${x => x.ariaDetails}"
                    aria-disabled="${x => x.ariaDisabled}"
                    aria-errormessage="${x => x.ariaErrormessage}"
                    aria-flowto="${x => x.ariaFlowto}"
                    aria-haspopup="${x => x.ariaHaspopup}"
                    aria-hidden="${x => x.ariaHidden}"
                    aria-invalid="${x => x.ariaInvalid}"
                    aria-keyshortcuts="${x => x.ariaKeyshortcuts}"
                    aria-label="${x => x.ariaLabel}"
                    aria-labelledby="${x => x.ariaLabelledby}"
                    aria-live="${x => x.ariaLive}"
                    aria-owns="${x => x.ariaOwns}"
                    aria-relevant="${x => x.ariaRelevant}"
                    aria-roledescription="${x => x.ariaRoledescription}"
                    ${(0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.ref)("control")}
                />
                <slot name="close-button">
                    <button
                        class="clear-button ${x => x.value ? "" : "clear-button__hidden"}"
                        part="clear-button"
                        tabindex="-1"
                        @click=${x => x.handleClearInput()}
                    >
                        <slot name="close-glyph">
                            <svg
                                width="9"
                                height="9"
                                viewBox="0 0 9 9"
                                xmlns="http://www.w3.org/2000/svg"
                            >
                                <path
                                    d="M0.146447 0.146447C0.338683 -0.0478972 0.645911 -0.0270359 0.853553 0.146447L4.5 3.793L8.14645 0.146447C8.34171 -0.0488155 8.65829 -0.0488155 8.85355 0.146447C9.04882 0.341709 9.04882 0.658291 8.85355 0.853553L5.207 4.5L8.85355 8.14645C9.05934 8.35223 9.03129 8.67582 8.85355 8.85355C8.67582 9.03129 8.35409 9.02703 8.14645 8.85355L4.5 5.207L0.853553 8.85355C0.658291 9.04882 0.341709 9.04882 0.146447 8.85355C-0.0488155 8.65829 -0.0488155 8.34171 0.146447 8.14645L3.793 4.5L0.146447 0.853553C-0.0268697 0.680237 -0.0457894 0.34079 0.146447 0.146447Z"
                                />
                            </svg>
                        </slot>
                    </button>
                </slot>
            </div>
            ${(0,_patterns_start_end_js__WEBPACK_IMPORTED_MODULE_2__.endSlotTemplate)(context, definition)}
        </div>
    </template>
`;


/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/select/index.js":
/*!**************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/select/index.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DelegatesARIASelect: () => (/* reexport safe */ _select_js__WEBPACK_IMPORTED_MODULE_0__.DelegatesARIASelect),
/* harmony export */   Select: () => (/* reexport safe */ _select_js__WEBPACK_IMPORTED_MODULE_0__.Select),
/* harmony export */   SelectPosition: () => (/* reexport safe */ _select_options_js__WEBPACK_IMPORTED_MODULE_1__.SelectPosition),
/* harmony export */   selectTemplate: () => (/* reexport safe */ _select_template_js__WEBPACK_IMPORTED_MODULE_2__.selectTemplate)
/* harmony export */ });
/* harmony import */ var _select_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./select.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/select/select.js");
/* harmony import */ var _select_options_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./select.options.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/select/select.options.js");
/* harmony import */ var _select_template_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./select.template.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/select/select.template.js");





/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/select/select.form-associated.js":
/*!*******************************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/select/select.form-associated.js ***!
  \*******************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   FormAssociatedSelect: () => (/* binding */ FormAssociatedSelect)
/* harmony export */ });
/* harmony import */ var _listbox_listbox_element_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../listbox/listbox.element.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/listbox/listbox.element.js");
/* harmony import */ var _form_associated_form_associated_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../form-associated/form-associated.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/form-associated/form-associated.js");


class _Select extends _listbox_listbox_element_js__WEBPACK_IMPORTED_MODULE_0__.ListboxElement {
}
/**
 * A form-associated base class for the {@link @microsoft/fast-foundation#(Select:class)} component.
 *
 * @internal
 */
class FormAssociatedSelect extends (0,_form_associated_form_associated_js__WEBPACK_IMPORTED_MODULE_1__.FormAssociated)(_Select) {
    constructor() {
        super(...arguments);
        this.proxy = document.createElement("select");
    }
}


/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/select/select.js":
/*!***************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/select/select.js ***!
  \***************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DelegatesARIASelect: () => (/* binding */ DelegatesARIASelect),
/* harmony export */   Select: () => (/* binding */ Select)
/* harmony export */ });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! tslib */ "./node_modules/@microsoft/fast-foundation/node_modules/tslib/tslib.es6.js");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @microsoft/fast-element */ "webpack/sharing/consume/default/@microsoft/fast-element/@microsoft/fast-element");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @microsoft/fast-web-utilities */ "./node_modules/@microsoft/fast-web-utilities/dist/strings.js");
/* harmony import */ var _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @microsoft/fast-web-utilities */ "./node_modules/@microsoft/fast-web-utilities/dist/key-codes.js");
/* harmony import */ var _listbox_listbox_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../listbox/listbox.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/listbox/listbox.js");
/* harmony import */ var _patterns_start_end_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../patterns/start-end.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/patterns/start-end.js");
/* harmony import */ var _utilities_apply_mixins_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../utilities/apply-mixins.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/utilities/apply-mixins.js");
/* harmony import */ var _select_form_associated_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./select.form-associated.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/select/select.form-associated.js");
/* harmony import */ var _select_options_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./select.options.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/select/select.options.js");








/**
 * A Select Custom HTML Element.
 * Implements the {@link https://www.w3.org/TR/wai-aria-1.1/#select | ARIA select }.
 *
 * @slot start - Content which can be provided before the button content
 * @slot end - Content which can be provided after the button content
 * @slot button-container - The element representing the select button
 * @slot selected-value - The selected value
 * @slot indicator - The visual indicator for the expand/collapse state of the button
 * @slot - The default slot for slotted options
 * @csspart control - The element representing the select invoking element
 * @csspart selected-value - The element wrapping the selected value
 * @csspart indicator - The element wrapping the visual indicator
 * @csspart listbox - The listbox element
 * @fires input - Fires a custom 'input' event when the value updates
 * @fires change - Fires a custom 'change' event when the value updates
 *
 * @public
 */
class Select extends _select_form_associated_js__WEBPACK_IMPORTED_MODULE_1__.FormAssociatedSelect {
    constructor() {
        super(...arguments);
        /**
         * The open attribute.
         *
         * @public
         * @remarks
         * HTML Attribute: open
         */
        this.open = false;
        /**
         * Indicates the initial state of the position attribute.
         *
         * @internal
         */
        this.forcedPosition = false;
        /**
         * The unique id for the internal listbox element.
         *
         * @internal
         */
        this.listboxId = (0,_microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_2__.uniqueId)("listbox-");
        /**
         * The max height for the listbox when opened.
         *
         * @internal
         */
        this.maxHeight = 0;
    }
    /**
     * Sets focus and synchronizes ARIA attributes when the open property changes.
     *
     * @param prev - the previous open value
     * @param next - the current open value
     *
     * @internal
     */
    openChanged(prev, next) {
        if (!this.collapsible) {
            return;
        }
        if (this.open) {
            this.ariaControls = this.listboxId;
            this.ariaExpanded = "true";
            this.setPositioning();
            this.focusAndScrollOptionIntoView();
            this.indexWhenOpened = this.selectedIndex;
            // focus is directed to the element when `open` is changed programmatically
            _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.DOM.queueUpdate(() => this.focus());
            return;
        }
        this.ariaControls = "";
        this.ariaExpanded = "false";
    }
    /**
     * The component is collapsible when in single-selection mode with no size attribute.
     *
     * @internal
     */
    get collapsible() {
        return !(this.multiple || typeof this.size === "number");
    }
    /**
     * The value property.
     *
     * @public
     */
    get value() {
        _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.Observable.track(this, "value");
        return this._value;
    }
    set value(next) {
        var _a, _b, _c, _d, _e, _f, _g;
        const prev = `${this._value}`;
        if ((_a = this._options) === null || _a === void 0 ? void 0 : _a.length) {
            const selectedIndex = this._options.findIndex(el => el.value === next);
            const prevSelectedValue = (_c = (_b = this._options[this.selectedIndex]) === null || _b === void 0 ? void 0 : _b.value) !== null && _c !== void 0 ? _c : null;
            const nextSelectedValue = (_e = (_d = this._options[selectedIndex]) === null || _d === void 0 ? void 0 : _d.value) !== null && _e !== void 0 ? _e : null;
            if (selectedIndex === -1 || prevSelectedValue !== nextSelectedValue) {
                next = "";
                this.selectedIndex = selectedIndex;
            }
            next = (_g = (_f = this.firstSelectedOption) === null || _f === void 0 ? void 0 : _f.value) !== null && _g !== void 0 ? _g : next;
        }
        if (prev !== next) {
            this._value = next;
            super.valueChanged(prev, next);
            _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.Observable.notify(this, "value");
            this.updateDisplayValue();
        }
    }
    /**
     * Sets the value and display value to match the first selected option.
     *
     * @param shouldEmit - if true, the input and change events will be emitted
     *
     * @internal
     */
    updateValue(shouldEmit) {
        var _a, _b;
        if (this.$fastController.isConnected) {
            this.value = (_b = (_a = this.firstSelectedOption) === null || _a === void 0 ? void 0 : _a.value) !== null && _b !== void 0 ? _b : "";
        }
        if (shouldEmit) {
            this.$emit("input");
            this.$emit("change", this, {
                bubbles: true,
                composed: undefined,
            });
        }
    }
    /**
     * Updates the proxy value when the selected index changes.
     *
     * @param prev - the previous selected index
     * @param next - the next selected index
     *
     * @internal
     */
    selectedIndexChanged(prev, next) {
        super.selectedIndexChanged(prev, next);
        this.updateValue();
    }
    positionChanged(prev, next) {
        this.positionAttribute = next;
        this.setPositioning();
    }
    /**
     * Calculate and apply listbox positioning based on available viewport space.
     *
     * @public
     */
    setPositioning() {
        const currentBox = this.getBoundingClientRect();
        const viewportHeight = window.innerHeight;
        const availableBottom = viewportHeight - currentBox.bottom;
        this.position = this.forcedPosition
            ? this.positionAttribute
            : currentBox.top > availableBottom
                ? _select_options_js__WEBPACK_IMPORTED_MODULE_3__.SelectPosition.above
                : _select_options_js__WEBPACK_IMPORTED_MODULE_3__.SelectPosition.below;
        this.positionAttribute = this.forcedPosition
            ? this.positionAttribute
            : this.position;
        this.maxHeight =
            this.position === _select_options_js__WEBPACK_IMPORTED_MODULE_3__.SelectPosition.above ? ~~currentBox.top : ~~availableBottom;
    }
    /**
     * The value displayed on the button.
     *
     * @public
     */
    get displayValue() {
        var _a, _b;
        _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.Observable.track(this, "displayValue");
        return (_b = (_a = this.firstSelectedOption) === null || _a === void 0 ? void 0 : _a.text) !== null && _b !== void 0 ? _b : "";
    }
    /**
     * Synchronize the `aria-disabled` property when the `disabled` property changes.
     *
     * @param prev - The previous disabled value
     * @param next - The next disabled value
     *
     * @internal
     */
    disabledChanged(prev, next) {
        if (super.disabledChanged) {
            super.disabledChanged(prev, next);
        }
        this.ariaDisabled = this.disabled ? "true" : "false";
    }
    /**
     * Reset the element to its first selectable option when its parent form is reset.
     *
     * @internal
     */
    formResetCallback() {
        this.setProxyOptions();
        // Call the base class's implementation setDefaultSelectedOption instead of the select's
        // override, in order to reset the selectedIndex without using the value property.
        super.setDefaultSelectedOption();
        if (this.selectedIndex === -1) {
            this.selectedIndex = 0;
        }
    }
    /**
     * Handle opening and closing the listbox when the select is clicked.
     *
     * @param e - the mouse event
     * @internal
     */
    clickHandler(e) {
        // do nothing if the select is disabled
        if (this.disabled) {
            return;
        }
        if (this.open) {
            const captured = e.target.closest(`option,[role=option]`);
            if (captured && captured.disabled) {
                return;
            }
        }
        super.clickHandler(e);
        this.open = this.collapsible && !this.open;
        if (!this.open && this.indexWhenOpened !== this.selectedIndex) {
            this.updateValue(true);
        }
        return true;
    }
    /**
     * Handles focus state when the element or its children lose focus.
     *
     * @param e - The focus event
     * @internal
     */
    focusoutHandler(e) {
        var _a;
        super.focusoutHandler(e);
        if (!this.open) {
            return true;
        }
        const focusTarget = e.relatedTarget;
        if (this.isSameNode(focusTarget)) {
            this.focus();
            return;
        }
        if (!((_a = this.options) === null || _a === void 0 ? void 0 : _a.includes(focusTarget))) {
            this.open = false;
            if (this.indexWhenOpened !== this.selectedIndex) {
                this.updateValue(true);
            }
        }
    }
    /**
     * Updates the value when an option's value changes.
     *
     * @param source - the source object
     * @param propertyName - the property to evaluate
     *
     * @internal
     * @override
     */
    handleChange(source, propertyName) {
        super.handleChange(source, propertyName);
        if (propertyName === "value") {
            this.updateValue();
        }
    }
    /**
     * Synchronize the form-associated proxy and updates the value property of the element.
     *
     * @param prev - the previous collection of slotted option elements
     * @param next - the next collection of slotted option elements
     *
     * @internal
     */
    slottedOptionsChanged(prev, next) {
        this.options.forEach(o => {
            const notifier = _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.Observable.getNotifier(o);
            notifier.unsubscribe(this, "value");
        });
        super.slottedOptionsChanged(prev, next);
        this.options.forEach(o => {
            const notifier = _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.Observable.getNotifier(o);
            notifier.subscribe(this, "value");
        });
        this.setProxyOptions();
        this.updateValue();
    }
    /**
     * Prevents focus when size is set and a scrollbar is clicked.
     *
     * @param e - the mouse event object
     *
     * @override
     * @internal
     */
    mousedownHandler(e) {
        var _a;
        if (e.offsetX >= 0 && e.offsetX <= ((_a = this.listbox) === null || _a === void 0 ? void 0 : _a.scrollWidth)) {
            return super.mousedownHandler(e);
        }
        return this.collapsible;
    }
    /**
     * Sets the multiple property on the proxy element.
     *
     * @param prev - the previous multiple value
     * @param next - the current multiple value
     */
    multipleChanged(prev, next) {
        super.multipleChanged(prev, next);
        if (this.proxy) {
            this.proxy.multiple = next;
        }
    }
    /**
     * Updates the selectedness of each option when the list of selected options changes.
     *
     * @param prev - the previous list of selected options
     * @param next - the current list of selected options
     *
     * @override
     * @internal
     */
    selectedOptionsChanged(prev, next) {
        var _a;
        super.selectedOptionsChanged(prev, next);
        (_a = this.options) === null || _a === void 0 ? void 0 : _a.forEach((o, i) => {
            var _a;
            const proxyOption = (_a = this.proxy) === null || _a === void 0 ? void 0 : _a.options.item(i);
            if (proxyOption) {
                proxyOption.selected = o.selected;
            }
        });
    }
    /**
     * Sets the selected index to match the first option with the selected attribute, or
     * the first selectable option.
     *
     * @override
     * @internal
     */
    setDefaultSelectedOption() {
        var _a;
        const options = (_a = this.options) !== null && _a !== void 0 ? _a : Array.from(this.children).filter(_listbox_listbox_js__WEBPACK_IMPORTED_MODULE_4__.Listbox.slottedOptionFilter);
        const selectedIndex = options === null || options === void 0 ? void 0 : options.findIndex(el => el.hasAttribute("selected") || el.selected || el.value === this.value);
        if (selectedIndex !== -1) {
            this.selectedIndex = selectedIndex;
            return;
        }
        this.selectedIndex = 0;
    }
    /**
     * Resets and fills the proxy to match the component's options.
     *
     * @internal
     */
    setProxyOptions() {
        if (this.proxy instanceof HTMLSelectElement && this.options) {
            this.proxy.options.length = 0;
            this.options.forEach(option => {
                const proxyOption = option.proxy ||
                    (option instanceof HTMLOptionElement ? option.cloneNode() : null);
                if (proxyOption) {
                    this.proxy.options.add(proxyOption);
                }
            });
        }
    }
    /**
     * Handle keyboard interaction for the select.
     *
     * @param e - the keyboard event
     * @internal
     */
    keydownHandler(e) {
        super.keydownHandler(e);
        const key = e.key || e.key.charCodeAt(0);
        switch (key) {
            case _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_5__.keySpace: {
                e.preventDefault();
                if (this.collapsible && this.typeAheadExpired) {
                    this.open = !this.open;
                }
                break;
            }
            case _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_5__.keyHome:
            case _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_5__.keyEnd: {
                e.preventDefault();
                break;
            }
            case _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_5__.keyEnter: {
                e.preventDefault();
                this.open = !this.open;
                break;
            }
            case _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_5__.keyEscape: {
                if (this.collapsible && this.open) {
                    e.preventDefault();
                    this.open = false;
                }
                break;
            }
            case _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_5__.keyTab: {
                if (this.collapsible && this.open) {
                    e.preventDefault();
                    this.open = false;
                }
                return true;
            }
        }
        if (!this.open && this.indexWhenOpened !== this.selectedIndex) {
            this.updateValue(true);
            this.indexWhenOpened = this.selectedIndex;
        }
        return !(key === _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_5__.keyArrowDown || key === _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_5__.keyArrowUp);
    }
    connectedCallback() {
        super.connectedCallback();
        this.forcedPosition = !!this.positionAttribute;
        this.addEventListener("contentchange", this.updateDisplayValue);
    }
    disconnectedCallback() {
        this.removeEventListener("contentchange", this.updateDisplayValue);
        super.disconnectedCallback();
    }
    /**
     * Updates the proxy's size property when the size attribute changes.
     *
     * @param prev - the previous size
     * @param next - the current size
     *
     * @override
     * @internal
     */
    sizeChanged(prev, next) {
        super.sizeChanged(prev, next);
        if (this.proxy) {
            this.proxy.size = next;
        }
    }
    /**
     *
     * @internal
     */
    updateDisplayValue() {
        if (this.collapsible) {
            _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.Observable.notify(this, "displayValue");
        }
    }
}
(0,tslib__WEBPACK_IMPORTED_MODULE_6__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ attribute: "open", mode: "boolean" })
], Select.prototype, "open", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_6__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.volatile
], Select.prototype, "collapsible", null);
(0,tslib__WEBPACK_IMPORTED_MODULE_6__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.observable
], Select.prototype, "control", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_6__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ attribute: "position" })
], Select.prototype, "positionAttribute", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_6__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.observable
], Select.prototype, "position", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_6__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.observable
], Select.prototype, "maxHeight", void 0);
/**
 * Includes ARIA states and properties relating to the ARIA select role.
 *
 * @public
 */
class DelegatesARIASelect {
}
(0,tslib__WEBPACK_IMPORTED_MODULE_6__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.observable
], DelegatesARIASelect.prototype, "ariaControls", void 0);
(0,_utilities_apply_mixins_js__WEBPACK_IMPORTED_MODULE_7__.applyMixins)(DelegatesARIASelect, _listbox_listbox_js__WEBPACK_IMPORTED_MODULE_4__.DelegatesARIAListbox);
(0,_utilities_apply_mixins_js__WEBPACK_IMPORTED_MODULE_7__.applyMixins)(Select, _patterns_start_end_js__WEBPACK_IMPORTED_MODULE_8__.StartEnd, DelegatesARIASelect);


/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/select/select.options.js":
/*!***********************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/select/select.options.js ***!
  \***********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   SelectPosition: () => (/* binding */ SelectPosition)
/* harmony export */ });
/**
 * Positioning directions for the listbox when a select is open.
 * @public
 */
const SelectPosition = {
    above: "above",
    below: "below",
};


/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/select/select.template.js":
/*!************************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/select/select.template.js ***!
  \************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   selectTemplate: () => (/* binding */ selectTemplate)
/* harmony export */ });
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @microsoft/fast-element */ "webpack/sharing/consume/default/@microsoft/fast-element/@microsoft/fast-element");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _listbox_listbox_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../listbox/listbox.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/listbox/listbox.js");
/* harmony import */ var _patterns_start_end_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../patterns/start-end.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/patterns/start-end.js");



/**
 * The template for the {@link @microsoft/fast-foundation#(Select:class)} component.
 * @public
 */
const selectTemplate = (context, definition) => (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.html) `
    <template
        class="${x => [
    x.collapsible && "collapsible",
    x.collapsible && x.open && "open",
    x.disabled && "disabled",
    x.collapsible && x.position,
]
    .filter(Boolean)
    .join(" ")}"
        aria-activedescendant="${x => x.ariaActiveDescendant}"
        aria-controls="${x => x.ariaControls}"
        aria-disabled="${x => x.ariaDisabled}"
        aria-expanded="${x => x.ariaExpanded}"
        aria-haspopup="${x => (x.collapsible ? "listbox" : null)}"
        aria-multiselectable="${x => x.ariaMultiSelectable}"
        ?open="${x => x.open}"
        role="combobox"
        tabindex="${x => (!x.disabled ? "0" : null)}"
        @click="${(x, c) => x.clickHandler(c.event)}"
        @focusin="${(x, c) => x.focusinHandler(c.event)}"
        @focusout="${(x, c) => x.focusoutHandler(c.event)}"
        @keydown="${(x, c) => x.keydownHandler(c.event)}"
        @mousedown="${(x, c) => x.mousedownHandler(c.event)}"
    >
        ${(0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.when)(x => x.collapsible, (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.html) `
                <div
                    class="control"
                    part="control"
                    ?disabled="${x => x.disabled}"
                    ${(0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.ref)("control")}
                >
                    ${(0,_patterns_start_end_js__WEBPACK_IMPORTED_MODULE_1__.startSlotTemplate)(context, definition)}
                    <slot name="button-container">
                        <div class="selected-value" part="selected-value">
                            <slot name="selected-value">${x => x.displayValue}</slot>
                        </div>
                        <div aria-hidden="true" class="indicator" part="indicator">
                            <slot name="indicator">
                                ${definition.indicator || ""}
                            </slot>
                        </div>
                    </slot>
                    ${(0,_patterns_start_end_js__WEBPACK_IMPORTED_MODULE_1__.endSlotTemplate)(context, definition)}
                </div>
            `)}
        <div
            class="listbox"
            id="${x => x.listboxId}"
            part="listbox"
            role="listbox"
            ?disabled="${x => x.disabled}"
            ?hidden="${x => (x.collapsible ? !x.open : false)}"
            ${(0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.ref)("listbox")}
        >
            <slot
                ${(0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.slotted)({
    filter: _listbox_listbox_js__WEBPACK_IMPORTED_MODULE_2__.Listbox.slottedOptionFilter,
    flatten: true,
    property: "slottedOptions",
})}
            ></slot>
        </div>
    </template>
`;


/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/skeleton/index.js":
/*!****************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/skeleton/index.js ***!
  \****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Skeleton: () => (/* reexport safe */ _skeleton_js__WEBPACK_IMPORTED_MODULE_1__.Skeleton),
/* harmony export */   skeletonTemplate: () => (/* reexport safe */ _skeleton_template_js__WEBPACK_IMPORTED_MODULE_0__.skeletonTemplate)
/* harmony export */ });
/* harmony import */ var _skeleton_template_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./skeleton.template.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/skeleton/skeleton.template.js");
/* harmony import */ var _skeleton_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./skeleton.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/skeleton/skeleton.js");




/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/skeleton/skeleton.js":
/*!*******************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/skeleton/skeleton.js ***!
  \*******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Skeleton: () => (/* binding */ Skeleton)
/* harmony export */ });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! tslib */ "./node_modules/@microsoft/fast-foundation/node_modules/tslib/tslib.es6.js");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @microsoft/fast-element */ "webpack/sharing/consume/default/@microsoft/fast-element/@microsoft/fast-element");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _foundation_element_foundation_element_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../foundation-element/foundation-element.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/foundation-element/foundation-element.js");



/**
 * A Skeleton Custom HTML Element.
 *
 * @slot - The default slot
 *
 * @public
 */
class Skeleton extends _foundation_element_foundation_element_js__WEBPACK_IMPORTED_MODULE_1__.FoundationElement {
    constructor() {
        super(...arguments);
        /**
         * Indicates what the shape of the Skeleton should be.
         *
         * @public
         * @remarks
         * HTML Attribute: shape
         */
        this.shape = "rect";
    }
}
(0,tslib__WEBPACK_IMPORTED_MODULE_2__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr
], Skeleton.prototype, "fill", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_2__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr
], Skeleton.prototype, "shape", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_2__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr
], Skeleton.prototype, "pattern", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_2__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ mode: "boolean" })
], Skeleton.prototype, "shimmer", void 0);


/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/skeleton/skeleton.template.js":
/*!****************************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/skeleton/skeleton.template.js ***!
  \****************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   skeletonTemplate: () => (/* binding */ skeletonTemplate)
/* harmony export */ });
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @microsoft/fast-element */ "webpack/sharing/consume/default/@microsoft/fast-element/@microsoft/fast-element");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__);

/**
 * The template for the fast-skeleton component
 * @public
 */
const skeletonTemplate = (context, definition) => (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.html) `
    <template
        class="${x => (x.shape === "circle" ? "circle" : "rect")}"
        pattern="${x => x.pattern}"
        ?shimmer="${x => x.shimmer}"
    >
        ${(0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.when)(x => x.shimmer === true, (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.html) `
                <span class="shimmer"></span>
            `)}
        <object type="image/svg+xml" data="${x => x.pattern}" role="presentation">
            <img class="pattern" src="${x => x.pattern}" />
        </object>
        <slot></slot>
    </template>
`;


/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/slider-label/index.js":
/*!********************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/slider-label/index.js ***!
  \********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   SliderLabel: () => (/* reexport safe */ _slider_label_js__WEBPACK_IMPORTED_MODULE_1__.SliderLabel),
/* harmony export */   sliderLabelTemplate: () => (/* reexport safe */ _slider_label_template_js__WEBPACK_IMPORTED_MODULE_0__.sliderLabelTemplate)
/* harmony export */ });
/* harmony import */ var _slider_label_template_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./slider-label.template.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/slider-label/slider-label.template.js");
/* harmony import */ var _slider_label_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./slider-label.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/slider-label/slider-label.js");




/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/slider-label/slider-label.js":
/*!***************************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/slider-label/slider-label.js ***!
  \***************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   SliderLabel: () => (/* binding */ SliderLabel)
/* harmony export */ });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! tslib */ "./node_modules/@microsoft/fast-foundation/node_modules/tslib/tslib.es6.js");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @microsoft/fast-element */ "webpack/sharing/consume/default/@microsoft/fast-element/@microsoft/fast-element");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @microsoft/fast-web-utilities */ "./node_modules/@microsoft/fast-web-utilities/dist/localization.js");
/* harmony import */ var _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @microsoft/fast-web-utilities */ "./node_modules/@microsoft/fast-web-utilities/dist/aria.js");
/* harmony import */ var _slider_slider_utilities_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../slider/slider-utilities.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/slider/slider-utilities.js");
/* harmony import */ var _foundation_element_foundation_element_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../foundation-element/foundation-element.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/foundation-element/foundation-element.js");





const defaultConfig = {
    min: 0,
    max: 0,
    direction: _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_1__.Direction.ltr,
    orientation: _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_2__.Orientation.horizontal,
    disabled: false,
};
/**
 * A label element intended to be used with the {@link @microsoft/fast-foundation#(Slider:class)} component.
 *
 * @slot - The default slot for the label content
 * @csspart root - The element wrapping the label mark and text
 *
 * @public
 */
class SliderLabel extends _foundation_element_foundation_element_js__WEBPACK_IMPORTED_MODULE_3__.FoundationElement {
    constructor() {
        super(...arguments);
        /**
         * Hides the tick mark.
         *
         * @public
         * @remarks
         * HTML Attribute: hide-mark
         */
        this.hideMark = false;
        /**
         * @internal
         */
        this.sliderDirection = _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_1__.Direction.ltr;
        this.getSliderConfiguration = () => {
            if (!this.isSliderConfig(this.parentNode)) {
                this.sliderDirection = defaultConfig.direction || _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_1__.Direction.ltr;
                this.sliderOrientation = defaultConfig.orientation || _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_2__.Orientation.horizontal;
                this.sliderMaxPosition = defaultConfig.max;
                this.sliderMinPosition = defaultConfig.min;
            }
            else {
                const parentSlider = this
                    .parentNode;
                const { min, max, direction, orientation, disabled } = parentSlider;
                if (disabled !== undefined) {
                    this.disabled = disabled;
                }
                this.sliderDirection = direction || _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_1__.Direction.ltr;
                this.sliderOrientation = orientation || _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_2__.Orientation.horizontal;
                this.sliderMaxPosition = max;
                this.sliderMinPosition = min;
            }
        };
        this.positionAsStyle = () => {
            const direction = this.sliderDirection
                ? this.sliderDirection
                : _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_1__.Direction.ltr;
            const pct = (0,_slider_slider_utilities_js__WEBPACK_IMPORTED_MODULE_4__.convertPixelToPercent)(Number(this.position), Number(this.sliderMinPosition), Number(this.sliderMaxPosition));
            let rightNum = Math.round((1 - pct) * 100);
            let leftNum = Math.round(pct * 100);
            if (Number.isNaN(leftNum) && Number.isNaN(rightNum)) {
                rightNum = 50;
                leftNum = 50;
            }
            if (this.sliderOrientation === _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_2__.Orientation.horizontal) {
                return direction === _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_1__.Direction.rtl
                    ? `right: ${leftNum}%; left: ${rightNum}%;`
                    : `left: ${leftNum}%; right: ${rightNum}%;`;
            }
            else {
                return `top: ${leftNum}%; bottom: ${rightNum}%;`;
            }
        };
    }
    positionChanged() {
        this.positionStyle = this.positionAsStyle();
    }
    /**
     * @internal
     */
    sliderOrientationChanged() {
        void 0;
    }
    /**
     * @internal
     */
    connectedCallback() {
        super.connectedCallback();
        this.getSliderConfiguration();
        this.positionStyle = this.positionAsStyle();
        this.notifier = _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.Observable.getNotifier(this.parentNode);
        this.notifier.subscribe(this, "orientation");
        this.notifier.subscribe(this, "direction");
        this.notifier.subscribe(this, "max");
        this.notifier.subscribe(this, "min");
    }
    /**
     * @internal
     */
    disconnectedCallback() {
        super.disconnectedCallback();
        this.notifier.unsubscribe(this, "orientation");
        this.notifier.unsubscribe(this, "direction");
        this.notifier.unsubscribe(this, "max");
        this.notifier.unsubscribe(this, "min");
    }
    /**
     * @internal
     */
    handleChange(source, propertyName) {
        switch (propertyName) {
            case "direction":
                this.sliderDirection = source.direction;
                break;
            case "orientation":
                this.sliderOrientation = source.orientation;
                break;
            case "max":
                this.sliderMaxPosition = source.max;
                break;
            case "min":
                this.sliderMinPosition = source.min;
                break;
            default:
                break;
        }
        this.positionStyle = this.positionAsStyle();
    }
    isSliderConfig(node) {
        return node.max !== undefined && node.min !== undefined;
    }
}
(0,tslib__WEBPACK_IMPORTED_MODULE_5__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.observable
], SliderLabel.prototype, "positionStyle", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_5__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr
], SliderLabel.prototype, "position", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_5__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ attribute: "hide-mark", mode: "boolean" })
], SliderLabel.prototype, "hideMark", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_5__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ attribute: "disabled", mode: "boolean" })
], SliderLabel.prototype, "disabled", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_5__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.observable
], SliderLabel.prototype, "sliderOrientation", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_5__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.observable
], SliderLabel.prototype, "sliderMinPosition", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_5__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.observable
], SliderLabel.prototype, "sliderMaxPosition", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_5__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.observable
], SliderLabel.prototype, "sliderDirection", void 0);


/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/slider-label/slider-label.template.js":
/*!************************************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/slider-label/slider-label.template.js ***!
  \************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   sliderLabelTemplate: () => (/* binding */ sliderLabelTemplate)
/* harmony export */ });
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @microsoft/fast-element */ "webpack/sharing/consume/default/@microsoft/fast-element/@microsoft/fast-element");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @microsoft/fast-web-utilities */ "./node_modules/@microsoft/fast-web-utilities/dist/aria.js");


/**
 * The template for the {@link @microsoft/fast-foundation#(SliderLabel:class)} component.
 * @public
 */
const sliderLabelTemplate = (context, definition) => (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.html) `
    <template
        aria-disabled="${x => x.disabled}"
        class="${x => x.sliderOrientation || _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_1__.Orientation.horizontal}
            ${x => (x.disabled ? "disabled" : "")}"
    >
        <div ${(0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.ref)("root")} part="root" class="root" style="${x => x.positionStyle}">
            <div class="container">
                ${(0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.when)(x => !x.hideMark, (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.html) `
                        <div class="mark"></div>
                    `)}
                <div class="label">
                    <slot></slot>
                </div>
            </div>
        </div>
    </template>
`;


/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/slider/index.js":
/*!**************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/slider/index.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Slider: () => (/* reexport safe */ _slider_js__WEBPACK_IMPORTED_MODULE_1__.Slider),
/* harmony export */   SliderMode: () => (/* reexport safe */ _slider_js__WEBPACK_IMPORTED_MODULE_1__.SliderMode),
/* harmony export */   sliderTemplate: () => (/* reexport safe */ _slider_template_js__WEBPACK_IMPORTED_MODULE_0__.sliderTemplate)
/* harmony export */ });
/* harmony import */ var _slider_template_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./slider.template.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/slider/slider.template.js");
/* harmony import */ var _slider_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./slider.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/slider/slider.js");




/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/slider/slider-utilities.js":
/*!*************************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/slider/slider-utilities.js ***!
  \*************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   convertPixelToPercent: () => (/* binding */ convertPixelToPercent)
/* harmony export */ });
/* harmony import */ var _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @microsoft/fast-web-utilities */ "./node_modules/@microsoft/fast-web-utilities/dist/numbers.js");
/* harmony import */ var _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @microsoft/fast-web-utilities */ "./node_modules/@microsoft/fast-web-utilities/dist/localization.js");

/**
 * Converts a pixel coordinate on the track to a percent of the track's range
 */
function convertPixelToPercent(pixelPos, minPosition, maxPosition, direction) {
    let pct = (0,_microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_0__.limit)(0, 1, (pixelPos - minPosition) / (maxPosition - minPosition));
    if (direction === _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_1__.Direction.rtl) {
        pct = 1 - pct;
    }
    return pct;
}


/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/slider/slider.form-associated.js":
/*!*******************************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/slider/slider.form-associated.js ***!
  \*******************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   FormAssociatedSlider: () => (/* binding */ FormAssociatedSlider)
/* harmony export */ });
/* harmony import */ var _form_associated_form_associated_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../form-associated/form-associated.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/form-associated/form-associated.js");
/* harmony import */ var _foundation_element_foundation_element_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../foundation-element/foundation-element.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/foundation-element/foundation-element.js");


class _Slider extends _foundation_element_foundation_element_js__WEBPACK_IMPORTED_MODULE_0__.FoundationElement {
}
/**
 * A form-associated base class for the {@link @microsoft/fast-foundation#(Slider:class)} component.
 *
 * @internal
 */
class FormAssociatedSlider extends (0,_form_associated_form_associated_js__WEBPACK_IMPORTED_MODULE_1__.FormAssociated)(_Slider) {
    constructor() {
        super(...arguments);
        this.proxy = document.createElement("input");
    }
}


/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/slider/slider.js":
/*!***************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/slider/slider.js ***!
  \***************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Slider: () => (/* binding */ Slider),
/* harmony export */   SliderMode: () => (/* binding */ SliderMode)
/* harmony export */ });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! tslib */ "./node_modules/@microsoft/fast-foundation/node_modules/tslib/tslib.es6.js");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @microsoft/fast-element */ "webpack/sharing/consume/default/@microsoft/fast-element/@microsoft/fast-element");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @microsoft/fast-web-utilities */ "./node_modules/@microsoft/fast-web-utilities/dist/localization.js");
/* harmony import */ var _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @microsoft/fast-web-utilities */ "./node_modules/@microsoft/fast-web-utilities/dist/aria.js");
/* harmony import */ var _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @microsoft/fast-web-utilities */ "./node_modules/@microsoft/fast-web-utilities/dist/key-codes.js");
/* harmony import */ var _utilities_direction_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../utilities/direction.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/utilities/direction.js");
/* harmony import */ var _slider_utilities_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./slider-utilities.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/slider/slider-utilities.js");
/* harmony import */ var _slider_form_associated_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./slider.form-associated.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/slider/slider.form-associated.js");






/**
 * The selection modes of a {@link @microsoft/fast-foundation#(Slider:class)}.
 * @public
 */
const SliderMode = {
    singleValue: "single-value",
};
/**
 * A Slider Custom HTML Element.
 * Implements the {@link https://www.w3.org/TR/wai-aria-1.1/#slider | ARIA slider }.
 *
 * @slot track - The track of the slider
 * @slot track-start - The track-start visual indicator
 * @slot thumb - The slider thumb
 * @slot - The default slot for labels
 * @csspart positioning-region - The region used to position the elements of the slider
 * @csspart track-container - The region containing the track elements
 * @csspart track-start - The element wrapping the track start slot
 * @csspart thumb-container - The thumb container element which is programatically positioned
 * @fires change - Fires a custom 'change' event when the slider value changes
 *
 * @public
 */
class Slider extends _slider_form_associated_js__WEBPACK_IMPORTED_MODULE_1__.FormAssociatedSlider {
    constructor() {
        super(...arguments);
        /**
         * @internal
         */
        this.direction = _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_2__.Direction.ltr;
        /**
         * @internal
         */
        this.isDragging = false;
        /**
         * @internal
         */
        this.trackWidth = 0;
        /**
         * @internal
         */
        this.trackMinWidth = 0;
        /**
         * @internal
         */
        this.trackHeight = 0;
        /**
         * @internal
         */
        this.trackLeft = 0;
        /**
         * @internal
         */
        this.trackMinHeight = 0;
        /**
         * Custom function that generates a string for the component's "aria-valuetext" attribute based on the current value.
         *
         * @public
         */
        this.valueTextFormatter = () => null;
        /**
         * The minimum allowed value.
         *
         * @defaultValue - 0
         * @public
         * @remarks
         * HTML Attribute: min
         */
        this.min = 0; // Map to proxy element.
        /**
         * The maximum allowed value.
         *
         * @defaultValue - 10
         * @public
         * @remarks
         * HTML Attribute: max
         */
        this.max = 10; // Map to proxy element.
        /**
         * Value to increment or decrement via arrow keys, mouse click or drag.
         *
         * @public
         * @remarks
         * HTML Attribute: step
         */
        this.step = 1; // Map to proxy element.
        /**
         * The orientation of the slider.
         *
         * @public
         * @remarks
         * HTML Attribute: orientation
         */
        this.orientation = _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_3__.Orientation.horizontal;
        /**
         * The selection mode.
         *
         * @public
         * @remarks
         * HTML Attribute: mode
         */
        this.mode = SliderMode.singleValue;
        this.keypressHandler = (e) => {
            if (this.readOnly) {
                return;
            }
            if (e.key === _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_4__.keyHome) {
                e.preventDefault();
                this.value = `${this.min}`;
            }
            else if (e.key === _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_4__.keyEnd) {
                e.preventDefault();
                this.value = `${this.max}`;
            }
            else if (!e.shiftKey) {
                switch (e.key) {
                    case _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_4__.keyArrowRight:
                    case _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_4__.keyArrowUp:
                        e.preventDefault();
                        this.increment();
                        break;
                    case _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_4__.keyArrowLeft:
                    case _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_4__.keyArrowDown:
                        e.preventDefault();
                        this.decrement();
                        break;
                }
            }
        };
        this.setupTrackConstraints = () => {
            const clientRect = this.track.getBoundingClientRect();
            this.trackWidth = this.track.clientWidth;
            this.trackMinWidth = this.track.clientLeft;
            this.trackHeight = clientRect.bottom;
            this.trackMinHeight = clientRect.top;
            this.trackLeft = this.getBoundingClientRect().left;
            if (this.trackWidth === 0) {
                this.trackWidth = 1;
            }
        };
        this.setupListeners = (remove = false) => {
            const eventAction = `${remove ? "remove" : "add"}EventListener`;
            this[eventAction]("keydown", this.keypressHandler);
            this[eventAction]("mousedown", this.handleMouseDown);
            this.thumb[eventAction]("mousedown", this.handleThumbMouseDown, {
                passive: true,
            });
            this.thumb[eventAction]("touchstart", this.handleThumbMouseDown, {
                passive: true,
            });
            // removes handlers attached by mousedown handlers
            if (remove) {
                this.handleMouseDown(null);
                this.handleThumbMouseDown(null);
            }
        };
        /**
         * @internal
         */
        this.initialValue = "";
        /**
         *  Handle mouse moves during a thumb drag operation
         *  If the event handler is null it removes the events
         */
        this.handleThumbMouseDown = (event) => {
            if (event) {
                if (this.readOnly || this.disabled || event.defaultPrevented) {
                    return;
                }
                event.target.focus();
            }
            const eventAction = `${event !== null ? "add" : "remove"}EventListener`;
            window[eventAction]("mouseup", this.handleWindowMouseUp);
            window[eventAction]("mousemove", this.handleMouseMove, { passive: true });
            window[eventAction]("touchmove", this.handleMouseMove, { passive: true });
            window[eventAction]("touchend", this.handleWindowMouseUp);
            this.isDragging = event !== null;
        };
        /**
         *  Handle mouse moves during a thumb drag operation
         */
        this.handleMouseMove = (e) => {
            if (this.readOnly || this.disabled || e.defaultPrevented) {
                return;
            }
            // update the value based on current position
            const sourceEvent = window.TouchEvent && e instanceof TouchEvent
                ? e.touches[0]
                : e;
            const eventValue = this.orientation === _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_3__.Orientation.horizontal
                ? sourceEvent.pageX - document.documentElement.scrollLeft - this.trackLeft
                : sourceEvent.pageY - document.documentElement.scrollTop;
            this.value = `${this.calculateNewValue(eventValue)}`;
        };
        this.calculateNewValue = (rawValue) => {
            // update the value based on current position
            const newPosition = (0,_slider_utilities_js__WEBPACK_IMPORTED_MODULE_5__.convertPixelToPercent)(rawValue, this.orientation === _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_3__.Orientation.horizontal
                ? this.trackMinWidth
                : this.trackMinHeight, this.orientation === _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_3__.Orientation.horizontal
                ? this.trackWidth
                : this.trackHeight, this.direction);
            const newValue = (this.max - this.min) * newPosition + this.min;
            return this.convertToConstrainedValue(newValue);
        };
        /**
         * Handle a window mouse up during a drag operation
         */
        this.handleWindowMouseUp = (event) => {
            this.stopDragging();
        };
        this.stopDragging = () => {
            this.isDragging = false;
            this.handleMouseDown(null);
            this.handleThumbMouseDown(null);
        };
        /**
         *
         * @param e - MouseEvent or null. If there is no event handler it will remove the events
         */
        this.handleMouseDown = (e) => {
            const eventAction = `${e !== null ? "add" : "remove"}EventListener`;
            if (e === null || (!this.disabled && !this.readOnly)) {
                window[eventAction]("mouseup", this.handleWindowMouseUp);
                window.document[eventAction]("mouseleave", this.handleWindowMouseUp);
                window[eventAction]("mousemove", this.handleMouseMove);
                if (e) {
                    e.preventDefault();
                    this.setupTrackConstraints();
                    e.target.focus();
                    const controlValue = this.orientation === _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_3__.Orientation.horizontal
                        ? e.pageX - document.documentElement.scrollLeft - this.trackLeft
                        : e.pageY - document.documentElement.scrollTop;
                    this.value = `${this.calculateNewValue(controlValue)}`;
                }
            }
        };
        this.convertToConstrainedValue = (value) => {
            if (isNaN(value)) {
                value = this.min;
            }
            /**
             * The following logic intends to overcome the issue with math in JavaScript with regards to floating point numbers.
             * This is needed as the `step` may be an integer but could also be a float. To accomplish this the step  is assumed to be a float
             * and is converted to an integer by determining the number of decimal places it represent, multiplying it until it is an
             * integer and then dividing it to get back to the correct number.
             */
            let constrainedValue = value - this.min;
            const roundedConstrainedValue = Math.round(constrainedValue / this.step);
            const remainderValue = constrainedValue -
                (roundedConstrainedValue * (this.stepMultiplier * this.step)) /
                    this.stepMultiplier;
            constrainedValue =
                remainderValue >= Number(this.step) / 2
                    ? constrainedValue - remainderValue + Number(this.step)
                    : constrainedValue - remainderValue;
            return constrainedValue + this.min;
        };
    }
    readOnlyChanged() {
        if (this.proxy instanceof HTMLInputElement) {
            this.proxy.readOnly = this.readOnly;
        }
    }
    /**
     * The value property, typed as a number.
     *
     * @public
     */
    get valueAsNumber() {
        return parseFloat(super.value);
    }
    set valueAsNumber(next) {
        this.value = next.toString();
    }
    /**
     * @internal
     */
    valueChanged(previous, next) {
        super.valueChanged(previous, next);
        if (this.$fastController.isConnected) {
            this.setThumbPositionForOrientation(this.direction);
        }
        this.$emit("change");
    }
    minChanged() {
        if (this.proxy instanceof HTMLInputElement) {
            this.proxy.min = `${this.min}`;
        }
        this.validate();
    }
    maxChanged() {
        if (this.proxy instanceof HTMLInputElement) {
            this.proxy.max = `${this.max}`;
        }
        this.validate();
    }
    stepChanged() {
        if (this.proxy instanceof HTMLInputElement) {
            this.proxy.step = `${this.step}`;
        }
        this.updateStepMultiplier();
        this.validate();
    }
    orientationChanged() {
        if (this.$fastController.isConnected) {
            this.setThumbPositionForOrientation(this.direction);
        }
    }
    /**
     * @internal
     */
    connectedCallback() {
        super.connectedCallback();
        this.proxy.setAttribute("type", "range");
        this.direction = (0,_utilities_direction_js__WEBPACK_IMPORTED_MODULE_6__.getDirection)(this);
        this.updateStepMultiplier();
        this.setupTrackConstraints();
        this.setupListeners();
        this.setupDefaultValue();
        this.setThumbPositionForOrientation(this.direction);
    }
    /**
     * @internal
     */
    disconnectedCallback() {
        this.setupListeners(true);
    }
    /**
     * Increment the value by the step
     *
     * @public
     */
    increment() {
        const newVal = this.direction !== _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_2__.Direction.rtl && this.orientation !== _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_3__.Orientation.vertical
            ? Number(this.value) + Number(this.step)
            : Number(this.value) - Number(this.step);
        const incrementedVal = this.convertToConstrainedValue(newVal);
        const incrementedValString = incrementedVal < Number(this.max) ? `${incrementedVal}` : `${this.max}`;
        this.value = incrementedValString;
    }
    /**
     * Decrement the value by the step
     *
     * @public
     */
    decrement() {
        const newVal = this.direction !== _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_2__.Direction.rtl && this.orientation !== _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_3__.Orientation.vertical
            ? Number(this.value) - Number(this.step)
            : Number(this.value) + Number(this.step);
        const decrementedVal = this.convertToConstrainedValue(newVal);
        const decrementedValString = decrementedVal > Number(this.min) ? `${decrementedVal}` : `${this.min}`;
        this.value = decrementedValString;
    }
    /**
     * Places the thumb based on the current value
     *
     * @public
     * @param direction - writing mode
     */
    setThumbPositionForOrientation(direction) {
        const newPct = (0,_slider_utilities_js__WEBPACK_IMPORTED_MODULE_5__.convertPixelToPercent)(Number(this.value), Number(this.min), Number(this.max), direction);
        const percentage = (1 - newPct) * 100;
        if (this.orientation === _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_3__.Orientation.horizontal) {
            this.position = this.isDragging
                ? `right: ${percentage}%; transition: none;`
                : `right: ${percentage}%; transition: all 0.2s ease;`;
        }
        else {
            this.position = this.isDragging
                ? `bottom: ${percentage}%; transition: none;`
                : `bottom: ${percentage}%; transition: all 0.2s ease;`;
        }
    }
    /**
     * Update the step multiplier used to ensure rounding errors from steps that
     * are not whole numbers
     */
    updateStepMultiplier() {
        const stepString = this.step + "";
        const decimalPlacesOfStep = !!(this.step % 1)
            ? stepString.length - stepString.indexOf(".") - 1
            : 0;
        this.stepMultiplier = Math.pow(10, decimalPlacesOfStep);
    }
    get midpoint() {
        return `${this.convertToConstrainedValue((this.max + this.min) / 2)}`;
    }
    setupDefaultValue() {
        if (typeof this.value === "string") {
            if (this.value.length === 0) {
                this.initialValue = this.midpoint;
            }
            else {
                const value = parseFloat(this.value);
                if (!Number.isNaN(value) && (value < this.min || value > this.max)) {
                    this.value = this.midpoint;
                }
            }
        }
    }
}
(0,tslib__WEBPACK_IMPORTED_MODULE_7__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ attribute: "readonly", mode: "boolean" })
], Slider.prototype, "readOnly", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_7__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.observable
], Slider.prototype, "direction", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_7__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.observable
], Slider.prototype, "isDragging", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_7__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.observable
], Slider.prototype, "position", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_7__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.observable
], Slider.prototype, "trackWidth", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_7__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.observable
], Slider.prototype, "trackMinWidth", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_7__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.observable
], Slider.prototype, "trackHeight", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_7__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.observable
], Slider.prototype, "trackLeft", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_7__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.observable
], Slider.prototype, "trackMinHeight", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_7__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.observable
], Slider.prototype, "valueTextFormatter", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_7__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ converter: _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.nullableNumberConverter })
], Slider.prototype, "min", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_7__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ converter: _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.nullableNumberConverter })
], Slider.prototype, "max", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_7__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ converter: _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.nullableNumberConverter })
], Slider.prototype, "step", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_7__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr
], Slider.prototype, "orientation", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_7__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr
], Slider.prototype, "mode", void 0);


/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/slider/slider.template.js":
/*!************************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/slider/slider.template.js ***!
  \************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   sliderTemplate: () => (/* binding */ sliderTemplate)
/* harmony export */ });
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @microsoft/fast-element */ "webpack/sharing/consume/default/@microsoft/fast-element/@microsoft/fast-element");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @microsoft/fast-web-utilities */ "./node_modules/@microsoft/fast-web-utilities/dist/aria.js");


/**
 * The template for the {@link @microsoft/fast-foundation#(Slider:class)} component.
 * @public
 */
const sliderTemplate = (context, definition) => (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.html) `
    <template
        role="slider"
        class="${x => (x.readOnly ? "readonly" : "")}
        ${x => x.orientation || _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_1__.Orientation.horizontal}"
        tabindex="${x => (x.disabled ? null : 0)}"
        aria-valuetext="${x => x.valueTextFormatter(x.value)}"
        aria-valuenow="${x => x.value}"
        aria-valuemin="${x => x.min}"
        aria-valuemax="${x => x.max}"
        aria-disabled="${x => (x.disabled ? true : void 0)}"
        aria-readonly="${x => (x.readOnly ? true : void 0)}"
        aria-orientation="${x => x.orientation}"
        class="${x => x.orientation}"
    >
        <div part="positioning-region" class="positioning-region">
            <div ${(0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.ref)("track")} part="track-container" class="track">
                <slot name="track"></slot>
                <div part="track-start" class="track-start" style="${x => x.position}">
                    <slot name="track-start"></slot>
                </div>
            </div>
            <slot></slot>
            <div
                ${(0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.ref)("thumb")}
                part="thumb-container"
                class="thumb-container"
                style="${x => x.position}"
            >
                <slot name="thumb">${definition.thumb || ""}</slot>
            </div>
        </div>
    </template>
`;


/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/switch/index.js":
/*!**************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/switch/index.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Switch: () => (/* reexport safe */ _switch_js__WEBPACK_IMPORTED_MODULE_1__.Switch),
/* harmony export */   switchTemplate: () => (/* reexport safe */ _switch_template_js__WEBPACK_IMPORTED_MODULE_0__.switchTemplate)
/* harmony export */ });
/* harmony import */ var _switch_template_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./switch.template.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/switch/switch.template.js");
/* harmony import */ var _switch_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./switch.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/switch/switch.js");




/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/switch/switch.form-associated.js":
/*!*******************************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/switch/switch.form-associated.js ***!
  \*******************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   FormAssociatedSwitch: () => (/* binding */ FormAssociatedSwitch)
/* harmony export */ });
/* harmony import */ var _form_associated_form_associated_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../form-associated/form-associated.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/form-associated/form-associated.js");
/* harmony import */ var _foundation_element_foundation_element_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../foundation-element/foundation-element.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/foundation-element/foundation-element.js");


class _Switch extends _foundation_element_foundation_element_js__WEBPACK_IMPORTED_MODULE_0__.FoundationElement {
}
/**
 * A form-associated base class for the {@link @microsoft/fast-foundation#(Switch:class)} component.
 *
 * @internal
 */
class FormAssociatedSwitch extends (0,_form_associated_form_associated_js__WEBPACK_IMPORTED_MODULE_1__.CheckableFormAssociated)(_Switch) {
    constructor() {
        super(...arguments);
        this.proxy = document.createElement("input");
    }
}


/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/switch/switch.js":
/*!***************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/switch/switch.js ***!
  \***************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Switch: () => (/* binding */ Switch)
/* harmony export */ });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! tslib */ "./node_modules/@microsoft/fast-foundation/node_modules/tslib/tslib.es6.js");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @microsoft/fast-element */ "webpack/sharing/consume/default/@microsoft/fast-element/@microsoft/fast-element");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @microsoft/fast-web-utilities */ "./node_modules/@microsoft/fast-web-utilities/dist/key-codes.js");
/* harmony import */ var _switch_form_associated_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./switch.form-associated.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/switch/switch.form-associated.js");




/**
 * A Switch Custom HTML Element.
 * Implements the {@link https://www.w3.org/TR/wai-aria-1.1/#switch | ARIA switch }.
 *
 * @slot - The deafult slot for the label
 * @slot checked-message - The message when in a checked state
 * @slot unchecked-message - The message when in an unchecked state
 * @csspart label - The label
 * @csspart switch - The element representing the switch, which wraps the indicator
 * @csspart status-message - The wrapper for the status messages
 * @csspart checked-message - The checked message
 * @csspart unchecked-message - The unchecked message
 * @fires change - Emits a custom change event when the checked state changes
 *
 * @public
 */
class Switch extends _switch_form_associated_js__WEBPACK_IMPORTED_MODULE_1__.FormAssociatedSwitch {
    constructor() {
        super();
        /**
         * The element's value to be included in form submission when checked.
         * Default to "on" to reach parity with input[type="checkbox"]
         *
         * @internal
         */
        this.initialValue = "on";
        /**
         * @internal
         */
        this.keypressHandler = (e) => {
            if (this.readOnly) {
                return;
            }
            switch (e.key) {
                case _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_2__.keyEnter:
                case _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_2__.keySpace:
                    this.checked = !this.checked;
                    break;
            }
        };
        /**
         * @internal
         */
        this.clickHandler = (e) => {
            if (!this.disabled && !this.readOnly) {
                this.checked = !this.checked;
            }
        };
        this.proxy.setAttribute("type", "checkbox");
    }
    readOnlyChanged() {
        if (this.proxy instanceof HTMLInputElement) {
            this.proxy.readOnly = this.readOnly;
        }
        this.readOnly
            ? this.classList.add("readonly")
            : this.classList.remove("readonly");
    }
    /**
     * @internal
     */
    checkedChanged(prev, next) {
        super.checkedChanged(prev, next);
        /**
         * @deprecated - this behavior already exists in the template and should not exist in the class.
         */
        this.checked ? this.classList.add("checked") : this.classList.remove("checked");
    }
}
(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ attribute: "readonly", mode: "boolean" })
], Switch.prototype, "readOnly", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.observable
], Switch.prototype, "defaultSlottedNodes", void 0);


/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/switch/switch.template.js":
/*!************************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/switch/switch.template.js ***!
  \************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   switchTemplate: () => (/* binding */ switchTemplate)
/* harmony export */ });
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @microsoft/fast-element */ "webpack/sharing/consume/default/@microsoft/fast-element/@microsoft/fast-element");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__);

/**
 * The template for the {@link @microsoft/fast-foundation#(Switch:class)} component.
 * @public
 */
const switchTemplate = (context, definition) => (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.html) `
    <template
        role="switch"
        aria-checked="${x => x.checked}"
        aria-disabled="${x => x.disabled}"
        aria-readonly="${x => x.readOnly}"
        tabindex="${x => (x.disabled ? null : 0)}"
        @keypress="${(x, c) => x.keypressHandler(c.event)}"
        @click="${(x, c) => x.clickHandler(c.event)}"
        class="${x => (x.checked ? "checked" : "")}"
    >
        <label
            part="label"
            class="${x => x.defaultSlottedNodes && x.defaultSlottedNodes.length
    ? "label"
    : "label label__hidden"}"
        >
            <slot ${(0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.slotted)("defaultSlottedNodes")}></slot>
        </label>
        <div part="switch" class="switch">
            <slot name="switch">${definition.switch || ""}</slot>
        </div>
        <span class="status-message" part="status-message">
            <span class="checked-message" part="checked-message">
                <slot name="checked-message"></slot>
            </span>
            <span class="unchecked-message" part="unchecked-message">
                <slot name="unchecked-message"></slot>
            </span>
        </span>
    </template>
`;


/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/tab-panel/index.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/tab-panel/index.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   TabPanel: () => (/* reexport safe */ _tab_panel_js__WEBPACK_IMPORTED_MODULE_1__.TabPanel),
/* harmony export */   tabPanelTemplate: () => (/* reexport safe */ _tab_panel_template_js__WEBPACK_IMPORTED_MODULE_0__.tabPanelTemplate)
/* harmony export */ });
/* harmony import */ var _tab_panel_template_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./tab-panel.template.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/tab-panel/tab-panel.template.js");
/* harmony import */ var _tab_panel_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./tab-panel.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/tab-panel/tab-panel.js");




/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/tab-panel/tab-panel.js":
/*!*********************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/tab-panel/tab-panel.js ***!
  \*********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   TabPanel: () => (/* binding */ TabPanel)
/* harmony export */ });
/* harmony import */ var _foundation_element_foundation_element_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../foundation-element/foundation-element.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/foundation-element/foundation-element.js");

/**
 * A TabPanel Component to be used with {@link @microsoft/fast-foundation#(Tabs:class)}
 *
 * @slot - The default slot for the tabpanel content
 *
 * @public
 */
class TabPanel extends _foundation_element_foundation_element_js__WEBPACK_IMPORTED_MODULE_0__.FoundationElement {
}


/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/tab-panel/tab-panel.template.js":
/*!******************************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/tab-panel/tab-panel.template.js ***!
  \******************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   tabPanelTemplate: () => (/* binding */ tabPanelTemplate)
/* harmony export */ });
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @microsoft/fast-element */ "webpack/sharing/consume/default/@microsoft/fast-element/@microsoft/fast-element");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__);

/**
 * The template for the {@link @microsoft/fast-foundation#TabPanel} component.
 * @public
 */
const tabPanelTemplate = (context, definition) => (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.html) `
    <template slot="tabpanel" role="tabpanel">
        <slot></slot>
    </template>
`;


/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/tab/index.js":
/*!***********************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/tab/index.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Tab: () => (/* reexport safe */ _tab_js__WEBPACK_IMPORTED_MODULE_1__.Tab),
/* harmony export */   tabTemplate: () => (/* reexport safe */ _tab_template_js__WEBPACK_IMPORTED_MODULE_0__.tabTemplate)
/* harmony export */ });
/* harmony import */ var _tab_template_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./tab.template.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/tab/tab.template.js");
/* harmony import */ var _tab_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./tab.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/tab/tab.js");




/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/tab/tab.js":
/*!*********************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/tab/tab.js ***!
  \*********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Tab: () => (/* binding */ Tab)
/* harmony export */ });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! tslib */ "./node_modules/@microsoft/fast-foundation/node_modules/tslib/tslib.es6.js");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @microsoft/fast-element */ "webpack/sharing/consume/default/@microsoft/fast-element/@microsoft/fast-element");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _foundation_element_foundation_element_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../foundation-element/foundation-element.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/foundation-element/foundation-element.js");



/**
 * A Tab Component to be used with {@link @microsoft/fast-foundation#(Tabs:class)}
 *
 * @slot - The default slot for the tab content
 *
 * @public
 */
class Tab extends _foundation_element_foundation_element_js__WEBPACK_IMPORTED_MODULE_1__.FoundationElement {
}
(0,tslib__WEBPACK_IMPORTED_MODULE_2__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ mode: "boolean" })
], Tab.prototype, "disabled", void 0);


/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/tab/tab.template.js":
/*!******************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/tab/tab.template.js ***!
  \******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   tabTemplate: () => (/* binding */ tabTemplate)
/* harmony export */ });
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @microsoft/fast-element */ "webpack/sharing/consume/default/@microsoft/fast-element/@microsoft/fast-element");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__);

/**
 * The template for the {@link @microsoft/fast-foundation#Tab} component.
 * @public
 */
const tabTemplate = (context, definition) => (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.html) `
    <template slot="tab" role="tab" aria-disabled="${x => x.disabled}">
        <slot></slot>
    </template>
`;


/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/tabs/index.js":
/*!************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/tabs/index.js ***!
  \************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Tabs: () => (/* reexport safe */ _tabs_js__WEBPACK_IMPORTED_MODULE_1__.Tabs),
/* harmony export */   TabsOrientation: () => (/* reexport safe */ _tabs_js__WEBPACK_IMPORTED_MODULE_1__.TabsOrientation),
/* harmony export */   tabsTemplate: () => (/* reexport safe */ _tabs_template_js__WEBPACK_IMPORTED_MODULE_0__.tabsTemplate)
/* harmony export */ });
/* harmony import */ var _tabs_template_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./tabs.template.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/tabs/tabs.template.js");
/* harmony import */ var _tabs_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./tabs.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/tabs/tabs.js");




/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/tabs/tabs.js":
/*!***********************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/tabs/tabs.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Tabs: () => (/* binding */ Tabs),
/* harmony export */   TabsOrientation: () => (/* binding */ TabsOrientation)
/* harmony export */ });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! tslib */ "./node_modules/@microsoft/fast-foundation/node_modules/tslib/tslib.es6.js");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @microsoft/fast-element */ "webpack/sharing/consume/default/@microsoft/fast-element/@microsoft/fast-element");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @microsoft/fast-web-utilities */ "./node_modules/@microsoft/fast-web-utilities/dist/key-codes.js");
/* harmony import */ var _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @microsoft/fast-web-utilities */ "./node_modules/@microsoft/fast-web-utilities/dist/strings.js");
/* harmony import */ var _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @microsoft/fast-web-utilities */ "./node_modules/@microsoft/fast-web-utilities/dist/numbers.js");
/* harmony import */ var _patterns_start_end_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../patterns/start-end.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/patterns/start-end.js");
/* harmony import */ var _utilities_apply_mixins_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../utilities/apply-mixins.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/utilities/apply-mixins.js");
/* harmony import */ var _foundation_element_foundation_element_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../foundation-element/foundation-element.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/foundation-element/foundation-element.js");






/**
 * The orientation of the {@link @microsoft/fast-foundation#(Tabs:class)} component
 * @public
 */
const TabsOrientation = {
    vertical: "vertical",
    horizontal: "horizontal",
};
/**
 * A Tabs Custom HTML Element.
 * Implements the {@link https://www.w3.org/TR/wai-aria-1.1/#tablist | ARIA tablist }.
 *
 * @slot start - Content which can be provided before the tablist element
 * @slot end - Content which can be provided after the tablist element
 * @slot tab - The slot for tabs
 * @slot tabpanel - The slot for tabpanels
 * @csspart tablist - The element wrapping for the tabs
 * @csspart tab - The tab slot
 * @csspart activeIndicator - The visual indicator
 * @csspart tabpanel - The tabpanel slot
 * @fires change - Fires a custom 'change' event when a tab is clicked or during keyboard navigation
 *
 * @public
 */
class Tabs extends _foundation_element_foundation_element_js__WEBPACK_IMPORTED_MODULE_1__.FoundationElement {
    constructor() {
        super(...arguments);
        /**
         * The orientation
         * @public
         * @remarks
         * HTML Attribute: orientation
         */
        this.orientation = TabsOrientation.horizontal;
        /**
         * Whether or not to show the active indicator
         * @public
         * @remarks
         * HTML Attribute: activeindicator
         */
        this.activeindicator = true;
        /**
         * @internal
         */
        this.showActiveIndicator = true;
        this.prevActiveTabIndex = 0;
        this.activeTabIndex = 0;
        this.ticking = false;
        this.change = () => {
            this.$emit("change", this.activetab);
        };
        this.isDisabledElement = (el) => {
            return el.getAttribute("aria-disabled") === "true";
        };
        this.isHiddenElement = (el) => {
            return el.hasAttribute("hidden");
        };
        this.isFocusableElement = (el) => {
            return !this.isDisabledElement(el) && !this.isHiddenElement(el);
        };
        this.setTabs = () => {
            const gridHorizontalProperty = "gridColumn";
            const gridVerticalProperty = "gridRow";
            const gridProperty = this.isHorizontal()
                ? gridHorizontalProperty
                : gridVerticalProperty;
            this.activeTabIndex = this.getActiveIndex();
            this.showActiveIndicator = false;
            this.tabs.forEach((tab, index) => {
                if (tab.slot === "tab") {
                    const isActiveTab = this.activeTabIndex === index && this.isFocusableElement(tab);
                    if (this.activeindicator && this.isFocusableElement(tab)) {
                        this.showActiveIndicator = true;
                    }
                    const tabId = this.tabIds[index];
                    const tabpanelId = this.tabpanelIds[index];
                    tab.setAttribute("id", tabId);
                    tab.setAttribute("aria-selected", isActiveTab ? "true" : "false");
                    tab.setAttribute("aria-controls", tabpanelId);
                    tab.addEventListener("click", this.handleTabClick);
                    tab.addEventListener("keydown", this.handleTabKeyDown);
                    tab.setAttribute("tabindex", isActiveTab ? "0" : "-1");
                    if (isActiveTab) {
                        this.activetab = tab;
                        this.activeid = tabId;
                    }
                }
                // If the original property isn't emptied out,
                // the next set will morph into a grid-area style setting that is not what we want
                tab.style[gridHorizontalProperty] = "";
                tab.style[gridVerticalProperty] = "";
                tab.style[gridProperty] = `${index + 1}`;
                !this.isHorizontal()
                    ? tab.classList.add("vertical")
                    : tab.classList.remove("vertical");
            });
        };
        this.setTabPanels = () => {
            this.tabpanels.forEach((tabpanel, index) => {
                const tabId = this.tabIds[index];
                const tabpanelId = this.tabpanelIds[index];
                tabpanel.setAttribute("id", tabpanelId);
                tabpanel.setAttribute("aria-labelledby", tabId);
                this.activeTabIndex !== index
                    ? tabpanel.setAttribute("hidden", "")
                    : tabpanel.removeAttribute("hidden");
            });
        };
        this.handleTabClick = (event) => {
            const selectedTab = event.currentTarget;
            if (selectedTab.nodeType === 1 && this.isFocusableElement(selectedTab)) {
                this.prevActiveTabIndex = this.activeTabIndex;
                this.activeTabIndex = this.tabs.indexOf(selectedTab);
                this.setComponent();
            }
        };
        this.handleTabKeyDown = (event) => {
            if (this.isHorizontal()) {
                switch (event.key) {
                    case _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_2__.keyArrowLeft:
                        event.preventDefault();
                        this.adjustBackward(event);
                        break;
                    case _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_2__.keyArrowRight:
                        event.preventDefault();
                        this.adjustForward(event);
                        break;
                }
            }
            else {
                switch (event.key) {
                    case _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_2__.keyArrowUp:
                        event.preventDefault();
                        this.adjustBackward(event);
                        break;
                    case _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_2__.keyArrowDown:
                        event.preventDefault();
                        this.adjustForward(event);
                        break;
                }
            }
            switch (event.key) {
                case _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_2__.keyHome:
                    event.preventDefault();
                    this.adjust(-this.activeTabIndex);
                    break;
                case _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_2__.keyEnd:
                    event.preventDefault();
                    this.adjust(this.tabs.length - this.activeTabIndex - 1);
                    break;
            }
        };
        this.adjustForward = (e) => {
            const group = this.tabs;
            let index = 0;
            index = this.activetab ? group.indexOf(this.activetab) + 1 : 1;
            if (index === group.length) {
                index = 0;
            }
            while (index < group.length && group.length > 1) {
                if (this.isFocusableElement(group[index])) {
                    this.moveToTabByIndex(group, index);
                    break;
                }
                else if (this.activetab && index === group.indexOf(this.activetab)) {
                    break;
                }
                else if (index + 1 >= group.length) {
                    index = 0;
                }
                else {
                    index += 1;
                }
            }
        };
        this.adjustBackward = (e) => {
            const group = this.tabs;
            let index = 0;
            index = this.activetab ? group.indexOf(this.activetab) - 1 : 0;
            index = index < 0 ? group.length - 1 : index;
            while (index >= 0 && group.length > 1) {
                if (this.isFocusableElement(group[index])) {
                    this.moveToTabByIndex(group, index);
                    break;
                }
                else if (index - 1 < 0) {
                    index = group.length - 1;
                }
                else {
                    index -= 1;
                }
            }
        };
        this.moveToTabByIndex = (group, index) => {
            const tab = group[index];
            this.activetab = tab;
            this.prevActiveTabIndex = this.activeTabIndex;
            this.activeTabIndex = index;
            tab.focus();
            this.setComponent();
        };
    }
    /**
     * @internal
     */
    orientationChanged() {
        if (this.$fastController.isConnected) {
            this.setTabs();
            this.setTabPanels();
            this.handleActiveIndicatorPosition();
        }
    }
    /**
     * @internal
     */
    activeidChanged(oldValue, newValue) {
        if (this.$fastController.isConnected &&
            this.tabs.length <= this.tabpanels.length) {
            this.prevActiveTabIndex = this.tabs.findIndex((item) => item.id === oldValue);
            this.setTabs();
            this.setTabPanels();
            this.handleActiveIndicatorPosition();
        }
    }
    /**
     * @internal
     */
    tabsChanged() {
        if (this.$fastController.isConnected &&
            this.tabs.length <= this.tabpanels.length) {
            this.tabIds = this.getTabIds();
            this.tabpanelIds = this.getTabPanelIds();
            this.setTabs();
            this.setTabPanels();
            this.handleActiveIndicatorPosition();
        }
    }
    /**
     * @internal
     */
    tabpanelsChanged() {
        if (this.$fastController.isConnected &&
            this.tabpanels.length <= this.tabs.length) {
            this.tabIds = this.getTabIds();
            this.tabpanelIds = this.getTabPanelIds();
            this.setTabs();
            this.setTabPanels();
            this.handleActiveIndicatorPosition();
        }
    }
    getActiveIndex() {
        const id = this.activeid;
        if (id !== undefined) {
            return this.tabIds.indexOf(this.activeid) === -1
                ? 0
                : this.tabIds.indexOf(this.activeid);
        }
        else {
            return 0;
        }
    }
    getTabIds() {
        return this.tabs.map((tab) => {
            var _a;
            return (_a = tab.getAttribute("id")) !== null && _a !== void 0 ? _a : `tab-${(0,_microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_3__.uniqueId)()}`;
        });
    }
    getTabPanelIds() {
        return this.tabpanels.map((tabPanel) => {
            var _a;
            return (_a = tabPanel.getAttribute("id")) !== null && _a !== void 0 ? _a : `panel-${(0,_microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_3__.uniqueId)()}`;
        });
    }
    setComponent() {
        if (this.activeTabIndex !== this.prevActiveTabIndex) {
            this.activeid = this.tabIds[this.activeTabIndex];
            this.focusTab();
            this.change();
        }
    }
    isHorizontal() {
        return this.orientation === TabsOrientation.horizontal;
    }
    handleActiveIndicatorPosition() {
        // Ignore if we click twice on the same tab
        if (this.showActiveIndicator &&
            this.activeindicator &&
            this.activeTabIndex !== this.prevActiveTabIndex) {
            if (this.ticking) {
                this.ticking = false;
            }
            else {
                this.ticking = true;
                this.animateActiveIndicator();
            }
        }
    }
    animateActiveIndicator() {
        this.ticking = true;
        const gridProperty = this.isHorizontal() ? "gridColumn" : "gridRow";
        const translateProperty = this.isHorizontal()
            ? "translateX"
            : "translateY";
        const offsetProperty = this.isHorizontal() ? "offsetLeft" : "offsetTop";
        const prev = this.activeIndicatorRef[offsetProperty];
        this.activeIndicatorRef.style[gridProperty] = `${this.activeTabIndex + 1}`;
        const next = this.activeIndicatorRef[offsetProperty];
        this.activeIndicatorRef.style[gridProperty] = `${this.prevActiveTabIndex + 1}`;
        const dif = next - prev;
        this.activeIndicatorRef.style.transform = `${translateProperty}(${dif}px)`;
        this.activeIndicatorRef.classList.add("activeIndicatorTransition");
        this.activeIndicatorRef.addEventListener("transitionend", () => {
            this.ticking = false;
            this.activeIndicatorRef.style[gridProperty] = `${this.activeTabIndex + 1}`;
            this.activeIndicatorRef.style.transform = `${translateProperty}(0px)`;
            this.activeIndicatorRef.classList.remove("activeIndicatorTransition");
        });
    }
    /**
     * The adjust method for FASTTabs
     * @public
     * @remarks
     * This method allows the active index to be adjusted by numerical increments
     */
    adjust(adjustment) {
        const focusableTabs = this.tabs.filter(t => this.isFocusableElement(t));
        const currentActiveTabIndex = focusableTabs.indexOf(this.activetab);
        const nextTabIndex = (0,_microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_4__.limit)(0, focusableTabs.length - 1, currentActiveTabIndex + adjustment);
        // the index of the next focusable tab within the context of all available tabs
        const nextIndex = this.tabs.indexOf(focusableTabs[nextTabIndex]);
        if (nextIndex > -1) {
            this.moveToTabByIndex(this.tabs, nextIndex);
        }
    }
    focusTab() {
        this.tabs[this.activeTabIndex].focus();
    }
    /**
     * @internal
     */
    connectedCallback() {
        super.connectedCallback();
        this.tabIds = this.getTabIds();
        this.tabpanelIds = this.getTabPanelIds();
        this.activeTabIndex = this.getActiveIndex();
    }
}
(0,tslib__WEBPACK_IMPORTED_MODULE_5__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr
], Tabs.prototype, "orientation", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_5__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr
], Tabs.prototype, "activeid", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_5__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.observable
], Tabs.prototype, "tabs", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_5__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.observable
], Tabs.prototype, "tabpanels", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_5__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ mode: "boolean" })
], Tabs.prototype, "activeindicator", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_5__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.observable
], Tabs.prototype, "activeIndicatorRef", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_5__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.observable
], Tabs.prototype, "showActiveIndicator", void 0);
(0,_utilities_apply_mixins_js__WEBPACK_IMPORTED_MODULE_6__.applyMixins)(Tabs, _patterns_start_end_js__WEBPACK_IMPORTED_MODULE_7__.StartEnd);


/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/tabs/tabs.template.js":
/*!********************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/tabs/tabs.template.js ***!
  \********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   tabsTemplate: () => (/* binding */ tabsTemplate)
/* harmony export */ });
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @microsoft/fast-element */ "webpack/sharing/consume/default/@microsoft/fast-element/@microsoft/fast-element");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _patterns_start_end_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../patterns/start-end.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/patterns/start-end.js");


/**
 * The template for the {@link @microsoft/fast-foundation#(Tabs:class)} component.
 * @public
 */
const tabsTemplate = (context, definition) => (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.html) `
    <template class="${x => x.orientation}">
        ${(0,_patterns_start_end_js__WEBPACK_IMPORTED_MODULE_1__.startSlotTemplate)(context, definition)}
        <div class="tablist" part="tablist" role="tablist">
            <slot class="tab" name="tab" part="tab" ${(0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.slotted)("tabs")}></slot>

            ${(0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.when)(x => x.showActiveIndicator, (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.html) `
                    <div
                        ${(0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.ref)("activeIndicatorRef")}
                        class="activeIndicator"
                        part="activeIndicator"
                    ></div>
                `)}
        </div>
        ${(0,_patterns_start_end_js__WEBPACK_IMPORTED_MODULE_1__.endSlotTemplate)(context, definition)}
        <div class="tabpanel" part="tabpanel">
            <slot name="tabpanel" ${(0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.slotted)("tabpanels")}></slot>
        </div>
    </template>
`;


/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/text-area/index.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/text-area/index.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   TextArea: () => (/* reexport safe */ _text_area_js__WEBPACK_IMPORTED_MODULE_1__.TextArea),
/* harmony export */   TextAreaResize: () => (/* reexport safe */ _text_area_js__WEBPACK_IMPORTED_MODULE_1__.TextAreaResize),
/* harmony export */   textAreaTemplate: () => (/* reexport safe */ _text_area_template_js__WEBPACK_IMPORTED_MODULE_0__.textAreaTemplate)
/* harmony export */ });
/* harmony import */ var _text_area_template_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./text-area.template.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/text-area/text-area.template.js");
/* harmony import */ var _text_area_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./text-area.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/text-area/text-area.js");




/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/text-area/text-area.form-associated.js":
/*!*************************************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/text-area/text-area.form-associated.js ***!
  \*************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   FormAssociatedTextArea: () => (/* binding */ FormAssociatedTextArea)
/* harmony export */ });
/* harmony import */ var _form_associated_form_associated_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../form-associated/form-associated.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/form-associated/form-associated.js");
/* harmony import */ var _foundation_element_foundation_element_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../foundation-element/foundation-element.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/foundation-element/foundation-element.js");


class _TextArea extends _foundation_element_foundation_element_js__WEBPACK_IMPORTED_MODULE_0__.FoundationElement {
}
/**
 * A form-associated base class for the {@link @microsoft/fast-foundation#(TextArea:class)} component.
 *
 * @internal
 */
class FormAssociatedTextArea extends (0,_form_associated_form_associated_js__WEBPACK_IMPORTED_MODULE_1__.FormAssociated)(_TextArea) {
    constructor() {
        super(...arguments);
        this.proxy = document.createElement("textarea");
    }
}


/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/text-area/text-area.js":
/*!*********************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/text-area/text-area.js ***!
  \*********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   TextArea: () => (/* binding */ TextArea),
/* harmony export */   TextAreaResize: () => (/* reexport safe */ _text_area_options_js__WEBPACK_IMPORTED_MODULE_1__.TextAreaResize)
/* harmony export */ });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! tslib */ "./node_modules/@microsoft/fast-foundation/node_modules/tslib/tslib.es6.js");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @microsoft/fast-element */ "webpack/sharing/consume/default/@microsoft/fast-element/@microsoft/fast-element");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _text_field_text_field_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../text-field/text-field.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/text-field/text-field.js");
/* harmony import */ var _utilities_apply_mixins_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utilities/apply-mixins.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/utilities/apply-mixins.js");
/* harmony import */ var _text_area_form_associated_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./text-area.form-associated.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/text-area/text-area.form-associated.js");
/* harmony import */ var _text_area_options_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./text-area.options.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/text-area/text-area.options.js");







/**
 * A Text Area Custom HTML Element.
 * Based largely on the {@link https://developer.mozilla.org/en-US/docs/Web/HTML/Element/textarea | <textarea> element }.
 *
 * @slot - The default slot for the label
 * @csspart label - The label
 * @csspart root - The element wrapping the control
 * @csspart control - The textarea element
 * @fires change - Emits a custom 'change' event when the textarea emits a change event
 *
 * @public
 */
class TextArea extends _text_area_form_associated_js__WEBPACK_IMPORTED_MODULE_2__.FormAssociatedTextArea {
    constructor() {
        super(...arguments);
        /**
         * The resize mode of the element.
         * @public
         * @remarks
         * HTML Attribute: resize
         */
        this.resize = _text_area_options_js__WEBPACK_IMPORTED_MODULE_1__.TextAreaResize.none;
        /**
         * Sizes the element horizontally by a number of character columns.
         *
         * @public
         * @remarks
         * HTML Attribute: cols
         */
        this.cols = 20;
        /**
         * @internal
         */
        this.handleTextInput = () => {
            this.value = this.control.value;
        };
    }
    readOnlyChanged() {
        if (this.proxy instanceof HTMLTextAreaElement) {
            this.proxy.readOnly = this.readOnly;
        }
    }
    autofocusChanged() {
        if (this.proxy instanceof HTMLTextAreaElement) {
            this.proxy.autofocus = this.autofocus;
        }
    }
    listChanged() {
        if (this.proxy instanceof HTMLTextAreaElement) {
            this.proxy.setAttribute("list", this.list);
        }
    }
    maxlengthChanged() {
        if (this.proxy instanceof HTMLTextAreaElement) {
            this.proxy.maxLength = this.maxlength;
        }
    }
    minlengthChanged() {
        if (this.proxy instanceof HTMLTextAreaElement) {
            this.proxy.minLength = this.minlength;
        }
    }
    spellcheckChanged() {
        if (this.proxy instanceof HTMLTextAreaElement) {
            this.proxy.spellcheck = this.spellcheck;
        }
    }
    /**
     * Selects all the text in the text area
     *
     * @public
     */
    select() {
        this.control.select();
        /**
         * The select event does not permeate the shadow DOM boundary.
         * This fn effectively proxies the select event,
         * emitting a `select` event whenever the internal
         * control emits a `select` event
         */
        this.$emit("select");
    }
    /**
     * Change event handler for inner control.
     * @remarks
     * "Change" events are not `composable` so they will not
     * permeate the shadow DOM boundary. This fn effectively proxies
     * the change event, emitting a `change` event whenever the internal
     * control emits a `change` event
     * @internal
     */
    handleChange() {
        this.$emit("change");
    }
    /** {@inheritDoc (FormAssociated:interface).validate} */
    validate() {
        super.validate(this.control);
    }
}
(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ mode: "boolean" })
], TextArea.prototype, "readOnly", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr
], TextArea.prototype, "resize", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ mode: "boolean" })
], TextArea.prototype, "autofocus", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ attribute: "form" })
], TextArea.prototype, "formId", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr
], TextArea.prototype, "list", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ converter: _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.nullableNumberConverter })
], TextArea.prototype, "maxlength", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ converter: _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.nullableNumberConverter })
], TextArea.prototype, "minlength", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr
], TextArea.prototype, "name", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr
], TextArea.prototype, "placeholder", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ converter: _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.nullableNumberConverter, mode: "fromView" })
], TextArea.prototype, "cols", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ converter: _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.nullableNumberConverter, mode: "fromView" })
], TextArea.prototype, "rows", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ mode: "boolean" })
], TextArea.prototype, "spellcheck", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.observable
], TextArea.prototype, "defaultSlottedNodes", void 0);
(0,_utilities_apply_mixins_js__WEBPACK_IMPORTED_MODULE_4__.applyMixins)(TextArea, _text_field_text_field_js__WEBPACK_IMPORTED_MODULE_5__.DelegatesARIATextbox);


/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/text-area/text-area.options.js":
/*!*****************************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/text-area/text-area.options.js ***!
  \*****************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   TextAreaResize: () => (/* binding */ TextAreaResize)
/* harmony export */ });
/**
 * Resize mode for a TextArea
 * @public
 */
const TextAreaResize = {
    /**
     * No resize.
     */
    none: "none",
    /**
     * Resize vertically and horizontally.
     */
    both: "both",
    /**
     * Resize horizontally.
     */
    horizontal: "horizontal",
    /**
     * Resize vertically.
     */
    vertical: "vertical",
};


/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/text-area/text-area.template.js":
/*!******************************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/text-area/text-area.template.js ***!
  \******************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   textAreaTemplate: () => (/* binding */ textAreaTemplate)
/* harmony export */ });
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @microsoft/fast-element */ "webpack/sharing/consume/default/@microsoft/fast-element/@microsoft/fast-element");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _text_area_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./text-area.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/text-area/text-area.options.js");


/**
 * The template for the {@link @microsoft/fast-foundation#(TextArea:class)} component.
 * @public
 */
const textAreaTemplate = (context, definition) => (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.html) `
    <template
        class="
            ${x => (x.readOnly ? "readonly" : "")}
            ${x => (x.resize !== _text_area_js__WEBPACK_IMPORTED_MODULE_1__.TextAreaResize.none ? `resize-${x.resize}` : "")}"
    >
        <label
            part="label"
            for="control"
            class="${x => x.defaultSlottedNodes && x.defaultSlottedNodes.length
    ? "label"
    : "label label__hidden"}"
        >
            <slot ${(0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.slotted)("defaultSlottedNodes")}></slot>
        </label>
        <textarea
            part="control"
            class="control"
            id="control"
            ?autofocus="${x => x.autofocus}"
            cols="${x => x.cols}"
            ?disabled="${x => x.disabled}"
            form="${x => x.form}"
            list="${x => x.list}"
            maxlength="${x => x.maxlength}"
            minlength="${x => x.minlength}"
            name="${x => x.name}"
            placeholder="${x => x.placeholder}"
            ?readonly="${x => x.readOnly}"
            ?required="${x => x.required}"
            rows="${x => x.rows}"
            ?spellcheck="${x => x.spellcheck}"
            :value="${x => x.value}"
            aria-atomic="${x => x.ariaAtomic}"
            aria-busy="${x => x.ariaBusy}"
            aria-controls="${x => x.ariaControls}"
            aria-current="${x => x.ariaCurrent}"
            aria-describedby="${x => x.ariaDescribedby}"
            aria-details="${x => x.ariaDetails}"
            aria-disabled="${x => x.ariaDisabled}"
            aria-errormessage="${x => x.ariaErrormessage}"
            aria-flowto="${x => x.ariaFlowto}"
            aria-haspopup="${x => x.ariaHaspopup}"
            aria-hidden="${x => x.ariaHidden}"
            aria-invalid="${x => x.ariaInvalid}"
            aria-keyshortcuts="${x => x.ariaKeyshortcuts}"
            aria-label="${x => x.ariaLabel}"
            aria-labelledby="${x => x.ariaLabelledby}"
            aria-live="${x => x.ariaLive}"
            aria-owns="${x => x.ariaOwns}"
            aria-relevant="${x => x.ariaRelevant}"
            aria-roledescription="${x => x.ariaRoledescription}"
            @input="${(x, c) => x.handleTextInput()}"
            @change="${x => x.handleChange()}"
            ${(0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.ref)("control")}
        ></textarea>
    </template>
`;


/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/text-field/index.js":
/*!******************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/text-field/index.js ***!
  \******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DelegatesARIATextbox: () => (/* reexport safe */ _text_field_js__WEBPACK_IMPORTED_MODULE_1__.DelegatesARIATextbox),
/* harmony export */   TextField: () => (/* reexport safe */ _text_field_js__WEBPACK_IMPORTED_MODULE_1__.TextField),
/* harmony export */   TextFieldType: () => (/* reexport safe */ _text_field_js__WEBPACK_IMPORTED_MODULE_1__.TextFieldType),
/* harmony export */   textFieldTemplate: () => (/* reexport safe */ _text_field_template_js__WEBPACK_IMPORTED_MODULE_0__.textFieldTemplate)
/* harmony export */ });
/* harmony import */ var _text_field_template_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./text-field.template.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/text-field/text-field.template.js");
/* harmony import */ var _text_field_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./text-field.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/text-field/text-field.js");




/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/text-field/text-field.form-associated.js":
/*!***************************************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/text-field/text-field.form-associated.js ***!
  \***************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   FormAssociatedTextField: () => (/* binding */ FormAssociatedTextField)
/* harmony export */ });
/* harmony import */ var _form_associated_form_associated_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../form-associated/form-associated.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/form-associated/form-associated.js");
/* harmony import */ var _foundation_element_foundation_element_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../foundation-element/foundation-element.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/foundation-element/foundation-element.js");


class _TextField extends _foundation_element_foundation_element_js__WEBPACK_IMPORTED_MODULE_0__.FoundationElement {
}
/**
 * A form-associated base class for the {@link @microsoft/fast-foundation#(TextField:class)} component.
 *
 * @internal
 */
class FormAssociatedTextField extends (0,_form_associated_form_associated_js__WEBPACK_IMPORTED_MODULE_1__.FormAssociated)(_TextField) {
    constructor() {
        super(...arguments);
        this.proxy = document.createElement("input");
    }
}


/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/text-field/text-field.js":
/*!***********************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/text-field/text-field.js ***!
  \***********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DelegatesARIATextbox: () => (/* binding */ DelegatesARIATextbox),
/* harmony export */   TextField: () => (/* binding */ TextField),
/* harmony export */   TextFieldType: () => (/* reexport safe */ _text_field_options_js__WEBPACK_IMPORTED_MODULE_1__.TextFieldType)
/* harmony export */ });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! tslib */ "./node_modules/@microsoft/fast-foundation/node_modules/tslib/tslib.es6.js");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @microsoft/fast-element */ "webpack/sharing/consume/default/@microsoft/fast-element/@microsoft/fast-element");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _patterns_index_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../patterns/index.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/patterns/aria-global.js");
/* harmony import */ var _patterns_index_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../patterns/index.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/patterns/start-end.js");
/* harmony import */ var _utilities_apply_mixins_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utilities/apply-mixins.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/utilities/apply-mixins.js");
/* harmony import */ var _text_field_form_associated_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./text-field.form-associated.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/text-field/text-field.form-associated.js");
/* harmony import */ var _text_field_options_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./text-field.options.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/text-field/text-field.options.js");







/**
 * A Text Field Custom HTML Element.
 * Based largely on the {@link https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input/text | <input type="text" /> element }.
 *
 * @slot start - Content which can be provided before the number field input
 * @slot end - Content which can be provided after the number field input
 * @slot - The default slot for the label
 * @csspart label - The label
 * @csspart root - The element wrapping the control, including start and end slots
 * @csspart control - The text field element
 * @fires change - Fires a custom 'change' event when the value has changed
 *
 * @public
 */
class TextField extends _text_field_form_associated_js__WEBPACK_IMPORTED_MODULE_2__.FormAssociatedTextField {
    constructor() {
        super(...arguments);
        /**
         * Allows setting a type or mode of text.
         * @public
         * @remarks
         * HTML Attribute: type
         */
        this.type = _text_field_options_js__WEBPACK_IMPORTED_MODULE_1__.TextFieldType.text;
    }
    readOnlyChanged() {
        if (this.proxy instanceof HTMLInputElement) {
            this.proxy.readOnly = this.readOnly;
            this.validate();
        }
    }
    autofocusChanged() {
        if (this.proxy instanceof HTMLInputElement) {
            this.proxy.autofocus = this.autofocus;
            this.validate();
        }
    }
    placeholderChanged() {
        if (this.proxy instanceof HTMLInputElement) {
            this.proxy.placeholder = this.placeholder;
        }
    }
    typeChanged() {
        if (this.proxy instanceof HTMLInputElement) {
            this.proxy.type = this.type;
            this.validate();
        }
    }
    listChanged() {
        if (this.proxy instanceof HTMLInputElement) {
            this.proxy.setAttribute("list", this.list);
            this.validate();
        }
    }
    maxlengthChanged() {
        if (this.proxy instanceof HTMLInputElement) {
            this.proxy.maxLength = this.maxlength;
            this.validate();
        }
    }
    minlengthChanged() {
        if (this.proxy instanceof HTMLInputElement) {
            this.proxy.minLength = this.minlength;
            this.validate();
        }
    }
    patternChanged() {
        if (this.proxy instanceof HTMLInputElement) {
            this.proxy.pattern = this.pattern;
            this.validate();
        }
    }
    sizeChanged() {
        if (this.proxy instanceof HTMLInputElement) {
            this.proxy.size = this.size;
        }
    }
    spellcheckChanged() {
        if (this.proxy instanceof HTMLInputElement) {
            this.proxy.spellcheck = this.spellcheck;
        }
    }
    /**
     * @internal
     */
    connectedCallback() {
        super.connectedCallback();
        this.proxy.setAttribute("type", this.type);
        this.validate();
        if (this.autofocus) {
            _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.DOM.queueUpdate(() => {
                this.focus();
            });
        }
    }
    /**
     * Selects all the text in the text field
     *
     * @public
     */
    select() {
        this.control.select();
        /**
         * The select event does not permeate the shadow DOM boundary.
         * This fn effectively proxies the select event,
         * emitting a `select` event whenever the internal
         * control emits a `select` event
         */
        this.$emit("select");
    }
    /**
     * Handles the internal control's `input` event
     * @internal
     */
    handleTextInput() {
        this.value = this.control.value;
    }
    /**
     * Change event handler for inner control.
     * @remarks
     * "Change" events are not `composable` so they will not
     * permeate the shadow DOM boundary. This fn effectively proxies
     * the change event, emitting a `change` event whenever the internal
     * control emits a `change` event
     * @internal
     */
    handleChange() {
        this.$emit("change");
    }
    /** {@inheritDoc (FormAssociated:interface).validate} */
    validate() {
        super.validate(this.control);
    }
}
(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ attribute: "readonly", mode: "boolean" })
], TextField.prototype, "readOnly", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ mode: "boolean" })
], TextField.prototype, "autofocus", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr
], TextField.prototype, "placeholder", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr
], TextField.prototype, "type", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr
], TextField.prototype, "list", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ converter: _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.nullableNumberConverter })
], TextField.prototype, "maxlength", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ converter: _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.nullableNumberConverter })
], TextField.prototype, "minlength", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr
], TextField.prototype, "pattern", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ converter: _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.nullableNumberConverter })
], TextField.prototype, "size", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ mode: "boolean" })
], TextField.prototype, "spellcheck", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.observable
], TextField.prototype, "defaultSlottedNodes", void 0);
/**
 * Includes ARIA states and properties relating to the ARIA textbox role
 *
 * @public
 */
class DelegatesARIATextbox {
}
(0,_utilities_apply_mixins_js__WEBPACK_IMPORTED_MODULE_4__.applyMixins)(DelegatesARIATextbox, _patterns_index_js__WEBPACK_IMPORTED_MODULE_5__.ARIAGlobalStatesAndProperties);
(0,_utilities_apply_mixins_js__WEBPACK_IMPORTED_MODULE_4__.applyMixins)(TextField, _patterns_index_js__WEBPACK_IMPORTED_MODULE_6__.StartEnd, DelegatesARIATextbox);


/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/text-field/text-field.options.js":
/*!*******************************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/text-field/text-field.options.js ***!
  \*******************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   TextFieldType: () => (/* binding */ TextFieldType)
/* harmony export */ });
/**
 * Text field sub-types
 * @public
 */
const TextFieldType = {
    /**
     * An email TextField
     */
    email: "email",
    /**
     * A password TextField
     */
    password: "password",
    /**
     * A telephone TextField
     */
    tel: "tel",
    /**
     * A text TextField
     */
    text: "text",
    /**
     * A URL TextField
     */
    url: "url",
};


/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/text-field/text-field.template.js":
/*!********************************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/text-field/text-field.template.js ***!
  \********************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   textFieldTemplate: () => (/* binding */ textFieldTemplate)
/* harmony export */ });
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @microsoft/fast-element */ "webpack/sharing/consume/default/@microsoft/fast-element/@microsoft/fast-element");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _patterns_start_end_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../patterns/start-end.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/patterns/start-end.js");
/* harmony import */ var _utilities_whitespace_filter_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utilities/whitespace-filter.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/utilities/whitespace-filter.js");



/**
 * The template for the {@link @microsoft/fast-foundation#(TextField:class)} component.
 * @public
 */
const textFieldTemplate = (context, definition) => (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.html) `
    <template
        class="
            ${x => (x.readOnly ? "readonly" : "")}
        "
    >
        <label
            part="label"
            for="control"
            class="${x => x.defaultSlottedNodes && x.defaultSlottedNodes.length
    ? "label"
    : "label label__hidden"}"
        >
            <slot
                ${(0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.slotted)({ property: "defaultSlottedNodes", filter: _utilities_whitespace_filter_js__WEBPACK_IMPORTED_MODULE_1__.whitespaceFilter })}
            ></slot>
        </label>
        <div class="root" part="root">
            ${(0,_patterns_start_end_js__WEBPACK_IMPORTED_MODULE_2__.startSlotTemplate)(context, definition)}
            <input
                class="control"
                part="control"
                id="control"
                @input="${x => x.handleTextInput()}"
                @change="${x => x.handleChange()}"
                ?autofocus="${x => x.autofocus}"
                ?disabled="${x => x.disabled}"
                list="${x => x.list}"
                maxlength="${x => x.maxlength}"
                minlength="${x => x.minlength}"
                pattern="${x => x.pattern}"
                placeholder="${x => x.placeholder}"
                ?readonly="${x => x.readOnly}"
                ?required="${x => x.required}"
                size="${x => x.size}"
                ?spellcheck="${x => x.spellcheck}"
                :value="${x => x.value}"
                type="${x => x.type}"
                aria-atomic="${x => x.ariaAtomic}"
                aria-busy="${x => x.ariaBusy}"
                aria-controls="${x => x.ariaControls}"
                aria-current="${x => x.ariaCurrent}"
                aria-describedby="${x => x.ariaDescribedby}"
                aria-details="${x => x.ariaDetails}"
                aria-disabled="${x => x.ariaDisabled}"
                aria-errormessage="${x => x.ariaErrormessage}"
                aria-flowto="${x => x.ariaFlowto}"
                aria-haspopup="${x => x.ariaHaspopup}"
                aria-hidden="${x => x.ariaHidden}"
                aria-invalid="${x => x.ariaInvalid}"
                aria-keyshortcuts="${x => x.ariaKeyshortcuts}"
                aria-label="${x => x.ariaLabel}"
                aria-labelledby="${x => x.ariaLabelledby}"
                aria-live="${x => x.ariaLive}"
                aria-owns="${x => x.ariaOwns}"
                aria-relevant="${x => x.ariaRelevant}"
                aria-roledescription="${x => x.ariaRoledescription}"
                ${(0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.ref)("control")}
            />
            ${(0,_patterns_start_end_js__WEBPACK_IMPORTED_MODULE_2__.endSlotTemplate)(context, definition)}
        </div>
    </template>
`;


/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/toolbar/index.js":
/*!***************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/toolbar/index.js ***!
  \***************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DelegatesARIAToolbar: () => (/* reexport safe */ _toolbar_js__WEBPACK_IMPORTED_MODULE_1__.DelegatesARIAToolbar),
/* harmony export */   Toolbar: () => (/* reexport safe */ _toolbar_js__WEBPACK_IMPORTED_MODULE_1__.Toolbar),
/* harmony export */   toolbarTemplate: () => (/* reexport safe */ _toolbar_template_js__WEBPACK_IMPORTED_MODULE_0__.toolbarTemplate)
/* harmony export */ });
/* harmony import */ var _toolbar_template_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./toolbar.template.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/toolbar/toolbar.template.js");
/* harmony import */ var _toolbar_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./toolbar.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/toolbar/toolbar.js");




/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/toolbar/toolbar.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/toolbar/toolbar.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DelegatesARIAToolbar: () => (/* binding */ DelegatesARIAToolbar),
/* harmony export */   Toolbar: () => (/* binding */ Toolbar)
/* harmony export */ });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! tslib */ "./node_modules/@microsoft/fast-foundation/node_modules/tslib/tslib.es6.js");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @microsoft/fast-element */ "webpack/sharing/consume/default/@microsoft/fast-element/@microsoft/fast-element");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @microsoft/fast-web-utilities */ "./node_modules/@microsoft/fast-web-utilities/dist/key-codes.js");
/* harmony import */ var _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @microsoft/fast-web-utilities */ "./node_modules/@microsoft/fast-web-utilities/dist/aria.js");
/* harmony import */ var _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @microsoft/fast-web-utilities */ "./node_modules/@microsoft/fast-web-utilities/dist/localization.js");
/* harmony import */ var _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @microsoft/fast-web-utilities */ "./node_modules/@microsoft/fast-web-utilities/dist/numbers.js");
/* harmony import */ var tabbable__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! tabbable */ "./node_modules/tabbable/dist/index.esm.js");
/* harmony import */ var _foundation_element_foundation_element_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../foundation-element/foundation-element.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/foundation-element/foundation-element.js");
/* harmony import */ var _patterns_aria_global_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../patterns/aria-global.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/patterns/aria-global.js");
/* harmony import */ var _patterns_start_end_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../patterns/start-end.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/patterns/start-end.js");
/* harmony import */ var _utilities_apply_mixins_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../utilities/apply-mixins.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/utilities/apply-mixins.js");
/* harmony import */ var _utilities_direction_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../utilities/direction.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/utilities/direction.js");









/**
 * A map for directionality derived from keyboard input strings,
 * visual orientation, and text direction.
 *
 * @internal
 */
const ToolbarArrowKeyMap = Object.freeze({
    [_microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_1__.ArrowKeys.ArrowUp]: {
        [_microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_2__.Orientation.vertical]: -1,
    },
    [_microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_1__.ArrowKeys.ArrowDown]: {
        [_microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_2__.Orientation.vertical]: 1,
    },
    [_microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_1__.ArrowKeys.ArrowLeft]: {
        [_microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_2__.Orientation.horizontal]: {
            [_microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_3__.Direction.ltr]: -1,
            [_microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_3__.Direction.rtl]: 1,
        },
    },
    [_microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_1__.ArrowKeys.ArrowRight]: {
        [_microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_2__.Orientation.horizontal]: {
            [_microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_3__.Direction.ltr]: 1,
            [_microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_3__.Direction.rtl]: -1,
        },
    },
});
/**
 * A Toolbar Custom HTML Element.
 * Implements the {@link https://w3c.github.io/aria-practices/#Toolbar|ARIA Toolbar}.
 *
 * @slot start - Content which can be provided before the slotted items
 * @slot end - Content which can be provided after the slotted items
 * @slot - The default slot for slotted items
 * @slot label - The toolbar label
 * @csspart positioning-region - The element containing the items, start and end slots
 *
 * @public
 */
class Toolbar extends _foundation_element_foundation_element_js__WEBPACK_IMPORTED_MODULE_4__.FoundationElement {
    constructor() {
        super(...arguments);
        /**
         * The internal index of the currently focused element.
         *
         * @internal
         */
        this._activeIndex = 0;
        /**
         * The text direction of the toolbar.
         *
         * @internal
         */
        this.direction = _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_3__.Direction.ltr;
        /**
         * The orientation of the toolbar.
         *
         * @public
         * @remarks
         * HTML Attribute: `orientation`
         */
        this.orientation = _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_2__.Orientation.horizontal;
    }
    /**
     * The index of the currently focused element, clamped between 0 and the last element.
     *
     * @internal
     */
    get activeIndex() {
        _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.Observable.track(this, "activeIndex");
        return this._activeIndex;
    }
    set activeIndex(value) {
        if (this.$fastController.isConnected) {
            this._activeIndex = (0,_microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_5__.limit)(0, this.focusableElements.length - 1, value);
            _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.Observable.notify(this, "activeIndex");
        }
    }
    slottedItemsChanged() {
        if (this.$fastController.isConnected) {
            this.reduceFocusableElements();
        }
    }
    /**
     * Set the activeIndex when a focusable element in the toolbar is clicked.
     *
     * @internal
     */
    mouseDownHandler(e) {
        var _a;
        const activeIndex = (_a = this.focusableElements) === null || _a === void 0 ? void 0 : _a.findIndex(x => x.contains(e.target));
        if (activeIndex > -1 && this.activeIndex !== activeIndex) {
            this.setFocusedElement(activeIndex);
        }
        return true;
    }
    childItemsChanged(prev, next) {
        if (this.$fastController.isConnected) {
            this.reduceFocusableElements();
        }
    }
    /**
     * @internal
     */
    connectedCallback() {
        super.connectedCallback();
        this.direction = (0,_utilities_direction_js__WEBPACK_IMPORTED_MODULE_6__.getDirection)(this);
    }
    /**
     * When the toolbar receives focus, set the currently active element as focused.
     *
     * @internal
     */
    focusinHandler(e) {
        const relatedTarget = e.relatedTarget;
        if (!relatedTarget || this.contains(relatedTarget)) {
            return;
        }
        this.setFocusedElement();
    }
    /**
     * Determines a value that can be used to iterate a list with the arrow keys.
     *
     * @param this - An element with an orientation and direction
     * @param key - The event key value
     * @internal
     */
    getDirectionalIncrementer(key) {
        var _a, _b, _c, _d, _e;
        return ((_e = (_c = (_b = (_a = ToolbarArrowKeyMap[key]) === null || _a === void 0 ? void 0 : _a[this.orientation]) === null || _b === void 0 ? void 0 : _b[this.direction]) !== null && _c !== void 0 ? _c : (_d = ToolbarArrowKeyMap[key]) === null || _d === void 0 ? void 0 : _d[this.orientation]) !== null && _e !== void 0 ? _e : 0);
    }
    /**
     * Handle keyboard events for the toolbar.
     *
     * @internal
     */
    keydownHandler(e) {
        const key = e.key;
        if (!(key in _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_1__.ArrowKeys) || e.defaultPrevented || e.shiftKey) {
            return true;
        }
        const incrementer = this.getDirectionalIncrementer(key);
        if (!incrementer) {
            return !e.target.closest("[role=radiogroup]");
        }
        const nextIndex = this.activeIndex + incrementer;
        if (this.focusableElements[nextIndex]) {
            e.preventDefault();
        }
        this.setFocusedElement(nextIndex);
        return true;
    }
    /**
     * get all the slotted elements
     * @internal
     */
    get allSlottedItems() {
        return [
            ...this.start.assignedElements(),
            ...this.slottedItems,
            ...this.end.assignedElements(),
        ];
    }
    /**
     * Prepare the slotted elements which can be focusable.
     *
     * @internal
     */
    reduceFocusableElements() {
        var _a;
        const previousFocusedElement = (_a = this.focusableElements) === null || _a === void 0 ? void 0 : _a[this.activeIndex];
        this.focusableElements = this.allSlottedItems.reduce(Toolbar.reduceFocusableItems, []);
        // If the previously active item is still focusable, adjust the active index to the
        // index of that item.
        const adjustedActiveIndex = this.focusableElements.indexOf(previousFocusedElement);
        this.activeIndex = Math.max(0, adjustedActiveIndex);
        this.setFocusableElements();
    }
    /**
     * Set the activeIndex and focus the corresponding control.
     *
     * @param activeIndex - The new index to set
     * @internal
     */
    setFocusedElement(activeIndex = this.activeIndex) {
        var _a;
        this.activeIndex = activeIndex;
        this.setFocusableElements();
        (_a = this.focusableElements[this.activeIndex]) === null || _a === void 0 ? void 0 : _a.focus();
    }
    /**
     * Reduce a collection to only its focusable elements.
     *
     * @param elements - Collection of elements to reduce
     * @param element - The current element
     *
     * @internal
     */
    static reduceFocusableItems(elements, element) {
        var _a, _b, _c, _d;
        const isRoleRadio = element.getAttribute("role") === "radio";
        const isFocusableFastElement = (_b = (_a = element.$fastController) === null || _a === void 0 ? void 0 : _a.definition.shadowOptions) === null || _b === void 0 ? void 0 : _b.delegatesFocus;
        const hasFocusableShadow = Array.from((_d = (_c = element.shadowRoot) === null || _c === void 0 ? void 0 : _c.querySelectorAll("*")) !== null && _d !== void 0 ? _d : []).some(x => (0,tabbable__WEBPACK_IMPORTED_MODULE_7__.isFocusable)(x));
        if (!element.hasAttribute("disabled") &&
            !element.hasAttribute("hidden") &&
            ((0,tabbable__WEBPACK_IMPORTED_MODULE_7__.isFocusable)(element) ||
                isRoleRadio ||
                isFocusableFastElement ||
                hasFocusableShadow)) {
            elements.push(element);
            return elements;
        }
        if (element.childElementCount) {
            return elements.concat(Array.from(element.children).reduce(Toolbar.reduceFocusableItems, []));
        }
        return elements;
    }
    /**
     * @internal
     */
    setFocusableElements() {
        if (this.$fastController.isConnected && this.focusableElements.length > 0) {
            this.focusableElements.forEach((element, index) => {
                element.tabIndex = this.activeIndex === index ? 0 : -1;
            });
        }
    }
}
(0,tslib__WEBPACK_IMPORTED_MODULE_8__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.observable
], Toolbar.prototype, "direction", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_8__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr
], Toolbar.prototype, "orientation", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_8__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.observable
], Toolbar.prototype, "slottedItems", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_8__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.observable
], Toolbar.prototype, "slottedLabel", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_8__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.observable
], Toolbar.prototype, "childItems", void 0);
/**
 * Includes ARIA states and properties relating to the ARIA toolbar role
 *
 * @public
 */
class DelegatesARIAToolbar {
}
(0,tslib__WEBPACK_IMPORTED_MODULE_8__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ attribute: "aria-labelledby" })
], DelegatesARIAToolbar.prototype, "ariaLabelledby", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_8__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ attribute: "aria-label" })
], DelegatesARIAToolbar.prototype, "ariaLabel", void 0);
(0,_utilities_apply_mixins_js__WEBPACK_IMPORTED_MODULE_9__.applyMixins)(DelegatesARIAToolbar, _patterns_aria_global_js__WEBPACK_IMPORTED_MODULE_10__.ARIAGlobalStatesAndProperties);
(0,_utilities_apply_mixins_js__WEBPACK_IMPORTED_MODULE_9__.applyMixins)(Toolbar, _patterns_start_end_js__WEBPACK_IMPORTED_MODULE_11__.StartEnd, DelegatesARIAToolbar);


/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/toolbar/toolbar.template.js":
/*!**************************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/toolbar/toolbar.template.js ***!
  \**************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   toolbarTemplate: () => (/* binding */ toolbarTemplate)
/* harmony export */ });
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @microsoft/fast-element */ "webpack/sharing/consume/default/@microsoft/fast-element/@microsoft/fast-element");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _patterns_start_end_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../patterns/start-end.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/patterns/start-end.js");


/**
 * The template for the {@link @microsoft/fast-foundation#(Toolbar:class)} component.
 *
 * @public
 */
const toolbarTemplate = (context, definition) => (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.html) `
    <template
        aria-label="${x => x.ariaLabel}"
        aria-labelledby="${x => x.ariaLabelledby}"
        aria-orientation="${x => x.orientation}"
        orientation="${x => x.orientation}"
        role="toolbar"
        @mousedown="${(x, c) => x.mouseDownHandler(c.event)}"
        @focusin="${(x, c) => x.focusinHandler(c.event)}"
        @keydown="${(x, c) => x.keydownHandler(c.event)}"
        ${(0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.children)({
    property: "childItems",
    attributeFilter: ["disabled", "hidden"],
    filter: (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.elements)(),
    subtree: true,
})}
    >
        <slot name="label"></slot>
        <div class="positioning-region" part="positioning-region">
            ${(0,_patterns_start_end_js__WEBPACK_IMPORTED_MODULE_1__.startSlotTemplate)(context, definition)}
            <slot
                ${(0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.slotted)({
    filter: (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.elements)(),
    property: "slottedItems",
})}
            ></slot>
            ${(0,_patterns_start_end_js__WEBPACK_IMPORTED_MODULE_1__.endSlotTemplate)(context, definition)}
        </div>
    </template>
`;


/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/tooltip/index.js":
/*!***************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/tooltip/index.js ***!
  \***************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Tooltip: () => (/* reexport safe */ _tooltip_js__WEBPACK_IMPORTED_MODULE_1__.Tooltip),
/* harmony export */   TooltipPosition: () => (/* reexport safe */ _tooltip_js__WEBPACK_IMPORTED_MODULE_1__.TooltipPosition),
/* harmony export */   tooltipTemplate: () => (/* reexport safe */ _tooltip_template_js__WEBPACK_IMPORTED_MODULE_0__.tooltipTemplate)
/* harmony export */ });
/* harmony import */ var _tooltip_template_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./tooltip.template.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/tooltip/tooltip.template.js");
/* harmony import */ var _tooltip_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./tooltip.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/tooltip/tooltip.js");




/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/tooltip/tooltip.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/tooltip/tooltip.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Tooltip: () => (/* binding */ Tooltip),
/* harmony export */   TooltipPosition: () => (/* reexport safe */ _tooltip_options_js__WEBPACK_IMPORTED_MODULE_1__.TooltipPosition)
/* harmony export */ });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! tslib */ "./node_modules/@microsoft/fast-foundation/node_modules/tslib/tslib.es6.js");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @microsoft/fast-element */ "webpack/sharing/consume/default/@microsoft/fast-element/@microsoft/fast-element");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @microsoft/fast-web-utilities */ "./node_modules/@microsoft/fast-web-utilities/dist/localization.js");
/* harmony import */ var _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @microsoft/fast-web-utilities */ "./node_modules/@microsoft/fast-web-utilities/dist/key-codes.js");
/* harmony import */ var _utilities_direction_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../utilities/direction.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/utilities/direction.js");
/* harmony import */ var _foundation_element_foundation_element_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../foundation-element/foundation-element.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/foundation-element/foundation-element.js");
/* harmony import */ var _tooltip_options_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./tooltip.options.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/tooltip/tooltip.options.js");







/**
 * An Tooltip Custom HTML Element.
 *
 * @slot - The default slot for the tooltip content
 * @csspart tooltip - The tooltip element
 * @fires dismiss - Fires a custom 'dismiss' event when the tooltip is visible and escape key is pressed
 *
 * @public
 */
class Tooltip extends _foundation_element_foundation_element_js__WEBPACK_IMPORTED_MODULE_2__.FoundationElement {
    constructor() {
        super(...arguments);
        /**
         * The id of the element the tooltip is anchored to
         *
         * @defaultValue - undefined
         * @public
         * HTML Attribute: anchor
         */
        this.anchor = "";
        /**
         * The delay in milliseconds before a tooltip is shown after a hover event
         *
         * @defaultValue - 300
         * @public
         * HTML Attribute: delay
         */
        this.delay = 300;
        /**
         * Controls when the tooltip updates its position, default is 'anchor' which only updates when
         * the anchor is resized.  'auto' will update on scroll/resize events.
         * Corresponds to anchored-region auto-update-mode.
         * @public
         * @remarks
         * HTML Attribute: auto-update-mode
         */
        this.autoUpdateMode = "anchor";
        /**
         * the html element currently being used as anchor.
         * Setting this directly overrides the anchor attribute.
         *
         * @public
         */
        this.anchorElement = null;
        /**
         * The current viewport element instance
         *
         * @internal
         */
        this.viewportElement = null;
        /**
         * @internal
         * @defaultValue "dynamic"
         */
        this.verticalPositioningMode = "dynamic";
        /**
         * @internal
         * @defaultValue "dynamic"
         */
        this.horizontalPositioningMode = "dynamic";
        /**
         * @internal
         */
        this.horizontalInset = "false";
        /**
         * @internal
         */
        this.verticalInset = "false";
        /**
         * @internal
         */
        this.horizontalScaling = "content";
        /**
         * @internal
         */
        this.verticalScaling = "content";
        /**
         * @internal
         */
        this.verticalDefaultPosition = undefined;
        /**
         * @internal
         */
        this.horizontalDefaultPosition = undefined;
        /**
         * @internal
         */
        this.tooltipVisible = false;
        /**
         * Track current direction to pass to the anchored region
         * updated when tooltip is shown
         *
         * @internal
         */
        this.currentDirection = _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_3__.Direction.ltr;
        /**
         * The timer that tracks delay time before the tooltip is shown on hover
         */
        this.showDelayTimer = null;
        /**
         * The timer that tracks delay time before the tooltip is hidden
         */
        this.hideDelayTimer = null;
        /**
         * Indicates whether the anchor is currently being hovered or has focus
         */
        this.isAnchorHoveredFocused = false;
        /**
         * Indicates whether the region is currently being hovered
         */
        this.isRegionHovered = false;
        /**
         * invoked when the anchored region's position relative to the anchor changes
         *
         * @internal
         */
        this.handlePositionChange = (ev) => {
            this.classList.toggle("top", this.region.verticalPosition === "start");
            this.classList.toggle("bottom", this.region.verticalPosition === "end");
            this.classList.toggle("inset-top", this.region.verticalPosition === "insetStart");
            this.classList.toggle("inset-bottom", this.region.verticalPosition === "insetEnd");
            this.classList.toggle("center-vertical", this.region.verticalPosition === "center");
            this.classList.toggle("left", this.region.horizontalPosition === "start");
            this.classList.toggle("right", this.region.horizontalPosition === "end");
            this.classList.toggle("inset-left", this.region.horizontalPosition === "insetStart");
            this.classList.toggle("inset-right", this.region.horizontalPosition === "insetEnd");
            this.classList.toggle("center-horizontal", this.region.horizontalPosition === "center");
        };
        /**
         * mouse enters region
         */
        this.handleRegionMouseOver = (ev) => {
            this.isRegionHovered = true;
        };
        /**
         * mouse leaves region
         */
        this.handleRegionMouseOut = (ev) => {
            this.isRegionHovered = false;
            this.startHideDelayTimer();
        };
        /**
         * mouse enters anchor
         */
        this.handleAnchorMouseOver = (ev) => {
            if (this.tooltipVisible) {
                // tooltip is already visible, just set the anchor hover flag
                this.isAnchorHoveredFocused = true;
                return;
            }
            this.startShowDelayTimer();
        };
        /**
         * mouse leaves anchor
         */
        this.handleAnchorMouseOut = (ev) => {
            this.isAnchorHoveredFocused = false;
            this.clearShowDelayTimer();
            this.startHideDelayTimer();
        };
        /**
         * anchor gets focus
         */
        this.handleAnchorFocusIn = (ev) => {
            this.startShowDelayTimer();
        };
        /**
         * anchor loses focus
         */
        this.handleAnchorFocusOut = (ev) => {
            this.isAnchorHoveredFocused = false;
            this.clearShowDelayTimer();
            this.startHideDelayTimer();
        };
        /**
         * starts the hide timer
         */
        this.startHideDelayTimer = () => {
            this.clearHideDelayTimer();
            if (!this.tooltipVisible) {
                return;
            }
            // allow 60 ms for account for pointer to move between anchor/tooltip
            // without hiding tooltip
            this.hideDelayTimer = window.setTimeout(() => {
                this.updateTooltipVisibility();
            }, 60);
        };
        /**
         * clears the hide delay
         */
        this.clearHideDelayTimer = () => {
            if (this.hideDelayTimer !== null) {
                clearTimeout(this.hideDelayTimer);
                this.hideDelayTimer = null;
            }
        };
        /**
         * starts the show timer if not currently running
         */
        this.startShowDelayTimer = () => {
            if (this.isAnchorHoveredFocused) {
                return;
            }
            if (this.delay > 1) {
                if (this.showDelayTimer === null)
                    this.showDelayTimer = window.setTimeout(() => {
                        this.startHover();
                    }, this.delay);
                return;
            }
            this.startHover();
        };
        /**
         * start hover
         */
        this.startHover = () => {
            this.isAnchorHoveredFocused = true;
            this.updateTooltipVisibility();
        };
        /**
         * clears the show delay
         */
        this.clearShowDelayTimer = () => {
            if (this.showDelayTimer !== null) {
                clearTimeout(this.showDelayTimer);
                this.showDelayTimer = null;
            }
        };
        /**
         *  Gets the anchor element by id
         */
        this.getAnchor = () => {
            const rootNode = this.getRootNode();
            if (rootNode instanceof ShadowRoot) {
                return rootNode.getElementById(this.anchor);
            }
            return document.getElementById(this.anchor);
        };
        /**
         * handles key down events to check for dismiss
         */
        this.handleDocumentKeydown = (e) => {
            if (!e.defaultPrevented && this.tooltipVisible) {
                switch (e.key) {
                    case _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_4__.keyEscape:
                        this.isAnchorHoveredFocused = false;
                        this.updateTooltipVisibility();
                        this.$emit("dismiss");
                        break;
                }
            }
        };
        /**
         * determines whether to show or hide the tooltip based on current state
         */
        this.updateTooltipVisibility = () => {
            if (this.visible === false) {
                this.hideTooltip();
            }
            else if (this.visible === true) {
                this.showTooltip();
                return;
            }
            else {
                if (this.isAnchorHoveredFocused || this.isRegionHovered) {
                    this.showTooltip();
                    return;
                }
                this.hideTooltip();
            }
        };
        /**
         * shows the tooltip
         */
        this.showTooltip = () => {
            if (this.tooltipVisible) {
                return;
            }
            this.currentDirection = (0,_utilities_direction_js__WEBPACK_IMPORTED_MODULE_5__.getDirection)(this);
            this.tooltipVisible = true;
            document.addEventListener("keydown", this.handleDocumentKeydown);
            _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.DOM.queueUpdate(this.setRegionProps);
        };
        /**
         * hides the tooltip
         */
        this.hideTooltip = () => {
            if (!this.tooltipVisible) {
                return;
            }
            this.clearHideDelayTimer();
            if (this.region !== null && this.region !== undefined) {
                this.region.removeEventListener("positionchange", this.handlePositionChange);
                this.region.viewportElement = null;
                this.region.anchorElement = null;
                this.region.removeEventListener("mouseover", this.handleRegionMouseOver);
                this.region.removeEventListener("mouseout", this.handleRegionMouseOut);
            }
            document.removeEventListener("keydown", this.handleDocumentKeydown);
            this.tooltipVisible = false;
        };
        /**
         * updates the tooltip anchored region props after it has been
         * added to the DOM
         */
        this.setRegionProps = () => {
            if (!this.tooltipVisible) {
                return;
            }
            this.region.viewportElement = this.viewportElement;
            this.region.anchorElement = this.anchorElement;
            this.region.addEventListener("positionchange", this.handlePositionChange);
            this.region.addEventListener("mouseover", this.handleRegionMouseOver, {
                passive: true,
            });
            this.region.addEventListener("mouseout", this.handleRegionMouseOut, {
                passive: true,
            });
        };
    }
    visibleChanged() {
        if (this.$fastController.isConnected) {
            this.updateTooltipVisibility();
            this.updateLayout();
        }
    }
    anchorChanged() {
        if (this.$fastController.isConnected) {
            this.anchorElement = this.getAnchor();
        }
    }
    positionChanged() {
        if (this.$fastController.isConnected) {
            this.updateLayout();
        }
    }
    anchorElementChanged(oldValue) {
        if (this.$fastController.isConnected) {
            if (oldValue !== null && oldValue !== undefined) {
                oldValue.removeEventListener("mouseover", this.handleAnchorMouseOver);
                oldValue.removeEventListener("mouseout", this.handleAnchorMouseOut);
                oldValue.removeEventListener("focusin", this.handleAnchorFocusIn);
                oldValue.removeEventListener("focusout", this.handleAnchorFocusOut);
            }
            if (this.anchorElement !== null && this.anchorElement !== undefined) {
                this.anchorElement.addEventListener("mouseover", this.handleAnchorMouseOver, { passive: true });
                this.anchorElement.addEventListener("mouseout", this.handleAnchorMouseOut, { passive: true });
                this.anchorElement.addEventListener("focusin", this.handleAnchorFocusIn, {
                    passive: true,
                });
                this.anchorElement.addEventListener("focusout", this.handleAnchorFocusOut, { passive: true });
                const anchorId = this.anchorElement.id;
                if (this.anchorElement.parentElement !== null) {
                    this.anchorElement.parentElement
                        .querySelectorAll(":hover")
                        .forEach(element => {
                        if (element.id === anchorId) {
                            this.startShowDelayTimer();
                        }
                    });
                }
            }
            if (this.region !== null &&
                this.region !== undefined &&
                this.tooltipVisible) {
                this.region.anchorElement = this.anchorElement;
            }
            this.updateLayout();
        }
    }
    viewportElementChanged() {
        if (this.region !== null && this.region !== undefined) {
            this.region.viewportElement = this.viewportElement;
        }
        this.updateLayout();
    }
    connectedCallback() {
        super.connectedCallback();
        this.anchorElement = this.getAnchor();
        this.updateTooltipVisibility();
    }
    disconnectedCallback() {
        this.hideTooltip();
        this.clearShowDelayTimer();
        this.clearHideDelayTimer();
        super.disconnectedCallback();
    }
    /**
     * updated the properties being passed to the anchored region
     */
    updateLayout() {
        this.verticalPositioningMode = "locktodefault";
        this.horizontalPositioningMode = "locktodefault";
        switch (this.position) {
            case _tooltip_options_js__WEBPACK_IMPORTED_MODULE_1__.TooltipPosition.top:
            case _tooltip_options_js__WEBPACK_IMPORTED_MODULE_1__.TooltipPosition.bottom:
                this.verticalDefaultPosition = this.position;
                this.horizontalDefaultPosition = "center";
                break;
            case _tooltip_options_js__WEBPACK_IMPORTED_MODULE_1__.TooltipPosition.right:
            case _tooltip_options_js__WEBPACK_IMPORTED_MODULE_1__.TooltipPosition.left:
            case _tooltip_options_js__WEBPACK_IMPORTED_MODULE_1__.TooltipPosition.start:
            case _tooltip_options_js__WEBPACK_IMPORTED_MODULE_1__.TooltipPosition.end:
                this.verticalDefaultPosition = "center";
                this.horizontalDefaultPosition = this.position;
                break;
            case _tooltip_options_js__WEBPACK_IMPORTED_MODULE_1__.TooltipPosition.topLeft:
                this.verticalDefaultPosition = "top";
                this.horizontalDefaultPosition = "left";
                break;
            case _tooltip_options_js__WEBPACK_IMPORTED_MODULE_1__.TooltipPosition.topRight:
                this.verticalDefaultPosition = "top";
                this.horizontalDefaultPosition = "right";
                break;
            case _tooltip_options_js__WEBPACK_IMPORTED_MODULE_1__.TooltipPosition.bottomLeft:
                this.verticalDefaultPosition = "bottom";
                this.horizontalDefaultPosition = "left";
                break;
            case _tooltip_options_js__WEBPACK_IMPORTED_MODULE_1__.TooltipPosition.bottomRight:
                this.verticalDefaultPosition = "bottom";
                this.horizontalDefaultPosition = "right";
                break;
            case _tooltip_options_js__WEBPACK_IMPORTED_MODULE_1__.TooltipPosition.topStart:
                this.verticalDefaultPosition = "top";
                this.horizontalDefaultPosition = "start";
                break;
            case _tooltip_options_js__WEBPACK_IMPORTED_MODULE_1__.TooltipPosition.topEnd:
                this.verticalDefaultPosition = "top";
                this.horizontalDefaultPosition = "end";
                break;
            case _tooltip_options_js__WEBPACK_IMPORTED_MODULE_1__.TooltipPosition.bottomStart:
                this.verticalDefaultPosition = "bottom";
                this.horizontalDefaultPosition = "start";
                break;
            case _tooltip_options_js__WEBPACK_IMPORTED_MODULE_1__.TooltipPosition.bottomEnd:
                this.verticalDefaultPosition = "bottom";
                this.horizontalDefaultPosition = "end";
                break;
            default:
                this.verticalPositioningMode = "dynamic";
                this.horizontalPositioningMode = "dynamic";
                this.verticalDefaultPosition = void 0;
                this.horizontalDefaultPosition = "center";
                break;
        }
    }
}
(0,tslib__WEBPACK_IMPORTED_MODULE_6__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ mode: "boolean" })
], Tooltip.prototype, "visible", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_6__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr
], Tooltip.prototype, "anchor", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_6__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr
], Tooltip.prototype, "delay", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_6__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr
], Tooltip.prototype, "position", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_6__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ attribute: "auto-update-mode" })
], Tooltip.prototype, "autoUpdateMode", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_6__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ attribute: "horizontal-viewport-lock" })
], Tooltip.prototype, "horizontalViewportLock", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_6__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ attribute: "vertical-viewport-lock" })
], Tooltip.prototype, "verticalViewportLock", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_6__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.observable
], Tooltip.prototype, "anchorElement", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_6__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.observable
], Tooltip.prototype, "viewportElement", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_6__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.observable
], Tooltip.prototype, "verticalPositioningMode", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_6__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.observable
], Tooltip.prototype, "horizontalPositioningMode", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_6__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.observable
], Tooltip.prototype, "horizontalInset", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_6__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.observable
], Tooltip.prototype, "verticalInset", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_6__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.observable
], Tooltip.prototype, "horizontalScaling", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_6__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.observable
], Tooltip.prototype, "verticalScaling", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_6__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.observable
], Tooltip.prototype, "verticalDefaultPosition", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_6__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.observable
], Tooltip.prototype, "horizontalDefaultPosition", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_6__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.observable
], Tooltip.prototype, "tooltipVisible", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_6__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.observable
], Tooltip.prototype, "currentDirection", void 0);


/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/tooltip/tooltip.options.js":
/*!*************************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/tooltip/tooltip.options.js ***!
  \*************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   TooltipPosition: () => (/* binding */ TooltipPosition)
/* harmony export */ });
/**
 * Enumerates possible tooltip positions
 *
 * @public
 */
const TooltipPosition = {
    /**
     * The tooltip is positioned above the element
     */
    top: "top",
    /**
     * The tooltip is positioned to the right of the element
     */
    right: "right",
    /**
     * The tooltip is positioned below the element
     */
    bottom: "bottom",
    /**
     * The tooltip is positioned to the left of the element
     */
    left: "left",
    /**
     * The tooltip is positioned before the element
     */
    start: "start",
    /**
     * The tooltip is positioned after the element
     */
    end: "end",
    /**
     * The tooltip is positioned above the element and to the left
     */
    topLeft: "top-left",
    /**
     * The tooltip is positioned above the element and to the right
     */
    topRight: "top-right",
    /**
     * The tooltip is positioned below the element and to the left
     */
    bottomLeft: "bottom-left",
    /**
     * The tooltip is positioned below the element and to the right
     */
    bottomRight: "bottom-right",
    /**
     * The tooltip is positioned above the element and to the left
     */
    topStart: "top-start",
    /**
     * The tooltip is positioned above the element and to the right
     */
    topEnd: "top-end",
    /**
     * The tooltip is positioned below the element and to the left
     */
    bottomStart: "bottom-start",
    /**
     * The tooltip is positioned below the element and to the right
     */
    bottomEnd: "bottom-end",
};


/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/tooltip/tooltip.template.js":
/*!**************************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/tooltip/tooltip.template.js ***!
  \**************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   tooltipTemplate: () => (/* binding */ tooltipTemplate)
/* harmony export */ });
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @microsoft/fast-element */ "webpack/sharing/consume/default/@microsoft/fast-element/@microsoft/fast-element");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _anchored_region_anchored_region_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../anchored-region/anchored-region.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/anchored-region/anchored-region.js");


/**
 * Creates a template for the {@link @microsoft/fast-foundation#(Tooltip:class)} component using the provided prefix.
 * @public
 */
const tooltipTemplate = (context, definition) => {
    return (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.html) `
        ${(0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.when)(x => x.tooltipVisible, (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.html) `
            <${context.tagFor(_anchored_region_anchored_region_js__WEBPACK_IMPORTED_MODULE_1__.AnchoredRegion)}
                fixed-placement="true"
                auto-update-mode="${x => x.autoUpdateMode}"
                vertical-positioning-mode="${x => x.verticalPositioningMode}"
                vertical-default-position="${x => x.verticalDefaultPosition}"
                vertical-inset="${x => x.verticalInset}"
                vertical-scaling="${x => x.verticalScaling}"
                horizontal-positioning-mode="${x => x.horizontalPositioningMode}"
                horizontal-default-position="${x => x.horizontalDefaultPosition}"
                horizontal-scaling="${x => x.horizontalScaling}"
                horizontal-inset="${x => x.horizontalInset}"
                vertical-viewport-lock="${x => x.horizontalViewportLock}"
                horizontal-viewport-lock="${x => x.verticalViewportLock}"
                dir="${x => x.currentDirection}"
                ${(0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.ref)("region")}
            >
                <div class="tooltip" part="tooltip" role="tooltip">
                    <slot></slot>
                </div>
            </${context.tagFor(_anchored_region_anchored_region_js__WEBPACK_IMPORTED_MODULE_1__.AnchoredRegion)}>
        `)}
    `;
};


/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/tree-item/index.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/tree-item/index.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   TreeItem: () => (/* reexport safe */ _tree_item_js__WEBPACK_IMPORTED_MODULE_1__.TreeItem),
/* harmony export */   isTreeItemElement: () => (/* reexport safe */ _tree_item_js__WEBPACK_IMPORTED_MODULE_1__.isTreeItemElement),
/* harmony export */   treeItemTemplate: () => (/* reexport safe */ _tree_item_template_js__WEBPACK_IMPORTED_MODULE_0__.treeItemTemplate)
/* harmony export */ });
/* harmony import */ var _tree_item_template_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./tree-item.template.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/tree-item/tree-item.template.js");
/* harmony import */ var _tree_item_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./tree-item.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/tree-item/tree-item.js");




/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/tree-item/tree-item.js":
/*!*********************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/tree-item/tree-item.js ***!
  \*********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   TreeItem: () => (/* binding */ TreeItem),
/* harmony export */   isTreeItemElement: () => (/* binding */ isTreeItemElement)
/* harmony export */ });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! tslib */ "./node_modules/@microsoft/fast-foundation/node_modules/tslib/tslib.es6.js");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @microsoft/fast-element */ "webpack/sharing/consume/default/@microsoft/fast-element/@microsoft/fast-element");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @microsoft/fast-web-utilities */ "./node_modules/@microsoft/fast-web-utilities/dist/dom.js");
/* harmony import */ var _patterns_start_end_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../patterns/start-end.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/patterns/start-end.js");
/* harmony import */ var _utilities_apply_mixins_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utilities/apply-mixins.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/utilities/apply-mixins.js");
/* harmony import */ var _foundation_element_foundation_element_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../foundation-element/foundation-element.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/foundation-element/foundation-element.js");






/**
 * check if the item is a tree item
 * @public
 * @remarks
 * determines if element is an HTMLElement and if it has the role treeitem
 */
function isTreeItemElement(el) {
    return (0,_microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_1__.isHTMLElement)(el) && el.getAttribute("role") === "treeitem";
}
/**
 * A Tree item Custom HTML Element.
 *
 * @slot start - Content which can be provided before the tree item content
 * @slot end - Content which can be provided after the tree item content
 * @slot - The default slot for tree item text content
 * @slot item - The slot for tree items (fast tree items manage this assignment themselves)
 * @slot expand-collapse-button - The expand/collapse button
 * @csspart positioning-region - The element used to position the tree item content with exception of any child nodes
 * @csspart content-region - The element containing the expand/collapse, start, and end slots
 * @csspart items - The element wrapping any child items
 * @csspart expand-collapse-button - The expand/collapse button
 * @fires expanded-change - Fires a custom 'expanded-change' event when the expanded state changes
 * @fires selected-change - Fires a custom 'selected-change' event when the selected state changes
 *
 * @public
 */
class TreeItem extends _foundation_element_foundation_element_js__WEBPACK_IMPORTED_MODULE_2__.FoundationElement {
    constructor() {
        super(...arguments);
        /**
         * When true, the control will be appear expanded by user interaction.
         * @public
         * @remarks
         * HTML Attribute: expanded
         */
        this.expanded = false;
        /**
         * Whether the item is focusable
         *
         * @internal
         */
        this.focusable = false;
        /**
         * Whether the tree is nested
         *
         * @public
         */
        this.isNestedItem = () => {
            return isTreeItemElement(this.parentElement);
        };
        /**
         * Handle expand button click
         *
         * @internal
         */
        this.handleExpandCollapseButtonClick = (e) => {
            if (!this.disabled && !e.defaultPrevented) {
                this.expanded = !this.expanded;
            }
        };
        /**
         * Handle focus events
         *
         * @internal
         */
        this.handleFocus = (e) => {
            this.setAttribute("tabindex", "0");
        };
        /**
         * Handle blur events
         *
         * @internal
         */
        this.handleBlur = (e) => {
            this.setAttribute("tabindex", "-1");
        };
    }
    expandedChanged() {
        if (this.$fastController.isConnected) {
            this.$emit("expanded-change", this);
        }
    }
    selectedChanged() {
        if (this.$fastController.isConnected) {
            this.$emit("selected-change", this);
        }
    }
    itemsChanged(oldValue, newValue) {
        if (this.$fastController.isConnected) {
            this.items.forEach((node) => {
                if (isTreeItemElement(node)) {
                    // TODO: maybe not require it to be a TreeItem?
                    node.nested = true;
                }
            });
        }
    }
    /**
     * Places document focus on a tree item
     *
     * @public
     * @param el - the element to focus
     */
    static focusItem(el) {
        el.focusable = true;
        el.focus();
    }
    /**
     * Gets number of children
     *
     * @internal
     */
    childItemLength() {
        const treeChildren = this.childItems.filter((item) => {
            return isTreeItemElement(item);
        });
        return treeChildren ? treeChildren.length : 0;
    }
}
(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ mode: "boolean" })
], TreeItem.prototype, "expanded", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ mode: "boolean" })
], TreeItem.prototype, "selected", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ mode: "boolean" })
], TreeItem.prototype, "disabled", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.observable
], TreeItem.prototype, "focusable", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.observable
], TreeItem.prototype, "childItems", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.observable
], TreeItem.prototype, "items", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.observable
], TreeItem.prototype, "nested", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.observable
], TreeItem.prototype, "renderCollapsedChildren", void 0);
(0,_utilities_apply_mixins_js__WEBPACK_IMPORTED_MODULE_4__.applyMixins)(TreeItem, _patterns_start_end_js__WEBPACK_IMPORTED_MODULE_5__.StartEnd);


/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/tree-item/tree-item.template.js":
/*!******************************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/tree-item/tree-item.template.js ***!
  \******************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   treeItemTemplate: () => (/* binding */ treeItemTemplate)
/* harmony export */ });
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @microsoft/fast-element */ "webpack/sharing/consume/default/@microsoft/fast-element/@microsoft/fast-element");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _patterns_start_end_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../patterns/start-end.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/patterns/start-end.js");


/**
 * The template for the {@link @microsoft/fast-foundation#(TreeItem:class)} component.
 * @public
 */
const treeItemTemplate = (context, definition) => (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.html) `
    <template
        role="treeitem"
        slot="${x => (x.isNestedItem() ? "item" : void 0)}"
        tabindex="-1"
        class="${x => (x.expanded ? "expanded" : "")} ${x => x.selected ? "selected" : ""} ${x => (x.nested ? "nested" : "")}
            ${x => (x.disabled ? "disabled" : "")}"
        aria-expanded="${x => x.childItems && x.childItemLength() > 0 ? x.expanded : void 0}"
        aria-selected="${x => x.selected}"
        aria-disabled="${x => x.disabled}"
        @focusin="${(x, c) => x.handleFocus(c.event)}"
        @focusout="${(x, c) => x.handleBlur(c.event)}"
        ${(0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.children)({
    property: "childItems",
    filter: (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.elements)(),
})}
    >
        <div class="positioning-region" part="positioning-region">
            <div class="content-region" part="content-region">
                ${(0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.when)(x => x.childItems && x.childItemLength() > 0, (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.html) `
                        <div
                            aria-hidden="true"
                            class="expand-collapse-button"
                            part="expand-collapse-button"
                            @click="${(x, c) => x.handleExpandCollapseButtonClick(c.event)}"
                            ${(0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.ref)("expandCollapseButton")}
                        >
                            <slot name="expand-collapse-glyph">
                                ${definition.expandCollapseGlyph || ""}
                            </slot>
                        </div>
                    `)}
                ${(0,_patterns_start_end_js__WEBPACK_IMPORTED_MODULE_1__.startSlotTemplate)(context, definition)}
                <slot></slot>
                ${(0,_patterns_start_end_js__WEBPACK_IMPORTED_MODULE_1__.endSlotTemplate)(context, definition)}
            </div>
        </div>
        ${(0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.when)(x => x.childItems &&
    x.childItemLength() > 0 &&
    (x.expanded || x.renderCollapsedChildren), (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.html) `
                <div role="group" class="items" part="items">
                    <slot name="item" ${(0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.slotted)("items")}></slot>
                </div>
            `)}
    </template>
`;


/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/tree-view/index.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/tree-view/index.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   TreeView: () => (/* reexport safe */ _tree_view_js__WEBPACK_IMPORTED_MODULE_1__.TreeView),
/* harmony export */   treeViewTemplate: () => (/* reexport safe */ _tree_view_template_js__WEBPACK_IMPORTED_MODULE_0__.treeViewTemplate)
/* harmony export */ });
/* harmony import */ var _tree_view_template_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./tree-view.template.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/tree-view/tree-view.template.js");
/* harmony import */ var _tree_view_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./tree-view.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/tree-view/tree-view.js");




/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/tree-view/tree-view.js":
/*!*********************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/tree-view/tree-view.js ***!
  \*********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   TreeView: () => (/* binding */ TreeView)
/* harmony export */ });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! tslib */ "./node_modules/@microsoft/fast-foundation/node_modules/tslib/tslib.es6.js");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @microsoft/fast-element */ "webpack/sharing/consume/default/@microsoft/fast-element/@microsoft/fast-element");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @microsoft/fast-web-utilities */ "./node_modules/@microsoft/fast-web-utilities/dist/key-codes.js");
/* harmony import */ var _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @microsoft/fast-web-utilities */ "./node_modules/@microsoft/fast-web-utilities/dist/dom.js");
/* harmony import */ var _tree_item_tree_item_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../tree-item/tree-item.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/tree-item/tree-item.js");
/* harmony import */ var _foundation_element_foundation_element_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../foundation-element/foundation-element.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/foundation-element/foundation-element.js");





/**
 * A Tree view Custom HTML Element.
 * Implements the {@link https://w3c.github.io/aria-practices/#TreeView | ARIA TreeView }.
 *
 * @slot - The default slot for tree items
 *
 * @public
 */
class TreeView extends _foundation_element_foundation_element_js__WEBPACK_IMPORTED_MODULE_1__.FoundationElement {
    constructor() {
        super(...arguments);
        /**
         * The tree item that is designated to be in the tab queue.
         *
         * @internal
         */
        this.currentFocused = null;
        /**
         * Handle focus events
         *
         * @internal
         */
        this.handleFocus = (e) => {
            if (this.slottedTreeItems.length < 1) {
                // no child items, nothing to do
                return;
            }
            if (e.target === this) {
                if (this.currentFocused === null) {
                    this.currentFocused = this.getValidFocusableItem();
                }
                if (this.currentFocused !== null) {
                    _tree_item_tree_item_js__WEBPACK_IMPORTED_MODULE_2__.TreeItem.focusItem(this.currentFocused);
                }
                return;
            }
            if (this.contains(e.target)) {
                this.setAttribute("tabindex", "-1");
                this.currentFocused = e.target;
            }
        };
        /**
         * Handle blur events
         *
         * @internal
         */
        this.handleBlur = (e) => {
            if (e.target instanceof HTMLElement &&
                (e.relatedTarget === null || !this.contains(e.relatedTarget))) {
                this.setAttribute("tabindex", "0");
            }
        };
        /**
         * KeyDown handler
         *
         *  @internal
         */
        this.handleKeyDown = (e) => {
            if (e.defaultPrevented) {
                return;
            }
            if (this.slottedTreeItems.length < 1) {
                return true;
            }
            const treeItems = this.getVisibleNodes();
            switch (e.key) {
                case _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_3__.keyHome:
                    if (treeItems.length) {
                        _tree_item_tree_item_js__WEBPACK_IMPORTED_MODULE_2__.TreeItem.focusItem(treeItems[0]);
                    }
                    return;
                case _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_3__.keyEnd:
                    if (treeItems.length) {
                        _tree_item_tree_item_js__WEBPACK_IMPORTED_MODULE_2__.TreeItem.focusItem(treeItems[treeItems.length - 1]);
                    }
                    return;
                case _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_3__.keyArrowLeft:
                    if (e.target && this.isFocusableElement(e.target)) {
                        const item = e.target;
                        if (item instanceof _tree_item_tree_item_js__WEBPACK_IMPORTED_MODULE_2__.TreeItem &&
                            item.childItemLength() > 0 &&
                            item.expanded) {
                            item.expanded = false;
                        }
                        else if (item instanceof _tree_item_tree_item_js__WEBPACK_IMPORTED_MODULE_2__.TreeItem &&
                            item.parentElement instanceof _tree_item_tree_item_js__WEBPACK_IMPORTED_MODULE_2__.TreeItem) {
                            _tree_item_tree_item_js__WEBPACK_IMPORTED_MODULE_2__.TreeItem.focusItem(item.parentElement);
                        }
                    }
                    return false;
                case _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_3__.keyArrowRight:
                    if (e.target && this.isFocusableElement(e.target)) {
                        const item = e.target;
                        if (item instanceof _tree_item_tree_item_js__WEBPACK_IMPORTED_MODULE_2__.TreeItem &&
                            item.childItemLength() > 0 &&
                            !item.expanded) {
                            item.expanded = true;
                        }
                        else if (item instanceof _tree_item_tree_item_js__WEBPACK_IMPORTED_MODULE_2__.TreeItem && item.childItemLength() > 0) {
                            this.focusNextNode(1, e.target);
                        }
                    }
                    return;
                case _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_3__.keyArrowDown:
                    if (e.target && this.isFocusableElement(e.target)) {
                        this.focusNextNode(1, e.target);
                    }
                    return;
                case _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_3__.keyArrowUp:
                    if (e.target && this.isFocusableElement(e.target)) {
                        this.focusNextNode(-1, e.target);
                    }
                    return;
                case _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_3__.keyEnter:
                    // In single-select trees where selection does not follow focus (see note below),
                    // the default action is typically to select the focused node.
                    this.handleClick(e);
                    return;
            }
            // don't prevent default if we took no action
            return true;
        };
        /**
         * Handles the selected-changed events bubbling up
         * from child tree items
         *
         *  @internal
         */
        this.handleSelectedChange = (e) => {
            if (e.defaultPrevented) {
                return;
            }
            if (!(e.target instanceof Element) || !(0,_tree_item_tree_item_js__WEBPACK_IMPORTED_MODULE_2__.isTreeItemElement)(e.target)) {
                return true;
            }
            const item = e.target;
            if (item.selected) {
                if (this.currentSelected && this.currentSelected !== item) {
                    this.currentSelected.selected = false;
                }
                // new selected item
                this.currentSelected = item;
            }
            else if (!item.selected && this.currentSelected === item) {
                // selected item deselected
                this.currentSelected = null;
            }
            return;
        };
        /**
         * Updates the tree view when slottedTreeItems changes
         */
        this.setItems = () => {
            // force single selection
            // defaults to first one found
            const selectedItem = this.treeView.querySelector("[aria-selected='true']");
            this.currentSelected = selectedItem;
            // invalidate the current focused item if it is no longer valid
            if (this.currentFocused === null || !this.contains(this.currentFocused)) {
                this.currentFocused = this.getValidFocusableItem();
            }
            // toggle properties on child elements
            this.nested = this.checkForNestedItems();
            const treeItems = this.getVisibleNodes();
            treeItems.forEach(node => {
                if ((0,_tree_item_tree_item_js__WEBPACK_IMPORTED_MODULE_2__.isTreeItemElement)(node)) {
                    node.nested = this.nested;
                }
            });
        };
        /**
         * check if the item is focusable
         */
        this.isFocusableElement = (el) => {
            return (0,_tree_item_tree_item_js__WEBPACK_IMPORTED_MODULE_2__.isTreeItemElement)(el);
        };
        this.isSelectedElement = (el) => {
            return el.selected;
        };
    }
    slottedTreeItemsChanged() {
        if (this.$fastController.isConnected) {
            // update for slotted children change
            this.setItems();
        }
    }
    connectedCallback() {
        super.connectedCallback();
        this.setAttribute("tabindex", "0");
        _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.DOM.queueUpdate(() => {
            this.setItems();
        });
    }
    /**
     * Handles click events bubbling up
     *
     *  @internal
     */
    handleClick(e) {
        if (e.defaultPrevented) {
            // handled, do nothing
            return;
        }
        if (!(e.target instanceof Element) || !(0,_tree_item_tree_item_js__WEBPACK_IMPORTED_MODULE_2__.isTreeItemElement)(e.target)) {
            // not a tree item, ignore
            return true;
        }
        const item = e.target;
        if (!item.disabled) {
            item.selected = !item.selected;
        }
        return;
    }
    /**
     * Move focus to a tree item based on its offset from the provided item
     */
    focusNextNode(delta, item) {
        const visibleNodes = this.getVisibleNodes();
        if (!visibleNodes) {
            return;
        }
        const focusItem = visibleNodes[visibleNodes.indexOf(item) + delta];
        if ((0,_microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_4__.isHTMLElement)(focusItem)) {
            _tree_item_tree_item_js__WEBPACK_IMPORTED_MODULE_2__.TreeItem.focusItem(focusItem);
        }
    }
    /**
     * checks if there are any nested tree items
     */
    getValidFocusableItem() {
        const treeItems = this.getVisibleNodes();
        // default to selected element if there is one
        let focusIndex = treeItems.findIndex(this.isSelectedElement);
        if (focusIndex === -1) {
            // otherwise first focusable tree item
            focusIndex = treeItems.findIndex(this.isFocusableElement);
        }
        if (focusIndex !== -1) {
            return treeItems[focusIndex];
        }
        return null;
    }
    /**
     * checks if there are any nested tree items
     */
    checkForNestedItems() {
        return this.slottedTreeItems.some((node) => {
            return (0,_tree_item_tree_item_js__WEBPACK_IMPORTED_MODULE_2__.isTreeItemElement)(node) && node.querySelector("[role='treeitem']");
        });
    }
    getVisibleNodes() {
        return (0,_microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_4__.getDisplayedNodes)(this, "[role='treeitem']") || [];
    }
}
(0,tslib__WEBPACK_IMPORTED_MODULE_5__.__decorate)([
    (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.attr)({ attribute: "render-collapsed-nodes" })
], TreeView.prototype, "renderCollapsedNodes", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_5__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.observable
], TreeView.prototype, "currentSelected", void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_5__.__decorate)([
    _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.observable
], TreeView.prototype, "slottedTreeItems", void 0);


/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/tree-view/tree-view.template.js":
/*!******************************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/tree-view/tree-view.template.js ***!
  \******************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   treeViewTemplate: () => (/* binding */ treeViewTemplate)
/* harmony export */ });
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @microsoft/fast-element */ "webpack/sharing/consume/default/@microsoft/fast-element/@microsoft/fast-element");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__);

/**
 * The template for the {@link @microsoft/fast-foundation#TreeView} component.
 * @public
 */
const treeViewTemplate = (context, definition) => (0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.html) `
    <template
        role="tree"
        ${(0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.ref)("treeView")}
        @keydown="${(x, c) => x.handleKeyDown(c.event)}"
        @focusin="${(x, c) => x.handleFocus(c.event)}"
        @focusout="${(x, c) => x.handleBlur(c.event)}"
        @click="${(x, c) => x.handleClick(c.event)}"
        @selected-change="${(x, c) => x.handleSelectedChange(c.event)}"
    >
        <slot ${(0,_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.slotted)("slottedTreeItems")}></slot>
    </template>
`;


/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/utilities/apply-mixins.js":
/*!************************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/utilities/apply-mixins.js ***!
  \************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   applyMixins: () => (/* binding */ applyMixins)
/* harmony export */ });
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @microsoft/fast-element */ "webpack/sharing/consume/default/@microsoft/fast-element/@microsoft/fast-element");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__);

/**
 * Apply mixins to a constructor.
 * Sourced from {@link https://www.typescriptlang.org/docs/handbook/mixins.html | TypeScript Documentation }.
 * @public
 */
function applyMixins(derivedCtor, ...baseCtors) {
    const derivedAttributes = _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.AttributeConfiguration.locate(derivedCtor);
    baseCtors.forEach(baseCtor => {
        Object.getOwnPropertyNames(baseCtor.prototype).forEach(name => {
            if (name !== "constructor") {
                Object.defineProperty(derivedCtor.prototype, name, 
                /* eslint-disable-next-line @typescript-eslint/no-non-null-assertion */
                Object.getOwnPropertyDescriptor(baseCtor.prototype, name));
            }
        });
        const baseAttributes = _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.AttributeConfiguration.locate(baseCtor);
        baseAttributes.forEach(x => derivedAttributes.push(x));
    });
}


/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/utilities/composed-contains.js":
/*!*****************************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/utilities/composed-contains.js ***!
  \*****************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   composedContains: () => (/* binding */ composedContains)
/* harmony export */ });
/* harmony import */ var _composed_parent_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./composed-parent.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/utilities/composed-parent.js");

/**
 * Determines if the reference element contains the test element in a "composed" DOM tree that
 * ignores shadow DOM boundaries.
 *
 * Returns true of the test element is a descendent of the reference, or exist in
 * a shadow DOM that is a logical descendent of the reference. Otherwise returns false.
 * @param reference - The element to test for containment against.
 * @param test - The element being tested for containment.
 *
 * @public
 */
function composedContains(reference, test) {
    let current = test;
    while (current !== null) {
        if (current === reference) {
            return true;
        }
        current = (0,_composed_parent_js__WEBPACK_IMPORTED_MODULE_0__.composedParent)(current);
    }
    return false;
}


/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/utilities/composed-parent.js":
/*!***************************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/utilities/composed-parent.js ***!
  \***************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   composedParent: () => (/* binding */ composedParent)
/* harmony export */ });
/**
 * Retrieves the "composed parent" element of a node, ignoring DOM tree boundaries.
 * When the parent of a node is a shadow-root, it will return the host
 * element of the shadow root. Otherwise it will return the parent node or null if
 * no parent node exists.
 * @param element - The element for which to retrieve the composed parent
 *
 * @public
 */
function composedParent(element) {
    const parentNode = element.parentElement;
    if (parentNode) {
        return parentNode;
    }
    else {
        const rootNode = element.getRootNode();
        if (rootNode.host instanceof HTMLElement) {
            // this is shadow-root
            return rootNode.host;
        }
    }
    return null;
}


/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/utilities/direction.js":
/*!*********************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/utilities/direction.js ***!
  \*********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getDirection: () => (/* binding */ getDirection)
/* harmony export */ });
/* harmony import */ var _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @microsoft/fast-web-utilities */ "./node_modules/@microsoft/fast-web-utilities/dist/localization.js");

/**
 * a method to determine the current localization direction of the view
 * @param rootNode - the HTMLElement to begin the query from, usually "this" when used in a component controller
 * @public
 */
const getDirection = (rootNode) => {
    const dirNode = rootNode.closest("[dir]");
    return dirNode !== null && dirNode.dir === "rtl" ? _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_0__.Direction.rtl : _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_0__.Direction.ltr;
};


/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/utilities/index.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/utilities/index.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   MatchMediaBehavior: () => (/* reexport safe */ _match_media_stylesheet_behavior_js__WEBPACK_IMPORTED_MODULE_3__.MatchMediaBehavior),
/* harmony export */   MatchMediaStyleSheetBehavior: () => (/* reexport safe */ _match_media_stylesheet_behavior_js__WEBPACK_IMPORTED_MODULE_3__.MatchMediaStyleSheetBehavior),
/* harmony export */   PropertyStyleSheetBehavior: () => (/* reexport safe */ _property_stylesheet_behavior_js__WEBPACK_IMPORTED_MODULE_4__.PropertyStyleSheetBehavior),
/* harmony export */   applyMixins: () => (/* reexport safe */ _apply_mixins_js__WEBPACK_IMPORTED_MODULE_0__.applyMixins),
/* harmony export */   composedContains: () => (/* reexport safe */ _composed_contains_js__WEBPACK_IMPORTED_MODULE_2__.composedContains),
/* harmony export */   composedParent: () => (/* reexport safe */ _composed_parent_js__WEBPACK_IMPORTED_MODULE_1__.composedParent),
/* harmony export */   darkModeStylesheetBehavior: () => (/* reexport safe */ _match_media_stylesheet_behavior_js__WEBPACK_IMPORTED_MODULE_3__.darkModeStylesheetBehavior),
/* harmony export */   disabledCursor: () => (/* reexport safe */ _style_index_js__WEBPACK_IMPORTED_MODULE_5__.disabledCursor),
/* harmony export */   display: () => (/* reexport safe */ _style_index_js__WEBPACK_IMPORTED_MODULE_5__.display),
/* harmony export */   focusVisible: () => (/* reexport safe */ _style_index_js__WEBPACK_IMPORTED_MODULE_5__.focusVisible),
/* harmony export */   forcedColorsStylesheetBehavior: () => (/* reexport safe */ _match_media_stylesheet_behavior_js__WEBPACK_IMPORTED_MODULE_3__.forcedColorsStylesheetBehavior),
/* harmony export */   getDirection: () => (/* reexport safe */ _direction_js__WEBPACK_IMPORTED_MODULE_6__.getDirection),
/* harmony export */   hidden: () => (/* reexport safe */ _style_index_js__WEBPACK_IMPORTED_MODULE_5__.hidden),
/* harmony export */   lightModeStylesheetBehavior: () => (/* reexport safe */ _match_media_stylesheet_behavior_js__WEBPACK_IMPORTED_MODULE_3__.lightModeStylesheetBehavior),
/* harmony export */   whitespaceFilter: () => (/* reexport safe */ _whitespace_filter_js__WEBPACK_IMPORTED_MODULE_7__.whitespaceFilter)
/* harmony export */ });
/* harmony import */ var _apply_mixins_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./apply-mixins.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/utilities/apply-mixins.js");
/* harmony import */ var _composed_parent_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./composed-parent.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/utilities/composed-parent.js");
/* harmony import */ var _composed_contains_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./composed-contains.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/utilities/composed-contains.js");
/* harmony import */ var _match_media_stylesheet_behavior_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./match-media-stylesheet-behavior.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/utilities/match-media-stylesheet-behavior.js");
/* harmony import */ var _property_stylesheet_behavior_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./property-stylesheet-behavior.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/utilities/property-stylesheet-behavior.js");
/* harmony import */ var _style_index_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./style/index.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/utilities/style/index.js");
/* harmony import */ var _direction_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./direction.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/utilities/direction.js");
/* harmony import */ var _whitespace_filter_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./whitespace-filter.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/utilities/whitespace-filter.js");










/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/utilities/intersection-service.js":
/*!********************************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/utilities/intersection-service.js ***!
  \********************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   IntersectionService: () => (/* binding */ IntersectionService)
/* harmony export */ });
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @microsoft/fast-element */ "webpack/sharing/consume/default/@microsoft/fast-element/@microsoft/fast-element");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__);

/**
 *  A service to batch intersection event callbacks so multiple elements can share a single observer
 *
 * @public
 */
class IntersectionService {
    constructor() {
        this.intersectionDetector = null;
        this.observedElements = new Map();
        /**
         * Request the position of a target element
         *
         * @internal
         */
        this.requestPosition = (target, callback) => {
            var _a;
            if (this.intersectionDetector === null) {
                return;
            }
            if (this.observedElements.has(target)) {
                (_a = this.observedElements.get(target)) === null || _a === void 0 ? void 0 : _a.push(callback);
                return;
            }
            this.observedElements.set(target, [callback]);
            this.intersectionDetector.observe(target);
        };
        /**
         * Cancel a position request
         *
         * @internal
         */
        this.cancelRequestPosition = (target, callback) => {
            const callbacks = this.observedElements.get(target);
            if (callbacks !== undefined) {
                const callBackIndex = callbacks.indexOf(callback);
                if (callBackIndex !== -1) {
                    callbacks.splice(callBackIndex, 1);
                }
            }
        };
        /**
         * initialize intersection detector
         */
        this.initializeIntersectionDetector = () => {
            if (!_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.$global.IntersectionObserver) {
                //intersection observer not supported
                return;
            }
            this.intersectionDetector = new IntersectionObserver(this.handleIntersection, {
                root: null,
                rootMargin: "0px",
                threshold: [0, 1],
            });
        };
        /**
         *  Handle intersections
         */
        this.handleIntersection = (entries) => {
            if (this.intersectionDetector === null) {
                return;
            }
            const pendingCallbacks = [];
            const pendingCallbackParams = [];
            // go through the entries to build a list of callbacks and params for each
            entries.forEach((entry) => {
                var _a;
                // stop watching this element until we get new update requests for it
                (_a = this.intersectionDetector) === null || _a === void 0 ? void 0 : _a.unobserve(entry.target);
                const thisElementCallbacks = this.observedElements.get(entry.target);
                if (thisElementCallbacks !== undefined) {
                    thisElementCallbacks.forEach((callback) => {
                        let targetCallbackIndex = pendingCallbacks.indexOf(callback);
                        if (targetCallbackIndex === -1) {
                            targetCallbackIndex = pendingCallbacks.length;
                            pendingCallbacks.push(callback);
                            pendingCallbackParams.push([]);
                        }
                        pendingCallbackParams[targetCallbackIndex].push(entry);
                    });
                    this.observedElements.delete(entry.target);
                }
            });
            // execute callbacks
            pendingCallbacks.forEach((callback, index) => {
                callback(pendingCallbackParams[index]);
            });
        };
        this.initializeIntersectionDetector();
    }
}


/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/utilities/match-media-stylesheet-behavior.js":
/*!*******************************************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/utilities/match-media-stylesheet-behavior.js ***!
  \*******************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   MatchMediaBehavior: () => (/* binding */ MatchMediaBehavior),
/* harmony export */   MatchMediaStyleSheetBehavior: () => (/* binding */ MatchMediaStyleSheetBehavior),
/* harmony export */   darkModeStylesheetBehavior: () => (/* binding */ darkModeStylesheetBehavior),
/* harmony export */   forcedColorsStylesheetBehavior: () => (/* binding */ forcedColorsStylesheetBehavior),
/* harmony export */   lightModeStylesheetBehavior: () => (/* binding */ lightModeStylesheetBehavior)
/* harmony export */ });
/**
 * An abstract behavior to react to media queries. Implementations should implement
 * the `constructListener` method to perform some action based on media query changes.
 *
 * @public
 */
class MatchMediaBehavior {
    /**
     *
     * @param query - The media query to operate from.
     */
    constructor(query) {
        /**
         * The behavior needs to operate on element instances but elements might share a behavior instance.
         * To ensure proper attachment / detachment per instance, we construct a listener for
         * each bind invocation and cache the listeners by element reference.
         */
        this.listenerCache = new WeakMap();
        this.query = query;
    }
    /**
     * Binds the behavior to the element.
     * @param source - The element for which the behavior is bound.
     */
    bind(source) {
        const { query } = this;
        const listener = this.constructListener(source);
        // Invoke immediately to add if the query currently matches
        listener.bind(query)();
        query.addListener(listener);
        this.listenerCache.set(source, listener);
    }
    /**
     * Unbinds the behavior from the element.
     * @param source - The element for which the behavior is unbinding.
     */
    unbind(source) {
        const listener = this.listenerCache.get(source);
        if (listener) {
            this.query.removeListener(listener);
            this.listenerCache.delete(source);
        }
    }
}
/**
 * A behavior to add or remove a stylesheet from an element based on a media query. The behavior ensures that
 * styles are applied while the a query matches the environment and that styles are not applied if the query does
 * not match the environment.
 *
 * @public
 */
class MatchMediaStyleSheetBehavior extends MatchMediaBehavior {
    /**
     * Constructs a {@link MatchMediaStyleSheetBehavior} instance.
     * @param query - The media query to operate from.
     * @param styles - The styles to coordinate with the query.
     */
    constructor(query, styles) {
        super(query);
        this.styles = styles;
    }
    /**
     * Defines a function to construct {@link MatchMediaStyleSheetBehavior | MatchMediaStyleSheetBehaviors} for
     * a provided query.
     * @param query - The media query to operate from.
     *
     * @public
     * @example
     *
     * ```ts
     * import { css } from "@microsoft/fast-element";
     * import { MatchMediaStyleSheetBehavior } from "@microsoft/fast-foundation";
     *
     * const landscapeBehavior = MatchMediaStyleSheetBehavior.with(
     *   window.matchMedia("(orientation: landscape)")
     * );
     * const styles = css`
     *   :host {
     *     width: 200px;
     *     height: 400px;
     *   }
     * `
     * .withBehaviors(landscapeBehavior(css`
     *   :host {
     *     width: 400px;
     *     height: 200px;
     *   }
     * `))
     * ```
     */
    static with(query) {
        return (styles) => {
            return new MatchMediaStyleSheetBehavior(query, styles);
        };
    }
    /**
     * Constructs a match-media listener for a provided element.
     * @param source - the element for which to attach or detach styles.
     * @internal
     */
    constructListener(source) {
        let attached = false;
        const styles = this.styles;
        return function listener() {
            const { matches } = this;
            if (matches && !attached) {
                source.$fastController.addStyles(styles);
                attached = matches;
            }
            else if (!matches && attached) {
                source.$fastController.removeStyles(styles);
                attached = matches;
            }
        };
    }
    /**
     * Unbinds the behavior from the element.
     * @param source - The element for which the behavior is unbinding.
     * @internal
     */
    unbind(source) {
        super.unbind(source);
        source.$fastController.removeStyles(this.styles);
    }
}
/**
 * This can be used to construct a behavior to apply a forced-colors only stylesheet.
 * @public
 */
const forcedColorsStylesheetBehavior = MatchMediaStyleSheetBehavior.with(window.matchMedia("(forced-colors)"));
/**
 * This can be used to construct a behavior to apply a prefers color scheme: dark only stylesheet.
 * @public
 */
const darkModeStylesheetBehavior = MatchMediaStyleSheetBehavior.with(window.matchMedia("(prefers-color-scheme: dark)"));
/**
 * This can be used to construct a behavior to apply a prefers color scheme: light only stylesheet.
 * @public
 */
const lightModeStylesheetBehavior = MatchMediaStyleSheetBehavior.with(window.matchMedia("(prefers-color-scheme: light)"));


/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/utilities/property-stylesheet-behavior.js":
/*!****************************************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/utilities/property-stylesheet-behavior.js ***!
  \****************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   PropertyStyleSheetBehavior: () => (/* binding */ PropertyStyleSheetBehavior)
/* harmony export */ });
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @microsoft/fast-element */ "webpack/sharing/consume/default/@microsoft/fast-element/@microsoft/fast-element");
/* harmony import */ var _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__);

/**
 * A behavior to add or remove a stylesheet from an element based on a property. The behavior ensures that
 * styles are applied while the property matches and that styles are not applied if the property does
 * not match.
 *
 * @public
 */
class PropertyStyleSheetBehavior {
    /**
     * Constructs a {@link PropertyStyleSheetBehavior} instance.
     * @param propertyName - The property name to operate from.
     * @param value - The property value to operate from.
     * @param styles - The styles to coordinate with the property.
     */
    constructor(propertyName, value, styles) {
        this.propertyName = propertyName;
        this.value = value;
        this.styles = styles;
    }
    /**
     * Binds the behavior to the element.
     * @param elementInstance - The element for which the property is applied.
     */
    bind(elementInstance) {
        _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.Observable.getNotifier(elementInstance).subscribe(this, this.propertyName);
        this.handleChange(elementInstance, this.propertyName);
    }
    /**
     * Unbinds the behavior from the element.
     * @param source - The element for which the behavior is unbinding.
     * @internal
     */
    unbind(source) {
        _microsoft_fast_element__WEBPACK_IMPORTED_MODULE_0__.Observable.getNotifier(source).unsubscribe(this, this.propertyName);
        source.$fastController.removeStyles(this.styles);
    }
    /**
     * Change event for the provided element.
     * @param source - the element for which to attach or detach styles.
     * @param key - the key to lookup to know if the element already has the styles
     * @internal
     */
    handleChange(source, key) {
        if (source[key] === this.value) {
            source.$fastController.addStyles(this.styles);
        }
        else {
            source.$fastController.removeStyles(this.styles);
        }
    }
}


/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/utilities/style/disabled.js":
/*!**************************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/utilities/style/disabled.js ***!
  \**************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   disabledCursor: () => (/* binding */ disabledCursor)
/* harmony export */ });
/**
 * The CSS value for disabled cursors.
 * @public
 */
const disabledCursor = "not-allowed";


/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/utilities/style/display.js":
/*!*************************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/utilities/style/display.js ***!
  \*************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   display: () => (/* binding */ display),
/* harmony export */   hidden: () => (/* binding */ hidden)
/* harmony export */ });
/**
 * A CSS fragment to set `display: none;` when the host is hidden using the [hidden] attribute.
 * @public
 */
const hidden = `:host([hidden]){display:none}`;
/**
 * Applies a CSS display property.
 * Also adds CSS rules to not display the element when the [hidden] attribute is applied to the element.
 * @param display - The CSS display property value
 * @public
 */
function display(displayValue) {
    return `${hidden}:host{display:${displayValue}}`;
}


/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/utilities/style/focus.js":
/*!***********************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/utilities/style/focus.js ***!
  \***********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   focusVisible: () => (/* binding */ focusVisible)
/* harmony export */ });
/* harmony import */ var _microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @microsoft/fast-web-utilities */ "./node_modules/@microsoft/fast-web-utilities/dist/dom.js");

/**
 * The string representing the focus selector to be used. Value
 * will be "focus-visible" when https://drafts.csswg.org/selectors-4/#the-focus-visible-pseudo
 * is supported and "focus" when it is not.
 *
 * @public
 */
const focusVisible = (0,_microsoft_fast_web_utilities__WEBPACK_IMPORTED_MODULE_0__.canUseFocusVisible)() ? "focus-visible" : "focus";


/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/utilities/style/index.js":
/*!***********************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/utilities/style/index.js ***!
  \***********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   disabledCursor: () => (/* reexport safe */ _disabled_js__WEBPACK_IMPORTED_MODULE_0__.disabledCursor),
/* harmony export */   display: () => (/* reexport safe */ _display_js__WEBPACK_IMPORTED_MODULE_1__.display),
/* harmony export */   focusVisible: () => (/* reexport safe */ _focus_js__WEBPACK_IMPORTED_MODULE_2__.focusVisible),
/* harmony export */   hidden: () => (/* reexport safe */ _display_js__WEBPACK_IMPORTED_MODULE_1__.hidden)
/* harmony export */ });
/* harmony import */ var _disabled_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./disabled.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/utilities/style/disabled.js");
/* harmony import */ var _display_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./display.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/utilities/style/display.js");
/* harmony import */ var _focus_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./focus.js */ "./node_modules/@microsoft/fast-foundation/dist/esm/utilities/style/focus.js");





/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/dist/esm/utilities/whitespace-filter.js":
/*!*****************************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/dist/esm/utilities/whitespace-filter.js ***!
  \*****************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   whitespaceFilter: () => (/* binding */ whitespaceFilter)
/* harmony export */ });
/**
 * a method to filter out any whitespace _only_ nodes, to be used inside a template
 * @param value - The Node that is being inspected
 * @param index - The index of the node within the array
 * @param array - The Node array that is being filtered
 *
 * @public
 */
function whitespaceFilter(value, index, array) {
    return value.nodeType !== Node.TEXT_NODE
        ? true
        : typeof value.nodeValue === "string" && !!value.nodeValue.trim().length;
}


/***/ }),

/***/ "./node_modules/@microsoft/fast-foundation/node_modules/tslib/tslib.es6.js":
/*!*********************************************************************************!*\
  !*** ./node_modules/@microsoft/fast-foundation/node_modules/tslib/tslib.es6.js ***!
  \*********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   __assign: () => (/* binding */ __assign),
/* harmony export */   __asyncDelegator: () => (/* binding */ __asyncDelegator),
/* harmony export */   __asyncGenerator: () => (/* binding */ __asyncGenerator),
/* harmony export */   __asyncValues: () => (/* binding */ __asyncValues),
/* harmony export */   __await: () => (/* binding */ __await),
/* harmony export */   __awaiter: () => (/* binding */ __awaiter),
/* harmony export */   __classPrivateFieldGet: () => (/* binding */ __classPrivateFieldGet),
/* harmony export */   __classPrivateFieldSet: () => (/* binding */ __classPrivateFieldSet),
/* harmony export */   __createBinding: () => (/* binding */ __createBinding),
/* harmony export */   __decorate: () => (/* binding */ __decorate),
/* harmony export */   __exportStar: () => (/* binding */ __exportStar),
/* harmony export */   __extends: () => (/* binding */ __extends),
/* harmony export */   __generator: () => (/* binding */ __generator),
/* harmony export */   __importDefault: () => (/* binding */ __importDefault),
/* harmony export */   __importStar: () => (/* binding */ __importStar),
/* harmony export */   __makeTemplateObject: () => (/* binding */ __makeTemplateObject),
/* harmony export */   __metadata: () => (/* binding */ __metadata),
/* harmony export */   __param: () => (/* binding */ __param),
/* harmony export */   __read: () => (/* binding */ __read),
/* harmony export */   __rest: () => (/* binding */ __rest),
/* harmony export */   __spread: () => (/* binding */ __spread),
/* harmony export */   __spreadArrays: () => (/* binding */ __spreadArrays),
/* harmony export */   __values: () => (/* binding */ __values)
/* harmony export */ });
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
/* global Reflect, Promise */

var extendStatics = function(d, b) {
    extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return extendStatics(d, b);
};

function __extends(d, b) {
    extendStatics(d, b);
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
}

var __assign = function() {
    __assign = Object.assign || function __assign(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
        }
        return t;
    }
    return __assign.apply(this, arguments);
}

function __rest(s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
}

function __decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}

function __param(paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
}

function __metadata(metadataKey, metadataValue) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(metadataKey, metadataValue);
}

function __awaiter(thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
}

function __generator(thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [op[0] & 2, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
}

function __createBinding(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}

function __exportStar(m, exports) {
    for (var p in m) if (p !== "default" && !exports.hasOwnProperty(p)) exports[p] = m[p];
}

function __values(o) {
    var s = typeof Symbol === "function" && Symbol.iterator, m = s && o[s], i = 0;
    if (m) return m.call(o);
    if (o && typeof o.length === "number") return {
        next: function () {
            if (o && i >= o.length) o = void 0;
            return { value: o && o[i++], done: !o };
        }
    };
    throw new TypeError(s ? "Object is not iterable." : "Symbol.iterator is not defined.");
}

function __read(o, n) {
    var m = typeof Symbol === "function" && o[Symbol.iterator];
    if (!m) return o;
    var i = m.call(o), r, ar = [], e;
    try {
        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);
    }
    catch (error) { e = { error: error }; }
    finally {
        try {
            if (r && !r.done && (m = i["return"])) m.call(i);
        }
        finally { if (e) throw e.error; }
    }
    return ar;
}

function __spread() {
    for (var ar = [], i = 0; i < arguments.length; i++)
        ar = ar.concat(__read(arguments[i]));
    return ar;
}

function __spreadArrays() {
    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;
    for (var r = Array(s), k = 0, i = 0; i < il; i++)
        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)
            r[k] = a[j];
    return r;
};

function __await(v) {
    return this instanceof __await ? (this.v = v, this) : new __await(v);
}

function __asyncGenerator(thisArg, _arguments, generator) {
    if (!Symbol.asyncIterator) throw new TypeError("Symbol.asyncIterator is not defined.");
    var g = generator.apply(thisArg, _arguments || []), i, q = [];
    return i = {}, verb("next"), verb("throw"), verb("return"), i[Symbol.asyncIterator] = function () { return this; }, i;
    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }
    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }
    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }
    function fulfill(value) { resume("next", value); }
    function reject(value) { resume("throw", value); }
    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }
}

function __asyncDelegator(o) {
    var i, p;
    return i = {}, verb("next"), verb("throw", function (e) { throw e; }), verb("return"), i[Symbol.iterator] = function () { return this; }, i;
    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === "return" } : f ? f(v) : v; } : f; }
}

function __asyncValues(o) {
    if (!Symbol.asyncIterator) throw new TypeError("Symbol.asyncIterator is not defined.");
    var m = o[Symbol.asyncIterator], i;
    return m ? m.call(o) : (o = typeof __values === "function" ? __values(o) : o[Symbol.iterator](), i = {}, verb("next"), verb("throw"), verb("return"), i[Symbol.asyncIterator] = function () { return this; }, i);
    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }
    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }
}

function __makeTemplateObject(cooked, raw) {
    if (Object.defineProperty) { Object.defineProperty(cooked, "raw", { value: raw }); } else { cooked.raw = raw; }
    return cooked;
};

function __importStar(mod) {
    if (mod && mod.__esModule) return mod;
    var result = {};
    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];
    result.default = mod;
    return result;
}

function __importDefault(mod) {
    return (mod && mod.__esModule) ? mod : { default: mod };
}

function __classPrivateFieldGet(receiver, privateMap) {
    if (!privateMap.has(receiver)) {
        throw new TypeError("attempted to get private field on non-instance");
    }
    return privateMap.get(receiver);
}

function __classPrivateFieldSet(receiver, privateMap, value) {
    if (!privateMap.has(receiver)) {
        throw new TypeError("attempted to set private field on non-instance");
    }
    privateMap.set(receiver, value);
    return value;
}


/***/ }),

/***/ "./node_modules/@microsoft/fast-web-utilities/dist/array.js":
/*!******************************************************************!*\
  !*** ./node_modules/@microsoft/fast-web-utilities/dist/array.js ***!
  \******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   findLastIndex: () => (/* binding */ findLastIndex)
/* harmony export */ });
/**
 * Returns the index of the last element in the array where predicate is true, and -1 otherwise.
 *
 * @param array - the array to test
 * @param predicate - find calls predicate once for each element of the array, in descending order, until it finds one where predicate returns true. If such an element is found, findLastIndex immediately returns that element index. Otherwise, findIndex returns -1.
 */
function findLastIndex(array, predicate) {
    let k = array.length;
    while (k--) {
        if (predicate(array[k], k, array)) {
            return k;
        }
    }
    return -1;
}


/***/ }),

/***/ "./node_modules/@microsoft/fast-web-utilities/dist/dom.js":
/*!****************************************************************!*\
  !*** ./node_modules/@microsoft/fast-web-utilities/dist/dom.js ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   canUseCssGrid: () => (/* binding */ canUseCssGrid),
/* harmony export */   canUseFocusVisible: () => (/* binding */ canUseFocusVisible),
/* harmony export */   canUseForcedColors: () => (/* binding */ canUseForcedColors),
/* harmony export */   canUsedForcedColors: () => (/* binding */ canUsedForcedColors),
/* harmony export */   getDisplayedNodes: () => (/* binding */ getDisplayedNodes),
/* harmony export */   getKeyCode: () => (/* binding */ getKeyCode),
/* harmony export */   isHTMLElement: () => (/* binding */ isHTMLElement),
/* harmony export */   resetDocumentCache: () => (/* binding */ resetDocumentCache)
/* harmony export */ });
/* harmony import */ var exenv_es6__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! exenv-es6 */ "./node_modules/exenv-es6/dist/can-use-dom.js");

/**
 * A test that ensures that all arguments are HTML Elements
 */
function isHTMLElement(...args) {
    return args.every((arg) => arg instanceof HTMLElement);
}
/**
 * Returns all displayed elements inside of a root node that match a provided selector
 */
function getDisplayedNodes(rootNode, selector) {
    if (!rootNode || !selector || !isHTMLElement(rootNode)) {
        return;
    }
    const nodes = Array.from(rootNode.querySelectorAll(selector));
    // offsetParent will be null if the element isn't currently displayed,
    // so this will allow us to operate only on visible nodes
    return nodes.filter((node) => node.offsetParent !== null);
}
/**
 * Gets the numeric key code associated with a keyboard event. This method is for use with DOM level 3 events
 * that still use the deprecated keyCode property.
 */
function getKeyCode(event) {
    return event === null ? null : event.which || event.keyCode || event.charCode;
}
/**
 * Returns the nonce used in the page, if any.
 *
 * Based on https://github.com/cssinjs/jss/blob/master/packages/jss/src/DomRenderer.js
 */
function getNonce() {
    const node = document.querySelector('meta[property="csp-nonce"]');
    if (node) {
        return node.getAttribute("content");
    }
    else {
        return null;
    }
}
/**
 * Test if the document supports :focus-visible
 */
let _canUseFocusVisible;
function canUseFocusVisible() {
    if (typeof _canUseFocusVisible === "boolean") {
        return _canUseFocusVisible;
    }
    if (!(0,exenv_es6__WEBPACK_IMPORTED_MODULE_0__.canUseDOM)()) {
        _canUseFocusVisible = false;
        return _canUseFocusVisible;
    }
    // Check to see if the document supports the focus-visible element
    const styleElement = document.createElement("style");
    // If nonces are present on the page, use it when creating the style element
    // to test focus-visible support.
    const styleNonce = getNonce();
    if (styleNonce !== null) {
        styleElement.setAttribute("nonce", styleNonce);
    }
    document.head.appendChild(styleElement);
    try {
        styleElement.sheet.insertRule("foo:focus-visible {color:inherit}", 0);
        _canUseFocusVisible = true;
    }
    catch (e) {
        _canUseFocusVisible = false;
    }
    finally {
        document.head.removeChild(styleElement);
    }
    return _canUseFocusVisible;
}
let _canUseCssGrid;
function canUseCssGrid() {
    if (typeof _canUseCssGrid === "boolean") {
        return _canUseCssGrid;
    }
    try {
        _canUseCssGrid = CSS.supports("display", "grid");
    }
    catch (_a) {
        _canUseCssGrid = false;
    }
    return _canUseCssGrid;
}
function canUseForcedColors() {
    return ((0,exenv_es6__WEBPACK_IMPORTED_MODULE_0__.canUseDOM)() &&
        (window.matchMedia("(forced-colors: none)").matches ||
            window.matchMedia("(forced-colors: active)").matches));
}
function resetDocumentCache() {
    _canUseCssGrid = undefined;
    _canUseFocusVisible = undefined;
}
/**
 * @deprecated Use 'canUseForcedColors' instead
 */
const canUsedForcedColors = canUseForcedColors;


/***/ }),

/***/ "./node_modules/@microsoft/fast-web-utilities/dist/events.js":
/*!*******************************************************************!*\
  !*** ./node_modules/@microsoft/fast-web-utilities/dist/events.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   eventAbort: () => (/* binding */ eventAbort),
/* harmony export */   eventAfterPrint: () => (/* binding */ eventAfterPrint),
/* harmony export */   eventAnimationCancel: () => (/* binding */ eventAnimationCancel),
/* harmony export */   eventAnimationEnd: () => (/* binding */ eventAnimationEnd),
/* harmony export */   eventAnimationIteration: () => (/* binding */ eventAnimationIteration),
/* harmony export */   eventAnimationStart: () => (/* binding */ eventAnimationStart),
/* harmony export */   eventAppInstalled: () => (/* binding */ eventAppInstalled),
/* harmony export */   eventBeforePrint: () => (/* binding */ eventBeforePrint),
/* harmony export */   eventBeforeUnload: () => (/* binding */ eventBeforeUnload),
/* harmony export */   eventBeginEvent: () => (/* binding */ eventBeginEvent),
/* harmony export */   eventBlocked: () => (/* binding */ eventBlocked),
/* harmony export */   eventBlur: () => (/* binding */ eventBlur),
/* harmony export */   eventCanPlay: () => (/* binding */ eventCanPlay),
/* harmony export */   eventCanPlayThrough: () => (/* binding */ eventCanPlayThrough),
/* harmony export */   eventChange: () => (/* binding */ eventChange),
/* harmony export */   eventChargingChange: () => (/* binding */ eventChargingChange),
/* harmony export */   eventChargingTimeChange: () => (/* binding */ eventChargingTimeChange),
/* harmony export */   eventClick: () => (/* binding */ eventClick),
/* harmony export */   eventClose: () => (/* binding */ eventClose),
/* harmony export */   eventComplete: () => (/* binding */ eventComplete),
/* harmony export */   eventCompositionEnd: () => (/* binding */ eventCompositionEnd),
/* harmony export */   eventCompositionStart: () => (/* binding */ eventCompositionStart),
/* harmony export */   eventCompositionUpdate: () => (/* binding */ eventCompositionUpdate),
/* harmony export */   eventContextMenu: () => (/* binding */ eventContextMenu),
/* harmony export */   eventCopy: () => (/* binding */ eventCopy),
/* harmony export */   eventCut: () => (/* binding */ eventCut),
/* harmony export */   eventDblClick: () => (/* binding */ eventDblClick),
/* harmony export */   eventDeviceChange: () => (/* binding */ eventDeviceChange),
/* harmony export */   eventDeviceMotion: () => (/* binding */ eventDeviceMotion),
/* harmony export */   eventDeviceOrientation: () => (/* binding */ eventDeviceOrientation),
/* harmony export */   eventDischargingTimeChange: () => (/* binding */ eventDischargingTimeChange),
/* harmony export */   eventDrag: () => (/* binding */ eventDrag),
/* harmony export */   eventDragEnd: () => (/* binding */ eventDragEnd),
/* harmony export */   eventDragEnter: () => (/* binding */ eventDragEnter),
/* harmony export */   eventDragLeave: () => (/* binding */ eventDragLeave),
/* harmony export */   eventDragOver: () => (/* binding */ eventDragOver),
/* harmony export */   eventDragStart: () => (/* binding */ eventDragStart),
/* harmony export */   eventDrop: () => (/* binding */ eventDrop),
/* harmony export */   eventDurationChange: () => (/* binding */ eventDurationChange),
/* harmony export */   eventEmptied: () => (/* binding */ eventEmptied),
/* harmony export */   eventEndEvent: () => (/* binding */ eventEndEvent),
/* harmony export */   eventEnded: () => (/* binding */ eventEnded),
/* harmony export */   eventError: () => (/* binding */ eventError),
/* harmony export */   eventFocus: () => (/* binding */ eventFocus),
/* harmony export */   eventFocusIn: () => (/* binding */ eventFocusIn),
/* harmony export */   eventFocusOut: () => (/* binding */ eventFocusOut),
/* harmony export */   eventFullScreenChange: () => (/* binding */ eventFullScreenChange),
/* harmony export */   eventFullScreenError: () => (/* binding */ eventFullScreenError),
/* harmony export */   eventGamePadConnected: () => (/* binding */ eventGamePadConnected),
/* harmony export */   eventGamePadDisconnected: () => (/* binding */ eventGamePadDisconnected),
/* harmony export */   eventGotPointerCapture: () => (/* binding */ eventGotPointerCapture),
/* harmony export */   eventHashChange: () => (/* binding */ eventHashChange),
/* harmony export */   eventInput: () => (/* binding */ eventInput),
/* harmony export */   eventInvalid: () => (/* binding */ eventInvalid),
/* harmony export */   eventKeyDown: () => (/* binding */ eventKeyDown),
/* harmony export */   eventKeyUp: () => (/* binding */ eventKeyUp),
/* harmony export */   eventLevelChange: () => (/* binding */ eventLevelChange),
/* harmony export */   eventLoad: () => (/* binding */ eventLoad),
/* harmony export */   eventLoadEnd: () => (/* binding */ eventLoadEnd),
/* harmony export */   eventLoadStart: () => (/* binding */ eventLoadStart),
/* harmony export */   eventLoadedData: () => (/* binding */ eventLoadedData),
/* harmony export */   eventLoadedMetaData: () => (/* binding */ eventLoadedMetaData),
/* harmony export */   eventLostPointerCapture: () => (/* binding */ eventLostPointerCapture),
/* harmony export */   eventMessage: () => (/* binding */ eventMessage),
/* harmony export */   eventMessageError: () => (/* binding */ eventMessageError),
/* harmony export */   eventMouseDown: () => (/* binding */ eventMouseDown),
/* harmony export */   eventMouseEnter: () => (/* binding */ eventMouseEnter),
/* harmony export */   eventMouseLeave: () => (/* binding */ eventMouseLeave),
/* harmony export */   eventMouseMove: () => (/* binding */ eventMouseMove),
/* harmony export */   eventMouseOut: () => (/* binding */ eventMouseOut),
/* harmony export */   eventMouseOver: () => (/* binding */ eventMouseOver),
/* harmony export */   eventMouseUp: () => (/* binding */ eventMouseUp),
/* harmony export */   eventNotificationClick: () => (/* binding */ eventNotificationClick),
/* harmony export */   eventOffline: () => (/* binding */ eventOffline),
/* harmony export */   eventOnline: () => (/* binding */ eventOnline),
/* harmony export */   eventOpen: () => (/* binding */ eventOpen),
/* harmony export */   eventOrientationChange: () => (/* binding */ eventOrientationChange),
/* harmony export */   eventPageHide: () => (/* binding */ eventPageHide),
/* harmony export */   eventPageShow: () => (/* binding */ eventPageShow),
/* harmony export */   eventPaste: () => (/* binding */ eventPaste),
/* harmony export */   eventPause: () => (/* binding */ eventPause),
/* harmony export */   eventPlay: () => (/* binding */ eventPlay),
/* harmony export */   eventPlaying: () => (/* binding */ eventPlaying),
/* harmony export */   eventPointerCancel: () => (/* binding */ eventPointerCancel),
/* harmony export */   eventPointerDown: () => (/* binding */ eventPointerDown),
/* harmony export */   eventPointerEnter: () => (/* binding */ eventPointerEnter),
/* harmony export */   eventPointerLeave: () => (/* binding */ eventPointerLeave),
/* harmony export */   eventPointerLockChange: () => (/* binding */ eventPointerLockChange),
/* harmony export */   eventPointerLockError: () => (/* binding */ eventPointerLockError),
/* harmony export */   eventPointerMove: () => (/* binding */ eventPointerMove),
/* harmony export */   eventPointerOut: () => (/* binding */ eventPointerOut),
/* harmony export */   eventPointerOver: () => (/* binding */ eventPointerOver),
/* harmony export */   eventPointerUp: () => (/* binding */ eventPointerUp),
/* harmony export */   eventPopState: () => (/* binding */ eventPopState),
/* harmony export */   eventProgress: () => (/* binding */ eventProgress),
/* harmony export */   eventPush: () => (/* binding */ eventPush),
/* harmony export */   eventPushSubscriptionChange: () => (/* binding */ eventPushSubscriptionChange),
/* harmony export */   eventRateChange: () => (/* binding */ eventRateChange),
/* harmony export */   eventReadyStateChange: () => (/* binding */ eventReadyStateChange),
/* harmony export */   eventRepeatEvent: () => (/* binding */ eventRepeatEvent),
/* harmony export */   eventReset: () => (/* binding */ eventReset),
/* harmony export */   eventResize: () => (/* binding */ eventResize),
/* harmony export */   eventResourceTimingBufferFull: () => (/* binding */ eventResourceTimingBufferFull),
/* harmony export */   eventSVGAbort: () => (/* binding */ eventSVGAbort),
/* harmony export */   eventSVGError: () => (/* binding */ eventSVGError),
/* harmony export */   eventSVGLoad: () => (/* binding */ eventSVGLoad),
/* harmony export */   eventSVGResize: () => (/* binding */ eventSVGResize),
/* harmony export */   eventSVGScroll: () => (/* binding */ eventSVGScroll),
/* harmony export */   eventSVGUnload: () => (/* binding */ eventSVGUnload),
/* harmony export */   eventSVGZoom: () => (/* binding */ eventSVGZoom),
/* harmony export */   eventScroll: () => (/* binding */ eventScroll),
/* harmony export */   eventSeeked: () => (/* binding */ eventSeeked),
/* harmony export */   eventSeeking: () => (/* binding */ eventSeeking),
/* harmony export */   eventSelect: () => (/* binding */ eventSelect),
/* harmony export */   eventShow: () => (/* binding */ eventShow),
/* harmony export */   eventSlotChange: () => (/* binding */ eventSlotChange),
/* harmony export */   eventStalled: () => (/* binding */ eventStalled),
/* harmony export */   eventStart: () => (/* binding */ eventStart),
/* harmony export */   eventStorage: () => (/* binding */ eventStorage),
/* harmony export */   eventSubmit: () => (/* binding */ eventSubmit),
/* harmony export */   eventSuccess: () => (/* binding */ eventSuccess),
/* harmony export */   eventSuspend: () => (/* binding */ eventSuspend),
/* harmony export */   eventTimeOut: () => (/* binding */ eventTimeOut),
/* harmony export */   eventTimeUpdate: () => (/* binding */ eventTimeUpdate),
/* harmony export */   eventTouchCancel: () => (/* binding */ eventTouchCancel),
/* harmony export */   eventTouchEnd: () => (/* binding */ eventTouchEnd),
/* harmony export */   eventTouchMove: () => (/* binding */ eventTouchMove),
/* harmony export */   eventTouchStart: () => (/* binding */ eventTouchStart),
/* harmony export */   eventTransitionEnd: () => (/* binding */ eventTransitionEnd),
/* harmony export */   eventUnload: () => (/* binding */ eventUnload),
/* harmony export */   eventUpgradeNeeded: () => (/* binding */ eventUpgradeNeeded),
/* harmony export */   eventUserProximity: () => (/* binding */ eventUserProximity),
/* harmony export */   eventVersionChange: () => (/* binding */ eventVersionChange),
/* harmony export */   eventVisibilityChange: () => (/* binding */ eventVisibilityChange),
/* harmony export */   eventVolumeChange: () => (/* binding */ eventVolumeChange),
/* harmony export */   eventWaiting: () => (/* binding */ eventWaiting),
/* harmony export */   eventWheel: () => (/* binding */ eventWheel)
/* harmony export */ });
/**
 * This set of exported strings reference https://developer.mozilla.org/en-US/docs/Web/Events
 * and should include all non-deprecated and non-experimental Standard events
 */
const eventAbort = "abort";
const eventAfterPrint = "afterprint";
const eventAnimationCancel = "animationcancel";
const eventAnimationEnd = "animationend";
const eventAnimationIteration = "animationiteration";
const eventAnimationStart = "animationstart";
const eventAppInstalled = "appinstalled";
const eventBeforePrint = "beforeprint";
const eventBeforeUnload = "beforeunload";
const eventBeginEvent = "beginEvent";
const eventBlocked = "blocked";
const eventBlur = "blur";
const eventCanPlay = "canplay";
const eventCanPlayThrough = "canplaythrough";
const eventChange = "change";
const eventChargingChange = "chargingchange";
const eventChargingTimeChange = "chargingtimechange";
const eventClick = "click";
const eventClose = "close";
const eventComplete = "complete";
const eventCompositionEnd = "compositionend";
const eventCompositionStart = "compositionstart";
const eventCompositionUpdate = "compositionupdate";
const eventContextMenu = "contextmenu";
const eventCopy = "copy";
const eventCut = "cut";
const eventDblClick = "dblclick";
const eventDeviceChange = "devicechange";
const eventDeviceMotion = "devicemotion";
const eventDeviceOrientation = "deviceorientation";
const eventDischargingTimeChange = "dischargingtimechange";
const eventDrag = "drag";
const eventDragEnd = "dragend";
const eventDragEnter = "dragenter";
const eventDragLeave = "dragleave";
const eventDragOver = "dragover";
const eventDragStart = "dragstart";
const eventDrop = "drop";
const eventDurationChange = "durationchange";
const eventEmptied = "emptied";
const eventEnded = "ended";
const eventEndEvent = "endevent";
const eventError = "error";
const eventFocus = "focus";
const eventFocusIn = "focusin";
const eventFocusOut = "focusout";
const eventFullScreenChange = "fullscreenchange";
const eventFullScreenError = "fullscreenerror";
const eventGamePadConnected = "gamepadconnected";
const eventGamePadDisconnected = "gamepaddisconnected";
const eventGotPointerCapture = "gotpointercapture";
const eventHashChange = "hashchange";
const eventLostPointerCapture = "lostpointercapture";
const eventInput = "input";
const eventInvalid = "invalid";
const eventKeyDown = "keydown";
const eventKeyUp = "keyup";
const eventLevelChange = "levelchange";
const eventLoad = "load";
const eventLoadedData = "loadeddata";
const eventLoadedMetaData = "loadedmetadata";
const eventLoadEnd = "loadend";
const eventLoadStart = "loadstart";
const eventMessage = "message";
const eventMessageError = "messageerror";
const eventMouseDown = "mousedown";
const eventMouseEnter = "mouseenter";
const eventMouseLeave = "mouseleave";
const eventMouseMove = "mousemove";
const eventMouseOut = "mouseout";
const eventMouseOver = "mouseover";
const eventMouseUp = "mouseup";
const eventNotificationClick = "notificationclick";
const eventOffline = "offline";
const eventOnline = "online";
const eventOpen = "open";
const eventOrientationChange = "orientationchange";
const eventPageHide = "pagehide";
const eventPageShow = "pageshow";
const eventPaste = "paste";
const eventPause = "pause";
const eventPointerCancel = "pointercancel";
const eventPointerDown = "pointerdown";
const eventPointerEnter = "pointerenter";
const eventPointerLeave = "pointerleave";
const eventPointerLockChange = "pointerlockchange";
const eventPointerLockError = "pointerlockerror";
const eventPointerMove = "pointermove";
const eventPointerOut = "pointerout";
const eventPointerOver = "pointerover";
const eventPointerUp = "pointerup";
const eventPlay = "play";
const eventPlaying = "playing";
const eventPopState = "popstate";
const eventProgress = "progress";
const eventPush = "push";
const eventPushSubscriptionChange = "pushsubscriptionchange";
const eventRateChange = "ratechange";
const eventReadyStateChange = "readystatechange";
const eventRepeatEvent = "repeatevent";
const eventReset = "reset";
const eventResize = "resize";
const eventResourceTimingBufferFull = "resourcetimingbufferfull";
const eventScroll = "scroll";
const eventSeeked = "seeked";
const eventSeeking = "seeking";
const eventSelect = "select";
const eventShow = "show";
const eventSlotChange = "slotchange";
const eventStalled = "stalled";
const eventStart = "start";
const eventStorage = "storage";
const eventSubmit = "submit";
const eventSuccess = "success";
const eventSuspend = "suspend";
const eventSVGAbort = "SVGAbort";
const eventSVGError = "SVGError";
const eventSVGLoad = "SVGLoad";
const eventSVGResize = "SVGResize";
const eventSVGScroll = "SVGScroll";
const eventSVGUnload = "SVGUnload";
const eventSVGZoom = "SVGZoom";
const eventTimeOut = "timeout";
const eventTimeUpdate = "timeupdate";
const eventTouchCancel = "touchcancel";
const eventTouchEnd = "touchend";
const eventTouchMove = "touchmove";
const eventTouchStart = "touchstart";
const eventTransitionEnd = "transitionend";
const eventUnload = "unload";
const eventUpgradeNeeded = "upgradeneeded";
const eventUserProximity = "userproximity";
const eventVersionChange = "versionchange";
const eventVisibilityChange = "visibilitychange";
const eventVolumeChange = "volumechange";
const eventWaiting = "waiting";
const eventWheel = "wheel";


/***/ }),

/***/ "./node_modules/@microsoft/fast-web-utilities/dist/strings.js":
/*!********************************************************************!*\
  !*** ./node_modules/@microsoft/fast-web-utilities/dist/strings.js ***!
  \********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   format: () => (/* binding */ format),
/* harmony export */   isNullOrWhiteSpace: () => (/* binding */ isNullOrWhiteSpace),
/* harmony export */   pascalCase: () => (/* binding */ pascalCase),
/* harmony export */   spinalCase: () => (/* binding */ spinalCase),
/* harmony export */   startsWith: () => (/* binding */ startsWith),
/* harmony export */   uniqueId: () => (/* binding */ uniqueId)
/* harmony export */ });
let uniqueIdCounter = 0;
/**
 * Generates a unique ID based on incrementing a counter.
 */
function uniqueId(prefix = "") {
    return `${prefix}${uniqueIdCounter++}`;
}
/**
 * Builds a string from a format specifier and replacement parameters.
 */
function format(formatSpecifier, ...parameters) {
    return formatSpecifier.replace(/{(\d+)}/g, function (match, index) {
        if (index >= parameters.length) {
            return match;
        }
        const value = parameters[index];
        if (typeof value !== "number" && !value) {
            return "";
        }
        return value;
    });
}
/**
 * Check to see if one string starts with another
 */
function startsWith(stringToSearch, searchFor, position = 0) {
    if (!stringToSearch || !searchFor) {
        return false;
    }
    return stringToSearch.substr(position, searchFor.length) === searchFor;
}
/**
 * Determines if the specified string is undefined, null, empty, or whitespace.
 * True if the value is undefined, null, empty, or whitespace, otherwise false.
 */
function isNullOrWhiteSpace(value) {
    return !value || !value.trim();
}
/**
 * Converts a string to Pascal Case
 * where the first letter of each compound word is capitalized.
 */
function pascalCase(value) {
    let newValue = `${value}`
        .replace(new RegExp(/[-_]+/, "g"), " ")
        .replace(new RegExp(/[^\w\s]/, "g"), "")
        .replace(/^\s+|\s+$|\s+(?=\s)/g, "")
        .replace(new RegExp(/\s+(.)(\w*)/, "g"), ($1, $2, $3) => `${$2.toUpperCase() + $3.toLowerCase()}`)
        .replace(new RegExp(/\w/), s => s.toUpperCase());
    let firstLowerIdx = 0;
    for (let i = 0; i < newValue.length; i++) {
        const currChar = newValue.charAt(i);
        if (currChar == currChar.toLowerCase()) {
            firstLowerIdx = i;
            break;
        }
    }
    if (firstLowerIdx > 1) {
        newValue =
            `${newValue.charAt(0).toUpperCase()}${newValue
                .slice(1, firstLowerIdx - 1)
                .toLowerCase()}` + newValue.slice(firstLowerIdx - 1);
    }
    return newValue;
}
/**
 * converts a string from camelCase or pascalCase to spinal-case
 * which is an lowercase dash separated naming style.
 *
 * An example of spinal case: foo-bar-bat
 */
function spinalCase(value) {
    const valueWithLowerCaseFirstLetter = `${value
        .charAt(0)
        .toLowerCase()}${value.slice(1)}`;
    return valueWithLowerCaseFirstLetter.replace(/([A-Z]|[0-9])/g, function (match, group1) {
        return `-${group1.toLowerCase()}`;
    });
}


/***/ }),

/***/ "./node_modules/exenv-es6/dist/can-use-dom.js":
/*!****************************************************!*\
  !*** ./node_modules/exenv-es6/dist/can-use-dom.js ***!
  \****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   canUseDOM: () => (/* binding */ canUseDOM)
/* harmony export */ });
/**
 * Checks if the DOM is available to access and use
 */
function canUseDOM() {
    return !!(typeof window !== "undefined" && window.document && window.document.createElement);
}


/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidmVuZG9ycy1ub2RlX21vZHVsZXNfbWljcm9zb2Z0X2Zhc3QtZm91bmRhdGlvbl9kaXN0X2VzbV9pbmRleF9qcy42MGY3MzMxYmNkMjAzMGUzMzdmYS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQW1DO0FBQ3NDO0FBQ1E7QUFDN0I7QUFDTztBQUMzRDtBQUNBLDZCQUE2QixvREFBb0Q7QUFDakY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ08sNEJBQTRCLHdGQUFpQjtBQUNwRDtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIsOERBQThEO0FBQ3pGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaURBQVU7QUFDVixJQUFJLDZEQUFJO0FBQ1I7QUFDQTtBQUNBLG1CQUFtQiw0RUFBdUI7QUFDMUMsS0FBSztBQUNMO0FBQ0EsaURBQVU7QUFDVixJQUFJLDZEQUFJLEdBQUcsaUJBQWlCO0FBQzVCO0FBQ0EsaURBQVU7QUFDVixJQUFJLHlEQUFJO0FBQ1I7QUFDQSx1RUFBVyxnQkFBZ0IsNERBQVE7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ3ZFaUI7QUFDMEI7QUFDOUU7QUFDQSx5QkFBeUIsd0RBQXdEO0FBQ2pGO0FBQ0E7QUFDTyx1REFBdUQsNkRBQUk7QUFDbEUsdUJBQXVCLG9DQUFvQztBQUMzRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQixvQkFBb0I7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsNERBQUc7QUFDckIsaUNBQWlDLGdCQUFnQjtBQUNqRCxpQ0FBaUMsVUFBVTtBQUMzQyxzQkFBc0IsVUFBVTtBQUNoQyww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QkFBdUIseUJBQXlCOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQzFEL0U7QUFDNkI7QUFDb0I7QUFDSjtBQUN2QjtBQUNrQjtBQUMzRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTyw2QkFBNkIsd0ZBQWlCO0FBQ3JEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDLG9FQUFTO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQ0FBb0MscUVBQVk7QUFDaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2Q0FBNkMscUVBQVk7QUFDekQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNEQUFzRCxvRUFBUztBQUMvRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkNBQTZDLGdCQUFnQjtBQUM3RDtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFEQUFxRCxnQkFBZ0I7QUFDckU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0RBQWdELGdCQUFnQixNQUFNLGdCQUFnQjtBQUN0RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQ0FBMEMsZ0JBQWdCO0FBQzFEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkNBQTJDLGlCQUFpQjtBQUM1RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9DQUFvQyxzRUFBVyxpQkFBaUIsZUFBZTtBQUMvRSxvQ0FBb0Msc0VBQVc7QUFDL0M7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUNBQXVDLHNFQUFXO0FBQ2xELHVDQUF1QyxzRUFBVztBQUNsRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FB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RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2R0FBNkcsa0JBQWtCO0FBQy9ILGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQixvRUFBSztBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixxRUFBYztBQUNoQyxrQkFBa0IscUVBQWM7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEIscUVBQWM7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlEQUFVO0FBQ1YsSUFBSSw2REFBSSxHQUFHLDZDQUE2QztBQUN4RDtBQUNBLGlEQUFVO0FBQ1YsSUFBSSwrREFBVTtBQUNkO0FBQ0EsaURBQVU7QUFDVixJQUFJLDZEQUFJLEdBQUcsb0NBQW9DO0FBQy9DO0FBQ0EsaURBQVU7QUFDVixJQUFJLHlEQUFJO0FBQ1I7QUFDQSxpREFBVTtBQUNWLElBQUksNkRBQUksR0FBRyx1QkFBdUI7QUFDbEM7QUFDQSxpREFBVTtBQUNWLElBQUksK0RBQVU7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0EsaURBQVU7QUFDVixJQUFJLCtEQUFVO0FBQ2Q7QUFDQSxpREFBVTtBQUNWLElBQUksK0RBQVU7QUFDZDtBQUNBLHVFQUFXLHdCQUF3QixxRUFBb0I7QUFDdkQsdUVBQVcsV0FBVyw0REFBUTs7Ozs7Ozs7Ozs7Ozs7O0FDeGtCOUI7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNUNkQ7QUFDYjtBQUM4QjtBQUM5RTtBQUNBLHlCQUF5QixtREFBbUQ7QUFDNUU7QUFDQTtBQUNPLGtEQUFrRCw2REFBSTtBQUM3RDtBQUNBLHlCQUF5QixvQkFBb0I7QUFDN0Msd0JBQXdCLG9CQUFvQjtBQUM1QyxpQkFBaUIsNkJBQTZCLEVBQUUsbUNBQW1DLEVBQUUsZ0JBQWdCO0FBQ3JHLGlCQUFpQixZQUFZO0FBQzdCLG9CQUFvQixnQ0FBZ0M7QUFDcEQsa0JBQWtCLGtDQUFrQztBQUNwRCxxQkFBcUIscUNBQXFDO0FBQzFELG9CQUFvQixvQ0FBb0M7QUFDeEQ7QUFDQTtBQUNBLGNBQWMseUVBQWlCO0FBQy9CO0FBQ0E7QUFDQSw2Q0FBNkMsNENBQTRDO0FBQ3pGLHlDQUF5Qyx3QkFBd0I7QUFDakUscUNBQXFDLG9CQUFvQjtBQUN6RCxxQ0FBcUMsb0JBQW9CO0FBQ3pELHFDQUFxQyxvQkFBb0I7QUFDekQ7QUFDQTtBQUNBO0FBQ0EsbUNBQW1DLG1CQUFtQjtBQUN0RDtBQUNBO0FBQ0EsaUNBQWlDLGdCQUFnQjtBQUNqRCw4QkFBOEIsYUFBYTtBQUMzQyw4QkFBOEIsa0NBQWtDO0FBQ2hFLDhCQUE4QixrQ0FBa0M7QUFDaEUsc0JBQXNCLDREQUFHO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQjtBQUMxQjtBQUNBO0FBQ0E7QUFDQSxjQUFjLHVFQUFlO0FBQzdCO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixpQkFBaUI7QUFDbkM7QUFDQTtBQUNBLHlCQUF5QixnQkFBZ0I7QUFDekMsdUJBQXVCLGFBQWE7QUFDcEMsY0FBYyw0REFBRztBQUNqQjtBQUNBO0FBQ0Esa0JBQWtCLGdFQUFPO0FBQ3pCLFlBQVksd0RBQU87QUFDbkI7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDakU4QjtBQUNRO0FBQ0M7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDRko7QUFDOEI7QUFDNkQ7QUFDOUM7QUFDckI7QUFDOUI7QUFDN0Isb0NBQW9DLDZEQUFJO0FBQ3hDO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBDQUEwQyw2REFBSTtBQUM5QztBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPLDJCQUEyQix3RkFBaUI7QUFDbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLG9FQUFpQjtBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEIsdUVBQVk7QUFDMUMsOEJBQThCLHdFQUFhO0FBQzNDLDhCQUE4Qix1RUFBWTtBQUMxQyxtQ0FBbUM7QUFDbkM7QUFDQSwrQ0FBK0M7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQyx1RUFBWTtBQUM3QyxpQ0FBaUMsd0VBQWE7QUFDOUMsaUNBQWlDLHVFQUFZO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsb0VBQWlCO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQixvRUFBaUI7QUFDaEQ7QUFDQSwrQkFBK0Isb0VBQWlCO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLG1FQUFRO0FBQ3pCLGlCQUFpQix1RUFBWTtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLG9FQUFpQjtBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLG9FQUFTO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsb0VBQWlCO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsb0VBQWlCO0FBQ2xDLGlCQUFpQixvRUFBaUI7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpREFBVTtBQUNWLElBQUksNkRBQUksR0FBRyx3QkFBd0I7QUFDbkM7QUFDQSxpREFBVTtBQUNWLElBQUksNkRBQUksR0FBRywwQkFBMEI7QUFDckM7QUFDQSxpREFBVTtBQUNWLElBQUksK0RBQVU7QUFDZDtBQUNBLGlEQUFVO0FBQ1YsSUFBSSwrREFBVTtBQUNkOzs7Ozs7Ozs7Ozs7Ozs7OztBQ3BPK0M7QUFDL0M7QUFDQSxpQ0FBaUMsK0NBQStDO0FBQ2hGO0FBQ0E7QUFDQTtBQUNPO0FBQ1AsV0FBVyw2REFBSTtBQUNmO0FBQ0E7QUFDQSxvQkFBb0IsdUVBQXVFO0FBQzNGO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDdEJtQztBQUMwQztBQUM4QztBQUMzQztBQUN0QjtBQUMxRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPLDBCQUEwQix3RkFBaUI7QUFDbEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLG1FQUFnQjtBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkNBQTJDLG9FQUFlLDREQUE0RCxtQkFBbUI7QUFDekk7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEIsd0VBQWE7QUFDM0MsOEJBQThCLHVFQUFZO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQyx3RUFBYTtBQUM5QyxpQ0FBaUMsdUVBQVk7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLHVFQUFZO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsd0VBQWE7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixrRUFBTztBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLGlFQUFNO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLG1FQUFnQjtBQUM3QztBQUNBO0FBQ0EsbUNBQW1DLG1FQUFnQjtBQUNuRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlEQUFVO0FBQ1YsSUFBSSw2REFBSSxHQUFHLG9DQUFvQztBQUMvQztBQUNBLGlEQUFVO0FBQ1YsSUFBSSw2REFBSSxHQUFHLHVCQUF1QjtBQUNsQztBQUNBLGlEQUFVO0FBQ1YsSUFBSSwrREFBVTtBQUNkO0FBQ0EsaURBQVU7QUFDVixJQUFJLCtEQUFVO0FBQ2Q7QUFDQSxpREFBVTtBQUNWLElBQUksK0RBQVU7QUFDZDtBQUNBLGlEQUFVO0FBQ1YsSUFBSSwrREFBVTtBQUNkO0FBQ0EsaURBQVU7QUFDVixJQUFJLCtEQUFVO0FBQ2Q7QUFDQSxpREFBVTtBQUNWLElBQUksK0RBQVU7QUFDZDtBQUNBLGlEQUFVO0FBQ1YsSUFBSSwrREFBVTtBQUNkO0FBQ0EsaURBQVU7QUFDVixJQUFJLCtEQUFVO0FBQ2Q7QUFDQSxpREFBVTtBQUNWLElBQUksK0RBQVU7QUFDZDtBQUNBLGlEQUFVO0FBQ1YsSUFBSSwrREFBVTtBQUNkOzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUMxTTRFO0FBQ3pCO0FBQ25EO0FBQ0EsbUNBQW1DLDREQUFZO0FBQy9DLFdBQVcsNkRBQUk7QUFDZixPQUFPO0FBQ1AscUJBQXFCLCtDQUErQztBQUNwRSx1QkFBdUIsc0JBQXNCO0FBQzdDLG9CQUFvQiwyQkFBMkI7QUFDL0MsNkJBQTZCLE9BQU87QUFDcEMsU0FBUyxRQUFRO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQyw0REFBWTtBQUMvQyxXQUFXLDZEQUFJO0FBQ2YsT0FBTztBQUNQO0FBQ0EsdUJBQXVCLHNCQUFzQjtBQUM3Qyw2QkFBNkIsT0FBTztBQUNwQyxTQUFTLFFBQVE7QUFDakI7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDLDhDQUE4QztBQUMvRTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBLFdBQVcsNkRBQUk7QUFDZjtBQUNBO0FBQ0EscUJBQXFCLGdEQUFnRDtBQUNyRSx3Q0FBd0MsaUJBQWlCO0FBQ3pELDhDQUE4Qyx1QkFBdUI7QUFDckUsY0FBYyxpRUFBUTtBQUN0QjtBQUNBLGdCQUFnQixpRUFBUTtBQUN4QixLQUFLO0FBQ0w7QUFDQSxvQkFBb0IsZ0VBQU8sd0JBQXdCO0FBQ25EO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDOUNtQztBQUMrQztBQUMwRTtBQUM1RTtBQUNDO0FBQzlCO0FBQ25EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPLHVCQUF1Qix3RkFBaUI7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLHdFQUFxQjtBQUNuRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkNBQTZDLG1DQUFtQztBQUNoRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQixpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLHdEQUFHO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQyxnQkFBZ0IsRUFBRSxrQ0FBa0MsRUFBRSxNQUFNO0FBQzdGLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQ0FBc0Msb0VBQWUsNENBQTRDLG1CQUFtQjtBQUNwSDtBQUNBO0FBQ0E7QUFDQSw4QkFBOEIscUVBQVU7QUFDeEMsOEJBQThCLHVFQUFZO0FBQzFDLDhCQUE4Qix3RUFBYTtBQUMzQztBQUNBO0FBQ0Esc0NBQXNDLGlCQUFpQjtBQUN2RDtBQUNBO0FBQ0E7QUFDQSxRQUFRLHdEQUFHO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQ0FBaUMscUVBQVU7QUFDM0MsaUNBQWlDLHVFQUFZO0FBQzdDLGlDQUFpQyx3RUFBYTtBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIscUVBQVU7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsdUVBQVk7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsb0VBQVM7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1Q0FBdUMsdUJBQXVCO0FBQzlEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixzRUFBVztBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1Q0FBdUMsOEJBQThCO0FBQ3JFO0FBQ0E7QUFDQTtBQUNBLG9EQUFvRCx3RUFBcUI7QUFDekU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLGtFQUFPO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixpRUFBTTtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLHdEQUFHO0FBQ2Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9DQUFvQyx3RUFBcUI7QUFDekQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0NBQXdDLHdFQUFxQjtBQUM3RCxzQkFBc0IsbUVBQWdCO0FBQ3RDLHNCQUFzQixtRUFBZ0I7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQixNQUFNO0FBQ2pDO0FBQ0EsS0FBSztBQUNMO0FBQ0EsaURBQVU7QUFDVixJQUFJLDZEQUFJLEdBQUcsMENBQTBDO0FBQ3JEO0FBQ0EsaURBQVU7QUFDVixJQUFJLDZEQUFJLEdBQUcsOEJBQThCO0FBQ3pDO0FBQ0EsaURBQVU7QUFDVixJQUFJLDZEQUFJLEdBQUcsb0NBQW9DO0FBQy9DO0FBQ0EsaURBQVU7QUFDVixJQUFJLCtEQUFVO0FBQ2Q7QUFDQSxpREFBVTtBQUNWLElBQUksK0RBQVU7QUFDZDtBQUNBLGlEQUFVO0FBQ1YsSUFBSSwrREFBVTtBQUNkO0FBQ0EsaURBQVU7QUFDVixJQUFJLCtEQUFVO0FBQ2Q7QUFDQSxpREFBVTtBQUNWLElBQUksK0RBQVU7QUFDZDtBQUNBLGlEQUFVO0FBQ1YsSUFBSSwrREFBVTtBQUNkO0FBQ0EsaURBQVU7QUFDVixJQUFJLCtEQUFVO0FBQ2Q7QUFDQSxpREFBVTtBQUNWLElBQUksK0RBQVU7QUFDZDtBQUNBLGlEQUFVO0FBQ1YsSUFBSSwrREFBVTtBQUNkO0FBQ0EsaURBQVU7QUFDVixJQUFJLCtEQUFVO0FBQ2Q7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDdmJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUM5Qm1FO0FBQ2xCO0FBQ2pEO0FBQ0Esa0NBQWtDLDBEQUFXO0FBQzdDLFdBQVcsNkRBQUk7QUFDZixPQUFPO0FBQ1Asb0JBQW9CLE9BQU87QUFDM0IsNkJBQTZCLG9DQUFvQztBQUNqRSxtQ0FBbUMsMENBQTBDO0FBQzdFLFNBQVMsT0FBTztBQUNoQjtBQUNBO0FBQ0E7QUFDQSxpQ0FBaUMsMkNBQTJDO0FBQzVFO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBLGtDQUFrQywwREFBVztBQUM3QyxXQUFXLDZEQUFJO0FBQ2Y7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLGFBQWE7QUFDM0MsdUNBQXVDLGdCQUFnQjtBQUN2RCxjQUFjLGlFQUFRO0FBQ3RCO0FBQ0EsZ0JBQWdCLGlFQUFRO0FBQ3hCLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ25Dd0M7QUFDVDtBQUNhO0FBQ1Q7QUFDVTtBQUNUOzs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDTHFCO0FBQ1Y7QUFDL0M7QUFDQSxjQUFjLHNCQUFzQjtBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQixtREFBWTtBQUN2QyxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLHlDQUFFO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQixrRUFBYTtBQUNuQyx3Q0FBd0Msa0VBQWE7QUFDckQ7QUFDQSwwQkFBMEIsa0VBQWE7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNyRmdFO0FBQ2dCO0FBQ2pDO0FBQ2U7QUFDTTtBQUNwRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLHlDQUFFO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIseUNBQUU7QUFDNUI7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUMseUNBQUU7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIseUNBQUU7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQixtREFBWTtBQUMzQztBQUNBO0FBQ0EsS0FBSztBQUNMLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3Qiw0QkFBNEI7QUFDcEQsc0JBQXNCLE9BQU87QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnRUFBZ0Usd0ZBQWlCO0FBQ2pGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLHNFQUFXO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLDZFQUFxQjtBQUM3QjtBQUNBO0FBQ0EsOEJBQThCLDBFQUFxQiwwQ0FBMEMsaUJBQWlCLGlCQUFpQjtBQUMvSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDOU1tQztBQUNTO0FBQ0Y7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDRlA7QUFDZ0U7QUFDNUY7QUFDUDtBQUNBLDhCQUE4QixnRUFBVztBQUN6QztBQUNBO0FBQ0E7QUFDQSxRQUFRLHdEQUFHO0FBQ1g7QUFDQTtBQUNBLFFBQVEsd0RBQUc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4REFBOEQ7QUFDOUQseUNBQXlDLGtFQUFhO0FBQ3REO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhEQUE4RDtBQUM5RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLFFBQVE7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbURBQW1EO0FBQ25EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLCtEQUFVO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLHdEQUFHO0FBQ1g7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLFFBQVEsd0RBQUc7QUFDWDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixRQUFRO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtREFBbUQ7QUFDbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpREFBVTtBQUNWLElBQUksK0RBQVU7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLHdEQUFHO0FBQ1g7QUFDQTtBQUNBLFFBQVEsd0RBQUc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0Qix1Q0FBdUM7QUFDbkU7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLFFBQVE7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLFFBQVE7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQix3REFBRztBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsd0RBQUc7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxDQUFDOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUN0TmtDO0FBQ21GO0FBQ3JEO0FBQ0k7QUFDdUI7QUFDOUI7QUFDOUQ7QUFDQSxzQkFBc0I7QUFDdEI7QUFDQSw4QkFBOEIsaUVBQVk7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMENBQTBDLG9DQUFvQztBQUM5RSxpQ0FBaUMsdUJBQXVCO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5RUFBeUUsVUFBVSxpQ0FBaUMsU0FBUyxvQkFBb0IsUUFBUTtBQUN6SjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLHVFQUFjO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUNBQXVDLDhCQUE4QjtBQUNyRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsZUFBZTtBQUMzQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsZ0JBQWdCO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBLFFBQVEsOEVBQXFCO0FBQzdCO0FBQ0E7QUFDQSxRQUFRLDhFQUFxQjtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsK0RBQVU7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdGQUFnRiw0RUFBdUI7QUFDdkc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSwrREFBVTtBQUN0QjtBQUNBO0FBQ0E7QUFDQSxRQUFRLCtEQUFVO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBLFFBQVEsK0RBQVU7QUFDbEIsOEJBQThCLGdFQUFXO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYyx1RUFBYztBQUM1Qix5QkFBeUIsNkVBQWM7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsNkVBQWM7QUFDdkM7QUFDQSwrQ0FBK0MsdUVBQWM7QUFDN0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFDQUFxQyx1RUFBYztBQUNuRCxrREFBa0QsdUVBQWM7QUFDaEU7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSwrREFBVTtBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSwrREFBVTtBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxpRkFBZ0I7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlEQUFVO0FBQ1YsSUFBSSwrREFBVTtBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQywrQkFBK0I7QUFDL0Q7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FB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RUFBd0UsY0FBYztBQUN0RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNENBQTRDLFFBQVE7QUFDcEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QixRQUFRO0FBQy9CO0FB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O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0dBQWdHLFFBQVE7QUFDeEc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLCtEQUFVO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSx3REFBRztBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLHdEQUFHO0FBQ2Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSxpREFBaUQ7QUFDOUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQixtRUFBUTtBQUM3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QUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsOERBQThEO0FBQ2xGLG9CQUFvQixhQUFhO0FBQ2pDLG9CQUFvQix3QkFBd0I7QUFDNUM7QUFDQSxvQkFBb0IsUUFBUTtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpRkFBaUYsOENBQThDO0FBQy9IO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0VBQWtFLGVBQWU7QUFDakY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FB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QTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsc0VBQU87QUFDbkMsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsc0VBQU87QUFDbkMsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QixzRUFBTztBQUNuQyxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QixzRUFBTztBQUNuQyxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FB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QUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSwrREFBVTtBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsK0RBQVU7QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQ0FBK0Msa0JBQWtCO0FBQ2pFLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlFQUFpRTtBQUNqRSxrQ0FBa0MsUUFBUTtBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDLGtEQUFrRCxFQUFFLElBQUk7QUFDMUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtB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O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTywwQkFBMEIsdUZBQXlCO0FBQzFEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTLGlEQUFpRDtBQUMxRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksd0RBQUc7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QTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLCtEQUFVO0FBQ3ZDO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSw2QkFBNkIsK0RBQVU7QUFDdkM7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEdBQThHLHdEQUFPO0FBQ3JIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtB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QUNETTtBQUM2QjtBQUNLO0FBQ1o7QUFDdUI7QUFDekI7QUFDNUI7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ08sc0JBQXNCLHdGQUFpQjtBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0Msb0VBQVM7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtB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Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsU0FBUyxvREFBUztBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBEQUEwRCxjQUFjO0FBQ3hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQLFlBQVksb0RBQVM7QUFDckI7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ2xHUDtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDNUlQO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUCxjQUFjLE9BQU8sRUFBRSxrQkFBa0I7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQLHFDQUFxQyxNQUFNO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUCxzQkFBc0IsTUFBTTtBQUM1QjtBQUNBO0FBQ0E7QUFDQSxvRUFBb0Usb0NBQW9DO0FBQ3hHO0FBQ0E7QUFDQSxvQkFBb0IscUJBQXFCO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLGlDQUFpQyxFQUFFO0FBQ2xEO0FBQ0EsK0JBQStCO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1AsNkNBQTZDO0FBQzdDO0FBQ0EsdUJBQXVCLEVBQUUsZUFBZTtBQUN4QztBQUNBLG1CQUFtQixxQkFBcUI7QUFDeEMsS0FBSztBQUNMOzs7Ozs7Ozs7Ozs7Ozs7QUM5RUE7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vQGp1cHl0ZXJsYWIvYXBwbGljYXRpb24tdG9wLy4vbm9kZV9tb2R1bGVzL0BtaWNyb3NvZnQvZmFzdC1mb3VuZGF0aW9uL2Rpc3QvZXNtL2FjY29yZGlvbi1pdGVtL2FjY29yZGlvbi1pdGVtLmpzIiwid2VicGFjazovL0BqdXB5dGVybGFiL2FwcGxpY2F0aW9uLXRvcC8uL25vZGVfbW9kdWxlcy9AbWljcm9zb2Z0L2Zhc3QtZm91bmRhdGlvbi9kaXN0L2VzbS9hY2NvcmRpb24taXRlbS9hY2NvcmRpb24taXRlbS50ZW1wbGF0ZS5qcyIsIndlYnBhY2s6Ly9AanVweXRlcmxhYi9hcHBsaWNhdGlvbi10b3AvLi9ub2RlX21vZHVsZXMvQG1pY3Jvc29mdC9mYXN0LWZvdW5kYXRpb24vZGlzdC9lc20vYWNjb3JkaW9uLWl0ZW0vaW5kZXguanMiLCJ3ZWJwYWNrOi8vQGp1cHl0ZXJsYWIvYXBwbGljYXRpb24tdG9wLy4vbm9kZV9tb2R1bGVzL0BtaWNyb3NvZnQvZmFzdC1mb3VuZGF0aW9uL2Rpc3QvZXNtL2FjY29yZGlvbi9hY2NvcmRpb24uanMiLCJ3ZWJwYWNrOi8vQGp1cHl0ZXJsYWIvYXBwbGljYXRpb24tdG9wLy4vbm9kZV9tb2R1bGVzL0BtaWNyb3NvZnQvZmFzdC1mb3VuZGF0aW9uL2Rpc3QvZXNtL2FjY29yZGlvbi9hY2NvcmRpb24udGVtcGxhdGUuanMiLCJ3ZWJwYWNrOi8vQGp1cHl0ZXJsYWIvYXBwbGljYXRpb24tdG9wLy4vbm9kZV9tb2R1bGVzL0BtaWNyb3NvZnQvZmFzdC1mb3VuZGF0aW9uL2Rpc3QvZXNtL2FjY29yZGlvbi9pbmRleC5qcyIsIndlYnBhY2s6Ly9AanVweXRlcmxhYi9hcHBsaWNhdGlvbi10b3AvLi9ub2RlX21vZHVsZXMvQG1pY3Jvc29mdC9mYXN0LWZvdW5kYXRpb24vZGlzdC9lc20vYW5jaG9yL2FuY2hvci5qcyIsIndlYnBhY2s6Ly9AanVweXRlcmxhYi9hcHBsaWNhdGlvbi10b3AvLi9ub2RlX21vZHVsZXMvQG1pY3Jvc29mdC9mYXN0LWZvdW5kYXRpb24vZGlzdC9lc20vYW5jaG9yL2FuY2hvci50ZW1wbGF0ZS5qcyIsIndlYnBhY2s6Ly9AanVweXRlcmxhYi9hcHBsaWNhdGlvbi10b3AvLi9ub2RlX21vZHVsZXMvQG1pY3Jvc29mdC9mYXN0LWZvdW5kYXRpb24vZGlzdC9lc20vYW5jaG9yL2luZGV4LmpzIiwid2VicGFjazovL0BqdXB5dGVybGFiL2FwcGxpY2F0aW9uLXRvcC8uL25vZGVfbW9kdWxlcy9AbWljcm9zb2Z0L2Zhc3QtZm91bmRhdGlvbi9kaXN0L2VzbS9hbmNob3JlZC1yZWdpb24vYW5jaG9yZWQtcmVnaW9uLWNvbmZpZy5qcyIsIndlYnBhY2s6Ly9AanVweXRlcmxhYi9hcHBsaWNhdGlvbi10b3AvLi9ub2RlX21vZHVsZXMvQG1pY3Jvc29mdC9mYXN0LWZvdW5kYXRpb24vZGlzdC9lc20vYW5jaG9yZWQtcmVnaW9uL2FuY2hvcmVkLXJlZ2lvbi5qcyIsIndlYnBhY2s6Ly9AanVweXRlcmxhYi9hcHBsaWNhdGlvbi10b3AvLi9ub2RlX21vZHVsZXMvQG1pY3Jvc29mdC9mYXN0LWZvdW5kYXRpb24vZGlzdC9lc20vYW5jaG9yZWQtcmVnaW9uL2FuY2hvcmVkLXJlZ2lvbi50ZW1wbGF0ZS5qcyIsIndlYnBhY2s6Ly9AanVweXRlcmxhYi9hcHBsaWNhdGlvbi10b3AvLi9ub2RlX21vZHVsZXMvQG1pY3Jvc29mdC9mYXN0LWZvdW5kYXRpb24vZGlzdC9lc20vYW5jaG9yZWQtcmVnaW9uL2luZGV4LmpzIiwid2VicGFjazovL0BqdXB5dGVybGFiL2FwcGxpY2F0aW9uLXRvcC8uL25vZGVfbW9kdWxlcy9AbWljcm9zb2Z0L2Zhc3QtZm91bmRhdGlvbi9kaXN0L2VzbS9hdmF0YXIvYXZhdGFyLmpzIiwid2VicGFjazovL0BqdXB5dGVybGFiL2FwcGxpY2F0aW9uLXRvcC8uL25vZGVfbW9kdWxlcy9AbWljcm9zb2Z0L2Zhc3QtZm91bmRhdGlvbi9kaXN0L2VzbS9hdmF0YXIvYXZhdGFyLnRlbXBsYXRlLmpzIiwid2VicGFjazovL0BqdXB5dGVybGFiL2FwcGxpY2F0aW9uLXRvcC8uL25vZGVfbW9kdWxlcy9AbWljcm9zb2Z0L2Zhc3QtZm91bmRhdGlvbi9kaXN0L2VzbS9hdmF0YXIvaW5kZXguanMiLCJ3ZWJwYWNrOi8vQGp1cHl0ZXJsYWIvYXBwbGljYXRpb24tdG9wLy4vbm9kZV9tb2R1bGVzL0BtaWNyb3NvZnQvZmFzdC1mb3VuZGF0aW9uL2Rpc3QvZXNtL2JhZGdlL2JhZGdlLmpzIiwid2VicGFjazovL0BqdXB5dGVybGFiL2FwcGxpY2F0aW9uLXRvcC8uL25vZGVfbW9kdWxlcy9AbWljcm9zb2Z0L2Zhc3QtZm91bmRhdGlvbi9kaXN0L2VzbS9iYWRnZS9iYWRnZS50ZW1wbGF0ZS5qcyIsIndlYnBhY2s6Ly9AanVweXRlcmxhYi9hcHBsaWNhdGlvbi10b3AvLi9ub2RlX21vZHVsZXMvQG1pY3Jvc29mdC9mYXN0LWZvdW5kYXRpb24vZGlzdC9lc20vYmFkZ2UvaW5kZXguanMiLCJ3ZWJwYWNrOi8vQGp1cHl0ZXJsYWIvYXBwbGljYXRpb24tdG9wLy4vbm9kZV9tb2R1bGVzL0BtaWNyb3NvZnQvZmFzdC1mb3VuZGF0aW9uL2Rpc3QvZXNtL2JyZWFkY3J1bWItaXRlbS9icmVhZGNydW1iLWl0ZW0uanMiLCJ3ZWJwYWNrOi8vQGp1cHl0ZXJsYWIvYXBwbGljYXRpb24tdG9wLy4vbm9kZV9tb2R1bGVzL0BtaWNyb3NvZnQvZmFzdC1mb3VuZGF0aW9uL2Rpc3QvZXNtL2JyZWFkY3J1bWItaXRlbS9icmVhZGNydW1iLWl0ZW0udGVtcGxhdGUuanMiLCJ3ZWJwYWNrOi8vQGp1cHl0ZXJsYWIvYXBwbGljYXRpb24tdG9wLy4vbm9kZV9tb2R1bGVzL0BtaWNyb3NvZnQvZmFzdC1mb3VuZGF0aW9uL2Rpc3QvZXNtL2JyZWFkY3J1bWItaXRlbS9pbmRleC5qcyIsIndlYnBhY2s6Ly9AanVweXRlcmxhYi9hcHBsaWNhdGlvbi10b3AvLi9ub2RlX21vZHVsZXMvQG1pY3Jvc29mdC9mYXN0LWZvdW5kYXRpb24vZGlzdC9lc20vYnJlYWRjcnVtYi9icmVhZGNydW1iLmpzIiwid2VicGFjazovL0BqdXB5dGVybGFiL2FwcGxpY2F0aW9uLXRvcC8uL25vZGVfbW9kdWxlcy9AbWljcm9zb2Z0L2Zhc3QtZm91bmRhdGlvbi9kaXN0L2VzbS9icmVhZGNydW1iL2JyZWFkY3J1bWIudGVtcGxhdGUuanMiLCJ3ZWJwYWNrOi8vQGp1cHl0ZXJsYWIvYXBwbGljYXRpb24tdG9wLy4vbm9kZV9tb2R1bGVzL0BtaWNyb3NvZnQvZmFzdC1mb3VuZGF0aW9uL2Rpc3QvZXNtL2JyZWFkY3J1bWIvaW5kZXguanMiLCJ3ZWJwYWNrOi8vQGp1cHl0ZXJsYWIvYXBwbGljYXRpb24tdG9wLy4vbm9kZV9tb2R1bGVzL0BtaWNyb3NvZnQvZmFzdC1mb3VuZGF0aW9uL2Rpc3QvZXNtL2J1dHRvbi9idXR0b24uZm9ybS1hc3NvY2lhdGVkLmpzIiwid2VicGFjazovL0BqdXB5dGVybGFiL2FwcGxpY2F0aW9uLXRvcC8uL25vZGVfbW9kdWxlcy9AbWljcm9zb2Z0L2Zhc3QtZm91bmRhdGlvbi9kaXN0L2VzbS9idXR0b24vYnV0dG9uLmpzIiwid2VicGFjazovL0BqdXB5dGVybGFiL2FwcGxpY2F0aW9uLXRvcC8uL25vZGVfbW9kdWxlcy9AbWljcm9zb2Z0L2Zhc3QtZm91bmRhdGlvbi9kaXN0L2VzbS9idXR0b24vYnV0dG9uLnRlbXBsYXRlLmpzIiwid2VicGFjazovL0BqdXB5dGVybGFiL2FwcGxpY2F0aW9uLXRvcC8uL25vZGVfbW9kdWxlcy9AbWljcm9zb2Z0L2Zhc3QtZm91bmRhdGlvbi9kaXN0L2VzbS9idXR0b24vaW5kZXguanMiLCJ3ZWJwYWNrOi8vQGp1cHl0ZXJsYWIvYXBwbGljYXRpb24tdG9wLy4vbm9kZV9tb2R1bGVzL0BtaWNyb3NvZnQvZmFzdC1mb3VuZGF0aW9uL2Rpc3QvZXNtL2NhbGVuZGFyL2NhbGVuZGFyLmpzIiwid2VicGFjazovL0BqdXB5dGVybGFiL2FwcGxpY2F0aW9uLXRvcC8uL25vZGVfbW9kdWxlcy9AbWljcm9zb2Z0L2Zhc3QtZm91bmRhdGlvbi9kaXN0L2VzbS9jYWxlbmRhci9jYWxlbmRhci50ZW1wbGF0ZS5qcyIsIndlYnBhY2s6Ly9AanVweXRlcmxhYi9hcHBsaWNhdGlvbi10b3AvLi9ub2RlX21vZHVsZXMvQG1pY3Jvc29mdC9mYXN0LWZvdW5kYXRpb24vZGlzdC9lc20vY2FsZW5kYXIvZGF0ZS1mb3JtYXR0ZXIuanMiLCJ3ZWJwYWNrOi8vQGp1cHl0ZXJsYWIvYXBwbGljYXRpb24tdG9wLy4vbm9kZV9tb2R1bGVzL0BtaWNyb3NvZnQvZmFzdC1mb3VuZGF0aW9uL2Rpc3QvZXNtL2NhbGVuZGFyL2luZGV4LmpzIiwid2VicGFjazovL0BqdXB5dGVybGFiL2FwcGxpY2F0aW9uLXRvcC8uL25vZGVfbW9kdWxlcy9AbWljcm9zb2Z0L2Zhc3QtZm91bmRhdGlvbi9kaXN0L2VzbS9jYXJkL2NhcmQuanMiLCJ3ZWJwYWNrOi8vQGp1cHl0ZXJsYWIvYXBwbGljYXRpb24tdG9wLy4vbm9kZV9tb2R1bGVzL0BtaWNyb3NvZnQvZmFzdC1mb3VuZGF0aW9uL2Rpc3QvZXNtL2NhcmQvY2FyZC50ZW1wbGF0ZS5qcyIsIndlYnBhY2s6Ly9AanVweXRlcmxhYi9hcHBsaWNhdGlvbi10b3AvLi9ub2RlX21vZHVsZXMvQG1pY3Jvc29mdC9mYXN0LWZvdW5kYXRpb24vZGlzdC9lc20vY2FyZC9pbmRleC5qcyIsIndlYnBhY2s6Ly9AanVweXRlcmxhYi9hcHBsaWNhdGlvbi10b3AvLi9ub2RlX21vZHVsZXMvQG1pY3Jvc29mdC9mYXN0LWZvdW5kYXRpb24vZGlzdC9lc20vY2hlY2tib3gvY2hlY2tib3guZm9ybS1hc3NvY2lhdGVkLmpzIiwid2VicGFjazovL0BqdXB5dGVybGFiL2FwcGxpY2F0aW9uLXRvcC8uL25vZGVfbW9kdWxlcy9AbWljcm9zb2Z0L2Zhc3QtZm91bmRhdGlvbi9kaXN0L2VzbS9jaGVja2JveC9jaGVja2JveC5qcyIsIndlYnBhY2s6Ly9AanVweXRlcmxhYi9hcHBsaWNhdGlvbi10b3AvLi9ub2RlX21vZHVsZXMvQG1pY3Jvc29mdC9mYXN0LWZvdW5kYXRpb24vZGlzdC9lc20vY2hlY2tib3gvY2hlY2tib3gudGVtcGxhdGUuanMiLCJ3ZWJwYWNrOi8vQGp1cHl0ZXJsYWIvYXBwbGljYXRpb24tdG9wLy4vbm9kZV9tb2R1bGVzL0BtaWNyb3NvZnQvZmFzdC1mb3VuZGF0aW9uL2Rpc3QvZXNtL2NoZWNrYm94L2luZGV4LmpzIiwid2VicGFjazovL0BqdXB5dGVybGFiL2FwcGxpY2F0aW9uLXRvcC8uL25vZGVfbW9kdWxlcy9AbWljcm9zb2Z0L2Zhc3QtZm91bmRhdGlvbi9kaXN0L2VzbS9jb21ib2JveC9jb21ib2JveC5mb3JtLWFzc29jaWF0ZWQuanMiLCJ3ZWJwYWNrOi8vQGp1cHl0ZXJsYWIvYXBwbGljYXRpb24tdG9wLy4vbm9kZV9tb2R1bGVzL0BtaWNyb3NvZnQvZmFzdC1mb3VuZGF0aW9uL2Rpc3QvZXNtL2NvbWJvYm94L2NvbWJvYm94LmpzIiwid2VicGFjazovL0BqdXB5dGVybGFiL2FwcGxpY2F0aW9uLXRvcC8uL25vZGVfbW9kdWxlcy9AbWljcm9zb2Z0L2Zhc3QtZm91bmRhdGlvbi9kaXN0L2VzbS9jb21ib2JveC9jb21ib2JveC5vcHRpb25zLmpzIiwid2VicGFjazovL0BqdXB5dGVybGFiL2FwcGxpY2F0aW9uLXRvcC8uL25vZGVfbW9kdWxlcy9AbWljcm9zb2Z0L2Zhc3QtZm91bmRhdGlvbi9kaXN0L2VzbS9jb21ib2JveC9jb21ib2JveC50ZW1wbGF0ZS5qcyIsIndlYnBhY2s6Ly9AanVweXRlcmxhYi9hcHBsaWNhdGlvbi10b3AvLi9ub2RlX21vZHVsZXMvQG1pY3Jvc29mdC9mYXN0LWZvdW5kYXRpb24vZGlzdC9lc20vY29tYm9ib3gvaW5kZXguanMiLCJ3ZWJwYWNrOi8vQGp1cHl0ZXJsYWIvYXBwbGljYXRpb24tdG9wLy4vbm9kZV9tb2R1bGVzL0BtaWNyb3NvZnQvZmFzdC1mb3VuZGF0aW9uL2Rpc3QvZXNtL2RhdGEtZ3JpZC9kYXRhLWdyaWQtY2VsbC5qcyIsIndlYnBhY2s6Ly9AanVweXRlcmxhYi9hcHBsaWNhdGlvbi10b3AvLi9ub2RlX21vZHVsZXMvQG1pY3Jvc29mdC9mYXN0LWZvdW5kYXRpb24vZGlzdC9lc20vZGF0YS1ncmlkL2RhdGEtZ3JpZC1jZWxsLnRlbXBsYXRlLmpzIiwid2VicGFjazovL0BqdXB5dGVybGFiL2FwcGxpY2F0aW9uLXRvcC8uL25vZGVfbW9kdWxlcy9AbWljcm9zb2Z0L2Zhc3QtZm91bmRhdGlvbi9kaXN0L2VzbS9kYXRhLWdyaWQvZGF0YS1ncmlkLXJvdy5qcyIsIndlYnBhY2s6Ly9AanVweXRlcmxhYi9hcHBsaWNhdGlvbi10b3AvLi9ub2RlX21vZHVsZXMvQG1pY3Jvc29mdC9mYXN0LWZvdW5kYXRpb24vZGlzdC9lc20vZGF0YS1ncmlkL2RhdGEtZ3JpZC1yb3cudGVtcGxhdGUuanMiLCJ3ZWJwYWNrOi8vQGp1cHl0ZXJsYWIvYXBwbGljYXRpb24tdG9wLy4vbm9kZV9tb2R1bGVzL0BtaWNyb3NvZnQvZmFzdC1mb3VuZGF0aW9uL2Rpc3QvZXNtL2RhdGEtZ3JpZC9kYXRhLWdyaWQuanMiLCJ3ZWJwYWNrOi8vQGp1cHl0ZXJsYWIvYXBwbGljYXRpb24tdG9wLy4vbm9kZV9tb2R1bGVzL0BtaWNyb3NvZnQvZmFzdC1mb3VuZGF0aW9uL2Rpc3QvZXNtL2RhdGEtZ3JpZC9kYXRhLWdyaWQub3B0aW9ucy5qcyIsIndlYnBhY2s6Ly9AanVweXRlcmxhYi9hcHBsaWNhdGlvbi10b3AvLi9ub2RlX21vZHVsZXMvQG1pY3Jvc29mdC9mYXN0LWZvdW5kYXRpb24vZGlzdC9lc20vZGF0YS1ncmlkL2RhdGEtZ3JpZC50ZW1wbGF0ZS5qcyIsIndlYnBhY2s6Ly9AanVweXRlcmxhYi9hcHBsaWNhdGlvbi10b3AvLi9ub2RlX21vZHVsZXMvQG1pY3Jvc29mdC9mYXN0LWZvdW5kYXRpb24vZGlzdC9lc20vZGF0YS1ncmlkL2luZGV4LmpzIiwid2VicGFjazovL0BqdXB5dGVybGFiL2FwcGxpY2F0aW9uLXRvcC8uL25vZGVfbW9kdWxlcy9AbWljcm9zb2Z0L2Zhc3QtZm91bmRhdGlvbi9kaXN0L2VzbS9kZXNpZ24tc3lzdGVtL2NvbXBvbmVudC1wcmVzZW50YXRpb24uanMiLCJ3ZWJwYWNrOi8vQGp1cHl0ZXJsYWIvYXBwbGljYXRpb24tdG9wLy4vbm9kZV9tb2R1bGVzL0BtaWNyb3NvZnQvZmFzdC1mb3VuZGF0aW9uL2Rpc3QvZXNtL2Rlc2lnbi1zeXN0ZW0vZGVzaWduLXN5c3RlbS5qcyIsIndlYnBhY2s6Ly9AanVweXRlcmxhYi9hcHBsaWNhdGlvbi10b3AvLi9ub2RlX21vZHVsZXMvQG1pY3Jvc29mdC9mYXN0LWZvdW5kYXRpb24vZGlzdC9lc20vZGVzaWduLXN5c3RlbS9pbmRleC5qcyIsIndlYnBhY2s6Ly9AanVweXRlcmxhYi9hcHBsaWNhdGlvbi10b3AvLi9ub2RlX21vZHVsZXMvQG1pY3Jvc29mdC9mYXN0LWZvdW5kYXRpb24vZGlzdC9lc20vZGVzaWduLXRva2VuL2N1c3RvbS1wcm9wZXJ0eS1tYW5hZ2VyLmpzIiwid2VicGFjazovL0BqdXB5dGVybGFiL2FwcGxpY2F0aW9uLXRvcC8uL25vZGVfbW9kdWxlcy9AbWljcm9zb2Z0L2Zhc3QtZm91bmRhdGlvbi9kaXN0L2VzbS9kZXNpZ24tdG9rZW4vZGVzaWduLXRva2VuLmpzIiwid2VicGFjazovL0BqdXB5dGVybGFiL2FwcGxpY2F0aW9uLXRvcC8uL25vZGVfbW9kdWxlcy9AbWljcm9zb2Z0L2Zhc3QtZm91bmRhdGlvbi9kaXN0L2VzbS9kaS9kaS5qcyIsIndlYnBhY2s6Ly9AanVweXRlcmxhYi9hcHBsaWNhdGlvbi10b3AvLi9ub2RlX21vZHVsZXMvQG1pY3Jvc29mdC9mYXN0LWZvdW5kYXRpb24vZGlzdC9lc20vZGkvaW5kZXguanMiLCJ3ZWJwYWNrOi8vQGp1cHl0ZXJsYWIvYXBwbGljYXRpb24tdG9wLy4vbm9kZV9tb2R1bGVzL0BtaWNyb3NvZnQvZmFzdC1mb3VuZGF0aW9uL2Rpc3QvZXNtL2RpYWxvZy9kaWFsb2cuanMiLCJ3ZWJwYWNrOi8vQGp1cHl0ZXJsYWIvYXBwbGljYXRpb24tdG9wLy4vbm9kZV9tb2R1bGVzL0BtaWNyb3NvZnQvZmFzdC1mb3VuZGF0aW9uL2Rpc3QvZXNtL2RpYWxvZy9kaWFsb2cudGVtcGxhdGUuanMiLCJ3ZWJwYWNrOi8vQGp1cHl0ZXJsYWIvYXBwbGljYXRpb24tdG9wLy4vbm9kZV9tb2R1bGVzL0BtaWNyb3NvZnQvZmFzdC1mb3VuZGF0aW9uL2Rpc3QvZXNtL2RpYWxvZy9pbmRleC5qcyIsIndlYnBhY2s6Ly9AanVweXRlcmxhYi9hcHBsaWNhdGlvbi10b3AvLi9ub2RlX21vZHVsZXMvQG1pY3Jvc29mdC9mYXN0LWZvdW5kYXRpb24vZGlzdC9lc20vZGlyZWN0aXZlcy9yZWZsZWN0LWF0dHJpYnV0ZXMuanMiLCJ3ZWJwYWNrOi8vQGp1cHl0ZXJsYWIvYXBwbGljYXRpb24tdG9wLy4vbm9kZV9tb2R1bGVzL0BtaWNyb3NvZnQvZmFzdC1mb3VuZGF0aW9uL2Rpc3QvZXNtL2Rpc2Nsb3N1cmUvZGlzY2xvc3VyZS5qcyIsIndlYnBhY2s6Ly9AanVweXRlcmxhYi9hcHBsaWNhdGlvbi10b3AvLi9ub2RlX21vZHVsZXMvQG1pY3Jvc29mdC9mYXN0LWZvdW5kYXRpb24vZGlzdC9lc20vZGlzY2xvc3VyZS9kaXNjbG9zdXJlLnRlbXBsYXRlLmpzIiwid2VicGFjazovL0BqdXB5dGVybGFiL2FwcGxpY2F0aW9uLXRvcC8uL25vZGVfbW9kdWxlcy9AbWljcm9zb2Z0L2Zhc3QtZm91bmRhdGlvbi9kaXN0L2VzbS9kaXNjbG9zdXJlL2luZGV4LmpzIiwid2VicGFjazovL0BqdXB5dGVybGFiL2FwcGxpY2F0aW9uLXRvcC8uL25vZGVfbW9kdWxlcy9AbWljcm9zb2Z0L2Zhc3QtZm91bmRhdGlvbi9kaXN0L2VzbS9kaXZpZGVyL2RpdmlkZXIuanMiLCJ3ZWJwYWNrOi8vQGp1cHl0ZXJsYWIvYXBwbGljYXRpb24tdG9wLy4vbm9kZV9tb2R1bGVzL0BtaWNyb3NvZnQvZmFzdC1mb3VuZGF0aW9uL2Rpc3QvZXNtL2RpdmlkZXIvZGl2aWRlci5vcHRpb25zLmpzIiwid2VicGFjazovL0BqdXB5dGVybGFiL2FwcGxpY2F0aW9uLXRvcC8uL25vZGVfbW9kdWxlcy9AbWljcm9zb2Z0L2Zhc3QtZm91bmRhdGlvbi9kaXN0L2VzbS9kaXZpZGVyL2RpdmlkZXIudGVtcGxhdGUuanMiLCJ3ZWJwYWNrOi8vQGp1cHl0ZXJsYWIvYXBwbGljYXRpb24tdG9wLy4vbm9kZV9tb2R1bGVzL0BtaWNyb3NvZnQvZmFzdC1mb3VuZGF0aW9uL2Rpc3QvZXNtL2RpdmlkZXIvaW5kZXguanMiLCJ3ZWJwYWNrOi8vQGp1cHl0ZXJsYWIvYXBwbGljYXRpb24tdG9wLy4vbm9kZV9tb2R1bGVzL0BtaWNyb3NvZnQvZmFzdC1mb3VuZGF0aW9uL2Rpc3QvZXNtL2ZsaXBwZXIvZmxpcHBlci5qcyIsIndlYnBhY2s6Ly9AanVweXRlcmxhYi9hcHBsaWNhdGlvbi10b3AvLi9ub2RlX21vZHVsZXMvQG1pY3Jvc29mdC9mYXN0LWZvdW5kYXRpb24vZGlzdC9lc20vZmxpcHBlci9mbGlwcGVyLm9wdGlvbnMuanMiLCJ3ZWJwYWNrOi8vQGp1cHl0ZXJsYWIvYXBwbGljYXRpb24tdG9wLy4vbm9kZV9tb2R1bGVzL0BtaWNyb3NvZnQvZmFzdC1mb3VuZGF0aW9uL2Rpc3QvZXNtL2ZsaXBwZXIvZmxpcHBlci50ZW1wbGF0ZS5qcyIsIndlYnBhY2s6Ly9AanVweXRlcmxhYi9hcHBsaWNhdGlvbi10b3AvLi9ub2RlX21vZHVsZXMvQG1pY3Jvc29mdC9mYXN0LWZvdW5kYXRpb24vZGlzdC9lc20vZmxpcHBlci9pbmRleC5qcyIsIndlYnBhY2s6Ly9AanVweXRlcmxhYi9hcHBsaWNhdGlvbi10b3AvLi9ub2RlX21vZHVsZXMvQG1pY3Jvc29mdC9mYXN0LWZvdW5kYXRpb24vZGlzdC9lc20vZm9ybS1hc3NvY2lhdGVkL2Zvcm0tYXNzb2NpYXRlZC5qcyIsIndlYnBhY2s6Ly9AanVweXRlcmxhYi9hcHBsaWNhdGlvbi10b3AvLi9ub2RlX21vZHVsZXMvQG1pY3Jvc29mdC9mYXN0LWZvdW5kYXRpb24vZGlzdC9lc20vZm9ybS1hc3NvY2lhdGVkL2luZGV4LmpzIiwid2VicGFjazovL0BqdXB5dGVybGFiL2FwcGxpY2F0aW9uLXRvcC8uL25vZGVfbW9kdWxlcy9AbWljcm9zb2Z0L2Zhc3QtZm91bmRhdGlvbi9kaXN0L2VzbS9mb3VuZGF0aW9uLWVsZW1lbnQvZm91bmRhdGlvbi1lbGVtZW50LmpzIiwid2VicGFjazovL0BqdXB5dGVybGFiL2FwcGxpY2F0aW9uLXRvcC8uL25vZGVfbW9kdWxlcy9AbWljcm9zb2Z0L2Zhc3QtZm91bmRhdGlvbi9kaXN0L2VzbS9mb3VuZGF0aW9uLWVsZW1lbnQvaW5kZXguanMiLCJ3ZWJwYWNrOi8vQGp1cHl0ZXJsYWIvYXBwbGljYXRpb24tdG9wLy4vbm9kZV9tb2R1bGVzL0BtaWNyb3NvZnQvZmFzdC1mb3VuZGF0aW9uL2Rpc3QvZXNtL2hvcml6b250YWwtc2Nyb2xsL2hvcml6b250YWwtc2Nyb2xsLmpzIiwid2VicGFjazovL0BqdXB5dGVybGFiL2FwcGxpY2F0aW9uLXRvcC8uL25vZGVfbW9kdWxlcy9AbWljcm9zb2Z0L2Zhc3QtZm91bmRhdGlvbi9kaXN0L2VzbS9ob3Jpem9udGFsLXNjcm9sbC9ob3Jpem9udGFsLXNjcm9sbC50ZW1wbGF0ZS5qcyIsIndlYnBhY2s6Ly9AanVweXRlcmxhYi9hcHBsaWNhdGlvbi10b3AvLi9ub2RlX21vZHVsZXMvQG1pY3Jvc29mdC9mYXN0LWZvdW5kYXRpb24vZGlzdC9lc20vaG9yaXpvbnRhbC1zY3JvbGwvaW5kZXguanMiLCJ3ZWJwYWNrOi8vQGp1cHl0ZXJsYWIvYXBwbGljYXRpb24tdG9wLy4vbm9kZV9tb2R1bGVzL0BtaWNyb3NvZnQvZmFzdC1mb3VuZGF0aW9uL2Rpc3QvZXNtL2luZGV4LmpzIiwid2VicGFjazovL0BqdXB5dGVybGFiL2FwcGxpY2F0aW9uLXRvcC8uL25vZGVfbW9kdWxlcy9AbWljcm9zb2Z0L2Zhc3QtZm91bmRhdGlvbi9kaXN0L2VzbS9saXN0Ym94LW9wdGlvbi9pbmRleC5qcyIsIndlYnBhY2s6Ly9AanVweXRlcmxhYi9hcHBsaWNhdGlvbi10b3AvLi9ub2RlX21vZHVsZXMvQG1pY3Jvc29mdC9mYXN0LWZvdW5kYXRpb24vZGlzdC9lc20vbGlzdGJveC1vcHRpb24vbGlzdGJveC1vcHRpb24uanMiLCJ3ZWJwYWNrOi8vQGp1cHl0ZXJsYWIvYXBwbGljYXRpb24tdG9wLy4vbm9kZV9tb2R1bGVzL0BtaWNyb3NvZnQvZmFzdC1mb3VuZGF0aW9uL2Rpc3QvZXNtL2xpc3Rib3gtb3B0aW9uL2xpc3Rib3gtb3B0aW9uLnRlbXBsYXRlLmpzIiwid2VicGFjazovL0BqdXB5dGVybGFiL2FwcGxpY2F0aW9uLXRvcC8uL25vZGVfbW9kdWxlcy9AbWljcm9zb2Z0L2Zhc3QtZm91bmRhdGlvbi9kaXN0L2VzbS9saXN0Ym94L2luZGV4LmpzIiwid2VicGFjazovL0BqdXB5dGVybGFiL2FwcGxpY2F0aW9uLXRvcC8uL25vZGVfbW9kdWxlcy9AbWljcm9zb2Z0L2Zhc3QtZm91bmRhdGlvbi9kaXN0L2VzbS9saXN0Ym94L2xpc3Rib3guZWxlbWVudC5qcyIsIndlYnBhY2s6Ly9AanVweXRlcmxhYi9hcHBsaWNhdGlvbi10b3AvLi9ub2RlX21vZHVsZXMvQG1pY3Jvc29mdC9mYXN0LWZvdW5kYXRpb24vZGlzdC9lc20vbGlzdGJveC9saXN0Ym94LmpzIiwid2VicGFjazovL0BqdXB5dGVybGFiL2FwcGxpY2F0aW9uLXRvcC8uL25vZGVfbW9kdWxlcy9AbWljcm9zb2Z0L2Zhc3QtZm91bmRhdGlvbi9kaXN0L2VzbS9saXN0Ym94L2xpc3Rib3gudGVtcGxhdGUuanMiLCJ3ZWJwYWNrOi8vQGp1cHl0ZXJsYWIvYXBwbGljYXRpb24tdG9wLy4vbm9kZV9tb2R1bGVzL0BtaWNyb3NvZnQvZmFzdC1mb3VuZGF0aW9uL2Rpc3QvZXNtL21lbnUtaXRlbS9pbmRleC5qcyIsIndlYnBhY2s6Ly9AanVweXRlcmxhYi9hcHBsaWNhdGlvbi10b3AvLi9ub2RlX21vZHVsZXMvQG1pY3Jvc29mdC9mYXN0LWZvdW5kYXRpb24vZGlzdC9lc20vbWVudS1pdGVtL21lbnUtaXRlbS5qcyIsIndlYnBhY2s6Ly9AanVweXRlcmxhYi9hcHBsaWNhdGlvbi10b3AvLi9ub2RlX21vZHVsZXMvQG1pY3Jvc29mdC9mYXN0LWZvdW5kYXRpb24vZGlzdC9lc20vbWVudS1pdGVtL21lbnUtaXRlbS5vcHRpb25zLmpzIiwid2VicGFjazovL0BqdXB5dGVybGFiL2FwcGxpY2F0aW9uLXRvcC8uL25vZGVfbW9kdWxlcy9AbWljcm9zb2Z0L2Zhc3QtZm91bmRhdGlvbi9kaXN0L2VzbS9tZW51LWl0ZW0vbWVudS1pdGVtLnRlbXBsYXRlLmpzIiwid2VicGFjazovL0BqdXB5dGVybGFiL2FwcGxpY2F0aW9uLXRvcC8uL25vZGVfbW9kdWxlcy9AbWljcm9zb2Z0L2Zhc3QtZm91bmRhdGlvbi9kaXN0L2VzbS9tZW51L2luZGV4LmpzIiwid2VicGFjazovL0BqdXB5dGVybGFiL2FwcGxpY2F0aW9uLXRvcC8uL25vZGVfbW9kdWxlcy9AbWljcm9zb2Z0L2Zhc3QtZm91bmRhdGlvbi9kaXN0L2VzbS9tZW51L21lbnUuanMiLCJ3ZWJwYWNrOi8vQGp1cHl0ZXJsYWIvYXBwbGljYXRpb24tdG9wLy4vbm9kZV9tb2R1bGVzL0BtaWNyb3NvZnQvZmFzdC1mb3VuZGF0aW9uL2Rpc3QvZXNtL21lbnUvbWVudS50ZW1wbGF0ZS5qcyIsIndlYnBhY2s6Ly9AanVweXRlcmxhYi9hcHBsaWNhdGlvbi10b3AvLi9ub2RlX21vZHVsZXMvQG1pY3Jvc29mdC9mYXN0LWZvdW5kYXRpb24vZGlzdC9lc20vbnVtYmVyLWZpZWxkL2luZGV4LmpzIiwid2VicGFjazovL0BqdXB5dGVybGFiL2FwcGxpY2F0aW9uLXRvcC8uL25vZGVfbW9kdWxlcy9AbWljcm9zb2Z0L2Zhc3QtZm91bmRhdGlvbi9kaXN0L2VzbS9udW1iZXItZmllbGQvbnVtYmVyLWZpZWxkLmZvcm0tYXNzb2NpYXRlZC5qcyIsIndlYnBhY2s6Ly9AanVweXRlcmxhYi9hcHBsaWNhdGlvbi10b3AvLi9ub2RlX21vZHVsZXMvQG1pY3Jvc29mdC9mYXN0LWZvdW5kYXRpb24vZGlzdC9lc20vbnVtYmVyLWZpZWxkL251bWJlci1maWVsZC5qcyIsIndlYnBhY2s6Ly9AanVweXRlcmxhYi9hcHBsaWNhdGlvbi10b3AvLi9ub2RlX21vZHVsZXMvQG1pY3Jvc29mdC9mYXN0LWZvdW5kYXRpb24vZGlzdC9lc20vbnVtYmVyLWZpZWxkL251bWJlci1maWVsZC50ZW1wbGF0ZS5qcyIsIndlYnBhY2s6Ly9AanVweXRlcmxhYi9hcHBsaWNhdGlvbi10b3AvLi9ub2RlX21vZHVsZXMvQG1pY3Jvc29mdC9mYXN0LWZvdW5kYXRpb24vZGlzdC9lc20vcGF0dGVybnMvYXJpYS1nbG9iYWwuanMiLCJ3ZWJwYWNrOi8vQGp1cHl0ZXJsYWIvYXBwbGljYXRpb24tdG9wLy4vbm9kZV9tb2R1bGVzL0BtaWNyb3NvZnQvZmFzdC1mb3VuZGF0aW9uL2Rpc3QvZXNtL3BhdHRlcm5zL2luZGV4LmpzIiwid2VicGFjazovL0BqdXB5dGVybGFiL2FwcGxpY2F0aW9uLXRvcC8uL25vZGVfbW9kdWxlcy9AbWljcm9zb2Z0L2Zhc3QtZm91bmRhdGlvbi9kaXN0L2VzbS9wYXR0ZXJucy9zdGFydC1lbmQuanMiLCJ3ZWJwYWNrOi8vQGp1cHl0ZXJsYWIvYXBwbGljYXRpb24tdG9wLy4vbm9kZV9tb2R1bGVzL0BtaWNyb3NvZnQvZmFzdC1mb3VuZGF0aW9uL2Rpc3QvZXNtL3BpY2tlci9pbmRleC5qcyIsIndlYnBhY2s6Ly9AanVweXRlcmxhYi9hcHBsaWNhdGlvbi10b3AvLi9ub2RlX21vZHVsZXMvQG1pY3Jvc29mdC9mYXN0LWZvdW5kYXRpb24vZGlzdC9lc20vcGlja2VyL3BpY2tlci1saXN0LWl0ZW0uanMiLCJ3ZWJwYWNrOi8vQGp1cHl0ZXJsYWIvYXBwbGljYXRpb24tdG9wLy4vbm9kZV9tb2R1bGVzL0BtaWNyb3NvZnQvZmFzdC1mb3VuZGF0aW9uL2Rpc3QvZXNtL3BpY2tlci9waWNrZXItbGlzdC1pdGVtLnRlbXBsYXRlLmpzIiwid2VicGFjazovL0BqdXB5dGVybGFiL2FwcGxpY2F0aW9uLXRvcC8uL25vZGVfbW9kdWxlcy9AbWljcm9zb2Z0L2Zhc3QtZm91bmRhdGlvbi9kaXN0L2VzbS9waWNrZXIvcGlja2VyLWxpc3QuanMiLCJ3ZWJwYWNrOi8vQGp1cHl0ZXJsYWIvYXBwbGljYXRpb24tdG9wLy4vbm9kZV9tb2R1bGVzL0BtaWNyb3NvZnQvZmFzdC1mb3VuZGF0aW9uL2Rpc3QvZXNtL3BpY2tlci9waWNrZXItbGlzdC50ZW1wbGF0ZS5qcyIsIndlYnBhY2s6Ly9AanVweXRlcmxhYi9hcHBsaWNhdGlvbi10b3AvLi9ub2RlX21vZHVsZXMvQG1pY3Jvc29mdC9mYXN0LWZvdW5kYXRpb24vZGlzdC9lc20vcGlja2VyL3BpY2tlci1tZW51LW9wdGlvbi5qcyIsIndlYnBhY2s6Ly9AanVweXRlcmxhYi9hcHBsaWNhdGlvbi10b3AvLi9ub2RlX21vZHVsZXMvQG1pY3Jvc29mdC9mYXN0LWZvdW5kYXRpb24vZGlzdC9lc20vcGlja2VyL3BpY2tlci1tZW51LW9wdGlvbi50ZW1wbGF0ZS5qcyIsIndlYnBhY2s6Ly9AanVweXRlcmxhYi9hcHBsaWNhdGlvbi10b3AvLi9ub2RlX21vZHVsZXMvQG1pY3Jvc29mdC9mYXN0LWZvdW5kYXRpb24vZGlzdC9lc20vcGlja2VyL3BpY2tlci1tZW51LmpzIiwid2VicGFjazovL0BqdXB5dGVybGFiL2FwcGxpY2F0aW9uLXRvcC8uL25vZGVfbW9kdWxlcy9AbWljcm9zb2Z0L2Zhc3QtZm91bmRhdGlvbi9kaXN0L2VzbS9waWNrZXIvcGlja2VyLW1lbnUudGVtcGxhdGUuanMiLCJ3ZWJwYWNrOi8vQGp1cHl0ZXJsYWIvYXBwbGljYXRpb24tdG9wLy4vbm9kZV9tb2R1bGVzL0BtaWNyb3NvZnQvZmFzdC1mb3VuZGF0aW9uL2Rpc3QvZXNtL3BpY2tlci9waWNrZXIuZm9ybS1hc3NvY2lhdGVkLmpzIiwid2VicGFjazovL0BqdXB5dGVybGFiL2FwcGxpY2F0aW9uLXRvcC8uL25vZGVfbW9kdWxlcy9AbWljcm9zb2Z0L2Zhc3QtZm91bmRhdGlvbi9kaXN0L2VzbS9waWNrZXIvcGlja2VyLmpzIiwid2VicGFjazovL0BqdXB5dGVybGFiL2FwcGxpY2F0aW9uLXRvcC8uL25vZGVfbW9kdWxlcy9AbWljcm9zb2Z0L2Zhc3QtZm91bmRhdGlvbi9kaXN0L2VzbS9waWNrZXIvcGlja2VyLnRlbXBsYXRlLmpzIiwid2VicGFjazovL0BqdXB5dGVybGFiL2FwcGxpY2F0aW9uLXRvcC8uL25vZGVfbW9kdWxlcy9AbWljcm9zb2Z0L2Zhc3QtZm91bmRhdGlvbi9kaXN0L2VzbS9wcm9ncmVzcy1yaW5nL2luZGV4LmpzIiwid2VicGFjazovL0BqdXB5dGVybGFiL2FwcGxpY2F0aW9uLXRvcC8uL25vZGVfbW9kdWxlcy9AbWljcm9zb2Z0L2Zhc3QtZm91bmRhdGlvbi9kaXN0L2VzbS9wcm9ncmVzcy1yaW5nL3Byb2dyZXNzLXJpbmcudGVtcGxhdGUuanMiLCJ3ZWJwYWNrOi8vQGp1cHl0ZXJsYWIvYXBwbGljYXRpb24tdG9wLy4vbm9kZV9tb2R1bGVzL0BtaWNyb3NvZnQvZmFzdC1mb3VuZGF0aW9uL2Rpc3QvZXNtL3Byb2dyZXNzL2Jhc2UtcHJvZ3Jlc3MuanMiLCJ3ZWJwYWNrOi8vQGp1cHl0ZXJsYWIvYXBwbGljYXRpb24tdG9wLy4vbm9kZV9tb2R1bGVzL0BtaWNyb3NvZnQvZmFzdC1mb3VuZGF0aW9uL2Rpc3QvZXNtL3Byb2dyZXNzL2luZGV4LmpzIiwid2VicGFjazovL0BqdXB5dGVybGFiL2FwcGxpY2F0aW9uLXRvcC8uL25vZGVfbW9kdWxlcy9AbWljcm9zb2Z0L2Zhc3QtZm91bmRhdGlvbi9kaXN0L2VzbS9wcm9ncmVzcy9wcm9ncmVzcy50ZW1wbGF0ZS5qcyIsIndlYnBhY2s6Ly9AanVweXRlcmxhYi9hcHBsaWNhdGlvbi10b3AvLi9ub2RlX21vZHVsZXMvQG1pY3Jvc29mdC9mYXN0LWZvdW5kYXRpb24vZGlzdC9lc20vcmFkaW8tZ3JvdXAvaW5kZXguanMiLCJ3ZWJwYWNrOi8vQGp1cHl0ZXJsYWIvYXBwbGljYXRpb24tdG9wLy4vbm9kZV9tb2R1bGVzL0BtaWNyb3NvZnQvZmFzdC1mb3VuZGF0aW9uL2Rpc3QvZXNtL3JhZGlvLWdyb3VwL3JhZGlvLWdyb3VwLmpzIiwid2VicGFjazovL0BqdXB5dGVybGFiL2FwcGxpY2F0aW9uLXRvcC8uL25vZGVfbW9kdWxlcy9AbWljcm9zb2Z0L2Zhc3QtZm91bmRhdGlvbi9kaXN0L2VzbS9yYWRpby1ncm91cC9yYWRpby1ncm91cC50ZW1wbGF0ZS5qcyIsIndlYnBhY2s6Ly9AanVweXRlcmxhYi9hcHBsaWNhdGlvbi10b3AvLi9ub2RlX21vZHVsZXMvQG1pY3Jvc29mdC9mYXN0LWZvdW5kYXRpb24vZGlzdC9lc20vcmFkaW8vaW5kZXguanMiLCJ3ZWJwYWNrOi8vQGp1cHl0ZXJsYWIvYXBwbGljYXRpb24tdG9wLy4vbm9kZV9tb2R1bGVzL0BtaWNyb3NvZnQvZmFzdC1mb3VuZGF0aW9uL2Rpc3QvZXNtL3JhZGlvL3JhZGlvLmZvcm0tYXNzb2NpYXRlZC5qcyIsIndlYnBhY2s6Ly9AanVweXRlcmxhYi9hcHBsaWNhdGlvbi10b3AvLi9ub2RlX21vZHVsZXMvQG1pY3Jvc29mdC9mYXN0LWZvdW5kYXRpb24vZGlzdC9lc20vcmFkaW8vcmFkaW8uanMiLCJ3ZWJwYWNrOi8vQGp1cHl0ZXJsYWIvYXBwbGljYXRpb24tdG9wLy4vbm9kZV9tb2R1bGVzL0BtaWNyb3NvZnQvZmFzdC1mb3VuZGF0aW9uL2Rpc3QvZXNtL3JhZGlvL3JhZGlvLnRlbXBsYXRlLmpzIiwid2VicGFjazovL0BqdXB5dGVybGFiL2FwcGxpY2F0aW9uLXRvcC8uL25vZGVfbW9kdWxlcy9AbWljcm9zb2Z0L2Zhc3QtZm91bmRhdGlvbi9kaXN0L2VzbS9zZWFyY2gvaW5kZXguanMiLCJ3ZWJwYWNrOi8vQGp1cHl0ZXJsYWIvYXBwbGljYXRpb24tdG9wLy4vbm9kZV9tb2R1bGVzL0BtaWNyb3NvZnQvZmFzdC1mb3VuZGF0aW9uL2Rpc3QvZXNtL3NlYXJjaC9zZWFyY2guZm9ybS1hc3NvY2lhdGVkLmpzIiwid2VicGFjazovL0BqdXB5dGVybGFiL2FwcGxpY2F0aW9uLXRvcC8uL25vZGVfbW9kdWxlcy9AbWljcm9zb2Z0L2Zhc3QtZm91bmRhdGlvbi9kaXN0L2VzbS9zZWFyY2gvc2VhcmNoLmpzIiwid2VicGFjazovL0BqdXB5dGVybGFiL2FwcGxpY2F0aW9uLXRvcC8uL25vZGVfbW9kdWxlcy9AbWljcm9zb2Z0L2Zhc3QtZm91bmRhdGlvbi9kaXN0L2VzbS9zZWFyY2gvc2VhcmNoLnRlbXBsYXRlLmpzIiwid2VicGFjazovL0BqdXB5dGVybGFiL2FwcGxpY2F0aW9uLXRvcC8uL25vZGVfbW9kdWxlcy9AbWljcm9zb2Z0L2Zhc3QtZm91bmRhdGlvbi9kaXN0L2VzbS9zZWxlY3QvaW5kZXguanMiLCJ3ZWJwYWNrOi8vQGp1cHl0ZXJsYWIvYXBwbGljYXRpb24tdG9wLy4vbm9kZV9tb2R1bGVzL0BtaWNyb3NvZnQvZmFzdC1mb3VuZGF0aW9uL2Rpc3QvZXNtL3NlbGVjdC9zZWxlY3QuZm9ybS1hc3NvY2lhdGVkLmpzIiwid2VicGFjazovL0BqdXB5dGVybGFiL2FwcGxpY2F0aW9uLXRvcC8uL25vZGVfbW9kdWxlcy9AbWljcm9zb2Z0L2Zhc3QtZm91bmRhdGlvbi9kaXN0L2VzbS9zZWxlY3Qvc2VsZWN0LmpzIiwid2VicGFjazovL0BqdXB5dGVybGFiL2FwcGxpY2F0aW9uLXRvcC8uL25vZGVfbW9kdWxlcy9AbWljcm9zb2Z0L2Zhc3QtZm91bmRhdGlvbi9kaXN0L2VzbS9zZWxlY3Qvc2VsZWN0Lm9wdGlvbnMuanMiLCJ3ZWJwYWNrOi8vQGp1cHl0ZXJsYWIvYXBwbGljYXRpb24tdG9wLy4vbm9kZV9tb2R1bGVzL0BtaWNyb3NvZnQvZmFzdC1mb3VuZGF0aW9uL2Rpc3QvZXNtL3NlbGVjdC9zZWxlY3QudGVtcGxhdGUuanMiLCJ3ZWJwYWNrOi8vQGp1cHl0ZXJsYWIvYXBwbGljYXRpb24tdG9wLy4vbm9kZV9tb2R1bGVzL0BtaWNyb3NvZnQvZmFzdC1mb3VuZGF0aW9uL2Rpc3QvZXNtL3NrZWxldG9uL2luZGV4LmpzIiwid2VicGFjazovL0BqdXB5dGVybGFiL2FwcGxpY2F0aW9uLXRvcC8uL25vZGVfbW9kdWxlcy9AbWljcm9zb2Z0L2Zhc3QtZm91bmRhdGlvbi9kaXN0L2VzbS9za2VsZXRvbi9za2VsZXRvbi5qcyIsIndlYnBhY2s6Ly9AanVweXRlcmxhYi9hcHBsaWNhdGlvbi10b3AvLi9ub2RlX21vZHVsZXMvQG1pY3Jvc29mdC9mYXN0LWZvdW5kYXRpb24vZGlzdC9lc20vc2tlbGV0b24vc2tlbGV0b24udGVtcGxhdGUuanMiLCJ3ZWJwYWNrOi8vQGp1cHl0ZXJsYWIvYXBwbGljYXRpb24tdG9wLy4vbm9kZV9tb2R1bGVzL0BtaWNyb3NvZnQvZmFzdC1mb3VuZGF0aW9uL2Rpc3QvZXNtL3NsaWRlci1sYWJlbC9pbmRleC5qcyIsIndlYnBhY2s6Ly9AanVweXRlcmxhYi9hcHBsaWNhdGlvbi10b3AvLi9ub2RlX21vZHVsZXMvQG1pY3Jvc29mdC9mYXN0LWZvdW5kYXRpb24vZGlzdC9lc20vc2xpZGVyLWxhYmVsL3NsaWRlci1sYWJlbC5qcyIsIndlYnBhY2s6Ly9AanVweXRlcmxhYi9hcHBsaWNhdGlvbi10b3AvLi9ub2RlX21vZHVsZXMvQG1pY3Jvc29mdC9mYXN0LWZvdW5kYXRpb24vZGlzdC9lc20vc2xpZGVyLWxhYmVsL3NsaWRlci1sYWJlbC50ZW1wbGF0ZS5qcyIsIndlYnBhY2s6Ly9AanVweXRlcmxhYi9hcHBsaWNhdGlvbi10b3AvLi9ub2RlX21vZHVsZXMvQG1pY3Jvc29mdC9mYXN0LWZvdW5kYXRpb24vZGlzdC9lc20vc2xpZGVyL2luZGV4LmpzIiwid2VicGFjazovL0BqdXB5dGVybGFiL2FwcGxpY2F0aW9uLXRvcC8uL25vZGVfbW9kdWxlcy9AbWljcm9zb2Z0L2Zhc3QtZm91bmRhdGlvbi9kaXN0L2VzbS9zbGlkZXIvc2xpZGVyLXV0aWxpdGllcy5qcyIsIndlYnBhY2s6Ly9AanVweXRlcmxhYi9hcHBsaWNhdGlvbi10b3AvLi9ub2RlX21vZHVsZXMvQG1pY3Jvc29mdC9mYXN0LWZvdW5kYXRpb24vZGlzdC9lc20vc2xpZGVyL3NsaWRlci5mb3JtLWFzc29jaWF0ZWQuanMiLCJ3ZWJwYWNrOi8vQGp1cHl0ZXJsYWIvYXBwbGljYXRpb24tdG9wLy4vbm9kZV9tb2R1bGVzL0BtaWNyb3NvZnQvZmFzdC1mb3VuZGF0aW9uL2Rpc3QvZXNtL3NsaWRlci9zbGlkZXIuanMiLCJ3ZWJwYWNrOi8vQGp1cHl0ZXJsYWIvYXBwbGljYXRpb24tdG9wLy4vbm9kZV9tb2R1bGVzL0BtaWNyb3NvZnQvZmFzdC1mb3VuZGF0aW9uL2Rpc3QvZXNtL3NsaWRlci9zbGlkZXIudGVtcGxhdGUuanMiLCJ3ZWJwYWNrOi8vQGp1cHl0ZXJsYWIvYXBwbGljYXRpb24tdG9wLy4vbm9kZV9tb2R1bGVzL0BtaWNyb3NvZnQvZmFzdC1mb3VuZGF0aW9uL2Rpc3QvZXNtL3N3aXRjaC9pbmRleC5qcyIsIndlYnBhY2s6Ly9AanVweXRlcmxhYi9hcHBsaWNhdGlvbi10b3AvLi9ub2RlX21vZHVsZXMvQG1pY3Jvc29mdC9mYXN0LWZvdW5kYXRpb24vZGlzdC9lc20vc3dpdGNoL3N3aXRjaC5mb3JtLWFzc29jaWF0ZWQuanMiLCJ3ZWJwYWNrOi8vQGp1cHl0ZXJsYWIvYXBwbGljYXRpb24tdG9wLy4vbm9kZV9tb2R1bGVzL0BtaWNyb3NvZnQvZmFzdC1mb3VuZGF0aW9uL2Rpc3QvZXNtL3N3aXRjaC9zd2l0Y2guanMiLCJ3ZWJwYWNrOi8vQGp1cHl0ZXJsYWIvYXBwbGljYXRpb24tdG9wLy4vbm9kZV9tb2R1bGVzL0BtaWNyb3NvZnQvZmFzdC1mb3VuZGF0aW9uL2Rpc3QvZXNtL3N3aXRjaC9zd2l0Y2gudGVtcGxhdGUuanMiLCJ3ZWJwYWNrOi8vQGp1cHl0ZXJsYWIvYXBwbGljYXRpb24tdG9wLy4vbm9kZV9tb2R1bGVzL0BtaWNyb3NvZnQvZmFzdC1mb3VuZGF0aW9uL2Rpc3QvZXNtL3RhYi1wYW5lbC9pbmRleC5qcyIsIndlYnBhY2s6Ly9AanVweXRlcmxhYi9hcHBsaWNhdGlvbi10b3AvLi9ub2RlX21vZHVsZXMvQG1pY3Jvc29mdC9mYXN0LWZvdW5kYXRpb24vZGlzdC9lc20vdGFiLXBhbmVsL3RhYi1wYW5lbC5qcyIsIndlYnBhY2s6Ly9AanVweXRlcmxhYi9hcHBsaWNhdGlvbi10b3AvLi9ub2RlX21vZHVsZXMvQG1pY3Jvc29mdC9mYXN0LWZvdW5kYXRpb24vZGlzdC9lc20vdGFiLXBhbmVsL3RhYi1wYW5lbC50ZW1wbGF0ZS5qcyIsIndlYnBhY2s6Ly9AanVweXRlcmxhYi9hcHBsaWNhdGlvbi10b3AvLi9ub2RlX21vZHVsZXMvQG1pY3Jvc29mdC9mYXN0LWZvdW5kYXRpb24vZGlzdC9lc20vdGFiL2luZGV4LmpzIiwid2VicGFjazovL0BqdXB5dGVybGFiL2FwcGxpY2F0aW9uLXRvcC8uL25vZGVfbW9kdWxlcy9AbWljcm9zb2Z0L2Zhc3QtZm91bmRhdGlvbi9kaXN0L2VzbS90YWIvdGFiLmpzIiwid2VicGFjazovL0BqdXB5dGVybGFiL2FwcGxpY2F0aW9uLXRvcC8uL25vZGVfbW9kdWxlcy9AbWljcm9zb2Z0L2Zhc3QtZm91bmRhdGlvbi9kaXN0L2VzbS90YWIvdGFiLnRlbXBsYXRlLmpzIiwid2VicGFjazovL0BqdXB5dGVybGFiL2FwcGxpY2F0aW9uLXRvcC8uL25vZGVfbW9kdWxlcy9AbWljcm9zb2Z0L2Zhc3QtZm91bmRhdGlvbi9kaXN0L2VzbS90YWJzL2luZGV4LmpzIiwid2VicGFjazovL0BqdXB5dGVybGFiL2FwcGxpY2F0aW9uLXRvcC8uL25vZGVfbW9kdWxlcy9AbWljcm9zb2Z0L2Zhc3QtZm91bmRhdGlvbi9kaXN0L2VzbS90YWJzL3RhYnMuanMiLCJ3ZWJwYWNrOi8vQGp1cHl0ZXJsYWIvYXBwbGljYXRpb24tdG9wLy4vbm9kZV9tb2R1bGVzL0BtaWNyb3NvZnQvZmFzdC1mb3VuZGF0aW9uL2Rpc3QvZXNtL3RhYnMvdGFicy50ZW1wbGF0ZS5qcyIsIndlYnBhY2s6Ly9AanVweXRlcmxhYi9hcHBsaWNhdGlvbi10b3AvLi9ub2RlX21vZHVsZXMvQG1pY3Jvc29mdC9mYXN0LWZvdW5kYXRpb24vZGlzdC9lc20vdGV4dC1hcmVhL2luZGV4LmpzIiwid2VicGFjazovL0BqdXB5dGVybGFiL2FwcGxpY2F0aW9uLXRvcC8uL25vZGVfbW9kdWxlcy9AbWljcm9zb2Z0L2Zhc3QtZm91bmRhdGlvbi9kaXN0L2VzbS90ZXh0LWFyZWEvdGV4dC1hcmVhLmZvcm0tYXNzb2NpYXRlZC5qcyIsIndlYnBhY2s6Ly9AanVweXRlcmxhYi9hcHBsaWNhdGlvbi10b3AvLi9ub2RlX21vZHVsZXMvQG1pY3Jvc29mdC9mYXN0LWZvdW5kYXRpb24vZGlzdC9lc20vdGV4dC1hcmVhL3RleHQtYXJlYS5qcyIsIndlYnBhY2s6Ly9AanVweXRlcmxhYi9hcHBsaWNhdGlvbi10b3AvLi9ub2RlX21vZHVsZXMvQG1pY3Jvc29mdC9mYXN0LWZvdW5kYXRpb24vZGlzdC9lc20vdGV4dC1hcmVhL3RleHQtYXJlYS5vcHRpb25zLmpzIiwid2VicGFjazovL0BqdXB5dGVybGFiL2FwcGxpY2F0aW9uLXRvcC8uL25vZGVfbW9kdWxlcy9AbWljcm9zb2Z0L2Zhc3QtZm91bmRhdGlvbi9kaXN0L2VzbS90ZXh0LWFyZWEvdGV4dC1hcmVhLnRlbXBsYXRlLmpzIiwid2VicGFjazovL0BqdXB5dGVybGFiL2FwcGxpY2F0aW9uLXRvcC8uL25vZGVfbW9kdWxlcy9AbWljcm9zb2Z0L2Zhc3QtZm91bmRhdGlvbi9kaXN0L2VzbS90ZXh0LWZpZWxkL2luZGV4LmpzIiwid2VicGFjazovL0BqdXB5dGVybGFiL2FwcGxpY2F0aW9uLXRvcC8uL25vZGVfbW9kdWxlcy9AbWljcm9zb2Z0L2Zhc3QtZm91bmRhdGlvbi9kaXN0L2VzbS90ZXh0LWZpZWxkL3RleHQtZmllbGQuZm9ybS1hc3NvY2lhdGVkLmpzIiwid2VicGFjazovL0BqdXB5dGVybGFiL2FwcGxpY2F0aW9uLXRvcC8uL25vZGVfbW9kdWxlcy9AbWljcm9zb2Z0L2Zhc3QtZm91bmRhdGlvbi9kaXN0L2VzbS90ZXh0LWZpZWxkL3RleHQtZmllbGQuanMiLCJ3ZWJwYWNrOi8vQGp1cHl0ZXJsYWIvYXBwbGljYXRpb24tdG9wLy4vbm9kZV9tb2R1bGVzL0BtaWNyb3NvZnQvZmFzdC1mb3VuZGF0aW9uL2Rpc3QvZXNtL3RleHQtZmllbGQvdGV4dC1maWVsZC5vcHRpb25zLmpzIiwid2VicGFjazovL0BqdXB5dGVybGFiL2FwcGxpY2F0aW9uLXRvcC8uL25vZGVfbW9kdWxlcy9AbWljcm9zb2Z0L2Zhc3QtZm91bmRhdGlvbi9kaXN0L2VzbS90ZXh0LWZpZWxkL3RleHQtZmllbGQudGVtcGxhdGUuanMiLCJ3ZWJwYWNrOi8vQGp1cHl0ZXJsYWIvYXBwbGljYXRpb24tdG9wLy4vbm9kZV9tb2R1bGVzL0BtaWNyb3NvZnQvZmFzdC1mb3VuZGF0aW9uL2Rpc3QvZXNtL3Rvb2xiYXIvaW5kZXguanMiLCJ3ZWJwYWNrOi8vQGp1cHl0ZXJsYWIvYXBwbGljYXRpb24tdG9wLy4vbm9kZV9tb2R1bGVzL0BtaWNyb3NvZnQvZmFzdC1mb3VuZGF0aW9uL2Rpc3QvZXNtL3Rvb2xiYXIvdG9vbGJhci5qcyIsIndlYnBhY2s6Ly9AanVweXRlcmxhYi9hcHBsaWNhdGlvbi10b3AvLi9ub2RlX21vZHVsZXMvQG1pY3Jvc29mdC9mYXN0LWZvdW5kYXRpb24vZGlzdC9lc20vdG9vbGJhci90b29sYmFyLnRlbXBsYXRlLmpzIiwid2VicGFjazovL0BqdXB5dGVybGFiL2FwcGxpY2F0aW9uLXRvcC8uL25vZGVfbW9kdWxlcy9AbWljcm9zb2Z0L2Zhc3QtZm91bmRhdGlvbi9kaXN0L2VzbS90b29sdGlwL2luZGV4LmpzIiwid2VicGFjazovL0BqdXB5dGVybGFiL2FwcGxpY2F0aW9uLXRvcC8uL25vZGVfbW9kdWxlcy9AbWljcm9zb2Z0L2Zhc3QtZm91bmRhdGlvbi9kaXN0L2VzbS90b29sdGlwL3Rvb2x0aXAuanMiLCJ3ZWJwYWNrOi8vQGp1cHl0ZXJsYWIvYXBwbGljYXRpb24tdG9wLy4vbm9kZV9tb2R1bGVzL0BtaWNyb3NvZnQvZmFzdC1mb3VuZGF0aW9uL2Rpc3QvZXNtL3Rvb2x0aXAvdG9vbHRpcC5vcHRpb25zLmpzIiwid2VicGFjazovL0BqdXB5dGVybGFiL2FwcGxpY2F0aW9uLXRvcC8uL25vZGVfbW9kdWxlcy9AbWljcm9zb2Z0L2Zhc3QtZm91bmRhdGlvbi9kaXN0L2VzbS90b29sdGlwL3Rvb2x0aXAudGVtcGxhdGUuanMiLCJ3ZWJwYWNrOi8vQGp1cHl0ZXJsYWIvYXBwbGljYXRpb24tdG9wLy4vbm9kZV9tb2R1bGVzL0BtaWNyb3NvZnQvZmFzdC1mb3VuZGF0aW9uL2Rpc3QvZXNtL3RyZWUtaXRlbS9pbmRleC5qcyIsIndlYnBhY2s6Ly9AanVweXRlcmxhYi9hcHBsaWNhdGlvbi10b3AvLi9ub2RlX21vZHVsZXMvQG1pY3Jvc29mdC9mYXN0LWZvdW5kYXRpb24vZGlzdC9lc20vdHJlZS1pdGVtL3RyZWUtaXRlbS5qcyIsIndlYnBhY2s6Ly9AanVweXRlcmxhYi9hcHBsaWNhdGlvbi10b3AvLi9ub2RlX21vZHVsZXMvQG1pY3Jvc29mdC9mYXN0LWZvdW5kYXRpb24vZGlzdC9lc20vdHJlZS1pdGVtL3RyZWUtaXRlbS50ZW1wbGF0ZS5qcyIsIndlYnBhY2s6Ly9AanVweXRlcmxhYi9hcHBsaWNhdGlvbi10b3AvLi9ub2RlX21vZHVsZXMvQG1pY3Jvc29mdC9mYXN0LWZvdW5kYXRpb24vZGlzdC9lc20vdHJlZS12aWV3L2luZGV4LmpzIiwid2VicGFjazovL0BqdXB5dGVybGFiL2FwcGxpY2F0aW9uLXRvcC8uL25vZGVfbW9kdWxlcy9AbWljcm9zb2Z0L2Zhc3QtZm91bmRhdGlvbi9kaXN0L2VzbS90cmVlLXZpZXcvdHJlZS12aWV3LmpzIiwid2VicGFjazovL0BqdXB5dGVybGFiL2FwcGxpY2F0aW9uLXRvcC8uL25vZGVfbW9kdWxlcy9AbWljcm9zb2Z0L2Zhc3QtZm91bmRhdGlvbi9kaXN0L2VzbS90cmVlLXZpZXcvdHJlZS12aWV3LnRlbXBsYXRlLmpzIiwid2VicGFjazovL0BqdXB5dGVybGFiL2FwcGxpY2F0aW9uLXRvcC8uL25vZGVfbW9kdWxlcy9AbWljcm9zb2Z0L2Zhc3QtZm91bmRhdGlvbi9kaXN0L2VzbS91dGlsaXRpZXMvYXBwbHktbWl4aW5zLmpzIiwid2VicGFjazovL0BqdXB5dGVybGFiL2FwcGxpY2F0aW9uLXRvcC8uL25vZGVfbW9kdWxlcy9AbWljcm9zb2Z0L2Zhc3QtZm91bmRhdGlvbi9kaXN0L2VzbS91dGlsaXRpZXMvY29tcG9zZWQtY29udGFpbnMuanMiLCJ3ZWJwYWNrOi8vQGp1cHl0ZXJsYWIvYXBwbGljYXRpb24tdG9wLy4vbm9kZV9tb2R1bGVzL0BtaWNyb3NvZnQvZmFzdC1mb3VuZGF0aW9uL2Rpc3QvZXNtL3V0aWxpdGllcy9jb21wb3NlZC1wYXJlbnQuanMiLCJ3ZWJwYWNrOi8vQGp1cHl0ZXJsYWIvYXBwbGljYXRpb24tdG9wLy4vbm9kZV9tb2R1bGVzL0BtaWNyb3NvZnQvZmFzdC1mb3VuZGF0aW9uL2Rpc3QvZXNtL3V0aWxpdGllcy9kaXJlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vQGp1cHl0ZXJsYWIvYXBwbGljYXRpb24tdG9wLy4vbm9kZV9tb2R1bGVzL0BtaWNyb3NvZnQvZmFzdC1mb3VuZGF0aW9uL2Rpc3QvZXNtL3V0aWxpdGllcy9pbmRleC5qcyIsIndlYnBhY2s6Ly9AanVweXRlcmxhYi9hcHBsaWNhdGlvbi10b3AvLi9ub2RlX21vZHVsZXMvQG1pY3Jvc29mdC9mYXN0LWZvdW5kYXRpb24vZGlzdC9lc20vdXRpbGl0aWVzL2ludGVyc2VjdGlvbi1zZXJ2aWNlLmpzIiwid2VicGFjazovL0BqdXB5dGVybGFiL2FwcGxpY2F0aW9uLXRvcC8uL25vZGVfbW9kdWxlcy9AbWljcm9zb2Z0L2Zhc3QtZm91bmRhdGlvbi9kaXN0L2VzbS91dGlsaXRpZXMvbWF0Y2gtbWVkaWEtc3R5bGVzaGVldC1iZWhhdmlvci5qcyIsIndlYnBhY2s6Ly9AanVweXRlcmxhYi9hcHBsaWNhdGlvbi10b3AvLi9ub2RlX21vZHVsZXMvQG1pY3Jvc29mdC9mYXN0LWZvdW5kYXRpb24vZGlzdC9lc20vdXRpbGl0aWVzL3Byb3BlcnR5LXN0eWxlc2hlZXQtYmVoYXZpb3IuanMiLCJ3ZWJwYWNrOi8vQGp1cHl0ZXJsYWIvYXBwbGljYXRpb24tdG9wLy4vbm9kZV9tb2R1bGVzL0BtaWNyb3NvZnQvZmFzdC1mb3VuZGF0aW9uL2Rpc3QvZXNtL3V0aWxpdGllcy9zdHlsZS9kaXNhYmxlZC5qcyIsIndlYnBhY2s6Ly9AanVweXRlcmxhYi9hcHBsaWNhdGlvbi10b3AvLi9ub2RlX21vZHVsZXMvQG1pY3Jvc29mdC9mYXN0LWZvdW5kYXRpb24vZGlzdC9lc20vdXRpbGl0aWVzL3N0eWxlL2Rpc3BsYXkuanMiLCJ3ZWJwYWNrOi8vQGp1cHl0ZXJsYWIvYXBwbGljYXRpb24tdG9wLy4vbm9kZV9tb2R1bGVzL0BtaWNyb3NvZnQvZmFzdC1mb3VuZGF0aW9uL2Rpc3QvZXNtL3V0aWxpdGllcy9zdHlsZS9mb2N1cy5qcyIsIndlYnBhY2s6Ly9AanVweXRlcmxhYi9hcHBsaWNhdGlvbi10b3AvLi9ub2RlX21vZHVsZXMvQG1pY3Jvc29mdC9mYXN0LWZvdW5kYXRpb24vZGlzdC9lc20vdXRpbGl0aWVzL3N0eWxlL2luZGV4LmpzIiwid2VicGFjazovL0BqdXB5dGVybGFiL2FwcGxpY2F0aW9uLXRvcC8uL25vZGVfbW9kdWxlcy9AbWljcm9zb2Z0L2Zhc3QtZm91bmRhdGlvbi9kaXN0L2VzbS91dGlsaXRpZXMvd2hpdGVzcGFjZS1maWx0ZXIuanMiLCJ3ZWJwYWNrOi8vQGp1cHl0ZXJsYWIvYXBwbGljYXRpb24tdG9wLy4vbm9kZV9tb2R1bGVzL0BtaWNyb3NvZnQvZmFzdC1mb3VuZGF0aW9uL25vZGVfbW9kdWxlcy90c2xpYi90c2xpYi5lczYuanMiLCJ3ZWJwYWNrOi8vQGp1cHl0ZXJsYWIvYXBwbGljYXRpb24tdG9wLy4vbm9kZV9tb2R1bGVzL0BtaWNyb3NvZnQvZmFzdC13ZWItdXRpbGl0aWVzL2Rpc3QvYXJyYXkuanMiLCJ3ZWJwYWNrOi8vQGp1cHl0ZXJsYWIvYXBwbGljYXRpb24tdG9wLy4vbm9kZV9tb2R1bGVzL0BtaWNyb3NvZnQvZmFzdC13ZWItdXRpbGl0aWVzL2Rpc3QvZG9tLmpzIiwid2VicGFjazovL0BqdXB5dGVybGFiL2FwcGxpY2F0aW9uLXRvcC8uL25vZGVfbW9kdWxlcy9AbWljcm9zb2Z0L2Zhc3Qtd2ViLXV0aWxpdGllcy9kaXN0L2V2ZW50cy5qcyIsIndlYnBhY2s6Ly9AanVweXRlcmxhYi9hcHBsaWNhdGlvbi10b3AvLi9ub2RlX21vZHVsZXMvQG1pY3Jvc29mdC9mYXN0LXdlYi11dGlsaXRpZXMvZGlzdC9zdHJpbmdzLmpzIiwid2VicGFjazovL0BqdXB5dGVybGFiL2FwcGxpY2F0aW9uLXRvcC8uL25vZGVfbW9kdWxlcy9leGVudi1lczYvZGlzdC9jYW4tdXNlLWRvbS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBfX2RlY29yYXRlIH0gZnJvbSBcInRzbGliXCI7XG5pbXBvcnQgeyBhdHRyLCBudWxsYWJsZU51bWJlckNvbnZlcnRlciwgfSBmcm9tIFwiQG1pY3Jvc29mdC9mYXN0LWVsZW1lbnRcIjtcbmltcG9ydCB7IEZvdW5kYXRpb25FbGVtZW50LCB9IGZyb20gXCIuLi9mb3VuZGF0aW9uLWVsZW1lbnQvZm91bmRhdGlvbi1lbGVtZW50LmpzXCI7XG5pbXBvcnQgeyBTdGFydEVuZCB9IGZyb20gXCIuLi9wYXR0ZXJucy9zdGFydC1lbmQuanNcIjtcbmltcG9ydCB7IGFwcGx5TWl4aW5zIH0gZnJvbSBcIi4uL3V0aWxpdGllcy9hcHBseS1taXhpbnMuanNcIjtcbi8qKlxuICogQW4gaW5kaXZpZHVhbCBpdGVtIGluIGFuIHtAbGluayBAbWljcm9zb2Z0L2Zhc3QtZm91bmRhdGlvbiMoQWNjb3JkaW9uOmNsYXNzKSB9LlxuICpcbiAqIEBzbG90IHN0YXJ0IC0gQ29udGVudCB3aGljaCBjYW4gYmUgcHJvdmlkZWQgYmV0d2VlbiB0aGUgaGVhZGluZyBhbmQgdGhlIGljb25cbiAqIEBzbG90IGVuZCAtIENvbnRlbnQgd2hpY2ggY2FuIGJlIHByb3ZpZGVkIGJldHdlZW4gdGhlIHN0YXJ0IHNsb3QgYW5kIGljb25cbiAqIEBzbG90IGhlYWRpbmcgLSBDb250ZW50IHdoaWNoIHNlcnZlcyBhcyB0aGUgYWNjb3JkaW9uIGl0ZW0gaGVhZGluZyBhbmQgdGV4dCBvZiB0aGUgZXhwYW5kIGJ1dHRvblxuICogQHNsb3QgLSBUaGUgZGVmYXVsdCBzbG90IGZvciBhY2NvcmRpb24gaXRlbSBjb250ZW50XG4gKiBAc2xvdCBleHBhbmRlZC1pY29uIC0gVGhlIGV4cGFuZGVkIGljb25cbiAqIEBzbG90IGNvbGxhcHNlZC1pY29uIC0gVGhlIGNvbGxhcHNlZCBpY29uXG4gKiBAZmlyZXMgY2hhbmdlIC0gRmlyZXMgYSBjdXN0b20gJ2NoYW5nZScgZXZlbnQgd2hlbiB0aGUgYnV0dG9uIGlzIGludm9rZWRcbiAqIEBjc3NwYXJ0IGhlYWRpbmcgLSBXcmFwcyB0aGUgYnV0dG9uXG4gKiBAY3NzcGFydCBidXR0b24gLSBUaGUgYnV0dG9uIHdoaWNoIHNlcnZlcyB0byBpbnZva2UgdGhlIGl0ZW1cbiAqIEBjc3NwYXJ0IGhlYWRpbmctY29udGVudCAtIFdyYXBzIHRoZSBzbG90IGZvciB0aGUgaGVhZGluZyBjb250ZW50IHdpdGhpbiB0aGUgYnV0dG9uXG4gKiBAY3NzcGFydCBpY29uIC0gVGhlIGljb24gY29udGFpbmVyXG4gKiBAY3NzcGFydCBleHBhbmRlZC1pY29uIC0gVGhlIGV4cGFuZGVkIGljb24gc2xvdFxuICogQGNzc3BhcnQgY29sbGFwc2VkLWljb24gLSBUaGUgY29sbGFwc2VkIGljb25cbiAqIEBjc3NwYXJ0IHJlZ2lvbiAtIFRoZSB3cmFwcGVyIGZvciB0aGUgYWNjb3JkaW9uIGl0ZW0gY29udGVudFxuICpcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGNsYXNzIEFjY29yZGlvbkl0ZW0gZXh0ZW5kcyBGb3VuZGF0aW9uRWxlbWVudCB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDb25maWd1cmVzIHRoZSB7QGxpbmsgaHR0cHM6Ly93d3cudzMub3JnL1RSL3dhaS1hcmlhLTEuMS8jYXJpYS1sZXZlbCB8IGxldmVsfSBvZiB0aGVcbiAgICAgICAgICogaGVhZGluZyBlbGVtZW50LlxuICAgICAgICAgKlxuICAgICAgICAgKiBAZGVmYXVsdFZhbHVlIDJcbiAgICAgICAgICogQHB1YmxpY1xuICAgICAgICAgKiBAcmVtYXJrc1xuICAgICAgICAgKiBIVE1MIGF0dHJpYnV0ZTogaGVhZGluZy1sZXZlbFxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5oZWFkaW5nbGV2ZWwgPSAyO1xuICAgICAgICAvKipcbiAgICAgICAgICogRXhwYW5kcyBvciBjb2xsYXBzZXMgdGhlIGl0ZW0uXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwdWJsaWNcbiAgICAgICAgICogQHJlbWFya3NcbiAgICAgICAgICogSFRNTCBhdHRyaWJ1dGU6IGV4cGFuZGVkXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmV4cGFuZGVkID0gZmFsc2U7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAaW50ZXJuYWxcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuY2xpY2tIYW5kbGVyID0gKGUpID0+IHtcbiAgICAgICAgICAgIHRoaXMuZXhwYW5kZWQgPSAhdGhpcy5leHBhbmRlZDtcbiAgICAgICAgICAgIHRoaXMuY2hhbmdlKCk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuY2hhbmdlID0gKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy4kZW1pdChcImNoYW5nZVwiKTtcbiAgICAgICAgfTtcbiAgICB9XG59XG5fX2RlY29yYXRlKFtcbiAgICBhdHRyKHtcbiAgICAgICAgYXR0cmlidXRlOiBcImhlYWRpbmctbGV2ZWxcIixcbiAgICAgICAgbW9kZTogXCJmcm9tVmlld1wiLFxuICAgICAgICBjb252ZXJ0ZXI6IG51bGxhYmxlTnVtYmVyQ29udmVydGVyLFxuICAgIH0pXG5dLCBBY2NvcmRpb25JdGVtLnByb3RvdHlwZSwgXCJoZWFkaW5nbGV2ZWxcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIGF0dHIoeyBtb2RlOiBcImJvb2xlYW5cIiB9KVxuXSwgQWNjb3JkaW9uSXRlbS5wcm90b3R5cGUsIFwiZXhwYW5kZWRcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIGF0dHJcbl0sIEFjY29yZGlvbkl0ZW0ucHJvdG90eXBlLCBcImlkXCIsIHZvaWQgMCk7XG5hcHBseU1peGlucyhBY2NvcmRpb25JdGVtLCBTdGFydEVuZCk7XG4iLCJpbXBvcnQgeyBodG1sLCByZWYgfSBmcm9tIFwiQG1pY3Jvc29mdC9mYXN0LWVsZW1lbnRcIjtcbmltcG9ydCB7IGVuZFNsb3RUZW1wbGF0ZSwgc3RhcnRTbG90VGVtcGxhdGUgfSBmcm9tIFwiLi4vcGF0dGVybnMvc3RhcnQtZW5kLmpzXCI7XG4vKipcbiAqIFRoZSB0ZW1wbGF0ZSBmb3IgdGhlIHtAbGluayBAbWljcm9zb2Z0L2Zhc3QtZm91bmRhdGlvbiMoQWNjb3JkaW9uSXRlbTpjbGFzcyl9IGNvbXBvbmVudC5cbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGNvbnN0IGFjY29yZGlvbkl0ZW1UZW1wbGF0ZSA9IChjb250ZXh0LCBkZWZpbml0aW9uKSA9PiBodG1sIGBcbiAgICA8dGVtcGxhdGUgY2xhc3M9XCIke3ggPT4gKHguZXhwYW5kZWQgPyBcImV4cGFuZGVkXCIgOiBcIlwiKX1cIj5cbiAgICAgICAgPGRpdlxuICAgICAgICAgICAgY2xhc3M9XCJoZWFkaW5nXCJcbiAgICAgICAgICAgIHBhcnQ9XCJoZWFkaW5nXCJcbiAgICAgICAgICAgIHJvbGU9XCJoZWFkaW5nXCJcbiAgICAgICAgICAgIGFyaWEtbGV2ZWw9XCIke3ggPT4geC5oZWFkaW5nbGV2ZWx9XCJcbiAgICAgICAgPlxuICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgIGNsYXNzPVwiYnV0dG9uXCJcbiAgICAgICAgICAgICAgICBwYXJ0PVwiYnV0dG9uXCJcbiAgICAgICAgICAgICAgICAke3JlZihcImV4cGFuZGJ1dHRvblwiKX1cbiAgICAgICAgICAgICAgICBhcmlhLWV4cGFuZGVkPVwiJHt4ID0+IHguZXhwYW5kZWR9XCJcbiAgICAgICAgICAgICAgICBhcmlhLWNvbnRyb2xzPVwiJHt4ID0+IHguaWR9LXBhbmVsXCJcbiAgICAgICAgICAgICAgICBpZD1cIiR7eCA9PiB4LmlkfVwiXG4gICAgICAgICAgICAgICAgQGNsaWNrPVwiJHsoeCwgYykgPT4geC5jbGlja0hhbmRsZXIoYy5ldmVudCl9XCJcbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImhlYWRpbmctY29udGVudFwiIHBhcnQ9XCJoZWFkaW5nLWNvbnRlbnRcIj5cbiAgICAgICAgICAgICAgICAgICAgPHNsb3QgbmFtZT1cImhlYWRpbmdcIj48L3Nsb3Q+XG4gICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAke3N0YXJ0U2xvdFRlbXBsYXRlKGNvbnRleHQsIGRlZmluaXRpb24pfVxuICAgICAgICAgICAgJHtlbmRTbG90VGVtcGxhdGUoY29udGV4dCwgZGVmaW5pdGlvbil9XG4gICAgICAgICAgICA8c3BhbiBjbGFzcz1cImljb25cIiBwYXJ0PVwiaWNvblwiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPlxuICAgICAgICAgICAgICAgIDxzbG90IG5hbWU9XCJleHBhbmRlZC1pY29uXCIgcGFydD1cImV4cGFuZGVkLWljb25cIj5cbiAgICAgICAgICAgICAgICAgICAgJHtkZWZpbml0aW9uLmV4cGFuZGVkSWNvbiB8fCBcIlwifVxuICAgICAgICAgICAgICAgIDwvc2xvdD5cbiAgICAgICAgICAgICAgICA8c2xvdCBuYW1lPVwiY29sbGFwc2VkLWljb25cIiBwYXJ0PVwiY29sbGFwc2VkLWljb25cIj5cbiAgICAgICAgICAgICAgICAgICAgJHtkZWZpbml0aW9uLmNvbGxhcHNlZEljb24gfHwgXCJcIn1cbiAgICAgICAgICAgICAgICA8L3Nsb3Q+XG4gICAgICAgICAgICA8c3Bhbj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXZcbiAgICAgICAgICAgIGNsYXNzPVwicmVnaW9uXCJcbiAgICAgICAgICAgIHBhcnQ9XCJyZWdpb25cIlxuICAgICAgICAgICAgaWQ9XCIke3ggPT4geC5pZH0tcGFuZWxcIlxuICAgICAgICAgICAgcm9sZT1cInJlZ2lvblwiXG4gICAgICAgICAgICBhcmlhLWxhYmVsbGVkYnk9XCIke3ggPT4geC5pZH1cIlxuICAgICAgICA+XG4gICAgICAgICAgICA8c2xvdD48L3Nsb3Q+XG4gICAgICAgIDwvZGl2PlxuICAgIDwvdGVtcGxhdGU+XG5gO1xuIiwiZXhwb3J0ICogZnJvbSBcIi4vYWNjb3JkaW9uLWl0ZW0udGVtcGxhdGUuanNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL2FjY29yZGlvbi1pdGVtLmpzXCI7XG4iLCJpbXBvcnQgeyBfX2RlY29yYXRlIH0gZnJvbSBcInRzbGliXCI7XG5pbXBvcnQgeyBhdHRyLCBvYnNlcnZhYmxlIH0gZnJvbSBcIkBtaWNyb3NvZnQvZmFzdC1lbGVtZW50XCI7XG5pbXBvcnQgeyBrZXlBcnJvd0Rvd24sIGtleUFycm93VXAsIGtleUVuZCwga2V5SG9tZSwgd3JhcEluQm91bmRzLCB9IGZyb20gXCJAbWljcm9zb2Z0L2Zhc3Qtd2ViLXV0aWxpdGllc1wiO1xuaW1wb3J0IHsgRm91bmRhdGlvbkVsZW1lbnQgfSBmcm9tIFwiLi4vZm91bmRhdGlvbi1lbGVtZW50L2ZvdW5kYXRpb24tZWxlbWVudC5qc1wiO1xuaW1wb3J0IHsgQWNjb3JkaW9uSXRlbSB9IGZyb20gXCIuLi9hY2NvcmRpb24taXRlbS9hY2NvcmRpb24taXRlbS5qc1wiO1xuLyoqXG4gKiBFeHBhbmQgbW9kZSBmb3Ige0BsaW5rIEFjY29yZGlvbn1cbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGNvbnN0IEFjY29yZGlvbkV4cGFuZE1vZGUgPSB7XG4gICAgLyoqXG4gICAgICogRGVzaWduYXRlcyBvbmx5IGEgc2luZ2xlIHtAbGluayBAbWljcm9zb2Z0L2Zhc3QtZm91bmRhdGlvbiMoQWNjb3JkaW9uSXRlbTpjbGFzcykgfSBjYW4gYmUgb3BlbiBhIHRpbWUuXG4gICAgICovXG4gICAgc2luZ2xlOiBcInNpbmdsZVwiLFxuICAgIC8qKlxuICAgICAqIERlc2lnbmF0ZXMgbXVsdGlwbGUge0BsaW5rIEBtaWNyb3NvZnQvZmFzdC1mb3VuZGF0aW9uIyhBY2NvcmRpb25JdGVtOmNsYXNzKSB8IEFjY29yZGlvbkl0ZW1zfSBjYW4gYmUgb3BlbiBzaW11bHRhbmVvdXNseS5cbiAgICAgKi9cbiAgICBtdWx0aTogXCJtdWx0aVwiLFxufTtcbi8qKlxuICogQW4gQWNjb3JkaW9uIEN1c3RvbSBIVE1MIEVsZW1lbnRcbiAqIEltcGxlbWVudHMge0BsaW5rIGh0dHBzOi8vd3d3LnczLm9yZy9UUi93YWktYXJpYS1wcmFjdGljZXMtMS4xLyNhY2NvcmRpb24gfCBBUklBIEFjY29yZGlvbn0uXG4gKlxuICogQGZpcmVzIGNoYW5nZSAtIEZpcmVzIGEgY3VzdG9tICdjaGFuZ2UnIGV2ZW50IHdoZW4gdGhlIGFjdGl2ZSBpdGVtIGNoYW5nZXNcbiAqIEBjc3NwYXJ0IGl0ZW0gLSBUaGUgc2xvdCBmb3IgdGhlIGFjY29yZGlvbiBpdGVtc1xuICogQHB1YmxpY1xuICpcbiAqIEByZW1hcmtzXG4gKiBEZXNpZ25lZCB0byBiZSB1c2VkIHdpdGgge0BsaW5rIEBtaWNyb3NvZnQvZmFzdC1mb3VuZGF0aW9uI2FjY29yZGlvblRlbXBsYXRlfSBhbmQge0BsaW5rIEBtaWNyb3NvZnQvZmFzdC1mb3VuZGF0aW9uIyhBY2NvcmRpb25JdGVtOmNsYXNzKX0uXG4gKi9cbmV4cG9ydCBjbGFzcyBBY2NvcmRpb24gZXh0ZW5kcyBGb3VuZGF0aW9uRWxlbWVudCB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDb250cm9scyB0aGUgZXhwYW5kIG1vZGUgb2YgdGhlIEFjY29yZGlvbiwgZWl0aGVyIGFsbG93aW5nXG4gICAgICAgICAqIHNpbmdsZSBvciBtdWx0aXBsZSBpdGVtIGV4cGFuc2lvbi5cbiAgICAgICAgICogQHB1YmxpY1xuICAgICAgICAgKlxuICAgICAgICAgKiBAcmVtYXJrc1xuICAgICAgICAgKiBIVE1MIGF0dHJpYnV0ZTogZXhwYW5kLW1vZGVcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZXhwYW5kbW9kZSA9IEFjY29yZGlvbkV4cGFuZE1vZGUubXVsdGk7XG4gICAgICAgIHRoaXMuYWN0aXZlSXRlbUluZGV4ID0gMDtcbiAgICAgICAgdGhpcy5jaGFuZ2UgPSAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLiRlbWl0KFwiY2hhbmdlXCIsIHRoaXMuYWN0aXZlaWQpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLnNldEl0ZW1zID0gKCkgPT4ge1xuICAgICAgICAgICAgdmFyIF9hO1xuICAgICAgICAgICAgaWYgKHRoaXMuYWNjb3JkaW9uSXRlbXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5hY2NvcmRpb25JZHMgPSB0aGlzLmdldEl0ZW1JZHMoKTtcbiAgICAgICAgICAgIHRoaXMuYWNjb3JkaW9uSXRlbXMuZm9yRWFjaCgoaXRlbSwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoaXRlbSBpbnN0YW5jZW9mIEFjY29yZGlvbkl0ZW0pIHtcbiAgICAgICAgICAgICAgICAgICAgaXRlbS5hZGRFdmVudExpc3RlbmVyKFwiY2hhbmdlXCIsIHRoaXMuYWN0aXZlSXRlbUNoYW5nZSk7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzU2luZ2xlRXhwYW5kTW9kZSgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFjdGl2ZUl0ZW1JbmRleCAhPT0gaW5kZXhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IChpdGVtLmV4cGFuZGVkID0gZmFsc2UpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiAoaXRlbS5leHBhbmRlZCA9IHRydWUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IGl0ZW1JZCA9IHRoaXMuYWNjb3JkaW9uSWRzW2luZGV4XTtcbiAgICAgICAgICAgICAgICBpdGVtLnNldEF0dHJpYnV0ZShcImlkXCIsIHR5cGVvZiBpdGVtSWQgIT09IFwic3RyaW5nXCIgPyBgYWNjb3JkaW9uLSR7aW5kZXggKyAxfWAgOiBpdGVtSWQpO1xuICAgICAgICAgICAgICAgIHRoaXMuYWN0aXZlaWQgPSB0aGlzLmFjY29yZGlvbklkc1t0aGlzLmFjdGl2ZUl0ZW1JbmRleF07XG4gICAgICAgICAgICAgICAgaXRlbS5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLmhhbmRsZUl0ZW1LZXlEb3duKTtcbiAgICAgICAgICAgICAgICBpdGVtLmFkZEV2ZW50TGlzdGVuZXIoXCJmb2N1c1wiLCB0aGlzLmhhbmRsZUl0ZW1Gb2N1cyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmICh0aGlzLmlzU2luZ2xlRXhwYW5kTW9kZSgpKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZXhwYW5kZWRJdGVtID0gKF9hID0gdGhpcy5maW5kRXhwYW5kZWRJdGVtKCkpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IHRoaXMuYWNjb3JkaW9uSXRlbXNbMF07XG4gICAgICAgICAgICAgICAgZXhwYW5kZWRJdGVtLnNldEF0dHJpYnV0ZShcImFyaWEtZGlzYWJsZWRcIiwgXCJ0cnVlXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICB0aGlzLnJlbW92ZUl0ZW1MaXN0ZW5lcnMgPSAob2xkVmFsdWUpID0+IHtcbiAgICAgICAgICAgIG9sZFZhbHVlLmZvckVhY2goKGl0ZW0sIGluZGV4KSA9PiB7XG4gICAgICAgICAgICAgICAgaXRlbS5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2hhbmdlXCIsIHRoaXMuYWN0aXZlSXRlbUNoYW5nZSk7XG4gICAgICAgICAgICAgICAgaXRlbS5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLmhhbmRsZUl0ZW1LZXlEb3duKTtcbiAgICAgICAgICAgICAgICBpdGVtLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJmb2N1c1wiLCB0aGlzLmhhbmRsZUl0ZW1Gb2N1cyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5hY3RpdmVJdGVtQ2hhbmdlID0gKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICBpZiAoZXZlbnQuZGVmYXVsdFByZXZlbnRlZCB8fCBldmVudC50YXJnZXQgIT09IGV2ZW50LmN1cnJlbnRUYXJnZXQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgY29uc3Qgc2VsZWN0ZWRJdGVtID0gZXZlbnQudGFyZ2V0O1xuICAgICAgICAgICAgdGhpcy5hY3RpdmVpZCA9IHNlbGVjdGVkSXRlbS5nZXRBdHRyaWJ1dGUoXCJpZFwiKTtcbiAgICAgICAgICAgIGlmICh0aGlzLmlzU2luZ2xlRXhwYW5kTW9kZSgpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZXNldEl0ZW1zKCk7XG4gICAgICAgICAgICAgICAgc2VsZWN0ZWRJdGVtLmV4cGFuZGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBzZWxlY3RlZEl0ZW0uc2V0QXR0cmlidXRlKFwiYXJpYS1kaXNhYmxlZFwiLCBcInRydWVcIik7XG4gICAgICAgICAgICAgICAgdGhpcy5hY2NvcmRpb25JdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghaXRlbS5oYXNBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiKSAmJiBpdGVtLmlkICE9PSB0aGlzLmFjdGl2ZWlkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVtLnJlbW92ZUF0dHJpYnV0ZShcImFyaWEtZGlzYWJsZWRcIik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuYWN0aXZlSXRlbUluZGV4ID0gQXJyYXkuZnJvbSh0aGlzLmFjY29yZGlvbkl0ZW1zKS5pbmRleE9mKHNlbGVjdGVkSXRlbSk7XG4gICAgICAgICAgICB0aGlzLmNoYW5nZSgpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmhhbmRsZUl0ZW1LZXlEb3duID0gKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICAvLyBvbmx5IGhhbmRsZSB0aGUga2V5ZG93biBpZiB0aGUgZXZlbnQgdGFyZ2V0IGlzIHRoZSBhY2NvcmRpb24gaXRlbVxuICAgICAgICAgICAgLy8gcHJldmVudHMgYXJyb3cga2V5cyBmcm9tIG1vdmluZyBmb2N1cyB0byBhY2NvcmRpb24gaGVhZGVycyB3aGVuIGZvY3VzIGlzIG9uIGFjY29yZGlvbiBpdGVtIHBhbmVsIGNvbnRlbnRcbiAgICAgICAgICAgIGlmIChldmVudC50YXJnZXQgIT09IGV2ZW50LmN1cnJlbnRUYXJnZXQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmFjY29yZGlvbklkcyA9IHRoaXMuZ2V0SXRlbUlkcygpO1xuICAgICAgICAgICAgc3dpdGNoIChldmVudC5rZXkpIHtcbiAgICAgICAgICAgICAgICBjYXNlIGtleUFycm93VXA6XG4gICAgICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWRqdXN0KC0xKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBrZXlBcnJvd0Rvd246XG4gICAgICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWRqdXN0KDEpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIGtleUhvbWU6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWN0aXZlSXRlbUluZGV4ID0gMDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5mb2N1c0l0ZW0oKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBrZXlFbmQ6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWN0aXZlSXRlbUluZGV4ID0gdGhpcy5hY2NvcmRpb25JdGVtcy5sZW5ndGggLSAxO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmZvY3VzSXRlbSgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5oYW5kbGVJdGVtRm9jdXMgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIC8vIHVwZGF0ZSB0aGUgYWN0aXZlIGl0ZW0gaW5kZXggaWYgdGhlIGZvY3VzIG1vdmVzIHRvIGFuIGFjY29yZGlvbiBpdGVtIHZpYSBhIGRpZmZlcmVudCBtZXRob2Qgb3RoZXIgdGhhbiB0aGUgdXAgYW5kIGRvd24gYXJyb3cga2V5IGFjdGlvbnNcbiAgICAgICAgICAgIC8vIG9ubHkgZG8gc28gaWYgdGhlIGZvY3VzIGlzIGFjdHVhbGx5IG9uIHRoZSBhY2NvcmRpb24gaXRlbSBhbmQgbm90IG9uIGFueSBvZiBpdHMgY2hpbGRyZW5cbiAgICAgICAgICAgIGlmIChldmVudC50YXJnZXQgPT09IGV2ZW50LmN1cnJlbnRUYXJnZXQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBmb2N1c2VkSXRlbSA9IGV2ZW50LnRhcmdldDtcbiAgICAgICAgICAgICAgICBjb25zdCBmb2N1c2VkSW5kZXggPSAodGhpcy5hY3RpdmVJdGVtSW5kZXggPSBBcnJheS5mcm9tKHRoaXMuYWNjb3JkaW9uSXRlbXMpLmluZGV4T2YoZm9jdXNlZEl0ZW0pKTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5hY3RpdmVJdGVtSW5kZXggIT09IGZvY3VzZWRJbmRleCAmJiBmb2N1c2VkSW5kZXggIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWN0aXZlSXRlbUluZGV4ID0gZm9jdXNlZEluZGV4O1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmFjdGl2ZWlkID0gdGhpcy5hY2NvcmRpb25JZHNbdGhpcy5hY3RpdmVJdGVtSW5kZXhdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgYWNjb3JkaW9uSXRlbXNDaGFuZ2VkKG9sZFZhbHVlLCBuZXdWYWx1ZSkge1xuICAgICAgICBpZiAodGhpcy4kZmFzdENvbnRyb2xsZXIuaXNDb25uZWN0ZWQpIHtcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlSXRlbUxpc3RlbmVycyhvbGRWYWx1ZSk7XG4gICAgICAgICAgICB0aGlzLnNldEl0ZW1zKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZmluZEV4cGFuZGVkSXRlbSgpIHtcbiAgICAgICAgZm9yIChsZXQgaXRlbSA9IDA7IGl0ZW0gPCB0aGlzLmFjY29yZGlvbkl0ZW1zLmxlbmd0aDsgaXRlbSsrKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5hY2NvcmRpb25JdGVtc1tpdGVtXS5nZXRBdHRyaWJ1dGUoXCJleHBhbmRlZFwiKSA9PT0gXCJ0cnVlXCIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5hY2NvcmRpb25JdGVtc1tpdGVtXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgcmVzZXRJdGVtcygpIHtcbiAgICAgICAgdGhpcy5hY2NvcmRpb25JdGVtcy5mb3JFYWNoKChpdGVtLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgaXRlbS5leHBhbmRlZCA9IGZhbHNlO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgZ2V0SXRlbUlkcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYWNjb3JkaW9uSXRlbXMubWFwKChhY2NvcmRpb25JdGVtKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gYWNjb3JkaW9uSXRlbS5nZXRBdHRyaWJ1dGUoXCJpZFwiKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGlzU2luZ2xlRXhwYW5kTW9kZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZXhwYW5kbW9kZSA9PT0gQWNjb3JkaW9uRXhwYW5kTW9kZS5zaW5nbGU7XG4gICAgfVxuICAgIGFkanVzdChhZGp1c3RtZW50KSB7XG4gICAgICAgIHRoaXMuYWN0aXZlSXRlbUluZGV4ID0gd3JhcEluQm91bmRzKDAsIHRoaXMuYWNjb3JkaW9uSXRlbXMubGVuZ3RoIC0gMSwgdGhpcy5hY3RpdmVJdGVtSW5kZXggKyBhZGp1c3RtZW50KTtcbiAgICAgICAgdGhpcy5mb2N1c0l0ZW0oKTtcbiAgICB9XG4gICAgZm9jdXNJdGVtKCkge1xuICAgICAgICBjb25zdCBlbGVtZW50ID0gdGhpcy5hY2NvcmRpb25JdGVtc1t0aGlzLmFjdGl2ZUl0ZW1JbmRleF07XG4gICAgICAgIGlmIChlbGVtZW50IGluc3RhbmNlb2YgQWNjb3JkaW9uSXRlbSkge1xuICAgICAgICAgICAgZWxlbWVudC5leHBhbmRidXR0b24uZm9jdXMoKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbl9fZGVjb3JhdGUoW1xuICAgIGF0dHIoeyBhdHRyaWJ1dGU6IFwiZXhwYW5kLW1vZGVcIiB9KVxuXSwgQWNjb3JkaW9uLnByb3RvdHlwZSwgXCJleHBhbmRtb2RlXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBvYnNlcnZhYmxlXG5dLCBBY2NvcmRpb24ucHJvdG90eXBlLCBcImFjY29yZGlvbkl0ZW1zXCIsIHZvaWQgMCk7XG4iLCJpbXBvcnQgeyBlbGVtZW50cywgaHRtbCwgc2xvdHRlZCB9IGZyb20gXCJAbWljcm9zb2Z0L2Zhc3QtZWxlbWVudFwiO1xuLyoqXG4gKiBUaGUgdGVtcGxhdGUgZm9yIHRoZSB7QGxpbmsgQG1pY3Jvc29mdC9mYXN0LWZvdW5kYXRpb24jQWNjb3JkaW9ufSBjb21wb25lbnQuXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjb25zdCBhY2NvcmRpb25UZW1wbGF0ZSA9IChjb250ZXh0LCBkZWZpbml0aW9uKSA9PiAvKiBUT0RPOiBkZXByZWNhdGUgc2xvdCBuYW1lIGBpdGVtYCB0byBvbmx5IHN1cHBvcnQgZGVmYXVsdCBzbG90IGh0dHBzOi8vZ2l0aHViLmNvbS9taWNyb3NvZnQvZmFzdC9pc3N1ZXMvNTUxNSAqLyBodG1sIGBcbiAgICA8dGVtcGxhdGU+XG4gICAgICAgIDxzbG90ICR7c2xvdHRlZCh7IHByb3BlcnR5OiBcImFjY29yZGlvbkl0ZW1zXCIsIGZpbHRlcjogZWxlbWVudHMoKSB9KX0+PC9zbG90PlxuICAgICAgICA8c2xvdCBuYW1lPVwiaXRlbVwiIHBhcnQ9XCJpdGVtXCIgJHtzbG90dGVkKFwiYWNjb3JkaW9uSXRlbXNcIil9Pjwvc2xvdD5cbiAgICA8L3RlbXBsYXRlPlxuYDtcbiIsImV4cG9ydCAqIGZyb20gXCIuL2FjY29yZGlvbi50ZW1wbGF0ZS5qc1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vYWNjb3JkaW9uLmpzXCI7XG4iLCJpbXBvcnQgeyBfX2RlY29yYXRlIH0gZnJvbSBcInRzbGliXCI7XG5pbXBvcnQgeyBhdHRyLCBvYnNlcnZhYmxlIH0gZnJvbSBcIkBtaWNyb3NvZnQvZmFzdC1lbGVtZW50XCI7XG5pbXBvcnQgeyBGb3VuZGF0aW9uRWxlbWVudCwgfSBmcm9tIFwiLi4vZm91bmRhdGlvbi1lbGVtZW50L2ZvdW5kYXRpb24tZWxlbWVudC5qc1wiO1xuaW1wb3J0IHsgQVJJQUdsb2JhbFN0YXRlc0FuZFByb3BlcnRpZXMsIFN0YXJ0RW5kLCB9IGZyb20gXCIuLi9wYXR0ZXJucy9pbmRleC5qc1wiO1xuaW1wb3J0IHsgYXBwbHlNaXhpbnMgfSBmcm9tIFwiLi4vdXRpbGl0aWVzL2FwcGx5LW1peGlucy5qc1wiO1xuLyoqXG4gKiBBbiBBbmNob3IgQ3VzdG9tIEhUTUwgRWxlbWVudC5cbiAqIEJhc2VkIGxhcmdlbHkgb24gdGhlIHtAbGluayBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9IVE1ML0VsZW1lbnQvYSB8IDxhPiBlbGVtZW50IH0uXG4gKlxuICogQHNsb3Qgc3RhcnQgLSBDb250ZW50IHdoaWNoIGNhbiBiZSBwcm92aWRlZCBiZWZvcmUgdGhlIGFuY2hvciBjb250ZW50XG4gKiBAc2xvdCBlbmQgLSBDb250ZW50IHdoaWNoIGNhbiBiZSBwcm92aWRlZCBhZnRlciB0aGUgYW5jaG9yIGNvbnRlbnRcbiAqIEBzbG90IC0gVGhlIGRlZmF1bHQgc2xvdCBmb3IgYW5jaG9yIGNvbnRlbnRcbiAqIEBjc3NwYXJ0IGNvbnRyb2wgLSBUaGUgYW5jaG9yIGVsZW1lbnRcbiAqIEBjc3NwYXJ0IGNvbnRlbnQgLSBUaGUgZWxlbWVudCB3cmFwcGluZyBhbmNob3IgY29udGVudFxuICpcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGNsYXNzIEFuY2hvciBleHRlbmRzIEZvdW5kYXRpb25FbGVtZW50IHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIE92ZXJyaWRlcyB0aGUgZm9jdXMgY2FsbCBmb3Igd2hlcmUgZGVsZWdhdGVzRm9jdXMgaXMgdW5zdXBwb3J0ZWQuXG4gICAgICAgICAqIFRoaXMgY2hlY2sgd29ya3MgZm9yIENocm9tZSwgRWRnZSBDaHJvbWl1bSwgRmlyZUZveCwgYW5kIFNhZmFyaVxuICAgICAgICAgKiBSZWxldmFudCBQUiBvbiB0aGUgRmlyZWZveCBicm93c2VyOiBodHRwczovL3BoYWJyaWNhdG9yLnNlcnZpY2VzLm1vemlsbGEuY29tL0QxMjM4NThcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuaGFuZGxlVW5zdXBwb3J0ZWREZWxlZ2F0ZXNGb2N1cyA9ICgpID0+IHtcbiAgICAgICAgICAgIHZhciBfYTtcbiAgICAgICAgICAgIC8vIENoZWNrIHRvIHNlZSBpZiBkZWxlZ2F0ZXNGb2N1cyBpcyBzdXBwb3J0ZWRcbiAgICAgICAgICAgIGlmICh3aW5kb3cuU2hhZG93Um9vdCAmJlxuICAgICAgICAgICAgICAgICF3aW5kb3cuU2hhZG93Um9vdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkoXCJkZWxlZ2F0ZXNGb2N1c1wiKSAmJlxuICAgICAgICAgICAgICAgICgoX2EgPSB0aGlzLiRmYXN0Q29udHJvbGxlci5kZWZpbml0aW9uLnNoYWRvd09wdGlvbnMpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5kZWxlZ2F0ZXNGb2N1cykpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmZvY3VzID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB2YXIgX2E7XG4gICAgICAgICAgICAgICAgICAgIChfYSA9IHRoaXMuY29udHJvbCkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmZvY3VzKCk7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgICAgIHN1cGVyLmNvbm5lY3RlZENhbGxiYWNrKCk7XG4gICAgICAgIHRoaXMuaGFuZGxlVW5zdXBwb3J0ZWREZWxlZ2F0ZXNGb2N1cygpO1xuICAgIH1cbn1cbl9fZGVjb3JhdGUoW1xuICAgIGF0dHJcbl0sIEFuY2hvci5wcm90b3R5cGUsIFwiZG93bmxvYWRcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIGF0dHJcbl0sIEFuY2hvci5wcm90b3R5cGUsIFwiaHJlZlwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgYXR0clxuXSwgQW5jaG9yLnByb3RvdHlwZSwgXCJocmVmbGFuZ1wiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgYXR0clxuXSwgQW5jaG9yLnByb3RvdHlwZSwgXCJwaW5nXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBhdHRyXG5dLCBBbmNob3IucHJvdG90eXBlLCBcInJlZmVycmVycG9saWN5XCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBhdHRyXG5dLCBBbmNob3IucHJvdG90eXBlLCBcInJlbFwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgYXR0clxuXSwgQW5jaG9yLnByb3RvdHlwZSwgXCJ0YXJnZXRcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIGF0dHJcbl0sIEFuY2hvci5wcm90b3R5cGUsIFwidHlwZVwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgb2JzZXJ2YWJsZVxuXSwgQW5jaG9yLnByb3RvdHlwZSwgXCJkZWZhdWx0U2xvdHRlZENvbnRlbnRcIiwgdm9pZCAwKTtcbi8qKlxuICogSW5jbHVkZXMgQVJJQSBzdGF0ZXMgYW5kIHByb3BlcnRpZXMgcmVsYXRpbmcgdG8gdGhlIEFSSUEgbGluayByb2xlXG4gKlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgY2xhc3MgRGVsZWdhdGVzQVJJQUxpbmsge1xufVxuX19kZWNvcmF0ZShbXG4gICAgYXR0cih7IGF0dHJpYnV0ZTogXCJhcmlhLWV4cGFuZGVkXCIgfSlcbl0sIERlbGVnYXRlc0FSSUFMaW5rLnByb3RvdHlwZSwgXCJhcmlhRXhwYW5kZWRcIiwgdm9pZCAwKTtcbmFwcGx5TWl4aW5zKERlbGVnYXRlc0FSSUFMaW5rLCBBUklBR2xvYmFsU3RhdGVzQW5kUHJvcGVydGllcyk7XG5hcHBseU1peGlucyhBbmNob3IsIFN0YXJ0RW5kLCBEZWxlZ2F0ZXNBUklBTGluayk7XG4iLCJpbXBvcnQgeyBodG1sLCByZWYsIHNsb3R0ZWQgfSBmcm9tIFwiQG1pY3Jvc29mdC9mYXN0LWVsZW1lbnRcIjtcbmltcG9ydCB7IGVuZFNsb3RUZW1wbGF0ZSwgc3RhcnRTbG90VGVtcGxhdGUgfSBmcm9tIFwiLi4vcGF0dGVybnMvc3RhcnQtZW5kLmpzXCI7XG4vKipcbiAqIFRoZSB0ZW1wbGF0ZSBmb3IgdGhlIHtAbGluayBAbWljcm9zb2Z0L2Zhc3QtZm91bmRhdGlvbiMoQW5jaG9yOmNsYXNzKX0gY29tcG9uZW50LlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgY29uc3QgYW5jaG9yVGVtcGxhdGUgPSAoY29udGV4dCwgZGVmaW5pdGlvbikgPT4gaHRtbCBgXG4gICAgPGFcbiAgICAgICAgY2xhc3M9XCJjb250cm9sXCJcbiAgICAgICAgcGFydD1cImNvbnRyb2xcIlxuICAgICAgICBkb3dubG9hZD1cIiR7eCA9PiB4LmRvd25sb2FkfVwiXG4gICAgICAgIGhyZWY9XCIke3ggPT4geC5ocmVmfVwiXG4gICAgICAgIGhyZWZsYW5nPVwiJHt4ID0+IHguaHJlZmxhbmd9XCJcbiAgICAgICAgcGluZz1cIiR7eCA9PiB4LnBpbmd9XCJcbiAgICAgICAgcmVmZXJyZXJwb2xpY3k9XCIke3ggPT4geC5yZWZlcnJlcnBvbGljeX1cIlxuICAgICAgICByZWw9XCIke3ggPT4geC5yZWx9XCJcbiAgICAgICAgdGFyZ2V0PVwiJHt4ID0+IHgudGFyZ2V0fVwiXG4gICAgICAgIHR5cGU9XCIke3ggPT4geC50eXBlfVwiXG4gICAgICAgIGFyaWEtYXRvbWljPVwiJHt4ID0+IHguYXJpYUF0b21pY31cIlxuICAgICAgICBhcmlhLWJ1c3k9XCIke3ggPT4geC5hcmlhQnVzeX1cIlxuICAgICAgICBhcmlhLWNvbnRyb2xzPVwiJHt4ID0+IHguYXJpYUNvbnRyb2xzfVwiXG4gICAgICAgIGFyaWEtY3VycmVudD1cIiR7eCA9PiB4LmFyaWFDdXJyZW50fVwiXG4gICAgICAgIGFyaWEtZGVzY3JpYmVkYnk9XCIke3ggPT4geC5hcmlhRGVzY3JpYmVkYnl9XCJcbiAgICAgICAgYXJpYS1kZXRhaWxzPVwiJHt4ID0+IHguYXJpYURldGFpbHN9XCJcbiAgICAgICAgYXJpYS1kaXNhYmxlZD1cIiR7eCA9PiB4LmFyaWFEaXNhYmxlZH1cIlxuICAgICAgICBhcmlhLWVycm9ybWVzc2FnZT1cIiR7eCA9PiB4LmFyaWFFcnJvcm1lc3NhZ2V9XCJcbiAgICAgICAgYXJpYS1leHBhbmRlZD1cIiR7eCA9PiB4LmFyaWFFeHBhbmRlZH1cIlxuICAgICAgICBhcmlhLWZsb3d0bz1cIiR7eCA9PiB4LmFyaWFGbG93dG99XCJcbiAgICAgICAgYXJpYS1oYXNwb3B1cD1cIiR7eCA9PiB4LmFyaWFIYXNwb3B1cH1cIlxuICAgICAgICBhcmlhLWhpZGRlbj1cIiR7eCA9PiB4LmFyaWFIaWRkZW59XCJcbiAgICAgICAgYXJpYS1pbnZhbGlkPVwiJHt4ID0+IHguYXJpYUludmFsaWR9XCJcbiAgICAgICAgYXJpYS1rZXlzaG9ydGN1dHM9XCIke3ggPT4geC5hcmlhS2V5c2hvcnRjdXRzfVwiXG4gICAgICAgIGFyaWEtbGFiZWw9XCIke3ggPT4geC5hcmlhTGFiZWx9XCJcbiAgICAgICAgYXJpYS1sYWJlbGxlZGJ5PVwiJHt4ID0+IHguYXJpYUxhYmVsbGVkYnl9XCJcbiAgICAgICAgYXJpYS1saXZlPVwiJHt4ID0+IHguYXJpYUxpdmV9XCJcbiAgICAgICAgYXJpYS1vd25zPVwiJHt4ID0+IHguYXJpYU93bnN9XCJcbiAgICAgICAgYXJpYS1yZWxldmFudD1cIiR7eCA9PiB4LmFyaWFSZWxldmFudH1cIlxuICAgICAgICBhcmlhLXJvbGVkZXNjcmlwdGlvbj1cIiR7eCA9PiB4LmFyaWFSb2xlZGVzY3JpcHRpb259XCJcbiAgICAgICAgJHtyZWYoXCJjb250cm9sXCIpfVxuICAgID5cbiAgICAgICAgJHtzdGFydFNsb3RUZW1wbGF0ZShjb250ZXh0LCBkZWZpbml0aW9uKX1cbiAgICAgICAgPHNwYW4gY2xhc3M9XCJjb250ZW50XCIgcGFydD1cImNvbnRlbnRcIj5cbiAgICAgICAgICAgIDxzbG90ICR7c2xvdHRlZChcImRlZmF1bHRTbG90dGVkQ29udGVudFwiKX0+PC9zbG90PlxuICAgICAgICA8L3NwYW4+XG4gICAgICAgICR7ZW5kU2xvdFRlbXBsYXRlKGNvbnRleHQsIGRlZmluaXRpb24pfVxuICAgIDwvYT5cbmA7XG4iLCJleHBvcnQgKiBmcm9tIFwiLi9hbmNob3IudGVtcGxhdGUuanNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL2FuY2hvci5qc1wiO1xuIiwiLyoqXG4gKiBCdWlsZGluZyBibG9ja3MgLSBwYXJ0aWFsIGNvbmZpZ3NcbiAqL1xuLyoqXG4gKiBBIHJlZ2lvbiB0aGF0IG1hdGNoZXMgdGhlIHNpemUgYW5kIHBvc2l0aW9uIG9mIHRoZSBhbmNob3IgaG9yaXpvbnRhbGx5XG4gKi9cbmNvbnN0IGhvcml6b250YWxBbmNob3JPdmVybGF5ID0ge1xuICAgIGhvcml6b250YWxEZWZhdWx0UG9zaXRpb246IFwiY2VudGVyXCIsXG4gICAgaG9yaXpvbnRhbFBvc2l0aW9uaW5nTW9kZTogXCJsb2NrdG9kZWZhdWx0XCIsXG4gICAgaG9yaXpvbnRhbEluc2V0OiBmYWxzZSxcbiAgICBob3Jpem9udGFsU2NhbGluZzogXCJhbmNob3JcIixcbn07XG4vKipcbiAqIEV4cG9ydGVkIGNvbmZpZ3NcbiAqL1xuLyoqXG4gKiBBIHJlZ2lvbiB0aGF0IGFsd2F5cyBwbGFjZXMgaXRzZWxmIGFib3ZlIHRoZSBhbmNob3IsIGhhc1xuICogYSB3aWR0aCB0byBtYXRjaCB0aGUgYW5jaG9yLCBhbmQgaXMgc2l6ZWQgdmVydGljYWxseSBieSBjb250ZW50XG4gKlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgY29uc3QgRmx5b3V0UG9zVG9wID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBob3Jpem9udGFsQW5jaG9yT3ZlcmxheSksIHsgdmVydGljYWxEZWZhdWx0UG9zaXRpb246IFwidG9wXCIsIHZlcnRpY2FsUG9zaXRpb25pbmdNb2RlOiBcImxvY2t0b2RlZmF1bHRcIiwgdmVydGljYWxJbnNldDogZmFsc2UsIHZlcnRpY2FsU2NhbGluZzogXCJjb250ZW50XCIgfSk7XG4vKipcbiAqIEEgcmVnaW9uIHRoYXQgYWx3YXlzIHBsYWNlcyBpdHNlbGYgYmVsb3cgdGhlIGFuY2hvciwgaGFzXG4gKiBhIHdpZHRoIHRvIG1hdGNoIHRoZSBhbmNob3IsIGFuZCBpcyBzaXplZCB2ZXJ0aWNhbGx5IGJ5IGNvbnRlbnRcbiAqXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjb25zdCBGbHlvdXRQb3NCb3R0b20gPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIGhvcml6b250YWxBbmNob3JPdmVybGF5KSwgeyB2ZXJ0aWNhbERlZmF1bHRQb3NpdGlvbjogXCJib3R0b21cIiwgdmVydGljYWxQb3NpdGlvbmluZ01vZGU6IFwibG9ja3RvZGVmYXVsdFwiLCB2ZXJ0aWNhbEluc2V0OiBmYWxzZSwgdmVydGljYWxTY2FsaW5nOiBcImNvbnRlbnRcIiB9KTtcbi8qKlxuICogQSByZWdpb24gdGhhdCBwbGFjZXMgaXRzZWxmIGFib3ZlIG9yIGJlbG93IHRoZSBhbmNob3JcbiAqIGJhc2VkIG9uIGF2YWlsYWJsZSBzcGFjZSwgaGFzIGEgd2lkdGggdG8gbWF0Y2ggdGhlIGFuY2hvcixcbiAqIGFuZCBpcyBzaXplZCB2ZXJ0aWNhbGx5IGJ5IGNvbnRlbnRcbiAqXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjb25zdCBGbHlvdXRQb3NUYWxsZXN0ID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBob3Jpem9udGFsQW5jaG9yT3ZlcmxheSksIHsgdmVydGljYWxQb3NpdGlvbmluZ01vZGU6IFwiZHluYW1pY1wiLCB2ZXJ0aWNhbEluc2V0OiBmYWxzZSwgdmVydGljYWxTY2FsaW5nOiBcImNvbnRlbnRcIiB9KTtcbi8qKlxuICogQSByZWdpb24gdGhhdCBhbHdheXMgcGxhY2VzIGl0c2VsZiBhYm92ZSB0aGUgYW5jaG9yLCBoYXNcbiAqIGEgd2lkdGggdG8gbWF0Y2ggdGhlIGFuY2hvciwgYW5kIGlzIHNpemVkIHZlcnRpY2FsbHkgYnkgYXZhaWxhYmxlIHNwYWNlXG4gKlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgY29uc3QgRmx5b3V0UG9zVG9wRmlsbCA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgRmx5b3V0UG9zVG9wKSwgeyB2ZXJ0aWNhbFNjYWxpbmc6IFwiZmlsbFwiIH0pO1xuLyoqXG4gKiBBIHJlZ2lvbiB0aGF0IGFsd2F5cyBwbGFjZXMgaXRzZWxmIGJlbG93IHRoZSBhbmNob3IsIGhhc1xuICogYSB3aWR0aCB0byBtYXRjaCB0aGUgYW5jaG9yLCBhbmQgaXMgc2l6ZWQgdmVydGljYWxseSBieSBhdmFpbGFibGUgc3BhY2VcbiAqXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjb25zdCBGbHlvdXRQb3NCb3R0b21GaWxsID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBGbHlvdXRQb3NCb3R0b20pLCB7IHZlcnRpY2FsU2NhbGluZzogXCJmaWxsXCIgfSk7XG4vKipcbiAqIEEgcmVnaW9uIHRoYXQgcGxhY2VzIGl0c2VsZiBhYm92ZSBvciBiZWxvdyB0aGUgYW5jaG9yXG4gKiBiYXNlZCBvbiBhdmFpbGFibGUgc3BhY2UsIGhhcyBhIHdpZHRoIHRvIG1hdGNoIHRoZSBhbmNob3IsXG4gKiBhbmQgaXMgc2l6ZWQgdmVydGljYWxseSBieSBhdmFpbGFibGUgc3BhY2VcbiAqXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjb25zdCBGbHlvdXRQb3NUYWxsZXN0RmlsbCA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgRmx5b3V0UG9zVGFsbGVzdCksIHsgdmVydGljYWxTY2FsaW5nOiBcImZpbGxcIiB9KTtcbiIsImltcG9ydCB7IF9fZGVjb3JhdGUgfSBmcm9tIFwidHNsaWJcIjtcbmltcG9ydCB7IGF0dHIsIERPTSwgb2JzZXJ2YWJsZSB9IGZyb20gXCJAbWljcm9zb2Z0L2Zhc3QtZWxlbWVudFwiO1xuaW1wb3J0IHsgRGlyZWN0aW9uLCBldmVudFJlc2l6ZSwgZXZlbnRTY3JvbGwgfSBmcm9tIFwiQG1pY3Jvc29mdC9mYXN0LXdlYi11dGlsaXRpZXNcIjtcbmltcG9ydCB7IEZvdW5kYXRpb25FbGVtZW50IH0gZnJvbSBcIi4uL2ZvdW5kYXRpb24tZWxlbWVudC9mb3VuZGF0aW9uLWVsZW1lbnQuanNcIjtcbmltcG9ydCB7IGdldERpcmVjdGlvbiB9IGZyb20gXCIuLi91dGlsaXRpZXMvZGlyZWN0aW9uLmpzXCI7XG5pbXBvcnQgeyBJbnRlcnNlY3Rpb25TZXJ2aWNlIH0gZnJvbSBcIi4uL3V0aWxpdGllcy9pbnRlcnNlY3Rpb24tc2VydmljZS5qc1wiO1xuLyoqXG4gKiBBbiBhbmNob3JlZCByZWdpb24gQ3VzdG9tIEhUTUwgRWxlbWVudC5cbiAqXG4gKiBAc2xvdCAtIFRoZSBkZWZhdWx0IHNsb3QgZm9yIHRoZSBjb250ZW50XG4gKiBAZmlyZXMgbG9hZGVkIC0gRmlyZXMgYSBjdXN0b20gJ2xvYWRlZCcgZXZlbnQgd2hlbiB0aGUgcmVnaW9uIGlzIGxvYWRlZCBhbmQgdmlzaWJsZVxuICogQGZpcmVzIHBvc2l0aW9uY2hhbmdlIC0gRmlyZXMgYSBjdXN0b20gJ3Bvc2l0aW9uY2hhbmdlJyBldmVudCB3aGVuIHRoZSBwb3NpdGlvbiBoYXMgY2hhbmdlZFxuICpcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGNsYXNzIEFuY2hvcmVkUmVnaW9uIGV4dGVuZHMgRm91bmRhdGlvbkVsZW1lbnQge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlciguLi5hcmd1bWVudHMpO1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIEhUTUwgSUQgb2YgdGhlIGFuY2hvciBlbGVtZW50IHRoaXMgcmVnaW9uIGlzIHBvc2l0aW9uZWQgcmVsYXRpdmUgdG9cbiAgICAgICAgICpcbiAgICAgICAgICogQHB1YmxpY1xuICAgICAgICAgKiBAcmVtYXJrc1xuICAgICAgICAgKiBIVE1MIEF0dHJpYnV0ZTogYW5jaG9yXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmFuY2hvciA9IFwiXCI7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgSFRNTCBJRCBvZiB0aGUgdmlld3BvcnQgZWxlbWVudCB0aGlzIHJlZ2lvbiBpcyBwb3NpdGlvbmVkIHJlbGF0aXZlIHRvXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwdWJsaWNcbiAgICAgICAgICogQHJlbWFya3NcbiAgICAgICAgICogSFRNTCBBdHRyaWJ1dGU6IGFuY2hvclxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy52aWV3cG9ydCA9IFwiXCI7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTZXRzIHdoYXQgbG9naWMgdGhlIGNvbXBvbmVudCB1c2VzIHRvIGRldGVybWluZSBob3Jpem9udGFsIHBsYWNlbWVudC5cbiAgICAgICAgICogJ2xvY2t0b2RlZmF1bHQnIGZvcmNlcyB0aGUgZGVmYXVsdCBwb3NpdGlvblxuICAgICAgICAgKiAnZHluYW1pYycgZGVjaWRlcyBwbGFjZW1lbnQgYmFzZWQgb24gYXZhaWxhYmxlIHNwYWNlXG4gICAgICAgICAqICd1bmNvbnRyb2xsZWQnIGRvZXMgbm90IGNvbnRyb2wgcGxhY2VtZW50IG9uIHRoZSBob3Jpem9udGFsIGF4aXNcbiAgICAgICAgICpcbiAgICAgICAgICogQHB1YmxpY1xuICAgICAgICAgKiBAcmVtYXJrc1xuICAgICAgICAgKiBIVE1MIEF0dHJpYnV0ZTogaG9yaXpvbnRhbC1wb3NpdGlvbmluZy1tb2RlXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmhvcml6b250YWxQb3NpdGlvbmluZ01vZGUgPSBcInVuY29udHJvbGxlZFwiO1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIGRlZmF1bHQgaG9yaXpvbnRhbCBwb3NpdGlvbiBvZiB0aGUgcmVnaW9uIHJlbGF0aXZlIHRvIHRoZSBhbmNob3IgZWxlbWVudFxuICAgICAgICAgKlxuICAgICAgICAgKiBAcHVibGljXG4gICAgICAgICAqIEByZW1hcmtzXG4gICAgICAgICAqIEhUTUwgQXR0cmlidXRlOiBob3Jpem9udGFsLWRlZmF1bHQtcG9zaXRpb25cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuaG9yaXpvbnRhbERlZmF1bHRQb3NpdGlvbiA9IFwidW5zZXRcIjtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFdoZXRoZXIgdGhlIHJlZ2lvbiByZW1haW5zIGluIHRoZSB2aWV3cG9ydCAoaWUuIGRldGFjaGVzIGZyb20gdGhlIGFuY2hvcikgb24gdGhlIGhvcml6b250YWwgYXhpc1xuICAgICAgICAgKlxuICAgICAgICAgKiBAcHVibGljXG4gICAgICAgICAqIEByZW1hcmtzXG4gICAgICAgICAqIEhUTUwgQXR0cmlidXRlOiBob3Jpem9udGFsLXZpZXdwb3J0LWxvY2tcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuaG9yaXpvbnRhbFZpZXdwb3J0TG9jayA9IGZhbHNlO1xuICAgICAgICAvKipcbiAgICAgICAgICogV2hldGhlciB0aGUgcmVnaW9uIG92ZXJsYXBzIHRoZSBhbmNob3Igb24gdGhlIGhvcml6b250YWwgYXhpc1xuICAgICAgICAgKlxuICAgICAgICAgKiBAcHVibGljXG4gICAgICAgICAqIEByZW1hcmtzXG4gICAgICAgICAqIEhUTUwgQXR0cmlidXRlOiBob3Jpem9udGFsLWluc2V0XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmhvcml6b250YWxJbnNldCA9IGZhbHNlO1xuICAgICAgICAvKipcbiAgICAgICAgICogRGVmaW5lcyBob3cgdGhlIHdpZHRoIG9mIHRoZSByZWdpb24gaXMgY2FsY3VsYXRlZFxuICAgICAgICAgKlxuICAgICAgICAgKiBAcHVibGljXG4gICAgICAgICAqIEByZW1hcmtzXG4gICAgICAgICAqIEhUTUwgQXR0cmlidXRlOiBob3Jpem9udGFsLXNjYWxpbmdcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuaG9yaXpvbnRhbFNjYWxpbmcgPSBcImNvbnRlbnRcIjtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNldHMgd2hhdCBsb2dpYyB0aGUgY29tcG9uZW50IHVzZXMgdG8gZGV0ZXJtaW5lIHZlcnRpY2FsIHBsYWNlbWVudC5cbiAgICAgICAgICogJ2xvY2t0b2RlZmF1bHQnIGZvcmNlcyB0aGUgZGVmYXVsdCBwb3NpdGlvblxuICAgICAgICAgKiAnZHluYW1pYycgZGVjaWRlcyBwbGFjZW1lbnQgYmFzZWQgb24gYXZhaWxhYmxlIHNwYWNlXG4gICAgICAgICAqICd1bmNvbnRyb2xsZWQnIGRvZXMgbm90IGNvbnRyb2wgcGxhY2VtZW50IG9uIHRoZSB2ZXJ0aWNhbCBheGlzXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwdWJsaWNcbiAgICAgICAgICogQHJlbWFya3NcbiAgICAgICAgICogSFRNTCBBdHRyaWJ1dGU6IHZlcnRpY2FsLXBvc2l0aW9uaW5nLW1vZGVcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMudmVydGljYWxQb3NpdGlvbmluZ01vZGUgPSBcInVuY29udHJvbGxlZFwiO1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIGRlZmF1bHQgdmVydGljYWwgcG9zaXRpb24gb2YgdGhlIHJlZ2lvbiByZWxhdGl2ZSB0byB0aGUgYW5jaG9yIGVsZW1lbnRcbiAgICAgICAgICpcbiAgICAgICAgICogQHB1YmxpY1xuICAgICAgICAgKiBAcmVtYXJrc1xuICAgICAgICAgKiBIVE1MIEF0dHJpYnV0ZTogdmVydGljYWwtZGVmYXVsdC1wb3NpdGlvblxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy52ZXJ0aWNhbERlZmF1bHRQb3NpdGlvbiA9IFwidW5zZXRcIjtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFdoZXRoZXIgdGhlIHJlZ2lvbiByZW1haW5zIGluIHRoZSB2aWV3cG9ydCAoaWUuIGRldGFjaGVzIGZyb20gdGhlIGFuY2hvcikgb24gdGhlIHZlcnRpY2FsIGF4aXNcbiAgICAgICAgICpcbiAgICAgICAgICogQHB1YmxpY1xuICAgICAgICAgKiBAcmVtYXJrc1xuICAgICAgICAgKiBIVE1MIEF0dHJpYnV0ZTogdmVydGljYWwtdmlld3BvcnQtbG9ja1xuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy52ZXJ0aWNhbFZpZXdwb3J0TG9jayA9IGZhbHNlO1xuICAgICAgICAvKipcbiAgICAgICAgICogV2hldGhlciB0aGUgcmVnaW9uIG92ZXJsYXBzIHRoZSBhbmNob3Igb24gdGhlIHZlcnRpY2FsIGF4aXNcbiAgICAgICAgICpcbiAgICAgICAgICogQHB1YmxpY1xuICAgICAgICAgKiBAcmVtYXJrc1xuICAgICAgICAgKiBIVE1MIEF0dHJpYnV0ZTogdmVydGljYWwtaW5zZXRcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMudmVydGljYWxJbnNldCA9IGZhbHNlO1xuICAgICAgICAvKipcbiAgICAgICAgICogRGVmaW5lcyBob3cgdGhlIGhlaWdodCBvZiB0aGUgcmVnaW9uIGlzIGNhbGN1bGF0ZWRcbiAgICAgICAgICpcbiAgICAgICAgICogQHB1YmxpY1xuICAgICAgICAgKiBAcmVtYXJrc1xuICAgICAgICAgKiBIVE1MIEF0dHJpYnV0ZTogdmVydGljYWwtc2NhbGluZ1xuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy52ZXJ0aWNhbFNjYWxpbmcgPSBcImNvbnRlbnRcIjtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFdoZXRoZXIgdGhlIHJlZ2lvbiBpcyBwb3NpdGlvbmVkIHVzaW5nIGNzcyBcInBvc2l0aW9uOiBmaXhlZFwiLlxuICAgICAgICAgKiBPdGhlcndpc2UgdGhlIHJlZ2lvbiB1c2VzIFwicG9zaXRpb246IGFic29sdXRlXCIuXG4gICAgICAgICAqIEZpeGVkIHBsYWNlbWVudCBhbGxvd3MgdGhlIHJlZ2lvbiB0byBicmVhayBvdXQgb2YgcGFyZW50IGNvbnRhaW5lcnMsXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwdWJsaWNcbiAgICAgICAgICogQHJlbWFya3NcbiAgICAgICAgICogSFRNTCBBdHRyaWJ1dGU6IGZpeGVkLXBsYWNlbWVudFxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5maXhlZFBsYWNlbWVudCA9IGZhbHNlO1xuICAgICAgICAvKipcbiAgICAgICAgICogRGVmaW5lcyB3aGF0IHRyaWdnZXJzIHRoZSBhbmNob3JlZCByZWdpb24gdG8gcmV2YWx1YXRlIHBvc2l0aW9uaW5nXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwdWJsaWNcbiAgICAgICAgICogQHJlbWFya3NcbiAgICAgICAgICogSFRNTCBBdHRyaWJ1dGU6IGF1dG8tdXBkYXRlLW1vZGVcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuYXV0b1VwZGF0ZU1vZGUgPSBcImFuY2hvclwiO1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIEhUTUwgZWxlbWVudCBiZWluZyB1c2VkIGFzIHRoZSBhbmNob3JcbiAgICAgICAgICpcbiAgICAgICAgICogQHB1YmxpY1xuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5hbmNob3JFbGVtZW50ID0gbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBIVE1MIGVsZW1lbnQgYmVpbmcgdXNlZCBhcyB0aGUgdmlld3BvcnRcbiAgICAgICAgICpcbiAgICAgICAgICogQHB1YmxpY1xuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy52aWV3cG9ydEVsZW1lbnQgPSBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogaW5kaWNhdGVzIHRoYXQgYW4gaW5pdGlhbCBwb3NpdGlvbmluZyBwYXNzIG9uIGxheW91dCBoYXMgY29tcGxldGVkXG4gICAgICAgICAqXG4gICAgICAgICAqIEBpbnRlcm5hbFxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5pbml0aWFsTGF5b3V0Q29tcGxldGUgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5yZXNpemVEZXRlY3RvciA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBiYXNlIG9mZnNldHMgYmV0d2VlbiB0aGUgcG9zaXRpb25lcidzIGJhc2UgcG9zaXRpb24gYW5kIHRoZSBhbmNob3Inc1xuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5iYXNlSG9yaXpvbnRhbE9mZnNldCA9IDA7XG4gICAgICAgIHRoaXMuYmFzZVZlcnRpY2FsT2Zmc2V0ID0gMDtcbiAgICAgICAgdGhpcy5wZW5kaW5nUG9zaXRpb25pbmdVcGRhdGUgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5wZW5kaW5nUmVzZXQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5jdXJyZW50RGlyZWN0aW9uID0gRGlyZWN0aW9uLmx0cjtcbiAgICAgICAgdGhpcy5yZWdpb25WaXNpYmxlID0gZmFsc2U7XG4gICAgICAgIC8vIGluZGljYXRlcyB0aGF0IGEgbGF5b3V0IHVwZGF0ZSBzaG91bGQgb2NjdXIgZXZlbiBpZiBnZW9tZXRyeSBoYXMgbm90IGNoYW5nZWRcbiAgICAgICAgLy8gdXNlZCB0byBlbnN1cmUgc29tZSBhdHRyaWJ1dGUgY2hhbmdlcyBhcmUgYXBwbGllZFxuICAgICAgICB0aGlzLmZvcmNlVXBkYXRlID0gZmFsc2U7XG4gICAgICAgIC8vIGRlZmluZXMgaG93IGJpZyBhIGRpZmZlcmVuY2UgaW4gcGl4ZWxzIHRoZXJlIG11c3QgYmUgYmV0d2VlbiBzdGF0ZXMgdG9cbiAgICAgICAgLy8ganVzdGlmeSBhIGxheW91dCB1cGRhdGUgdGhhdCBhZmZlY3RzIHRoZSBkb20gKHByZXZlbnRzIHJlcGVhdGVkIHN1Yi1waXhlbCBjb3JyZWN0aW9ucylcbiAgICAgICAgdGhpcy51cGRhdGVUaHJlc2hvbGQgPSAwLjU7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiB1cGRhdGUgcG9zaXRpb25cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMudXBkYXRlID0gKCkgPT4ge1xuICAgICAgICAgICAgaWYgKCF0aGlzLnBlbmRpbmdQb3NpdGlvbmluZ1VwZGF0ZSkge1xuICAgICAgICAgICAgICAgIHRoaXMucmVxdWVzdFBvc2l0aW9uVXBkYXRlcygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICAvKipcbiAgICAgICAgICogc3RhcnRzIG9ic2VydmVyc1xuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5zdGFydE9ic2VydmVycyA9ICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuc3RvcE9ic2VydmVycygpO1xuICAgICAgICAgICAgaWYgKHRoaXMuYW5jaG9yRWxlbWVudCA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucmVxdWVzdFBvc2l0aW9uVXBkYXRlcygpO1xuICAgICAgICAgICAgaWYgKHRoaXMucmVzaXplRGV0ZWN0b3IgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlc2l6ZURldGVjdG9yLm9ic2VydmUodGhpcy5hbmNob3JFbGVtZW50KTtcbiAgICAgICAgICAgICAgICB0aGlzLnJlc2l6ZURldGVjdG9yLm9ic2VydmUodGhpcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBnZXQgcG9zaXRpb24gdXBkYXRlc1xuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5yZXF1ZXN0UG9zaXRpb25VcGRhdGVzID0gKCkgPT4ge1xuICAgICAgICAgICAgaWYgKHRoaXMuYW5jaG9yRWxlbWVudCA9PT0gbnVsbCB8fCB0aGlzLnBlbmRpbmdQb3NpdGlvbmluZ1VwZGF0ZSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIEFuY2hvcmVkUmVnaW9uLmludGVyc2VjdGlvblNlcnZpY2UucmVxdWVzdFBvc2l0aW9uKHRoaXMsIHRoaXMuaGFuZGxlSW50ZXJzZWN0aW9uKTtcbiAgICAgICAgICAgIEFuY2hvcmVkUmVnaW9uLmludGVyc2VjdGlvblNlcnZpY2UucmVxdWVzdFBvc2l0aW9uKHRoaXMuYW5jaG9yRWxlbWVudCwgdGhpcy5oYW5kbGVJbnRlcnNlY3Rpb24pO1xuICAgICAgICAgICAgaWYgKHRoaXMudmlld3BvcnRFbGVtZW50ICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgQW5jaG9yZWRSZWdpb24uaW50ZXJzZWN0aW9uU2VydmljZS5yZXF1ZXN0UG9zaXRpb24odGhpcy52aWV3cG9ydEVsZW1lbnQsIHRoaXMuaGFuZGxlSW50ZXJzZWN0aW9uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGVuZGluZ1Bvc2l0aW9uaW5nVXBkYXRlID0gdHJ1ZTtcbiAgICAgICAgfTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIHN0b3BzIG9ic2VydmVyc1xuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5zdG9wT2JzZXJ2ZXJzID0gKCkgPT4ge1xuICAgICAgICAgICAgaWYgKHRoaXMucGVuZGluZ1Bvc2l0aW9uaW5nVXBkYXRlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wZW5kaW5nUG9zaXRpb25pbmdVcGRhdGUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBBbmNob3JlZFJlZ2lvbi5pbnRlcnNlY3Rpb25TZXJ2aWNlLmNhbmNlbFJlcXVlc3RQb3NpdGlvbih0aGlzLCB0aGlzLmhhbmRsZUludGVyc2VjdGlvbik7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuYW5jaG9yRWxlbWVudCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBBbmNob3JlZFJlZ2lvbi5pbnRlcnNlY3Rpb25TZXJ2aWNlLmNhbmNlbFJlcXVlc3RQb3NpdGlvbih0aGlzLmFuY2hvckVsZW1lbnQsIHRoaXMuaGFuZGxlSW50ZXJzZWN0aW9uKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMudmlld3BvcnRFbGVtZW50ICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIEFuY2hvcmVkUmVnaW9uLmludGVyc2VjdGlvblNlcnZpY2UuY2FuY2VsUmVxdWVzdFBvc2l0aW9uKHRoaXMudmlld3BvcnRFbGVtZW50LCB0aGlzLmhhbmRsZUludGVyc2VjdGlvbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMucmVzaXplRGV0ZWN0b3IgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlc2l6ZURldGVjdG9yLmRpc2Nvbm5lY3QoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEdldHMgdGhlIHZpZXdwb3J0IGVsZW1lbnQgYnkgaWQsIG9yIGRlZmF1bHRzIHRvIGRvY3VtZW50IHJvb3RcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZ2V0Vmlld3BvcnQgPSAoKSA9PiB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHRoaXMudmlld3BvcnQgIT09IFwic3RyaW5nXCIgfHwgdGhpcy52aWV3cG9ydCA9PT0gXCJcIikge1xuICAgICAgICAgICAgICAgIHJldHVybiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy52aWV3cG9ydCk7XG4gICAgICAgIH07XG4gICAgICAgIC8qKlxuICAgICAgICAgKiAgR2V0cyB0aGUgYW5jaG9yIGVsZW1lbnQgYnkgaWRcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZ2V0QW5jaG9yID0gKCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMuYW5jaG9yKTtcbiAgICAgICAgfTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqICBIYW5kbGUgaW50ZXJzZWN0aW9uc1xuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5oYW5kbGVJbnRlcnNlY3Rpb24gPSAoZW50cmllcykgPT4ge1xuICAgICAgICAgICAgaWYgKCF0aGlzLnBlbmRpbmdQb3NpdGlvbmluZ1VwZGF0ZSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGVuZGluZ1Bvc2l0aW9uaW5nVXBkYXRlID0gZmFsc2U7XG4gICAgICAgICAgICBpZiAoIXRoaXMuYXBwbHlJbnRlcnNlY3Rpb25FbnRyaWVzKGVudHJpZXMpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy51cGRhdGVMYXlvdXQoKTtcbiAgICAgICAgfTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqICBpdGVyYXRlIHRocm91Z2ggaW50ZXJzZWN0aW9uIGVudHJpZXMgYW5kIGFwcGx5IGRhdGFcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuYXBwbHlJbnRlcnNlY3Rpb25FbnRyaWVzID0gKGVudHJpZXMpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHJlZ2lvbkVudHJ5ID0gZW50cmllcy5maW5kKHggPT4geC50YXJnZXQgPT09IHRoaXMpO1xuICAgICAgICAgICAgY29uc3QgYW5jaG9yRW50cnkgPSBlbnRyaWVzLmZpbmQoeCA9PiB4LnRhcmdldCA9PT0gdGhpcy5hbmNob3JFbGVtZW50KTtcbiAgICAgICAgICAgIGNvbnN0IHZpZXdwb3J0RW50cnkgPSBlbnRyaWVzLmZpbmQoeCA9PiB4LnRhcmdldCA9PT0gdGhpcy52aWV3cG9ydEVsZW1lbnQpO1xuICAgICAgICAgICAgaWYgKHJlZ2lvbkVudHJ5ID09PSB1bmRlZmluZWQgfHxcbiAgICAgICAgICAgICAgICB2aWV3cG9ydEVudHJ5ID09PSB1bmRlZmluZWQgfHxcbiAgICAgICAgICAgICAgICBhbmNob3JFbnRyeSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gZG9uJ3QgdXBkYXRlIHRoZSBkb20gdW5sZXNzIHRoZXJlIGlzIGEgc2lnbmlmaWNhbnQgZGlmZmVyZW5jZSBpbiByZWN0IHBvc2l0aW9uc1xuICAgICAgICAgICAgaWYgKCF0aGlzLnJlZ2lvblZpc2libGUgfHxcbiAgICAgICAgICAgICAgICB0aGlzLmZvcmNlVXBkYXRlIHx8XG4gICAgICAgICAgICAgICAgdGhpcy5yZWdpb25SZWN0ID09PSB1bmRlZmluZWQgfHxcbiAgICAgICAgICAgICAgICB0aGlzLmFuY2hvclJlY3QgPT09IHVuZGVmaW5lZCB8fFxuICAgICAgICAgICAgICAgIHRoaXMudmlld3BvcnRSZWN0ID09PSB1bmRlZmluZWQgfHxcbiAgICAgICAgICAgICAgICB0aGlzLmlzUmVjdERpZmZlcmVudCh0aGlzLmFuY2hvclJlY3QsIGFuY2hvckVudHJ5LmJvdW5kaW5nQ2xpZW50UmVjdCkgfHxcbiAgICAgICAgICAgICAgICB0aGlzLmlzUmVjdERpZmZlcmVudCh0aGlzLnZpZXdwb3J0UmVjdCwgdmlld3BvcnRFbnRyeS5ib3VuZGluZ0NsaWVudFJlY3QpIHx8XG4gICAgICAgICAgICAgICAgdGhpcy5pc1JlY3REaWZmZXJlbnQodGhpcy5yZWdpb25SZWN0LCByZWdpb25FbnRyeS5ib3VuZGluZ0NsaWVudFJlY3QpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZWdpb25SZWN0ID0gcmVnaW9uRW50cnkuYm91bmRpbmdDbGllbnRSZWN0O1xuICAgICAgICAgICAgICAgIHRoaXMuYW5jaG9yUmVjdCA9IGFuY2hvckVudHJ5LmJvdW5kaW5nQ2xpZW50UmVjdDtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy52aWV3cG9ydEVsZW1lbnQgPT09IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnZpZXdwb3J0UmVjdCA9IG5ldyBET01SZWN0UmVhZE9ubHkodmlld3BvcnRFbnRyeS5ib3VuZGluZ0NsaWVudFJlY3QueCArXG4gICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsTGVmdCwgdmlld3BvcnRFbnRyeS5ib3VuZGluZ0NsaWVudFJlY3QueSArXG4gICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wLCB2aWV3cG9ydEVudHJ5LmJvdW5kaW5nQ2xpZW50UmVjdC53aWR0aCwgdmlld3BvcnRFbnRyeS5ib3VuZGluZ0NsaWVudFJlY3QuaGVpZ2h0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudmlld3BvcnRSZWN0ID0gdmlld3BvcnRFbnRyeS5ib3VuZGluZ0NsaWVudFJlY3Q7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlUmVnaW9uT2Zmc2V0KCk7XG4gICAgICAgICAgICAgICAgdGhpcy5mb3JjZVVwZGF0ZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9O1xuICAgICAgICAvKipcbiAgICAgICAgICogIFVwZGF0ZSB0aGUgb2Zmc2V0IHZhbHVlc1xuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy51cGRhdGVSZWdpb25PZmZzZXQgPSAoKSA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy5hbmNob3JSZWN0ICYmIHRoaXMucmVnaW9uUmVjdCkge1xuICAgICAgICAgICAgICAgIHRoaXMuYmFzZUhvcml6b250YWxPZmZzZXQgPVxuICAgICAgICAgICAgICAgICAgICB0aGlzLmJhc2VIb3Jpem9udGFsT2Zmc2V0ICtcbiAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLmFuY2hvclJlY3QubGVmdCAtIHRoaXMucmVnaW9uUmVjdC5sZWZ0KSArXG4gICAgICAgICAgICAgICAgICAgICAgICAodGhpcy50cmFuc2xhdGVYIC0gdGhpcy5iYXNlSG9yaXpvbnRhbE9mZnNldCk7XG4gICAgICAgICAgICAgICAgdGhpcy5iYXNlVmVydGljYWxPZmZzZXQgPVxuICAgICAgICAgICAgICAgICAgICB0aGlzLmJhc2VWZXJ0aWNhbE9mZnNldCArXG4gICAgICAgICAgICAgICAgICAgICAgICAodGhpcy5hbmNob3JSZWN0LnRvcCAtIHRoaXMucmVnaW9uUmVjdC50b3ApICtcbiAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLnRyYW5zbGF0ZVkgLSB0aGlzLmJhc2VWZXJ0aWNhbE9mZnNldCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIC8qKlxuICAgICAgICAgKiAgY29tcGFyZSByZWN0cyB0byBzZWUgaWYgdGhlcmUgaXMgZW5vdWdoIGNoYW5nZSB0byBqdXN0aWZ5IGEgRE9NIHVwZGF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5pc1JlY3REaWZmZXJlbnQgPSAocmVjdEEsIHJlY3RCKSA9PiB7XG4gICAgICAgICAgICBpZiAoTWF0aC5hYnMocmVjdEEudG9wIC0gcmVjdEIudG9wKSA+IHRoaXMudXBkYXRlVGhyZXNob2xkIHx8XG4gICAgICAgICAgICAgICAgTWF0aC5hYnMocmVjdEEucmlnaHQgLSByZWN0Qi5yaWdodCkgPiB0aGlzLnVwZGF0ZVRocmVzaG9sZCB8fFxuICAgICAgICAgICAgICAgIE1hdGguYWJzKHJlY3RBLmJvdHRvbSAtIHJlY3RCLmJvdHRvbSkgPiB0aGlzLnVwZGF0ZVRocmVzaG9sZCB8fFxuICAgICAgICAgICAgICAgIE1hdGguYWJzKHJlY3RBLmxlZnQgLSByZWN0Qi5sZWZ0KSA+IHRoaXMudXBkYXRlVGhyZXNob2xkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH07XG4gICAgICAgIC8qKlxuICAgICAgICAgKiAgSGFuZGxlIHJlc2l6ZSBldmVudHNcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuaGFuZGxlUmVzaXplID0gKGVudHJpZXMpID0+IHtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlKCk7XG4gICAgICAgIH07XG4gICAgICAgIC8qKlxuICAgICAgICAgKiByZXNldHMgdGhlIGNvbXBvbmVudFxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5yZXNldCA9ICgpID0+IHtcbiAgICAgICAgICAgIGlmICghdGhpcy5wZW5kaW5nUmVzZXQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBlbmRpbmdSZXNldCA9IGZhbHNlO1xuICAgICAgICAgICAgaWYgKHRoaXMuYW5jaG9yRWxlbWVudCA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHRoaXMuYW5jaG9yRWxlbWVudCA9IHRoaXMuZ2V0QW5jaG9yKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy52aWV3cG9ydEVsZW1lbnQgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnZpZXdwb3J0RWxlbWVudCA9IHRoaXMuZ2V0Vmlld3BvcnQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuY3VycmVudERpcmVjdGlvbiA9IGdldERpcmVjdGlvbih0aGlzKTtcbiAgICAgICAgICAgIHRoaXMuc3RhcnRPYnNlcnZlcnMoKTtcbiAgICAgICAgfTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqICBSZWNhbGN1bGF0ZSBsYXlvdXQgcmVsYXRlZCBzdGF0ZSB2YWx1ZXNcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMudXBkYXRlTGF5b3V0ID0gKCkgPT4ge1xuICAgICAgICAgICAgbGV0IGRlc2lyZWRWZXJ0aWNhbFBvc2l0aW9uID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgbGV0IGRlc2lyZWRIb3Jpem9udGFsUG9zaXRpb24gPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICBpZiAodGhpcy5ob3Jpem9udGFsUG9zaXRpb25pbmdNb2RlICE9PSBcInVuY29udHJvbGxlZFwiKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgaG9yaXpvbnRhbE9wdGlvbnMgPSB0aGlzLmdldFBvc2l0aW9uaW5nT3B0aW9ucyh0aGlzLmhvcml6b250YWxJbnNldCk7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaG9yaXpvbnRhbERlZmF1bHRQb3NpdGlvbiA9PT0gXCJjZW50ZXJcIikge1xuICAgICAgICAgICAgICAgICAgICBkZXNpcmVkSG9yaXpvbnRhbFBvc2l0aW9uID0gXCJjZW50ZXJcIjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5ob3Jpem9udGFsRGVmYXVsdFBvc2l0aW9uICE9PSBcInVuc2V0XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGRpckNvcnJlY3RlZEhvcml6b250YWxEZWZhdWx0UG9zaXRpb24gPSB0aGlzXG4gICAgICAgICAgICAgICAgICAgICAgICAuaG9yaXpvbnRhbERlZmF1bHRQb3NpdGlvbjtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRpckNvcnJlY3RlZEhvcml6b250YWxEZWZhdWx0UG9zaXRpb24gPT09IFwic3RhcnRcIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgZGlyQ29ycmVjdGVkSG9yaXpvbnRhbERlZmF1bHRQb3NpdGlvbiA9PT0gXCJlbmRcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgZGlyZWN0aW9uIGNoYW5nZXMgd2UgcmVzZXQgdGhlIGxheW91dFxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3RGlyZWN0aW9uID0gZ2V0RGlyZWN0aW9uKHRoaXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5ld0RpcmVjdGlvbiAhPT0gdGhpcy5jdXJyZW50RGlyZWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50RGlyZWN0aW9uID0gbmV3RGlyZWN0aW9uO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaW5pdGlhbGl6ZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmN1cnJlbnREaXJlY3Rpb24gPT09IERpcmVjdGlvbi5sdHIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXJDb3JyZWN0ZWRIb3Jpem9udGFsRGVmYXVsdFBvc2l0aW9uID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlyQ29ycmVjdGVkSG9yaXpvbnRhbERlZmF1bHRQb3NpdGlvbiA9PT0gXCJzdGFydFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IFwibGVmdFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IFwicmlnaHRcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpckNvcnJlY3RlZEhvcml6b250YWxEZWZhdWx0UG9zaXRpb24gPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXJDb3JyZWN0ZWRIb3Jpem9udGFsRGVmYXVsdFBvc2l0aW9uID09PSBcInN0YXJ0XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gXCJyaWdodFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IFwibGVmdFwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoZGlyQ29ycmVjdGVkSG9yaXpvbnRhbERlZmF1bHRQb3NpdGlvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcImxlZnRcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXNpcmVkSG9yaXpvbnRhbFBvc2l0aW9uID0gdGhpcy5ob3Jpem9udGFsSW5zZXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBcImluc2V0U3RhcnRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IFwic3RhcnRcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJyaWdodFwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlc2lyZWRIb3Jpem9udGFsUG9zaXRpb24gPSB0aGlzLmhvcml6b250YWxJbnNldFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IFwiaW5zZXRFbmRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IFwiZW5kXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgaG9yaXpvbnRhbFRocmVzaG9sZCA9IHRoaXMuaG9yaXpvbnRhbFRocmVzaG9sZCAhPT0gdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgICAgID8gdGhpcy5ob3Jpem9udGFsVGhyZXNob2xkXG4gICAgICAgICAgICAgICAgICAgIDogdGhpcy5yZWdpb25SZWN0ICE9PSB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICAgICAgICAgID8gdGhpcy5yZWdpb25SZWN0LndpZHRoXG4gICAgICAgICAgICAgICAgICAgICAgICA6IDA7XG4gICAgICAgICAgICAgICAgY29uc3QgYW5jaG9yTGVmdCA9IHRoaXMuYW5jaG9yUmVjdCAhPT0gdW5kZWZpbmVkID8gdGhpcy5hbmNob3JSZWN0LmxlZnQgOiAwO1xuICAgICAgICAgICAgICAgIGNvbnN0IGFuY2hvclJpZ2h0ID0gdGhpcy5hbmNob3JSZWN0ICE9PSB1bmRlZmluZWQgPyB0aGlzLmFuY2hvclJlY3QucmlnaHQgOiAwO1xuICAgICAgICAgICAgICAgIGNvbnN0IGFuY2hvcldpZHRoID0gdGhpcy5hbmNob3JSZWN0ICE9PSB1bmRlZmluZWQgPyB0aGlzLmFuY2hvclJlY3Qud2lkdGggOiAwO1xuICAgICAgICAgICAgICAgIGNvbnN0IHZpZXdwb3J0TGVmdCA9IHRoaXMudmlld3BvcnRSZWN0ICE9PSB1bmRlZmluZWQgPyB0aGlzLnZpZXdwb3J0UmVjdC5sZWZ0IDogMDtcbiAgICAgICAgICAgICAgICBjb25zdCB2aWV3cG9ydFJpZ2h0ID0gdGhpcy52aWV3cG9ydFJlY3QgIT09IHVuZGVmaW5lZCA/IHRoaXMudmlld3BvcnRSZWN0LnJpZ2h0IDogMDtcbiAgICAgICAgICAgICAgICBpZiAoZGVzaXJlZEhvcml6b250YWxQb3NpdGlvbiA9PT0gdW5kZWZpbmVkIHx8XG4gICAgICAgICAgICAgICAgICAgICghKHRoaXMuaG9yaXpvbnRhbFBvc2l0aW9uaW5nTW9kZSA9PT0gXCJsb2NrdG9kZWZhdWx0XCIpICYmXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmdldEF2YWlsYWJsZVNwYWNlKGRlc2lyZWRIb3Jpem9udGFsUG9zaXRpb24sIGFuY2hvckxlZnQsIGFuY2hvclJpZ2h0LCBhbmNob3JXaWR0aCwgdmlld3BvcnRMZWZ0LCB2aWV3cG9ydFJpZ2h0KSA8IGhvcml6b250YWxUaHJlc2hvbGQpKSB7XG4gICAgICAgICAgICAgICAgICAgIGRlc2lyZWRIb3Jpem9udGFsUG9zaXRpb24gPVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRBdmFpbGFibGVTcGFjZShob3Jpem9udGFsT3B0aW9uc1swXSwgYW5jaG9yTGVmdCwgYW5jaG9yUmlnaHQsIGFuY2hvcldpZHRoLCB2aWV3cG9ydExlZnQsIHZpZXdwb3J0UmlnaHQpID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmdldEF2YWlsYWJsZVNwYWNlKGhvcml6b250YWxPcHRpb25zWzFdLCBhbmNob3JMZWZ0LCBhbmNob3JSaWdodCwgYW5jaG9yV2lkdGgsIHZpZXdwb3J0TGVmdCwgdmlld3BvcnRSaWdodClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IGhvcml6b250YWxPcHRpb25zWzBdXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBob3Jpem9udGFsT3B0aW9uc1sxXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy52ZXJ0aWNhbFBvc2l0aW9uaW5nTW9kZSAhPT0gXCJ1bmNvbnRyb2xsZWRcIikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHZlcnRpY2FsT3B0aW9ucyA9IHRoaXMuZ2V0UG9zaXRpb25pbmdPcHRpb25zKHRoaXMudmVydGljYWxJbnNldCk7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMudmVydGljYWxEZWZhdWx0UG9zaXRpb24gPT09IFwiY2VudGVyXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgZGVzaXJlZFZlcnRpY2FsUG9zaXRpb24gPSBcImNlbnRlclwiO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmICh0aGlzLnZlcnRpY2FsRGVmYXVsdFBvc2l0aW9uICE9PSBcInVuc2V0XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoICh0aGlzLnZlcnRpY2FsRGVmYXVsdFBvc2l0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwidG9wXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVzaXJlZFZlcnRpY2FsUG9zaXRpb24gPSB0aGlzLnZlcnRpY2FsSW5zZXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBcImluc2V0U3RhcnRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IFwic3RhcnRcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJib3R0b21cIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXNpcmVkVmVydGljYWxQb3NpdGlvbiA9IHRoaXMudmVydGljYWxJbnNldCA/IFwiaW5zZXRFbmRcIiA6IFwiZW5kXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgdmVydGljYWxUaHJlc2hvbGQgPSB0aGlzLnZlcnRpY2FsVGhyZXNob2xkICE9PSB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICAgICAgPyB0aGlzLnZlcnRpY2FsVGhyZXNob2xkXG4gICAgICAgICAgICAgICAgICAgIDogdGhpcy5yZWdpb25SZWN0ICE9PSB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICAgICAgICAgID8gdGhpcy5yZWdpb25SZWN0LmhlaWdodFxuICAgICAgICAgICAgICAgICAgICAgICAgOiAwO1xuICAgICAgICAgICAgICAgIGNvbnN0IGFuY2hvclRvcCA9IHRoaXMuYW5jaG9yUmVjdCAhPT0gdW5kZWZpbmVkID8gdGhpcy5hbmNob3JSZWN0LnRvcCA6IDA7XG4gICAgICAgICAgICAgICAgY29uc3QgYW5jaG9yQm90dG9tID0gdGhpcy5hbmNob3JSZWN0ICE9PSB1bmRlZmluZWQgPyB0aGlzLmFuY2hvclJlY3QuYm90dG9tIDogMDtcbiAgICAgICAgICAgICAgICBjb25zdCBhbmNob3JIZWlnaHQgPSB0aGlzLmFuY2hvclJlY3QgIT09IHVuZGVmaW5lZCA/IHRoaXMuYW5jaG9yUmVjdC5oZWlnaHQgOiAwO1xuICAgICAgICAgICAgICAgIGNvbnN0IHZpZXdwb3J0VG9wID0gdGhpcy52aWV3cG9ydFJlY3QgIT09IHVuZGVmaW5lZCA/IHRoaXMudmlld3BvcnRSZWN0LnRvcCA6IDA7XG4gICAgICAgICAgICAgICAgY29uc3Qgdmlld3BvcnRCb3R0b20gPSB0aGlzLnZpZXdwb3J0UmVjdCAhPT0gdW5kZWZpbmVkID8gdGhpcy52aWV3cG9ydFJlY3QuYm90dG9tIDogMDtcbiAgICAgICAgICAgICAgICBpZiAoZGVzaXJlZFZlcnRpY2FsUG9zaXRpb24gPT09IHVuZGVmaW5lZCB8fFxuICAgICAgICAgICAgICAgICAgICAoISh0aGlzLnZlcnRpY2FsUG9zaXRpb25pbmdNb2RlID09PSBcImxvY2t0b2RlZmF1bHRcIikgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0QXZhaWxhYmxlU3BhY2UoZGVzaXJlZFZlcnRpY2FsUG9zaXRpb24sIGFuY2hvclRvcCwgYW5jaG9yQm90dG9tLCBhbmNob3JIZWlnaHQsIHZpZXdwb3J0VG9wLCB2aWV3cG9ydEJvdHRvbSkgPCB2ZXJ0aWNhbFRocmVzaG9sZCkpIHtcbiAgICAgICAgICAgICAgICAgICAgZGVzaXJlZFZlcnRpY2FsUG9zaXRpb24gPVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRBdmFpbGFibGVTcGFjZSh2ZXJ0aWNhbE9wdGlvbnNbMF0sIGFuY2hvclRvcCwgYW5jaG9yQm90dG9tLCBhbmNob3JIZWlnaHQsIHZpZXdwb3J0VG9wLCB2aWV3cG9ydEJvdHRvbSkgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0QXZhaWxhYmxlU3BhY2UodmVydGljYWxPcHRpb25zWzFdLCBhbmNob3JUb3AsIGFuY2hvckJvdHRvbSwgYW5jaG9ySGVpZ2h0LCB2aWV3cG9ydFRvcCwgdmlld3BvcnRCb3R0b20pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyB2ZXJ0aWNhbE9wdGlvbnNbMF1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHZlcnRpY2FsT3B0aW9uc1sxXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBuZXh0UG9zaXRpb25lckRpbWVuc2lvbiA9IHRoaXMuZ2V0TmV4dFJlZ2lvbkRpbWVuc2lvbihkZXNpcmVkSG9yaXpvbnRhbFBvc2l0aW9uLCBkZXNpcmVkVmVydGljYWxQb3NpdGlvbik7XG4gICAgICAgICAgICBjb25zdCBwb3NpdGlvbkNoYW5nZWQgPSB0aGlzLmhvcml6b250YWxQb3NpdGlvbiAhPT0gZGVzaXJlZEhvcml6b250YWxQb3NpdGlvbiB8fFxuICAgICAgICAgICAgICAgIHRoaXMudmVydGljYWxQb3NpdGlvbiAhPT0gZGVzaXJlZFZlcnRpY2FsUG9zaXRpb247XG4gICAgICAgICAgICB0aGlzLnNldEhvcml6b250YWxQb3NpdGlvbihkZXNpcmVkSG9yaXpvbnRhbFBvc2l0aW9uLCBuZXh0UG9zaXRpb25lckRpbWVuc2lvbik7XG4gICAgICAgICAgICB0aGlzLnNldFZlcnRpY2FsUG9zaXRpb24oZGVzaXJlZFZlcnRpY2FsUG9zaXRpb24sIG5leHRQb3NpdGlvbmVyRGltZW5zaW9uKTtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlUmVnaW9uU3R5bGUoKTtcbiAgICAgICAgICAgIGlmICghdGhpcy5pbml0aWFsTGF5b3V0Q29tcGxldGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmluaXRpYWxMYXlvdXRDb21wbGV0ZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgdGhpcy5yZXF1ZXN0UG9zaXRpb25VcGRhdGVzKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCF0aGlzLnJlZ2lvblZpc2libGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlZ2lvblZpc2libGUgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHRoaXMuc3R5bGUucmVtb3ZlUHJvcGVydHkoXCJwb2ludGVyLWV2ZW50c1wiKTtcbiAgICAgICAgICAgICAgICB0aGlzLnN0eWxlLnJlbW92ZVByb3BlcnR5KFwib3BhY2l0eVwiKTtcbiAgICAgICAgICAgICAgICB0aGlzLmNsYXNzTGlzdC50b2dnbGUoXCJsb2FkZWRcIiwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgdGhpcy4kZW1pdChcImxvYWRlZFwiLCB0aGlzLCB7IGJ1YmJsZXM6IGZhbHNlIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy51cGRhdGVQb3NpdGlvbkNsYXNzZXMoKTtcbiAgICAgICAgICAgIGlmIChwb3NpdGlvbkNoYW5nZWQpIHtcbiAgICAgICAgICAgICAgICAvLyBlbWl0IGNoYW5nZSBldmVudFxuICAgICAgICAgICAgICAgIHRoaXMuJGVtaXQoXCJwb3NpdGlvbmNoYW5nZVwiLCB0aGlzLCB7IGJ1YmJsZXM6IGZhbHNlIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICAvKipcbiAgICAgICAgICogIFVwZGF0ZXMgdGhlIHN0eWxlIHN0cmluZyBhcHBsaWVkIHRvIHRoZSByZWdpb24gZWxlbWVudCBhcyB3ZWxsIGFzIHRoZSBjc3MgY2xhc3NlcyBhdHRhY2hlZFxuICAgICAgICAgKiAgdG8gdGhlIHJvb3QgZWxlbWVudFxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy51cGRhdGVSZWdpb25TdHlsZSA9ICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuc3R5bGUud2lkdGggPSB0aGlzLnJlZ2lvbldpZHRoO1xuICAgICAgICAgICAgdGhpcy5zdHlsZS5oZWlnaHQgPSB0aGlzLnJlZ2lvbkhlaWdodDtcbiAgICAgICAgICAgIHRoaXMuc3R5bGUudHJhbnNmb3JtID0gYHRyYW5zbGF0ZSgke3RoaXMudHJhbnNsYXRlWH1weCwgJHt0aGlzLnRyYW5zbGF0ZVl9cHgpYDtcbiAgICAgICAgfTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqICBVcGRhdGVzIHRoZSBjc3MgY2xhc3NlcyB0aGF0IHJlZmxlY3QgdGhlIGN1cnJlbnQgcG9zaXRpb24gb2YgdGhlIGVsZW1lbnRcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMudXBkYXRlUG9zaXRpb25DbGFzc2VzID0gKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5jbGFzc0xpc3QudG9nZ2xlKFwidG9wXCIsIHRoaXMudmVydGljYWxQb3NpdGlvbiA9PT0gXCJzdGFydFwiKTtcbiAgICAgICAgICAgIHRoaXMuY2xhc3NMaXN0LnRvZ2dsZShcImJvdHRvbVwiLCB0aGlzLnZlcnRpY2FsUG9zaXRpb24gPT09IFwiZW5kXCIpO1xuICAgICAgICAgICAgdGhpcy5jbGFzc0xpc3QudG9nZ2xlKFwiaW5zZXQtdG9wXCIsIHRoaXMudmVydGljYWxQb3NpdGlvbiA9PT0gXCJpbnNldFN0YXJ0XCIpO1xuICAgICAgICAgICAgdGhpcy5jbGFzc0xpc3QudG9nZ2xlKFwiaW5zZXQtYm90dG9tXCIsIHRoaXMudmVydGljYWxQb3NpdGlvbiA9PT0gXCJpbnNldEVuZFwiKTtcbiAgICAgICAgICAgIHRoaXMuY2xhc3NMaXN0LnRvZ2dsZShcInZlcnRpY2FsLWNlbnRlclwiLCB0aGlzLnZlcnRpY2FsUG9zaXRpb24gPT09IFwiY2VudGVyXCIpO1xuICAgICAgICAgICAgdGhpcy5jbGFzc0xpc3QudG9nZ2xlKFwibGVmdFwiLCB0aGlzLmhvcml6b250YWxQb3NpdGlvbiA9PT0gXCJzdGFydFwiKTtcbiAgICAgICAgICAgIHRoaXMuY2xhc3NMaXN0LnRvZ2dsZShcInJpZ2h0XCIsIHRoaXMuaG9yaXpvbnRhbFBvc2l0aW9uID09PSBcImVuZFwiKTtcbiAgICAgICAgICAgIHRoaXMuY2xhc3NMaXN0LnRvZ2dsZShcImluc2V0LWxlZnRcIiwgdGhpcy5ob3Jpem9udGFsUG9zaXRpb24gPT09IFwiaW5zZXRTdGFydFwiKTtcbiAgICAgICAgICAgIHRoaXMuY2xhc3NMaXN0LnRvZ2dsZShcImluc2V0LXJpZ2h0XCIsIHRoaXMuaG9yaXpvbnRhbFBvc2l0aW9uID09PSBcImluc2V0RW5kXCIpO1xuICAgICAgICAgICAgdGhpcy5jbGFzc0xpc3QudG9nZ2xlKFwiaG9yaXpvbnRhbC1jZW50ZXJcIiwgdGhpcy5ob3Jpem9udGFsUG9zaXRpb24gPT09IFwiY2VudGVyXCIpO1xuICAgICAgICB9O1xuICAgICAgICAvKipcbiAgICAgICAgICogR2V0IGhvcml6b250YWwgcG9zaXRpb25pbmcgc3RhdGUgYmFzZWQgb24gZGVzaXJlZCBwb3NpdGlvblxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5zZXRIb3Jpem9udGFsUG9zaXRpb24gPSAoZGVzaXJlZEhvcml6b250YWxQb3NpdGlvbiwgbmV4dFBvc2l0aW9uZXJEaW1lbnNpb24pID0+IHtcbiAgICAgICAgICAgIGlmIChkZXNpcmVkSG9yaXpvbnRhbFBvc2l0aW9uID09PSB1bmRlZmluZWQgfHxcbiAgICAgICAgICAgICAgICB0aGlzLnJlZ2lvblJlY3QgPT09IHVuZGVmaW5lZCB8fFxuICAgICAgICAgICAgICAgIHRoaXMuYW5jaG9yUmVjdCA9PT0gdW5kZWZpbmVkIHx8XG4gICAgICAgICAgICAgICAgdGhpcy52aWV3cG9ydFJlY3QgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBuZXh0UmVnaW9uV2lkdGggPSAwO1xuICAgICAgICAgICAgc3dpdGNoICh0aGlzLmhvcml6b250YWxTY2FsaW5nKSB7XG4gICAgICAgICAgICAgICAgY2FzZSBcImFuY2hvclwiOlxuICAgICAgICAgICAgICAgIGNhc2UgXCJmaWxsXCI6XG4gICAgICAgICAgICAgICAgICAgIG5leHRSZWdpb25XaWR0aCA9IHRoaXMuaG9yaXpvbnRhbFZpZXdwb3J0TG9ja1xuICAgICAgICAgICAgICAgICAgICAgICAgPyB0aGlzLnZpZXdwb3J0UmVjdC53aWR0aFxuICAgICAgICAgICAgICAgICAgICAgICAgOiBuZXh0UG9zaXRpb25lckRpbWVuc2lvbi53aWR0aDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWdpb25XaWR0aCA9IGAke25leHRSZWdpb25XaWR0aH1weGA7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgXCJjb250ZW50XCI6XG4gICAgICAgICAgICAgICAgICAgIG5leHRSZWdpb25XaWR0aCA9IHRoaXMucmVnaW9uUmVjdC53aWR0aDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWdpb25XaWR0aCA9IFwidW5zZXRcIjtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgc2l6ZURlbHRhID0gMDtcbiAgICAgICAgICAgIHN3aXRjaCAoZGVzaXJlZEhvcml6b250YWxQb3NpdGlvbikge1xuICAgICAgICAgICAgICAgIGNhc2UgXCJzdGFydFwiOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLnRyYW5zbGF0ZVggPSB0aGlzLmJhc2VIb3Jpem9udGFsT2Zmc2V0IC0gbmV4dFJlZ2lvbldpZHRoO1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5ob3Jpem9udGFsVmlld3BvcnRMb2NrICYmXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFuY2hvclJlY3QubGVmdCA+IHRoaXMudmlld3BvcnRSZWN0LnJpZ2h0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRyYW5zbGF0ZVggPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudHJhbnNsYXRlWCAtXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLmFuY2hvclJlY3QubGVmdCAtIHRoaXMudmlld3BvcnRSZWN0LnJpZ2h0KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFwiaW5zZXRTdGFydFwiOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLnRyYW5zbGF0ZVggPVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5iYXNlSG9yaXpvbnRhbE9mZnNldCAtIG5leHRSZWdpb25XaWR0aCArIHRoaXMuYW5jaG9yUmVjdC53aWR0aDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuaG9yaXpvbnRhbFZpZXdwb3J0TG9jayAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hbmNob3JSZWN0LnJpZ2h0ID4gdGhpcy52aWV3cG9ydFJlY3QucmlnaHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudHJhbnNsYXRlWCA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50cmFuc2xhdGVYIC1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMuYW5jaG9yUmVjdC5yaWdodCAtIHRoaXMudmlld3BvcnRSZWN0LnJpZ2h0KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFwiaW5zZXRFbmRcIjpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50cmFuc2xhdGVYID0gdGhpcy5iYXNlSG9yaXpvbnRhbE9mZnNldDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuaG9yaXpvbnRhbFZpZXdwb3J0TG9jayAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hbmNob3JSZWN0LmxlZnQgPCB0aGlzLnZpZXdwb3J0UmVjdC5sZWZ0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRyYW5zbGF0ZVggPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudHJhbnNsYXRlWCAtICh0aGlzLmFuY2hvclJlY3QubGVmdCAtIHRoaXMudmlld3BvcnRSZWN0LmxlZnQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgXCJlbmRcIjpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50cmFuc2xhdGVYID0gdGhpcy5iYXNlSG9yaXpvbnRhbE9mZnNldCArIHRoaXMuYW5jaG9yUmVjdC53aWR0aDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuaG9yaXpvbnRhbFZpZXdwb3J0TG9jayAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hbmNob3JSZWN0LnJpZ2h0IDwgdGhpcy52aWV3cG9ydFJlY3QubGVmdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50cmFuc2xhdGVYID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRyYW5zbGF0ZVggLVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAodGhpcy5hbmNob3JSZWN0LnJpZ2h0IC0gdGhpcy52aWV3cG9ydFJlY3QubGVmdCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBcImNlbnRlclwiOlxuICAgICAgICAgICAgICAgICAgICBzaXplRGVsdGEgPSAodGhpcy5hbmNob3JSZWN0LndpZHRoIC0gbmV4dFJlZ2lvbldpZHRoKSAvIDI7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudHJhbnNsYXRlWCA9IHRoaXMuYmFzZUhvcml6b250YWxPZmZzZXQgKyBzaXplRGVsdGE7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmhvcml6b250YWxWaWV3cG9ydExvY2spIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlZ2lvbkxlZnQgPSB0aGlzLmFuY2hvclJlY3QubGVmdCArIHNpemVEZWx0YTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlZ2lvblJpZ2h0ID0gdGhpcy5hbmNob3JSZWN0LnJpZ2h0IC0gc2l6ZURlbHRhO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlZ2lvbkxlZnQgPCB0aGlzLnZpZXdwb3J0UmVjdC5sZWZ0ICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIShyZWdpb25SaWdodCA+IHRoaXMudmlld3BvcnRSZWN0LnJpZ2h0KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudHJhbnNsYXRlWCA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudHJhbnNsYXRlWCAtIChyZWdpb25MZWZ0IC0gdGhpcy52aWV3cG9ydFJlY3QubGVmdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChyZWdpb25SaWdodCA+IHRoaXMudmlld3BvcnRSZWN0LnJpZ2h0ICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIShyZWdpb25MZWZ0IDwgdGhpcy52aWV3cG9ydFJlY3QubGVmdCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRyYW5zbGF0ZVggPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRyYW5zbGF0ZVggLSAocmVnaW9uUmlnaHQgLSB0aGlzLnZpZXdwb3J0UmVjdC5yaWdodCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmhvcml6b250YWxQb3NpdGlvbiA9IGRlc2lyZWRIb3Jpem9udGFsUG9zaXRpb247XG4gICAgICAgIH07XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTZXQgdmVydGljYWwgcG9zaXRpb25pbmcgc3RhdGUgYmFzZWQgb24gZGVzaXJlZCBwb3NpdGlvblxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5zZXRWZXJ0aWNhbFBvc2l0aW9uID0gKGRlc2lyZWRWZXJ0aWNhbFBvc2l0aW9uLCBuZXh0UG9zaXRpb25lckRpbWVuc2lvbikgPT4ge1xuICAgICAgICAgICAgaWYgKGRlc2lyZWRWZXJ0aWNhbFBvc2l0aW9uID09PSB1bmRlZmluZWQgfHxcbiAgICAgICAgICAgICAgICB0aGlzLnJlZ2lvblJlY3QgPT09IHVuZGVmaW5lZCB8fFxuICAgICAgICAgICAgICAgIHRoaXMuYW5jaG9yUmVjdCA9PT0gdW5kZWZpbmVkIHx8XG4gICAgICAgICAgICAgICAgdGhpcy52aWV3cG9ydFJlY3QgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBuZXh0UmVnaW9uSGVpZ2h0ID0gMDtcbiAgICAgICAgICAgIHN3aXRjaCAodGhpcy52ZXJ0aWNhbFNjYWxpbmcpIHtcbiAgICAgICAgICAgICAgICBjYXNlIFwiYW5jaG9yXCI6XG4gICAgICAgICAgICAgICAgY2FzZSBcImZpbGxcIjpcbiAgICAgICAgICAgICAgICAgICAgbmV4dFJlZ2lvbkhlaWdodCA9IHRoaXMudmVydGljYWxWaWV3cG9ydExvY2tcbiAgICAgICAgICAgICAgICAgICAgICAgID8gdGhpcy52aWV3cG9ydFJlY3QuaGVpZ2h0XG4gICAgICAgICAgICAgICAgICAgICAgICA6IG5leHRQb3NpdGlvbmVyRGltZW5zaW9uLmhlaWdodDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWdpb25IZWlnaHQgPSBgJHtuZXh0UmVnaW9uSGVpZ2h0fXB4YDtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBcImNvbnRlbnRcIjpcbiAgICAgICAgICAgICAgICAgICAgbmV4dFJlZ2lvbkhlaWdodCA9IHRoaXMucmVnaW9uUmVjdC5oZWlnaHQ7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVnaW9uSGVpZ2h0ID0gXCJ1bnNldFwiO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBzaXplRGVsdGEgPSAwO1xuICAgICAgICAgICAgc3dpdGNoIChkZXNpcmVkVmVydGljYWxQb3NpdGlvbikge1xuICAgICAgICAgICAgICAgIGNhc2UgXCJzdGFydFwiOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLnRyYW5zbGF0ZVkgPSB0aGlzLmJhc2VWZXJ0aWNhbE9mZnNldCAtIG5leHRSZWdpb25IZWlnaHQ7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnZlcnRpY2FsVmlld3BvcnRMb2NrICYmXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFuY2hvclJlY3QudG9wID4gdGhpcy52aWV3cG9ydFJlY3QuYm90dG9tKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRyYW5zbGF0ZVkgPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudHJhbnNsYXRlWSAtXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLmFuY2hvclJlY3QudG9wIC0gdGhpcy52aWV3cG9ydFJlY3QuYm90dG9tKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFwiaW5zZXRTdGFydFwiOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLnRyYW5zbGF0ZVkgPVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5iYXNlVmVydGljYWxPZmZzZXQgLSBuZXh0UmVnaW9uSGVpZ2h0ICsgdGhpcy5hbmNob3JSZWN0LmhlaWdodDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMudmVydGljYWxWaWV3cG9ydExvY2sgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYW5jaG9yUmVjdC5ib3R0b20gPiB0aGlzLnZpZXdwb3J0UmVjdC5ib3R0b20pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudHJhbnNsYXRlWSA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50cmFuc2xhdGVZIC1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMuYW5jaG9yUmVjdC5ib3R0b20gLSB0aGlzLnZpZXdwb3J0UmVjdC5ib3R0b20pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgXCJpbnNldEVuZFwiOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLnRyYW5zbGF0ZVkgPSB0aGlzLmJhc2VWZXJ0aWNhbE9mZnNldDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMudmVydGljYWxWaWV3cG9ydExvY2sgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYW5jaG9yUmVjdC50b3AgPCB0aGlzLnZpZXdwb3J0UmVjdC50b3ApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudHJhbnNsYXRlWSA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50cmFuc2xhdGVZIC0gKHRoaXMuYW5jaG9yUmVjdC50b3AgLSB0aGlzLnZpZXdwb3J0UmVjdC50b3ApO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgXCJlbmRcIjpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50cmFuc2xhdGVZID0gdGhpcy5iYXNlVmVydGljYWxPZmZzZXQgKyB0aGlzLmFuY2hvclJlY3QuaGVpZ2h0O1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy52ZXJ0aWNhbFZpZXdwb3J0TG9jayAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hbmNob3JSZWN0LmJvdHRvbSA8IHRoaXMudmlld3BvcnRSZWN0LnRvcCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50cmFuc2xhdGVZID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRyYW5zbGF0ZVkgLVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAodGhpcy5hbmNob3JSZWN0LmJvdHRvbSAtIHRoaXMudmlld3BvcnRSZWN0LnRvcCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBcImNlbnRlclwiOlxuICAgICAgICAgICAgICAgICAgICBzaXplRGVsdGEgPSAodGhpcy5hbmNob3JSZWN0LmhlaWdodCAtIG5leHRSZWdpb25IZWlnaHQpIC8gMjtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50cmFuc2xhdGVZID0gdGhpcy5iYXNlVmVydGljYWxPZmZzZXQgKyBzaXplRGVsdGE7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnZlcnRpY2FsVmlld3BvcnRMb2NrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByZWdpb25Ub3AgPSB0aGlzLmFuY2hvclJlY3QudG9wICsgc2l6ZURlbHRhO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVnaW9uQm90dG9tID0gdGhpcy5hbmNob3JSZWN0LmJvdHRvbSAtIHNpemVEZWx0YTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZWdpb25Ub3AgPCB0aGlzLnZpZXdwb3J0UmVjdC50b3AgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAhKHJlZ2lvbkJvdHRvbSA+IHRoaXMudmlld3BvcnRSZWN0LmJvdHRvbSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRyYW5zbGF0ZVkgPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRyYW5zbGF0ZVkgLSAocmVnaW9uVG9wIC0gdGhpcy52aWV3cG9ydFJlY3QudG9wKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHJlZ2lvbkJvdHRvbSA+IHRoaXMudmlld3BvcnRSZWN0LmJvdHRvbSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICEocmVnaW9uVG9wIDwgdGhpcy52aWV3cG9ydFJlY3QudG9wKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudHJhbnNsYXRlWSA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudHJhbnNsYXRlWSAtIChyZWdpb25Cb3R0b20gLSB0aGlzLnZpZXdwb3J0UmVjdC5ib3R0b20pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnZlcnRpY2FsUG9zaXRpb24gPSBkZXNpcmVkVmVydGljYWxQb3NpdGlvbjtcbiAgICAgICAgfTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqICBHZXQgYXZhaWxhYmxlIHBvc2l0aW9ucyBiYXNlZCBvbiBwb3NpdGlvbmluZyBtb2RlXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmdldFBvc2l0aW9uaW5nT3B0aW9ucyA9IChpbnNldCkgPT4ge1xuICAgICAgICAgICAgaWYgKGluc2V0KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFtcImluc2V0U3RhcnRcIiwgXCJpbnNldEVuZFwiXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBbXCJzdGFydFwiLCBcImVuZFwiXTtcbiAgICAgICAgfTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqICBHZXQgdGhlIHNwYWNlIGF2YWlsYWJsZSBmb3IgYSBwYXJ0aWN1bGFyIHJlbGF0aXZlIHBvc2l0aW9uXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmdldEF2YWlsYWJsZVNwYWNlID0gKHBvc2l0aW9uT3B0aW9uLCBhbmNob3JTdGFydCwgYW5jaG9yRW5kLCBhbmNob3JTcGFuLCB2aWV3cG9ydFN0YXJ0LCB2aWV3cG9ydEVuZCkgPT4ge1xuICAgICAgICAgICAgY29uc3Qgc3BhY2VTdGFydCA9IGFuY2hvclN0YXJ0IC0gdmlld3BvcnRTdGFydDtcbiAgICAgICAgICAgIGNvbnN0IHNwYWNlRW5kID0gdmlld3BvcnRFbmQgLSAoYW5jaG9yU3RhcnQgKyBhbmNob3JTcGFuKTtcbiAgICAgICAgICAgIHN3aXRjaCAocG9zaXRpb25PcHRpb24pIHtcbiAgICAgICAgICAgICAgICBjYXNlIFwic3RhcnRcIjpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNwYWNlU3RhcnQ7XG4gICAgICAgICAgICAgICAgY2FzZSBcImluc2V0U3RhcnRcIjpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNwYWNlU3RhcnQgKyBhbmNob3JTcGFuO1xuICAgICAgICAgICAgICAgIGNhc2UgXCJpbnNldEVuZFwiOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc3BhY2VFbmQgKyBhbmNob3JTcGFuO1xuICAgICAgICAgICAgICAgIGNhc2UgXCJlbmRcIjpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNwYWNlRW5kO1xuICAgICAgICAgICAgICAgIGNhc2UgXCJjZW50ZXJcIjpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIE1hdGgubWluKHNwYWNlU3RhcnQsIHNwYWNlRW5kKSAqIDIgKyBhbmNob3JTcGFuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICAvKipcbiAgICAgICAgICogR2V0IHJlZ2lvbiBkaW1lbnNpb25zXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmdldE5leHRSZWdpb25EaW1lbnNpb24gPSAoZGVzaXJlZEhvcml6b250YWxQb3NpdGlvbiwgZGVzaXJlZFZlcnRpY2FsUG9zaXRpb24pID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG5ld1JlZ2lvbkRpbWVuc2lvbiA9IHtcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IHRoaXMucmVnaW9uUmVjdCAhPT0gdW5kZWZpbmVkID8gdGhpcy5yZWdpb25SZWN0LmhlaWdodCA6IDAsXG4gICAgICAgICAgICAgICAgd2lkdGg6IHRoaXMucmVnaW9uUmVjdCAhPT0gdW5kZWZpbmVkID8gdGhpcy5yZWdpb25SZWN0LndpZHRoIDogMCxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBpZiAoZGVzaXJlZEhvcml6b250YWxQb3NpdGlvbiAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICAgICAgdGhpcy5ob3Jpem9udGFsU2NhbGluZyA9PT0gXCJmaWxsXCIpIHtcbiAgICAgICAgICAgICAgICBuZXdSZWdpb25EaW1lbnNpb24ud2lkdGggPSB0aGlzLmdldEF2YWlsYWJsZVNwYWNlKGRlc2lyZWRIb3Jpem9udGFsUG9zaXRpb24sIHRoaXMuYW5jaG9yUmVjdCAhPT0gdW5kZWZpbmVkID8gdGhpcy5hbmNob3JSZWN0LmxlZnQgOiAwLCB0aGlzLmFuY2hvclJlY3QgIT09IHVuZGVmaW5lZCA/IHRoaXMuYW5jaG9yUmVjdC5yaWdodCA6IDAsIHRoaXMuYW5jaG9yUmVjdCAhPT0gdW5kZWZpbmVkID8gdGhpcy5hbmNob3JSZWN0LndpZHRoIDogMCwgdGhpcy52aWV3cG9ydFJlY3QgIT09IHVuZGVmaW5lZCA/IHRoaXMudmlld3BvcnRSZWN0LmxlZnQgOiAwLCB0aGlzLnZpZXdwb3J0UmVjdCAhPT0gdW5kZWZpbmVkID8gdGhpcy52aWV3cG9ydFJlY3QucmlnaHQgOiAwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMuaG9yaXpvbnRhbFNjYWxpbmcgPT09IFwiYW5jaG9yXCIpIHtcbiAgICAgICAgICAgICAgICBuZXdSZWdpb25EaW1lbnNpb24ud2lkdGggPVxuICAgICAgICAgICAgICAgICAgICB0aGlzLmFuY2hvclJlY3QgIT09IHVuZGVmaW5lZCA/IHRoaXMuYW5jaG9yUmVjdC53aWR0aCA6IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZGVzaXJlZFZlcnRpY2FsUG9zaXRpb24gIT09IHVuZGVmaW5lZCAmJiB0aGlzLnZlcnRpY2FsU2NhbGluZyA9PT0gXCJmaWxsXCIpIHtcbiAgICAgICAgICAgICAgICBuZXdSZWdpb25EaW1lbnNpb24uaGVpZ2h0ID0gdGhpcy5nZXRBdmFpbGFibGVTcGFjZShkZXNpcmVkVmVydGljYWxQb3NpdGlvbiwgdGhpcy5hbmNob3JSZWN0ICE9PSB1bmRlZmluZWQgPyB0aGlzLmFuY2hvclJlY3QudG9wIDogMCwgdGhpcy5hbmNob3JSZWN0ICE9PSB1bmRlZmluZWQgPyB0aGlzLmFuY2hvclJlY3QuYm90dG9tIDogMCwgdGhpcy5hbmNob3JSZWN0ICE9PSB1bmRlZmluZWQgPyB0aGlzLmFuY2hvclJlY3QuaGVpZ2h0IDogMCwgdGhpcy52aWV3cG9ydFJlY3QgIT09IHVuZGVmaW5lZCA/IHRoaXMudmlld3BvcnRSZWN0LnRvcCA6IDAsIHRoaXMudmlld3BvcnRSZWN0ICE9PSB1bmRlZmluZWQgPyB0aGlzLnZpZXdwb3J0UmVjdC5ib3R0b20gOiAwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMudmVydGljYWxTY2FsaW5nID09PSBcImFuY2hvclwiKSB7XG4gICAgICAgICAgICAgICAgbmV3UmVnaW9uRGltZW5zaW9uLmhlaWdodCA9XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYW5jaG9yUmVjdCAhPT0gdW5kZWZpbmVkID8gdGhpcy5hbmNob3JSZWN0LmhlaWdodCA6IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbmV3UmVnaW9uRGltZW5zaW9uO1xuICAgICAgICB9O1xuICAgICAgICAvKipcbiAgICAgICAgICogc3RhcnRzIGV2ZW50IGxpc3RlbmVycyB0aGF0IGNhbiB0cmlnZ2VyIGF1dG8gdXBkYXRpbmdcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuc3RhcnRBdXRvVXBkYXRlRXZlbnRMaXN0ZW5lcnMgPSAoKSA9PiB7XG4gICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihldmVudFJlc2l6ZSwgdGhpcy51cGRhdGUsIHsgcGFzc2l2ZTogdHJ1ZSB9KTtcbiAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKGV2ZW50U2Nyb2xsLCB0aGlzLnVwZGF0ZSwge1xuICAgICAgICAgICAgICAgIHBhc3NpdmU6IHRydWUsXG4gICAgICAgICAgICAgICAgY2FwdHVyZTogdHJ1ZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKHRoaXMucmVzaXplRGV0ZWN0b3IgIT09IG51bGwgJiYgdGhpcy52aWV3cG9ydEVsZW1lbnQgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlc2l6ZURldGVjdG9yLm9ic2VydmUodGhpcy52aWV3cG9ydEVsZW1lbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICAvKipcbiAgICAgICAgICogc3RvcHMgZXZlbnQgbGlzdGVuZXJzIHRoYXQgY2FuIHRyaWdnZXIgYXV0byB1cGRhdGluZ1xuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5zdG9wQXV0b1VwZGF0ZUV2ZW50TGlzdGVuZXJzID0gKCkgPT4ge1xuICAgICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnRSZXNpemUsIHRoaXMudXBkYXRlKTtcbiAgICAgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKGV2ZW50U2Nyb2xsLCB0aGlzLnVwZGF0ZSk7XG4gICAgICAgICAgICBpZiAodGhpcy5yZXNpemVEZXRlY3RvciAhPT0gbnVsbCAmJiB0aGlzLnZpZXdwb3J0RWxlbWVudCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHRoaXMucmVzaXplRGV0ZWN0b3IudW5vYnNlcnZlKHRoaXMudmlld3BvcnRFbGVtZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9XG4gICAgYW5jaG9yQ2hhbmdlZCgpIHtcbiAgICAgICAgaWYgKHRoaXMuaW5pdGlhbExheW91dENvbXBsZXRlKSB7XG4gICAgICAgICAgICB0aGlzLmFuY2hvckVsZW1lbnQgPSB0aGlzLmdldEFuY2hvcigpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHZpZXdwb3J0Q2hhbmdlZCgpIHtcbiAgICAgICAgaWYgKHRoaXMuaW5pdGlhbExheW91dENvbXBsZXRlKSB7XG4gICAgICAgICAgICB0aGlzLnZpZXdwb3J0RWxlbWVudCA9IHRoaXMuZ2V0Vmlld3BvcnQoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBob3Jpem9udGFsUG9zaXRpb25pbmdNb2RlQ2hhbmdlZCgpIHtcbiAgICAgICAgdGhpcy5yZXF1ZXN0UmVzZXQoKTtcbiAgICB9XG4gICAgaG9yaXpvbnRhbERlZmF1bHRQb3NpdGlvbkNoYW5nZWQoKSB7XG4gICAgICAgIHRoaXMudXBkYXRlRm9yQXR0cmlidXRlQ2hhbmdlKCk7XG4gICAgfVxuICAgIGhvcml6b250YWxWaWV3cG9ydExvY2tDaGFuZ2VkKCkge1xuICAgICAgICB0aGlzLnVwZGF0ZUZvckF0dHJpYnV0ZUNoYW5nZSgpO1xuICAgIH1cbiAgICBob3Jpem9udGFsSW5zZXRDaGFuZ2VkKCkge1xuICAgICAgICB0aGlzLnVwZGF0ZUZvckF0dHJpYnV0ZUNoYW5nZSgpO1xuICAgIH1cbiAgICBob3Jpem9udGFsVGhyZXNob2xkQ2hhbmdlZCgpIHtcbiAgICAgICAgdGhpcy51cGRhdGVGb3JBdHRyaWJ1dGVDaGFuZ2UoKTtcbiAgICB9XG4gICAgaG9yaXpvbnRhbFNjYWxpbmdDaGFuZ2VkKCkge1xuICAgICAgICB0aGlzLnVwZGF0ZUZvckF0dHJpYnV0ZUNoYW5nZSgpO1xuICAgIH1cbiAgICB2ZXJ0aWNhbFBvc2l0aW9uaW5nTW9kZUNoYW5nZWQoKSB7XG4gICAgICAgIHRoaXMucmVxdWVzdFJlc2V0KCk7XG4gICAgfVxuICAgIHZlcnRpY2FsRGVmYXVsdFBvc2l0aW9uQ2hhbmdlZCgpIHtcbiAgICAgICAgdGhpcy51cGRhdGVGb3JBdHRyaWJ1dGVDaGFuZ2UoKTtcbiAgICB9XG4gICAgdmVydGljYWxWaWV3cG9ydExvY2tDaGFuZ2VkKCkge1xuICAgICAgICB0aGlzLnVwZGF0ZUZvckF0dHJpYnV0ZUNoYW5nZSgpO1xuICAgIH1cbiAgICB2ZXJ0aWNhbEluc2V0Q2hhbmdlZCgpIHtcbiAgICAgICAgdGhpcy51cGRhdGVGb3JBdHRyaWJ1dGVDaGFuZ2UoKTtcbiAgICB9XG4gICAgdmVydGljYWxUaHJlc2hvbGRDaGFuZ2VkKCkge1xuICAgICAgICB0aGlzLnVwZGF0ZUZvckF0dHJpYnV0ZUNoYW5nZSgpO1xuICAgIH1cbiAgICB2ZXJ0aWNhbFNjYWxpbmdDaGFuZ2VkKCkge1xuICAgICAgICB0aGlzLnVwZGF0ZUZvckF0dHJpYnV0ZUNoYW5nZSgpO1xuICAgIH1cbiAgICBmaXhlZFBsYWNlbWVudENoYW5nZWQoKSB7XG4gICAgICAgIGlmICh0aGlzLiRmYXN0Q29udHJvbGxlci5pc0Nvbm5lY3RlZCAmJlxuICAgICAgICAgICAgdGhpcy5pbml0aWFsTGF5b3V0Q29tcGxldGUpIHtcbiAgICAgICAgICAgIHRoaXMuaW5pdGlhbGl6ZSgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGF1dG9VcGRhdGVNb2RlQ2hhbmdlZChwcmV2TW9kZSwgbmV3TW9kZSkge1xuICAgICAgICBpZiAodGhpcy4kZmFzdENvbnRyb2xsZXIuaXNDb25uZWN0ZWQgJiZcbiAgICAgICAgICAgIHRoaXMuaW5pdGlhbExheW91dENvbXBsZXRlKSB7XG4gICAgICAgICAgICBpZiAocHJldk1vZGUgPT09IFwiYXV0b1wiKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zdG9wQXV0b1VwZGF0ZUV2ZW50TGlzdGVuZXJzKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobmV3TW9kZSA9PT0gXCJhdXRvXCIpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXJ0QXV0b1VwZGF0ZUV2ZW50TGlzdGVuZXJzKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgYW5jaG9yRWxlbWVudENoYW5nZWQoKSB7XG4gICAgICAgIHRoaXMucmVxdWVzdFJlc2V0KCk7XG4gICAgfVxuICAgIHZpZXdwb3J0RWxlbWVudENoYW5nZWQoKSB7XG4gICAgICAgIGlmICh0aGlzLiRmYXN0Q29udHJvbGxlci5pc0Nvbm5lY3RlZCAmJlxuICAgICAgICAgICAgdGhpcy5pbml0aWFsTGF5b3V0Q29tcGxldGUpIHtcbiAgICAgICAgICAgIHRoaXMuaW5pdGlhbGl6ZSgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIGNvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgICAgICBzdXBlci5jb25uZWN0ZWRDYWxsYmFjaygpO1xuICAgICAgICBpZiAodGhpcy5hdXRvVXBkYXRlTW9kZSA9PT0gXCJhdXRvXCIpIHtcbiAgICAgICAgICAgIHRoaXMuc3RhcnRBdXRvVXBkYXRlRXZlbnRMaXN0ZW5lcnMoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmluaXRpYWxpemUoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgZGlzY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgICAgIHN1cGVyLmRpc2Nvbm5lY3RlZENhbGxiYWNrKCk7XG4gICAgICAgIGlmICh0aGlzLmF1dG9VcGRhdGVNb2RlID09PSBcImF1dG9cIikge1xuICAgICAgICAgICAgdGhpcy5zdG9wQXV0b1VwZGF0ZUV2ZW50TGlzdGVuZXJzKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zdG9wT2JzZXJ2ZXJzKCk7XG4gICAgICAgIHRoaXMuZGlzY29ubmVjdFJlc2l6ZURldGVjdG9yKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIGFkb3B0ZWRDYWxsYmFjaygpIHtcbiAgICAgICAgdGhpcy5pbml0aWFsaXplKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIGRlc3Ryb3lzIHRoZSBpbnN0YW5jZSdzIHJlc2l6ZSBvYnNlcnZlclxuICAgICAqL1xuICAgIGRpc2Nvbm5lY3RSZXNpemVEZXRlY3RvcigpIHtcbiAgICAgICAgaWYgKHRoaXMucmVzaXplRGV0ZWN0b3IgIT09IG51bGwpIHtcbiAgICAgICAgICAgIHRoaXMucmVzaXplRGV0ZWN0b3IuZGlzY29ubmVjdCgpO1xuICAgICAgICAgICAgdGhpcy5yZXNpemVEZXRlY3RvciA9IG51bGw7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogaW5pdGlhbGl6ZXMgdGhlIGluc3RhbmNlJ3MgcmVzaXplIG9ic2VydmVyXG4gICAgICovXG4gICAgaW5pdGlhbGl6ZVJlc2l6ZURldGVjdG9yKCkge1xuICAgICAgICB0aGlzLmRpc2Nvbm5lY3RSZXNpemVEZXRlY3RvcigpO1xuICAgICAgICB0aGlzLnJlc2l6ZURldGVjdG9yID0gbmV3IHdpbmRvdy5SZXNpemVPYnNlcnZlcih0aGlzLmhhbmRsZVJlc2l6ZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIHJlYWN0IHRvIGF0dHJpYnV0ZSBjaGFuZ2VzIHRoYXQgZG9uJ3QgcmVxdWlyZSBhIHJlc2V0XG4gICAgICovXG4gICAgdXBkYXRlRm9yQXR0cmlidXRlQ2hhbmdlKCkge1xuICAgICAgICBpZiAodGhpcy4kZmFzdENvbnRyb2xsZXIuaXNDb25uZWN0ZWQgJiZcbiAgICAgICAgICAgIHRoaXMuaW5pdGlhbExheW91dENvbXBsZXRlKSB7XG4gICAgICAgICAgICB0aGlzLmZvcmNlVXBkYXRlID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogZnVsbHkgaW5pdGlhbGl6ZXMgdGhlIGNvbXBvbmVudFxuICAgICAqL1xuICAgIGluaXRpYWxpemUoKSB7XG4gICAgICAgIHRoaXMuaW5pdGlhbGl6ZVJlc2l6ZURldGVjdG9yKCk7XG4gICAgICAgIGlmICh0aGlzLmFuY2hvckVsZW1lbnQgPT09IG51bGwpIHtcbiAgICAgICAgICAgIHRoaXMuYW5jaG9yRWxlbWVudCA9IHRoaXMuZ2V0QW5jaG9yKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5yZXF1ZXN0UmVzZXQoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVxdWVzdCBhIHJlc2V0IGlmIHRoZXJlIGFyZSBjdXJyZW50bHkgbm8gb3BlbiByZXF1ZXN0c1xuICAgICAqL1xuICAgIHJlcXVlc3RSZXNldCgpIHtcbiAgICAgICAgaWYgKHRoaXMuJGZhc3RDb250cm9sbGVyLmlzQ29ubmVjdGVkICYmXG4gICAgICAgICAgICB0aGlzLnBlbmRpbmdSZXNldCA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0SW5pdGlhbFN0YXRlKCk7XG4gICAgICAgICAgICBET00ucXVldWVVcGRhdGUoKCkgPT4gdGhpcy5yZXNldCgpKTtcbiAgICAgICAgICAgIHRoaXMucGVuZGluZ1Jlc2V0ID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBzZXRzIHRoZSBzdGFydGluZyBjb25maWd1cmF0aW9uIGZvciBjb21wb25lbnQgaW50ZXJuYWwgdmFsdWVzXG4gICAgICovXG4gICAgc2V0SW5pdGlhbFN0YXRlKCkge1xuICAgICAgICB0aGlzLmluaXRpYWxMYXlvdXRDb21wbGV0ZSA9IGZhbHNlO1xuICAgICAgICB0aGlzLnJlZ2lvblZpc2libGUgPSBmYWxzZTtcbiAgICAgICAgdGhpcy50cmFuc2xhdGVYID0gMDtcbiAgICAgICAgdGhpcy50cmFuc2xhdGVZID0gMDtcbiAgICAgICAgdGhpcy5iYXNlSG9yaXpvbnRhbE9mZnNldCA9IDA7XG4gICAgICAgIHRoaXMuYmFzZVZlcnRpY2FsT2Zmc2V0ID0gMDtcbiAgICAgICAgdGhpcy52aWV3cG9ydFJlY3QgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMucmVnaW9uUmVjdCA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5hbmNob3JSZWN0ID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLnZlcnRpY2FsUG9zaXRpb24gPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuaG9yaXpvbnRhbFBvc2l0aW9uID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLnN0eWxlLm9wYWNpdHkgPSBcIjBcIjtcbiAgICAgICAgdGhpcy5zdHlsZS5wb2ludGVyRXZlbnRzID0gXCJub25lXCI7XG4gICAgICAgIHRoaXMuZm9yY2VVcGRhdGUgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5zdHlsZS5wb3NpdGlvbiA9IHRoaXMuZml4ZWRQbGFjZW1lbnQgPyBcImZpeGVkXCIgOiBcImFic29sdXRlXCI7XG4gICAgICAgIHRoaXMudXBkYXRlUG9zaXRpb25DbGFzc2VzKCk7XG4gICAgICAgIHRoaXMudXBkYXRlUmVnaW9uU3R5bGUoKTtcbiAgICB9XG59XG5BbmNob3JlZFJlZ2lvbi5pbnRlcnNlY3Rpb25TZXJ2aWNlID0gbmV3IEludGVyc2VjdGlvblNlcnZpY2UoKTtcbl9fZGVjb3JhdGUoW1xuICAgIGF0dHJcbl0sIEFuY2hvcmVkUmVnaW9uLnByb3RvdHlwZSwgXCJhbmNob3JcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIGF0dHJcbl0sIEFuY2hvcmVkUmVnaW9uLnByb3RvdHlwZSwgXCJ2aWV3cG9ydFwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgYXR0cih7IGF0dHJpYnV0ZTogXCJob3Jpem9udGFsLXBvc2l0aW9uaW5nLW1vZGVcIiB9KVxuXSwgQW5jaG9yZWRSZWdpb24ucHJvdG90eXBlLCBcImhvcml6b250YWxQb3NpdGlvbmluZ01vZGVcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIGF0dHIoeyBhdHRyaWJ1dGU6IFwiaG9yaXpvbnRhbC1kZWZhdWx0LXBvc2l0aW9uXCIgfSlcbl0sIEFuY2hvcmVkUmVnaW9uLnByb3RvdHlwZSwgXCJob3Jpem9udGFsRGVmYXVsdFBvc2l0aW9uXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBhdHRyKHsgYXR0cmlidXRlOiBcImhvcml6b250YWwtdmlld3BvcnQtbG9ja1wiLCBtb2RlOiBcImJvb2xlYW5cIiB9KVxuXSwgQW5jaG9yZWRSZWdpb24ucHJvdG90eXBlLCBcImhvcml6b250YWxWaWV3cG9ydExvY2tcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIGF0dHIoeyBhdHRyaWJ1dGU6IFwiaG9yaXpvbnRhbC1pbnNldFwiLCBtb2RlOiBcImJvb2xlYW5cIiB9KVxuXSwgQW5jaG9yZWRSZWdpb24ucHJvdG90eXBlLCBcImhvcml6b250YWxJbnNldFwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgYXR0cih7IGF0dHJpYnV0ZTogXCJob3Jpem9udGFsLXRocmVzaG9sZFwiIH0pXG5dLCBBbmNob3JlZFJlZ2lvbi5wcm90b3R5cGUsIFwiaG9yaXpvbnRhbFRocmVzaG9sZFwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgYXR0cih7IGF0dHJpYnV0ZTogXCJob3Jpem9udGFsLXNjYWxpbmdcIiB9KVxuXSwgQW5jaG9yZWRSZWdpb24ucHJvdG90eXBlLCBcImhvcml6b250YWxTY2FsaW5nXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBhdHRyKHsgYXR0cmlidXRlOiBcInZlcnRpY2FsLXBvc2l0aW9uaW5nLW1vZGVcIiB9KVxuXSwgQW5jaG9yZWRSZWdpb24ucHJvdG90eXBlLCBcInZlcnRpY2FsUG9zaXRpb25pbmdNb2RlXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBhdHRyKHsgYXR0cmlidXRlOiBcInZlcnRpY2FsLWRlZmF1bHQtcG9zaXRpb25cIiB9KVxuXSwgQW5jaG9yZWRSZWdpb24ucHJvdG90eXBlLCBcInZlcnRpY2FsRGVmYXVsdFBvc2l0aW9uXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBhdHRyKHsgYXR0cmlidXRlOiBcInZlcnRpY2FsLXZpZXdwb3J0LWxvY2tcIiwgbW9kZTogXCJib29sZWFuXCIgfSlcbl0sIEFuY2hvcmVkUmVnaW9uLnByb3RvdHlwZSwgXCJ2ZXJ0aWNhbFZpZXdwb3J0TG9ja1wiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgYXR0cih7IGF0dHJpYnV0ZTogXCJ2ZXJ0aWNhbC1pbnNldFwiLCBtb2RlOiBcImJvb2xlYW5cIiB9KVxuXSwgQW5jaG9yZWRSZWdpb24ucHJvdG90eXBlLCBcInZlcnRpY2FsSW5zZXRcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIGF0dHIoeyBhdHRyaWJ1dGU6IFwidmVydGljYWwtdGhyZXNob2xkXCIgfSlcbl0sIEFuY2hvcmVkUmVnaW9uLnByb3RvdHlwZSwgXCJ2ZXJ0aWNhbFRocmVzaG9sZFwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgYXR0cih7IGF0dHJpYnV0ZTogXCJ2ZXJ0aWNhbC1zY2FsaW5nXCIgfSlcbl0sIEFuY2hvcmVkUmVnaW9uLnByb3RvdHlwZSwgXCJ2ZXJ0aWNhbFNjYWxpbmdcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIGF0dHIoeyBhdHRyaWJ1dGU6IFwiZml4ZWQtcGxhY2VtZW50XCIsIG1vZGU6IFwiYm9vbGVhblwiIH0pXG5dLCBBbmNob3JlZFJlZ2lvbi5wcm90b3R5cGUsIFwiZml4ZWRQbGFjZW1lbnRcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIGF0dHIoeyBhdHRyaWJ1dGU6IFwiYXV0by11cGRhdGUtbW9kZVwiIH0pXG5dLCBBbmNob3JlZFJlZ2lvbi5wcm90b3R5cGUsIFwiYXV0b1VwZGF0ZU1vZGVcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIG9ic2VydmFibGVcbl0sIEFuY2hvcmVkUmVnaW9uLnByb3RvdHlwZSwgXCJhbmNob3JFbGVtZW50XCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBvYnNlcnZhYmxlXG5dLCBBbmNob3JlZFJlZ2lvbi5wcm90b3R5cGUsIFwidmlld3BvcnRFbGVtZW50XCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBvYnNlcnZhYmxlXG5dLCBBbmNob3JlZFJlZ2lvbi5wcm90b3R5cGUsIFwiaW5pdGlhbExheW91dENvbXBsZXRlXCIsIHZvaWQgMCk7XG4iLCJpbXBvcnQgeyBodG1sLCB3aGVuIH0gZnJvbSBcIkBtaWNyb3NvZnQvZmFzdC1lbGVtZW50XCI7XG4vKipcbiAqIFRoZSB0ZW1wbGF0ZSBmb3IgdGhlIHtAbGluayBAbWljcm9zb2Z0L2Zhc3QtZm91bmRhdGlvbiMoQW5jaG9yZWRSZWdpb246Y2xhc3MpfSBjb21wb25lbnQuXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjb25zdCBhbmNob3JlZFJlZ2lvblRlbXBsYXRlID0gKGNvbnRleHQsIGRlZmluaXRpb24pID0+IGh0bWwgYFxuICAgIDx0ZW1wbGF0ZSBjbGFzcz1cIiR7eCA9PiAoeC5pbml0aWFsTGF5b3V0Q29tcGxldGUgPyBcImxvYWRlZFwiIDogXCJcIil9XCI+XG4gICAgICAgICR7d2hlbih4ID0+IHguaW5pdGlhbExheW91dENvbXBsZXRlLCBodG1sIGBcbiAgICAgICAgICAgICAgICA8c2xvdD48L3Nsb3Q+XG4gICAgICAgICAgICBgKX1cbiAgICA8L3RlbXBsYXRlPlxuYDtcbiIsImV4cG9ydCAqIGZyb20gXCIuL2FuY2hvcmVkLXJlZ2lvbi50ZW1wbGF0ZS5qc1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vYW5jaG9yZWQtcmVnaW9uLmpzXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9hbmNob3JlZC1yZWdpb24tY29uZmlnLmpzXCI7XG4iLCJpbXBvcnQgeyBfX2RlY29yYXRlIH0gZnJvbSBcInRzbGliXCI7XG5pbXBvcnQgeyBhdHRyIH0gZnJvbSBcIkBtaWNyb3NvZnQvZmFzdC1lbGVtZW50XCI7XG5pbXBvcnQgeyBGb3VuZGF0aW9uRWxlbWVudCwgfSBmcm9tIFwiLi4vZm91bmRhdGlvbi1lbGVtZW50L2ZvdW5kYXRpb24tZWxlbWVudC5qc1wiO1xuLyoqXG4gKiBBbiBBdmF0YXIgQ3VzdG9tIEhUTUwgRWxlbWVudFxuICpcbiAqIEBzbG90IG1lZGlhIC0gVXNlZCBmb3IgbWVkaWEgc3VjaCBhcyBhbiBpbWFnZVxuICogQHNsb3QgLSBUaGUgZGVmYXVsdCBzbG90IGZvciBhdmF0YXIgdGV4dCwgY29tbW9ubHkgYSBuYW1lIG9yIGluaXRpYWxzXG4gKiBAc2xvdCBiYWRnZSAtIFVzZWQgdG8gcHJvdmlkZSBhIGJhZGdlLCBzdWNoIGFzIGEgc3RhdHVzIGJhZGdlXG4gKiBAY3NzcGFydCBiYWNrcGxhdGUgLSBUaGUgd3JhcHBpbmcgY29udGFpbmVyIGZvciB0aGUgYXZhdGFyXG4gKiBAY3NzcGFydCBsaW5rIC0gVGhlIGF2YXRhciBsaW5rXG4gKiBAY3NzcGFydCBtZWRpYSAtIFRoZSBtZWRpYSBzbG90XG4gKiBAY3NzcGFydCBjb250ZW50IC0gVGhlIGRlZmF1bHQgc2xvdFxuICpcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGNsYXNzIEF2YXRhciBleHRlbmRzIEZvdW5kYXRpb25FbGVtZW50IHtcbiAgICAvKipcbiAgICAgKiBJbnRlcm5hbFxuICAgICAqL1xuICAgIGNvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgICAgICBzdXBlci5jb25uZWN0ZWRDYWxsYmFjaygpO1xuICAgICAgICBpZiAoIXRoaXMuc2hhcGUpIHtcbiAgICAgICAgICAgIHRoaXMuc2hhcGUgPSBcImNpcmNsZVwiO1xuICAgICAgICB9XG4gICAgfVxufVxuX19kZWNvcmF0ZShbXG4gICAgYXR0clxuXSwgQXZhdGFyLnByb3RvdHlwZSwgXCJmaWxsXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBhdHRyXG5dLCBBdmF0YXIucHJvdG90eXBlLCBcImNvbG9yXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBhdHRyXG5dLCBBdmF0YXIucHJvdG90eXBlLCBcImxpbmtcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIGF0dHJcbl0sIEF2YXRhci5wcm90b3R5cGUsIFwic2hhcGVcIiwgdm9pZCAwKTtcbiIsImltcG9ydCB7IGh0bWwgfSBmcm9tIFwiQG1pY3Jvc29mdC9mYXN0LWVsZW1lbnRcIjtcbi8qKlxuICogVGhlIHRlbXBsYXRlIGZvciB7QGxpbmsgQG1pY3Jvc29mdC9mYXN0LWZvdW5kYXRpb24jQXZhdGFyfSBjb21wb25lbnQuXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjb25zdCBhdmF0YXJUZW1wbGF0ZSA9IChjb250ZXh0LCBkZWZpbml0aW9uKSA9PiBodG1sIGBcbiAgICA8ZGl2XG4gICAgICAgIGNsYXNzPVwiYmFja3BsYXRlICR7eCA9PiB4LnNoYXBlfVwiXG4gICAgICAgIHBhcnQ9XCJiYWNrcGxhdGVcIlxuICAgICAgICBzdHlsZT1cIiR7eCA9PiB4LmZpbGwgPyBgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tYXZhdGFyLWZpbGwtJHt4LmZpbGx9KTtgIDogdm9pZCAwfVwiXG4gICAgPlxuICAgICAgICA8YVxuICAgICAgICAgICAgY2xhc3M9XCJsaW5rXCJcbiAgICAgICAgICAgIHBhcnQ9XCJsaW5rXCJcbiAgICAgICAgICAgIGhyZWY9XCIke3ggPT4gKHgubGluayA/IHgubGluayA6IHZvaWQgMCl9XCJcbiAgICAgICAgICAgIHN0eWxlPVwiJHt4ID0+ICh4LmNvbG9yID8gYGNvbG9yOiB2YXIoLS1hdmF0YXItY29sb3ItJHt4LmNvbG9yfSk7YCA6IHZvaWQgMCl9XCJcbiAgICAgICAgPlxuICAgICAgICAgICAgPHNsb3QgbmFtZT1cIm1lZGlhXCIgcGFydD1cIm1lZGlhXCI+JHtkZWZpbml0aW9uLm1lZGlhIHx8IFwiXCJ9PC9zbG90PlxuICAgICAgICAgICAgPHNsb3QgY2xhc3M9XCJjb250ZW50XCIgcGFydD1cImNvbnRlbnRcIj48c2xvdD5cbiAgICAgICAgPC9hPlxuICAgIDwvZGl2PlxuICAgIDxzbG90IG5hbWU9XCJiYWRnZVwiIHBhcnQ9XCJiYWRnZVwiPjwvc2xvdD5cbmA7XG4iLCJleHBvcnQgKiBmcm9tIFwiLi9hdmF0YXIudGVtcGxhdGUuanNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL2F2YXRhci5qc1wiO1xuIiwiaW1wb3J0IHsgX19kZWNvcmF0ZSB9IGZyb20gXCJ0c2xpYlwiO1xuaW1wb3J0IHsgYXR0ciB9IGZyb20gXCJAbWljcm9zb2Z0L2Zhc3QtZWxlbWVudFwiO1xuaW1wb3J0IHsgRm91bmRhdGlvbkVsZW1lbnQgfSBmcm9tIFwiLi4vZm91bmRhdGlvbi1lbGVtZW50L2ZvdW5kYXRpb24tZWxlbWVudC5qc1wiO1xuLyoqXG4gKiBBIEJhZGdlIEN1c3RvbSBIVE1MIEVsZW1lbnQuXG4gKiBAc2xvdCAtIFRoZSBkZWZhdWx0IHNsb3QgZm9yIHRoZSBiYWRnZVxuICogQGNzc3BhcnQgY29udHJvbCAtIFRoZSBlbGVtZW50IHJlcHJlc2VudGluZyB0aGUgYmFkZ2UsIHdoaWNoIHdyYXBzIHRoZSBkZWZhdWx0IHNsb3RcbiAqXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjbGFzcyBCYWRnZSBleHRlbmRzIEZvdW5kYXRpb25FbGVtZW50IHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgdGhpcy5nZW5lcmF0ZUJhZGdlU3R5bGUgPSAoKSA9PiB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuZmlsbCAmJiAhdGhpcy5jb2xvcikge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGZpbGwgPSBgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tYmFkZ2UtZmlsbC0ke3RoaXMuZmlsbH0pO2A7XG4gICAgICAgICAgICBjb25zdCBjb2xvciA9IGBjb2xvcjogdmFyKC0tYmFkZ2UtY29sb3ItJHt0aGlzLmNvbG9yfSk7YDtcbiAgICAgICAgICAgIGlmICh0aGlzLmZpbGwgJiYgIXRoaXMuY29sb3IpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmlsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMuY29sb3IgJiYgIXRoaXMuZmlsbCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBjb2xvcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiBgJHtjb2xvcn0gJHtmaWxsfWA7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfVxufVxuX19kZWNvcmF0ZShbXG4gICAgYXR0cih7IGF0dHJpYnV0ZTogXCJmaWxsXCIgfSlcbl0sIEJhZGdlLnByb3RvdHlwZSwgXCJmaWxsXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBhdHRyKHsgYXR0cmlidXRlOiBcImNvbG9yXCIgfSlcbl0sIEJhZGdlLnByb3RvdHlwZSwgXCJjb2xvclwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgYXR0cih7IG1vZGU6IFwiYm9vbGVhblwiIH0pXG5dLCBCYWRnZS5wcm90b3R5cGUsIFwiY2lyY3VsYXJcIiwgdm9pZCAwKTtcbiIsImltcG9ydCB7IGh0bWwgfSBmcm9tIFwiQG1pY3Jvc29mdC9mYXN0LWVsZW1lbnRcIjtcbi8qKlxuICogVGhlIHRlbXBsYXRlIGZvciB0aGUge0BsaW5rIEBtaWNyb3NvZnQvZmFzdC1mb3VuZGF0aW9uI0JhZGdlfSBjb21wb25lbnQuXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjb25zdCBiYWRnZVRlbXBsYXRlID0gKGNvbnRleHQsIGRlZmluaXRpb24pID0+IGh0bWwgYFxuICAgIDx0ZW1wbGF0ZSBjbGFzcz1cIiR7eCA9PiAoeC5jaXJjdWxhciA/IFwiY2lyY3VsYXJcIiA6IFwiXCIpfVwiPlxuICAgICAgICA8ZGl2IGNsYXNzPVwiY29udHJvbFwiIHBhcnQ9XCJjb250cm9sXCIgc3R5bGU9XCIke3ggPT4geC5nZW5lcmF0ZUJhZGdlU3R5bGUoKX1cIj5cbiAgICAgICAgICAgIDxzbG90Pjwvc2xvdD5cbiAgICAgICAgPC9kaXY+XG4gICAgPC90ZW1wbGF0ZT5cbmA7XG4iLCJleHBvcnQgKiBmcm9tIFwiLi9iYWRnZS50ZW1wbGF0ZS5qc1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vYmFkZ2UuanNcIjtcbiIsImltcG9ydCB7IF9fZGVjb3JhdGUgfSBmcm9tIFwidHNsaWJcIjtcbmltcG9ydCB7IG9ic2VydmFibGUgfSBmcm9tIFwiQG1pY3Jvc29mdC9mYXN0LWVsZW1lbnRcIjtcbmltcG9ydCB7IEFuY2hvciwgRGVsZWdhdGVzQVJJQUxpbmsgfSBmcm9tIFwiLi4vYW5jaG9yL2FuY2hvci5qc1wiO1xuaW1wb3J0IHsgU3RhcnRFbmQgfSBmcm9tIFwiLi4vcGF0dGVybnMvaW5kZXguanNcIjtcbmltcG9ydCB7IGFwcGx5TWl4aW5zIH0gZnJvbSBcIi4uL3V0aWxpdGllcy9hcHBseS1taXhpbnMuanNcIjtcbi8qKlxuICogQSBCcmVhZGNydW1iIEl0ZW0gQ3VzdG9tIEhUTUwgRWxlbWVudC5cbiAqXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjbGFzcyBCcmVhZGNydW1iSXRlbSBleHRlbmRzIEFuY2hvciB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAaW50ZXJuYWxcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuc2VwYXJhdG9yID0gdHJ1ZTtcbiAgICB9XG59XG5fX2RlY29yYXRlKFtcbiAgICBvYnNlcnZhYmxlXG5dLCBCcmVhZGNydW1iSXRlbS5wcm90b3R5cGUsIFwic2VwYXJhdG9yXCIsIHZvaWQgMCk7XG5hcHBseU1peGlucyhCcmVhZGNydW1iSXRlbSwgU3RhcnRFbmQsIERlbGVnYXRlc0FSSUFMaW5rKTtcbiIsImltcG9ydCB7IGh0bWwsIHdoZW4gfSBmcm9tIFwiQG1pY3Jvc29mdC9mYXN0LWVsZW1lbnRcIjtcbmltcG9ydCB7IGFuY2hvclRlbXBsYXRlIH0gZnJvbSBcIi4uL2FuY2hvci9hbmNob3IudGVtcGxhdGUuanNcIjtcbmltcG9ydCB7IGVuZFNsb3RUZW1wbGF0ZSwgc3RhcnRTbG90VGVtcGxhdGUgfSBmcm9tIFwiLi4vcGF0dGVybnMvc3RhcnQtZW5kLmpzXCI7XG4vKipcbiAqIFRoZSB0ZW1wbGF0ZSBmb3IgdGhlIHtAbGluayBAbWljcm9zb2Z0L2Zhc3QtZm91bmRhdGlvbiMoQnJlYWRjcnVtYkl0ZW06Y2xhc3MpfSBjb21wb25lbnQuXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjb25zdCBicmVhZGNydW1iSXRlbVRlbXBsYXRlID0gKGNvbnRleHQsIGRlZmluaXRpb24pID0+IGh0bWwgYFxuICAgIDxkaXYgcm9sZT1cImxpc3RpdGVtXCIgY2xhc3M9XCJsaXN0aXRlbVwiIHBhcnQ9XCJsaXN0aXRlbVwiPlxuICAgICAgICAke3doZW4oeCA9PiB4LmhyZWYgJiYgeC5ocmVmLmxlbmd0aCA+IDAsIGh0bWwgYFxuICAgICAgICAgICAgICAgICR7YW5jaG9yVGVtcGxhdGUoY29udGV4dCwgZGVmaW5pdGlvbil9XG4gICAgICAgICAgICBgKX1cbiAgICAgICAgJHt3aGVuKHggPT4gIXguaHJlZiwgaHRtbCBgXG4gICAgICAgICAgICAgICAgJHtzdGFydFNsb3RUZW1wbGF0ZShjb250ZXh0LCBkZWZpbml0aW9uKX1cbiAgICAgICAgICAgICAgICA8c2xvdD48L3Nsb3Q+XG4gICAgICAgICAgICAgICAgJHtlbmRTbG90VGVtcGxhdGUoY29udGV4dCwgZGVmaW5pdGlvbil9XG4gICAgICAgICAgICBgKX1cbiAgICAgICAgJHt3aGVuKHggPT4geC5zZXBhcmF0b3IsIGh0bWwgYFxuICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwic2VwYXJhdG9yXCIgcGFydD1cInNlcGFyYXRvclwiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPlxuICAgICAgICAgICAgICAgICAgICA8c2xvdCBuYW1lPVwic2VwYXJhdG9yXCI+JHtkZWZpbml0aW9uLnNlcGFyYXRvciB8fCBcIlwifTwvc2xvdD5cbiAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICBgKX1cbiAgICA8L2Rpdj5cbmA7XG4iLCJleHBvcnQgKiBmcm9tIFwiLi9icmVhZGNydW1iLWl0ZW0udGVtcGxhdGUuanNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL2JyZWFkY3J1bWItaXRlbS5qc1wiO1xuIiwiaW1wb3J0IHsgX19kZWNvcmF0ZSB9IGZyb20gXCJ0c2xpYlwiO1xuaW1wb3J0IHsgb2JzZXJ2YWJsZSB9IGZyb20gXCJAbWljcm9zb2Z0L2Zhc3QtZWxlbWVudFwiO1xuaW1wb3J0IHsgQnJlYWRjcnVtYkl0ZW0gfSBmcm9tIFwiLi4vYnJlYWRjcnVtYi1pdGVtL2JyZWFkY3J1bWItaXRlbS5qc1wiO1xuaW1wb3J0IHsgRm91bmRhdGlvbkVsZW1lbnQgfSBmcm9tIFwiLi4vZm91bmRhdGlvbi1lbGVtZW50L2ZvdW5kYXRpb24tZWxlbWVudC5qc1wiO1xuLyoqXG4gKiBBIEJyZWFkY3J1bWIgQ3VzdG9tIEhUTUwgRWxlbWVudC5cbiAqIEBzbG90IC0gVGhlIGRlZmF1bHQgc2xvdCBmb3IgdGhlIGJyZWFkY3J1bWIgaXRlbXNcbiAqIEBjc3NwYXJ0IGxpc3QgLSBUaGUgZWxlbWVudCB3cmFwcGluZyB0aGUgc2xvdHRlZCBpdGVtc1xuICpcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGNsYXNzIEJyZWFkY3J1bWIgZXh0ZW5kcyBGb3VuZGF0aW9uRWxlbWVudCB7XG4gICAgc2xvdHRlZEJyZWFkY3J1bWJJdGVtc0NoYW5nZWQoKSB7XG4gICAgICAgIGlmICh0aGlzLiRmYXN0Q29udHJvbGxlci5pc0Nvbm5lY3RlZCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuc2xvdHRlZEJyZWFkY3J1bWJJdGVtcyA9PT0gdW5kZWZpbmVkIHx8XG4gICAgICAgICAgICAgICAgdGhpcy5zbG90dGVkQnJlYWRjcnVtYkl0ZW1zLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGxhc3ROb2RlID0gdGhpcy5zbG90dGVkQnJlYWRjcnVtYkl0ZW1zW3RoaXMuc2xvdHRlZEJyZWFkY3J1bWJJdGVtcy5sZW5ndGggLSAxXTtcbiAgICAgICAgICAgIHRoaXMuc2xvdHRlZEJyZWFkY3J1bWJJdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgaXRlbUlzTGFzdE5vZGUgPSBpdGVtID09PSBsYXN0Tm9kZTtcbiAgICAgICAgICAgICAgICB0aGlzLnNldEl0ZW1TZXBhcmF0b3IoaXRlbSwgaXRlbUlzTGFzdE5vZGUpO1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0QXJpYUN1cnJlbnQoaXRlbSwgaXRlbUlzTGFzdE5vZGUpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc2V0SXRlbVNlcGFyYXRvcihpdGVtLCBpc0xhc3ROb2RlKSB7XG4gICAgICAgIGlmIChpdGVtIGluc3RhbmNlb2YgQnJlYWRjcnVtYkl0ZW0pIHtcbiAgICAgICAgICAgIGl0ZW0uc2VwYXJhdG9yID0gIWlzTGFzdE5vZGU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogRmluZHMgaHJlZiBvbiBjaGlsZG5vZGVzIGluIHRoZSBsaWdodCBET00gb3Igc2hhZG93IERPTS5cbiAgICAgKiBXZSBsb29rIGluIHRoZSBzaGFkb3cgRE9NIGJlY2F1c2Ugd2UgaW5zZXJ0IGFuIGFuY2hvciB3aGVuIGJyZWFkY3J1bWItaXRlbSBoYXMgYW4gaHJlZi5cbiAgICAgKi9cbiAgICBmaW5kQ2hpbGRXaXRoSHJlZihub2RlKSB7XG4gICAgICAgIHZhciBfYSwgX2I7XG4gICAgICAgIGlmIChub2RlLmNoaWxkRWxlbWVudENvdW50ID4gMCkge1xuICAgICAgICAgICAgcmV0dXJuIG5vZGUucXVlcnlTZWxlY3RvcihcImFbaHJlZl1cIik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoKF9hID0gbm9kZS5zaGFkb3dSb290KSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuY2hpbGRFbGVtZW50Q291bnQpIHtcbiAgICAgICAgICAgIHJldHVybiAoX2IgPSBub2RlLnNoYWRvd1Jvb3QpID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi5xdWVyeVNlbGVjdG9yKFwiYVtocmVmXVwiKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogIFNldHMgQVJJQSBDdXJyZW50IGZvciB0aGUgY3VycmVudCBub2RlXG4gICAgICogSWYgY2hpbGQgbm9kZSB3aXRoIGFuIGFuY2hvciB0YWcgYW5kIHdpdGggaHJlZiBpcyBmb3VuZCB0aGVuIHNldCBhcmlhLWN1cnJlbnQgdG8gY29ycmVjdCB2YWx1ZSBmb3IgdGhlIGNoaWxkIG5vZGUsXG4gICAgICogb3RoZXJ3aXNlIGFwcGx5IGFyaWEtY3VycmVudCB0byB0aGUgaG9zdCBlbGVtZW50LCB3aXRoIGFuIGhyZWZcbiAgICAgKi9cbiAgICBzZXRBcmlhQ3VycmVudChpdGVtLCBpc0xhc3ROb2RlKSB7XG4gICAgICAgIGNvbnN0IGNoaWxkTm9kZVdpdGhIcmVmID0gdGhpcy5maW5kQ2hpbGRXaXRoSHJlZihpdGVtKTtcbiAgICAgICAgaWYgKGNoaWxkTm9kZVdpdGhIcmVmID09PSBudWxsICYmXG4gICAgICAgICAgICBpdGVtLmhhc0F0dHJpYnV0ZShcImhyZWZcIikgJiZcbiAgICAgICAgICAgIGl0ZW0gaW5zdGFuY2VvZiBCcmVhZGNydW1iSXRlbSkge1xuICAgICAgICAgICAgaXNMYXN0Tm9kZVxuICAgICAgICAgICAgICAgID8gaXRlbS5zZXRBdHRyaWJ1dGUoXCJhcmlhLWN1cnJlbnRcIiwgXCJwYWdlXCIpXG4gICAgICAgICAgICAgICAgOiBpdGVtLnJlbW92ZUF0dHJpYnV0ZShcImFyaWEtY3VycmVudFwiKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChjaGlsZE5vZGVXaXRoSHJlZiAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaXNMYXN0Tm9kZVxuICAgICAgICAgICAgICAgID8gY2hpbGROb2RlV2l0aEhyZWYuc2V0QXR0cmlidXRlKFwiYXJpYS1jdXJyZW50XCIsIFwicGFnZVwiKVxuICAgICAgICAgICAgICAgIDogY2hpbGROb2RlV2l0aEhyZWYucmVtb3ZlQXR0cmlidXRlKFwiYXJpYS1jdXJyZW50XCIpO1xuICAgICAgICB9XG4gICAgfVxufVxuX19kZWNvcmF0ZShbXG4gICAgb2JzZXJ2YWJsZVxuXSwgQnJlYWRjcnVtYi5wcm90b3R5cGUsIFwic2xvdHRlZEJyZWFkY3J1bWJJdGVtc1wiLCB2b2lkIDApO1xuIiwiaW1wb3J0IHsgZWxlbWVudHMsIGh0bWwsIHNsb3R0ZWQgfSBmcm9tIFwiQG1pY3Jvc29mdC9mYXN0LWVsZW1lbnRcIjtcbi8qKlxuICogVGhlIHRlbXBsYXRlIGZvciB0aGUge0BsaW5rIEBtaWNyb3NvZnQvZmFzdC1mb3VuZGF0aW9uI0JyZWFkY3J1bWJ9IGNvbXBvbmVudC5cbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGNvbnN0IGJyZWFkY3J1bWJUZW1wbGF0ZSA9IChjb250ZXh0LCBkZWZpbml0aW9uKSA9PiBodG1sIGBcbiAgICA8dGVtcGxhdGUgcm9sZT1cIm5hdmlnYXRpb25cIj5cbiAgICAgICAgPGRpdiByb2xlPVwibGlzdFwiIGNsYXNzPVwibGlzdFwiIHBhcnQ9XCJsaXN0XCI+XG4gICAgICAgICAgICA8c2xvdFxuICAgICAgICAgICAgICAgICR7c2xvdHRlZCh7IHByb3BlcnR5OiBcInNsb3R0ZWRCcmVhZGNydW1iSXRlbXNcIiwgZmlsdGVyOiBlbGVtZW50cygpIH0pfVxuICAgICAgICAgICAgPjwvc2xvdD5cbiAgICAgICAgPC9kaXY+XG4gICAgPC90ZW1wbGF0ZT5cbmA7XG4iLCJleHBvcnQgKiBmcm9tIFwiLi9icmVhZGNydW1iLnRlbXBsYXRlLmpzXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9icmVhZGNydW1iLmpzXCI7XG4iLCJpbXBvcnQgeyBGb3JtQXNzb2NpYXRlZCB9IGZyb20gXCIuLi9mb3JtLWFzc29jaWF0ZWQvZm9ybS1hc3NvY2lhdGVkLmpzXCI7XG5pbXBvcnQgeyBGb3VuZGF0aW9uRWxlbWVudCB9IGZyb20gXCIuLi9mb3VuZGF0aW9uLWVsZW1lbnQvZm91bmRhdGlvbi1lbGVtZW50LmpzXCI7XG5jbGFzcyBfQnV0dG9uIGV4dGVuZHMgRm91bmRhdGlvbkVsZW1lbnQge1xufVxuLyoqXG4gKiBBIGZvcm0tYXNzb2NpYXRlZCBiYXNlIGNsYXNzIGZvciB0aGUge0BsaW5rIEBtaWNyb3NvZnQvZmFzdC1mb3VuZGF0aW9uIyhCdXR0b246Y2xhc3MpfSBjb21wb25lbnQuXG4gKlxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCBjbGFzcyBGb3JtQXNzb2NpYXRlZEJ1dHRvbiBleHRlbmRzIEZvcm1Bc3NvY2lhdGVkKF9CdXR0b24pIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgdGhpcy5wcm94eSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBfX2RlY29yYXRlIH0gZnJvbSBcInRzbGliXCI7XG5pbXBvcnQgeyBhdHRyLCBvYnNlcnZhYmxlIH0gZnJvbSBcIkBtaWNyb3NvZnQvZmFzdC1lbGVtZW50XCI7XG5pbXBvcnQgeyBBUklBR2xvYmFsU3RhdGVzQW5kUHJvcGVydGllcywgU3RhcnRFbmQsIH0gZnJvbSBcIi4uL3BhdHRlcm5zL2luZGV4LmpzXCI7XG5pbXBvcnQgeyBhcHBseU1peGlucyB9IGZyb20gXCIuLi91dGlsaXRpZXMvYXBwbHktbWl4aW5zLmpzXCI7XG5pbXBvcnQgeyBGb3JtQXNzb2NpYXRlZEJ1dHRvbiB9IGZyb20gXCIuL2J1dHRvbi5mb3JtLWFzc29jaWF0ZWQuanNcIjtcbi8qKlxuICogQSBCdXR0b24gQ3VzdG9tIEhUTUwgRWxlbWVudC5cbiAqIEJhc2VkIGxhcmdlbHkgb24gdGhlIHtAbGluayBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9IVE1ML0VsZW1lbnQvYnV0dG9uIHwgPGJ1dHRvbj4gZWxlbWVudCB9LlxuICpcbiAqIEBzbG90IHN0YXJ0IC0gQ29udGVudCB3aGljaCBjYW4gYmUgcHJvdmlkZWQgYmVmb3JlIHRoZSBidXR0b24gY29udGVudFxuICogQHNsb3QgZW5kIC0gQ29udGVudCB3aGljaCBjYW4gYmUgcHJvdmlkZWQgYWZ0ZXIgdGhlIGJ1dHRvbiBjb250ZW50XG4gKiBAc2xvdCAtIFRoZSBkZWZhdWx0IHNsb3QgZm9yIGJ1dHRvbiBjb250ZW50XG4gKiBAY3NzcGFydCBjb250cm9sIC0gVGhlIGJ1dHRvbiBlbGVtZW50XG4gKiBAY3NzcGFydCBjb250ZW50IC0gVGhlIGVsZW1lbnQgd3JhcHBpbmcgYnV0dG9uIGNvbnRlbnRcbiAqXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjbGFzcyBCdXR0b24gZXh0ZW5kcyBGb3JtQXNzb2NpYXRlZEJ1dHRvbiB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBQcmV2ZW50IGV2ZW50cyB0byBwcm9wYWdhdGUgaWYgZGlzYWJsZWQgYW5kIGhhcyBubyBzbG90dGVkIGNvbnRlbnQgd3JhcHBlZCBpbiBIVE1MIGVsZW1lbnRzXG4gICAgICAgICAqIEBpbnRlcm5hbFxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5oYW5kbGVDbGljayA9IChlKSA9PiB7XG4gICAgICAgICAgICB2YXIgX2E7XG4gICAgICAgICAgICBpZiAodGhpcy5kaXNhYmxlZCAmJiAoKF9hID0gdGhpcy5kZWZhdWx0U2xvdHRlZENvbnRlbnQpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5sZW5ndGgpIDw9IDEpIHtcbiAgICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICAvKipcbiAgICAgICAgICogU3VibWl0cyB0aGUgcGFyZW50IGZvcm1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuaGFuZGxlU3VibWlzc2lvbiA9ICgpID0+IHtcbiAgICAgICAgICAgIGlmICghdGhpcy5mb3JtKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgYXR0YWNoZWQgPSB0aGlzLnByb3h5LmlzQ29ubmVjdGVkO1xuICAgICAgICAgICAgaWYgKCFhdHRhY2hlZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuYXR0YWNoUHJveHkoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIEJyb3dzZXIgc3VwcG9ydCBmb3IgcmVxdWVzdFN1Ym1pdCBpcyBub3QgY29tcHJlaGVuc2l2ZVxuICAgICAgICAgICAgLy8gc28gY2xpY2sgdGhlIHByb3h5IGlmIGl0IGlzbid0IHN1cHBvcnRlZFxuICAgICAgICAgICAgdHlwZW9mIHRoaXMuZm9ybS5yZXF1ZXN0U3VibWl0ID09PSBcImZ1bmN0aW9uXCJcbiAgICAgICAgICAgICAgICA/IHRoaXMuZm9ybS5yZXF1ZXN0U3VibWl0KHRoaXMucHJveHkpXG4gICAgICAgICAgICAgICAgOiB0aGlzLnByb3h5LmNsaWNrKCk7XG4gICAgICAgICAgICBpZiAoIWF0dGFjaGVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kZXRhY2hQcm94eSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICAvKipcbiAgICAgICAgICogUmVzZXRzIHRoZSBwYXJlbnQgZm9ybVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5oYW5kbGVGb3JtUmVzZXQgPSAoKSA9PiB7XG4gICAgICAgICAgICB2YXIgX2E7XG4gICAgICAgICAgICAoX2EgPSB0aGlzLmZvcm0pID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5yZXNldCgpO1xuICAgICAgICB9O1xuICAgICAgICAvKipcbiAgICAgICAgICogT3ZlcnJpZGVzIHRoZSBmb2N1cyBjYWxsIGZvciB3aGVyZSBkZWxlZ2F0ZXNGb2N1cyBpcyB1bnN1cHBvcnRlZC5cbiAgICAgICAgICogVGhpcyBjaGVjayB3b3JrcyBmb3IgQ2hyb21lLCBFZGdlIENocm9taXVtLCBGaXJlRm94LCBhbmQgU2FmYXJpXG4gICAgICAgICAqIFJlbGV2YW50IFBSIG9uIHRoZSBGaXJlZm94IGJyb3dzZXI6IGh0dHBzOi8vcGhhYnJpY2F0b3Iuc2VydmljZXMubW96aWxsYS5jb20vRDEyMzg1OFxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5oYW5kbGVVbnN1cHBvcnRlZERlbGVnYXRlc0ZvY3VzID0gKCkgPT4ge1xuICAgICAgICAgICAgdmFyIF9hO1xuICAgICAgICAgICAgLy8gQ2hlY2sgdG8gc2VlIGlmIGRlbGVnYXRlc0ZvY3VzIGlzIHN1cHBvcnRlZFxuICAgICAgICAgICAgaWYgKHdpbmRvdy5TaGFkb3dSb290ICYmXG4gICAgICAgICAgICAgICAgIXdpbmRvdy5TaGFkb3dSb290LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eShcImRlbGVnYXRlc0ZvY3VzXCIpICYmXG4gICAgICAgICAgICAgICAgKChfYSA9IHRoaXMuJGZhc3RDb250cm9sbGVyLmRlZmluaXRpb24uc2hhZG93T3B0aW9ucykgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmRlbGVnYXRlc0ZvY3VzKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuZm9jdXMgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29udHJvbC5mb2N1cygpO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfVxuICAgIGZvcm1hY3Rpb25DaGFuZ2VkKCkge1xuICAgICAgICBpZiAodGhpcy5wcm94eSBpbnN0YW5jZW9mIEhUTUxJbnB1dEVsZW1lbnQpIHtcbiAgICAgICAgICAgIHRoaXMucHJveHkuZm9ybUFjdGlvbiA9IHRoaXMuZm9ybWFjdGlvbjtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmb3JtZW5jdHlwZUNoYW5nZWQoKSB7XG4gICAgICAgIGlmICh0aGlzLnByb3h5IGluc3RhbmNlb2YgSFRNTElucHV0RWxlbWVudCkge1xuICAgICAgICAgICAgdGhpcy5wcm94eS5mb3JtRW5jdHlwZSA9IHRoaXMuZm9ybWVuY3R5cGU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZm9ybW1ldGhvZENoYW5nZWQoKSB7XG4gICAgICAgIGlmICh0aGlzLnByb3h5IGluc3RhbmNlb2YgSFRNTElucHV0RWxlbWVudCkge1xuICAgICAgICAgICAgdGhpcy5wcm94eS5mb3JtTWV0aG9kID0gdGhpcy5mb3JtbWV0aG9kO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZvcm1ub3ZhbGlkYXRlQ2hhbmdlZCgpIHtcbiAgICAgICAgaWYgKHRoaXMucHJveHkgaW5zdGFuY2VvZiBIVE1MSW5wdXRFbGVtZW50KSB7XG4gICAgICAgICAgICB0aGlzLnByb3h5LmZvcm1Ob1ZhbGlkYXRlID0gdGhpcy5mb3Jtbm92YWxpZGF0ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmb3JtdGFyZ2V0Q2hhbmdlZCgpIHtcbiAgICAgICAgaWYgKHRoaXMucHJveHkgaW5zdGFuY2VvZiBIVE1MSW5wdXRFbGVtZW50KSB7XG4gICAgICAgICAgICB0aGlzLnByb3h5LmZvcm1UYXJnZXQgPSB0aGlzLmZvcm10YXJnZXQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdHlwZUNoYW5nZWQocHJldmlvdXMsIG5leHQpIHtcbiAgICAgICAgaWYgKHRoaXMucHJveHkgaW5zdGFuY2VvZiBIVE1MSW5wdXRFbGVtZW50KSB7XG4gICAgICAgICAgICB0aGlzLnByb3h5LnR5cGUgPSB0aGlzLnR5cGU7XG4gICAgICAgIH1cbiAgICAgICAgbmV4dCA9PT0gXCJzdWJtaXRcIiAmJiB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLmhhbmRsZVN1Ym1pc3Npb24pO1xuICAgICAgICBwcmV2aW91cyA9PT0gXCJzdWJtaXRcIiAmJiB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLmhhbmRsZVN1Ym1pc3Npb24pO1xuICAgICAgICBuZXh0ID09PSBcInJlc2V0XCIgJiYgdGhpcy5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5oYW5kbGVGb3JtUmVzZXQpO1xuICAgICAgICBwcmV2aW91cyA9PT0gXCJyZXNldFwiICYmIHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuaGFuZGxlRm9ybVJlc2V0KTtcbiAgICB9XG4gICAgLyoqIHtAaW5oZXJpdERvYyAoRm9ybUFzc29jaWF0ZWQ6aW50ZXJmYWNlKS52YWxpZGF0ZX0gKi9cbiAgICB2YWxpZGF0ZSgpIHtcbiAgICAgICAgc3VwZXIudmFsaWRhdGUodGhpcy5jb250cm9sKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgc3VwZXIuY29ubmVjdGVkQ2FsbGJhY2soKTtcbiAgICAgICAgdGhpcy5wcm94eS5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsIHRoaXMudHlwZSk7XG4gICAgICAgIHRoaXMuaGFuZGxlVW5zdXBwb3J0ZWREZWxlZ2F0ZXNGb2N1cygpO1xuICAgICAgICBjb25zdCBlbGVtZW50cyA9IEFycmF5LmZyb20oKF9hID0gdGhpcy5jb250cm9sKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuY2hpbGRyZW4pO1xuICAgICAgICBpZiAoZWxlbWVudHMpIHtcbiAgICAgICAgICAgIGVsZW1lbnRzLmZvckVhY2goKHNwYW4pID0+IHtcbiAgICAgICAgICAgICAgICBzcGFuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLmhhbmRsZUNsaWNrKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIGRpc2Nvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIHN1cGVyLmRpc2Nvbm5lY3RlZENhbGxiYWNrKCk7XG4gICAgICAgIGNvbnN0IGVsZW1lbnRzID0gQXJyYXkuZnJvbSgoX2EgPSB0aGlzLmNvbnRyb2wpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5jaGlsZHJlbik7XG4gICAgICAgIGlmIChlbGVtZW50cykge1xuICAgICAgICAgICAgZWxlbWVudHMuZm9yRWFjaCgoc3BhbikgPT4ge1xuICAgICAgICAgICAgICAgIHNwYW4ucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuaGFuZGxlQ2xpY2spO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG59XG5fX2RlY29yYXRlKFtcbiAgICBhdHRyKHsgbW9kZTogXCJib29sZWFuXCIgfSlcbl0sIEJ1dHRvbi5wcm90b3R5cGUsIFwiYXV0b2ZvY3VzXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBhdHRyKHsgYXR0cmlidXRlOiBcImZvcm1cIiB9KVxuXSwgQnV0dG9uLnByb3RvdHlwZSwgXCJmb3JtSWRcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIGF0dHJcbl0sIEJ1dHRvbi5wcm90b3R5cGUsIFwiZm9ybWFjdGlvblwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgYXR0clxuXSwgQnV0dG9uLnByb3RvdHlwZSwgXCJmb3JtZW5jdHlwZVwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgYXR0clxuXSwgQnV0dG9uLnByb3RvdHlwZSwgXCJmb3JtbWV0aG9kXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBhdHRyKHsgbW9kZTogXCJib29sZWFuXCIgfSlcbl0sIEJ1dHRvbi5wcm90b3R5cGUsIFwiZm9ybW5vdmFsaWRhdGVcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIGF0dHJcbl0sIEJ1dHRvbi5wcm90b3R5cGUsIFwiZm9ybXRhcmdldFwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgYXR0clxuXSwgQnV0dG9uLnByb3RvdHlwZSwgXCJ0eXBlXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBvYnNlcnZhYmxlXG5dLCBCdXR0b24ucHJvdG90eXBlLCBcImRlZmF1bHRTbG90dGVkQ29udGVudFwiLCB2b2lkIDApO1xuLyoqXG4gKiBJbmNsdWRlcyBBUklBIHN0YXRlcyBhbmQgcHJvcGVydGllcyByZWxhdGluZyB0byB0aGUgQVJJQSBidXR0b24gcm9sZVxuICpcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGNsYXNzIERlbGVnYXRlc0FSSUFCdXR0b24ge1xufVxuX19kZWNvcmF0ZShbXG4gICAgYXR0cih7IGF0dHJpYnV0ZTogXCJhcmlhLWV4cGFuZGVkXCIgfSlcbl0sIERlbGVnYXRlc0FSSUFCdXR0b24ucHJvdG90eXBlLCBcImFyaWFFeHBhbmRlZFwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgYXR0cih7IGF0dHJpYnV0ZTogXCJhcmlhLXByZXNzZWRcIiB9KVxuXSwgRGVsZWdhdGVzQVJJQUJ1dHRvbi5wcm90b3R5cGUsIFwiYXJpYVByZXNzZWRcIiwgdm9pZCAwKTtcbmFwcGx5TWl4aW5zKERlbGVnYXRlc0FSSUFCdXR0b24sIEFSSUFHbG9iYWxTdGF0ZXNBbmRQcm9wZXJ0aWVzKTtcbmFwcGx5TWl4aW5zKEJ1dHRvbiwgU3RhcnRFbmQsIERlbGVnYXRlc0FSSUFCdXR0b24pO1xuIiwiaW1wb3J0IHsgaHRtbCwgcmVmLCBzbG90dGVkIH0gZnJvbSBcIkBtaWNyb3NvZnQvZmFzdC1lbGVtZW50XCI7XG5pbXBvcnQgeyBlbmRTbG90VGVtcGxhdGUsIHN0YXJ0U2xvdFRlbXBsYXRlIH0gZnJvbSBcIi4uL3BhdHRlcm5zL3N0YXJ0LWVuZC5qc1wiO1xuLyoqXG4gKiBUaGUgdGVtcGxhdGUgZm9yIHRoZSB7QGxpbmsgQG1pY3Jvc29mdC9mYXN0LWZvdW5kYXRpb24jKEJ1dHRvbjpjbGFzcyl9IGNvbXBvbmVudC5cbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGNvbnN0IGJ1dHRvblRlbXBsYXRlID0gKGNvbnRleHQsIGRlZmluaXRpb24pID0+IGh0bWwgYFxuICAgIDxidXR0b25cbiAgICAgICAgY2xhc3M9XCJjb250cm9sXCJcbiAgICAgICAgcGFydD1cImNvbnRyb2xcIlxuICAgICAgICA/YXV0b2ZvY3VzPVwiJHt4ID0+IHguYXV0b2ZvY3VzfVwiXG4gICAgICAgID9kaXNhYmxlZD1cIiR7eCA9PiB4LmRpc2FibGVkfVwiXG4gICAgICAgIGZvcm09XCIke3ggPT4geC5mb3JtSWR9XCJcbiAgICAgICAgZm9ybWFjdGlvbj1cIiR7eCA9PiB4LmZvcm1hY3Rpb259XCJcbiAgICAgICAgZm9ybWVuY3R5cGU9XCIke3ggPT4geC5mb3JtZW5jdHlwZX1cIlxuICAgICAgICBmb3JtbWV0aG9kPVwiJHt4ID0+IHguZm9ybW1ldGhvZH1cIlxuICAgICAgICBmb3Jtbm92YWxpZGF0ZT1cIiR7eCA9PiB4LmZvcm1ub3ZhbGlkYXRlfVwiXG4gICAgICAgIGZvcm10YXJnZXQ9XCIke3ggPT4geC5mb3JtdGFyZ2V0fVwiXG4gICAgICAgIG5hbWU9XCIke3ggPT4geC5uYW1lfVwiXG4gICAgICAgIHR5cGU9XCIke3ggPT4geC50eXBlfVwiXG4gICAgICAgIHZhbHVlPVwiJHt4ID0+IHgudmFsdWV9XCJcbiAgICAgICAgYXJpYS1hdG9taWM9XCIke3ggPT4geC5hcmlhQXRvbWljfVwiXG4gICAgICAgIGFyaWEtYnVzeT1cIiR7eCA9PiB4LmFyaWFCdXN5fVwiXG4gICAgICAgIGFyaWEtY29udHJvbHM9XCIke3ggPT4geC5hcmlhQ29udHJvbHN9XCJcbiAgICAgICAgYXJpYS1jdXJyZW50PVwiJHt4ID0+IHguYXJpYUN1cnJlbnR9XCJcbiAgICAgICAgYXJpYS1kZXNjcmliZWRieT1cIiR7eCA9PiB4LmFyaWFEZXNjcmliZWRieX1cIlxuICAgICAgICBhcmlhLWRldGFpbHM9XCIke3ggPT4geC5hcmlhRGV0YWlsc31cIlxuICAgICAgICBhcmlhLWRpc2FibGVkPVwiJHt4ID0+IHguYXJpYURpc2FibGVkfVwiXG4gICAgICAgIGFyaWEtZXJyb3JtZXNzYWdlPVwiJHt4ID0+IHguYXJpYUVycm9ybWVzc2FnZX1cIlxuICAgICAgICBhcmlhLWV4cGFuZGVkPVwiJHt4ID0+IHguYXJpYUV4cGFuZGVkfVwiXG4gICAgICAgIGFyaWEtZmxvd3RvPVwiJHt4ID0+IHguYXJpYUZsb3d0b31cIlxuICAgICAgICBhcmlhLWhhc3BvcHVwPVwiJHt4ID0+IHguYXJpYUhhc3BvcHVwfVwiXG4gICAgICAgIGFyaWEtaGlkZGVuPVwiJHt4ID0+IHguYXJpYUhpZGRlbn1cIlxuICAgICAgICBhcmlhLWludmFsaWQ9XCIke3ggPT4geC5hcmlhSW52YWxpZH1cIlxuICAgICAgICBhcmlhLWtleXNob3J0Y3V0cz1cIiR7eCA9PiB4LmFyaWFLZXlzaG9ydGN1dHN9XCJcbiAgICAgICAgYXJpYS1sYWJlbD1cIiR7eCA9PiB4LmFyaWFMYWJlbH1cIlxuICAgICAgICBhcmlhLWxhYmVsbGVkYnk9XCIke3ggPT4geC5hcmlhTGFiZWxsZWRieX1cIlxuICAgICAgICBhcmlhLWxpdmU9XCIke3ggPT4geC5hcmlhTGl2ZX1cIlxuICAgICAgICBhcmlhLW93bnM9XCIke3ggPT4geC5hcmlhT3duc31cIlxuICAgICAgICBhcmlhLXByZXNzZWQ9XCIke3ggPT4geC5hcmlhUHJlc3NlZH1cIlxuICAgICAgICBhcmlhLXJlbGV2YW50PVwiJHt4ID0+IHguYXJpYVJlbGV2YW50fVwiXG4gICAgICAgIGFyaWEtcm9sZWRlc2NyaXB0aW9uPVwiJHt4ID0+IHguYXJpYVJvbGVkZXNjcmlwdGlvbn1cIlxuICAgICAgICAke3JlZihcImNvbnRyb2xcIil9XG4gICAgPlxuICAgICAgICAke3N0YXJ0U2xvdFRlbXBsYXRlKGNvbnRleHQsIGRlZmluaXRpb24pfVxuICAgICAgICA8c3BhbiBjbGFzcz1cImNvbnRlbnRcIiBwYXJ0PVwiY29udGVudFwiPlxuICAgICAgICAgICAgPHNsb3QgJHtzbG90dGVkKFwiZGVmYXVsdFNsb3R0ZWRDb250ZW50XCIpfT48L3Nsb3Q+XG4gICAgICAgIDwvc3Bhbj5cbiAgICAgICAgJHtlbmRTbG90VGVtcGxhdGUoY29udGV4dCwgZGVmaW5pdGlvbil9XG4gICAgPC9idXR0b24+XG5gO1xuIiwiZXhwb3J0ICogZnJvbSBcIi4vYnV0dG9uLnRlbXBsYXRlLmpzXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9idXR0b24uanNcIjtcbiIsImltcG9ydCB7IF9fZGVjb3JhdGUgfSBmcm9tIFwidHNsaWJcIjtcbmltcG9ydCB7IGF0dHIsIG51bGxhYmxlTnVtYmVyQ29udmVydGVyLCB9IGZyb20gXCJAbWljcm9zb2Z0L2Zhc3QtZWxlbWVudFwiO1xuaW1wb3J0IHsga2V5RW50ZXIgfSBmcm9tIFwiQG1pY3Jvc29mdC9mYXN0LXdlYi11dGlsaXRpZXNcIjtcbmltcG9ydCB7IEZvdW5kYXRpb25FbGVtZW50IH0gZnJvbSBcIi4uL2ZvdW5kYXRpb24tZWxlbWVudC9mb3VuZGF0aW9uLWVsZW1lbnQuanNcIjtcbmltcG9ydCB7IERhdGVGb3JtYXR0ZXIgfSBmcm9tIFwiLi9kYXRlLWZvcm1hdHRlci5qc1wiO1xuLyoqXG4gKiBDYWxlbmRhciBjb21wb25lbnRcbiAqXG4gKiBAc2xvdCAtIFRoZSBkZWZhdWx0IHNsb3QgZm9yIGNhbGVuZGFyIGNvbnRlbnRcbiAqIEBmaXJlcyBkYXRlc2VsZWN0ZWQgLSBGaXJlcyBhIGN1c3RvbSAnZGF0ZXNlbGVjdGVkJyBldmVudCB3aGVuIEVudGVyIGlzIGludm9rZWQgdmlhIGtleWJvYXJkIG9uIGEgZGF0ZVxuICpcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGNsYXNzIENhbGVuZGFyIGV4dGVuZHMgRm91bmRhdGlvbkVsZW1lbnQge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlciguLi5hcmd1bWVudHMpO1xuICAgICAgICAvKipcbiAgICAgICAgICogZGF0ZSBmb3JtYXR0ZXIgdXRpdGxpdHkgZm9yIGdldHRpbmcgbG9jYWxpemVkIHN0cmluZ3NcbiAgICAgICAgICogQHB1YmxpY1xuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5kYXRlRm9ybWF0dGVyID0gbmV3IERhdGVGb3JtYXR0ZXIoKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFJlYWRvbmx5IGF0dHJpYnV0ZSBmb3IgdHVybmluZyBvZmYgZGF0YS1ncmlkXG4gICAgICAgICAqIEBwdWJsaWNcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMucmVhZG9ubHkgPSBmYWxzZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFN0cmluZyByZXBlc2VudGF0aW9uIG9mIHRoZSBmdWxsIGxvY2FsZSBpbmNsdWRpbmcgbWFya2V0LCBjYWxlbmRhciB0eXBlIGFuZCBudW1iZXJpbmcgc3lzdGVtXG4gICAgICAgICAqIEBwdWJsaWNcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMubG9jYWxlID0gXCJlbi1VU1wiO1xuICAgICAgICAvKipcbiAgICAgICAgICogTW9udGggdG8gZGlzcGxheVxuICAgICAgICAgKiBAcHVibGljXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm1vbnRoID0gbmV3IERhdGUoKS5nZXRNb250aCgpICsgMTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFllYXIgb2YgdGhlIG1vbnRoIHRvIGRpc3BsYXlcbiAgICAgICAgICogQHB1YmxpY1xuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy55ZWFyID0gbmV3IERhdGUoKS5nZXRGdWxsWWVhcigpO1xuICAgICAgICAvKipcbiAgICAgICAgICogRm9ybWF0IHN0eWxlIGZvciB0aGUgZGF5XG4gICAgICAgICAqIEBwdWJsaWNcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZGF5Rm9ybWF0ID0gXCJudW1lcmljXCI7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBGb3JtYXQgc3R5bGUgZm9yIHRoZSB3ZWVrIGRheSBsYWJlbHNcbiAgICAgICAgICogQHB1YmxpY1xuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy53ZWVrZGF5Rm9ybWF0ID0gXCJzaG9ydFwiO1xuICAgICAgICAvKipcbiAgICAgICAgICogRm9ybWF0IHN0eWxlIGZvciB0aGUgbW9udGggbGFiZWxcbiAgICAgICAgICogQHB1YmxpY1xuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5tb250aEZvcm1hdCA9IFwibG9uZ1wiO1xuICAgICAgICAvKipcbiAgICAgICAgICogRm9ybWF0IHN0eWxlIGZvciB0aGUgeWVhciB1c2VkIGluIHRoZSB0aXRsZVxuICAgICAgICAgKiBAcHVibGljXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnllYXJGb3JtYXQgPSBcIm51bWVyaWNcIjtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIE1pbmltdW0gbnVtYmVyIG9mIHdlZWtzIHRvIHNob3cgZm9yIHRoZSBtb250aFxuICAgICAgICAgKiBUaGlzIGNhbiBiZSB1c2VkIHRvIG5vcm1hbGl6ZSB0aGUgY2FsZW5kYXIgdmlld1xuICAgICAgICAgKiAgd2hlbiBjaGFuZ2luZyBvciBhY3Jvc3MgbXVsdGlwbGUgY2FsZW5kYXJzXG4gICAgICAgICAqIEBwdWJsaWNcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMubWluV2Vla3MgPSAwO1xuICAgICAgICAvKipcbiAgICAgICAgICogQSBsaXN0IG9mIGRhdGVzIHRoYXQgc2hvdWxkIGJlIHNob3duIGFzIGRpc2FibGVkXG4gICAgICAgICAqIEBwdWJsaWNcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZGlzYWJsZWREYXRlcyA9IFwiXCI7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIGxpc3Qgb2YgZGF0ZXMgdGhhdCBzaG91bGQgYmUgc2hvd24gYXMgaGlnaGxpZ2h0ZWRcbiAgICAgICAgICogQHB1YmxpY1xuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5zZWxlY3RlZERhdGVzID0gXCJcIjtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBudW1iZXIgb2YgbWlsaXNlY29uZHMgaW4gYSBkYXlcbiAgICAgICAgICogQGludGVybmFsXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm9uZURheUluTXMgPSA4NjQwMDAwMDtcbiAgICB9XG4gICAgbG9jYWxlQ2hhbmdlZCgpIHtcbiAgICAgICAgdGhpcy5kYXRlRm9ybWF0dGVyLmxvY2FsZSA9IHRoaXMubG9jYWxlO1xuICAgIH1cbiAgICBkYXlGb3JtYXRDaGFuZ2VkKCkge1xuICAgICAgICB0aGlzLmRhdGVGb3JtYXR0ZXIuZGF5Rm9ybWF0ID0gdGhpcy5kYXlGb3JtYXQ7XG4gICAgfVxuICAgIHdlZWtkYXlGb3JtYXRDaGFuZ2VkKCkge1xuICAgICAgICB0aGlzLmRhdGVGb3JtYXR0ZXIud2Vla2RheUZvcm1hdCA9IHRoaXMud2Vla2RheUZvcm1hdDtcbiAgICB9XG4gICAgbW9udGhGb3JtYXRDaGFuZ2VkKCkge1xuICAgICAgICB0aGlzLmRhdGVGb3JtYXR0ZXIubW9udGhGb3JtYXQgPSB0aGlzLm1vbnRoRm9ybWF0O1xuICAgIH1cbiAgICB5ZWFyRm9ybWF0Q2hhbmdlZCgpIHtcbiAgICAgICAgdGhpcy5kYXRlRm9ybWF0dGVyLnllYXJGb3JtYXQgPSB0aGlzLnllYXJGb3JtYXQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldHMgZGF0YSBuZWVkZWQgdG8gcmVuZGVyIGFib3V0IGEgY2FsZW5kYXIgbW9udGggYXMgd2VsbCBhcyB0aGUgcHJldmlvdXMgYW5kIG5leHQgbW9udGhzXG4gICAgICogQHBhcmFtIHllYXIgLSB5ZWFyIG9mIHRoZSBjYWxlbmRhclxuICAgICAqIEBwYXJhbSBtb250aCAtIG1vbnRoIG9mIHRoZSBjYWxlbmRhclxuICAgICAqIEByZXR1cm5zIC0gYW4gb2JqZWN0IHdpdGggZGF0YSBhYm91dCB0aGUgY3VycmVudCBhbmQgMiBzdXJyb3VuZGluZyBtb250aHNcbiAgICAgKiBAcHVibGljXG4gICAgICovXG4gICAgZ2V0TW9udGhJbmZvKG1vbnRoID0gdGhpcy5tb250aCwgeWVhciA9IHRoaXMueWVhcikge1xuICAgICAgICBjb25zdCBnZXRGaXJzdERheSA9IChkYXRlKSA9PiBuZXcgRGF0ZShkYXRlLmdldEZ1bGxZZWFyKCksIGRhdGUuZ2V0TW9udGgoKSwgMSkuZ2V0RGF5KCk7XG4gICAgICAgIGNvbnN0IGdldExlbmd0aCA9IChkYXRlKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBuZXh0TW9udGggPSBuZXcgRGF0ZShkYXRlLmdldEZ1bGxZZWFyKCksIGRhdGUuZ2V0TW9udGgoKSArIDEsIDEpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBEYXRlKG5leHRNb250aC5nZXRUaW1lKCkgLSB0aGlzLm9uZURheUluTXMpLmdldERhdGUoKTtcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgdGhpc01vbnRoID0gbmV3IERhdGUoeWVhciwgbW9udGggLSAxKTtcbiAgICAgICAgY29uc3QgbmV4dE1vbnRoID0gbmV3IERhdGUoeWVhciwgbW9udGgpO1xuICAgICAgICBjb25zdCBwcmV2aW91c01vbnRoID0gbmV3IERhdGUoeWVhciwgbW9udGggLSAyKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGxlbmd0aDogZ2V0TGVuZ3RoKHRoaXNNb250aCksXG4gICAgICAgICAgICBtb250aCxcbiAgICAgICAgICAgIHN0YXJ0OiBnZXRGaXJzdERheSh0aGlzTW9udGgpLFxuICAgICAgICAgICAgeWVhcixcbiAgICAgICAgICAgIHByZXZpb3VzOiB7XG4gICAgICAgICAgICAgICAgbGVuZ3RoOiBnZXRMZW5ndGgocHJldmlvdXNNb250aCksXG4gICAgICAgICAgICAgICAgbW9udGg6IHByZXZpb3VzTW9udGguZ2V0TW9udGgoKSArIDEsXG4gICAgICAgICAgICAgICAgc3RhcnQ6IGdldEZpcnN0RGF5KHByZXZpb3VzTW9udGgpLFxuICAgICAgICAgICAgICAgIHllYXI6IHByZXZpb3VzTW9udGguZ2V0RnVsbFllYXIoKSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBuZXh0OiB7XG4gICAgICAgICAgICAgICAgbGVuZ3RoOiBnZXRMZW5ndGgobmV4dE1vbnRoKSxcbiAgICAgICAgICAgICAgICBtb250aDogbmV4dE1vbnRoLmdldE1vbnRoKCkgKyAxLFxuICAgICAgICAgICAgICAgIHN0YXJ0OiBnZXRGaXJzdERheShuZXh0TW9udGgpLFxuICAgICAgICAgICAgICAgIHllYXI6IG5leHRNb250aC5nZXRGdWxsWWVhcigpLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQSBsaXN0IG9mIGNhbGVuZGFyIGRheXNcbiAgICAgKiBAcGFyYW0gaW5mbyAtIGFuIG9iamVjdCBjb250YWluaW5nIHRoZSBpbmZvcm1hdGlvbiBuZWVkZWQgdG8gcmVuZGVyIGEgY2FsZW5kYXIgbW9udGhcbiAgICAgKiBAcGFyYW0gbWluV2Vla3MgLSBtaW5pbXVtIG51bWJlciBvZiB3ZWVrcyB0byBzaG93XG4gICAgICogQHJldHVybnMgYSBsaXN0IG9mIGRheXMgaW4gYSBjYWxlbmRhciBtb250aFxuICAgICAqIEBwdWJsaWNcbiAgICAgKi9cbiAgICBnZXREYXlzKGluZm8gPSB0aGlzLmdldE1vbnRoSW5mbygpLCBtaW5XZWVrcyA9IHRoaXMubWluV2Vla3MpIHtcbiAgICAgICAgbWluV2Vla3MgPSBtaW5XZWVrcyA+IDEwID8gMTAgOiBtaW5XZWVrcztcbiAgICAgICAgY29uc3QgeyBzdGFydCwgbGVuZ3RoLCBwcmV2aW91cywgbmV4dCB9ID0gaW5mbztcbiAgICAgICAgY29uc3QgZGF5cyA9IFtdO1xuICAgICAgICBsZXQgZGF5Q291bnQgPSAxIC0gc3RhcnQ7XG4gICAgICAgIHdoaWxlIChkYXlDb3VudCA8IGxlbmd0aCArIDEgfHxcbiAgICAgICAgICAgIGRheXMubGVuZ3RoIDwgbWluV2Vla3MgfHxcbiAgICAgICAgICAgIGRheXNbZGF5cy5sZW5ndGggLSAxXS5sZW5ndGggJSA3ICE9PSAwKSB7XG4gICAgICAgICAgICBjb25zdCB7IG1vbnRoLCB5ZWFyIH0gPSBkYXlDb3VudCA8IDEgPyBwcmV2aW91cyA6IGRheUNvdW50ID4gbGVuZ3RoID8gbmV4dCA6IGluZm87XG4gICAgICAgICAgICBjb25zdCBkYXkgPSBkYXlDb3VudCA8IDFcbiAgICAgICAgICAgICAgICA/IHByZXZpb3VzLmxlbmd0aCArIGRheUNvdW50XG4gICAgICAgICAgICAgICAgOiBkYXlDb3VudCA+IGxlbmd0aFxuICAgICAgICAgICAgICAgICAgICA/IGRheUNvdW50IC0gbGVuZ3RoXG4gICAgICAgICAgICAgICAgICAgIDogZGF5Q291bnQ7XG4gICAgICAgICAgICBjb25zdCBkYXRlU3RyaW5nID0gYCR7bW9udGh9LSR7ZGF5fS0ke3llYXJ9YDtcbiAgICAgICAgICAgIGNvbnN0IGRpc2FibGVkID0gdGhpcy5kYXRlSW5TdHJpbmcoZGF0ZVN0cmluZywgdGhpcy5kaXNhYmxlZERhdGVzKTtcbiAgICAgICAgICAgIGNvbnN0IHNlbGVjdGVkID0gdGhpcy5kYXRlSW5TdHJpbmcoZGF0ZVN0cmluZywgdGhpcy5zZWxlY3RlZERhdGVzKTtcbiAgICAgICAgICAgIGNvbnN0IGRhdGUgPSB7XG4gICAgICAgICAgICAgICAgZGF5LFxuICAgICAgICAgICAgICAgIG1vbnRoLFxuICAgICAgICAgICAgICAgIHllYXIsXG4gICAgICAgICAgICAgICAgZGlzYWJsZWQsXG4gICAgICAgICAgICAgICAgc2VsZWN0ZWQsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY29uc3QgdGFyZ2V0ID0gZGF5c1tkYXlzLmxlbmd0aCAtIDFdO1xuICAgICAgICAgICAgaWYgKGRheXMubGVuZ3RoID09PSAwIHx8IHRhcmdldC5sZW5ndGggJSA3ID09PSAwKSB7XG4gICAgICAgICAgICAgICAgZGF5cy5wdXNoKFtkYXRlXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0YXJnZXQucHVzaChkYXRlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGRheUNvdW50Kys7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGRheXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEEgaGVscGVyIGZ1bmN0aW9uIHRoYXQgY2hlY2tzIGlmIGEgZGF0ZSBleGlzdHMgaW4gYSBsaXN0IG9mIGRhdGVzXG4gICAgICogQHBhcmFtIGRhdGUgLSBBIGRhdGUgb2JqZWMgdGhhdCBpbmNsdWRlcyB0aGUgZGF5LCBtb250aCBhbmQgeWVhclxuICAgICAqIEBwYXJhbSBkYXRlc1N0cmluZyAtIGEgY29tbWEgc2VwYXJhdGVkIGxpc3Qgb2YgZGF0ZXNcbiAgICAgKiBAcmV0dXJucyAtIFJldHVybnMgdHJ1ZSBpZiBpdCBmb3VuZCB0aGUgZGF0ZSBpbiB0aGUgbGlzdCBvZiBkYXRlc1xuICAgICAqIEBwdWJsaWNcbiAgICAgKi9cbiAgICBkYXRlSW5TdHJpbmcoZGF0ZSwgZGF0ZXNTdHJpbmcpIHtcbiAgICAgICAgY29uc3QgZGF0ZXMgPSBkYXRlc1N0cmluZy5zcGxpdChcIixcIikubWFwKHN0ciA9PiBzdHIudHJpbSgpKTtcbiAgICAgICAgZGF0ZSA9XG4gICAgICAgICAgICB0eXBlb2YgZGF0ZSA9PT0gXCJzdHJpbmdcIlxuICAgICAgICAgICAgICAgID8gZGF0ZVxuICAgICAgICAgICAgICAgIDogYCR7ZGF0ZS5nZXRNb250aCgpICsgMX0tJHtkYXRlLmdldERhdGUoKX0tJHtkYXRlLmdldEZ1bGxZZWFyKCl9YDtcbiAgICAgICAgcmV0dXJuIGRhdGVzLnNvbWUoZCA9PiBkID09PSBkYXRlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGNsYXNzIHN0cmluZyBmb3IgdGhlIGRheSBjb250YWluZXJcbiAgICAgKiBAcGFyYW0gZGF0ZSAtIGRhdGUgb2YgdGhlIGNhbGVuZGFyIGNlbGxcbiAgICAgKiBAcmV0dXJucyAtIHN0cmluZyBvZiBjbGFzcyBuYW1lc1xuICAgICAqIEBwdWJsaWNcbiAgICAgKi9cbiAgICBnZXREYXlDbGFzc05hbWVzKGRhdGUsIHRvZGF5U3RyaW5nKSB7XG4gICAgICAgIGNvbnN0IHsgZGF5LCBtb250aCwgeWVhciwgZGlzYWJsZWQsIHNlbGVjdGVkIH0gPSBkYXRlO1xuICAgICAgICBjb25zdCB0b2RheSA9IHRvZGF5U3RyaW5nID09PSBgJHttb250aH0tJHtkYXl9LSR7eWVhcn1gO1xuICAgICAgICBjb25zdCBpbmFjdGl2ZSA9IHRoaXMubW9udGggIT09IG1vbnRoO1xuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgXCJkYXlcIixcbiAgICAgICAgICAgIHRvZGF5ICYmIFwidG9kYXlcIixcbiAgICAgICAgICAgIGluYWN0aXZlICYmIFwiaW5hY3RpdmVcIixcbiAgICAgICAgICAgIGRpc2FibGVkICYmIFwiZGlzYWJsZWRcIixcbiAgICAgICAgICAgIHNlbGVjdGVkICYmIFwic2VsZWN0ZWRcIixcbiAgICAgICAgXVxuICAgICAgICAgICAgLmZpbHRlcihCb29sZWFuKVxuICAgICAgICAgICAgLmpvaW4oXCIgXCIpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgbGlzdCBvZiB3ZWVrZGF5IGxhYmVsc1xuICAgICAqIEByZXR1cm5zIEFuIGFycmF5IG9mIHdlZWtkYXkgdGV4dCBhbmQgZnVsbCB0ZXh0IGlmIGFiYnJldmlhdGVkXG4gICAgICogQHB1YmxpY1xuICAgICAqL1xuICAgIGdldFdlZWtkYXlUZXh0KCkge1xuICAgICAgICBjb25zdCB3ZWVrZGF5VGV4dCA9IHRoaXMuZGF0ZUZvcm1hdHRlci5nZXRXZWVrZGF5cygpLm1hcCh0ZXh0ID0+ICh7IHRleHQgfSkpO1xuICAgICAgICBpZiAodGhpcy53ZWVrZGF5Rm9ybWF0ICE9PSBcImxvbmdcIikge1xuICAgICAgICAgICAgY29uc3QgbG9uZ1RleHQgPSB0aGlzLmRhdGVGb3JtYXR0ZXIuZ2V0V2Vla2RheXMoXCJsb25nXCIpO1xuICAgICAgICAgICAgd2Vla2RheVRleHQuZm9yRWFjaCgod2Vla2RheSwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgICAgICB3ZWVrZGF5LmFiYnIgPSBsb25nVGV4dFtpbmRleF07XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gd2Vla2RheVRleHQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEVtaXRzIHRoZSBcImRhdGUtc2VsZWN0XCIgZXZlbnQgd2l0aCB0aGUgZGF5LCBtb250aCBhbmQgeWVhci5cbiAgICAgKiBAcGFyYW0gZGF0ZSAtIERhdGUgY2VsbFxuICAgICAqIEBwdWJsaWNcbiAgICAgKi9cbiAgICBoYW5kbGVEYXRlU2VsZWN0KGV2ZW50LCBkYXkpIHtcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQ7XG4gICAgICAgIHRoaXMuJGVtaXQoXCJkYXRlc2VsZWN0ZWRcIiwgZGF5KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSGFuZGxlcyBrZXlib2FyZCBldmVudHMgb24gYSBjZWxsXG4gICAgICogQHBhcmFtIGV2ZW50IC0gS2V5Ym9hcmQgZXZlbnRcbiAgICAgKiBAcGFyYW0gZGF0ZSAtIERhdGUgb2YgdGhlIGNlbGwgc2VsZWN0ZWRcbiAgICAgKi9cbiAgICBoYW5kbGVLZXlkb3duKGV2ZW50LCBkYXRlKSB7XG4gICAgICAgIGlmIChldmVudC5rZXkgPT09IGtleUVudGVyKSB7XG4gICAgICAgICAgICB0aGlzLmhhbmRsZURhdGVTZWxlY3QoZXZlbnQsIGRhdGUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbn1cbl9fZGVjb3JhdGUoW1xuICAgIGF0dHIoeyBtb2RlOiBcImJvb2xlYW5cIiB9KVxuXSwgQ2FsZW5kYXIucHJvdG90eXBlLCBcInJlYWRvbmx5XCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBhdHRyXG5dLCBDYWxlbmRhci5wcm90b3R5cGUsIFwibG9jYWxlXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBhdHRyKHsgY29udmVydGVyOiBudWxsYWJsZU51bWJlckNvbnZlcnRlciB9KVxuXSwgQ2FsZW5kYXIucHJvdG90eXBlLCBcIm1vbnRoXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBhdHRyKHsgY29udmVydGVyOiBudWxsYWJsZU51bWJlckNvbnZlcnRlciB9KVxuXSwgQ2FsZW5kYXIucHJvdG90eXBlLCBcInllYXJcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIGF0dHIoeyBhdHRyaWJ1dGU6IFwiZGF5LWZvcm1hdFwiLCBtb2RlOiBcImZyb21WaWV3XCIgfSlcbl0sIENhbGVuZGFyLnByb3RvdHlwZSwgXCJkYXlGb3JtYXRcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIGF0dHIoeyBhdHRyaWJ1dGU6IFwid2Vla2RheS1mb3JtYXRcIiwgbW9kZTogXCJmcm9tVmlld1wiIH0pXG5dLCBDYWxlbmRhci5wcm90b3R5cGUsIFwid2Vla2RheUZvcm1hdFwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgYXR0cih7IGF0dHJpYnV0ZTogXCJtb250aC1mb3JtYXRcIiwgbW9kZTogXCJmcm9tVmlld1wiIH0pXG5dLCBDYWxlbmRhci5wcm90b3R5cGUsIFwibW9udGhGb3JtYXRcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIGF0dHIoeyBhdHRyaWJ1dGU6IFwieWVhci1mb3JtYXRcIiwgbW9kZTogXCJmcm9tVmlld1wiIH0pXG5dLCBDYWxlbmRhci5wcm90b3R5cGUsIFwieWVhckZvcm1hdFwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgYXR0cih7IGF0dHJpYnV0ZTogXCJtaW4td2Vla3NcIiwgY29udmVydGVyOiBudWxsYWJsZU51bWJlckNvbnZlcnRlciB9KVxuXSwgQ2FsZW5kYXIucHJvdG90eXBlLCBcIm1pbldlZWtzXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBhdHRyKHsgYXR0cmlidXRlOiBcImRpc2FibGVkLWRhdGVzXCIgfSlcbl0sIENhbGVuZGFyLnByb3RvdHlwZSwgXCJkaXNhYmxlZERhdGVzXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBhdHRyKHsgYXR0cmlidXRlOiBcInNlbGVjdGVkLWRhdGVzXCIgfSlcbl0sIENhbGVuZGFyLnByb3RvdHlwZSwgXCJzZWxlY3RlZERhdGVzXCIsIHZvaWQgMCk7XG4iLCJpbXBvcnQgeyBodG1sLCByZXBlYXQsIHdoZW4gfSBmcm9tIFwiQG1pY3Jvc29mdC9mYXN0LWVsZW1lbnRcIjtcbmltcG9ydCB7IGVuZFRlbXBsYXRlLCBzdGFydFRlbXBsYXRlIH0gZnJvbSBcIi4uL3BhdHRlcm5zL3N0YXJ0LWVuZC5qc1wiO1xuaW1wb3J0IHsgRGF0YUdyaWQsIERhdGFHcmlkQ2VsbCwgRGF0YUdyaWRSb3cgfSBmcm9tIFwiLi4vZGF0YS1ncmlkL2luZGV4LmpzXCI7XG4vKipcbiAqIEEgYmFzaWMgQ2FsZW5kYXIgdGl0bGUgdGVtcGxhdGUgdGhhdCBpbmNsdWRlcyB0aGUgbW9udGggYW5kIHllYXJcbiAqIEByZXR1cm5zIC0gQSBjYWxlbmRhciB0aXRsZSB0ZW1wbGF0ZVxuICogQHB1YmxpY1xuICovXG5leHBvcnQgY29uc3QgQ2FsZW5kYXJUaXRsZVRlbXBsYXRlID0gaHRtbCBgXG4gICAgPGRpdlxuICAgICAgICBjbGFzcz1cInRpdGxlXCJcbiAgICAgICAgcGFydD1cInRpdGxlXCJcbiAgICAgICAgYXJpYS1sYWJlbD1cIiR7KHgpID0+IHguZGF0ZUZvcm1hdHRlci5nZXREYXRlKGAke3gubW9udGh9LTItJHt4LnllYXJ9YCwge1xuICAgIG1vbnRoOiBcImxvbmdcIixcbiAgICB5ZWFyOiBcIm51bWVyaWNcIixcbn0pfVwiXG4gICAgPlxuICAgICAgICA8c3BhbiBwYXJ0PVwibW9udGhcIj5cbiAgICAgICAgICAgICR7KHgpID0+IHguZGF0ZUZvcm1hdHRlci5nZXRNb250aCh4Lm1vbnRoKX1cbiAgICAgICAgPC9zcGFuPlxuICAgICAgICA8c3BhbiBwYXJ0PVwieWVhclwiPiR7KHgpID0+IHguZGF0ZUZvcm1hdHRlci5nZXRZZWFyKHgueWVhcil9PC9zcGFuPlxuICAgIDwvZGl2PlxuYDtcbi8qKlxuICogQ2FsZW5kYXIgd2Vla2RheSBsYWJlbCB0ZW1wbGF0ZVxuICogQHJldHVybnMgLSBUaGUgd2Vla2RheSBsYWJlbHMgdGVtcGxhdGVcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGNvbnN0IGNhbGVuZGFyV2Vla2RheVRlbXBsYXRlID0gY29udGV4dCA9PiB7XG4gICAgY29uc3QgY2VsbFRhZyA9IGNvbnRleHQudGFnRm9yKERhdGFHcmlkQ2VsbCk7XG4gICAgcmV0dXJuIGh0bWwgYFxuICAgICAgICA8JHtjZWxsVGFnfVxuICAgICAgICAgICAgY2xhc3M9XCJ3ZWVrLWRheVwiXG4gICAgICAgICAgICBwYXJ0PVwid2Vlay1kYXlcIlxuICAgICAgICAgICAgdGFiaW5kZXg9XCItMVwiXG4gICAgICAgICAgICBncmlkLWNvbHVtbj1cIiR7KHgsIGMpID0+IGMuaW5kZXggKyAxfVwiXG4gICAgICAgICAgICBhYmJyPVwiJHt4ID0+IHguYWJicn1cIlxuICAgICAgICA+XG4gICAgICAgICAgICAke3ggPT4geC50ZXh0fVxuICAgICAgICA8LyR7Y2VsbFRhZ30+XG4gICAgYDtcbn07XG4vKipcbiAqIEEgY2FsZW5kYXIgZGF5IHRlbXBsYXRlXG4gKiBAcGFyYW0gY29udGV4dCAtIEVsZW1lbnQgZGVmaW5pdGlvbiBjb250ZXh0IGZvciBnZXR0aW5nIHRoZSBjZWxsIHRhZyBmb3IgY2FsZW5kYXItY2VsbFxuICogQHBhcmFtIHRvZGF5U3RyaW5nIC0gQSBzdHJpbmcgcmVwcmVzZW50YXRpb24gZm9yIHRvZGF5cyBkYXRlXG4gKiBAcmV0dXJucyAtIEEgY2FsZW5kYXIgY2VsbCB0ZW1wbGF0ZSBmb3IgYSBnaXZlbiBkYXRlXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjb25zdCBjYWxlbmRhckNlbGxUZW1wbGF0ZSA9IChjb250ZXh0LCB0b2RheVN0cmluZykgPT4ge1xuICAgIGNvbnN0IGNlbGxUYWcgPSBjb250ZXh0LnRhZ0ZvcihEYXRhR3JpZENlbGwpO1xuICAgIHJldHVybiBodG1sIGBcbiAgICAgICAgPCR7Y2VsbFRhZ31cbiAgICAgICAgICAgIGNsYXNzPVwiJHsoeCwgYykgPT4gYy5wYXJlbnRDb250ZXh0LnBhcmVudC5nZXREYXlDbGFzc05hbWVzKHgsIHRvZGF5U3RyaW5nKX1cIlxuICAgICAgICAgICAgcGFydD1cImRheVwiXG4gICAgICAgICAgICB0YWJpbmRleD1cIi0xXCJcbiAgICAgICAgICAgIHJvbGU9XCJncmlkY2VsbFwiXG4gICAgICAgICAgICBncmlkLWNvbHVtbj1cIiR7KHgsIGMpID0+IGMuaW5kZXggKyAxfVwiXG4gICAgICAgICAgICBAY2xpY2s9XCIkeyh4LCBjKSA9PiBjLnBhcmVudENvbnRleHQucGFyZW50LmhhbmRsZURhdGVTZWxlY3QoYy5ldmVudCwgeCl9XCJcbiAgICAgICAgICAgIEBrZXlkb3duPVwiJHsoeCwgYykgPT4gYy5wYXJlbnRDb250ZXh0LnBhcmVudC5oYW5kbGVLZXlkb3duKGMuZXZlbnQsIHgpfVwiXG4gICAgICAgICAgICBhcmlhLWxhYmVsPVwiJHsoeCwgYykgPT4gYy5wYXJlbnRDb250ZXh0LnBhcmVudC5kYXRlRm9ybWF0dGVyLmdldERhdGUoYCR7eC5tb250aH0tJHt4LmRheX0tJHt4LnllYXJ9YCwgeyBtb250aDogXCJsb25nXCIsIGRheTogXCJudW1lcmljXCIgfSl9XCJcbiAgICAgICAgPlxuICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgIGNsYXNzPVwiZGF0ZVwiXG4gICAgICAgICAgICAgICAgcGFydD1cIiR7eCA9PiB0b2RheVN0cmluZyA9PT0gYCR7eC5tb250aH0tJHt4LmRheX0tJHt4LnllYXJ9YCA/IFwidG9kYXlcIiA6IFwiZGF0ZVwifVwiXG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgJHsoeCwgYykgPT4gYy5wYXJlbnRDb250ZXh0LnBhcmVudC5kYXRlRm9ybWF0dGVyLmdldERheSh4LmRheSl9XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxzbG90IG5hbWU9XCIke3ggPT4geC5tb250aH0tJHt4ID0+IHguZGF5fS0ke3ggPT4geC55ZWFyfVwiPjwvc2xvdD5cbiAgICAgICAgPC8ke2NlbGxUYWd9PlxuICAgIGA7XG59O1xuLyoqXG4gKlxuICogQHBhcmFtIGNvbnRleHQgLSBFbGVtZW50IGRlZmluaXRpb24gY29udGV4dCBmb3IgZ2V0dGluZyB0aGUgY2VsbCB0YWcgZm9yIGNhbGVuZGFyLWNlbGxcbiAqIEBwYXJhbSB0b2RheVN0cmluZyAtIEEgc3RyaW5nIHJlcHJlc2VudGF0aW9uIGZvciB0b2RheXMgZGF0ZVxuICogQHJldHVybnMgLSBBIHRlbXBsYXRlIGZvciBhIHdlZWsgb2YgZGF5c1xuICogQHB1YmxpY1xuICovXG5leHBvcnQgY29uc3QgY2FsZW5kYXJSb3dUZW1wbGF0ZSA9IChjb250ZXh0LCB0b2RheVN0cmluZykgPT4ge1xuICAgIGNvbnN0IHJvd1RhZyA9IGNvbnRleHQudGFnRm9yKERhdGFHcmlkUm93KTtcbiAgICByZXR1cm4gaHRtbCBgXG4gICAgICAgIDwke3Jvd1RhZ31cbiAgICAgICAgICAgIGNsYXNzPVwid2Vla1wiXG4gICAgICAgICAgICBwYXJ0PVwid2Vla1wiXG4gICAgICAgICAgICByb2xlPVwicm93XCJcbiAgICAgICAgICAgIHJvbGUtdHlwZT1cImRlZmF1bHRcIlxuICAgICAgICAgICAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zPVwiMWZyIDFmciAxZnIgMWZyIDFmciAxZnIgMWZyXCJcbiAgICAgICAgPlxuICAgICAgICAke3JlcGVhdCh4ID0+IHgsIGNhbGVuZGFyQ2VsbFRlbXBsYXRlKGNvbnRleHQsIHRvZGF5U3RyaW5nKSwge1xuICAgICAgICBwb3NpdGlvbmluZzogdHJ1ZSxcbiAgICB9KX1cbiAgICAgICAgPC8ke3Jvd1RhZ30+XG4gICAgYDtcbn07XG4vKipcbiAqIEludGVyYWN0aXZlIHRlbXBsYXRlIHVzaW5nIERhdGFHcmlkXG4gKiBAcGFyYW0gY29udGV4dCAtIFRoZSB0ZW1wbGF0ZXMgY29udGV4dFxuICogQHBhcmFtIHRvZGF5U3RyaW5nIC0gc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRvZGF5cyBkYXRlXG4gKiBAcmV0dXJucyAtIGludGVyYWN0aXZlIGNhbGVuZGFyIHRlbXBsYXRlXG4gKlxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCBjb25zdCBpbnRlcmFjdGl2ZUNhbGVuZGFyR3JpZFRlbXBsYXRlID0gKGNvbnRleHQsIHRvZGF5U3RyaW5nKSA9PiB7XG4gICAgY29uc3QgZ3JpZFRhZyA9IGNvbnRleHQudGFnRm9yKERhdGFHcmlkKTtcbiAgICBjb25zdCByb3dUYWcgPSBjb250ZXh0LnRhZ0ZvcihEYXRhR3JpZFJvdyk7XG4gICAgcmV0dXJuIGh0bWwgYFxuICAgIDwke2dyaWRUYWd9IGNsYXNzPVwiZGF5cyBpbnRlcmFjdFwiIHBhcnQ9XCJkYXlzXCIgZ2VuZXJhdGUtaGVhZGVyPVwibm9uZVwiPlxuICAgICAgICA8JHtyb3dUYWd9XG4gICAgICAgICAgICBjbGFzcz1cIndlZWstZGF5c1wiXG4gICAgICAgICAgICBwYXJ0PVwid2Vlay1kYXlzXCJcbiAgICAgICAgICAgIHJvbGU9XCJyb3dcIlxuICAgICAgICAgICAgcm93LXR5cGU9XCJoZWFkZXJcIlxuICAgICAgICAgICAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zPVwiMWZyIDFmciAxZnIgMWZyIDFmciAxZnIgMWZyXCJcbiAgICAgICAgPlxuICAgICAgICAgICAgJHtyZXBlYXQoeCA9PiB4LmdldFdlZWtkYXlUZXh0KCksIGNhbGVuZGFyV2Vla2RheVRlbXBsYXRlKGNvbnRleHQpLCB7XG4gICAgICAgIHBvc2l0aW9uaW5nOiB0cnVlLFxuICAgIH0pfVxuICAgICAgICA8LyR7cm93VGFnfT5cbiAgICAgICAgJHtyZXBlYXQoeCA9PiB4LmdldERheXMoKSwgY2FsZW5kYXJSb3dUZW1wbGF0ZShjb250ZXh0LCB0b2RheVN0cmluZykpfVxuICAgIDwvJHtncmlkVGFnfT5cbmA7XG59O1xuLyoqXG4gKiBOb24taW50ZXJhY3RpdmUgY2FsZW5kYXIgdGVtcGxhdGUgdXNlZCBmb3IgYSByZWFkb25seSBjYWxlbmRhclxuICogQHBhcmFtIHRvZGF5U3RyaW5nIC0gc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRvZGF5cyBkYXRlXG4gKiBAcmV0dXJucyAtIG5vbi1pbnRlcmFjdGl2ZSBjYWxlbmRhciB0ZW1wbGF0ZVxuICpcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgY29uc3Qgbm9uaW50ZXJhY3RpdmVDYWxlbmRhclRlbXBsYXRlID0gKHRvZGF5U3RyaW5nKSA9PiB7XG4gICAgcmV0dXJuIGh0bWwgYFxuICAgICAgICA8ZGl2IGNsYXNzPVwiZGF5c1wiIHBhcnQ9XCJkYXlzXCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwid2Vlay1kYXlzXCIgcGFydD1cIndlZWstZGF5c1wiPlxuICAgICAgICAgICAgICAgICR7cmVwZWF0KHggPT4geC5nZXRXZWVrZGF5VGV4dCgpLCBodG1sIGBcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ3ZWVrLWRheVwiIHBhcnQ9XCJ3ZWVrLWRheVwiIGFiYnI9XCIke3ggPT4geC5hYmJyfVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICR7eCA9PiB4LnRleHR9XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgYCl9XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICR7cmVwZWF0KHggPT4geC5nZXREYXlzKCksIGh0bWwgYFxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwid2Vla1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgJHtyZXBlYXQoeCA9PiB4LCBodG1sIGBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3M9XCIkeyh4LCBjKSA9PiBjLnBhcmVudENvbnRleHQucGFyZW50LmdldERheUNsYXNzTmFtZXMoeCwgdG9kYXlTdHJpbmcpfVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJ0PVwiZGF5XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyaWEtbGFiZWw9XCIkeyh4LCBjKSA9PiBjLnBhcmVudENvbnRleHQucGFyZW50LmRhdGVGb3JtYXR0ZXIuZ2V0RGF0ZShgJHt4Lm1vbnRofS0ke3guZGF5fS0ke3gueWVhcn1gLCB7IG1vbnRoOiBcImxvbmdcIiwgZGF5OiBcIm51bWVyaWNcIiB9KX1cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3M9XCJkYXRlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJ0PVwiJHt4ID0+IHRvZGF5U3RyaW5nID09PVxuICAgICAgICBgJHt4Lm1vbnRofS0ke3guZGF5fS0ke3gueWVhcn1gXG4gICAgICAgID8gXCJ0b2RheVwiXG4gICAgICAgIDogXCJkYXRlXCJ9XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkeyh4LCBjKSA9PiBjLnBhcmVudENvbnRleHQucGFyZW50LmRhdGVGb3JtYXR0ZXIuZ2V0RGF5KHguZGF5KX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNsb3RcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPVwiJHt4ID0+IHgubW9udGh9LSR7eCA9PiB4LmRheX0tJHt4ID0+IHgueWVhcn1cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvc2xvdD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYCl9XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIGApfVxuICAgICAgICA8L2Rpdj5cbiAgICBgO1xufTtcbi8qKlxuICogVGhlIHRlbXBsYXRlIGZvciB0aGUge0BsaW5rIEBtaWNyb3NvZnQvZmFzdC1mb3VuZGF0aW9uIyhDYWxlbmRhcjpjbGFzcyl9IGNvbXBvbmVudC5cbiAqXG4gKiBAcGFyYW0gY29udGV4dCAtIEVsZW1lbnQgZGVmaW5pdGlvbiBjb250ZXh0IGZvciBnZXR0aW5nIHRoZSBjZWxsIHRhZyBmb3IgY2FsZW5kYXItY2VsbFxuICogQHBhcmFtIGRlZmluaXRpb24gLSBGb3VuZGF0aW9uIGVsZW1lbnQgZGVmaW5pdGlvblxuICogQHJldHVybnMgLSBhIHRlbXBsYXRlIGZvciBhIGNhbGVuZGFyIG1vbnRoXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjb25zdCBjYWxlbmRhclRlbXBsYXRlID0gKGNvbnRleHQsIGRlZmluaXRpb24pID0+IHtcbiAgICB2YXIgX2E7XG4gICAgY29uc3QgdG9kYXkgPSBuZXcgRGF0ZSgpO1xuICAgIGNvbnN0IHRvZGF5U3RyaW5nID0gYCR7dG9kYXkuZ2V0TW9udGgoKSArIDF9LSR7dG9kYXkuZ2V0RGF0ZSgpfS0ke3RvZGF5LmdldEZ1bGxZZWFyKCl9YDtcbiAgICByZXR1cm4gaHRtbCBgXG4gICAgICAgIDx0ZW1wbGF0ZT5cbiAgICAgICAgICAgICR7c3RhcnRUZW1wbGF0ZX1cbiAgICAgICAgICAgICR7ZGVmaW5pdGlvbi50aXRsZSBpbnN0YW5jZW9mIEZ1bmN0aW9uXG4gICAgICAgID8gZGVmaW5pdGlvbi50aXRsZShjb250ZXh0LCBkZWZpbml0aW9uKVxuICAgICAgICA6IChfYSA9IGRlZmluaXRpb24udGl0bGUpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IFwiXCJ9XG4gICAgICAgICAgICA8c2xvdD48L3Nsb3Q+XG4gICAgICAgICAgICAke3doZW4oeCA9PiB4LnJlYWRvbmx5LCBub25pbnRlcmFjdGl2ZUNhbGVuZGFyVGVtcGxhdGUodG9kYXlTdHJpbmcpLCBpbnRlcmFjdGl2ZUNhbGVuZGFyR3JpZFRlbXBsYXRlKGNvbnRleHQsIHRvZGF5U3RyaW5nKSl9XG4gICAgICAgICAgICAke2VuZFRlbXBsYXRlfVxuICAgICAgICA8L3RlbXBsYXRlPlxuICAgIGA7XG59O1xuIiwiLyoqXG4gKiBEYXRlIGZvcm1hdHRpbmcgdXRpbGl0eVxuICogQHB1YmxpY1xuICovXG5leHBvcnQgY2xhc3MgRGF0ZUZvcm1hdHRlciB7XG4gICAgY29uc3RydWN0b3IoY29uZmlnKSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBGb3JtYXR0aW5nIGZvciB0aGUgZGF5XG4gICAgICAgICAqIEBwdWJsaWNcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZGF5Rm9ybWF0ID0gXCJudW1lcmljXCI7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBGb3JtYXR0aW5nIGZvciB0aGUgd2Vla2RheSBsYWJlbHNcbiAgICAgICAgICogQHB1YmxpY1xuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy53ZWVrZGF5Rm9ybWF0ID0gXCJsb25nXCI7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBGb3JtYXR0aW5nIGZvciB0aGUgbW9udGhcbiAgICAgICAgICogQHB1YmxpY1xuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5tb250aEZvcm1hdCA9IFwibG9uZ1wiO1xuICAgICAgICAvKipcbiAgICAgICAgICogRm9ybWF0dGluZyBmb3IgdGhlIHllYXJcbiAgICAgICAgICogQHB1YmxpY1xuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy55ZWFyRm9ybWF0ID0gXCJudW1lcmljXCI7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBEYXRlIHVzZWQgZm9yIGZvcm1hdHRpbmdcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZGF0ZSA9IG5ldyBEYXRlKCk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBZGQgcHJvcGVydGllcyBvbiBjb25zdHJ1Y3Rpb25cbiAgICAgICAgICovXG4gICAgICAgIGlmIChjb25maWcpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIGNvbmZpZykge1xuICAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gY29uZmlnW2tleV07XG4gICAgICAgICAgICAgICAgaWYgKGtleSA9PT0gXCJkYXRlXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kYXRlID0gdGhpcy5nZXREYXRlT2JqZWN0KHZhbHVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXNba2V5XSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBIZWxwZXIgZnVuY3Rpb24gdG8gbWFrZSBzdXJlIHRoYXQgdGhlIERhdGVGb3JtYXR0ZXIgaXMgd29ya2luZyB3aXRoIGFuIGluc3RhbmNlIG9mIERhdGVcbiAgICAgKiBAcGFyYW0gZGF0ZSAtIFRoZSBkYXRlIGFzIGFuIG9iamVjdCwgc3RyaW5nIG9yIERhdGUgaW5zYW5jZVxuICAgICAqIEByZXR1cm5zIC0gQSBEYXRlIGluc3RhbmNlXG4gICAgICogQHB1YmxpY1xuICAgICAqL1xuICAgIGdldERhdGVPYmplY3QoZGF0ZSkge1xuICAgICAgICBpZiAodHlwZW9mIGRhdGUgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIGNvbnN0IGRhdGVzID0gZGF0ZS5zcGxpdCgvWy8tXS8pO1xuICAgICAgICAgICAgaWYgKGRhdGVzLmxlbmd0aCA8IDMpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IERhdGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBuZXcgRGF0ZShwYXJzZUludChkYXRlc1syXSwgMTApLCBwYXJzZUludChkYXRlc1swXSwgMTApIC0gMSwgcGFyc2VJbnQoZGF0ZXNbMV0sIDEwKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoXCJkYXlcIiBpbiBkYXRlICYmIFwibW9udGhcIiBpbiBkYXRlICYmIFwieWVhclwiIGluIGRhdGUpIHtcbiAgICAgICAgICAgIGNvbnN0IHsgZGF5LCBtb250aCwgeWVhciB9ID0gZGF0ZTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgRGF0ZSh5ZWFyLCBtb250aCAtIDEsIGRheSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGRhdGU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqXG4gICAgICogQHBhcmFtIGRhdGUgLSBhIHZhbGlkZSBkYXRlIGFzIGVpdGhlciBhIERhdGUsIHN0cmluZywgb2JqZWMgb3IgYSBEYXRlRm9ybWF0dGVyXG4gICAgICogQHBhcmFtIGZvcm1hdCAtIFRoZSBmb3JtYXR0aW5nIGZvciB0aGUgc3RyaW5nXG4gICAgICogQHBhcmFtIGxvY2FsZSAtIGxvY2FsZSBkYXRhIHVzZWQgZm9yIGZvcm1hdHRpbmdcbiAgICAgKiBAcmV0dXJucyBBIGxvY2FsaXplZCBzdHJpbmcgb2YgdGhlIGRhdGUgcHJvdmlkZWRcbiAgICAgKiBAcHVibGljXG4gICAgICovXG4gICAgZ2V0RGF0ZShkYXRlID0gdGhpcy5kYXRlLCBmb3JtYXQgPSB7XG4gICAgICAgIHdlZWtkYXk6IHRoaXMud2Vla2RheUZvcm1hdCxcbiAgICAgICAgbW9udGg6IHRoaXMubW9udGhGb3JtYXQsXG4gICAgICAgIGRheTogdGhpcy5kYXlGb3JtYXQsXG4gICAgICAgIHllYXI6IHRoaXMueWVhckZvcm1hdCxcbiAgICB9LCBsb2NhbGUgPSB0aGlzLmxvY2FsZSkge1xuICAgICAgICBjb25zdCBkYXRlT2JqID0gdGhpcy5nZXREYXRlT2JqZWN0KGRhdGUpO1xuICAgICAgICBpZiAoIWRhdGVPYmouZ2V0VGltZSgpKSB7XG4gICAgICAgICAgICByZXR1cm4gXCJcIjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBvcHRpb25zV2l0aFRpbWVab25lID0gT2JqZWN0LmFzc2lnbih7IHRpbWVab25lOiBJbnRsLkRhdGVUaW1lRm9ybWF0KCkucmVzb2x2ZWRPcHRpb25zKCkudGltZVpvbmUgfSwgZm9ybWF0KTtcbiAgICAgICAgcmV0dXJuIG5ldyBJbnRsLkRhdGVUaW1lRm9ybWF0KGxvY2FsZSwgb3B0aW9uc1dpdGhUaW1lWm9uZSkuZm9ybWF0KGRhdGVPYmopO1xuICAgIH1cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEBwYXJhbSBkYXkgLSBEYXkgdG8gbG9jYWxpemVcbiAgICAgKiBAcGFyYW0gZm9ybWF0IC0gVGhlIGZvcm1hdHRpbmcgZm9yIHRoZSBkYXlcbiAgICAgKiBAcGFyYW0gbG9jYWxlIC0gVGhlIGxvY2FsZSBkYXRhIHVzZWQgZm9yIGZvcm1hdHRpbmdcbiAgICAgKiBAcmV0dXJucyAtIEEgbG9jYWxpemVkIG51bWJlciBmb3IgdGhlIGRheVxuICAgICAqIEBwdWJsaWNcbiAgICAgKi9cbiAgICBnZXREYXkoZGF5ID0gdGhpcy5kYXRlLmdldERhdGUoKSwgZm9ybWF0ID0gdGhpcy5kYXlGb3JtYXQsIGxvY2FsZSA9IHRoaXMubG9jYWxlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldERhdGUoeyBtb250aDogMSwgZGF5LCB5ZWFyOiAyMDIwIH0sIHsgZGF5OiBmb3JtYXQgfSwgbG9jYWxlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBAcGFyYW0gbW9udGggLSBUaGUgbW9udGggdG8gbG9jYWxpemVcbiAgICAgKiBAcGFyYW0gZm9ybWF0IC0gVGhlIGZvcm1hdHRpbmcgZm9yIHRoZSBtb250aFxuICAgICAqIEBwYXJhbSBsb2NhbGUgLSBUaGUgbG9jYWxlIGRhdGEgdXNlZCBmb3IgZm9ybWF0dGluZ1xuICAgICAqIEByZXR1cm5zIC0gQSBsb2NhbGl6ZWQgbmFtZSBvZiB0aGUgbW9udGhcbiAgICAgKiBAcHVibGljXG4gICAgICovXG4gICAgZ2V0TW9udGgobW9udGggPSB0aGlzLmRhdGUuZ2V0TW9udGgoKSArIDEsIGZvcm1hdCA9IHRoaXMubW9udGhGb3JtYXQsIGxvY2FsZSA9IHRoaXMubG9jYWxlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldERhdGUoeyBtb250aCwgZGF5OiAyLCB5ZWFyOiAyMDIwIH0sIHsgbW9udGg6IGZvcm1hdCB9LCBsb2NhbGUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEBwYXJhbSB5ZWFyIC0gVGhlIHllYXIgdG8gbG9jYWxpemVcbiAgICAgKiBAcGFyYW0gZm9ybWF0IC0gVGhlIGZvcm1hdHRpbmcgZm9yIHRoZSB5ZWFyXG4gICAgICogQHBhcmFtIGxvY2FsZSAtIFRoZSBsb2NhbGUgZGF0YSB1c2VkIGZvciBmb3JtYXR0aW5nXG4gICAgICogQHJldHVybnMgLSBBIGxvY2FsaXplZCBzdHJpbmcgZm9yIHRoZSB5ZWFyXG4gICAgICogQHB1YmxpY1xuICAgICAqL1xuICAgIGdldFllYXIoeWVhciA9IHRoaXMuZGF0ZS5nZXRGdWxsWWVhcigpLCBmb3JtYXQgPSB0aGlzLnllYXJGb3JtYXQsIGxvY2FsZSA9IHRoaXMubG9jYWxlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldERhdGUoeyBtb250aDogMiwgZGF5OiAyLCB5ZWFyIH0sIHsgeWVhcjogZm9ybWF0IH0sIGxvY2FsZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqXG4gICAgICogQHBhcmFtIHdlZWtkYXkgLSBUaGUgbnVtYmVyIG9mIHRoZSB3ZWVrZGF5LCBkZWZhdWx0cyB0byBTdW5kYXlcbiAgICAgKiBAcGFyYW0gZm9ybWF0IC0gVGhlIGZvcm1hdHRpbmcgZm9yIHRoZSB3ZWVrZGF5IGxhYmVsXG4gICAgICogQHBhcmFtIGxvY2FsZSAtIFRoZSBsb2NhbGUgZGF0YSB1c2VkIGZvciBmb3JtYXR0aW5nXG4gICAgICogQHJldHVybnMgLSBBIGZvcm1hdHRlZCB3ZWVrZGF5IGxhYmVsXG4gICAgICogQHB1YmxpY1xuICAgICAqL1xuICAgIGdldFdlZWtkYXkod2Vla2RheSA9IDAsIGZvcm1hdCA9IHRoaXMud2Vla2RheUZvcm1hdCwgbG9jYWxlID0gdGhpcy5sb2NhbGUpIHtcbiAgICAgICAgY29uc3QgZGF0ZSA9IGAxLSR7d2Vla2RheSArIDF9LTIwMTdgO1xuICAgICAgICByZXR1cm4gdGhpcy5nZXREYXRlKGRhdGUsIHsgd2Vla2RheTogZm9ybWF0IH0sIGxvY2FsZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqXG4gICAgICogQHBhcmFtIGZvcm1hdCAtIFRoZSBmb3JtYXR0aW5nIGZvciB0aGUgd2Vla2RheXNcbiAgICAgKiBAcGFyYW0gbG9jYWxlIC0gVGhlIGxvY2FsZSBkYXRhIHVzZWQgZm9yIGZvcm1hdHRpbmdcbiAgICAgKiBAcmV0dXJucyAtIEFuIGFycmF5IG9mIHRoZSB3ZWVrZGF5IGxhYmVsc1xuICAgICAqIEBwdWJsaWNcbiAgICAgKi9cbiAgICBnZXRXZWVrZGF5cyhmb3JtYXQgPSB0aGlzLndlZWtkYXlGb3JtYXQsIGxvY2FsZSA9IHRoaXMubG9jYWxlKSB7XG4gICAgICAgIHJldHVybiBBcnJheSg3KVxuICAgICAgICAgICAgLmZpbGwobnVsbClcbiAgICAgICAgICAgIC5tYXAoKF8sIGRheSkgPT4gdGhpcy5nZXRXZWVrZGF5KGRheSwgZm9ybWF0LCBsb2NhbGUpKTtcbiAgICB9XG59XG4iLCJleHBvcnQgKiBmcm9tIFwiLi9jYWxlbmRhci5qc1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vY2FsZW5kYXIudGVtcGxhdGUuanNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL2RhdGUtZm9ybWF0dGVyLmpzXCI7XG4iLCJpbXBvcnQgeyBGb3VuZGF0aW9uRWxlbWVudCB9IGZyb20gXCIuLi9mb3VuZGF0aW9uLWVsZW1lbnQvZm91bmRhdGlvbi1lbGVtZW50LmpzXCI7XG4vKipcbiAqIEFuIENhcmQgQ3VzdG9tIEhUTUwgRWxlbWVudC5cbiAqXG4gKiBAc2xvdCAtIFRoZSBkZWZhdWx0IHNsb3QgZm9yIHRoZSBjYXJkIGNvbnRlbnRcbiAqXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjbGFzcyBDYXJkIGV4dGVuZHMgRm91bmRhdGlvbkVsZW1lbnQge1xufVxuIiwiaW1wb3J0IHsgaHRtbCB9IGZyb20gXCJAbWljcm9zb2Z0L2Zhc3QtZWxlbWVudFwiO1xuLyoqXG4gKiBUaGUgdGVtcGxhdGUgZm9yIHRoZSB7QGxpbmsgQG1pY3Jvc29mdC9mYXN0LWZvdW5kYXRpb24jQ2FyZH0gY29tcG9uZW50LlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgY29uc3QgY2FyZFRlbXBsYXRlID0gKGNvbnRleHQsIGRlZmluaXRpb24pID0+IGh0bWwgYFxuICAgIDxzbG90Pjwvc2xvdD5cbmA7XG4iLCJleHBvcnQgKiBmcm9tIFwiLi9jYXJkLnRlbXBsYXRlLmpzXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9jYXJkLmpzXCI7XG4iLCJpbXBvcnQgeyBDaGVja2FibGVGb3JtQXNzb2NpYXRlZCB9IGZyb20gXCIuLi9mb3JtLWFzc29jaWF0ZWQvZm9ybS1hc3NvY2lhdGVkLmpzXCI7XG5pbXBvcnQgeyBGb3VuZGF0aW9uRWxlbWVudCB9IGZyb20gXCIuLi9mb3VuZGF0aW9uLWVsZW1lbnQvZm91bmRhdGlvbi1lbGVtZW50LmpzXCI7XG5jbGFzcyBfQ2hlY2tib3ggZXh0ZW5kcyBGb3VuZGF0aW9uRWxlbWVudCB7XG59XG4vKipcbiAqIEEgZm9ybS1hc3NvY2lhdGVkIGJhc2UgY2xhc3MgZm9yIHRoZSB7QGxpbmsgQG1pY3Jvc29mdC9mYXN0LWZvdW5kYXRpb24jKENoZWNrYm94OmNsYXNzKX0gY29tcG9uZW50LlxuICpcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgY2xhc3MgRm9ybUFzc29jaWF0ZWRDaGVja2JveCBleHRlbmRzIENoZWNrYWJsZUZvcm1Bc3NvY2lhdGVkKF9DaGVja2JveCkge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlciguLi5hcmd1bWVudHMpO1xuICAgICAgICB0aGlzLnByb3h5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IF9fZGVjb3JhdGUgfSBmcm9tIFwidHNsaWJcIjtcbmltcG9ydCB7IGF0dHIsIG9ic2VydmFibGUgfSBmcm9tIFwiQG1pY3Jvc29mdC9mYXN0LWVsZW1lbnRcIjtcbmltcG9ydCB7IGtleVNwYWNlIH0gZnJvbSBcIkBtaWNyb3NvZnQvZmFzdC13ZWItdXRpbGl0aWVzXCI7XG5pbXBvcnQgeyBGb3JtQXNzb2NpYXRlZENoZWNrYm94IH0gZnJvbSBcIi4vY2hlY2tib3guZm9ybS1hc3NvY2lhdGVkLmpzXCI7XG4vKipcbiAqIEEgQ2hlY2tib3ggQ3VzdG9tIEhUTUwgRWxlbWVudC5cbiAqIEltcGxlbWVudHMgdGhlIHtAbGluayBodHRwczovL3d3dy53My5vcmcvVFIvd2FpLWFyaWEtMS4xLyNjaGVja2JveCB8IEFSSUEgY2hlY2tib3ggfS5cbiAqXG4gKiBAc2xvdCBjaGVja2VkLWluZGljYXRvciAtIFRoZSBjaGVja2VkIGluZGljYXRvclxuICogQHNsb3QgaW5kZXRlcm1pbmF0ZS1pbmRpY2F0b3IgLSBUaGUgaW5kZXRlcm1pbmF0ZSBpbmRpY2F0b3JcbiAqIEBzbG90IC0gVGhlIGRlZmF1bHQgc2xvdCBmb3IgdGhlIGxhYmVsXG4gKiBAY3NzcGFydCBjb250cm9sIC0gVGhlIGVsZW1lbnQgcmVwcmVzZW50aW5nIHRoZSB2aXN1YWwgY2hlY2tib3ggY29udHJvbFxuICogQGNzc3BhcnQgbGFiZWwgLSBUaGUgbGFiZWxcbiAqIEBmaXJlcyBjaGFuZ2UgLSBFbWl0cyBhIGN1c3RvbSBjaGFuZ2UgZXZlbnQgd2hlbiB0aGUgY2hlY2tlZCBzdGF0ZSBjaGFuZ2VzXG4gKlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgY2xhc3MgQ2hlY2tib3ggZXh0ZW5kcyBGb3JtQXNzb2NpYXRlZENoZWNrYm94IHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBlbGVtZW50J3MgdmFsdWUgdG8gYmUgaW5jbHVkZWQgaW4gZm9ybSBzdWJtaXNzaW9uIHdoZW4gY2hlY2tlZC5cbiAgICAgICAgICogRGVmYXVsdCB0byBcIm9uXCIgdG8gcmVhY2ggcGFyaXR5IHdpdGggaW5wdXRbdHlwZT1cImNoZWNrYm94XCJdXG4gICAgICAgICAqXG4gICAgICAgICAqIEBpbnRlcm5hbFxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5pbml0aWFsVmFsdWUgPSBcIm9uXCI7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgaW5kZXRlcm1pbmF0ZSBzdGF0ZSBvZiB0aGUgY29udHJvbFxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5pbmRldGVybWluYXRlID0gZmFsc2U7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAaW50ZXJuYWxcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMua2V5cHJlc3NIYW5kbGVyID0gKGUpID0+IHtcbiAgICAgICAgICAgIGlmICh0aGlzLnJlYWRPbmx5KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc3dpdGNoIChlLmtleSkge1xuICAgICAgICAgICAgICAgIGNhc2Uga2V5U3BhY2U6XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmluZGV0ZXJtaW5hdGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaW5kZXRlcm1pbmF0ZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2hlY2tlZCA9ICF0aGlzLmNoZWNrZWQ7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICAvKipcbiAgICAgICAgICogQGludGVybmFsXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmNsaWNrSGFuZGxlciA9IChlKSA9PiB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuZGlzYWJsZWQgJiYgIXRoaXMucmVhZE9ubHkpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5pbmRldGVybWluYXRlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaW5kZXRlcm1pbmF0ZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLmNoZWNrZWQgPSAhdGhpcy5jaGVja2VkO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICB0aGlzLnByb3h5LnNldEF0dHJpYnV0ZShcInR5cGVcIiwgXCJjaGVja2JveFwiKTtcbiAgICB9XG4gICAgcmVhZE9ubHlDaGFuZ2VkKCkge1xuICAgICAgICBpZiAodGhpcy5wcm94eSBpbnN0YW5jZW9mIEhUTUxJbnB1dEVsZW1lbnQpIHtcbiAgICAgICAgICAgIHRoaXMucHJveHkucmVhZE9ubHkgPSB0aGlzLnJlYWRPbmx5O1xuICAgICAgICB9XG4gICAgfVxufVxuX19kZWNvcmF0ZShbXG4gICAgYXR0cih7IGF0dHJpYnV0ZTogXCJyZWFkb25seVwiLCBtb2RlOiBcImJvb2xlYW5cIiB9KVxuXSwgQ2hlY2tib3gucHJvdG90eXBlLCBcInJlYWRPbmx5XCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBvYnNlcnZhYmxlXG5dLCBDaGVja2JveC5wcm90b3R5cGUsIFwiZGVmYXVsdFNsb3R0ZWROb2Rlc1wiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgb2JzZXJ2YWJsZVxuXSwgQ2hlY2tib3gucHJvdG90eXBlLCBcImluZGV0ZXJtaW5hdGVcIiwgdm9pZCAwKTtcbiIsImltcG9ydCB7IGh0bWwsIHNsb3R0ZWQgfSBmcm9tIFwiQG1pY3Jvc29mdC9mYXN0LWVsZW1lbnRcIjtcbi8qKlxuICogVGhlIHRlbXBsYXRlIGZvciB0aGUge0BsaW5rIEBtaWNyb3NvZnQvZmFzdC1mb3VuZGF0aW9uIyhDaGVja2JveDpjbGFzcyl9IGNvbXBvbmVudC5cbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGNvbnN0IGNoZWNrYm94VGVtcGxhdGUgPSAoY29udGV4dCwgZGVmaW5pdGlvbikgPT4gaHRtbCBgXG4gICAgPHRlbXBsYXRlXG4gICAgICAgIHJvbGU9XCJjaGVja2JveFwiXG4gICAgICAgIGFyaWEtY2hlY2tlZD1cIiR7eCA9PiB4LmNoZWNrZWR9XCJcbiAgICAgICAgYXJpYS1yZXF1aXJlZD1cIiR7eCA9PiB4LnJlcXVpcmVkfVwiXG4gICAgICAgIGFyaWEtZGlzYWJsZWQ9XCIke3ggPT4geC5kaXNhYmxlZH1cIlxuICAgICAgICBhcmlhLXJlYWRvbmx5PVwiJHt4ID0+IHgucmVhZE9ubHl9XCJcbiAgICAgICAgdGFiaW5kZXg9XCIke3ggPT4gKHguZGlzYWJsZWQgPyBudWxsIDogMCl9XCJcbiAgICAgICAgQGtleXByZXNzPVwiJHsoeCwgYykgPT4geC5rZXlwcmVzc0hhbmRsZXIoYy5ldmVudCl9XCJcbiAgICAgICAgQGNsaWNrPVwiJHsoeCwgYykgPT4geC5jbGlja0hhbmRsZXIoYy5ldmVudCl9XCJcbiAgICAgICAgY2xhc3M9XCIke3ggPT4gKHgucmVhZE9ubHkgPyBcInJlYWRvbmx5XCIgOiBcIlwiKX0gJHt4ID0+IHguY2hlY2tlZCA/IFwiY2hlY2tlZFwiIDogXCJcIn0gJHt4ID0+ICh4LmluZGV0ZXJtaW5hdGUgPyBcImluZGV0ZXJtaW5hdGVcIiA6IFwiXCIpfVwiXG4gICAgPlxuICAgICAgICA8ZGl2IHBhcnQ9XCJjb250cm9sXCIgY2xhc3M9XCJjb250cm9sXCI+XG4gICAgICAgICAgICA8c2xvdCBuYW1lPVwiY2hlY2tlZC1pbmRpY2F0b3JcIj5cbiAgICAgICAgICAgICAgICAke2RlZmluaXRpb24uY2hlY2tlZEluZGljYXRvciB8fCBcIlwifVxuICAgICAgICAgICAgPC9zbG90PlxuICAgICAgICAgICAgPHNsb3QgbmFtZT1cImluZGV0ZXJtaW5hdGUtaW5kaWNhdG9yXCI+XG4gICAgICAgICAgICAgICAgJHtkZWZpbml0aW9uLmluZGV0ZXJtaW5hdGVJbmRpY2F0b3IgfHwgXCJcIn1cbiAgICAgICAgICAgIDwvc2xvdD5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxsYWJlbFxuICAgICAgICAgICAgcGFydD1cImxhYmVsXCJcbiAgICAgICAgICAgIGNsYXNzPVwiJHt4ID0+IHguZGVmYXVsdFNsb3R0ZWROb2RlcyAmJiB4LmRlZmF1bHRTbG90dGVkTm9kZXMubGVuZ3RoXG4gICAgPyBcImxhYmVsXCJcbiAgICA6IFwibGFiZWwgbGFiZWxfX2hpZGRlblwifVwiXG4gICAgICAgID5cbiAgICAgICAgICAgIDxzbG90ICR7c2xvdHRlZChcImRlZmF1bHRTbG90dGVkTm9kZXNcIil9Pjwvc2xvdD5cbiAgICAgICAgPC9sYWJlbD5cbiAgICA8L3RlbXBsYXRlPlxuYDtcbiIsImV4cG9ydCAqIGZyb20gXCIuL2NoZWNrYm94LnRlbXBsYXRlLmpzXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9jaGVja2JveC5qc1wiO1xuIiwiaW1wb3J0IHsgRm9ybUFzc29jaWF0ZWQgfSBmcm9tIFwiLi4vZm9ybS1hc3NvY2lhdGVkL2Zvcm0tYXNzb2NpYXRlZC5qc1wiO1xuaW1wb3J0IHsgTGlzdGJveCB9IGZyb20gXCIuLi9saXN0Ym94L2xpc3Rib3guanNcIjtcbmNsYXNzIF9Db21ib2JveCBleHRlbmRzIExpc3Rib3gge1xufVxuLyoqXG4gKiBBIGZvcm0tYXNzb2NpYXRlZCBiYXNlIGNsYXNzIGZvciB0aGUge0BsaW5rIChDb21ib2JveDpjbGFzcyl9IGNvbXBvbmVudC5cbiAqXG4gKiBAaW50ZXJuYWxcbiAqL1xuZXhwb3J0IGNsYXNzIEZvcm1Bc3NvY2lhdGVkQ29tYm9ib3ggZXh0ZW5kcyBGb3JtQXNzb2NpYXRlZChfQ29tYm9ib3gpIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgdGhpcy5wcm94eSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBfX2RlY29yYXRlIH0gZnJvbSBcInRzbGliXCI7XG5pbXBvcnQgeyBhdHRyLCBET00sIE9ic2VydmFibGUsIG9ic2VydmFibGUgfSBmcm9tIFwiQG1pY3Jvc29mdC9mYXN0LWVsZW1lbnRcIjtcbmltcG9ydCB7IGxpbWl0LCB1bmlxdWVJZCB9IGZyb20gXCJAbWljcm9zb2Z0L2Zhc3Qtd2ViLXV0aWxpdGllc1wiO1xuaW1wb3J0IHsgRGVsZWdhdGVzQVJJQUxpc3Rib3ggfSBmcm9tIFwiLi4vbGlzdGJveC9saXN0Ym94LmpzXCI7XG5pbXBvcnQgeyBTdGFydEVuZCB9IGZyb20gXCIuLi9wYXR0ZXJucy9zdGFydC1lbmQuanNcIjtcbmltcG9ydCB7IFNlbGVjdFBvc2l0aW9uIH0gZnJvbSBcIi4uL3NlbGVjdC9zZWxlY3Qub3B0aW9ucy5qc1wiO1xuaW1wb3J0IHsgYXBwbHlNaXhpbnMgfSBmcm9tIFwiLi4vdXRpbGl0aWVzL2FwcGx5LW1peGlucy5qc1wiO1xuaW1wb3J0IHsgRm9ybUFzc29jaWF0ZWRDb21ib2JveCB9IGZyb20gXCIuL2NvbWJvYm94LmZvcm0tYXNzb2NpYXRlZC5qc1wiO1xuaW1wb3J0IHsgQ29tYm9ib3hBdXRvY29tcGxldGUgfSBmcm9tIFwiLi9jb21ib2JveC5vcHRpb25zLmpzXCI7XG4vKipcbiAqIEEgQ29tYm9ib3ggQ3VzdG9tIEhUTUwgRWxlbWVudC5cbiAqIEltcGxlbWVudHMgdGhlIHtAbGluayBodHRwczovL3czYy5naXRodWIuaW8vYXJpYS1wcmFjdGljZXMvI2NvbWJvYm94IHwgQVJJQSBjb21ib2JveCB9LlxuICpcbiAqIEBzbG90IHN0YXJ0IC0gQ29udGVudCB3aGljaCBjYW4gYmUgcHJvdmlkZWQgYmVmb3JlIHRoZSBpbnB1dFxuICogQHNsb3QgZW5kIC0gQ29udGVudCB3aGljaCBjYW4gYmUgcHJvdmlkZWQgYWZ0ZXIgdGhlIGlucHV0XG4gKiBAc2xvdCBjb250cm9sIC0gVXNlZCB0byByZXBsYWNlIHRoZSBpbnB1dCBlbGVtZW50IHJlcHJlc2VudGluZyB0aGUgY29tYm9ib3hcbiAqIEBzbG90IGluZGljYXRvciAtIFRoZSB2aXN1YWwgaW5kaWNhdG9yIHJlcHJlc2VudGluZyB0aGUgZXhwYW5kZWQgc3RhdGVcbiAqIEBzbG90IC0gVGhlIGRlZmF1bHQgc2xvdCBmb3IgdGhlIG9wdGlvbnNcbiAqIEBjc3NwYXJ0IGNvbnRyb2wgLSBUaGUgd3JhcHBlciBlbGVtZW50IGNvbnRhaW5pbmcgdGhlIGlucHV0IGFyZWEsIGluY2x1ZGluZyBzdGFydCBhbmQgZW5kXG4gKiBAY3NzcGFydCBzZWxlY3RlZC12YWx1ZSAtIFRoZSBpbnB1dCBlbGVtZW50IHJlcHJlc2VudGluZyB0aGUgc2VsZWN0ZWQgdmFsdWVcbiAqIEBjc3NwYXJ0IGluZGljYXRvciAtIFRoZSBlbGVtZW50IHdyYXBwaW5nIHRoZSBpbmRpY2F0b3Igc2xvdFxuICogQGNzc3BhcnQgbGlzdGJveCAtIFRoZSB3cmFwcGVyIGZvciB0aGUgbGlzdGJveCBzbG90dGVkIG9wdGlvbnNcbiAqIEBmaXJlcyBjaGFuZ2UgLSBGaXJlcyBhIGN1c3RvbSAnY2hhbmdlJyBldmVudCB3aGVuIHRoZSB2YWx1ZSB1cGRhdGVzXG4gKlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgY2xhc3MgQ29tYm9ib3ggZXh0ZW5kcyBGb3JtQXNzb2NpYXRlZENvbWJvYm94IHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBpbnRlcm5hbCB2YWx1ZSBwcm9wZXJ0eS5cbiAgICAgICAgICpcbiAgICAgICAgICogQGludGVybmFsXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLl92YWx1ZSA9IFwiXCI7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgY29sbGVjdGlvbiBvZiBjdXJyZW50bHkgZmlsdGVyZWQgb3B0aW9ucy5cbiAgICAgICAgICpcbiAgICAgICAgICogQHB1YmxpY1xuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5maWx0ZXJlZE9wdGlvbnMgPSBbXTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBjdXJyZW50IGZpbHRlciB2YWx1ZS5cbiAgICAgICAgICpcbiAgICAgICAgICogQGludGVybmFsXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmZpbHRlciA9IFwiXCI7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgaW5pdGlhbCBzdGF0ZSBvZiB0aGUgcG9zaXRpb24gYXR0cmlidXRlLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAaW50ZXJuYWxcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZm9yY2VkUG9zaXRpb24gPSBmYWxzZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSB1bmlxdWUgaWQgZm9yIHRoZSBpbnRlcm5hbCBsaXN0Ym94IGVsZW1lbnQuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBpbnRlcm5hbFxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5saXN0Ym94SWQgPSB1bmlxdWVJZChcImxpc3Rib3gtXCIpO1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIG1heCBoZWlnaHQgZm9yIHRoZSBsaXN0Ym94IHdoZW4gb3BlbmVkLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAaW50ZXJuYWxcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMubWF4SGVpZ2h0ID0gMDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBvcGVuIGF0dHJpYnV0ZS5cbiAgICAgICAgICpcbiAgICAgICAgICogQHB1YmxpY1xuICAgICAgICAgKiBAcmVtYXJrc1xuICAgICAgICAgKiBIVE1MIEF0dHJpYnV0ZTogb3BlblxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5vcGVuID0gZmFsc2U7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlc2V0IHRoZSBlbGVtZW50IHRvIGl0cyBmaXJzdCBzZWxlY3RhYmxlIG9wdGlvbiB3aGVuIGl0cyBwYXJlbnQgZm9ybSBpcyByZXNldC5cbiAgICAgKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIGZvcm1SZXNldENhbGxiYWNrKCkge1xuICAgICAgICBzdXBlci5mb3JtUmVzZXRDYWxsYmFjaygpO1xuICAgICAgICB0aGlzLnNldERlZmF1bHRTZWxlY3RlZE9wdGlvbigpO1xuICAgICAgICB0aGlzLnVwZGF0ZVZhbHVlKCk7XG4gICAgfVxuICAgIC8qKiB7QGluaGVyaXREb2MgKEZvcm1Bc3NvY2lhdGVkOmludGVyZmFjZSkudmFsaWRhdGV9ICovXG4gICAgdmFsaWRhdGUoKSB7XG4gICAgICAgIHN1cGVyLnZhbGlkYXRlKHRoaXMuY29udHJvbCk7XG4gICAgfVxuICAgIGdldCBpc0F1dG9jb21wbGV0ZUlubGluZSgpIHtcbiAgICAgICAgcmV0dXJuICh0aGlzLmF1dG9jb21wbGV0ZSA9PT0gQ29tYm9ib3hBdXRvY29tcGxldGUuaW5saW5lIHx8IHRoaXMuaXNBdXRvY29tcGxldGVCb3RoKTtcbiAgICB9XG4gICAgZ2V0IGlzQXV0b2NvbXBsZXRlTGlzdCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYXV0b2NvbXBsZXRlID09PSBDb21ib2JveEF1dG9jb21wbGV0ZS5saXN0IHx8IHRoaXMuaXNBdXRvY29tcGxldGVCb3RoO1xuICAgIH1cbiAgICBnZXQgaXNBdXRvY29tcGxldGVCb3RoKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5hdXRvY29tcGxldGUgPT09IENvbWJvYm94QXV0b2NvbXBsZXRlLmJvdGg7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldHMgZm9jdXMgYW5kIHN5bmNocm9uaXplIEFSSUEgYXR0cmlidXRlcyB3aGVuIHRoZSBvcGVuIHByb3BlcnR5IGNoYW5nZXMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcHJldiAtIHRoZSBwcmV2aW91cyBvcGVuIHZhbHVlXG4gICAgICogQHBhcmFtIG5leHQgLSB0aGUgY3VycmVudCBvcGVuIHZhbHVlXG4gICAgICpcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBvcGVuQ2hhbmdlZCgpIHtcbiAgICAgICAgaWYgKHRoaXMub3Blbikge1xuICAgICAgICAgICAgdGhpcy5hcmlhQ29udHJvbHMgPSB0aGlzLmxpc3Rib3hJZDtcbiAgICAgICAgICAgIHRoaXMuYXJpYUV4cGFuZGVkID0gXCJ0cnVlXCI7XG4gICAgICAgICAgICB0aGlzLnNldFBvc2l0aW9uaW5nKCk7XG4gICAgICAgICAgICB0aGlzLmZvY3VzQW5kU2Nyb2xsT3B0aW9uSW50b1ZpZXcoKTtcbiAgICAgICAgICAgIC8vIGZvY3VzIGlzIGRpcmVjdGVkIHRvIHRoZSBlbGVtZW50IHdoZW4gYG9wZW5gIGlzIGNoYW5nZWQgcHJvZ3JhbW1hdGljYWxseVxuICAgICAgICAgICAgRE9NLnF1ZXVlVXBkYXRlKCgpID0+IHRoaXMuZm9jdXMoKSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5hcmlhQ29udHJvbHMgPSBcIlwiO1xuICAgICAgICB0aGlzLmFyaWFFeHBhbmRlZCA9IFwiZmFsc2VcIjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGxpc3Qgb2Ygb3B0aW9ucy5cbiAgICAgKlxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcmVtYXJrc1xuICAgICAqIE92ZXJyaWRlcyBgTGlzdGJveC5vcHRpb25zYC5cbiAgICAgKi9cbiAgICBnZXQgb3B0aW9ucygpIHtcbiAgICAgICAgT2JzZXJ2YWJsZS50cmFjayh0aGlzLCBcIm9wdGlvbnNcIik7XG4gICAgICAgIHJldHVybiB0aGlzLmZpbHRlcmVkT3B0aW9ucy5sZW5ndGggPyB0aGlzLmZpbHRlcmVkT3B0aW9ucyA6IHRoaXMuX29wdGlvbnM7XG4gICAgfVxuICAgIHNldCBvcHRpb25zKHZhbHVlKSB7XG4gICAgICAgIHRoaXMuX29wdGlvbnMgPSB2YWx1ZTtcbiAgICAgICAgT2JzZXJ2YWJsZS5ub3RpZnkodGhpcywgXCJvcHRpb25zXCIpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBVcGRhdGVzIHRoZSBwbGFjZWhvbGRlciBvbiB0aGUgcHJveHkgZWxlbWVudC5cbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBwbGFjZWhvbGRlckNoYW5nZWQoKSB7XG4gICAgICAgIGlmICh0aGlzLnByb3h5IGluc3RhbmNlb2YgSFRNTElucHV0RWxlbWVudCkge1xuICAgICAgICAgICAgdGhpcy5wcm94eS5wbGFjZWhvbGRlciA9IHRoaXMucGxhY2Vob2xkZXI7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcG9zaXRpb25DaGFuZ2VkKHByZXYsIG5leHQpIHtcbiAgICAgICAgdGhpcy5wb3NpdGlvbkF0dHJpYnV0ZSA9IG5leHQ7XG4gICAgICAgIHRoaXMuc2V0UG9zaXRpb25pbmcoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIHZhbHVlIHByb3BlcnR5LlxuICAgICAqXG4gICAgICogQHB1YmxpY1xuICAgICAqL1xuICAgIGdldCB2YWx1ZSgpIHtcbiAgICAgICAgT2JzZXJ2YWJsZS50cmFjayh0aGlzLCBcInZhbHVlXCIpO1xuICAgICAgICByZXR1cm4gdGhpcy5fdmFsdWU7XG4gICAgfVxuICAgIHNldCB2YWx1ZShuZXh0KSB7XG4gICAgICAgIHZhciBfYSwgX2IsIF9jO1xuICAgICAgICBjb25zdCBwcmV2ID0gYCR7dGhpcy5fdmFsdWV9YDtcbiAgICAgICAgaWYgKHRoaXMuJGZhc3RDb250cm9sbGVyLmlzQ29ubmVjdGVkICYmIHRoaXMub3B0aW9ucykge1xuICAgICAgICAgICAgY29uc3Qgc2VsZWN0ZWRJbmRleCA9IHRoaXMub3B0aW9ucy5maW5kSW5kZXgoZWwgPT4gZWwudGV4dC50b0xvd2VyQ2FzZSgpID09PSBuZXh0LnRvTG93ZXJDYXNlKCkpO1xuICAgICAgICAgICAgY29uc3QgcHJldlNlbGVjdGVkVmFsdWUgPSAoX2EgPSB0aGlzLm9wdGlvbnNbdGhpcy5zZWxlY3RlZEluZGV4XSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnRleHQ7XG4gICAgICAgICAgICBjb25zdCBuZXh0U2VsZWN0ZWRWYWx1ZSA9IChfYiA9IHRoaXMub3B0aW9uc1tzZWxlY3RlZEluZGV4XSkgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLnRleHQ7XG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkSW5kZXggPVxuICAgICAgICAgICAgICAgIHByZXZTZWxlY3RlZFZhbHVlICE9PSBuZXh0U2VsZWN0ZWRWYWx1ZVxuICAgICAgICAgICAgICAgICAgICA/IHNlbGVjdGVkSW5kZXhcbiAgICAgICAgICAgICAgICAgICAgOiB0aGlzLnNlbGVjdGVkSW5kZXg7XG4gICAgICAgICAgICBuZXh0ID0gKChfYyA9IHRoaXMuZmlyc3RTZWxlY3RlZE9wdGlvbikgPT09IG51bGwgfHwgX2MgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9jLnRleHQpIHx8IG5leHQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHByZXYgIT09IG5leHQpIHtcbiAgICAgICAgICAgIHRoaXMuX3ZhbHVlID0gbmV4dDtcbiAgICAgICAgICAgIHN1cGVyLnZhbHVlQ2hhbmdlZChwcmV2LCBuZXh0KTtcbiAgICAgICAgICAgIE9ic2VydmFibGUubm90aWZ5KHRoaXMsIFwidmFsdWVcIik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogSGFuZGxlIG9wZW5pbmcgYW5kIGNsb3NpbmcgdGhlIGxpc3Rib3ggd2hlbiB0aGUgY29tYm9ib3ggaXMgY2xpY2tlZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBlIC0gdGhlIG1vdXNlIGV2ZW50XG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgY2xpY2tIYW5kbGVyKGUpIHtcbiAgICAgICAgaWYgKHRoaXMuZGlzYWJsZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5vcGVuKSB7XG4gICAgICAgICAgICBjb25zdCBjYXB0dXJlZCA9IGUudGFyZ2V0LmNsb3Nlc3QoYG9wdGlvbixbcm9sZT1vcHRpb25dYCk7XG4gICAgICAgICAgICBpZiAoIWNhcHR1cmVkIHx8IGNhcHR1cmVkLmRpc2FibGVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5zZWxlY3RlZE9wdGlvbnMgPSBbY2FwdHVyZWRdO1xuICAgICAgICAgICAgdGhpcy5jb250cm9sLnZhbHVlID0gY2FwdHVyZWQudGV4dDtcbiAgICAgICAgICAgIHRoaXMuY2xlYXJTZWxlY3Rpb25SYW5nZSgpO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVWYWx1ZSh0cnVlKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm9wZW4gPSAhdGhpcy5vcGVuO1xuICAgICAgICBpZiAodGhpcy5vcGVuKSB7XG4gICAgICAgICAgICB0aGlzLmNvbnRyb2wuZm9jdXMoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgICAgIHN1cGVyLmNvbm5lY3RlZENhbGxiYWNrKCk7XG4gICAgICAgIHRoaXMuZm9yY2VkUG9zaXRpb24gPSAhIXRoaXMucG9zaXRpb25BdHRyaWJ1dGU7XG4gICAgICAgIGlmICh0aGlzLnZhbHVlKSB7XG4gICAgICAgICAgICB0aGlzLmluaXRpYWxWYWx1ZSA9IHRoaXMudmFsdWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogU3luY2hyb25pemUgdGhlIGBhcmlhLWRpc2FibGVkYCBwcm9wZXJ0eSB3aGVuIHRoZSBgZGlzYWJsZWRgIHByb3BlcnR5IGNoYW5nZXMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcHJldiAtIFRoZSBwcmV2aW91cyBkaXNhYmxlZCB2YWx1ZVxuICAgICAqIEBwYXJhbSBuZXh0IC0gVGhlIG5leHQgZGlzYWJsZWQgdmFsdWVcbiAgICAgKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIGRpc2FibGVkQ2hhbmdlZChwcmV2LCBuZXh0KSB7XG4gICAgICAgIGlmIChzdXBlci5kaXNhYmxlZENoYW5nZWQpIHtcbiAgICAgICAgICAgIHN1cGVyLmRpc2FibGVkQ2hhbmdlZChwcmV2LCBuZXh0KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmFyaWFEaXNhYmxlZCA9IHRoaXMuZGlzYWJsZWQgPyBcInRydWVcIiA6IFwiZmFsc2VcIjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRmlsdGVyIGF2YWlsYWJsZSBvcHRpb25zIGJ5IHRleHQgdmFsdWUuXG4gICAgICpcbiAgICAgKiBAcHVibGljXG4gICAgICovXG4gICAgZmlsdGVyT3B0aW9ucygpIHtcbiAgICAgICAgaWYgKCF0aGlzLmF1dG9jb21wbGV0ZSB8fCB0aGlzLmF1dG9jb21wbGV0ZSA9PT0gQ29tYm9ib3hBdXRvY29tcGxldGUubm9uZSkge1xuICAgICAgICAgICAgdGhpcy5maWx0ZXIgPSBcIlwiO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGZpbHRlciA9IHRoaXMuZmlsdGVyLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgIHRoaXMuZmlsdGVyZWRPcHRpb25zID0gdGhpcy5fb3B0aW9ucy5maWx0ZXIobyA9PiBvLnRleHQudG9Mb3dlckNhc2UoKS5zdGFydHNXaXRoKHRoaXMuZmlsdGVyLnRvTG93ZXJDYXNlKCkpKTtcbiAgICAgICAgaWYgKHRoaXMuaXNBdXRvY29tcGxldGVMaXN0KSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuZmlsdGVyZWRPcHRpb25zLmxlbmd0aCAmJiAhZmlsdGVyKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5maWx0ZXJlZE9wdGlvbnMgPSB0aGlzLl9vcHRpb25zO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5fb3B0aW9ucy5mb3JFYWNoKG8gPT4ge1xuICAgICAgICAgICAgICAgIG8uaGlkZGVuID0gIXRoaXMuZmlsdGVyZWRPcHRpb25zLmluY2x1ZGVzKG8pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogRm9jdXMgdGhlIGNvbnRyb2wgYW5kIHNjcm9sbCB0aGUgZmlyc3Qgc2VsZWN0ZWQgb3B0aW9uIGludG8gdmlldy5cbiAgICAgKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqIEByZW1hcmtzXG4gICAgICogT3ZlcnJpZGVzOiBgTGlzdGJveC5mb2N1c0FuZFNjcm9sbE9wdGlvbkludG9WaWV3YFxuICAgICAqL1xuICAgIGZvY3VzQW5kU2Nyb2xsT3B0aW9uSW50b1ZpZXcoKSB7XG4gICAgICAgIGlmICh0aGlzLmNvbnRhaW5zKGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQpKSB7XG4gICAgICAgICAgICB0aGlzLmNvbnRyb2wuZm9jdXMoKTtcbiAgICAgICAgICAgIGlmICh0aGlzLmZpcnN0U2VsZWN0ZWRPcHRpb24pIHtcbiAgICAgICAgICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB2YXIgX2E7XG4gICAgICAgICAgICAgICAgICAgIChfYSA9IHRoaXMuZmlyc3RTZWxlY3RlZE9wdGlvbikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnNjcm9sbEludG9WaWV3KHsgYmxvY2s6IFwibmVhcmVzdFwiIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEhhbmRsZSBmb2N1cyBzdGF0ZSB3aGVuIHRoZSBlbGVtZW50IG9yIGl0cyBjaGlsZHJlbiBsb3NlIGZvY3VzLlxuICAgICAqXG4gICAgICogQHBhcmFtIGUgLSBUaGUgZm9jdXMgZXZlbnRcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBmb2N1c291dEhhbmRsZXIoZSkge1xuICAgICAgICB0aGlzLnN5bmNWYWx1ZSgpO1xuICAgICAgICBpZiAoIXRoaXMub3Blbikge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZm9jdXNUYXJnZXQgPSBlLnJlbGF0ZWRUYXJnZXQ7XG4gICAgICAgIGlmICh0aGlzLmlzU2FtZU5vZGUoZm9jdXNUYXJnZXQpKSB7XG4gICAgICAgICAgICB0aGlzLmZvY3VzKCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLm9wdGlvbnMgfHwgIXRoaXMub3B0aW9ucy5pbmNsdWRlcyhmb2N1c1RhcmdldCkpIHtcbiAgICAgICAgICAgIHRoaXMub3BlbiA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEhhbmRsZSBjb250ZW50IGNoYW5nZXMgb24gdGhlIGNvbnRyb2wgaW5wdXQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZSAtIHRoZSBpbnB1dCBldmVudFxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIGlucHV0SGFuZGxlcihlKSB7XG4gICAgICAgIHRoaXMuZmlsdGVyID0gdGhpcy5jb250cm9sLnZhbHVlO1xuICAgICAgICB0aGlzLmZpbHRlck9wdGlvbnMoKTtcbiAgICAgICAgaWYgKCF0aGlzLmlzQXV0b2NvbXBsZXRlSW5saW5lKSB7XG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkSW5kZXggPSB0aGlzLm9wdGlvbnNcbiAgICAgICAgICAgICAgICAubWFwKG9wdGlvbiA9PiBvcHRpb24udGV4dClcbiAgICAgICAgICAgICAgICAuaW5kZXhPZih0aGlzLmNvbnRyb2wudmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChlLmlucHV0VHlwZS5pbmNsdWRlcyhcImRlbGV0ZUNvbnRlbnRcIikgfHwgIXRoaXMuZmlsdGVyLmxlbmd0aCkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuaXNBdXRvY29tcGxldGVMaXN0ICYmICF0aGlzLm9wZW4pIHtcbiAgICAgICAgICAgIHRoaXMub3BlbiA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuaXNBdXRvY29tcGxldGVJbmxpbmUpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmZpbHRlcmVkT3B0aW9ucy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkT3B0aW9ucyA9IFt0aGlzLmZpbHRlcmVkT3B0aW9uc1swXV07XG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZEluZGV4ID0gdGhpcy5vcHRpb25zLmluZGV4T2YodGhpcy5maXJzdFNlbGVjdGVkT3B0aW9uKTtcbiAgICAgICAgICAgICAgICB0aGlzLnNldElubGluZVNlbGVjdGlvbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZEluZGV4ID0gLTE7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBIYW5kbGUga2V5ZG93biBhY3Rpb25zIGZvciBsaXN0Ym94IG5hdmlnYXRpb24uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZSAtIHRoZSBrZXlib2FyZCBldmVudFxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIGtleWRvd25IYW5kbGVyKGUpIHtcbiAgICAgICAgY29uc3Qga2V5ID0gZS5rZXk7XG4gICAgICAgIGlmIChlLmN0cmxLZXkgfHwgZS5zaGlmdEtleSkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgc3dpdGNoIChrZXkpIHtcbiAgICAgICAgICAgIGNhc2UgXCJFbnRlclwiOiB7XG4gICAgICAgICAgICAgICAgdGhpcy5zeW5jVmFsdWUoKTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5pc0F1dG9jb21wbGV0ZUlubGluZSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmZpbHRlciA9IHRoaXMudmFsdWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMub3BlbiA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHRoaXMuY2xlYXJTZWxlY3Rpb25SYW5nZSgpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FzZSBcIkVzY2FwZVwiOiB7XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLmlzQXV0b2NvbXBsZXRlSW5saW5lKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRJbmRleCA9IC0xO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAodGhpcy5vcGVuKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMub3BlbiA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy52YWx1ZSA9IFwiXCI7XG4gICAgICAgICAgICAgICAgdGhpcy5jb250cm9sLnZhbHVlID0gXCJcIjtcbiAgICAgICAgICAgICAgICB0aGlzLmZpbHRlciA9IFwiXCI7XG4gICAgICAgICAgICAgICAgdGhpcy5maWx0ZXJPcHRpb25zKCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXNlIFwiVGFiXCI6IHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldElucHV0VG9TZWxlY3Rpb24oKTtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMub3Blbikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIHRoaXMub3BlbiA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FzZSBcIkFycm93VXBcIjpcbiAgICAgICAgICAgIGNhc2UgXCJBcnJvd0Rvd25cIjoge1xuICAgICAgICAgICAgICAgIHRoaXMuZmlsdGVyT3B0aW9ucygpO1xuICAgICAgICAgICAgICAgIGlmICghdGhpcy5vcGVuKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMub3BlbiA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAodGhpcy5maWx0ZXJlZE9wdGlvbnMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBzdXBlci5rZXlkb3duSGFuZGxlcihlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNBdXRvY29tcGxldGVJbmxpbmUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRJbmxpbmVTZWxlY3Rpb24oKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBkZWZhdWx0OiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogSGFuZGxlIGtleXVwIGFjdGlvbnMgZm9yIHZhbHVlIGlucHV0IGFuZCB0ZXh0IGZpZWxkIG1hbmlwdWxhdGlvbnMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZSAtIHRoZSBrZXlib2FyZCBldmVudFxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIGtleXVwSGFuZGxlcihlKSB7XG4gICAgICAgIGNvbnN0IGtleSA9IGUua2V5O1xuICAgICAgICBzd2l0Y2ggKGtleSkge1xuICAgICAgICAgICAgY2FzZSBcIkFycm93TGVmdFwiOlxuICAgICAgICAgICAgY2FzZSBcIkFycm93UmlnaHRcIjpcbiAgICAgICAgICAgIGNhc2UgXCJCYWNrc3BhY2VcIjpcbiAgICAgICAgICAgIGNhc2UgXCJEZWxldGVcIjpcbiAgICAgICAgICAgIGNhc2UgXCJIb21lXCI6XG4gICAgICAgICAgICBjYXNlIFwiRW5kXCI6IHtcbiAgICAgICAgICAgICAgICB0aGlzLmZpbHRlciA9IHRoaXMuY29udHJvbC52YWx1ZTtcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkSW5kZXggPSAtMTtcbiAgICAgICAgICAgICAgICB0aGlzLmZpbHRlck9wdGlvbnMoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBFbnN1cmUgdGhhdCB0aGUgc2VsZWN0ZWRJbmRleCBpcyB3aXRoaW4gdGhlIGN1cnJlbnQgYWxsb3dhYmxlIGZpbHRlcmVkIHJhbmdlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHByZXYgLSB0aGUgcHJldmlvdXMgc2VsZWN0ZWQgaW5kZXggdmFsdWVcbiAgICAgKiBAcGFyYW0gbmV4dCAtIHRoZSBjdXJyZW50IHNlbGVjdGVkIGluZGV4IHZhbHVlXG4gICAgICpcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBzZWxlY3RlZEluZGV4Q2hhbmdlZChwcmV2LCBuZXh0KSB7XG4gICAgICAgIGlmICh0aGlzLiRmYXN0Q29udHJvbGxlci5pc0Nvbm5lY3RlZCkge1xuICAgICAgICAgICAgbmV4dCA9IGxpbWl0KC0xLCB0aGlzLm9wdGlvbnMubGVuZ3RoIC0gMSwgbmV4dCk7XG4gICAgICAgICAgICAvLyB3ZSBvbmx5IHdhbnQgdG8gY2FsbCB0aGUgc3VwZXIgbWV0aG9kIHdoZW4gdGhlIHNlbGVjdGVkSW5kZXggaXMgaW4gcmFuZ2VcbiAgICAgICAgICAgIGlmIChuZXh0ICE9PSB0aGlzLnNlbGVjdGVkSW5kZXgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkSW5kZXggPSBuZXh0O1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHN1cGVyLnNlbGVjdGVkSW5kZXhDaGFuZ2VkKHByZXYsIG5leHQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE1vdmUgZm9jdXMgdG8gdGhlIHByZXZpb3VzIHNlbGVjdGFibGUgb3B0aW9uLlxuICAgICAqXG4gICAgICogQGludGVybmFsXG4gICAgICogQHJlbWFya3NcbiAgICAgKiBPdmVycmlkZXMgYExpc3Rib3guc2VsZWN0UHJldmlvdXNPcHRpb25gXG4gICAgICovXG4gICAgc2VsZWN0UHJldmlvdXNPcHRpb24oKSB7XG4gICAgICAgIGlmICghdGhpcy5kaXNhYmxlZCAmJiB0aGlzLnNlbGVjdGVkSW5kZXggPj0gMCkge1xuICAgICAgICAgICAgdGhpcy5zZWxlY3RlZEluZGV4ID0gdGhpcy5zZWxlY3RlZEluZGV4IC0gMTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIGRlZmF1bHQgc2VsZWN0ZWQgb3B0aW9ucyBhdCBpbml0aWFsaXphdGlvbiBvciByZXNldC5cbiAgICAgKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqIEByZW1hcmtzXG4gICAgICogT3ZlcnJpZGVzIGBMaXN0Ym94LnNldERlZmF1bHRTZWxlY3RlZE9wdGlvbmBcbiAgICAgKi9cbiAgICBzZXREZWZhdWx0U2VsZWN0ZWRPcHRpb24oKSB7XG4gICAgICAgIGlmICh0aGlzLiRmYXN0Q29udHJvbGxlci5pc0Nvbm5lY3RlZCAmJiB0aGlzLm9wdGlvbnMpIHtcbiAgICAgICAgICAgIGNvbnN0IHNlbGVjdGVkSW5kZXggPSB0aGlzLm9wdGlvbnMuZmluZEluZGV4KGVsID0+IGVsLmdldEF0dHJpYnV0ZShcInNlbGVjdGVkXCIpICE9PSBudWxsIHx8IGVsLnNlbGVjdGVkKTtcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRJbmRleCA9IHNlbGVjdGVkSW5kZXg7XG4gICAgICAgICAgICBpZiAoIXRoaXMuZGlydHlWYWx1ZSAmJiB0aGlzLmZpcnN0U2VsZWN0ZWRPcHRpb24pIHtcbiAgICAgICAgICAgICAgICB0aGlzLnZhbHVlID0gdGhpcy5maXJzdFNlbGVjdGVkT3B0aW9uLnRleHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnNldFNlbGVjdGVkT3B0aW9ucygpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEZvY3VzIGFuZCBzZXQgdGhlIGNvbnRlbnQgb2YgdGhlIGNvbnRyb2wgYmFzZWQgb24gdGhlIGZpcnN0IHNlbGVjdGVkIG9wdGlvbi5cbiAgICAgKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIHNldElucHV0VG9TZWxlY3Rpb24oKSB7XG4gICAgICAgIGlmICh0aGlzLmZpcnN0U2VsZWN0ZWRPcHRpb24pIHtcbiAgICAgICAgICAgIHRoaXMuY29udHJvbC52YWx1ZSA9IHRoaXMuZmlyc3RTZWxlY3RlZE9wdGlvbi50ZXh0O1xuICAgICAgICAgICAgdGhpcy5jb250cm9sLmZvY3VzKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogRm9jdXMsIHNldCBhbmQgc2VsZWN0IHRoZSBjb250ZW50IG9mIHRoZSBjb250cm9sIGJhc2VkIG9uIHRoZSBmaXJzdCBzZWxlY3RlZCBvcHRpb24uXG4gICAgICpcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBzZXRJbmxpbmVTZWxlY3Rpb24oKSB7XG4gICAgICAgIGlmICh0aGlzLmZpcnN0U2VsZWN0ZWRPcHRpb24pIHtcbiAgICAgICAgICAgIHRoaXMuc2V0SW5wdXRUb1NlbGVjdGlvbigpO1xuICAgICAgICAgICAgdGhpcy5jb250cm9sLnNldFNlbGVjdGlvblJhbmdlKHRoaXMuZmlsdGVyLmxlbmd0aCwgdGhpcy5jb250cm9sLnZhbHVlLmxlbmd0aCwgXCJiYWNrd2FyZFwiKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBEZXRlcm1pbmVzIGlmIGEgdmFsdWUgdXBkYXRlIHNob3VsZCBpbnZvbHZlIGVtaXR0aW5nIGEgY2hhbmdlIGV2ZW50LCB0aGVuIHVwZGF0ZXMgdGhlIHZhbHVlLlxuICAgICAqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgc3luY1ZhbHVlKCkge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIGNvbnN0IG5ld1ZhbHVlID0gdGhpcy5zZWxlY3RlZEluZGV4ID4gLTEgPyAoX2EgPSB0aGlzLmZpcnN0U2VsZWN0ZWRPcHRpb24pID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS50ZXh0IDogdGhpcy5jb250cm9sLnZhbHVlO1xuICAgICAgICB0aGlzLnVwZGF0ZVZhbHVlKHRoaXMudmFsdWUgIT09IG5ld1ZhbHVlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2FsY3VsYXRlIGFuZCBhcHBseSBsaXN0Ym94IHBvc2l0aW9uaW5nIGJhc2VkIG9uIGF2YWlsYWJsZSB2aWV3cG9ydCBzcGFjZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBmb3JjZSAtIGRpcmVjdGlvbiB0byBmb3JjZSB0aGUgbGlzdGJveCB0byBkaXNwbGF5XG4gICAgICogQHB1YmxpY1xuICAgICAqL1xuICAgIHNldFBvc2l0aW9uaW5nKCkge1xuICAgICAgICBjb25zdCBjdXJyZW50Qm94ID0gdGhpcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgY29uc3Qgdmlld3BvcnRIZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHQ7XG4gICAgICAgIGNvbnN0IGF2YWlsYWJsZUJvdHRvbSA9IHZpZXdwb3J0SGVpZ2h0IC0gY3VycmVudEJveC5ib3R0b207XG4gICAgICAgIHRoaXMucG9zaXRpb24gPSB0aGlzLmZvcmNlZFBvc2l0aW9uXG4gICAgICAgICAgICA/IHRoaXMucG9zaXRpb25BdHRyaWJ1dGVcbiAgICAgICAgICAgIDogY3VycmVudEJveC50b3AgPiBhdmFpbGFibGVCb3R0b21cbiAgICAgICAgICAgICAgICA/IFNlbGVjdFBvc2l0aW9uLmFib3ZlXG4gICAgICAgICAgICAgICAgOiBTZWxlY3RQb3NpdGlvbi5iZWxvdztcbiAgICAgICAgdGhpcy5wb3NpdGlvbkF0dHJpYnV0ZSA9IHRoaXMuZm9yY2VkUG9zaXRpb25cbiAgICAgICAgICAgID8gdGhpcy5wb3NpdGlvbkF0dHJpYnV0ZVxuICAgICAgICAgICAgOiB0aGlzLnBvc2l0aW9uO1xuICAgICAgICB0aGlzLm1heEhlaWdodCA9XG4gICAgICAgICAgICB0aGlzLnBvc2l0aW9uID09PSBTZWxlY3RQb3NpdGlvbi5hYm92ZSA/IH5+Y3VycmVudEJveC50b3AgOiB+fmF2YWlsYWJsZUJvdHRvbTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRW5zdXJlIHRoYXQgdGhlIGVudGlyZSBsaXN0IG9mIG9wdGlvbnMgaXMgdXNlZCB3aGVuIHNldHRpbmcgdGhlIHNlbGVjdGVkIHByb3BlcnR5LlxuICAgICAqXG4gICAgICogQHBhcmFtIHByZXYgLSB0aGUgcHJldmlvdXMgbGlzdCBvZiBzZWxlY3RlZCBvcHRpb25zXG4gICAgICogQHBhcmFtIG5leHQgLSB0aGUgY3VycmVudCBsaXN0IG9mIHNlbGVjdGVkIG9wdGlvbnNcbiAgICAgKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqIEByZW1hcmtzXG4gICAgICogT3ZlcnJpZGVzOiBgTGlzdGJveC5zZWxlY3RlZE9wdGlvbnNDaGFuZ2VkYFxuICAgICAqL1xuICAgIHNlbGVjdGVkT3B0aW9uc0NoYW5nZWQocHJldiwgbmV4dCkge1xuICAgICAgICBpZiAodGhpcy4kZmFzdENvbnRyb2xsZXIuaXNDb25uZWN0ZWQpIHtcbiAgICAgICAgICAgIHRoaXMuX29wdGlvbnMuZm9yRWFjaChvID0+IHtcbiAgICAgICAgICAgICAgICBvLnNlbGVjdGVkID0gbmV4dC5pbmNsdWRlcyhvKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFN5bmNocm9uaXplIHRoZSBmb3JtLWFzc29jaWF0ZWQgcHJveHkgYW5kIHVwZGF0ZSB0aGUgdmFsdWUgcHJvcGVydHkgb2YgdGhlIGVsZW1lbnQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcHJldiAtIHRoZSBwcmV2aW91cyBjb2xsZWN0aW9uIG9mIHNsb3R0ZWQgb3B0aW9uIGVsZW1lbnRzXG4gICAgICogQHBhcmFtIG5leHQgLSB0aGUgbmV4dCBjb2xsZWN0aW9uIG9mIHNsb3R0ZWQgb3B0aW9uIGVsZW1lbnRzXG4gICAgICpcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBzbG90dGVkT3B0aW9uc0NoYW5nZWQocHJldiwgbmV4dCkge1xuICAgICAgICBzdXBlci5zbG90dGVkT3B0aW9uc0NoYW5nZWQocHJldiwgbmV4dCk7XG4gICAgICAgIHRoaXMudXBkYXRlVmFsdWUoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0cyB0aGUgdmFsdWUgYW5kIHRvIG1hdGNoIHRoZSBmaXJzdCBzZWxlY3RlZCBvcHRpb24uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gc2hvdWxkRW1pdCAtIGlmIHRydWUsIHRoZSBjaGFuZ2UgZXZlbnQgd2lsbCBiZSBlbWl0dGVkXG4gICAgICpcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICB1cGRhdGVWYWx1ZShzaG91bGRFbWl0KSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgaWYgKHRoaXMuJGZhc3RDb250cm9sbGVyLmlzQ29ubmVjdGVkKSB7XG4gICAgICAgICAgICB0aGlzLnZhbHVlID0gKChfYSA9IHRoaXMuZmlyc3RTZWxlY3RlZE9wdGlvbikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnRleHQpIHx8IHRoaXMuY29udHJvbC52YWx1ZTtcbiAgICAgICAgICAgIHRoaXMuY29udHJvbC52YWx1ZSA9IHRoaXMudmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNob3VsZEVtaXQpIHtcbiAgICAgICAgICAgIHRoaXMuJGVtaXQoXCJjaGFuZ2VcIik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgY2xlYXJTZWxlY3Rpb25SYW5nZSgpIHtcbiAgICAgICAgY29uc3QgY29udHJvbFZhbHVlTGVuZ3RoID0gdGhpcy5jb250cm9sLnZhbHVlLmxlbmd0aDtcbiAgICAgICAgdGhpcy5jb250cm9sLnNldFNlbGVjdGlvblJhbmdlKGNvbnRyb2xWYWx1ZUxlbmd0aCwgY29udHJvbFZhbHVlTGVuZ3RoKTtcbiAgICB9XG59XG5fX2RlY29yYXRlKFtcbiAgICBhdHRyKHsgYXR0cmlidXRlOiBcImF1dG9jb21wbGV0ZVwiLCBtb2RlOiBcImZyb21WaWV3XCIgfSlcbl0sIENvbWJvYm94LnByb3RvdHlwZSwgXCJhdXRvY29tcGxldGVcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIG9ic2VydmFibGVcbl0sIENvbWJvYm94LnByb3RvdHlwZSwgXCJtYXhIZWlnaHRcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIGF0dHIoeyBhdHRyaWJ1dGU6IFwib3BlblwiLCBtb2RlOiBcImJvb2xlYW5cIiB9KVxuXSwgQ29tYm9ib3gucHJvdG90eXBlLCBcIm9wZW5cIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIGF0dHJcbl0sIENvbWJvYm94LnByb3RvdHlwZSwgXCJwbGFjZWhvbGRlclwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgYXR0cih7IGF0dHJpYnV0ZTogXCJwb3NpdGlvblwiIH0pXG5dLCBDb21ib2JveC5wcm90b3R5cGUsIFwicG9zaXRpb25BdHRyaWJ1dGVcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIG9ic2VydmFibGVcbl0sIENvbWJvYm94LnByb3RvdHlwZSwgXCJwb3NpdGlvblwiLCB2b2lkIDApO1xuLyoqXG4gKiBJbmNsdWRlcyBBUklBIHN0YXRlcyBhbmQgcHJvcGVydGllcyByZWxhdGluZyB0byB0aGUgQVJJQSBjb21ib2JveCByb2xlLlxuICpcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGNsYXNzIERlbGVnYXRlc0FSSUFDb21ib2JveCB7XG59XG5fX2RlY29yYXRlKFtcbiAgICBvYnNlcnZhYmxlXG5dLCBEZWxlZ2F0ZXNBUklBQ29tYm9ib3gucHJvdG90eXBlLCBcImFyaWFBdXRvQ29tcGxldGVcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIG9ic2VydmFibGVcbl0sIERlbGVnYXRlc0FSSUFDb21ib2JveC5wcm90b3R5cGUsIFwiYXJpYUNvbnRyb2xzXCIsIHZvaWQgMCk7XG5hcHBseU1peGlucyhEZWxlZ2F0ZXNBUklBQ29tYm9ib3gsIERlbGVnYXRlc0FSSUFMaXN0Ym94KTtcbmFwcGx5TWl4aW5zKENvbWJvYm94LCBTdGFydEVuZCwgRGVsZWdhdGVzQVJJQUNvbWJvYm94KTtcbiIsIi8qKlxuICogQXV0b2NvbXBsZXRlIHZhbHVlcyBmb3IgY29tYm9ib3guXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjb25zdCBDb21ib2JveEF1dG9jb21wbGV0ZSA9IHtcbiAgICBpbmxpbmU6IFwiaW5saW5lXCIsXG4gICAgbGlzdDogXCJsaXN0XCIsXG4gICAgYm90aDogXCJib3RoXCIsXG4gICAgbm9uZTogXCJub25lXCIsXG59O1xuIiwiaW1wb3J0IHsgaHRtbCwgcmVmLCBzbG90dGVkIH0gZnJvbSBcIkBtaWNyb3NvZnQvZmFzdC1lbGVtZW50XCI7XG5pbXBvcnQgeyBMaXN0Ym94IH0gZnJvbSBcIi4uL2xpc3Rib3gvbGlzdGJveC5qc1wiO1xuaW1wb3J0IHsgZW5kU2xvdFRlbXBsYXRlLCBzdGFydFNsb3RUZW1wbGF0ZSB9IGZyb20gXCIuLi9wYXR0ZXJucy9zdGFydC1lbmQuanNcIjtcbi8qKlxuICogVGhlIHRlbXBsYXRlIGZvciB0aGUge0BsaW5rIEBtaWNyb3NvZnQvZmFzdC1mb3VuZGF0aW9uIyhDb21ib2JveDpjbGFzcyl9IGNvbXBvbmVudC5cbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGNvbnN0IGNvbWJvYm94VGVtcGxhdGUgPSAoY29udGV4dCwgZGVmaW5pdGlvbikgPT4gaHRtbCBgXG4gICAgPHRlbXBsYXRlXG4gICAgICAgIGFyaWEtZGlzYWJsZWQ9XCIke3ggPT4geC5hcmlhRGlzYWJsZWR9XCJcbiAgICAgICAgYXV0b2NvbXBsZXRlPVwiJHt4ID0+IHguYXV0b2NvbXBsZXRlfVwiXG4gICAgICAgIGNsYXNzPVwiJHt4ID0+ICh4Lm9wZW4gPyBcIm9wZW5cIiA6IFwiXCIpfSAke3ggPT4geC5kaXNhYmxlZCA/IFwiZGlzYWJsZWRcIiA6IFwiXCJ9ICR7eCA9PiB4LnBvc2l0aW9ufVwiXG4gICAgICAgID9vcGVuPVwiJHt4ID0+IHgub3Blbn1cIlxuICAgICAgICB0YWJpbmRleD1cIiR7eCA9PiAoIXguZGlzYWJsZWQgPyBcIjBcIiA6IG51bGwpfVwiXG4gICAgICAgIEBjbGljaz1cIiR7KHgsIGMpID0+IHguY2xpY2tIYW5kbGVyKGMuZXZlbnQpfVwiXG4gICAgICAgIEBmb2N1c291dD1cIiR7KHgsIGMpID0+IHguZm9jdXNvdXRIYW5kbGVyKGMuZXZlbnQpfVwiXG4gICAgICAgIEBrZXlkb3duPVwiJHsoeCwgYykgPT4geC5rZXlkb3duSGFuZGxlcihjLmV2ZW50KX1cIlxuICAgID5cbiAgICAgICAgPGRpdiBjbGFzcz1cImNvbnRyb2xcIiBwYXJ0PVwiY29udHJvbFwiPlxuICAgICAgICAgICAgJHtzdGFydFNsb3RUZW1wbGF0ZShjb250ZXh0LCBkZWZpbml0aW9uKX1cbiAgICAgICAgICAgIDxzbG90IG5hbWU9XCJjb250cm9sXCI+XG4gICAgICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgICAgICAgIGFyaWEtYWN0aXZlZGVzY2VuZGFudD1cIiR7eCA9PiB4Lm9wZW4gPyB4LmFyaWFBY3RpdmVEZXNjZW5kYW50IDogbnVsbH1cIlxuICAgICAgICAgICAgICAgICAgICBhcmlhLWF1dG9jb21wbGV0ZT1cIiR7eCA9PiB4LmFyaWFBdXRvQ29tcGxldGV9XCJcbiAgICAgICAgICAgICAgICAgICAgYXJpYS1jb250cm9scz1cIiR7eCA9PiB4LmFyaWFDb250cm9sc31cIlxuICAgICAgICAgICAgICAgICAgICBhcmlhLWRpc2FibGVkPVwiJHt4ID0+IHguYXJpYURpc2FibGVkfVwiXG4gICAgICAgICAgICAgICAgICAgIGFyaWEtZXhwYW5kZWQ9XCIke3ggPT4geC5hcmlhRXhwYW5kZWR9XCJcbiAgICAgICAgICAgICAgICAgICAgYXJpYS1oYXNwb3B1cD1cImxpc3Rib3hcIlxuICAgICAgICAgICAgICAgICAgICBjbGFzcz1cInNlbGVjdGVkLXZhbHVlXCJcbiAgICAgICAgICAgICAgICAgICAgcGFydD1cInNlbGVjdGVkLXZhbHVlXCJcbiAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCIke3ggPT4geC5wbGFjZWhvbGRlcn1cIlxuICAgICAgICAgICAgICAgICAgICByb2xlPVwiY29tYm9ib3hcIlxuICAgICAgICAgICAgICAgICAgICB0eXBlPVwidGV4dFwiXG4gICAgICAgICAgICAgICAgICAgID9kaXNhYmxlZD1cIiR7eCA9PiB4LmRpc2FibGVkfVwiXG4gICAgICAgICAgICAgICAgICAgIDp2YWx1ZT1cIiR7eCA9PiB4LnZhbHVlfVwiXG4gICAgICAgICAgICAgICAgICAgIEBpbnB1dD1cIiR7KHgsIGMpID0+IHguaW5wdXRIYW5kbGVyKGMuZXZlbnQpfVwiXG4gICAgICAgICAgICAgICAgICAgIEBrZXl1cD1cIiR7KHgsIGMpID0+IHgua2V5dXBIYW5kbGVyKGMuZXZlbnQpfVwiXG4gICAgICAgICAgICAgICAgICAgICR7cmVmKFwiY29udHJvbFwiKX1cbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJpbmRpY2F0b3JcIiBwYXJ0PVwiaW5kaWNhdG9yXCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+XG4gICAgICAgICAgICAgICAgICAgIDxzbG90IG5hbWU9XCJpbmRpY2F0b3JcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICR7ZGVmaW5pdGlvbi5pbmRpY2F0b3IgfHwgXCJcIn1cbiAgICAgICAgICAgICAgICAgICAgPC9zbG90PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9zbG90PlxuICAgICAgICAgICAgJHtlbmRTbG90VGVtcGxhdGUoY29udGV4dCwgZGVmaW5pdGlvbil9XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8ZGl2XG4gICAgICAgICAgICBjbGFzcz1cImxpc3Rib3hcIlxuICAgICAgICAgICAgaWQ9XCIke3ggPT4geC5saXN0Ym94SWR9XCJcbiAgICAgICAgICAgIHBhcnQ9XCJsaXN0Ym94XCJcbiAgICAgICAgICAgIHJvbGU9XCJsaXN0Ym94XCJcbiAgICAgICAgICAgID9kaXNhYmxlZD1cIiR7eCA9PiB4LmRpc2FibGVkfVwiXG4gICAgICAgICAgICA/aGlkZGVuPVwiJHt4ID0+ICF4Lm9wZW59XCJcbiAgICAgICAgICAgICR7cmVmKFwibGlzdGJveFwiKX1cbiAgICAgICAgPlxuICAgICAgICAgICAgPHNsb3RcbiAgICAgICAgICAgICAgICAke3Nsb3R0ZWQoe1xuICAgIGZpbHRlcjogTGlzdGJveC5zbG90dGVkT3B0aW9uRmlsdGVyLFxuICAgIGZsYXR0ZW46IHRydWUsXG4gICAgcHJvcGVydHk6IFwic2xvdHRlZE9wdGlvbnNcIixcbn0pfVxuICAgICAgICAgICAgPjwvc2xvdD5cbiAgICAgICAgPC9kaXY+XG4gICAgPC90ZW1wbGF0ZT5cbmA7XG4iLCJleHBvcnQgKiBmcm9tIFwiLi9jb21ib2JveC5qc1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vY29tYm9ib3gub3B0aW9ucy5qc1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vY29tYm9ib3gudGVtcGxhdGUuanNcIjtcbiIsImltcG9ydCB7IF9fZGVjb3JhdGUgfSBmcm9tIFwidHNsaWJcIjtcbmltcG9ydCB7IGF0dHIsIGh0bWwsIG9ic2VydmFibGUgfSBmcm9tIFwiQG1pY3Jvc29mdC9mYXN0LWVsZW1lbnRcIjtcbmltcG9ydCB7IGV2ZW50Rm9jdXNJbiwgZXZlbnRGb2N1c091dCwgZXZlbnRLZXlEb3duLCBrZXlFbnRlciwga2V5RXNjYXBlLCBrZXlGdW5jdGlvbjIsIH0gZnJvbSBcIkBtaWNyb3NvZnQvZmFzdC13ZWItdXRpbGl0aWVzXCI7XG5pbXBvcnQgeyBGb3VuZGF0aW9uRWxlbWVudCB9IGZyb20gXCIuLi9mb3VuZGF0aW9uLWVsZW1lbnQvZm91bmRhdGlvbi1lbGVtZW50LmpzXCI7XG5pbXBvcnQgeyBEYXRhR3JpZENlbGxUeXBlcyB9IGZyb20gXCIuL2RhdGEtZ3JpZC5vcHRpb25zLmpzXCI7XG5leHBvcnQgeyBEYXRhR3JpZENlbGxUeXBlcyB9O1xuY29uc3QgZGVmYXVsdENlbGxDb250ZW50c1RlbXBsYXRlID0gaHRtbCBgXG4gICAgPHRlbXBsYXRlPlxuICAgICAgICAke3ggPT4geC5yb3dEYXRhID09PSBudWxsIHx8XG4gICAgeC5jb2x1bW5EZWZpbml0aW9uID09PSBudWxsIHx8XG4gICAgeC5jb2x1bW5EZWZpbml0aW9uLmNvbHVtbkRhdGFLZXkgPT09IG51bGxcbiAgICA/IG51bGxcbiAgICA6IHgucm93RGF0YVt4LmNvbHVtbkRlZmluaXRpb24uY29sdW1uRGF0YUtleV19XG4gICAgPC90ZW1wbGF0ZT5cbmA7XG5jb25zdCBkZWZhdWx0SGVhZGVyQ2VsbENvbnRlbnRzVGVtcGxhdGUgPSBodG1sIGBcbiAgICA8dGVtcGxhdGU+XG4gICAgICAgICR7eCA9PiB4LmNvbHVtbkRlZmluaXRpb24gPT09IG51bGxcbiAgICA/IG51bGxcbiAgICA6IHguY29sdW1uRGVmaW5pdGlvbi50aXRsZSA9PT0gdW5kZWZpbmVkXG4gICAgICAgID8geC5jb2x1bW5EZWZpbml0aW9uLmNvbHVtbkRhdGFLZXlcbiAgICAgICAgOiB4LmNvbHVtbkRlZmluaXRpb24udGl0bGV9XG4gICAgPC90ZW1wbGF0ZT5cbmA7XG4vKipcbiAqIEEgRGF0YSBHcmlkIENlbGwgQ3VzdG9tIEhUTUwgRWxlbWVudC5cbiAqXG4gKiBAZmlyZXMgY2VsbC1mb2N1c2VkIC0gRmlyZXMgYSBjdXN0b20gJ2NlbGwtZm9jdXNlZCcgZXZlbnQgd2hlbiBmb2N1cyBpcyBvbiB0aGUgY2VsbCBvciBpdHMgY29udGVudHNcbiAqIEBzbG90IC0gVGhlIGRlZmF1bHQgc2xvdCBmb3IgY2VsbCBjb250ZW50cy4gIFRoZSBcImNlbGwgY29udGVudHMgdGVtcGxhdGVcIiByZW5kZXJzIGhlcmUuXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjbGFzcyBEYXRhR3JpZENlbGwgZXh0ZW5kcyBGb3VuZGF0aW9uRWxlbWVudCB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgdHlwZSBvZiBjZWxsXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwdWJsaWNcbiAgICAgICAgICogQHJlbWFya3NcbiAgICAgICAgICogSFRNTCBBdHRyaWJ1dGU6IGNlbGwtdHlwZVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5jZWxsVHlwZSA9IERhdGFHcmlkQ2VsbFR5cGVzLmRlZmF1bHQ7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgYmFzZSBkYXRhIGZvciB0aGUgcGFyZW50IHJvd1xuICAgICAgICAgKlxuICAgICAgICAgKiBAcHVibGljXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnJvd0RhdGEgPSBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIGJhc2UgZGF0YSBmb3IgdGhlIGNvbHVtblxuICAgICAgICAgKlxuICAgICAgICAgKiBAcHVibGljXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmNvbHVtbkRlZmluaXRpb24gPSBudWxsO1xuICAgICAgICB0aGlzLmlzQWN0aXZlQ2VsbCA9IGZhbHNlO1xuICAgICAgICB0aGlzLmN1c3RvbUNlbGxWaWV3ID0gbnVsbDtcbiAgICAgICAgdGhpcy51cGRhdGVDZWxsU3R5bGUgPSAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnN0eWxlLmdyaWRDb2x1bW4gPSB0aGlzLmdyaWRDb2x1bW47XG4gICAgICAgIH07XG4gICAgfVxuICAgIGNlbGxUeXBlQ2hhbmdlZCgpIHtcbiAgICAgICAgaWYgKHRoaXMuJGZhc3RDb250cm9sbGVyLmlzQ29ubmVjdGVkKSB7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUNlbGxWaWV3KCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ3JpZENvbHVtbkNoYW5nZWQoKSB7XG4gICAgICAgIGlmICh0aGlzLiRmYXN0Q29udHJvbGxlci5pc0Nvbm5lY3RlZCkge1xuICAgICAgICAgICAgdGhpcy51cGRhdGVDZWxsU3R5bGUoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjb2x1bW5EZWZpbml0aW9uQ2hhbmdlZChvbGRWYWx1ZSwgbmV3VmFsdWUpIHtcbiAgICAgICAgaWYgKHRoaXMuJGZhc3RDb250cm9sbGVyLmlzQ29ubmVjdGVkKSB7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUNlbGxWaWV3KCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgc3VwZXIuY29ubmVjdGVkQ2FsbGJhY2soKTtcbiAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKGV2ZW50Rm9jdXNJbiwgdGhpcy5oYW5kbGVGb2N1c2luKTtcbiAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKGV2ZW50Rm9jdXNPdXQsIHRoaXMuaGFuZGxlRm9jdXNvdXQpO1xuICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoZXZlbnRLZXlEb3duLCB0aGlzLmhhbmRsZUtleWRvd24pO1xuICAgICAgICB0aGlzLnN0eWxlLmdyaWRDb2x1bW4gPSBgJHsoKF9hID0gdGhpcy5jb2x1bW5EZWZpbml0aW9uKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuZ3JpZENvbHVtbikgPT09IHVuZGVmaW5lZFxuICAgICAgICAgICAgPyAwXG4gICAgICAgICAgICA6IHRoaXMuY29sdW1uRGVmaW5pdGlvbi5ncmlkQ29sdW1ufWA7XG4gICAgICAgIHRoaXMudXBkYXRlQ2VsbFZpZXcoKTtcbiAgICAgICAgdGhpcy51cGRhdGVDZWxsU3R5bGUoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgZGlzY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgICAgIHN1cGVyLmRpc2Nvbm5lY3RlZENhbGxiYWNrKCk7XG4gICAgICAgIHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudEZvY3VzSW4sIHRoaXMuaGFuZGxlRm9jdXNpbik7XG4gICAgICAgIHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudEZvY3VzT3V0LCB0aGlzLmhhbmRsZUZvY3Vzb3V0KTtcbiAgICAgICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKGV2ZW50S2V5RG93biwgdGhpcy5oYW5kbGVLZXlkb3duKTtcbiAgICAgICAgdGhpcy5kaXNjb25uZWN0Q2VsbFZpZXcoKTtcbiAgICB9XG4gICAgaGFuZGxlRm9jdXNpbihlKSB7XG4gICAgICAgIGlmICh0aGlzLmlzQWN0aXZlQ2VsbCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuaXNBY3RpdmVDZWxsID0gdHJ1ZTtcbiAgICAgICAgc3dpdGNoICh0aGlzLmNlbGxUeXBlKSB7XG4gICAgICAgICAgICBjYXNlIERhdGFHcmlkQ2VsbFR5cGVzLmNvbHVtbkhlYWRlcjpcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5jb2x1bW5EZWZpbml0aW9uICE9PSBudWxsICYmXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29sdW1uRGVmaW5pdGlvbi5oZWFkZXJDZWxsSW50ZXJuYWxGb2N1c1F1ZXVlICE9PSB0cnVlICYmXG4gICAgICAgICAgICAgICAgICAgIHR5cGVvZiB0aGlzLmNvbHVtbkRlZmluaXRpb24uaGVhZGVyQ2VsbEZvY3VzVGFyZ2V0Q2FsbGJhY2sgPT09XG4gICAgICAgICAgICAgICAgICAgICAgICBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gbW92ZSBmb2N1cyB0byB0aGUgZm9jdXMgdGFyZ2V0XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZvY3VzVGFyZ2V0ID0gdGhpcy5jb2x1bW5EZWZpbml0aW9uLmhlYWRlckNlbGxGb2N1c1RhcmdldENhbGxiYWNrKHRoaXMpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZm9jdXNUYXJnZXQgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvY3VzVGFyZ2V0LmZvY3VzKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmNvbHVtbkRlZmluaXRpb24gIT09IG51bGwgJiZcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb2x1bW5EZWZpbml0aW9uLmNlbGxJbnRlcm5hbEZvY3VzUXVldWUgIT09IHRydWUgJiZcbiAgICAgICAgICAgICAgICAgICAgdHlwZW9mIHRoaXMuY29sdW1uRGVmaW5pdGlvbi5jZWxsRm9jdXNUYXJnZXRDYWxsYmFjayA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIG1vdmUgZm9jdXMgdG8gdGhlIGZvY3VzIHRhcmdldFxuICAgICAgICAgICAgICAgICAgICBjb25zdCBmb2N1c1RhcmdldCA9IHRoaXMuY29sdW1uRGVmaW5pdGlvbi5jZWxsRm9jdXNUYXJnZXRDYWxsYmFjayh0aGlzKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZvY3VzVGFyZ2V0ICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb2N1c1RhcmdldC5mb2N1cygpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuJGVtaXQoXCJjZWxsLWZvY3VzZWRcIiwgdGhpcyk7XG4gICAgfVxuICAgIGhhbmRsZUZvY3Vzb3V0KGUpIHtcbiAgICAgICAgaWYgKHRoaXMgIT09IGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgJiYgIXRoaXMuY29udGFpbnMoZG9jdW1lbnQuYWN0aXZlRWxlbWVudCkpIHtcbiAgICAgICAgICAgIHRoaXMuaXNBY3RpdmVDZWxsID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaGFuZGxlS2V5ZG93bihlKSB7XG4gICAgICAgIGlmIChlLmRlZmF1bHRQcmV2ZW50ZWQgfHxcbiAgICAgICAgICAgIHRoaXMuY29sdW1uRGVmaW5pdGlvbiA9PT0gbnVsbCB8fFxuICAgICAgICAgICAgKHRoaXMuY2VsbFR5cGUgPT09IERhdGFHcmlkQ2VsbFR5cGVzLmRlZmF1bHQgJiZcbiAgICAgICAgICAgICAgICB0aGlzLmNvbHVtbkRlZmluaXRpb24uY2VsbEludGVybmFsRm9jdXNRdWV1ZSAhPT0gdHJ1ZSkgfHxcbiAgICAgICAgICAgICh0aGlzLmNlbGxUeXBlID09PSBEYXRhR3JpZENlbGxUeXBlcy5jb2x1bW5IZWFkZXIgJiZcbiAgICAgICAgICAgICAgICB0aGlzLmNvbHVtbkRlZmluaXRpb24uaGVhZGVyQ2VsbEludGVybmFsRm9jdXNRdWV1ZSAhPT0gdHJ1ZSkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBzd2l0Y2ggKGUua2V5KSB7XG4gICAgICAgICAgICBjYXNlIGtleUVudGVyOlxuICAgICAgICAgICAgY2FzZSBrZXlGdW5jdGlvbjI6XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuY29udGFpbnMoZG9jdW1lbnQuYWN0aXZlRWxlbWVudCkgJiZcbiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuYWN0aXZlRWxlbWVudCAhPT0gdGhpcykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHN3aXRjaCAodGhpcy5jZWxsVHlwZSkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIERhdGFHcmlkQ2VsbFR5cGVzLmNvbHVtbkhlYWRlcjpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmNvbHVtbkRlZmluaXRpb24uaGVhZGVyQ2VsbEZvY3VzVGFyZ2V0Q2FsbGJhY2sgIT09XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZm9jdXNUYXJnZXQgPSB0aGlzLmNvbHVtbkRlZmluaXRpb24uaGVhZGVyQ2VsbEZvY3VzVGFyZ2V0Q2FsbGJhY2sodGhpcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZvY3VzVGFyZ2V0ICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvY3VzVGFyZ2V0LmZvY3VzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuY29sdW1uRGVmaW5pdGlvbi5jZWxsRm9jdXNUYXJnZXRDYWxsYmFjayAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZm9jdXNUYXJnZXQgPSB0aGlzLmNvbHVtbkRlZmluaXRpb24uY2VsbEZvY3VzVGFyZ2V0Q2FsbGJhY2sodGhpcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZvY3VzVGFyZ2V0ICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvY3VzVGFyZ2V0LmZvY3VzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2Uga2V5RXNjYXBlOlxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmNvbnRhaW5zKGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQpICYmXG4gICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgIT09IHRoaXMpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5mb2N1cygpO1xuICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfVxuICAgIHVwZGF0ZUNlbGxWaWV3KCkge1xuICAgICAgICB0aGlzLmRpc2Nvbm5lY3RDZWxsVmlldygpO1xuICAgICAgICBpZiAodGhpcy5jb2x1bW5EZWZpbml0aW9uID09PSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgc3dpdGNoICh0aGlzLmNlbGxUeXBlKSB7XG4gICAgICAgICAgICBjYXNlIERhdGFHcmlkQ2VsbFR5cGVzLmNvbHVtbkhlYWRlcjpcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5jb2x1bW5EZWZpbml0aW9uLmhlYWRlckNlbGxUZW1wbGF0ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY3VzdG9tQ2VsbFZpZXcgPSB0aGlzLmNvbHVtbkRlZmluaXRpb24uaGVhZGVyQ2VsbFRlbXBsYXRlLnJlbmRlcih0aGlzLCB0aGlzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY3VzdG9tQ2VsbFZpZXcgPSBkZWZhdWx0SGVhZGVyQ2VsbENvbnRlbnRzVGVtcGxhdGUucmVuZGVyKHRoaXMsIHRoaXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgdW5kZWZpbmVkOlxuICAgICAgICAgICAgY2FzZSBEYXRhR3JpZENlbGxUeXBlcy5yb3dIZWFkZXI6XG4gICAgICAgICAgICBjYXNlIERhdGFHcmlkQ2VsbFR5cGVzLmRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuY29sdW1uRGVmaW5pdGlvbi5jZWxsVGVtcGxhdGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmN1c3RvbUNlbGxWaWV3ID0gdGhpcy5jb2x1bW5EZWZpbml0aW9uLmNlbGxUZW1wbGF0ZS5yZW5kZXIodGhpcywgdGhpcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmN1c3RvbUNlbGxWaWV3ID0gZGVmYXVsdENlbGxDb250ZW50c1RlbXBsYXRlLnJlbmRlcih0aGlzLCB0aGlzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZGlzY29ubmVjdENlbGxWaWV3KCkge1xuICAgICAgICBpZiAodGhpcy5jdXN0b21DZWxsVmlldyAhPT0gbnVsbCkge1xuICAgICAgICAgICAgdGhpcy5jdXN0b21DZWxsVmlldy5kaXNwb3NlKCk7XG4gICAgICAgICAgICB0aGlzLmN1c3RvbUNlbGxWaWV3ID0gbnVsbDtcbiAgICAgICAgfVxuICAgIH1cbn1cbl9fZGVjb3JhdGUoW1xuICAgIGF0dHIoeyBhdHRyaWJ1dGU6IFwiY2VsbC10eXBlXCIgfSlcbl0sIERhdGFHcmlkQ2VsbC5wcm90b3R5cGUsIFwiY2VsbFR5cGVcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIGF0dHIoeyBhdHRyaWJ1dGU6IFwiZ3JpZC1jb2x1bW5cIiB9KVxuXSwgRGF0YUdyaWRDZWxsLnByb3RvdHlwZSwgXCJncmlkQ29sdW1uXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBvYnNlcnZhYmxlXG5dLCBEYXRhR3JpZENlbGwucHJvdG90eXBlLCBcInJvd0RhdGFcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIG9ic2VydmFibGVcbl0sIERhdGFHcmlkQ2VsbC5wcm90b3R5cGUsIFwiY29sdW1uRGVmaW5pdGlvblwiLCB2b2lkIDApO1xuIiwiaW1wb3J0IHsgaHRtbCB9IGZyb20gXCJAbWljcm9zb2Z0L2Zhc3QtZWxlbWVudFwiO1xuLyoqXG4gKiBHZW5lcmF0ZXMgYSB0ZW1wbGF0ZSBmb3IgdGhlIHtAbGluayBAbWljcm9zb2Z0L2Zhc3QtZm91bmRhdGlvbiNEYXRhR3JpZENlbGx9IGNvbXBvbmVudCB1c2luZ1xuICogdGhlIHByb3ZpZGVkIHByZWZpeC5cbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGNvbnN0IGRhdGFHcmlkQ2VsbFRlbXBsYXRlID0gKGNvbnRleHQsIGRlZmluaXRpb24pID0+IHtcbiAgICByZXR1cm4gaHRtbCBgXG4gICAgICAgIDx0ZW1wbGF0ZVxuICAgICAgICAgICAgdGFiaW5kZXg9XCItMVwiXG4gICAgICAgICAgICByb2xlPVwiJHt4ID0+ICF4LmNlbGxUeXBlIHx8IHguY2VsbFR5cGUgPT09IFwiZGVmYXVsdFwiID8gXCJncmlkY2VsbFwiIDogeC5jZWxsVHlwZX1cIlxuICAgICAgICAgICAgY2xhc3M9XCJcbiAgICAgICAgICAgICR7eCA9PiB4LmNlbGxUeXBlID09PSBcImNvbHVtbmhlYWRlclwiXG4gICAgICAgID8gXCJjb2x1bW4taGVhZGVyXCJcbiAgICAgICAgOiB4LmNlbGxUeXBlID09PSBcInJvd2hlYWRlclwiXG4gICAgICAgICAgICA/IFwicm93LWhlYWRlclwiXG4gICAgICAgICAgICA6IFwiXCJ9XG4gICAgICAgICAgICBcIlxuICAgICAgICA+XG4gICAgICAgICAgICA8c2xvdD48L3Nsb3Q+XG4gICAgICAgIDwvdGVtcGxhdGU+XG4gICAgYDtcbn07XG4iLCJpbXBvcnQgeyBfX2RlY29yYXRlIH0gZnJvbSBcInRzbGliXCI7XG5pbXBvcnQgeyBhdHRyLCBvYnNlcnZhYmxlLCBSZXBlYXREaXJlY3RpdmUsIH0gZnJvbSBcIkBtaWNyb3NvZnQvZmFzdC1lbGVtZW50XCI7XG5pbXBvcnQgeyBldmVudEZvY3VzT3V0LCBldmVudEtleURvd24sIGtleUFycm93TGVmdCwga2V5QXJyb3dSaWdodCwga2V5RW5kLCBrZXlIb21lLCB9IGZyb20gXCJAbWljcm9zb2Z0L2Zhc3Qtd2ViLXV0aWxpdGllc1wiO1xuaW1wb3J0IHsgRm91bmRhdGlvbkVsZW1lbnQgfSBmcm9tIFwiLi4vZm91bmRhdGlvbi1lbGVtZW50L2ZvdW5kYXRpb24tZWxlbWVudC5qc1wiO1xuaW1wb3J0IHsgRGF0YUdyaWRSb3dUeXBlcyB9IGZyb20gXCIuL2RhdGEtZ3JpZC5vcHRpb25zLmpzXCI7XG4vKipcbiAqIEEgRGF0YSBHcmlkIFJvdyBDdXN0b20gSFRNTCBFbGVtZW50LlxuICpcbiAqIEBmaXJlcyByb3ctZm9jdXNlZCAtIEZpcmVzIGEgY3VzdG9tICdyb3ctZm9jdXNlZCcgZXZlbnQgd2hlbiBmb2N1cyBpcyBvbiBhbiBlbGVtZW50ICh1c3VhbGx5IGEgY2VsbCBvciBpdHMgY29udGVudHMpIGluIHRoZSByb3dcbiAqIEBzbG90IC0gVGhlIGRlZmF1bHQgc2xvdCBmb3IgY3VzdG9tIGNlbGwgZWxlbWVudHNcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGNsYXNzIERhdGFHcmlkUm93IGV4dGVuZHMgRm91bmRhdGlvbkVsZW1lbnQge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlciguLi5hcmd1bWVudHMpO1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIHR5cGUgb2Ygcm93XG4gICAgICAgICAqXG4gICAgICAgICAqIEBwdWJsaWNcbiAgICAgICAgICogQHJlbWFya3NcbiAgICAgICAgICogSFRNTCBBdHRyaWJ1dGU6IHJvdy10eXBlXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnJvd1R5cGUgPSBEYXRhR3JpZFJvd1R5cGVzLmRlZmF1bHQ7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgYmFzZSBkYXRhIGZvciB0aGlzIHJvd1xuICAgICAgICAgKlxuICAgICAgICAgKiBAcHVibGljXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnJvd0RhdGEgPSBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIGNvbHVtbiBkZWZpbml0aW9ucyBvZiB0aGUgcm93XG4gICAgICAgICAqXG4gICAgICAgICAqIEBwdWJsaWNcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuY29sdW1uRGVmaW5pdGlvbnMgPSBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogV2hldGhlciBmb2N1cyBpcyBvbi9pbiBhIGNlbGwgd2l0aGluIHRoaXMgcm93LlxuICAgICAgICAgKlxuICAgICAgICAgKiBAaW50ZXJuYWxcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuaXNBY3RpdmVSb3cgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5jZWxsc1JlcGVhdEJlaGF2aW9yID0gbnVsbDtcbiAgICAgICAgdGhpcy5jZWxsc1BsYWNlaG9sZGVyID0gbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBpbnRlcm5hbFxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5mb2N1c0NvbHVtbkluZGV4ID0gMDtcbiAgICAgICAgdGhpcy5yZWZvY3VzT25Mb2FkID0gZmFsc2U7XG4gICAgICAgIHRoaXMudXBkYXRlUm93U3R5bGUgPSAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnN0eWxlLmdyaWRUZW1wbGF0ZUNvbHVtbnMgPSB0aGlzLmdyaWRUZW1wbGF0ZUNvbHVtbnM7XG4gICAgICAgIH07XG4gICAgfVxuICAgIGdyaWRUZW1wbGF0ZUNvbHVtbnNDaGFuZ2VkKCkge1xuICAgICAgICBpZiAodGhpcy4kZmFzdENvbnRyb2xsZXIuaXNDb25uZWN0ZWQpIHtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlUm93U3R5bGUoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByb3dUeXBlQ2hhbmdlZCgpIHtcbiAgICAgICAgaWYgKHRoaXMuJGZhc3RDb250cm9sbGVyLmlzQ29ubmVjdGVkKSB7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUl0ZW1UZW1wbGF0ZSgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJvd0RhdGFDaGFuZ2VkKCkge1xuICAgICAgICBpZiAodGhpcy5yb3dEYXRhICE9PSBudWxsICYmIHRoaXMuaXNBY3RpdmVSb3cpIHtcbiAgICAgICAgICAgIHRoaXMucmVmb2N1c09uTG9hZCA9IHRydWU7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICB9XG4gICAgY2VsbEl0ZW1UZW1wbGF0ZUNoYW5nZWQoKSB7XG4gICAgICAgIHRoaXMudXBkYXRlSXRlbVRlbXBsYXRlKCk7XG4gICAgfVxuICAgIGhlYWRlckNlbGxJdGVtVGVtcGxhdGVDaGFuZ2VkKCkge1xuICAgICAgICB0aGlzLnVwZGF0ZUl0ZW1UZW1wbGF0ZSgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICAgICAgc3VwZXIuY29ubmVjdGVkQ2FsbGJhY2soKTtcbiAgICAgICAgLy8gbm90ZSB0aGF0IHJvdyBlbGVtZW50cyBjYW4gYmUgcmV1c2VkIHdpdGggYSBkaWZmZXJlbnQgZGF0YSBvYmplY3RcbiAgICAgICAgLy8gYXMgdGhlIHBhcmVudCBncmlkJ3MgcmVwZWF0IGJlaGF2aW9yIHJlYWN0cyB0byBjaGFuZ2VzIGluIHRoZSBkYXRhIHNldC5cbiAgICAgICAgaWYgKHRoaXMuY2VsbHNSZXBlYXRCZWhhdmlvciA9PT0gbnVsbCkge1xuICAgICAgICAgICAgdGhpcy5jZWxsc1BsYWNlaG9sZGVyID0gZG9jdW1lbnQuY3JlYXRlQ29tbWVudChcIlwiKTtcbiAgICAgICAgICAgIHRoaXMuYXBwZW5kQ2hpbGQodGhpcy5jZWxsc1BsYWNlaG9sZGVyKTtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlSXRlbVRlbXBsYXRlKCk7XG4gICAgICAgICAgICB0aGlzLmNlbGxzUmVwZWF0QmVoYXZpb3IgPSBuZXcgUmVwZWF0RGlyZWN0aXZlKHggPT4geC5jb2x1bW5EZWZpbml0aW9ucywgeCA9PiB4LmFjdGl2ZUNlbGxJdGVtVGVtcGxhdGUsIHsgcG9zaXRpb25pbmc6IHRydWUgfSkuY3JlYXRlQmVoYXZpb3IodGhpcy5jZWxsc1BsYWNlaG9sZGVyKTtcbiAgICAgICAgICAgIC8qIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tbm9uLW51bGwtYXNzZXJ0aW9uICovXG4gICAgICAgICAgICB0aGlzLiRmYXN0Q29udHJvbGxlci5hZGRCZWhhdmlvcnMoW3RoaXMuY2VsbHNSZXBlYXRCZWhhdmlvcl0pO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcihcImNlbGwtZm9jdXNlZFwiLCB0aGlzLmhhbmRsZUNlbGxGb2N1cyk7XG4gICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcihldmVudEZvY3VzT3V0LCB0aGlzLmhhbmRsZUZvY3Vzb3V0KTtcbiAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKGV2ZW50S2V5RG93biwgdGhpcy5oYW5kbGVLZXlkb3duKTtcbiAgICAgICAgdGhpcy51cGRhdGVSb3dTdHlsZSgpO1xuICAgICAgICBpZiAodGhpcy5yZWZvY3VzT25Mb2FkKSB7XG4gICAgICAgICAgICAvLyBpZiBmb2N1cyB3YXMgb24gdGhlIHJvdyB3aGVuIGRhdGEgY2hhbmdlZCB0cnkgdG8gcmVmb2N1cyBvbiBzYW1lIGNlbGxcbiAgICAgICAgICAgIHRoaXMucmVmb2N1c09uTG9hZCA9IGZhbHNlO1xuICAgICAgICAgICAgaWYgKHRoaXMuY2VsbEVsZW1lbnRzLmxlbmd0aCA+IHRoaXMuZm9jdXNDb2x1bW5JbmRleCkge1xuICAgICAgICAgICAgICAgIHRoaXMuY2VsbEVsZW1lbnRzW3RoaXMuZm9jdXNDb2x1bW5JbmRleF0uZm9jdXMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBkaXNjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICAgICAgc3VwZXIuZGlzY29ubmVjdGVkQ2FsbGJhY2soKTtcbiAgICAgICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2VsbC1mb2N1c2VkXCIsIHRoaXMuaGFuZGxlQ2VsbEZvY3VzKTtcbiAgICAgICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKGV2ZW50Rm9jdXNPdXQsIHRoaXMuaGFuZGxlRm9jdXNvdXQpO1xuICAgICAgICB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnRLZXlEb3duLCB0aGlzLmhhbmRsZUtleWRvd24pO1xuICAgIH1cbiAgICBoYW5kbGVGb2N1c291dChlKSB7XG4gICAgICAgIGlmICghdGhpcy5jb250YWlucyhlLnRhcmdldCkpIHtcbiAgICAgICAgICAgIHRoaXMuaXNBY3RpdmVSb3cgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuZm9jdXNDb2x1bW5JbmRleCA9IDA7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaGFuZGxlQ2VsbEZvY3VzKGUpIHtcbiAgICAgICAgdGhpcy5pc0FjdGl2ZVJvdyA9IHRydWU7XG4gICAgICAgIHRoaXMuZm9jdXNDb2x1bW5JbmRleCA9IHRoaXMuY2VsbEVsZW1lbnRzLmluZGV4T2YoZS50YXJnZXQpO1xuICAgICAgICB0aGlzLiRlbWl0KFwicm93LWZvY3VzZWRcIiwgdGhpcyk7XG4gICAgfVxuICAgIGhhbmRsZUtleWRvd24oZSkge1xuICAgICAgICBpZiAoZS5kZWZhdWx0UHJldmVudGVkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgbGV0IG5ld0ZvY3VzQ29sdW1uSW5kZXggPSAwO1xuICAgICAgICBzd2l0Y2ggKGUua2V5KSB7XG4gICAgICAgICAgICBjYXNlIGtleUFycm93TGVmdDpcbiAgICAgICAgICAgICAgICAvLyBmb2N1cyBsZWZ0IG9uZSBjZWxsXG4gICAgICAgICAgICAgICAgbmV3Rm9jdXNDb2x1bW5JbmRleCA9IE1hdGgubWF4KDAsIHRoaXMuZm9jdXNDb2x1bW5JbmRleCAtIDEpO1xuICAgICAgICAgICAgICAgIHRoaXMuY2VsbEVsZW1lbnRzW25ld0ZvY3VzQ29sdW1uSW5kZXhdLmZvY3VzKCk7XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBrZXlBcnJvd1JpZ2h0OlxuICAgICAgICAgICAgICAgIC8vIGZvY3VzIHJpZ2h0IG9uZSBjZWxsXG4gICAgICAgICAgICAgICAgbmV3Rm9jdXNDb2x1bW5JbmRleCA9IE1hdGgubWluKHRoaXMuY2VsbEVsZW1lbnRzLmxlbmd0aCAtIDEsIHRoaXMuZm9jdXNDb2x1bW5JbmRleCArIDEpO1xuICAgICAgICAgICAgICAgIHRoaXMuY2VsbEVsZW1lbnRzW25ld0ZvY3VzQ29sdW1uSW5kZXhdLmZvY3VzKCk7XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBrZXlIb21lOlxuICAgICAgICAgICAgICAgIGlmICghZS5jdHJsS2V5KSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2VsbEVsZW1lbnRzWzBdLmZvY3VzKCk7XG4gICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIGtleUVuZDpcbiAgICAgICAgICAgICAgICBpZiAoIWUuY3RybEtleSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBmb2N1cyBsYXN0IGNlbGwgb2YgdGhlIHJvd1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNlbGxFbGVtZW50c1t0aGlzLmNlbGxFbGVtZW50cy5sZW5ndGggLSAxXS5mb2N1cygpO1xuICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfVxuICAgIHVwZGF0ZUl0ZW1UZW1wbGF0ZSgpIHtcbiAgICAgICAgdGhpcy5hY3RpdmVDZWxsSXRlbVRlbXBsYXRlID1cbiAgICAgICAgICAgIHRoaXMucm93VHlwZSA9PT0gRGF0YUdyaWRSb3dUeXBlcy5kZWZhdWx0ICYmXG4gICAgICAgICAgICAgICAgdGhpcy5jZWxsSXRlbVRlbXBsYXRlICE9PSB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICA/IHRoaXMuY2VsbEl0ZW1UZW1wbGF0ZVxuICAgICAgICAgICAgICAgIDogdGhpcy5yb3dUeXBlID09PSBEYXRhR3JpZFJvd1R5cGVzLmRlZmF1bHQgJiZcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jZWxsSXRlbVRlbXBsYXRlID09PSB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICAgICAgPyB0aGlzLmRlZmF1bHRDZWxsSXRlbVRlbXBsYXRlXG4gICAgICAgICAgICAgICAgICAgIDogdGhpcy5oZWFkZXJDZWxsSXRlbVRlbXBsYXRlICE9PSB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICAgICAgICAgID8gdGhpcy5oZWFkZXJDZWxsSXRlbVRlbXBsYXRlXG4gICAgICAgICAgICAgICAgICAgICAgICA6IHRoaXMuZGVmYXVsdEhlYWRlckNlbGxJdGVtVGVtcGxhdGU7XG4gICAgfVxufVxuX19kZWNvcmF0ZShbXG4gICAgYXR0cih7IGF0dHJpYnV0ZTogXCJncmlkLXRlbXBsYXRlLWNvbHVtbnNcIiB9KVxuXSwgRGF0YUdyaWRSb3cucHJvdG90eXBlLCBcImdyaWRUZW1wbGF0ZUNvbHVtbnNcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIGF0dHIoeyBhdHRyaWJ1dGU6IFwicm93LXR5cGVcIiB9KVxuXSwgRGF0YUdyaWRSb3cucHJvdG90eXBlLCBcInJvd1R5cGVcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIG9ic2VydmFibGVcbl0sIERhdGFHcmlkUm93LnByb3RvdHlwZSwgXCJyb3dEYXRhXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBvYnNlcnZhYmxlXG5dLCBEYXRhR3JpZFJvdy5wcm90b3R5cGUsIFwiY29sdW1uRGVmaW5pdGlvbnNcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIG9ic2VydmFibGVcbl0sIERhdGFHcmlkUm93LnByb3RvdHlwZSwgXCJjZWxsSXRlbVRlbXBsYXRlXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBvYnNlcnZhYmxlXG5dLCBEYXRhR3JpZFJvdy5wcm90b3R5cGUsIFwiaGVhZGVyQ2VsbEl0ZW1UZW1wbGF0ZVwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgb2JzZXJ2YWJsZVxuXSwgRGF0YUdyaWRSb3cucHJvdG90eXBlLCBcInJvd0luZGV4XCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBvYnNlcnZhYmxlXG5dLCBEYXRhR3JpZFJvdy5wcm90b3R5cGUsIFwiaXNBY3RpdmVSb3dcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIG9ic2VydmFibGVcbl0sIERhdGFHcmlkUm93LnByb3RvdHlwZSwgXCJhY3RpdmVDZWxsSXRlbVRlbXBsYXRlXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBvYnNlcnZhYmxlXG5dLCBEYXRhR3JpZFJvdy5wcm90b3R5cGUsIFwiZGVmYXVsdENlbGxJdGVtVGVtcGxhdGVcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIG9ic2VydmFibGVcbl0sIERhdGFHcmlkUm93LnByb3RvdHlwZSwgXCJkZWZhdWx0SGVhZGVyQ2VsbEl0ZW1UZW1wbGF0ZVwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgb2JzZXJ2YWJsZVxuXSwgRGF0YUdyaWRSb3cucHJvdG90eXBlLCBcImNlbGxFbGVtZW50c1wiLCB2b2lkIDApO1xuIiwiaW1wb3J0IHsgY2hpbGRyZW4sIGVsZW1lbnRzLCBodG1sLCBzbG90dGVkIH0gZnJvbSBcIkBtaWNyb3NvZnQvZmFzdC1lbGVtZW50XCI7XG5pbXBvcnQgeyBEYXRhR3JpZENlbGwgfSBmcm9tIFwiLi9kYXRhLWdyaWQtY2VsbC5qc1wiO1xuZnVuY3Rpb24gY3JlYXRlQ2VsbEl0ZW1UZW1wbGF0ZShjb250ZXh0KSB7XG4gICAgY29uc3QgY2VsbFRhZyA9IGNvbnRleHQudGFnRm9yKERhdGFHcmlkQ2VsbCk7XG4gICAgcmV0dXJuIGh0bWwgYFxuICAgIDwke2NlbGxUYWd9XG4gICAgICAgIGNlbGwtdHlwZT1cIiR7eCA9PiAoeC5pc1Jvd0hlYWRlciA/IFwicm93aGVhZGVyXCIgOiB1bmRlZmluZWQpfVwiXG4gICAgICAgIGdyaWQtY29sdW1uPVwiJHsoeCwgYykgPT4gYy5pbmRleCArIDF9XCJcbiAgICAgICAgOnJvd0RhdGE9XCIkeyh4LCBjKSA9PiBjLnBhcmVudC5yb3dEYXRhfVwiXG4gICAgICAgIDpjb2x1bW5EZWZpbml0aW9uPVwiJHt4ID0+IHh9XCJcbiAgICA+PC8ke2NlbGxUYWd9PlxuYDtcbn1cbmZ1bmN0aW9uIGNyZWF0ZUhlYWRlckNlbGxJdGVtVGVtcGxhdGUoY29udGV4dCkge1xuICAgIGNvbnN0IGNlbGxUYWcgPSBjb250ZXh0LnRhZ0ZvcihEYXRhR3JpZENlbGwpO1xuICAgIHJldHVybiBodG1sIGBcbiAgICA8JHtjZWxsVGFnfVxuICAgICAgICBjZWxsLXR5cGU9XCJjb2x1bW5oZWFkZXJcIlxuICAgICAgICBncmlkLWNvbHVtbj1cIiR7KHgsIGMpID0+IGMuaW5kZXggKyAxfVwiXG4gICAgICAgIDpjb2x1bW5EZWZpbml0aW9uPVwiJHt4ID0+IHh9XCJcbiAgICA+PC8ke2NlbGxUYWd9PlxuYDtcbn1cbi8qKlxuICogR2VuZXJhdGVzIGEgdGVtcGxhdGUgZm9yIHRoZSB7QGxpbmsgQG1pY3Jvc29mdC9mYXN0LWZvdW5kYXRpb24jRGF0YUdyaWRSb3d9IGNvbXBvbmVudCB1c2luZ1xuICogdGhlIHByb3ZpZGVkIHByZWZpeC5cbiAqXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjb25zdCBkYXRhR3JpZFJvd1RlbXBsYXRlID0gKGNvbnRleHQsIGRlZmluaXRpb24pID0+IHtcbiAgICBjb25zdCBjZWxsSXRlbVRlbXBsYXRlID0gY3JlYXRlQ2VsbEl0ZW1UZW1wbGF0ZShjb250ZXh0KTtcbiAgICBjb25zdCBoZWFkZXJDZWxsSXRlbVRlbXBsYXRlID0gY3JlYXRlSGVhZGVyQ2VsbEl0ZW1UZW1wbGF0ZShjb250ZXh0KTtcbiAgICByZXR1cm4gaHRtbCBgXG4gICAgICAgIDx0ZW1wbGF0ZVxuICAgICAgICAgICAgcm9sZT1cInJvd1wiXG4gICAgICAgICAgICBjbGFzcz1cIiR7eCA9PiAoeC5yb3dUeXBlICE9PSBcImRlZmF1bHRcIiA/IHgucm93VHlwZSA6IFwiXCIpfVwiXG4gICAgICAgICAgICA6ZGVmYXVsdENlbGxJdGVtVGVtcGxhdGU9XCIke2NlbGxJdGVtVGVtcGxhdGV9XCJcbiAgICAgICAgICAgIDpkZWZhdWx0SGVhZGVyQ2VsbEl0ZW1UZW1wbGF0ZT1cIiR7aGVhZGVyQ2VsbEl0ZW1UZW1wbGF0ZX1cIlxuICAgICAgICAgICAgJHtjaGlsZHJlbih7XG4gICAgICAgIHByb3BlcnR5OiBcImNlbGxFbGVtZW50c1wiLFxuICAgICAgICBmaWx0ZXI6IGVsZW1lbnRzKCdbcm9sZT1cImNlbGxcIl0sW3JvbGU9XCJncmlkY2VsbFwiXSxbcm9sZT1cImNvbHVtbmhlYWRlclwiXSxbcm9sZT1cInJvd2hlYWRlclwiXScpLFxuICAgIH0pfVxuICAgICAgICA+XG4gICAgICAgICAgICA8c2xvdCAke3Nsb3R0ZWQoXCJzbG90dGVkQ2VsbEVsZW1lbnRzXCIpfT48L3Nsb3Q+XG4gICAgICAgIDwvdGVtcGxhdGU+XG4gICAgYDtcbn07XG4iLCJpbXBvcnQgeyBfX2RlY29yYXRlIH0gZnJvbSBcInRzbGliXCI7XG5pbXBvcnQgeyBhdHRyLCBET00sIG9ic2VydmFibGUsIFJlcGVhdERpcmVjdGl2ZSwgfSBmcm9tIFwiQG1pY3Jvc29mdC9mYXN0LWVsZW1lbnRcIjtcbmltcG9ydCB7IGV2ZW50Rm9jdXMsIGV2ZW50Rm9jdXNPdXQsIGV2ZW50S2V5RG93biwga2V5QXJyb3dEb3duLCBrZXlBcnJvd1VwLCBrZXlFbmQsIGtleUhvbWUsIGtleVBhZ2VEb3duLCBrZXlQYWdlVXAsIH0gZnJvbSBcIkBtaWNyb3NvZnQvZmFzdC13ZWItdXRpbGl0aWVzXCI7XG5pbXBvcnQgeyBGb3VuZGF0aW9uRWxlbWVudCB9IGZyb20gXCIuLi9mb3VuZGF0aW9uLWVsZW1lbnQvZm91bmRhdGlvbi1lbGVtZW50LmpzXCI7XG5pbXBvcnQgeyBEYXRhR3JpZFJvd1R5cGVzLCBHZW5lcmF0ZUhlYWRlck9wdGlvbnMgfSBmcm9tIFwiLi9kYXRhLWdyaWQub3B0aW9ucy5qc1wiO1xuZXhwb3J0IHsgRGF0YUdyaWRSb3dUeXBlcywgR2VuZXJhdGVIZWFkZXJPcHRpb25zIH07XG4vKipcbiAqIEEgRGF0YSBHcmlkIEN1c3RvbSBIVE1MIEVsZW1lbnQuXG4gKlxuICogQHNsb3QgLSBUaGUgZGVmYXVsdCBzbG90IGZvciBjdXN0b20gcm93IGVsZW1lbnRzXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjbGFzcyBEYXRhR3JpZCBleHRlbmRzIEZvdW5kYXRpb25FbGVtZW50IHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFdoZW4gdHJ1ZSB0aGUgY29tcG9uZW50IHdpbGwgbm90IGFkZCBpdHNlbGYgdG8gdGhlIHRhYiBxdWV1ZS5cbiAgICAgICAgICogRGVmYXVsdCBpcyBmYWxzZS5cbiAgICAgICAgICpcbiAgICAgICAgICogQHB1YmxpY1xuICAgICAgICAgKiBAcmVtYXJrc1xuICAgICAgICAgKiBIVE1MIEF0dHJpYnV0ZTogbm8tdGFiYmluZ1xuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5ub1RhYmJpbmcgPSBmYWxzZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqICBXaGV0aGVyIHRoZSBncmlkIHNob3VsZCBhdXRvbWF0aWNhbGx5IGdlbmVyYXRlIGEgaGVhZGVyIHJvdyBhbmQgaXRzIHR5cGVcbiAgICAgICAgICpcbiAgICAgICAgICogQHB1YmxpY1xuICAgICAgICAgKiBAcmVtYXJrc1xuICAgICAgICAgKiBIVE1MIEF0dHJpYnV0ZTogZ2VuZXJhdGUtaGVhZGVyXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmdlbmVyYXRlSGVhZGVyID0gR2VuZXJhdGVIZWFkZXJPcHRpb25zLmRlZmF1bHQ7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgZGF0YSBiZWluZyBkaXNwbGF5ZWQgaW4gdGhlIGdyaWRcbiAgICAgICAgICpcbiAgICAgICAgICogQHB1YmxpY1xuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5yb3dzRGF0YSA9IFtdO1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIGNvbHVtbiBkZWZpbml0aW9ucyBvZiB0aGUgZ3JpZFxuICAgICAgICAgKlxuICAgICAgICAgKiBAcHVibGljXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmNvbHVtbkRlZmluaXRpb25zID0gbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBpbmRleCBvZiB0aGUgcm93IHRoYXQgd2lsbCByZWNlaXZlIGZvY3VzIHRoZSBuZXh0IHRpbWUgdGhlXG4gICAgICAgICAqIGdyaWQgaXMgZm9jdXNlZC4gVGhpcyB2YWx1ZSBjaGFuZ2VzIGFzIGZvY3VzIG1vdmVzIHRvIGRpZmZlcmVudFxuICAgICAgICAgKiByb3dzIHdpdGhpbiB0aGUgZ3JpZC4gIENoYW5naW5nIHRoaXMgdmFsdWUgd2hlbiBmb2N1cyBpcyBhbHJlYWR5XG4gICAgICAgICAqIHdpdGhpbiB0aGUgZ3JpZCBtb3ZlcyBmb2N1cyB0byB0aGUgc3BlY2lmaWVkIHJvdy5cbiAgICAgICAgICpcbiAgICAgICAgICogQHB1YmxpY1xuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5mb2N1c1Jvd0luZGV4ID0gMDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBpbmRleCBvZiB0aGUgY29sdW1uIHRoYXQgd2lsbCByZWNlaXZlIGZvY3VzIHRoZSBuZXh0IHRpbWUgdGhlXG4gICAgICAgICAqIGdyaWQgaXMgZm9jdXNlZC4gVGhpcyB2YWx1ZSBjaGFuZ2VzIGFzIGZvY3VzIG1vdmVzIHRvIGRpZmZlcmVudCByb3dzXG4gICAgICAgICAqIHdpdGhpbiB0aGUgZ3JpZC4gIENoYW5naW5nIHRoaXMgdmFsdWUgd2hlbiBmb2N1cyBpcyBhbHJlYWR5IHdpdGhpblxuICAgICAgICAgKiB0aGUgZ3JpZCBtb3ZlcyBmb2N1cyB0byB0aGUgc3BlY2lmaWVkIGNvbHVtbi5cbiAgICAgICAgICpcbiAgICAgICAgICogQHB1YmxpY1xuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5mb2N1c0NvbHVtbkluZGV4ID0gMDtcbiAgICAgICAgdGhpcy5yb3dzUGxhY2Vob2xkZXIgPSBudWxsO1xuICAgICAgICB0aGlzLmdlbmVyYXRlZEhlYWRlciA9IG51bGw7XG4gICAgICAgIHRoaXMuaXNVcGRhdGluZ0ZvY3VzID0gZmFsc2U7XG4gICAgICAgIHRoaXMucGVuZGluZ0ZvY3VzVXBkYXRlID0gZmFsc2U7XG4gICAgICAgIHRoaXMucm93aW5kZXhVcGRhdGVRdWV1ZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5jb2x1bW5EZWZpbml0aW9uc1N0YWxlID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5nZW5lcmF0ZWRHcmlkVGVtcGxhdGVDb2x1bW5zID0gXCJcIjtcbiAgICAgICAgdGhpcy5mb2N1c09uQ2VsbCA9IChyb3dJbmRleCwgY29sdW1uSW5kZXgsIHNjcm9sbEludG9WaWV3KSA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy5yb3dFbGVtZW50cy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICB0aGlzLmZvY3VzUm93SW5kZXggPSAwO1xuICAgICAgICAgICAgICAgIHRoaXMuZm9jdXNDb2x1bW5JbmRleCA9IDA7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgZm9jdXNSb3dJbmRleCA9IE1hdGgubWF4KDAsIE1hdGgubWluKHRoaXMucm93RWxlbWVudHMubGVuZ3RoIC0gMSwgcm93SW5kZXgpKTtcbiAgICAgICAgICAgIGNvbnN0IGZvY3VzUm93ID0gdGhpcy5yb3dFbGVtZW50c1tmb2N1c1Jvd0luZGV4XTtcbiAgICAgICAgICAgIGNvbnN0IGNlbGxzID0gZm9jdXNSb3cucXVlcnlTZWxlY3RvckFsbCgnW3JvbGU9XCJjZWxsXCJdLCBbcm9sZT1cImdyaWRjZWxsXCJdLCBbcm9sZT1cImNvbHVtbmhlYWRlclwiXSwgW3JvbGU9XCJyb3doZWFkZXJcIl0nKTtcbiAgICAgICAgICAgIGNvbnN0IGZvY3VzQ29sdW1uSW5kZXggPSBNYXRoLm1heCgwLCBNYXRoLm1pbihjZWxscy5sZW5ndGggLSAxLCBjb2x1bW5JbmRleCkpO1xuICAgICAgICAgICAgY29uc3QgZm9jdXNUYXJnZXQgPSBjZWxsc1tmb2N1c0NvbHVtbkluZGV4XTtcbiAgICAgICAgICAgIGlmIChzY3JvbGxJbnRvVmlldyAmJlxuICAgICAgICAgICAgICAgIHRoaXMuc2Nyb2xsSGVpZ2h0ICE9PSB0aGlzLmNsaWVudEhlaWdodCAmJlxuICAgICAgICAgICAgICAgICgoZm9jdXNSb3dJbmRleCA8IHRoaXMuZm9jdXNSb3dJbmRleCAmJiB0aGlzLnNjcm9sbFRvcCA+IDApIHx8XG4gICAgICAgICAgICAgICAgICAgIChmb2N1c1Jvd0luZGV4ID4gdGhpcy5mb2N1c1Jvd0luZGV4ICYmXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNjcm9sbFRvcCA8IHRoaXMuc2Nyb2xsSGVpZ2h0IC0gdGhpcy5jbGllbnRIZWlnaHQpKSkge1xuICAgICAgICAgICAgICAgIGZvY3VzVGFyZ2V0LnNjcm9sbEludG9WaWV3KHsgYmxvY2s6IFwiY2VudGVyXCIsIGlubGluZTogXCJjZW50ZXJcIiB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvY3VzVGFyZ2V0LmZvY3VzKCk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMub25DaGlsZExpc3RDaGFuZ2UgPSAobXV0YXRpb25zLCBcbiAgICAgICAgLyogZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnVzZWQtdmFycyAqL1xuICAgICAgICBvYnNlcnZlcikgPT4ge1xuICAgICAgICAgICAgaWYgKG11dGF0aW9ucyAmJiBtdXRhdGlvbnMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgbXV0YXRpb25zLmZvckVhY2goKG11dGF0aW9uKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIG11dGF0aW9uLmFkZGVkTm9kZXMuZm9yRWFjaCgobmV3Tm9kZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5ld05vZGUubm9kZVR5cGUgPT09IDEgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdOb2RlLmdldEF0dHJpYnV0ZShcInJvbGVcIikgPT09IFwicm93XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdOb2RlLmNvbHVtbkRlZmluaXRpb25zID0gdGhpcy5jb2x1bW5EZWZpbml0aW9ucztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdGhpcy5xdWV1ZVJvd0luZGV4VXBkYXRlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMucXVldWVSb3dJbmRleFVwZGF0ZSA9ICgpID0+IHtcbiAgICAgICAgICAgIGlmICghdGhpcy5yb3dpbmRleFVwZGF0ZVF1ZXVlZCkge1xuICAgICAgICAgICAgICAgIHRoaXMucm93aW5kZXhVcGRhdGVRdWV1ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIERPTS5xdWV1ZVVwZGF0ZSh0aGlzLnVwZGF0ZVJvd0luZGV4ZXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICB0aGlzLnVwZGF0ZVJvd0luZGV4ZXMgPSAoKSA9PiB7XG4gICAgICAgICAgICBsZXQgbmV3R3JpZFRlbXBsYXRlQ29sdW1ucyA9IHRoaXMuZ3JpZFRlbXBsYXRlQ29sdW1ucztcbiAgICAgICAgICAgIGlmIChuZXdHcmlkVGVtcGxhdGVDb2x1bW5zID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAvLyB0cnkgdG8gZ2VuZXJhdGUgY29sdW1ucyBiYXNlZCBvbiBtYW51YWwgcm93c1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmdlbmVyYXRlZEdyaWRUZW1wbGF0ZUNvbHVtbnMgPT09IFwiXCIgJiYgdGhpcy5yb3dFbGVtZW50cy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZpcnN0Um93ID0gdGhpcy5yb3dFbGVtZW50c1swXTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5nZW5lcmF0ZWRHcmlkVGVtcGxhdGVDb2x1bW5zID0gbmV3IEFycmF5KGZpcnN0Um93LmNlbGxFbGVtZW50cy5sZW5ndGgpXG4gICAgICAgICAgICAgICAgICAgICAgICAuZmlsbChcIjFmclwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmpvaW4oXCIgXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBuZXdHcmlkVGVtcGxhdGVDb2x1bW5zID0gdGhpcy5nZW5lcmF0ZWRHcmlkVGVtcGxhdGVDb2x1bW5zO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5yb3dFbGVtZW50cy5mb3JFYWNoKChlbGVtZW50LCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHRoaXNSb3cgPSBlbGVtZW50O1xuICAgICAgICAgICAgICAgIHRoaXNSb3cucm93SW5kZXggPSBpbmRleDtcbiAgICAgICAgICAgICAgICB0aGlzUm93LmdyaWRUZW1wbGF0ZUNvbHVtbnMgPSBuZXdHcmlkVGVtcGxhdGVDb2x1bW5zO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmNvbHVtbkRlZmluaXRpb25zU3RhbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpc1Jvdy5jb2x1bW5EZWZpbml0aW9ucyA9IHRoaXMuY29sdW1uRGVmaW5pdGlvbnM7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLnJvd2luZGV4VXBkYXRlUXVldWVkID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLmNvbHVtbkRlZmluaXRpb25zU3RhbGUgPSBmYWxzZTtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogIGdlbmVyYXRlcyBhIGdyaWRUZW1wbGF0ZUNvbHVtbnMgYmFzZWQgb24gY29sdW1uZGF0YSBhcnJheVxuICAgICAqL1xuICAgIHN0YXRpYyBnZW5lcmF0ZVRlbXBsYXRlQ29sdW1ucyhjb2x1bW5EZWZpbml0aW9ucykge1xuICAgICAgICBsZXQgdGVtcGxhdGVDb2x1bW5zID0gXCJcIjtcbiAgICAgICAgY29sdW1uRGVmaW5pdGlvbnMuZm9yRWFjaCgoY29sdW1uKSA9PiB7XG4gICAgICAgICAgICB0ZW1wbGF0ZUNvbHVtbnMgPSBgJHt0ZW1wbGF0ZUNvbHVtbnN9JHt0ZW1wbGF0ZUNvbHVtbnMgPT09IFwiXCIgPyBcIlwiIDogXCIgXCJ9JHtcIjFmclwifWA7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gdGVtcGxhdGVDb2x1bW5zO1xuICAgIH1cbiAgICBub1RhYmJpbmdDaGFuZ2VkKCkge1xuICAgICAgICBpZiAodGhpcy4kZmFzdENvbnRyb2xsZXIuaXNDb25uZWN0ZWQpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLm5vVGFiYmluZykge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0QXR0cmlidXRlKFwidGFiSW5kZXhcIiwgXCItMVwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0QXR0cmlidXRlKFwidGFiSW5kZXhcIiwgdGhpcy5jb250YWlucyhkb2N1bWVudC5hY3RpdmVFbGVtZW50KSB8fFxuICAgICAgICAgICAgICAgICAgICB0aGlzID09PSBkb2N1bWVudC5hY3RpdmVFbGVtZW50XG4gICAgICAgICAgICAgICAgICAgID8gXCItMVwiXG4gICAgICAgICAgICAgICAgICAgIDogXCIwXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGdlbmVyYXRlSGVhZGVyQ2hhbmdlZCgpIHtcbiAgICAgICAgaWYgKHRoaXMuJGZhc3RDb250cm9sbGVyLmlzQ29ubmVjdGVkKSB7XG4gICAgICAgICAgICB0aGlzLnRvZ2dsZUdlbmVyYXRlZEhlYWRlcigpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdyaWRUZW1wbGF0ZUNvbHVtbnNDaGFuZ2VkKCkge1xuICAgICAgICBpZiAodGhpcy4kZmFzdENvbnRyb2xsZXIuaXNDb25uZWN0ZWQpIHtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlUm93SW5kZXhlcygpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJvd3NEYXRhQ2hhbmdlZCgpIHtcbiAgICAgICAgaWYgKHRoaXMuY29sdW1uRGVmaW5pdGlvbnMgPT09IG51bGwgJiYgdGhpcy5yb3dzRGF0YS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICB0aGlzLmNvbHVtbkRlZmluaXRpb25zID0gRGF0YUdyaWQuZ2VuZXJhdGVDb2x1bW5zKHRoaXMucm93c0RhdGFbMF0pO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLiRmYXN0Q29udHJvbGxlci5pc0Nvbm5lY3RlZCkge1xuICAgICAgICAgICAgdGhpcy50b2dnbGVHZW5lcmF0ZWRIZWFkZXIoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjb2x1bW5EZWZpbml0aW9uc0NoYW5nZWQoKSB7XG4gICAgICAgIGlmICh0aGlzLmNvbHVtbkRlZmluaXRpb25zID09PSBudWxsKSB7XG4gICAgICAgICAgICB0aGlzLmdlbmVyYXRlZEdyaWRUZW1wbGF0ZUNvbHVtbnMgPSBcIlwiO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZ2VuZXJhdGVkR3JpZFRlbXBsYXRlQ29sdW1ucyA9IERhdGFHcmlkLmdlbmVyYXRlVGVtcGxhdGVDb2x1bW5zKHRoaXMuY29sdW1uRGVmaW5pdGlvbnMpO1xuICAgICAgICBpZiAodGhpcy4kZmFzdENvbnRyb2xsZXIuaXNDb25uZWN0ZWQpIHtcbiAgICAgICAgICAgIHRoaXMuY29sdW1uRGVmaW5pdGlvbnNTdGFsZSA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLnF1ZXVlUm93SW5kZXhVcGRhdGUoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBoZWFkZXJDZWxsSXRlbVRlbXBsYXRlQ2hhbmdlZCgpIHtcbiAgICAgICAgaWYgKHRoaXMuJGZhc3RDb250cm9sbGVyLmlzQ29ubmVjdGVkKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5nZW5lcmF0ZWRIZWFkZXIgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmdlbmVyYXRlZEhlYWRlci5oZWFkZXJDZWxsSXRlbVRlbXBsYXRlID0gdGhpcy5oZWFkZXJDZWxsSXRlbVRlbXBsYXRlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGZvY3VzUm93SW5kZXhDaGFuZ2VkKCkge1xuICAgICAgICBpZiAodGhpcy4kZmFzdENvbnRyb2xsZXIuaXNDb25uZWN0ZWQpIHtcbiAgICAgICAgICAgIHRoaXMucXVldWVGb2N1c1VwZGF0ZSgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZvY3VzQ29sdW1uSW5kZXhDaGFuZ2VkKCkge1xuICAgICAgICBpZiAodGhpcy4kZmFzdENvbnRyb2xsZXIuaXNDb25uZWN0ZWQpIHtcbiAgICAgICAgICAgIHRoaXMucXVldWVGb2N1c1VwZGF0ZSgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIGNvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgICAgICBzdXBlci5jb25uZWN0ZWRDYWxsYmFjaygpO1xuICAgICAgICBpZiAodGhpcy5yb3dJdGVtVGVtcGxhdGUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhpcy5yb3dJdGVtVGVtcGxhdGUgPSB0aGlzLmRlZmF1bHRSb3dJdGVtVGVtcGxhdGU7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5yb3dzUGxhY2Vob2xkZXIgPSBkb2N1bWVudC5jcmVhdGVDb21tZW50KFwiXCIpO1xuICAgICAgICB0aGlzLmFwcGVuZENoaWxkKHRoaXMucm93c1BsYWNlaG9sZGVyKTtcbiAgICAgICAgdGhpcy50b2dnbGVHZW5lcmF0ZWRIZWFkZXIoKTtcbiAgICAgICAgdGhpcy5yb3dzUmVwZWF0QmVoYXZpb3IgPSBuZXcgUmVwZWF0RGlyZWN0aXZlKHggPT4geC5yb3dzRGF0YSwgeCA9PiB4LnJvd0l0ZW1UZW1wbGF0ZSwgeyBwb3NpdGlvbmluZzogdHJ1ZSB9KS5jcmVhdGVCZWhhdmlvcih0aGlzLnJvd3NQbGFjZWhvbGRlcik7XG4gICAgICAgIC8qIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tbm9uLW51bGwtYXNzZXJ0aW9uICovXG4gICAgICAgIHRoaXMuJGZhc3RDb250cm9sbGVyLmFkZEJlaGF2aW9ycyhbdGhpcy5yb3dzUmVwZWF0QmVoYXZpb3JdKTtcbiAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKFwicm93LWZvY3VzZWRcIiwgdGhpcy5oYW5kbGVSb3dGb2N1cyk7XG4gICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcihldmVudEZvY3VzLCB0aGlzLmhhbmRsZUZvY3VzKTtcbiAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKGV2ZW50S2V5RG93biwgdGhpcy5oYW5kbGVLZXlkb3duKTtcbiAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKGV2ZW50Rm9jdXNPdXQsIHRoaXMuaGFuZGxlRm9jdXNPdXQpO1xuICAgICAgICB0aGlzLm9ic2VydmVyID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIodGhpcy5vbkNoaWxkTGlzdENoYW5nZSk7XG4gICAgICAgIC8vIG9ubHkgb2JzZXJ2ZSBpZiBub2RlcyBhcmUgYWRkZWQgb3IgcmVtb3ZlZFxuICAgICAgICB0aGlzLm9ic2VydmVyLm9ic2VydmUodGhpcywgeyBjaGlsZExpc3Q6IHRydWUgfSk7XG4gICAgICAgIGlmICh0aGlzLm5vVGFiYmluZykge1xuICAgICAgICAgICAgdGhpcy5zZXRBdHRyaWJ1dGUoXCJ0YWJpbmRleFwiLCBcIi0xXCIpO1xuICAgICAgICB9XG4gICAgICAgIERPTS5xdWV1ZVVwZGF0ZSh0aGlzLnF1ZXVlUm93SW5kZXhVcGRhdGUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBkaXNjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICAgICAgc3VwZXIuZGlzY29ubmVjdGVkQ2FsbGJhY2soKTtcbiAgICAgICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKFwicm93LWZvY3VzZWRcIiwgdGhpcy5oYW5kbGVSb3dGb2N1cyk7XG4gICAgICAgIHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudEZvY3VzLCB0aGlzLmhhbmRsZUZvY3VzKTtcbiAgICAgICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKGV2ZW50S2V5RG93biwgdGhpcy5oYW5kbGVLZXlkb3duKTtcbiAgICAgICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKGV2ZW50Rm9jdXNPdXQsIHRoaXMuaGFuZGxlRm9jdXNPdXQpO1xuICAgICAgICAvLyBkaXNjb25uZWN0IG9ic2VydmVyXG4gICAgICAgIHRoaXMub2JzZXJ2ZXIuZGlzY29ubmVjdCgpO1xuICAgICAgICB0aGlzLnJvd3NQbGFjZWhvbGRlciA9IG51bGw7XG4gICAgICAgIHRoaXMuZ2VuZXJhdGVkSGVhZGVyID0gbnVsbDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgaGFuZGxlUm93Rm9jdXMoZSkge1xuICAgICAgICB0aGlzLmlzVXBkYXRpbmdGb2N1cyA9IHRydWU7XG4gICAgICAgIGNvbnN0IGZvY3VzUm93ID0gZS50YXJnZXQ7XG4gICAgICAgIHRoaXMuZm9jdXNSb3dJbmRleCA9IHRoaXMucm93RWxlbWVudHMuaW5kZXhPZihmb2N1c1Jvdyk7XG4gICAgICAgIHRoaXMuZm9jdXNDb2x1bW5JbmRleCA9IGZvY3VzUm93LmZvY3VzQ29sdW1uSW5kZXg7XG4gICAgICAgIHRoaXMuc2V0QXR0cmlidXRlKFwidGFiSW5kZXhcIiwgXCItMVwiKTtcbiAgICAgICAgdGhpcy5pc1VwZGF0aW5nRm9jdXMgPSBmYWxzZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgaGFuZGxlRm9jdXMoZSkge1xuICAgICAgICB0aGlzLmZvY3VzT25DZWxsKHRoaXMuZm9jdXNSb3dJbmRleCwgdGhpcy5mb2N1c0NvbHVtbkluZGV4LCB0cnVlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgaGFuZGxlRm9jdXNPdXQoZSkge1xuICAgICAgICBpZiAoZS5yZWxhdGVkVGFyZ2V0ID09PSBudWxsIHx8ICF0aGlzLmNvbnRhaW5zKGUucmVsYXRlZFRhcmdldCkpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0QXR0cmlidXRlKFwidGFiSW5kZXhcIiwgdGhpcy5ub1RhYmJpbmcgPyBcIi0xXCIgOiBcIjBcIik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgaGFuZGxlS2V5ZG93bihlKSB7XG4gICAgICAgIGlmIChlLmRlZmF1bHRQcmV2ZW50ZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBsZXQgbmV3Rm9jdXNSb3dJbmRleDtcbiAgICAgICAgY29uc3QgbWF4SW5kZXggPSB0aGlzLnJvd0VsZW1lbnRzLmxlbmd0aCAtIDE7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRHcmlkQm90dG9tID0gdGhpcy5vZmZzZXRIZWlnaHQgKyB0aGlzLnNjcm9sbFRvcDtcbiAgICAgICAgY29uc3QgbGFzdFJvdyA9IHRoaXMucm93RWxlbWVudHNbbWF4SW5kZXhdO1xuICAgICAgICBzd2l0Y2ggKGUua2V5KSB7XG4gICAgICAgICAgICBjYXNlIGtleUFycm93VXA6XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIC8vIGZvY3VzIHVwIG9uZSByb3dcbiAgICAgICAgICAgICAgICB0aGlzLmZvY3VzT25DZWxsKHRoaXMuZm9jdXNSb3dJbmRleCAtIDEsIHRoaXMuZm9jdXNDb2x1bW5JbmRleCwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIGtleUFycm93RG93bjpcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgLy8gZm9jdXMgZG93biBvbmUgcm93XG4gICAgICAgICAgICAgICAgdGhpcy5mb2N1c09uQ2VsbCh0aGlzLmZvY3VzUm93SW5kZXggKyAxLCB0aGlzLmZvY3VzQ29sdW1uSW5kZXgsIHRydWUpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBrZXlQYWdlVXA6XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnJvd0VsZW1lbnRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmZvY3VzT25DZWxsKDAsIDAsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmZvY3VzUm93SW5kZXggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5mb2N1c09uQ2VsbCgwLCB0aGlzLmZvY3VzQ29sdW1uSW5kZXgsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBuZXdGb2N1c1Jvd0luZGV4ID0gdGhpcy5mb2N1c1Jvd0luZGV4IC0gMTtcbiAgICAgICAgICAgICAgICBmb3IgKG5ld0ZvY3VzUm93SW5kZXg7IG5ld0ZvY3VzUm93SW5kZXggPj0gMDsgbmV3Rm9jdXNSb3dJbmRleC0tKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRoaXNSb3cgPSB0aGlzLnJvd0VsZW1lbnRzW25ld0ZvY3VzUm93SW5kZXhdO1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpc1Jvdy5vZmZzZXRUb3AgPCB0aGlzLnNjcm9sbFRvcCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zY3JvbGxUb3AgPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNSb3cub2Zmc2V0VG9wICsgdGhpc1Jvdy5jbGllbnRIZWlnaHQgLSB0aGlzLmNsaWVudEhlaWdodDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuZm9jdXNPbkNlbGwobmV3Rm9jdXNSb3dJbmRleCwgdGhpcy5mb2N1c0NvbHVtbkluZGV4LCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIGtleVBhZ2VEb3duOlxuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5yb3dFbGVtZW50cy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5mb2N1c09uQ2VsbCgwLCAwLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBmb2N1cyBkb3duIG9uZSBcInBhZ2VcIlxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmZvY3VzUm93SW5kZXggPj0gbWF4SW5kZXggfHxcbiAgICAgICAgICAgICAgICAgICAgbGFzdFJvdy5vZmZzZXRUb3AgKyBsYXN0Um93Lm9mZnNldEhlaWdodCA8PSBjdXJyZW50R3JpZEJvdHRvbSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmZvY3VzT25DZWxsKG1heEluZGV4LCB0aGlzLmZvY3VzQ29sdW1uSW5kZXgsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBuZXdGb2N1c1Jvd0luZGV4ID0gdGhpcy5mb2N1c1Jvd0luZGV4ICsgMTtcbiAgICAgICAgICAgICAgICBmb3IgKG5ld0ZvY3VzUm93SW5kZXg7IG5ld0ZvY3VzUm93SW5kZXggPD0gbWF4SW5kZXg7IG5ld0ZvY3VzUm93SW5kZXgrKykge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB0aGlzUm93ID0gdGhpcy5yb3dFbGVtZW50c1tuZXdGb2N1c1Jvd0luZGV4XTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXNSb3cub2Zmc2V0VG9wICsgdGhpc1Jvdy5vZmZzZXRIZWlnaHQgPiBjdXJyZW50R3JpZEJvdHRvbSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHN0aWNreUhlYWRlck9mZnNldCA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5nZW5lcmF0ZUhlYWRlciA9PT0gR2VuZXJhdGVIZWFkZXJPcHRpb25zLnN0aWNreSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZ2VuZXJhdGVkSGVhZGVyICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RpY2t5SGVhZGVyT2Zmc2V0ID0gdGhpcy5nZW5lcmF0ZWRIZWFkZXIuY2xpZW50SGVpZ2h0O1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zY3JvbGxUb3AgPSB0aGlzUm93Lm9mZnNldFRvcCAtIHN0aWNreUhlYWRlck9mZnNldDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuZm9jdXNPbkNlbGwobmV3Rm9jdXNSb3dJbmRleCwgdGhpcy5mb2N1c0NvbHVtbkluZGV4LCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIGtleUhvbWU6XG4gICAgICAgICAgICAgICAgaWYgKGUuY3RybEtleSkge1xuICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgIC8vIGZvY3VzIGZpcnN0IGNlbGwgb2YgZmlyc3Qgcm93XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZm9jdXNPbkNlbGwoMCwgMCwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBrZXlFbmQ6XG4gICAgICAgICAgICAgICAgaWYgKGUuY3RybEtleSAmJiB0aGlzLmNvbHVtbkRlZmluaXRpb25zICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gZm9jdXMgbGFzdCBjZWxsIG9mIGxhc3Qgcm93XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZm9jdXNPbkNlbGwodGhpcy5yb3dFbGVtZW50cy5sZW5ndGggLSAxLCB0aGlzLmNvbHVtbkRlZmluaXRpb25zLmxlbmd0aCAtIDEsIHRydWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cbiAgICBxdWV1ZUZvY3VzVXBkYXRlKCkge1xuICAgICAgICBpZiAodGhpcy5pc1VwZGF0aW5nRm9jdXMgJiZcbiAgICAgICAgICAgICh0aGlzLmNvbnRhaW5zKGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQpIHx8IHRoaXMgPT09IGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMucGVuZGluZ0ZvY3VzVXBkYXRlID09PSBmYWxzZSkge1xuICAgICAgICAgICAgdGhpcy5wZW5kaW5nRm9jdXNVcGRhdGUgPSB0cnVlO1xuICAgICAgICAgICAgRE9NLnF1ZXVlVXBkYXRlKCgpID0+IHRoaXMudXBkYXRlRm9jdXMoKSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdXBkYXRlRm9jdXMoKSB7XG4gICAgICAgIHRoaXMucGVuZGluZ0ZvY3VzVXBkYXRlID0gZmFsc2U7XG4gICAgICAgIHRoaXMuZm9jdXNPbkNlbGwodGhpcy5mb2N1c1Jvd0luZGV4LCB0aGlzLmZvY3VzQ29sdW1uSW5kZXgsIHRydWUpO1xuICAgIH1cbiAgICB0b2dnbGVHZW5lcmF0ZWRIZWFkZXIoKSB7XG4gICAgICAgIGlmICh0aGlzLmdlbmVyYXRlZEhlYWRlciAhPT0gbnVsbCkge1xuICAgICAgICAgICAgdGhpcy5yZW1vdmVDaGlsZCh0aGlzLmdlbmVyYXRlZEhlYWRlcik7XG4gICAgICAgICAgICB0aGlzLmdlbmVyYXRlZEhlYWRlciA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuZ2VuZXJhdGVIZWFkZXIgIT09IEdlbmVyYXRlSGVhZGVyT3B0aW9ucy5ub25lICYmXG4gICAgICAgICAgICB0aGlzLnJvd3NEYXRhLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGNvbnN0IGdlbmVyYXRlZEhlYWRlckVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KHRoaXMucm93RWxlbWVudFRhZyk7XG4gICAgICAgICAgICB0aGlzLmdlbmVyYXRlZEhlYWRlciA9IGdlbmVyYXRlZEhlYWRlckVsZW1lbnQ7XG4gICAgICAgICAgICB0aGlzLmdlbmVyYXRlZEhlYWRlci5jb2x1bW5EZWZpbml0aW9ucyA9IHRoaXMuY29sdW1uRGVmaW5pdGlvbnM7XG4gICAgICAgICAgICB0aGlzLmdlbmVyYXRlZEhlYWRlci5ncmlkVGVtcGxhdGVDb2x1bW5zID0gdGhpcy5ncmlkVGVtcGxhdGVDb2x1bW5zO1xuICAgICAgICAgICAgdGhpcy5nZW5lcmF0ZWRIZWFkZXIucm93VHlwZSA9XG4gICAgICAgICAgICAgICAgdGhpcy5nZW5lcmF0ZUhlYWRlciA9PT0gR2VuZXJhdGVIZWFkZXJPcHRpb25zLnN0aWNreVxuICAgICAgICAgICAgICAgICAgICA/IERhdGFHcmlkUm93VHlwZXMuc3RpY2t5SGVhZGVyXG4gICAgICAgICAgICAgICAgICAgIDogRGF0YUdyaWRSb3dUeXBlcy5oZWFkZXI7XG4gICAgICAgICAgICBpZiAodGhpcy5maXJzdENoaWxkICE9PSBudWxsIHx8IHRoaXMucm93c1BsYWNlaG9sZGVyICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5pbnNlcnRCZWZvcmUoZ2VuZXJhdGVkSGVhZGVyRWxlbWVudCwgdGhpcy5maXJzdENoaWxkICE9PSBudWxsID8gdGhpcy5maXJzdENoaWxkIDogdGhpcy5yb3dzUGxhY2Vob2xkZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgfVxufVxuLyoqXG4gKiAgZ2VuZXJhdGVzIGEgYmFzaWMgY29sdW1uIGRlZmluaXRpb24gYnkgZXhhbWluaW5nIHNhbXBsZSByb3cgZGF0YVxuICovXG5EYXRhR3JpZC5nZW5lcmF0ZUNvbHVtbnMgPSAocm93KSA9PiB7XG4gICAgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHJvdykubWFwKChwcm9wZXJ0eSwgaW5kZXgpID0+IHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGNvbHVtbkRhdGFLZXk6IHByb3BlcnR5LFxuICAgICAgICAgICAgZ3JpZENvbHVtbjogYCR7aW5kZXh9YCxcbiAgICAgICAgfTtcbiAgICB9KTtcbn07XG5fX2RlY29yYXRlKFtcbiAgICBhdHRyKHsgYXR0cmlidXRlOiBcIm5vLXRhYmJpbmdcIiwgbW9kZTogXCJib29sZWFuXCIgfSlcbl0sIERhdGFHcmlkLnByb3RvdHlwZSwgXCJub1RhYmJpbmdcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIGF0dHIoeyBhdHRyaWJ1dGU6IFwiZ2VuZXJhdGUtaGVhZGVyXCIgfSlcbl0sIERhdGFHcmlkLnByb3RvdHlwZSwgXCJnZW5lcmF0ZUhlYWRlclwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgYXR0cih7IGF0dHJpYnV0ZTogXCJncmlkLXRlbXBsYXRlLWNvbHVtbnNcIiB9KVxuXSwgRGF0YUdyaWQucHJvdG90eXBlLCBcImdyaWRUZW1wbGF0ZUNvbHVtbnNcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIG9ic2VydmFibGVcbl0sIERhdGFHcmlkLnByb3RvdHlwZSwgXCJyb3dzRGF0YVwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgb2JzZXJ2YWJsZVxuXSwgRGF0YUdyaWQucHJvdG90eXBlLCBcImNvbHVtbkRlZmluaXRpb25zXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBvYnNlcnZhYmxlXG5dLCBEYXRhR3JpZC5wcm90b3R5cGUsIFwicm93SXRlbVRlbXBsYXRlXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBvYnNlcnZhYmxlXG5dLCBEYXRhR3JpZC5wcm90b3R5cGUsIFwiY2VsbEl0ZW1UZW1wbGF0ZVwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgb2JzZXJ2YWJsZVxuXSwgRGF0YUdyaWQucHJvdG90eXBlLCBcImhlYWRlckNlbGxJdGVtVGVtcGxhdGVcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIG9ic2VydmFibGVcbl0sIERhdGFHcmlkLnByb3RvdHlwZSwgXCJmb2N1c1Jvd0luZGV4XCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBvYnNlcnZhYmxlXG5dLCBEYXRhR3JpZC5wcm90b3R5cGUsIFwiZm9jdXNDb2x1bW5JbmRleFwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgb2JzZXJ2YWJsZVxuXSwgRGF0YUdyaWQucHJvdG90eXBlLCBcImRlZmF1bHRSb3dJdGVtVGVtcGxhdGVcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIG9ic2VydmFibGVcbl0sIERhdGFHcmlkLnByb3RvdHlwZSwgXCJyb3dFbGVtZW50VGFnXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBvYnNlcnZhYmxlXG5dLCBEYXRhR3JpZC5wcm90b3R5cGUsIFwicm93RWxlbWVudHNcIiwgdm9pZCAwKTtcbiIsIi8qKlxuICogRW51bWVyYXRlcyB0aGUgZGF0YSBncmlkIGF1dG8gZ2VuZXJhdGVkIGhlYWRlciBvcHRpb25zXG4gKiBkZWZhdWx0IG9wdGlvbiBnZW5lcmF0ZXMgYSBub24tc3RpY2t5IGhlYWRlciByb3dcbiAqXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjb25zdCBHZW5lcmF0ZUhlYWRlck9wdGlvbnMgPSB7XG4gICAgbm9uZTogXCJub25lXCIsXG4gICAgZGVmYXVsdDogXCJkZWZhdWx0XCIsXG4gICAgc3RpY2t5OiBcInN0aWNreVwiLFxufTtcbi8qKlxuICogRW51bWVyYXRlcyBwb3NzaWJsZSBkYXRhIGdyaWQgY2VsbCB0eXBlcy5cbiAqXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjb25zdCBEYXRhR3JpZENlbGxUeXBlcyA9IHtcbiAgICBkZWZhdWx0OiBcImRlZmF1bHRcIixcbiAgICBjb2x1bW5IZWFkZXI6IFwiY29sdW1uaGVhZGVyXCIsXG4gICAgcm93SGVhZGVyOiBcInJvd2hlYWRlclwiLFxufTtcbi8qKlxuICogRW51bWVyYXRlcyBwb3NzaWJsZSBkYXRhIGdyaWQgcm93IHR5cGVzXG4gKlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgY29uc3QgRGF0YUdyaWRSb3dUeXBlcyA9IHtcbiAgICBkZWZhdWx0OiBcImRlZmF1bHRcIixcbiAgICBoZWFkZXI6IFwiaGVhZGVyXCIsXG4gICAgc3RpY2t5SGVhZGVyOiBcInN0aWNreS1oZWFkZXJcIixcbn07XG4iLCJpbXBvcnQgeyBjaGlsZHJlbiwgZWxlbWVudHMsIGh0bWwgfSBmcm9tIFwiQG1pY3Jvc29mdC9mYXN0LWVsZW1lbnRcIjtcbmltcG9ydCB7IERhdGFHcmlkUm93IH0gZnJvbSBcIi4vZGF0YS1ncmlkLXJvdy5qc1wiO1xuZnVuY3Rpb24gY3JlYXRlUm93SXRlbVRlbXBsYXRlKGNvbnRleHQpIHtcbiAgICBjb25zdCByb3dUYWcgPSBjb250ZXh0LnRhZ0ZvcihEYXRhR3JpZFJvdyk7XG4gICAgcmV0dXJuIGh0bWwgYFxuICAgIDwke3Jvd1RhZ31cbiAgICAgICAgOnJvd0RhdGE9XCIke3ggPT4geH1cIlxuICAgICAgICA6Y2VsbEl0ZW1UZW1wbGF0ZT1cIiR7KHgsIGMpID0+IGMucGFyZW50LmNlbGxJdGVtVGVtcGxhdGV9XCJcbiAgICAgICAgOmhlYWRlckNlbGxJdGVtVGVtcGxhdGU9XCIkeyh4LCBjKSA9PiBjLnBhcmVudC5oZWFkZXJDZWxsSXRlbVRlbXBsYXRlfVwiXG4gICAgPjwvJHtyb3dUYWd9PlxuYDtcbn1cbi8qKlxuICogR2VuZXJhdGVzIGEgdGVtcGxhdGUgZm9yIHRoZSB7QGxpbmsgQG1pY3Jvc29mdC9mYXN0LWZvdW5kYXRpb24jRGF0YUdyaWR9IGNvbXBvbmVudCB1c2luZ1xuICogdGhlIHByb3ZpZGVkIHByZWZpeC5cbiAqXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjb25zdCBkYXRhR3JpZFRlbXBsYXRlID0gKGNvbnRleHQsIGRlZmluaXRpb24pID0+IHtcbiAgICBjb25zdCByb3dJdGVtVGVtcGxhdGUgPSBjcmVhdGVSb3dJdGVtVGVtcGxhdGUoY29udGV4dCk7XG4gICAgY29uc3Qgcm93VGFnID0gY29udGV4dC50YWdGb3IoRGF0YUdyaWRSb3cpO1xuICAgIHJldHVybiBodG1sIGBcbiAgICAgICAgPHRlbXBsYXRlXG4gICAgICAgICAgICByb2xlPVwiZ3JpZFwiXG4gICAgICAgICAgICB0YWJpbmRleD1cIjBcIlxuICAgICAgICAgICAgOnJvd0VsZW1lbnRUYWc9XCIkeygpID0+IHJvd1RhZ31cIlxuICAgICAgICAgICAgOmRlZmF1bHRSb3dJdGVtVGVtcGxhdGU9XCIke3Jvd0l0ZW1UZW1wbGF0ZX1cIlxuICAgICAgICAgICAgJHtjaGlsZHJlbih7XG4gICAgICAgIHByb3BlcnR5OiBcInJvd0VsZW1lbnRzXCIsXG4gICAgICAgIGZpbHRlcjogZWxlbWVudHMoXCJbcm9sZT1yb3ddXCIpLFxuICAgIH0pfVxuICAgICAgICA+XG4gICAgICAgICAgICA8c2xvdD48L3Nsb3Q+XG4gICAgICAgIDwvdGVtcGxhdGU+XG4gICAgYDtcbn07XG4iLCJleHBvcnQgKiBmcm9tIFwiLi9kYXRhLWdyaWQudGVtcGxhdGUuanNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL2RhdGEtZ3JpZC5qc1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vZGF0YS1ncmlkLXJvdy50ZW1wbGF0ZS5qc1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vZGF0YS1ncmlkLXJvdy5qc1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vZGF0YS1ncmlkLWNlbGwudGVtcGxhdGUuanNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL2RhdGEtZ3JpZC1jZWxsLmpzXCI7XG4iLCJpbXBvcnQgeyBFbGVtZW50U3R5bGVzLCB9IGZyb20gXCJAbWljcm9zb2Z0L2Zhc3QtZWxlbWVudFwiO1xuaW1wb3J0IHsgREksIFJlZ2lzdHJhdGlvbiB9IGZyb20gXCIuLi9kaS9kaS5qc1wiO1xuZnVuY3Rpb24gcHJlc2VudGF0aW9uS2V5RnJvbVRhZyh0YWdOYW1lKSB7XG4gICAgcmV0dXJuIGAke3RhZ05hbWUudG9Mb3dlckNhc2UoKX06cHJlc2VudGF0aW9uYDtcbn1cbmNvbnN0IHByZXNlbnRhdGlvblJlZ2lzdHJ5ID0gbmV3IE1hcCgpO1xuLyoqXG4gKiBBbiBBUEkgZ2F0ZXdheSB0byBjb21wb25lbnQgcHJlc2VudGF0aW9uIGZlYXR1cmVzLlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgY29uc3QgQ29tcG9uZW50UHJlc2VudGF0aW9uID0gT2JqZWN0LmZyZWV6ZSh7XG4gICAgLyoqXG4gICAgICogRGVmaW5lcyBhIGNvbXBvbmVudCBwcmVzZW50YXRpb24gZm9yIGFuIGVsZW1lbnQuXG4gICAgICogQHBhcmFtIHRhZ05hbWUgLSBUaGUgZWxlbWVudCBuYW1lIHRvIGRlZmluZSB0aGUgcHJlc2VudGF0aW9uIGZvci5cbiAgICAgKiBAcGFyYW0gcHJlc2VudGF0aW9uIC0gVGhlIHByZXNlbnRhdGlvbiB0aGF0IHdpbGwgYmUgYXBwbGllZCB0byBtYXRjaGluZyBlbGVtZW50cy5cbiAgICAgKiBAcGFyYW0gY29udGFpbmVyIC0gVGhlIGRlcGVuZGVuY3kgaW5qZWN0aW9uIGNvbnRhaW5lciB0byByZWdpc3RlciB0aGUgY29uZmlndXJhdGlvbiBpbi5cbiAgICAgKiBAcHVibGljXG4gICAgICovXG4gICAgZGVmaW5lKHRhZ05hbWUsIHByZXNlbnRhdGlvbiwgY29udGFpbmVyKSB7XG4gICAgICAgIGNvbnN0IGtleSA9IHByZXNlbnRhdGlvbktleUZyb21UYWcodGFnTmFtZSk7XG4gICAgICAgIGNvbnN0IGV4aXN0aW5nID0gcHJlc2VudGF0aW9uUmVnaXN0cnkuZ2V0KGtleSk7XG4gICAgICAgIGlmIChleGlzdGluZyA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgICBwcmVzZW50YXRpb25SZWdpc3RyeS5zZXQoa2V5LCBwcmVzZW50YXRpb24pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gZmFsc2UgaW5kaWNhdGVzIHRoYXQgd2UgaGF2ZSBtb3JlIHRoYW4gb25lIHByZXNlbnRhdGlvblxuICAgICAgICAgICAgLy8gcmVnaXN0ZXJlZCBmb3IgYSB0YWdOYW1lIGFuZCB3ZSBtdXN0IHJlc29sdmUgdGhyb3VnaCBESVxuICAgICAgICAgICAgcHJlc2VudGF0aW9uUmVnaXN0cnkuc2V0KGtleSwgZmFsc2UpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnRhaW5lci5yZWdpc3RlcihSZWdpc3RyYXRpb24uaW5zdGFuY2Uoa2V5LCBwcmVzZW50YXRpb24pKTtcbiAgICB9LFxuICAgIC8qKlxuICAgICAqIEZpbmRzIGEgY29tcG9uZW50IHByZXNlbnRhdGlvbiBmb3IgdGhlIHNwZWNpZmllZCBlbGVtZW50IG5hbWUsXG4gICAgICogc2VhcmNoaW5nIHRoZSBET00gaGllcmFyY2h5IHN0YXJ0aW5nIGZyb20gdGhlIHByb3ZpZGVkIGVsZW1lbnQuXG4gICAgICogQHBhcmFtIHRhZ05hbWUgLSBUaGUgbmFtZSBvZiB0aGUgZWxlbWVudCB0byBsb2NhdGUgdGhlIHByZXNlbnRhdGlvbiBmb3IuXG4gICAgICogQHBhcmFtIGVsZW1lbnQgLSBUaGUgZWxlbWVudCB0byBiZWdpbiB0aGUgc2VhcmNoIGZyb20uXG4gICAgICogQHJldHVybnMgVGhlIGNvbXBvbmVudCBwcmVzZW50YXRpb24gb3IgbnVsbCBpZiBub25lIGlzIGZvdW5kLlxuICAgICAqIEBwdWJsaWNcbiAgICAgKi9cbiAgICBmb3JUYWcodGFnTmFtZSwgZWxlbWVudCkge1xuICAgICAgICBjb25zdCBrZXkgPSBwcmVzZW50YXRpb25LZXlGcm9tVGFnKHRhZ05hbWUpO1xuICAgICAgICBjb25zdCBleGlzdGluZyA9IHByZXNlbnRhdGlvblJlZ2lzdHJ5LmdldChrZXkpO1xuICAgICAgICBpZiAoZXhpc3RpbmcgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICBjb25zdCBjb250YWluZXIgPSBESS5maW5kUmVzcG9uc2libGVDb250YWluZXIoZWxlbWVudCk7XG4gICAgICAgICAgICByZXR1cm4gY29udGFpbmVyLmdldChrZXkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBleGlzdGluZyB8fCBudWxsO1xuICAgIH0sXG59KTtcbi8qKlxuICogVGhlIGRlZmF1bHQgaW1wbGVtZW50YXRpb24gb2YgQ29tcG9uZW50UHJlc2VudGF0aW9uLCB1c2VkIGJ5IEZvdW5kYXRpb25FbGVtZW50LlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgY2xhc3MgRGVmYXVsdENvbXBvbmVudFByZXNlbnRhdGlvbiB7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBpbnN0YW5jZSBvZiBEZWZhdWx0Q29tcG9uZW50UHJlc2VudGF0aW9uLlxuICAgICAqIEBwYXJhbSB0ZW1wbGF0ZSAtIFRoZSB0ZW1wbGF0ZSB0byBhcHBseSB0byB0aGUgZWxlbWVudC5cbiAgICAgKiBAcGFyYW0gc3R5bGVzIC0gVGhlIHN0eWxlcyB0byBhcHBseSB0byB0aGUgZWxlbWVudC5cbiAgICAgKiBAcHVibGljXG4gICAgICovXG4gICAgY29uc3RydWN0b3IodGVtcGxhdGUsIHN0eWxlcykge1xuICAgICAgICB0aGlzLnRlbXBsYXRlID0gdGVtcGxhdGUgfHwgbnVsbDtcbiAgICAgICAgdGhpcy5zdHlsZXMgPVxuICAgICAgICAgICAgc3R5bGVzID09PSB2b2lkIDBcbiAgICAgICAgICAgICAgICA/IG51bGxcbiAgICAgICAgICAgICAgICA6IEFycmF5LmlzQXJyYXkoc3R5bGVzKVxuICAgICAgICAgICAgICAgICAgICA/IEVsZW1lbnRTdHlsZXMuY3JlYXRlKHN0eWxlcylcbiAgICAgICAgICAgICAgICAgICAgOiBzdHlsZXMgaW5zdGFuY2VvZiBFbGVtZW50U3R5bGVzXG4gICAgICAgICAgICAgICAgICAgICAgICA/IHN0eWxlc1xuICAgICAgICAgICAgICAgICAgICAgICAgOiBFbGVtZW50U3R5bGVzLmNyZWF0ZShbc3R5bGVzXSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFwcGxpZXMgdGhlIHByZXNlbnRhdGlvbiBkZXRhaWxzIHRvIHRoZSBzcGVjaWZpZWQgZWxlbWVudC5cbiAgICAgKiBAcGFyYW0gZWxlbWVudCAtIFRoZSBlbGVtZW50IHRvIGFwcGx5IHRoZSBwcmVzZW50YXRpb24gZGV0YWlscyB0by5cbiAgICAgKiBAcHVibGljXG4gICAgICovXG4gICAgYXBwbHlUbyhlbGVtZW50KSB7XG4gICAgICAgIGNvbnN0IGNvbnRyb2xsZXIgPSBlbGVtZW50LiRmYXN0Q29udHJvbGxlcjtcbiAgICAgICAgaWYgKGNvbnRyb2xsZXIudGVtcGxhdGUgPT09IG51bGwpIHtcbiAgICAgICAgICAgIGNvbnRyb2xsZXIudGVtcGxhdGUgPSB0aGlzLnRlbXBsYXRlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjb250cm9sbGVyLnN0eWxlcyA9PT0gbnVsbCkge1xuICAgICAgICAgICAgY29udHJvbGxlci5zdHlsZXMgPSB0aGlzLnN0eWxlcztcbiAgICAgICAgfVxuICAgIH1cbn1cbiIsImltcG9ydCB7IEZBU1RFbGVtZW50RGVmaW5pdGlvbiB9IGZyb20gXCJAbWljcm9zb2Z0L2Zhc3QtZWxlbWVudFwiO1xuaW1wb3J0IHsgRm91bmRhdGlvbkVsZW1lbnQgfSBmcm9tIFwiLi4vZm91bmRhdGlvbi1lbGVtZW50L2ZvdW5kYXRpb24tZWxlbWVudC5qc1wiO1xuaW1wb3J0IHsgREksIFJlZ2lzdHJhdGlvbiB9IGZyb20gXCIuLi9kaS9kaS5qc1wiO1xuaW1wb3J0IHsgRGVzaWduVG9rZW4gfSBmcm9tIFwiLi4vZGVzaWduLXRva2VuL2Rlc2lnbi10b2tlbi5qc1wiO1xuaW1wb3J0IHsgQ29tcG9uZW50UHJlc2VudGF0aW9uIH0gZnJvbSBcIi4vY29tcG9uZW50LXByZXNlbnRhdGlvbi5qc1wiO1xuLyogZXNsaW50LWRpc2FibGUgQHR5cGVzY3JpcHQtZXNsaW50L25vLW5vbi1udWxsLWFzc2VydGlvbiAqL1xuLyoqXG4gKiBJbmRpY2F0ZXMgd2hhdCB0byBkbyB3aXRoIGFuIGFtYmlndW91cyAoZHVwbGljYXRlKSBlbGVtZW50LlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgY29uc3QgRWxlbWVudERpc2FtYmlndWF0aW9uID0gT2JqZWN0LmZyZWV6ZSh7XG4gICAgLyoqXG4gICAgICogU2tpcCBkZWZpbmluZyB0aGUgZWxlbWVudCBidXQgc3RpbGwgY2FsbCB0aGUgcHJvdmlkZWQgY2FsbGJhY2sgcGFzc2VkXG4gICAgICogdG8gRGVzaWduU3lzdGVtUmVnaXN0cmF0aW9uQ29udGV4dC50cnlEZWZpbmVFbGVtZW50XG4gICAgICovXG4gICAgZGVmaW5pdGlvbkNhbGxiYWNrT25seTogbnVsbCxcbiAgICAvKipcbiAgICAgKiBJZ25vcmUgdGhlIGR1cGxpY2F0ZSBlbGVtZW50IGVudGlyZWx5LlxuICAgICAqL1xuICAgIGlnbm9yZUR1cGxpY2F0ZTogU3ltYm9sKCksXG59KTtcbmNvbnN0IGVsZW1lbnRUeXBlc0J5VGFnID0gbmV3IE1hcCgpO1xuY29uc3QgZWxlbWVudFRhZ3NCeVR5cGUgPSBuZXcgTWFwKCk7XG5sZXQgcm9vdERlc2lnblN5c3RlbSA9IG51bGw7XG5jb25zdCBkZXNpZ25TeXN0ZW1LZXkgPSBESS5jcmVhdGVJbnRlcmZhY2UoeCA9PiB4LmNhY2hlZENhbGxiYWNrKGhhbmRsZXIgPT4ge1xuICAgIGlmIChyb290RGVzaWduU3lzdGVtID09PSBudWxsKSB7XG4gICAgICAgIHJvb3REZXNpZ25TeXN0ZW0gPSBuZXcgRGVmYXVsdERlc2lnblN5c3RlbShudWxsLCBoYW5kbGVyKTtcbiAgICB9XG4gICAgcmV0dXJuIHJvb3REZXNpZ25TeXN0ZW07XG59KSk7XG4vKipcbiAqIEFuIEFQSSBnYXRld2F5IHRvIGRlc2lnbiBzeXN0ZW0gZmVhdHVyZXMuXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjb25zdCBEZXNpZ25TeXN0ZW0gPSBPYmplY3QuZnJlZXplKHtcbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBIVE1MIGVsZW1lbnQgbmFtZSB0aGF0IHRoZSB0eXBlIGlzIGRlZmluZWQgYXMuXG4gICAgICogQHBhcmFtIHR5cGUgLSBUaGUgdHlwZSB0byBsb29rdXAuXG4gICAgICogQHB1YmxpY1xuICAgICAqL1xuICAgIHRhZ0Zvcih0eXBlKSB7XG4gICAgICAgIHJldHVybiBlbGVtZW50VGFnc0J5VHlwZS5nZXQodHlwZSk7XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBTZWFyY2hlcyB0aGUgRE9NIGhpZXJhcmNoeSBmb3IgdGhlIGRlc2lnbiBzeXN0ZW0gdGhhdCBpcyByZXNwb25zaWJsZVxuICAgICAqIGZvciB0aGUgcHJvdmlkZWQgZWxlbWVudC5cbiAgICAgKiBAcGFyYW0gZWxlbWVudCAtIFRoZSBlbGVtZW50IHRvIGxvY2F0ZSB0aGUgZGVzaWduIHN5c3RlbSBmb3IuXG4gICAgICogQHJldHVybnMgVGhlIGxvY2F0ZWQgZGVzaWduIHN5c3RlbS5cbiAgICAgKiBAcHVibGljXG4gICAgICovXG4gICAgcmVzcG9uc2libGVGb3IoZWxlbWVudCkge1xuICAgICAgICBjb25zdCBvd25lZCA9IGVsZW1lbnQuJCRkZXNpZ25TeXN0ZW0kJDtcbiAgICAgICAgaWYgKG93bmVkKSB7XG4gICAgICAgICAgICByZXR1cm4gb3duZWQ7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY29udGFpbmVyID0gREkuZmluZFJlc3BvbnNpYmxlQ29udGFpbmVyKGVsZW1lbnQpO1xuICAgICAgICByZXR1cm4gY29udGFpbmVyLmdldChkZXNpZ25TeXN0ZW1LZXkpO1xuICAgIH0sXG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgRGVzaWduU3lzdGVtIGlmIG9uZSBpcyBleHBsaWNpdGx5IGRlZmluZWQgb24gdGhlIHByb3ZpZGVkIGVsZW1lbnQ7XG4gICAgICogb3RoZXJ3aXNlIGNyZWF0ZXMgYSBkZXNpZ24gc3lzdGVtIGRlZmluZWQgZGlyZWN0bHkgb24gdGhlIGVsZW1lbnQuXG4gICAgICogQHBhcmFtIGVsZW1lbnQgLSBUaGUgZWxlbWVudCB0byBnZXQgb3IgY3JlYXRlIGEgZGVzaWduIHN5c3RlbSBmb3IuXG4gICAgICogQHJldHVybnMgVGhlIGRlc2lnbiBzeXN0ZW0uXG4gICAgICogQHB1YmxpY1xuICAgICAqL1xuICAgIGdldE9yQ3JlYXRlKG5vZGUpIHtcbiAgICAgICAgaWYgKCFub2RlKSB7XG4gICAgICAgICAgICBpZiAocm9vdERlc2lnblN5c3RlbSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHJvb3REZXNpZ25TeXN0ZW0gPSBESS5nZXRPckNyZWF0ZURPTUNvbnRhaW5lcigpLmdldChkZXNpZ25TeXN0ZW1LZXkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJvb3REZXNpZ25TeXN0ZW07XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgb3duZWQgPSBub2RlLiQkZGVzaWduU3lzdGVtJCQ7XG4gICAgICAgIGlmIChvd25lZCkge1xuICAgICAgICAgICAgcmV0dXJuIG93bmVkO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IERJLmdldE9yQ3JlYXRlRE9NQ29udGFpbmVyKG5vZGUpO1xuICAgICAgICBpZiAoY29udGFpbmVyLmhhcyhkZXNpZ25TeXN0ZW1LZXksIGZhbHNlKSkge1xuICAgICAgICAgICAgcmV0dXJuIGNvbnRhaW5lci5nZXQoZGVzaWduU3lzdGVtS2V5KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IHN5c3RlbSA9IG5ldyBEZWZhdWx0RGVzaWduU3lzdGVtKG5vZGUsIGNvbnRhaW5lcik7XG4gICAgICAgICAgICBjb250YWluZXIucmVnaXN0ZXIoUmVnaXN0cmF0aW9uLmluc3RhbmNlKGRlc2lnblN5c3RlbUtleSwgc3lzdGVtKSk7XG4gICAgICAgICAgICByZXR1cm4gc3lzdGVtO1xuICAgICAgICB9XG4gICAgfSxcbn0pO1xuZnVuY3Rpb24gZXh0cmFjdFRyeURlZmluZUVsZW1lbnRQYXJhbXMocGFyYW1zLCBlbGVtZW50RGVmaW5pdGlvblR5cGUsIGVsZW1lbnREZWZpbml0aW9uQ2FsbGJhY2spIHtcbiAgICBpZiAodHlwZW9mIHBhcmFtcyA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbmFtZTogcGFyYW1zLFxuICAgICAgICAgICAgdHlwZTogZWxlbWVudERlZmluaXRpb25UeXBlLFxuICAgICAgICAgICAgY2FsbGJhY2s6IGVsZW1lbnREZWZpbml0aW9uQ2FsbGJhY2ssXG4gICAgICAgIH07XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gcGFyYW1zO1xuICAgIH1cbn1cbmNsYXNzIERlZmF1bHREZXNpZ25TeXN0ZW0ge1xuICAgIGNvbnN0cnVjdG9yKG93bmVyLCBjb250YWluZXIpIHtcbiAgICAgICAgdGhpcy5vd25lciA9IG93bmVyO1xuICAgICAgICB0aGlzLmNvbnRhaW5lciA9IGNvbnRhaW5lcjtcbiAgICAgICAgdGhpcy5kZXNpZ25Ub2tlbnNJbml0aWFsaXplZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLnByZWZpeCA9IFwiZmFzdFwiO1xuICAgICAgICB0aGlzLnNoYWRvd1Jvb3RNb2RlID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLmRpc2FtYmlndWF0ZSA9ICgpID0+IEVsZW1lbnREaXNhbWJpZ3VhdGlvbi5kZWZpbml0aW9uQ2FsbGJhY2tPbmx5O1xuICAgICAgICBpZiAob3duZXIgIT09IG51bGwpIHtcbiAgICAgICAgICAgIG93bmVyLiQkZGVzaWduU3lzdGVtJCQgPSB0aGlzO1xuICAgICAgICB9XG4gICAgfVxuICAgIHdpdGhQcmVmaXgocHJlZml4KSB7XG4gICAgICAgIHRoaXMucHJlZml4ID0gcHJlZml4O1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgd2l0aFNoYWRvd1Jvb3RNb2RlKG1vZGUpIHtcbiAgICAgICAgdGhpcy5zaGFkb3dSb290TW9kZSA9IG1vZGU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICB3aXRoRWxlbWVudERpc2FtYmlndWF0aW9uKGNhbGxiYWNrKSB7XG4gICAgICAgIHRoaXMuZGlzYW1iaWd1YXRlID0gY2FsbGJhY2s7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICB3aXRoRGVzaWduVG9rZW5Sb290KHJvb3QpIHtcbiAgICAgICAgdGhpcy5kZXNpZ25Ub2tlblJvb3QgPSByb290O1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgcmVnaXN0ZXIoLi4ucmVnaXN0cmF0aW9ucykge1xuICAgICAgICBjb25zdCBjb250YWluZXIgPSB0aGlzLmNvbnRhaW5lcjtcbiAgICAgICAgY29uc3QgZWxlbWVudERlZmluaXRpb25FbnRyaWVzID0gW107XG4gICAgICAgIGNvbnN0IGRpc2FtYmlndWF0ZSA9IHRoaXMuZGlzYW1iaWd1YXRlO1xuICAgICAgICBjb25zdCBzaGFkb3dSb290TW9kZSA9IHRoaXMuc2hhZG93Um9vdE1vZGU7XG4gICAgICAgIGNvbnN0IGNvbnRleHQgPSB7XG4gICAgICAgICAgICBlbGVtZW50UHJlZml4OiB0aGlzLnByZWZpeCxcbiAgICAgICAgICAgIHRyeURlZmluZUVsZW1lbnQocGFyYW1zLCBlbGVtZW50RGVmaW5pdGlvblR5cGUsIGVsZW1lbnREZWZpbml0aW9uQ2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICBjb25zdCBleHRyYWN0ZWRQYXJhbXMgPSBleHRyYWN0VHJ5RGVmaW5lRWxlbWVudFBhcmFtcyhwYXJhbXMsIGVsZW1lbnREZWZpbml0aW9uVHlwZSwgZWxlbWVudERlZmluaXRpb25DYWxsYmFjayk7XG4gICAgICAgICAgICAgICAgY29uc3QgeyBuYW1lLCBjYWxsYmFjaywgYmFzZUNsYXNzIH0gPSBleHRyYWN0ZWRQYXJhbXM7XG4gICAgICAgICAgICAgICAgbGV0IHsgdHlwZSB9ID0gZXh0cmFjdGVkUGFyYW1zO1xuICAgICAgICAgICAgICAgIGxldCBlbGVtZW50TmFtZSA9IG5hbWU7XG4gICAgICAgICAgICAgICAgbGV0IHR5cGVGb3VuZEJ5TmFtZSA9IGVsZW1lbnRUeXBlc0J5VGFnLmdldChlbGVtZW50TmFtZSk7XG4gICAgICAgICAgICAgICAgbGV0IG5lZWRzRGVmaW5lID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB3aGlsZSAodHlwZUZvdW5kQnlOYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGRpc2FtYmlndWF0ZShlbGVtZW50TmFtZSwgdHlwZSwgdHlwZUZvdW5kQnlOYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgRWxlbWVudERpc2FtYmlndWF0aW9uLmlnbm9yZUR1cGxpY2F0ZTpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIEVsZW1lbnREaXNhbWJpZ3VhdGlvbi5kZWZpbml0aW9uQ2FsbGJhY2tPbmx5OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5lZWRzRGVmaW5lID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZUZvdW5kQnlOYW1lID0gdm9pZCAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50TmFtZSA9IHJlc3VsdDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlRm91bmRCeU5hbWUgPSBlbGVtZW50VHlwZXNCeVRhZy5nZXQoZWxlbWVudE5hbWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChuZWVkc0RlZmluZSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZWxlbWVudFRhZ3NCeVR5cGUuaGFzKHR5cGUpIHx8IHR5cGUgPT09IEZvdW5kYXRpb25FbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlID0gY2xhc3MgZXh0ZW5kcyB0eXBlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudFR5cGVzQnlUYWcuc2V0KGVsZW1lbnROYW1lLCB0eXBlKTtcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudFRhZ3NCeVR5cGUuc2V0KHR5cGUsIGVsZW1lbnROYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGJhc2VDbGFzcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudFRhZ3NCeVR5cGUuc2V0KGJhc2VDbGFzcywgZWxlbWVudE5hbWUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsZW1lbnREZWZpbml0aW9uRW50cmllcy5wdXNoKG5ldyBFbGVtZW50RGVmaW5pdGlvbkVudHJ5KGNvbnRhaW5lciwgZWxlbWVudE5hbWUsIHR5cGUsIHNoYWRvd1Jvb3RNb2RlLCBjYWxsYmFjaywgbmVlZHNEZWZpbmUpKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgICAgIGlmICghdGhpcy5kZXNpZ25Ub2tlbnNJbml0aWFsaXplZCkge1xuICAgICAgICAgICAgdGhpcy5kZXNpZ25Ub2tlbnNJbml0aWFsaXplZCA9IHRydWU7XG4gICAgICAgICAgICBpZiAodGhpcy5kZXNpZ25Ub2tlblJvb3QgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBEZXNpZ25Ub2tlbi5yZWdpc3RlclJvb3QodGhpcy5kZXNpZ25Ub2tlblJvb3QpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnRhaW5lci5yZWdpc3RlcldpdGhDb250ZXh0KGNvbnRleHQsIC4uLnJlZ2lzdHJhdGlvbnMpO1xuICAgICAgICBmb3IgKGNvbnN0IGVudHJ5IG9mIGVsZW1lbnREZWZpbml0aW9uRW50cmllcykge1xuICAgICAgICAgICAgZW50cnkuY2FsbGJhY2soZW50cnkpO1xuICAgICAgICAgICAgaWYgKGVudHJ5LndpbGxEZWZpbmUgJiYgZW50cnkuZGVmaW5pdGlvbiAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGVudHJ5LmRlZmluaXRpb24uZGVmaW5lKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxufVxuY2xhc3MgRWxlbWVudERlZmluaXRpb25FbnRyeSB7XG4gICAgY29uc3RydWN0b3IoY29udGFpbmVyLCBuYW1lLCB0eXBlLCBzaGFkb3dSb290TW9kZSwgY2FsbGJhY2ssIHdpbGxEZWZpbmUpIHtcbiAgICAgICAgdGhpcy5jb250YWluZXIgPSBjb250YWluZXI7XG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgICAgIHRoaXMudHlwZSA9IHR5cGU7XG4gICAgICAgIHRoaXMuc2hhZG93Um9vdE1vZGUgPSBzaGFkb3dSb290TW9kZTtcbiAgICAgICAgdGhpcy5jYWxsYmFjayA9IGNhbGxiYWNrO1xuICAgICAgICB0aGlzLndpbGxEZWZpbmUgPSB3aWxsRGVmaW5lO1xuICAgICAgICB0aGlzLmRlZmluaXRpb24gPSBudWxsO1xuICAgIH1cbiAgICBkZWZpbmVQcmVzZW50YXRpb24ocHJlc2VudGF0aW9uKSB7XG4gICAgICAgIENvbXBvbmVudFByZXNlbnRhdGlvbi5kZWZpbmUodGhpcy5uYW1lLCBwcmVzZW50YXRpb24sIHRoaXMuY29udGFpbmVyKTtcbiAgICB9XG4gICAgZGVmaW5lRWxlbWVudChkZWZpbml0aW9uKSB7XG4gICAgICAgIHRoaXMuZGVmaW5pdGlvbiA9IG5ldyBGQVNURWxlbWVudERlZmluaXRpb24odGhpcy50eXBlLCBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIGRlZmluaXRpb24pLCB7IG5hbWU6IHRoaXMubmFtZSB9KSk7XG4gICAgfVxuICAgIHRhZ0Zvcih0eXBlKSB7XG4gICAgICAgIHJldHVybiBEZXNpZ25TeXN0ZW0udGFnRm9yKHR5cGUpO1xuICAgIH1cbn1cbi8qIGVzbGludC1lbmFibGUgQHR5cGVzY3JpcHQtZXNsaW50L25vLW5vbi1udWxsLWFzc2VydGlvbiAqL1xuIiwiZXhwb3J0ICogZnJvbSBcIi4vZGVzaWduLXN5c3RlbS5qc1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vY29tcG9uZW50LXByZXNlbnRhdGlvbi5qc1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vcmVnaXN0cmF0aW9uLWNvbnRleHQuanNcIjtcbiIsImltcG9ydCB7IF9fZGVjb3JhdGUgfSBmcm9tIFwidHNsaWJcIjtcbmltcG9ydCB7IERPTSwgRWxlbWVudFN0eWxlcywgRkFTVEVsZW1lbnQsIG9ic2VydmFibGUsIE9ic2VydmFibGUsIH0gZnJvbSBcIkBtaWNyb3NvZnQvZmFzdC1lbGVtZW50XCI7XG5leHBvcnQgY29uc3QgZGVmYXVsdEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuZnVuY3Rpb24gaXNGYXN0RWxlbWVudChlbGVtZW50KSB7XG4gICAgcmV0dXJuIGVsZW1lbnQgaW5zdGFuY2VvZiBGQVNURWxlbWVudDtcbn1cbmNsYXNzIFF1ZXVlZFN0eWxlU2hlZXRUYXJnZXQge1xuICAgIHNldFByb3BlcnR5KG5hbWUsIHZhbHVlKSB7XG4gICAgICAgIERPTS5xdWV1ZVVwZGF0ZSgoKSA9PiB0aGlzLnRhcmdldC5zZXRQcm9wZXJ0eShuYW1lLCB2YWx1ZSkpO1xuICAgIH1cbiAgICByZW1vdmVQcm9wZXJ0eShuYW1lKSB7XG4gICAgICAgIERPTS5xdWV1ZVVwZGF0ZSgoKSA9PiB0aGlzLnRhcmdldC5yZW1vdmVQcm9wZXJ0eShuYW1lKSk7XG4gICAgfVxufVxuLyoqXG4gKiBIYW5kbGVzIHNldHRpbmcgcHJvcGVydGllcyBmb3IgYSBGQVNURWxlbWVudCB1c2luZyBDb25zdHJ1Y3RhYmxlIFN0eWxlc2hlZXRzXG4gKi9cbmNsYXNzIENvbnN0cnVjdGFibGVTdHlsZVNoZWV0VGFyZ2V0IGV4dGVuZHMgUXVldWVkU3R5bGVTaGVldFRhcmdldCB7XG4gICAgY29uc3RydWN0b3Ioc291cmNlKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIGNvbnN0IHNoZWV0ID0gbmV3IENTU1N0eWxlU2hlZXQoKTtcbiAgICAgICAgdGhpcy50YXJnZXQgPSBzaGVldC5jc3NSdWxlc1tzaGVldC5pbnNlcnRSdWxlKFwiOmhvc3R7fVwiKV0uc3R5bGU7XG4gICAgICAgIHNvdXJjZS4kZmFzdENvbnRyb2xsZXIuYWRkU3R5bGVzKEVsZW1lbnRTdHlsZXMuY3JlYXRlKFtzaGVldF0pKTtcbiAgICB9XG59XG5jbGFzcyBEb2N1bWVudFN0eWxlU2hlZXRUYXJnZXQgZXh0ZW5kcyBRdWV1ZWRTdHlsZVNoZWV0VGFyZ2V0IHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgY29uc3Qgc2hlZXQgPSBuZXcgQ1NTU3R5bGVTaGVldCgpO1xuICAgICAgICB0aGlzLnRhcmdldCA9IHNoZWV0LmNzc1J1bGVzW3NoZWV0Lmluc2VydFJ1bGUoXCI6cm9vdHt9XCIpXS5zdHlsZTtcbiAgICAgICAgZG9jdW1lbnQuYWRvcHRlZFN0eWxlU2hlZXRzID0gW1xuICAgICAgICAgICAgLi4uZG9jdW1lbnQuYWRvcHRlZFN0eWxlU2hlZXRzLFxuICAgICAgICAgICAgc2hlZXQsXG4gICAgICAgIF07XG4gICAgfVxufVxuY2xhc3MgSGVhZFN0eWxlRWxlbWVudFN0eWxlU2hlZXRUYXJnZXQgZXh0ZW5kcyBRdWV1ZWRTdHlsZVNoZWV0VGFyZ2V0IHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5zdHlsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzdHlsZVwiKTtcbiAgICAgICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZCh0aGlzLnN0eWxlKTtcbiAgICAgICAgY29uc3QgeyBzaGVldCB9ID0gdGhpcy5zdHlsZTtcbiAgICAgICAgLy8gQmVjYXVzZSB0aGUgSFRNTFN0eWxlRWxlbWVudCBoYXMgYmVlbiBhcHBlbmRlZCxcbiAgICAgICAgLy8gdGhlcmUgc2hvdWxkbid0IGV4aXN0IGEgY2FzZSB3aGVyZSBgc2hlZXRgIGlzIG51bGwsXG4gICAgICAgIC8vIGJ1dCBpZi1jaGVjayBpdCBqdXN0IGluIGNhc2UuXG4gICAgICAgIGlmIChzaGVldCkge1xuICAgICAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL2pzZG9tL2pzZG9tIHVzZXMgaHR0cHM6Ly9naXRodWIuY29tL05WL0NTU09NIGZvciBpdCdzIENTU09NIGltcGxlbWVudGF0aW9uLFxuICAgICAgICAgICAgLy8gd2hpY2ggaW1wbGVtZW50cyB0aGUgRE9NIExldmVsIDIgc3BlYyBmb3IgQ1NTU3R5bGVTaGVldCB3aGVyZSBpbnNlcnRSdWxlKCkgcmVxdWlyZXMgYW4gaW5kZXggYXJndW1lbnQuXG4gICAgICAgICAgICBjb25zdCBpbmRleCA9IHNoZWV0Lmluc2VydFJ1bGUoXCI6cm9vdHt9XCIsIHNoZWV0LmNzc1J1bGVzLmxlbmd0aCk7XG4gICAgICAgICAgICB0aGlzLnRhcmdldCA9IHNoZWV0LmNzc1J1bGVzW2luZGV4XS5zdHlsZTtcbiAgICAgICAgfVxuICAgIH1cbn1cbi8qKlxuICogSGFuZGxlcyBzZXR0aW5nIHByb3BlcnRpZXMgZm9yIGEgRkFTVEVsZW1lbnQgdXNpbmcgYW4gSFRNTFN0eWxlRWxlbWVudFxuICovXG5jbGFzcyBTdHlsZUVsZW1lbnRTdHlsZVNoZWV0VGFyZ2V0IHtcbiAgICBjb25zdHJ1Y3Rvcih0YXJnZXQpIHtcbiAgICAgICAgdGhpcy5zdG9yZSA9IG5ldyBNYXAoKTtcbiAgICAgICAgdGhpcy50YXJnZXQgPSBudWxsO1xuICAgICAgICBjb25zdCBjb250cm9sbGVyID0gdGFyZ2V0LiRmYXN0Q29udHJvbGxlcjtcbiAgICAgICAgdGhpcy5zdHlsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzdHlsZVwiKTtcbiAgICAgICAgY29udHJvbGxlci5hZGRTdHlsZXModGhpcy5zdHlsZSk7XG4gICAgICAgIE9ic2VydmFibGUuZ2V0Tm90aWZpZXIoY29udHJvbGxlcikuc3Vic2NyaWJlKHRoaXMsIFwiaXNDb25uZWN0ZWRcIik7XG4gICAgICAgIHRoaXMuaGFuZGxlQ2hhbmdlKGNvbnRyb2xsZXIsIFwiaXNDb25uZWN0ZWRcIik7XG4gICAgfVxuICAgIHRhcmdldENoYW5nZWQoKSB7XG4gICAgICAgIGlmICh0aGlzLnRhcmdldCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgdGhpcy5zdG9yZS5lbnRyaWVzKCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnRhcmdldC5zZXRQcm9wZXJ0eShrZXksIHZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBzZXRQcm9wZXJ0eShuYW1lLCB2YWx1ZSkge1xuICAgICAgICB0aGlzLnN0b3JlLnNldChuYW1lLCB2YWx1ZSk7XG4gICAgICAgIERPTS5xdWV1ZVVwZGF0ZSgoKSA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy50YXJnZXQgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnRhcmdldC5zZXRQcm9wZXJ0eShuYW1lLCB2YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICByZW1vdmVQcm9wZXJ0eShuYW1lKSB7XG4gICAgICAgIHRoaXMuc3RvcmUuZGVsZXRlKG5hbWUpO1xuICAgICAgICBET00ucXVldWVVcGRhdGUoKCkgPT4ge1xuICAgICAgICAgICAgaWYgKHRoaXMudGFyZ2V0ICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgdGhpcy50YXJnZXQucmVtb3ZlUHJvcGVydHkobmFtZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBoYW5kbGVDaGFuZ2Uoc291cmNlLCBrZXkpIHtcbiAgICAgICAgLy8gSFRNTFN0eWxlRWxlbWVudC5zaGVldCBpcyBudWxsIGlmIHRoZSBlbGVtZW50IGlzbid0IGNvbm5lY3RlZCB0byB0aGUgRE9NLFxuICAgICAgICAvLyBzbyB0aGlzIG1ldGhvZCByZWFjdHMgdG8gY2hhbmdlcyBpbiBET00gY29ubmVjdGlvbiBmb3IgdGhlIGVsZW1lbnQgaG9zdGluZ1xuICAgICAgICAvLyB0aGUgSFRNTFN0eWxlRWxlbWVudC5cbiAgICAgICAgLy9cbiAgICAgICAgLy8gQWxsIHJ1bGVzIGFwcGxpZWQgdmlhIHRoZSBDU1NPTSBhbHNvIGdldCBjbGVhcmVkIHdoZW4gdGhlIGVsZW1lbnQgZGlzY29ubmVjdHMsXG4gICAgICAgIC8vIHNvIHdlIG5lZWQgdG8gYWRkIGEgbmV3IHJ1bGUgZWFjaCB0aW1lIGFuZCBwb3B1bGF0ZSBpdCB3aXRoIHRoZSBzdG9yZWQgcHJvcGVydGllc1xuICAgICAgICBjb25zdCB7IHNoZWV0IH0gPSB0aGlzLnN0eWxlO1xuICAgICAgICBpZiAoc2hlZXQpIHtcbiAgICAgICAgICAgIC8vIFNhZmFyaSB3aWxsIHRocm93IGlmIHdlIHRyeSB0byB1c2UgdGhlIHJldHVybiByZXN1bHQgb2YgaW5zZXJ0UnVsZSgpXG4gICAgICAgICAgICAvLyB0byBpbmRleCB0aGUgcnVsZSBpbmxpbmUsIHNvIHN0b3JlIGFzIGEgY29uc3QgcHJpb3IgdG8gaW5kZXhpbmcuXG4gICAgICAgICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vanNkb20vanNkb20gdXNlcyBodHRwczovL2dpdGh1Yi5jb20vTlYvQ1NTT00gZm9yIGl0J3MgQ1NTT00gaW1wbGVtZW50YXRpb24sXG4gICAgICAgICAgICAvLyB3aGljaCBpbXBsZW1lbnRzIHRoZSBET00gTGV2ZWwgMiBzcGVjIGZvciBDU1NTdHlsZVNoZWV0IHdoZXJlIGluc2VydFJ1bGUoKSByZXF1aXJlcyBhbiBpbmRleCBhcmd1bWVudC5cbiAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gc2hlZXQuaW5zZXJ0UnVsZShcIjpob3N0e31cIiwgc2hlZXQuY3NzUnVsZXMubGVuZ3RoKTtcbiAgICAgICAgICAgIHRoaXMudGFyZ2V0ID0gc2hlZXQuY3NzUnVsZXNbaW5kZXhdLnN0eWxlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy50YXJnZXQgPSBudWxsO1xuICAgICAgICB9XG4gICAgfVxufVxuX19kZWNvcmF0ZShbXG4gICAgb2JzZXJ2YWJsZVxuXSwgU3R5bGVFbGVtZW50U3R5bGVTaGVldFRhcmdldC5wcm90b3R5cGUsIFwidGFyZ2V0XCIsIHZvaWQgMCk7XG4vKipcbiAqIEhhbmRsZXMgc2V0dGluZyBwcm9wZXJ0aWVzIGZvciBhIG5vcm1hbCBIVE1MRWxlbWVudFxuICovXG5jbGFzcyBFbGVtZW50U3R5bGVTaGVldFRhcmdldCB7XG4gICAgY29uc3RydWN0b3Ioc291cmNlKSB7XG4gICAgICAgIHRoaXMudGFyZ2V0ID0gc291cmNlLnN0eWxlO1xuICAgIH1cbiAgICBzZXRQcm9wZXJ0eShuYW1lLCB2YWx1ZSkge1xuICAgICAgICBET00ucXVldWVVcGRhdGUoKCkgPT4gdGhpcy50YXJnZXQuc2V0UHJvcGVydHkobmFtZSwgdmFsdWUpKTtcbiAgICB9XG4gICAgcmVtb3ZlUHJvcGVydHkobmFtZSkge1xuICAgICAgICBET00ucXVldWVVcGRhdGUoKCkgPT4gdGhpcy50YXJnZXQucmVtb3ZlUHJvcGVydHkobmFtZSkpO1xuICAgIH1cbn1cbi8qKlxuICogQ29udHJvbHMgZW1pc3Npb24gZm9yIGRlZmF1bHQgdmFsdWVzLiBUaGlzIGNvbnRyb2wgaXMgY2FwYWJsZVxuICogb2YgZW1pdHRpbmcgdG8gbXVsdGlwbGUge0BsaW5rIFByb3BlcnR5VGFyZ2V0IHwgUHJvcGVydHlUYXJnZXRzfSxcbiAqIGFuZCBvbmx5IGVtaXRzIGlmIGl0IGhhcyBhdCBsZWFzdCBvbmUgcm9vdC5cbiAqXG4gKiBAaW50ZXJuYWxcbiAqL1xuZXhwb3J0IGNsYXNzIFJvb3RTdHlsZVNoZWV0VGFyZ2V0IHtcbiAgICBzZXRQcm9wZXJ0eShuYW1lLCB2YWx1ZSkge1xuICAgICAgICBSb290U3R5bGVTaGVldFRhcmdldC5wcm9wZXJ0aWVzW25hbWVdID0gdmFsdWU7XG4gICAgICAgIGZvciAoY29uc3QgdGFyZ2V0IG9mIFJvb3RTdHlsZVNoZWV0VGFyZ2V0LnJvb3RzLnZhbHVlcygpKSB7XG4gICAgICAgICAgICBQcm9wZXJ0eVRhcmdldE1hbmFnZXIuZ2V0T3JDcmVhdGUoUm9vdFN0eWxlU2hlZXRUYXJnZXQubm9ybWFsaXplUm9vdCh0YXJnZXQpKS5zZXRQcm9wZXJ0eShuYW1lLCB2YWx1ZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmVtb3ZlUHJvcGVydHkobmFtZSkge1xuICAgICAgICBkZWxldGUgUm9vdFN0eWxlU2hlZXRUYXJnZXQucHJvcGVydGllc1tuYW1lXTtcbiAgICAgICAgZm9yIChjb25zdCB0YXJnZXQgb2YgUm9vdFN0eWxlU2hlZXRUYXJnZXQucm9vdHMudmFsdWVzKCkpIHtcbiAgICAgICAgICAgIFByb3BlcnR5VGFyZ2V0TWFuYWdlci5nZXRPckNyZWF0ZShSb290U3R5bGVTaGVldFRhcmdldC5ub3JtYWxpemVSb290KHRhcmdldCkpLnJlbW92ZVByb3BlcnR5KG5hbWUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRpYyByZWdpc3RlclJvb3Qocm9vdCkge1xuICAgICAgICBjb25zdCB7IHJvb3RzIH0gPSBSb290U3R5bGVTaGVldFRhcmdldDtcbiAgICAgICAgaWYgKCFyb290cy5oYXMocm9vdCkpIHtcbiAgICAgICAgICAgIHJvb3RzLmFkZChyb290KTtcbiAgICAgICAgICAgIGNvbnN0IHRhcmdldCA9IFByb3BlcnR5VGFyZ2V0TWFuYWdlci5nZXRPckNyZWF0ZSh0aGlzLm5vcm1hbGl6ZVJvb3Qocm9vdCkpO1xuICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gUm9vdFN0eWxlU2hlZXRUYXJnZXQucHJvcGVydGllcykge1xuICAgICAgICAgICAgICAgIHRhcmdldC5zZXRQcm9wZXJ0eShrZXksIFJvb3RTdHlsZVNoZWV0VGFyZ2V0LnByb3BlcnRpZXNba2V5XSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhdGljIHVucmVnaXN0ZXJSb290KHJvb3QpIHtcbiAgICAgICAgY29uc3QgeyByb290cyB9ID0gUm9vdFN0eWxlU2hlZXRUYXJnZXQ7XG4gICAgICAgIGlmIChyb290cy5oYXMocm9vdCkpIHtcbiAgICAgICAgICAgIHJvb3RzLmRlbGV0ZShyb290KTtcbiAgICAgICAgICAgIGNvbnN0IHRhcmdldCA9IFByb3BlcnR5VGFyZ2V0TWFuYWdlci5nZXRPckNyZWF0ZShSb290U3R5bGVTaGVldFRhcmdldC5ub3JtYWxpemVSb290KHJvb3QpKTtcbiAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIFJvb3RTdHlsZVNoZWV0VGFyZ2V0LnByb3BlcnRpZXMpIHtcbiAgICAgICAgICAgICAgICB0YXJnZXQucmVtb3ZlUHJvcGVydHkoa2V5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBkb2N1bWVudCB3aGVuIHByb3ZpZGVkIHRoZSBkZWZhdWx0IGVsZW1lbnQsXG4gICAgICogb3RoZXJ3aXNlIGlzIGEgbm8tb3BcbiAgICAgKiBAcGFyYW0gcm9vdCAtIHRoZSByb290IHRvIG5vcm1hbGl6ZVxuICAgICAqL1xuICAgIHN0YXRpYyBub3JtYWxpemVSb290KHJvb3QpIHtcbiAgICAgICAgcmV0dXJuIHJvb3QgPT09IGRlZmF1bHRFbGVtZW50ID8gZG9jdW1lbnQgOiByb290O1xuICAgIH1cbn1cblJvb3RTdHlsZVNoZWV0VGFyZ2V0LnJvb3RzID0gbmV3IFNldCgpO1xuUm9vdFN0eWxlU2hlZXRUYXJnZXQucHJvcGVydGllcyA9IHt9O1xuLy8gQ2FjaGVzIFByb3BlcnR5VGFyZ2V0IGluc3RhbmNlc1xuY29uc3QgcHJvcGVydHlUYXJnZXRDYWNoZSA9IG5ldyBXZWFrTWFwKCk7XG4vLyBVc2UgQ29uc3RydWN0YWJsZSBTdHlsZVNoZWV0cyBmb3IgRkFTVCBlbGVtZW50cyB3aGVuIHN1cHBvcnRlZCwgb3RoZXJ3aXNlIHVzZVxuLy8gSFRNTFN0eWxlRWxlbWVudCBpbnN0YW5jZXNcbmNvbnN0IHByb3BlcnR5VGFyZ2V0Q3RvciA9IERPTS5zdXBwb3J0c0Fkb3B0ZWRTdHlsZVNoZWV0c1xuICAgID8gQ29uc3RydWN0YWJsZVN0eWxlU2hlZXRUYXJnZXRcbiAgICA6IFN0eWxlRWxlbWVudFN0eWxlU2hlZXRUYXJnZXQ7XG4vKipcbiAqIE1hbmFnZXMgY3JlYXRpb24gYW5kIGNhY2hpbmcgb2YgUHJvcGVydHlUYXJnZXQgaW5zdGFuY2VzLlxuICpcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgY29uc3QgUHJvcGVydHlUYXJnZXRNYW5hZ2VyID0gT2JqZWN0LmZyZWV6ZSh7XG4gICAgZ2V0T3JDcmVhdGUoc291cmNlKSB7XG4gICAgICAgIGlmIChwcm9wZXJ0eVRhcmdldENhY2hlLmhhcyhzb3VyY2UpKSB7XG4gICAgICAgICAgICAvKiBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLW5vbi1udWxsLWFzc2VydGlvbiAqL1xuICAgICAgICAgICAgcmV0dXJuIHByb3BlcnR5VGFyZ2V0Q2FjaGUuZ2V0KHNvdXJjZSk7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHRhcmdldDtcbiAgICAgICAgaWYgKHNvdXJjZSA9PT0gZGVmYXVsdEVsZW1lbnQpIHtcbiAgICAgICAgICAgIHRhcmdldCA9IG5ldyBSb290U3R5bGVTaGVldFRhcmdldCgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHNvdXJjZSBpbnN0YW5jZW9mIERvY3VtZW50KSB7XG4gICAgICAgICAgICB0YXJnZXQgPSBET00uc3VwcG9ydHNBZG9wdGVkU3R5bGVTaGVldHNcbiAgICAgICAgICAgICAgICA/IG5ldyBEb2N1bWVudFN0eWxlU2hlZXRUYXJnZXQoKVxuICAgICAgICAgICAgICAgIDogbmV3IEhlYWRTdHlsZUVsZW1lbnRTdHlsZVNoZWV0VGFyZ2V0KCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoaXNGYXN0RWxlbWVudChzb3VyY2UpKSB7XG4gICAgICAgICAgICB0YXJnZXQgPSBuZXcgcHJvcGVydHlUYXJnZXRDdG9yKHNvdXJjZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0YXJnZXQgPSBuZXcgRWxlbWVudFN0eWxlU2hlZXRUYXJnZXQoc291cmNlKTtcbiAgICAgICAgfVxuICAgICAgICBwcm9wZXJ0eVRhcmdldENhY2hlLnNldChzb3VyY2UsIHRhcmdldCk7XG4gICAgICAgIHJldHVybiB0YXJnZXQ7XG4gICAgfSxcbn0pO1xuIiwiaW1wb3J0IHsgX19kZWNvcmF0ZSB9IGZyb20gXCJ0c2xpYlwiO1xuaW1wb3J0IHsgQ1NTRGlyZWN0aXZlLCBkZWZhdWx0RXhlY3V0aW9uQ29udGV4dCwgRkFTVEVsZW1lbnQsIG9ic2VydmFibGUsIE9ic2VydmFibGUsIH0gZnJvbSBcIkBtaWNyb3NvZnQvZmFzdC1lbGVtZW50XCI7XG5pbXBvcnQgeyBjb21wb3NlZFBhcmVudCB9IGZyb20gXCIuLi91dGlsaXRpZXMvY29tcG9zZWQtcGFyZW50LmpzXCI7XG5pbXBvcnQgeyBjb21wb3NlZENvbnRhaW5zIH0gZnJvbSBcIi4uL3V0aWxpdGllcy9jb21wb3NlZC1jb250YWlucy5qc1wiO1xuaW1wb3J0IHsgUHJvcGVydHlUYXJnZXRNYW5hZ2VyLCBSb290U3R5bGVTaGVldFRhcmdldCwgfSBmcm9tIFwiLi9jdXN0b20tcHJvcGVydHktbWFuYWdlci5qc1wiO1xuaW1wb3J0IHsgZGVmYXVsdEVsZW1lbnQgfSBmcm9tIFwiLi9jdXN0b20tcHJvcGVydHktbWFuYWdlci5qc1wiO1xuLyoqXG4gKiBJbXBsZW1lbnRhdGlvbiBvZiB7QGxpbmsgKERlc2lnblRva2VuOmludGVyZmFjZSl9XG4gKi9cbmNsYXNzIERlc2lnblRva2VuSW1wbCBleHRlbmRzIENTU0RpcmVjdGl2ZSB7XG4gICAgY29uc3RydWN0b3IoY29uZmlndXJhdGlvbikge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLnN1YnNjcmliZXJzID0gbmV3IFdlYWtNYXAoKTtcbiAgICAgICAgdGhpcy5fYXBwbGllZFRvID0gbmV3IFNldCgpO1xuICAgICAgICB0aGlzLm5hbWUgPSBjb25maWd1cmF0aW9uLm5hbWU7XG4gICAgICAgIGlmIChjb25maWd1cmF0aW9uLmNzc0N1c3RvbVByb3BlcnR5TmFtZSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgdGhpcy5jc3NDdXN0b21Qcm9wZXJ0eSA9IGAtLSR7Y29uZmlndXJhdGlvbi5jc3NDdXN0b21Qcm9wZXJ0eU5hbWV9YDtcbiAgICAgICAgICAgIHRoaXMuY3NzVmFyID0gYHZhcigke3RoaXMuY3NzQ3VzdG9tUHJvcGVydHl9KWA7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5pZCA9IERlc2lnblRva2VuSW1wbC51bmlxdWVJZCgpO1xuICAgICAgICBEZXNpZ25Ub2tlbkltcGwudG9rZW5zQnlJZC5zZXQodGhpcy5pZCwgdGhpcyk7XG4gICAgfVxuICAgIGdldCBhcHBsaWVkVG8oKSB7XG4gICAgICAgIHJldHVybiBbLi4udGhpcy5fYXBwbGllZFRvXTtcbiAgICB9XG4gICAgc3RhdGljIGZyb20obmFtZU9yQ29uZmlnKSB7XG4gICAgICAgIHJldHVybiBuZXcgRGVzaWduVG9rZW5JbXBsKHtcbiAgICAgICAgICAgIG5hbWU6IHR5cGVvZiBuYW1lT3JDb25maWcgPT09IFwic3RyaW5nXCIgPyBuYW1lT3JDb25maWcgOiBuYW1lT3JDb25maWcubmFtZSxcbiAgICAgICAgICAgIGNzc0N1c3RvbVByb3BlcnR5TmFtZTogdHlwZW9mIG5hbWVPckNvbmZpZyA9PT0gXCJzdHJpbmdcIlxuICAgICAgICAgICAgICAgID8gbmFtZU9yQ29uZmlnXG4gICAgICAgICAgICAgICAgOiBuYW1lT3JDb25maWcuY3NzQ3VzdG9tUHJvcGVydHlOYW1lID09PSB2b2lkIDBcbiAgICAgICAgICAgICAgICAgICAgPyBuYW1lT3JDb25maWcubmFtZVxuICAgICAgICAgICAgICAgICAgICA6IG5hbWVPckNvbmZpZy5jc3NDdXN0b21Qcm9wZXJ0eU5hbWUsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBzdGF0aWMgaXNDU1NEZXNpZ25Ub2tlbih0b2tlbikge1xuICAgICAgICByZXR1cm4gdHlwZW9mIHRva2VuLmNzc0N1c3RvbVByb3BlcnR5ID09PSBcInN0cmluZ1wiO1xuICAgIH1cbiAgICBzdGF0aWMgaXNEZXJpdmVkRGVzaWduVG9rZW5WYWx1ZSh2YWx1ZSkge1xuICAgICAgICByZXR1cm4gdHlwZW9mIHZhbHVlID09PSBcImZ1bmN0aW9uXCI7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldHMgYSB0b2tlbiBieSBJRC4gUmV0dXJucyB1bmRlZmluZWQgaWYgdGhlIHRva2VuIHdhcyBub3QgZm91bmQuXG4gICAgICogQHBhcmFtIGlkIC0gVGhlIElEIG9mIHRoZSB0b2tlblxuICAgICAqIEByZXR1cm5zXG4gICAgICovXG4gICAgc3RhdGljIGdldFRva2VuQnlJZChpZCkge1xuICAgICAgICByZXR1cm4gRGVzaWduVG9rZW5JbXBsLnRva2Vuc0J5SWQuZ2V0KGlkKTtcbiAgICB9XG4gICAgZ2V0T3JDcmVhdGVTdWJzY3JpYmVyU2V0KHRhcmdldCA9IHRoaXMpIHtcbiAgICAgICAgcmV0dXJuICh0aGlzLnN1YnNjcmliZXJzLmdldCh0YXJnZXQpIHx8XG4gICAgICAgICAgICAodGhpcy5zdWJzY3JpYmVycy5zZXQodGFyZ2V0LCBuZXcgU2V0KCkpICYmIHRoaXMuc3Vic2NyaWJlcnMuZ2V0KHRhcmdldCkpKTtcbiAgICB9XG4gICAgY3JlYXRlQ1NTKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jc3NWYXIgfHwgXCJcIjtcbiAgICB9XG4gICAgZ2V0VmFsdWVGb3IoZWxlbWVudCkge1xuICAgICAgICBjb25zdCB2YWx1ZSA9IERlc2lnblRva2VuTm9kZS5nZXRPckNyZWF0ZShlbGVtZW50KS5nZXQodGhpcyk7XG4gICAgICAgIGlmICh2YWx1ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBWYWx1ZSBjb3VsZCBub3QgYmUgcmV0cmlldmVkIGZvciB0b2tlbiBuYW1lZCBcIiR7dGhpcy5uYW1lfVwiLiBFbnN1cmUgdGhlIHZhbHVlIGlzIHNldCBmb3IgJHtlbGVtZW50fSBvciBhbiBhbmNlc3RvciBvZiAke2VsZW1lbnR9LmApO1xuICAgIH1cbiAgICBzZXRWYWx1ZUZvcihlbGVtZW50LCB2YWx1ZSkge1xuICAgICAgICB0aGlzLl9hcHBsaWVkVG8uYWRkKGVsZW1lbnQpO1xuICAgICAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiBEZXNpZ25Ub2tlbkltcGwpIHtcbiAgICAgICAgICAgIHZhbHVlID0gdGhpcy5hbGlhcyh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgRGVzaWduVG9rZW5Ob2RlLmdldE9yQ3JlYXRlKGVsZW1lbnQpLnNldCh0aGlzLCB2YWx1ZSk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICBkZWxldGVWYWx1ZUZvcihlbGVtZW50KSB7XG4gICAgICAgIHRoaXMuX2FwcGxpZWRUby5kZWxldGUoZWxlbWVudCk7XG4gICAgICAgIGlmIChEZXNpZ25Ub2tlbk5vZGUuZXhpc3RzRm9yKGVsZW1lbnQpKSB7XG4gICAgICAgICAgICBEZXNpZ25Ub2tlbk5vZGUuZ2V0T3JDcmVhdGUoZWxlbWVudCkuZGVsZXRlKHRoaXMpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICB3aXRoRGVmYXVsdCh2YWx1ZSkge1xuICAgICAgICB0aGlzLnNldFZhbHVlRm9yKGRlZmF1bHRFbGVtZW50LCB2YWx1ZSk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICBzdWJzY3JpYmUoc3Vic2NyaWJlciwgdGFyZ2V0KSB7XG4gICAgICAgIGNvbnN0IHN1YnNjcmliZXJTZXQgPSB0aGlzLmdldE9yQ3JlYXRlU3Vic2NyaWJlclNldCh0YXJnZXQpO1xuICAgICAgICBpZiAodGFyZ2V0ICYmICFEZXNpZ25Ub2tlbk5vZGUuZXhpc3RzRm9yKHRhcmdldCkpIHtcbiAgICAgICAgICAgIERlc2lnblRva2VuTm9kZS5nZXRPckNyZWF0ZSh0YXJnZXQpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghc3Vic2NyaWJlclNldC5oYXMoc3Vic2NyaWJlcikpIHtcbiAgICAgICAgICAgIHN1YnNjcmliZXJTZXQuYWRkKHN1YnNjcmliZXIpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHVuc3Vic2NyaWJlKHN1YnNjcmliZXIsIHRhcmdldCkge1xuICAgICAgICBjb25zdCBsaXN0ID0gdGhpcy5zdWJzY3JpYmVycy5nZXQodGFyZ2V0IHx8IHRoaXMpO1xuICAgICAgICBpZiAobGlzdCAmJiBsaXN0LmhhcyhzdWJzY3JpYmVyKSkge1xuICAgICAgICAgICAgbGlzdC5kZWxldGUoc3Vic2NyaWJlcik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogTm90aWZpZXMgc3Vic2NyaWJlcnMgdGhhdCB0aGUgdmFsdWUgZm9yIGFuIGVsZW1lbnQgaGFzIGNoYW5nZWQuXG4gICAgICogQHBhcmFtIGVsZW1lbnQgLSBUaGUgZWxlbWVudCB0byBlbWl0IGEgbm90aWZpY2F0aW9uIGZvclxuICAgICAqL1xuICAgIG5vdGlmeShlbGVtZW50KSB7XG4gICAgICAgIGNvbnN0IHJlY29yZCA9IE9iamVjdC5mcmVlemUoeyB0b2tlbjogdGhpcywgdGFyZ2V0OiBlbGVtZW50IH0pO1xuICAgICAgICBpZiAodGhpcy5zdWJzY3JpYmVycy5oYXModGhpcykpIHtcbiAgICAgICAgICAgIHRoaXMuc3Vic2NyaWJlcnMuZ2V0KHRoaXMpLmZvckVhY2goc3ViID0+IHN1Yi5oYW5kbGVDaGFuZ2UocmVjb3JkKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuc3Vic2NyaWJlcnMuaGFzKGVsZW1lbnQpKSB7XG4gICAgICAgICAgICB0aGlzLnN1YnNjcmliZXJzLmdldChlbGVtZW50KS5mb3JFYWNoKHN1YiA9PiBzdWIuaGFuZGxlQ2hhbmdlKHJlY29yZCkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFsaWFzIHRoZSB0b2tlbiB0byB0aGUgcHJvdmlkZWQgdG9rZW4uXG4gICAgICogQHBhcmFtIHRva2VuIC0gdGhlIHRva2VuIHRvIGFsaWFzIHRvXG4gICAgICovXG4gICAgYWxpYXModG9rZW4pIHtcbiAgICAgICAgcmV0dXJuICgodGFyZ2V0KSA9PiB0b2tlbi5nZXRWYWx1ZUZvcih0YXJnZXQpKTtcbiAgICB9XG59XG5EZXNpZ25Ub2tlbkltcGwudW5pcXVlSWQgPSAoKCkgPT4ge1xuICAgIGxldCBpZCA9IDA7XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgaWQrKztcbiAgICAgICAgcmV0dXJuIGlkLnRvU3RyaW5nKDE2KTtcbiAgICB9O1xufSkoKTtcbi8qKlxuICogVG9rZW4gc3RvcmFnZSBieSB0b2tlbiBJRFxuICovXG5EZXNpZ25Ub2tlbkltcGwudG9rZW5zQnlJZCA9IG5ldyBNYXAoKTtcbmNsYXNzIEN1c3RvbVByb3BlcnR5UmVmbGVjdG9yIHtcbiAgICBzdGFydFJlZmxlY3Rpb24odG9rZW4sIHRhcmdldCkge1xuICAgICAgICB0b2tlbi5zdWJzY3JpYmUodGhpcywgdGFyZ2V0KTtcbiAgICAgICAgdGhpcy5oYW5kbGVDaGFuZ2UoeyB0b2tlbiwgdGFyZ2V0IH0pO1xuICAgIH1cbiAgICBzdG9wUmVmbGVjdGlvbih0b2tlbiwgdGFyZ2V0KSB7XG4gICAgICAgIHRva2VuLnVuc3Vic2NyaWJlKHRoaXMsIHRhcmdldCk7XG4gICAgICAgIHRoaXMucmVtb3ZlKHRva2VuLCB0YXJnZXQpO1xuICAgIH1cbiAgICBoYW5kbGVDaGFuZ2UocmVjb3JkKSB7XG4gICAgICAgIGNvbnN0IHsgdG9rZW4sIHRhcmdldCB9ID0gcmVjb3JkO1xuICAgICAgICB0aGlzLmFkZCh0b2tlbiwgdGFyZ2V0KTtcbiAgICB9XG4gICAgYWRkKHRva2VuLCB0YXJnZXQpIHtcbiAgICAgICAgUHJvcGVydHlUYXJnZXRNYW5hZ2VyLmdldE9yQ3JlYXRlKHRhcmdldCkuc2V0UHJvcGVydHkodG9rZW4uY3NzQ3VzdG9tUHJvcGVydHksIHRoaXMucmVzb2x2ZUNTU1ZhbHVlKERlc2lnblRva2VuTm9kZS5nZXRPckNyZWF0ZSh0YXJnZXQpLmdldCh0b2tlbikpKTtcbiAgICB9XG4gICAgcmVtb3ZlKHRva2VuLCB0YXJnZXQpIHtcbiAgICAgICAgUHJvcGVydHlUYXJnZXRNYW5hZ2VyLmdldE9yQ3JlYXRlKHRhcmdldCkucmVtb3ZlUHJvcGVydHkodG9rZW4uY3NzQ3VzdG9tUHJvcGVydHkpO1xuICAgIH1cbiAgICByZXNvbHZlQ1NTVmFsdWUodmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlICYmIHR5cGVvZiB2YWx1ZS5jcmVhdGVDU1MgPT09IFwiZnVuY3Rpb25cIiA/IHZhbHVlLmNyZWF0ZUNTUygpIDogdmFsdWU7XG4gICAgfVxufVxuLyoqXG4gKiBBIGxpZ2h0IHdyYXBwZXIgYXJvdW5kIEJpbmRpbmdPYnNlcnZlciB0byBoYW5kbGUgdmFsdWUgY2FjaGluZyBhbmRcbiAqIHRva2VuIG5vdGlmaWNhdGlvblxuICovXG5jbGFzcyBEZXNpZ25Ub2tlbkJpbmRpbmdPYnNlcnZlciB7XG4gICAgY29uc3RydWN0b3Ioc291cmNlLCB0b2tlbiwgbm9kZSkge1xuICAgICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICAgICAgdGhpcy50b2tlbiA9IHRva2VuO1xuICAgICAgICB0aGlzLm5vZGUgPSBub2RlO1xuICAgICAgICB0aGlzLmRlcGVuZGVuY2llcyA9IG5ldyBTZXQoKTtcbiAgICAgICAgdGhpcy5vYnNlcnZlciA9IE9ic2VydmFibGUuYmluZGluZyhzb3VyY2UsIHRoaXMsIGZhbHNlKTtcbiAgICAgICAgLy8gVGhpcyBpcyBhIGxpdHRsZSBiaXQgaGFja3kgYmVjYXVzZSBpdCdzIHVzaW5nIGludGVybmFsIEFQSXMgb2YgQmluZGluZ09ic2VydmVySW1wbC5cbiAgICAgICAgLy8gQmluZGluZ09ic2VydmVySW1wbCBxdWV1ZXMgdXBkYXRlcyB0byBiYXRjaCBpdCdzIG5vdGlmaWNhdGlvbnMgd2hpY2ggZG9lc24ndCB3b3JrIGZvciB0aGlzXG4gICAgICAgIC8vIHNjZW5hcmlvIGJlY2F1c2UgdGhlIERlc2lnblRva2VuLmdldFZhbHVlRm9yIEFQSSBpcyBub3QgYXN5bmMuIFdpdGhvdXQgdGhpcywgdXNpbmcgRGVzaWduVG9rZW4uZ2V0VmFsdWVGb3IoKVxuICAgICAgICAvLyBhZnRlciBEZXNpZ25Ub2tlbi5zZXRWYWx1ZUZvcigpIHdoZW4gc2V0dGluZyBhIGRlcGVuZGVuY3kgb2YgdGhlIHZhbHVlIGJlaW5nIHJldHJpZXZlZCBjYW4gcmV0dXJuIGEgc3RhbGVcbiAgICAgICAgLy8gdmFsdWUuIEFzc2lnbmluZyAuaGFuZGxlQ2hhbmdlIHRvIC5jYWxsIGZvcmNlcyBpbW1lZGlhdGUgaW52b2NhdGlvbiBvZiB0aGlzIGNsYXNzZXMgaGFuZGxlQ2hhbmdlKCkgbWV0aG9kLFxuICAgICAgICAvLyBhbGxvd2luZyByZXNvbHV0aW9uIG9mIHZhbHVlcyBzeW5jaHJvbm91c2x5LlxuICAgICAgICAvLyBUT0RPOiBodHRwczovL2dpdGh1Yi5jb20vbWljcm9zb2Z0L2Zhc3QvaXNzdWVzLzUxMTBcbiAgICAgICAgdGhpcy5vYnNlcnZlci5oYW5kbGVDaGFuZ2UgPSB0aGlzLm9ic2VydmVyLmNhbGw7XG4gICAgICAgIHRoaXMuaGFuZGxlQ2hhbmdlKCk7XG4gICAgfVxuICAgIGRpc2Nvbm5lY3QoKSB7XG4gICAgICAgIHRoaXMub2JzZXJ2ZXIuZGlzY29ubmVjdCgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBoYW5kbGVDaGFuZ2UoKSB7XG4gICAgICAgIHRoaXMubm9kZS5zdG9yZS5zZXQodGhpcy50b2tlbiwgdGhpcy5vYnNlcnZlci5vYnNlcnZlKHRoaXMubm9kZS50YXJnZXQsIGRlZmF1bHRFeGVjdXRpb25Db250ZXh0KSk7XG4gICAgfVxufVxuLyoqXG4gKiBTdG9yZXMgcmVzb2x2ZWQgdG9rZW4vdmFsdWUgcGFpcnMgYW5kIG5vdGlmaWVzIG9uIGNoYW5nZXNcbiAqL1xuY2xhc3MgU3RvcmUge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLnZhbHVlcyA9IG5ldyBNYXAoKTtcbiAgICB9XG4gICAgc2V0KHRva2VuLCB2YWx1ZSkge1xuICAgICAgICBpZiAodGhpcy52YWx1ZXMuZ2V0KHRva2VuKSAhPT0gdmFsdWUpIHtcbiAgICAgICAgICAgIHRoaXMudmFsdWVzLnNldCh0b2tlbiwgdmFsdWUpO1xuICAgICAgICAgICAgT2JzZXJ2YWJsZS5nZXROb3RpZmllcih0aGlzKS5ub3RpZnkodG9rZW4uaWQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldCh0b2tlbikge1xuICAgICAgICBPYnNlcnZhYmxlLnRyYWNrKHRoaXMsIHRva2VuLmlkKTtcbiAgICAgICAgcmV0dXJuIHRoaXMudmFsdWVzLmdldCh0b2tlbik7XG4gICAgfVxuICAgIGRlbGV0ZSh0b2tlbikge1xuICAgICAgICB0aGlzLnZhbHVlcy5kZWxldGUodG9rZW4pO1xuICAgIH1cbiAgICBhbGwoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnZhbHVlcy5lbnRyaWVzKCk7XG4gICAgfVxufVxuY29uc3Qgbm9kZUNhY2hlID0gbmV3IFdlYWtNYXAoKTtcbmNvbnN0IGNoaWxkVG9QYXJlbnQgPSBuZXcgV2Vha01hcCgpO1xuLyoqXG4gKiBBIG5vZGUgcmVzcG9uc2libGUgZm9yIHNldHRpbmcgYW5kIGdldHRpbmcgdG9rZW4gdmFsdWVzLFxuICogZW1pdHRpbmcgdmFsdWVzIHRvIENTUyBjdXN0b20gcHJvcGVydGllcywgYW5kIG1haW50YWluaW5nXG4gKiBpbmhlcml0YW5jZSBzdHJ1Y3R1cmVzLlxuICovXG5jbGFzcyBEZXNpZ25Ub2tlbk5vZGUge1xuICAgIGNvbnN0cnVjdG9yKHRhcmdldCkge1xuICAgICAgICB0aGlzLnRhcmdldCA9IHRhcmdldDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFN0b3JlcyBhbGwgcmVzb2x2ZWQgdG9rZW4gdmFsdWVzIGZvciBhIG5vZGVcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuc3RvcmUgPSBuZXcgU3RvcmUoKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEFsbCBjaGlsZHJlbiBhc3NpZ25lZCB0byB0aGUgbm9kZVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5jaGlsZHJlbiA9IFtdO1xuICAgICAgICAvKipcbiAgICAgICAgICogQWxsIHZhbHVlcyBleHBsaWNpdGx5IGFzc2lnbmVkIHRvIHRoZSBub2RlIGluIHRoZWlyIHJhdyBmb3JtXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmFzc2lnbmVkVmFsdWVzID0gbmV3IE1hcCgpO1xuICAgICAgICAvKipcbiAgICAgICAgICogVG9rZW5zIGN1cnJlbnRseSBiZWluZyByZWZsZWN0ZWQgdG8gQ1NTIGN1c3RvbSBwcm9wZXJ0aWVzXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnJlZmxlY3RpbmcgPSBuZXcgU2V0KCk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBCaW5kaW5nIG9ic2VydmVycyBmb3IgYXNzaWduZWQgYW5kIGluaGVyaXRlZCBkZXJpdmVkIHZhbHVlcy5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuYmluZGluZ09ic2VydmVycyA9IG5ldyBNYXAoKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEVtaXRzIG5vdGlmaWNhdGlvbnMgdG8gdG9rZW4gd2hlbiB0b2tlbiB2YWx1ZXNcbiAgICAgICAgICogY2hhbmdlIHRoZSBEZXNpZ25Ub2tlbk5vZGVcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMudG9rZW5WYWx1ZUNoYW5nZUhhbmRsZXIgPSB7XG4gICAgICAgICAgICBoYW5kbGVDaGFuZ2U6IChzb3VyY2UsIGFyZykgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHRva2VuID0gRGVzaWduVG9rZW5JbXBsLmdldFRva2VuQnlJZChhcmcpO1xuICAgICAgICAgICAgICAgIGlmICh0b2tlbikge1xuICAgICAgICAgICAgICAgICAgICAvLyBOb3RpZnkgYW55IHRva2VuIHN1YnNjcmliZXJzXG4gICAgICAgICAgICAgICAgICAgIHRva2VuLm5vdGlmeSh0aGlzLnRhcmdldCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChEZXNpZ25Ub2tlbkltcGwuaXNDU1NEZXNpZ25Ub2tlbih0b2tlbikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhcmVudCA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVmbGVjdGluZyA9IHRoaXMuaXNSZWZsZWN0aW5nKHRva2VuKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwYXJlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwYXJlbnRWYWx1ZSA9IHBhcmVudC5nZXQodG9rZW4pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHNvdXJjZVZhbHVlID0gc291cmNlLmdldCh0b2tlbik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBhcmVudFZhbHVlICE9PSBzb3VyY2VWYWx1ZSAmJiAhcmVmbGVjdGluZykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlZmxlY3RUb0NTUyh0b2tlbik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHBhcmVudFZhbHVlID09PSBzb3VyY2VWYWx1ZSAmJiByZWZsZWN0aW5nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RvcFJlZmxlY3RUb0NTUyh0b2tlbik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoIXJlZmxlY3RpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlZmxlY3RUb0NTUyh0b2tlbik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgICAgICBub2RlQ2FjaGUuc2V0KHRhcmdldCwgdGhpcyk7XG4gICAgICAgIC8vIE1hcCBzdG9yZSBjaGFuZ2Ugbm90aWZpY2F0aW9ucyB0byB0b2tlbiBjaGFuZ2Ugbm90aWZpY2F0aW9uc1xuICAgICAgICBPYnNlcnZhYmxlLmdldE5vdGlmaWVyKHRoaXMuc3RvcmUpLnN1YnNjcmliZSh0aGlzLnRva2VuVmFsdWVDaGFuZ2VIYW5kbGVyKTtcbiAgICAgICAgaWYgKHRhcmdldCBpbnN0YW5jZW9mIEZBU1RFbGVtZW50KSB7XG4gICAgICAgICAgICB0YXJnZXQuJGZhc3RDb250cm9sbGVyLmFkZEJlaGF2aW9ycyhbdGhpc10pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRhcmdldC5pc0Nvbm5lY3RlZCkge1xuICAgICAgICAgICAgdGhpcy5iaW5kKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIERlc2lnblRva2VuTm9kZSBmb3IgYW4gZWxlbWVudC5cbiAgICAgKiBDcmVhdGVzIGEgbmV3IGluc3RhbmNlIGlmIG9uZSBkb2VzIG5vdCBhbHJlYWR5IGV4aXN0IGZvciBhIG5vZGUsXG4gICAgICogb3RoZXJ3aXNlIHJldHVybnMgdGhlIGNhY2hlZCBpbnN0YW5jZVxuICAgICAqXG4gICAgICogQHBhcmFtIHRhcmdldCAtIFRoZSBIVE1MIGVsZW1lbnQgdG8gcmV0cmlldmUgYSBEZXNpZ25Ub2tlbk5vZGUgZm9yXG4gICAgICovXG4gICAgc3RhdGljIGdldE9yQ3JlYXRlKHRhcmdldCkge1xuICAgICAgICByZXR1cm4gbm9kZUNhY2hlLmdldCh0YXJnZXQpIHx8IG5ldyBEZXNpZ25Ub2tlbk5vZGUodGFyZ2V0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRGV0ZXJtaW5lcyBpZiBhIERlc2lnblRva2VuTm9kZSBoYXMgYmVlbiBjcmVhdGVkIGZvciBhIHRhcmdldFxuICAgICAqIEBwYXJhbSB0YXJnZXQgLSBUaGUgZWxlbWVudCB0byB0ZXN0XG4gICAgICovXG4gICAgc3RhdGljIGV4aXN0c0Zvcih0YXJnZXQpIHtcbiAgICAgICAgcmV0dXJuIG5vZGVDYWNoZS5oYXModGFyZ2V0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2VhcmNoZXMgZm9yIGFuZCByZXR1cm4gdGhlIG5lYXJlc3QgcGFyZW50IERlc2lnblRva2VuTm9kZS5cbiAgICAgKiBOdWxsIGlzIHJldHVybmVkIGlmIG5vIG5vZGUgaXMgZm91bmQgb3IgdGhlIG5vZGUgcHJvdmlkZWQgaXMgZm9yIGEgZGVmYXVsdCBlbGVtZW50LlxuICAgICAqL1xuICAgIHN0YXRpYyBmaW5kUGFyZW50KG5vZGUpIHtcbiAgICAgICAgaWYgKCEoZGVmYXVsdEVsZW1lbnQgPT09IG5vZGUudGFyZ2V0KSkge1xuICAgICAgICAgICAgbGV0IHBhcmVudCA9IGNvbXBvc2VkUGFyZW50KG5vZGUudGFyZ2V0KTtcbiAgICAgICAgICAgIHdoaWxlIChwYXJlbnQgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBpZiAobm9kZUNhY2hlLmhhcyhwYXJlbnQpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBub2RlQ2FjaGUuZ2V0KHBhcmVudCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHBhcmVudCA9IGNvbXBvc2VkUGFyZW50KHBhcmVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gRGVzaWduVG9rZW5Ob2RlLmdldE9yQ3JlYXRlKGRlZmF1bHRFbGVtZW50KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRmluZHMgdGhlIGNsb3Nlc3Qgbm9kZSB3aXRoIGEgdmFsdWUgZXhwbGljaXRseSBhc3NpZ25lZCBmb3IgYSB0b2tlbiwgb3RoZXJ3aXNlIG51bGwuXG4gICAgICogQHBhcmFtIHRva2VuIC0gVGhlIHRva2VuIHRvIGxvb2sgZm9yXG4gICAgICogQHBhcmFtIHN0YXJ0IC0gVGhlIG5vZGUgdG8gc3RhcnQgbG9va2luZyBmb3IgdmFsdWUgYXNzaWdubWVudFxuICAgICAqIEByZXR1cm5zXG4gICAgICovXG4gICAgc3RhdGljIGZpbmRDbG9zZXN0QXNzaWduZWROb2RlKHRva2VuLCBzdGFydCkge1xuICAgICAgICBsZXQgY3VycmVudCA9IHN0YXJ0O1xuICAgICAgICBkbyB7XG4gICAgICAgICAgICBpZiAoY3VycmVudC5oYXModG9rZW4pKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGN1cnJlbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjdXJyZW50ID0gY3VycmVudC5wYXJlbnRcbiAgICAgICAgICAgICAgICA/IGN1cnJlbnQucGFyZW50XG4gICAgICAgICAgICAgICAgOiBjdXJyZW50LnRhcmdldCAhPT0gZGVmYXVsdEVsZW1lbnRcbiAgICAgICAgICAgICAgICAgICAgPyBEZXNpZ25Ub2tlbk5vZGUuZ2V0T3JDcmVhdGUoZGVmYXVsdEVsZW1lbnQpXG4gICAgICAgICAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgfSB3aGlsZSAoY3VycmVudCAhPT0gbnVsbCk7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgcGFyZW50IERlc2lnblRva2VuTm9kZSwgb3IgbnVsbC5cbiAgICAgKi9cbiAgICBnZXQgcGFyZW50KCkge1xuICAgICAgICByZXR1cm4gY2hpbGRUb1BhcmVudC5nZXQodGhpcykgfHwgbnVsbDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2hlY2tzIGlmIGEgdG9rZW4gaGFzIGJlZW4gYXNzaWduZWQgYW4gZXhwbGljaXQgdmFsdWUgdGhlIG5vZGUuXG4gICAgICogQHBhcmFtIHRva2VuIC0gdGhlIHRva2VuIHRvIGNoZWNrLlxuICAgICAqL1xuICAgIGhhcyh0b2tlbikge1xuICAgICAgICByZXR1cm4gdGhpcy5hc3NpZ25lZFZhbHVlcy5oYXModG9rZW4pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSB2YWx1ZSBvZiBhIHRva2VuIGZvciBhIG5vZGVcbiAgICAgKiBAcGFyYW0gdG9rZW4gLSBUaGUgdG9rZW4gdG8gcmV0cmlldmUgdGhlIHZhbHVlIGZvclxuICAgICAqIEByZXR1cm5zXG4gICAgICovXG4gICAgZ2V0KHRva2VuKSB7XG4gICAgICAgIGNvbnN0IHZhbHVlID0gdGhpcy5zdG9yZS5nZXQodG9rZW4pO1xuICAgICAgICBpZiAodmFsdWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHJhdyA9IHRoaXMuZ2V0UmF3KHRva2VuKTtcbiAgICAgICAgaWYgKHJhdyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aGlzLmh5ZHJhdGUodG9rZW4sIHJhdyk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXQodG9rZW4pO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHJpZXZlcyB0aGUgcmF3IGFzc2lnbmVkIHZhbHVlIG9mIGEgdG9rZW4gZnJvbSB0aGUgbmVhcmVzdCBhc3NpZ25lZCBub2RlLlxuICAgICAqIEBwYXJhbSB0b2tlbiAtIFRoZSB0b2tlbiB0byByZXRyaWV2ZSBhIHJhdyB2YWx1ZSBmb3JcbiAgICAgKiBAcmV0dXJuc1xuICAgICAqL1xuICAgIGdldFJhdyh0b2tlbikge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIGlmICh0aGlzLmFzc2lnbmVkVmFsdWVzLmhhcyh0b2tlbikpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmFzc2lnbmVkVmFsdWVzLmdldCh0b2tlbik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIChfYSA9IERlc2lnblRva2VuTm9kZS5maW5kQ2xvc2VzdEFzc2lnbmVkTm9kZSh0b2tlbiwgdGhpcykpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5nZXRSYXcodG9rZW4pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXRzIGEgdG9rZW4gdG8gYSB2YWx1ZSBmb3IgYSBub2RlXG4gICAgICogQHBhcmFtIHRva2VuIC0gVGhlIHRva2VuIHRvIHNldFxuICAgICAqIEBwYXJhbSB2YWx1ZSAtIFRoZSB2YWx1ZSB0byBzZXQgdGhlIHRva2VuIHRvXG4gICAgICovXG4gICAgc2V0KHRva2VuLCB2YWx1ZSkge1xuICAgICAgICBpZiAoRGVzaWduVG9rZW5JbXBsLmlzRGVyaXZlZERlc2lnblRva2VuVmFsdWUodGhpcy5hc3NpZ25lZFZhbHVlcy5nZXQodG9rZW4pKSkge1xuICAgICAgICAgICAgdGhpcy50ZWFyRG93bkJpbmRpbmdPYnNlcnZlcih0b2tlbik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5hc3NpZ25lZFZhbHVlcy5zZXQodG9rZW4sIHZhbHVlKTtcbiAgICAgICAgaWYgKERlc2lnblRva2VuSW1wbC5pc0Rlcml2ZWREZXNpZ25Ub2tlblZhbHVlKHZhbHVlKSkge1xuICAgICAgICAgICAgdGhpcy5zZXR1cEJpbmRpbmdPYnNlcnZlcih0b2tlbiwgdmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5zdG9yZS5zZXQodG9rZW4sIHZhbHVlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBEZWxldGVzIGEgdG9rZW4gdmFsdWUgZm9yIHRoZSBub2RlLlxuICAgICAqIEBwYXJhbSB0b2tlbiAtIFRoZSB0b2tlbiB0byBkZWxldGUgdGhlIHZhbHVlIGZvclxuICAgICAqL1xuICAgIGRlbGV0ZSh0b2tlbikge1xuICAgICAgICB0aGlzLmFzc2lnbmVkVmFsdWVzLmRlbGV0ZSh0b2tlbik7XG4gICAgICAgIHRoaXMudGVhckRvd25CaW5kaW5nT2JzZXJ2ZXIodG9rZW4pO1xuICAgICAgICBjb25zdCB1cHN0cmVhbSA9IHRoaXMuZ2V0UmF3KHRva2VuKTtcbiAgICAgICAgaWYgKHVwc3RyZWFtKSB7XG4gICAgICAgICAgICB0aGlzLmh5ZHJhdGUodG9rZW4sIHVwc3RyZWFtKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuc3RvcmUuZGVsZXRlKHRva2VuKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBJbnZva2VkIHdoZW4gdGhlIERlc2lnblRva2VuTm9kZS50YXJnZXQgaXMgYXR0YWNoZWQgdG8gdGhlIGRvY3VtZW50XG4gICAgICovXG4gICAgYmluZCgpIHtcbiAgICAgICAgY29uc3QgcGFyZW50ID0gRGVzaWduVG9rZW5Ob2RlLmZpbmRQYXJlbnQodGhpcyk7XG4gICAgICAgIGlmIChwYXJlbnQpIHtcbiAgICAgICAgICAgIHBhcmVudC5hcHBlbmRDaGlsZCh0aGlzKTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiB0aGlzLmFzc2lnbmVkVmFsdWVzLmtleXMoKSkge1xuICAgICAgICAgICAga2V5Lm5vdGlmeSh0aGlzLnRhcmdldCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogSW52b2tlZCB3aGVuIHRoZSBEZXNpZ25Ub2tlbk5vZGUudGFyZ2V0IGlzIGRldGFjaGVkIGZyb20gdGhlIGRvY3VtZW50XG4gICAgICovXG4gICAgdW5iaW5kKCkge1xuICAgICAgICBpZiAodGhpcy5wYXJlbnQpIHtcbiAgICAgICAgICAgIGNvbnN0IHBhcmVudCA9IGNoaWxkVG9QYXJlbnQuZ2V0KHRoaXMpO1xuICAgICAgICAgICAgcGFyZW50LnJlbW92ZUNoaWxkKHRoaXMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFwcGVuZHMgYSBjaGlsZCB0byBhIHBhcmVudCBEZXNpZ25Ub2tlbk5vZGUuXG4gICAgICogQHBhcmFtIGNoaWxkIC0gVGhlIGNoaWxkIHRvIGFwcGVuZCB0byB0aGUgbm9kZVxuICAgICAqL1xuICAgIGFwcGVuZENoaWxkKGNoaWxkKSB7XG4gICAgICAgIGlmIChjaGlsZC5wYXJlbnQpIHtcbiAgICAgICAgICAgIGNoaWxkVG9QYXJlbnQuZ2V0KGNoaWxkKS5yZW1vdmVDaGlsZChjaGlsZCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmVQYXJlbnQgPSB0aGlzLmNoaWxkcmVuLmZpbHRlcih4ID0+IGNoaWxkLmNvbnRhaW5zKHgpKTtcbiAgICAgICAgY2hpbGRUb1BhcmVudC5zZXQoY2hpbGQsIHRoaXMpO1xuICAgICAgICB0aGlzLmNoaWxkcmVuLnB1c2goY2hpbGQpO1xuICAgICAgICByZVBhcmVudC5mb3JFYWNoKHggPT4gY2hpbGQuYXBwZW5kQ2hpbGQoeCkpO1xuICAgICAgICBPYnNlcnZhYmxlLmdldE5vdGlmaWVyKHRoaXMuc3RvcmUpLnN1YnNjcmliZShjaGlsZCk7XG4gICAgICAgIC8vIEhvdyBjYW4gd2Ugbm90IG5vdGlmeSAqZXZlcnkqIHN1YnNjcmliZXI/XG4gICAgICAgIGZvciAoY29uc3QgW3Rva2VuLCB2YWx1ZV0gb2YgdGhpcy5zdG9yZS5hbGwoKSkge1xuICAgICAgICAgICAgY2hpbGQuaHlkcmF0ZSh0b2tlbiwgdGhpcy5iaW5kaW5nT2JzZXJ2ZXJzLmhhcyh0b2tlbikgPyB0aGlzLmdldFJhdyh0b2tlbikgOiB2YWx1ZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVtb3ZlcyBhIGNoaWxkIGZyb20gYSBub2RlLlxuICAgICAqIEBwYXJhbSBjaGlsZCAtIFRoZSBjaGlsZCB0byByZW1vdmUuXG4gICAgICovXG4gICAgcmVtb3ZlQ2hpbGQoY2hpbGQpIHtcbiAgICAgICAgY29uc3QgY2hpbGRJbmRleCA9IHRoaXMuY2hpbGRyZW4uaW5kZXhPZihjaGlsZCk7XG4gICAgICAgIGlmIChjaGlsZEluZGV4ICE9PSAtMSkge1xuICAgICAgICAgICAgdGhpcy5jaGlsZHJlbi5zcGxpY2UoY2hpbGRJbmRleCwgMSk7XG4gICAgICAgIH1cbiAgICAgICAgT2JzZXJ2YWJsZS5nZXROb3RpZmllcih0aGlzLnN0b3JlKS51bnN1YnNjcmliZShjaGlsZCk7XG4gICAgICAgIHJldHVybiBjaGlsZC5wYXJlbnQgPT09IHRoaXMgPyBjaGlsZFRvUGFyZW50LmRlbGV0ZShjaGlsZCkgOiBmYWxzZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGVzdHMgd2hldGhlciBhIHByb3ZpZGVkIG5vZGUgaXMgY29udGFpbmVkIGJ5XG4gICAgICogdGhlIGNhbGxpbmcgbm9kZS5cbiAgICAgKiBAcGFyYW0gdGVzdCAtIFRoZSBub2RlIHRvIHRlc3RcbiAgICAgKi9cbiAgICBjb250YWlucyh0ZXN0KSB7XG4gICAgICAgIHJldHVybiBjb21wb3NlZENvbnRhaW5zKHRoaXMudGFyZ2V0LCB0ZXN0LnRhcmdldCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEluc3RydWN0cyB0aGUgbm9kZSB0byByZWZsZWN0IGEgZGVzaWduIHRva2VuIGZvciB0aGUgcHJvdmlkZWQgdG9rZW4uXG4gICAgICogQHBhcmFtIHRva2VuIC0gVGhlIGRlc2lnbiB0b2tlbiB0byByZWZsZWN0XG4gICAgICovXG4gICAgcmVmbGVjdFRvQ1NTKHRva2VuKSB7XG4gICAgICAgIGlmICghdGhpcy5pc1JlZmxlY3RpbmcodG9rZW4pKSB7XG4gICAgICAgICAgICB0aGlzLnJlZmxlY3RpbmcuYWRkKHRva2VuKTtcbiAgICAgICAgICAgIERlc2lnblRva2VuTm9kZS5jc3NDdXN0b21Qcm9wZXJ0eVJlZmxlY3Rvci5zdGFydFJlZmxlY3Rpb24odG9rZW4sIHRoaXMudGFyZ2V0KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBTdG9wcyByZWZsZWN0aW5nIGEgRGVzaWduVG9rZW4gdG8gQ1NTXG4gICAgICogQHBhcmFtIHRva2VuIC0gVGhlIGRlc2lnbiB0b2tlbiB0byBzdG9wIHJlZmxlY3RpbmdcbiAgICAgKi9cbiAgICBzdG9wUmVmbGVjdFRvQ1NTKHRva2VuKSB7XG4gICAgICAgIGlmICh0aGlzLmlzUmVmbGVjdGluZyh0b2tlbikpIHtcbiAgICAgICAgICAgIHRoaXMucmVmbGVjdGluZy5kZWxldGUodG9rZW4pO1xuICAgICAgICAgICAgRGVzaWduVG9rZW5Ob2RlLmNzc0N1c3RvbVByb3BlcnR5UmVmbGVjdG9yLnN0b3BSZWZsZWN0aW9uKHRva2VuLCB0aGlzLnRhcmdldCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogRGV0ZXJtaW5lcyBpZiBhIHRva2VuIGlzIGJlaW5nIHJlZmxlY3RlZCB0byBDU1MgZm9yIGEgbm9kZS5cbiAgICAgKiBAcGFyYW0gdG9rZW4gLSBUaGUgdG9rZW4gdG8gY2hlY2sgZm9yIHJlZmxlY3Rpb25cbiAgICAgKiBAcmV0dXJuc1xuICAgICAqL1xuICAgIGlzUmVmbGVjdGluZyh0b2tlbikge1xuICAgICAgICByZXR1cm4gdGhpcy5yZWZsZWN0aW5nLmhhcyh0b2tlbik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEhhbmRsZSBjaGFuZ2VzIHRvIHVwc3RyZWFtIHRva2Vuc1xuICAgICAqIEBwYXJhbSBzb3VyY2UgLSBUaGUgcGFyZW50IERlc2lnblRva2VuTm9kZVxuICAgICAqIEBwYXJhbSBwcm9wZXJ0eSAtIFRoZSB0b2tlbiBJRCB0aGF0IGNoYW5nZWRcbiAgICAgKi9cbiAgICBoYW5kbGVDaGFuZ2Uoc291cmNlLCBwcm9wZXJ0eSkge1xuICAgICAgICBjb25zdCB0b2tlbiA9IERlc2lnblRva2VuSW1wbC5nZXRUb2tlbkJ5SWQocHJvcGVydHkpO1xuICAgICAgICBpZiAoIXRva2VuKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5oeWRyYXRlKHRva2VuLCB0aGlzLmdldFJhdyh0b2tlbikpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBIeWRyYXRlcyBhIHRva2VuIHdpdGggYSBEZXNpZ25Ub2tlblZhbHVlLCBtYWtpbmcgcmV0cmlldmFsIGF2YWlsYWJsZS5cbiAgICAgKiBAcGFyYW0gdG9rZW4gLSBUaGUgdG9rZW4gdG8gaHlkcmF0ZVxuICAgICAqIEBwYXJhbSB2YWx1ZSAtIFRoZSB2YWx1ZSB0byBoeWRyYXRlXG4gICAgICovXG4gICAgaHlkcmF0ZSh0b2tlbiwgdmFsdWUpIHtcbiAgICAgICAgaWYgKCF0aGlzLmhhcyh0b2tlbikpIHtcbiAgICAgICAgICAgIGNvbnN0IG9ic2VydmVyID0gdGhpcy5iaW5kaW5nT2JzZXJ2ZXJzLmdldCh0b2tlbik7XG4gICAgICAgICAgICBpZiAoRGVzaWduVG9rZW5JbXBsLmlzRGVyaXZlZERlc2lnblRva2VuVmFsdWUodmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgaWYgKG9ic2VydmVyKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIElmIHRoZSBiaW5kaW5nIHNvdXJjZSBkb2Vzbid0IG1hdGNoLCB3ZSBuZWVkXG4gICAgICAgICAgICAgICAgICAgIC8vIHRvIHVwZGF0ZSB0aGUgYmluZGluZ1xuICAgICAgICAgICAgICAgICAgICBpZiAob2JzZXJ2ZXIuc291cmNlICE9PSB2YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50ZWFyRG93bkJpbmRpbmdPYnNlcnZlcih0b2tlbik7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldHVwQmluZGluZ09ic2VydmVyKHRva2VuLCB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0dXBCaW5kaW5nT2JzZXJ2ZXIodG9rZW4sIHZhbHVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAob2JzZXJ2ZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50ZWFyRG93bkJpbmRpbmdPYnNlcnZlcih0b2tlbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuc3RvcmUuc2V0KHRva2VuLCB2YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0cyB1cCBhIGJpbmRpbmcgb2JzZXJ2ZXIgZm9yIGEgZGVyaXZlZCB0b2tlbiB2YWx1ZSB0aGF0IG5vdGlmaWVzIHRva2VuXG4gICAgICogc3Vic2NyaWJlcnMgb24gY2hhbmdlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHRva2VuIC0gVGhlIHRva2VuIHRvIG5vdGlmeSB3aGVuIHRoZSBiaW5kaW5nIHVwZGF0ZXNcbiAgICAgKiBAcGFyYW0gc291cmNlIC0gVGhlIGJpbmRpbmcgc291cmNlXG4gICAgICovXG4gICAgc2V0dXBCaW5kaW5nT2JzZXJ2ZXIodG9rZW4sIHNvdXJjZSkge1xuICAgICAgICBjb25zdCBiaW5kaW5nID0gbmV3IERlc2lnblRva2VuQmluZGluZ09ic2VydmVyKHNvdXJjZSwgdG9rZW4sIHRoaXMpO1xuICAgICAgICB0aGlzLmJpbmRpbmdPYnNlcnZlcnMuc2V0KHRva2VuLCBiaW5kaW5nKTtcbiAgICAgICAgcmV0dXJuIGJpbmRpbmc7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRlYXIgZG93biBhIGJpbmRpbmcgb2JzZXJ2ZXIgZm9yIGEgdG9rZW4uXG4gICAgICovXG4gICAgdGVhckRvd25CaW5kaW5nT2JzZXJ2ZXIodG9rZW4pIHtcbiAgICAgICAgaWYgKHRoaXMuYmluZGluZ09ic2VydmVycy5oYXModG9rZW4pKSB7XG4gICAgICAgICAgICB0aGlzLmJpbmRpbmdPYnNlcnZlcnMuZ2V0KHRva2VuKS5kaXNjb25uZWN0KCk7XG4gICAgICAgICAgICB0aGlzLmJpbmRpbmdPYnNlcnZlcnMuZGVsZXRlKHRva2VuKTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG59XG4vKipcbiAqIFJlc3BvbnNpYmxlIGZvciByZWZsZWN0aW5nIHRva2VucyB0byBDU1MgY3VzdG9tIHByb3BlcnRpZXNcbiAqL1xuRGVzaWduVG9rZW5Ob2RlLmNzc0N1c3RvbVByb3BlcnR5UmVmbGVjdG9yID0gbmV3IEN1c3RvbVByb3BlcnR5UmVmbGVjdG9yKCk7XG5fX2RlY29yYXRlKFtcbiAgICBvYnNlcnZhYmxlXG5dLCBEZXNpZ25Ub2tlbk5vZGUucHJvdG90eXBlLCBcImNoaWxkcmVuXCIsIHZvaWQgMCk7XG5mdW5jdGlvbiBjcmVhdGUobmFtZU9yQ29uZmlnKSB7XG4gICAgcmV0dXJuIERlc2lnblRva2VuSW1wbC5mcm9tKG5hbWVPckNvbmZpZyk7XG59XG4vKiBlc2xpbnQtZW5hYmxlIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnVzZWQtdmFycyAqL1xuLyoqXG4gKiBGYWN0b3J5IG9iamVjdCBmb3IgY3JlYXRpbmcge0BsaW5rIChEZXNpZ25Ub2tlbjppbnRlcmZhY2UpfSBpbnN0YW5jZXMuXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjb25zdCBEZXNpZ25Ub2tlbiA9IE9iamVjdC5mcmVlemUoe1xuICAgIGNyZWF0ZSxcbiAgICAvKipcbiAgICAgKiBJbmZvcm1zIERlc2lnblRva2VuIHRoYXQgYW4gSFRNTEVsZW1lbnQgZm9yIHdoaWNoIHRva2VucyBoYXZlXG4gICAgICogYmVlbiBzZXQgaGFzIGJlZW4gY29ubmVjdGVkIHRvIHRoZSBkb2N1bWVudC5cbiAgICAgKlxuICAgICAqIFRoZSBicm93c2VyIGRvZXMgbm90IHByb3ZpZGUgYSByZWxpYWJsZSBtZWNoYW5pc20gdG8gb2JzZXJ2ZSBhbiBIVE1MRWxlbWVudCdzIGNvbm5lY3RlZG5lc3NcbiAgICAgKiBpbiBhbGwgc2NlbmFyaW9zLCBzbyBpbnZva2luZyB0aGlzIG1ldGhvZCBtYW51YWxseSBpcyBuZWNlc3Nhcnkgd2hlbjpcbiAgICAgKlxuICAgICAqIDEuIFRva2VuIHZhbHVlcyBhcmUgc2V0IGZvciBhbiBIVE1MRWxlbWVudC5cbiAgICAgKiAyLiBUaGUgSFRNTEVsZW1lbnQgZG9lcyBub3QgaW5oZXJpdCBmcm9tIEZBU1RFbGVtZW50LlxuICAgICAqIDMuIFRoZSBIVE1MRWxlbWVudCBpcyBub3QgY29ubmVjdGVkIHRvIHRoZSBkb2N1bWVudCB3aGVuIHRva2VuIHZhbHVlcyBhcmUgc2V0LlxuICAgICAqXG4gICAgICogQHBhcmFtIGVsZW1lbnQgLSBUaGUgZWxlbWVudCB0byBub3RpZnlcbiAgICAgKiBAcmV0dXJucyAtIHRydWUgaWYgbm90aWZpY2F0aW9uIHdhcyBzdWNjZXNzZnVsLCBvdGhlcndpc2UgZmFsc2UuXG4gICAgICovXG4gICAgbm90aWZ5Q29ubmVjdGlvbihlbGVtZW50KSB7XG4gICAgICAgIGlmICghZWxlbWVudC5pc0Nvbm5lY3RlZCB8fCAhRGVzaWduVG9rZW5Ob2RlLmV4aXN0c0ZvcihlbGVtZW50KSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIERlc2lnblRva2VuTm9kZS5nZXRPckNyZWF0ZShlbGVtZW50KS5iaW5kKCk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH0sXG4gICAgLyoqXG4gICAgICogSW5mb3JtcyBEZXNpZ25Ub2tlbiB0aGF0IGFuIEhUTUxFbGVtZW50IGZvciB3aGljaCB0b2tlbnMgaGF2ZVxuICAgICAqIGJlZW4gc2V0IGhhcyBiZWVuIGRpc2Nvbm5lY3RlZCB0byB0aGUgZG9jdW1lbnQuXG4gICAgICpcbiAgICAgKiBUaGUgYnJvd3NlciBkb2VzIG5vdCBwcm92aWRlIGEgcmVsaWFibGUgbWVjaGFuaXNtIHRvIG9ic2VydmUgYW4gSFRNTEVsZW1lbnQncyBjb25uZWN0ZWRuZXNzXG4gICAgICogaW4gYWxsIHNjZW5hcmlvcywgc28gaW52b2tpbmcgdGhpcyBtZXRob2QgbWFudWFsbHkgaXMgbmVjZXNzYXJ5IHdoZW46XG4gICAgICpcbiAgICAgKiAxLiBUb2tlbiB2YWx1ZXMgYXJlIHNldCBmb3IgYW4gSFRNTEVsZW1lbnQuXG4gICAgICogMi4gVGhlIEhUTUxFbGVtZW50IGRvZXMgbm90IGluaGVyaXQgZnJvbSBGQVNURWxlbWVudC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBlbGVtZW50IC0gVGhlIGVsZW1lbnQgdG8gbm90aWZ5XG4gICAgICogQHJldHVybnMgLSB0cnVlIGlmIG5vdGlmaWNhdGlvbiB3YXMgc3VjY2Vzc2Z1bCwgb3RoZXJ3aXNlIGZhbHNlLlxuICAgICAqL1xuICAgIG5vdGlmeURpc2Nvbm5lY3Rpb24oZWxlbWVudCkge1xuICAgICAgICBpZiAoZWxlbWVudC5pc0Nvbm5lY3RlZCB8fCAhRGVzaWduVG9rZW5Ob2RlLmV4aXN0c0ZvcihlbGVtZW50KSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIERlc2lnblRva2VuTm9kZS5nZXRPckNyZWF0ZShlbGVtZW50KS51bmJpbmQoKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBSZWdpc3RlcnMgYW5kIGVsZW1lbnQgb3IgZG9jdW1lbnQgYXMgYSBEZXNpZ25Ub2tlbiByb290LlxuICAgICAqIHtAbGluayBDU1NEZXNpZ25Ub2tlbiB8IENTU0Rlc2lnblRva2Vuc30gd2l0aCBkZWZhdWx0IHZhbHVlcyBhc3NpZ25lZCB2aWFcbiAgICAgKiB7QGxpbmsgKERlc2lnblRva2VuOmludGVyZmFjZSkud2l0aERlZmF1bHR9IHdpbGwgZW1pdCBDU1MgY3VzdG9tIHByb3BlcnRpZXMgdG8gYWxsXG4gICAgICogcmVnaXN0ZXJlZCByb290cy5cbiAgICAgKiBAcGFyYW0gdGFyZ2V0IC0gVGhlIHJvb3QgdG8gcmVnaXN0ZXJcbiAgICAgKi9cbiAgICByZWdpc3RlclJvb3QodGFyZ2V0ID0gZGVmYXVsdEVsZW1lbnQpIHtcbiAgICAgICAgUm9vdFN0eWxlU2hlZXRUYXJnZXQucmVnaXN0ZXJSb290KHRhcmdldCk7XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBVbnJlZ2lzdGVyIGFuIGVsZW1lbnQgb3IgZG9jdW1lbnQgYXMgYSBEZXNpZ25Ub2tlbiByb290LlxuICAgICAqIEBwYXJhbSB0YXJnZXQgLSBUaGUgcm9vdCB0byBkZXJlZ2lzdGVyXG4gICAgICovXG4gICAgdW5yZWdpc3RlclJvb3QodGFyZ2V0ID0gZGVmYXVsdEVsZW1lbnQpIHtcbiAgICAgICAgUm9vdFN0eWxlU2hlZXRUYXJnZXQudW5yZWdpc3RlclJvb3QodGFyZ2V0KTtcbiAgICB9LFxufSk7XG4vKiBlc2xpbnQtZW5hYmxlIEB0eXBlc2NyaXB0LWVzbGludC9uby1ub24tbnVsbC1hc3NlcnRpb24gKi9cbiIsIi8qKlxuICogQmlnIHRoYW5rcyB0byBodHRwczovL2dpdGh1Yi5jb20vZmtsZXV2ZXIgYW5kIHRoZSBodHRwczovL2dpdGh1Yi5jb20vYXVyZWxpYS9hdXJlbGlhIHByb2plY3RcbiAqIGZvciB0aGUgYnVsayBvZiB0aGlzIGNvZGUgYW5kIG1hbnkgb2YgdGhlIGFzc29jaWF0ZWQgdGVzdHMuXG4gKi9cbmltcG9ydCB7IGVtcHR5QXJyYXksIEZBU1RFbGVtZW50IH0gZnJvbSBcIkBtaWNyb3NvZnQvZmFzdC1lbGVtZW50XCI7XG4vLyBUaW55IHBvbHlmaWxsIGZvciBUeXBlU2NyaXB0J3MgUmVmbGVjdCBtZXRhZGF0YSBBUEkuXG5jb25zdCBtZXRhZGF0YUJ5VGFyZ2V0ID0gbmV3IE1hcCgpO1xuaWYgKCEoXCJtZXRhZGF0YVwiIGluIFJlZmxlY3QpKSB7XG4gICAgUmVmbGVjdC5tZXRhZGF0YSA9IGZ1bmN0aW9uIChrZXksIHZhbHVlKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAodGFyZ2V0KSB7XG4gICAgICAgICAgICBSZWZsZWN0LmRlZmluZU1ldGFkYXRhKGtleSwgdmFsdWUsIHRhcmdldCk7XG4gICAgICAgIH07XG4gICAgfTtcbiAgICBSZWZsZWN0LmRlZmluZU1ldGFkYXRhID0gZnVuY3Rpb24gKGtleSwgdmFsdWUsIHRhcmdldCkge1xuICAgICAgICBsZXQgbWV0YWRhdGEgPSBtZXRhZGF0YUJ5VGFyZ2V0LmdldCh0YXJnZXQpO1xuICAgICAgICBpZiAobWV0YWRhdGEgPT09IHZvaWQgMCkge1xuICAgICAgICAgICAgbWV0YWRhdGFCeVRhcmdldC5zZXQodGFyZ2V0LCAobWV0YWRhdGEgPSBuZXcgTWFwKCkpKTtcbiAgICAgICAgfVxuICAgICAgICBtZXRhZGF0YS5zZXQoa2V5LCB2YWx1ZSk7XG4gICAgfTtcbiAgICBSZWZsZWN0LmdldE93bk1ldGFkYXRhID0gZnVuY3Rpb24gKGtleSwgdGFyZ2V0KSB7XG4gICAgICAgIGNvbnN0IG1ldGFkYXRhID0gbWV0YWRhdGFCeVRhcmdldC5nZXQodGFyZ2V0KTtcbiAgICAgICAgaWYgKG1ldGFkYXRhICE9PSB2b2lkIDApIHtcbiAgICAgICAgICAgIHJldHVybiBtZXRhZGF0YS5nZXQoa2V5KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdm9pZCAwO1xuICAgIH07XG59XG4vKipcbiAqIEEgdXRpbGl0eSBjbGFzcyB1c2VkIHRoYXQgY29uc3RydWN0cyBhbmQgcmVnaXN0ZXJzIHJlc29sdmVycyBmb3IgYSBkZXBlbmRlbmN5XG4gKiBpbmplY3Rpb24gY29udGFpbmVyLiBTdXBwb3J0cyBhIHN0YW5kYXJkIHNldCBvZiBvYmplY3QgbGlmZXRpbWVzLlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgY2xhc3MgUmVzb2x2ZXJCdWlsZGVyIHtcbiAgICAvKipcbiAgICAgKlxuICAgICAqIEBwYXJhbSBjb250YWluZXIgLSBUaGUgY29udGFpbmVyIHRvIGNyZWF0ZSByZXNvbHZlcnMgZm9yLlxuICAgICAqIEBwYXJhbSBrZXkgLSBUaGUga2V5IHRvIHJlZ2lzdGVyIHJlc29sdmVycyB1bmRlci5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcihjb250YWluZXIsIGtleSkge1xuICAgICAgICB0aGlzLmNvbnRhaW5lciA9IGNvbnRhaW5lcjtcbiAgICAgICAgdGhpcy5rZXkgPSBrZXk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSByZXNvbHZlciBmb3IgYW4gZXhpc3Rpbmcgb2JqZWN0IGluc3RhbmNlLlxuICAgICAqIEBwYXJhbSB2YWx1ZSAtIFRoZSBpbnN0YW5jZSB0byByZXNvbHZlLlxuICAgICAqIEByZXR1cm5zIFRoZSByZXNvbHZlci5cbiAgICAgKi9cbiAgICBpbnN0YW5jZSh2YWx1ZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZWdpc3RlclJlc29sdmVyKDAgLyogaW5zdGFuY2UgKi8sIHZhbHVlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIHJlc29sdmVyIHRoYXQgZW5mb3JjZXMgYSBzaW5nbGV0b24gbGlmZXRpbWUuXG4gICAgICogQHBhcmFtIHZhbHVlIC0gVGhlIHR5cGUgdG8gY3JlYXRlIGFuZCBjYWNoZSB0aGUgc2luZ2xldG9uIGZvci5cbiAgICAgKiBAcmV0dXJucyBUaGUgcmVzb2x2ZXIuXG4gICAgICovXG4gICAgc2luZ2xldG9uKHZhbHVlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlZ2lzdGVyUmVzb2x2ZXIoMSAvKiBzaW5nbGV0b24gKi8sIHZhbHVlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIHJlc29sdmVyIHRoYXQgY3JlYXRlcyBhIG5ldyBpbnN0YW5jZSBmb3IgZXZlcnkgZGVwZW5kZW5jeSByZXF1ZXN0LlxuICAgICAqIEBwYXJhbSB2YWx1ZSAtIFRoZSB0eXBlIHRvIGNyZWF0ZSBpbnN0YW5jZXMgb2YuXG4gICAgICogQHJldHVybnMgLSBUaGUgcmVzb2x2ZXIuXG4gICAgICovXG4gICAgdHJhbnNpZW50KHZhbHVlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlZ2lzdGVyUmVzb2x2ZXIoMiAvKiB0cmFuc2llbnQgKi8sIHZhbHVlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIHJlc29sdmVyIHRoYXQgaW52b2tlcyBhIGNhbGxiYWNrIGZ1bmN0aW9uIGZvciBldmVyeSBkZXBlbmRlbmN5IHJlc29sdXRpb25cbiAgICAgKiByZXF1ZXN0LCBhbGxvd2luZyBjdXN0b20gbG9naWMgdG8gcmV0dXJuIHRoZSBkZXBlbmRlbmN5LlxuICAgICAqIEBwYXJhbSB2YWx1ZSAtIFRoZSBjYWxsYmFjayB0byBjYWxsIGR1cmluZyByZXNvbHV0aW9uLlxuICAgICAqIEByZXR1cm5zIFRoZSByZXNvbHZlci5cbiAgICAgKi9cbiAgICBjYWxsYmFjayh2YWx1ZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZWdpc3RlclJlc29sdmVyKDMgLyogY2FsbGJhY2sgKi8sIHZhbHVlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIHJlc29sdmVyIHRoYXQgaW52b2tlcyBhIGNhbGxiYWNrIGZ1bmN0aW9uIHRoZSBmaXJzdCB0aW1lIHRoYXQgYSBkZXBlbmRlbmN5XG4gICAgICogcmVzb2x1dGlvbiBpcyByZXF1ZXN0ZWQuIFRoZSByZXR1cm5lZCB2YWx1ZSBpcyB0aGVuIGNhY2hlZCBhbmQgcHJvdmlkZWQgZm9yIGFsbFxuICAgICAqIHN1YnNlcXVlbnQgcmVxdWVzdHMuXG4gICAgICogQHBhcmFtIHZhbHVlIC0gVGhlIGNhbGxiYWNrIHRvIGNhbGwgZHVyaW5nIHRoZSBmaXJzdCByZXNvbHV0aW9uLlxuICAgICAqIEByZXR1cm5zIFRoZSByZXNvbHZlci5cbiAgICAgKi9cbiAgICBjYWNoZWRDYWxsYmFjayh2YWx1ZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZWdpc3RlclJlc29sdmVyKDMgLyogY2FsbGJhY2sgKi8sIGNhY2hlQ2FsbGJhY2tSZXN1bHQodmFsdWUpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWxpYXNlcyB0aGUgY3VycmVudCBrZXkgdG8gYSBkaWZmZXJlbnQga2V5LlxuICAgICAqIEBwYXJhbSBkZXN0aW5hdGlvbktleSAtIFRoZSBrZXkgdG8gcG9pbnQgdGhlIGFsaWFzIHRvLlxuICAgICAqIEByZXR1cm5zIFRoZSByZXNvbHZlci5cbiAgICAgKi9cbiAgICBhbGlhc1RvKGRlc3RpbmF0aW9uS2V5KSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlZ2lzdGVyUmVzb2x2ZXIoNSAvKiBhbGlhcyAqLywgZGVzdGluYXRpb25LZXkpO1xuICAgIH1cbiAgICByZWdpc3RlclJlc29sdmVyKHN0cmF0ZWd5LCBzdGF0ZSkge1xuICAgICAgICBjb25zdCB7IGNvbnRhaW5lciwga2V5IH0gPSB0aGlzO1xuICAgICAgICAvKiBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLW5vbi1udWxsLWFzc2VydGlvbiAqL1xuICAgICAgICB0aGlzLmNvbnRhaW5lciA9IHRoaXMua2V5ID0gKHZvaWQgMCk7XG4gICAgICAgIHJldHVybiBjb250YWluZXIucmVnaXN0ZXJSZXNvbHZlcihrZXksIG5ldyBSZXNvbHZlckltcGwoa2V5LCBzdHJhdGVneSwgc3RhdGUpKTtcbiAgICB9XG59XG5mdW5jdGlvbiBjbG9uZUFycmF5V2l0aFBvc3NpYmxlUHJvcHMoc291cmNlKSB7XG4gICAgY29uc3QgY2xvbmUgPSBzb3VyY2Uuc2xpY2UoKTtcbiAgICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXMoc291cmNlKTtcbiAgICBjb25zdCBsZW4gPSBrZXlzLmxlbmd0aDtcbiAgICBsZXQga2V5O1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuOyArK2kpIHtcbiAgICAgICAga2V5ID0ga2V5c1tpXTtcbiAgICAgICAgaWYgKCFpc0FycmF5SW5kZXgoa2V5KSkge1xuICAgICAgICAgICAgY2xvbmVba2V5XSA9IHNvdXJjZVtrZXldO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBjbG9uZTtcbn1cbi8qKlxuICogQSBzZXQgb2YgZGVmYXVsdCByZXNvbHZlcnMgdXNlZnVsIGluIGNvbmZpZ3VyaW5nIGEgY29udGFpbmVyLlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgY29uc3QgRGVmYXVsdFJlc29sdmVyID0gT2JqZWN0LmZyZWV6ZSh7XG4gICAgLyoqXG4gICAgICogRGlzYWJsZXMgYXV0by1yZWdpc3RyYXRpb24gYW5kIHRocm93cyBmb3IgYWxsIHVuLXJlZ2lzdGVyZWQgZGVwZW5kZW5jaWVzLlxuICAgICAqIEBwYXJhbSBrZXkgLSBUaGUga2V5IHRvIGNyZWF0ZSB0aGUgcmVzb2x2ZXIgZm9yLlxuICAgICAqL1xuICAgIG5vbmUoa2V5KSB7XG4gICAgICAgIHRocm93IEVycm9yKGAke2tleS50b1N0cmluZygpfSBub3QgcmVnaXN0ZXJlZCwgZGlkIHlvdSBmb3JnZXQgdG8gYWRkIEBzaW5nbGV0b24oKT9gKTtcbiAgICB9LFxuICAgIC8qKlxuICAgICAqIFByb3ZpZGVzIGRlZmF1bHQgc2luZ2xldG9uIHJlc29sdXRpb24gYmVoYXZpb3IgZHVyaW5nIGF1dG8tcmVnaXN0cmF0aW9uLlxuICAgICAqIEBwYXJhbSBrZXkgLSBUaGUga2V5IHRvIGNyZWF0ZSB0aGUgcmVzb2x2ZXIgZm9yLlxuICAgICAqIEByZXR1cm5zIFRoZSByZXNvbHZlci5cbiAgICAgKi9cbiAgICBzaW5nbGV0b24oa2V5KSB7XG4gICAgICAgIHJldHVybiBuZXcgUmVzb2x2ZXJJbXBsKGtleSwgMSAvKiBzaW5nbGV0b24gKi8sIGtleSk7XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBQcm92aWRlcyBkZWZhdWx0IHRyYW5zaWVudCByZXNvbHV0aW9uIGJlaGF2aW9yIGR1cmluZyBhdXRvLXJlZ2lzdHJhdGlvbi5cbiAgICAgKiBAcGFyYW0ga2V5IC0gVGhlIGtleSB0byBjcmVhdGUgdGhlIHJlc29sdmVyIGZvci5cbiAgICAgKiBAcmV0dXJucyBUaGUgcmVzb2x2ZXIuXG4gICAgICovXG4gICAgdHJhbnNpZW50KGtleSkge1xuICAgICAgICByZXR1cm4gbmV3IFJlc29sdmVySW1wbChrZXksIDIgLyogdHJhbnNpZW50ICovLCBrZXkpO1xuICAgIH0sXG59KTtcbi8qKlxuICogQ29uZmlndXJhdGlvbiBmb3IgYSBkZXBlbmRlbmN5IGluamVjdGlvbiBjb250YWluZXIuXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjb25zdCBDb250YWluZXJDb25maWd1cmF0aW9uID0gT2JqZWN0LmZyZWV6ZSh7XG4gICAgLyoqXG4gICAgICogVGhlIGRlZmF1bHQgY29uZmlndXJhdGlvbiB1c2VkIHdoZW4gY3JlYXRpbmcgYSBET00tZGlzY29ubmVjdGVkIGNvbnRhaW5lci5cbiAgICAgKiBAcmVtYXJrc1xuICAgICAqIFRoZSBkZWZhdWx0IGNyZWF0ZXMgYSByb290IGNvbnRhaW5lciwgd2l0aCBubyBwYXJlbnQgY29udGFpbmVyLiBJdCBkb2VzIG5vdCBoYW5kbGVcbiAgICAgKiBvd25lciByZXF1ZXN0cyBhbmQgaXQgdXNlcyBzaW5nbGV0b24gcmVzb2x1dGlvbiBiZWhhdmlvciBmb3IgYXV0by1yZWdpc3RyYXRpb24uXG4gICAgICovXG4gICAgZGVmYXVsdDogT2JqZWN0LmZyZWV6ZSh7XG4gICAgICAgIHBhcmVudExvY2F0b3I6ICgpID0+IG51bGwsXG4gICAgICAgIHJlc3BvbnNpYmxlRm9yT3duZXJSZXF1ZXN0czogZmFsc2UsXG4gICAgICAgIGRlZmF1bHRSZXNvbHZlcjogRGVmYXVsdFJlc29sdmVyLnNpbmdsZXRvbixcbiAgICB9KSxcbn0pO1xuY29uc3QgZGVwZW5kZW5jeUxvb2t1cCA9IG5ldyBNYXAoKTtcbmZ1bmN0aW9uIGdldFBhcmFtVHlwZXMoa2V5KSB7XG4gICAgcmV0dXJuIChUeXBlKSA9PiB7XG4gICAgICAgIHJldHVybiBSZWZsZWN0LmdldE93bk1ldGFkYXRhKGtleSwgVHlwZSk7XG4gICAgfTtcbn1cbmxldCByb290RE9NQ29udGFpbmVyID0gbnVsbDtcbi8qKlxuICogVGhlIGdhdGV3YXkgdG8gZGVwZW5kZW5jeSBpbmplY3Rpb24gQVBJcy5cbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGNvbnN0IERJID0gT2JqZWN0LmZyZWV6ZSh7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyBkZXBlbmRlbmN5IGluamVjdGlvbiBjb250YWluZXIuXG4gICAgICogQHBhcmFtIGNvbmZpZyAtIFRoZSBjb25maWd1cmF0aW9uIGZvciB0aGUgY29udGFpbmVyLlxuICAgICAqIEByZXR1cm5zIEEgbmV3bHkgY3JlYXRlZCBkZXBlbmRlbmN5IGluamVjdGlvbiBjb250YWluZXIuXG4gICAgICovXG4gICAgY3JlYXRlQ29udGFpbmVyKGNvbmZpZykge1xuICAgICAgICByZXR1cm4gbmV3IENvbnRhaW5lckltcGwobnVsbCwgT2JqZWN0LmFzc2lnbih7fSwgQ29udGFpbmVyQ29uZmlndXJhdGlvbi5kZWZhdWx0LCBjb25maWcpKTtcbiAgICB9LFxuICAgIC8qKlxuICAgICAqIEZpbmRzIHRoZSBkZXBlbmRlbmN5IGluamVjdGlvbiBjb250YWluZXIgcmVzcG9uc2libGUgZm9yIHByb3ZpZGluZyBkZXBlbmRlbmNpZXNcbiAgICAgKiB0byB0aGUgc3BlY2lmaWVkIG5vZGUuXG4gICAgICogQHBhcmFtIG5vZGUgLSBUaGUgbm9kZSB0byBmaW5kIHRoZSByZXNwb25zaWJsZSBjb250YWluZXIgZm9yLlxuICAgICAqIEByZXR1cm5zIFRoZSBjb250YWluZXIgcmVzcG9uc2libGUgZm9yIHByb3ZpZGluZyBkZXBlbmRlbmNpZXMgdG8gdGhlIG5vZGUuXG4gICAgICogQHJlbWFya3NcbiAgICAgKiBUaGlzIHdpbGwgYmUgdGhlIHNhbWUgYXMgdGhlIHBhcmVudCBjb250YWluZXIgaWYgdGhlIHNwZWNpZmllZCBub2RlXG4gICAgICogZG9lcyBub3QgaXRzZWxmIGhvc3QgYSBjb250YWluZXIgY29uZmlndXJlZCB3aXRoIHJlc3BvbnNpYmxlRm9yT3duZXJSZXF1ZXN0cy5cbiAgICAgKi9cbiAgICBmaW5kUmVzcG9uc2libGVDb250YWluZXIobm9kZSkge1xuICAgICAgICBjb25zdCBvd25lZCA9IG5vZGUuJCRjb250YWluZXIkJDtcbiAgICAgICAgaWYgKG93bmVkICYmIG93bmVkLnJlc3BvbnNpYmxlRm9yT3duZXJSZXF1ZXN0cykge1xuICAgICAgICAgICAgcmV0dXJuIG93bmVkO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBESS5maW5kUGFyZW50Q29udGFpbmVyKG5vZGUpO1xuICAgIH0sXG4gICAgLyoqXG4gICAgICogRmluZCB0aGUgZGVwZW5kZW5jeSBpbmplY3Rpb24gY29udGFpbmVyIHVwIHRoZSBET00gdHJlZSBmcm9tIHRoaXMgbm9kZS5cbiAgICAgKiBAcGFyYW0gbm9kZSAtIFRoZSBub2RlIHRvIGZpbmQgdGhlIHBhcmVudCBjb250YWluZXIgZm9yLlxuICAgICAqIEByZXR1cm5zIFRoZSBwYXJlbnQgY29udGFpbmVyIG9mIHRoaXMgbm9kZS5cbiAgICAgKiBAcmVtYXJrc1xuICAgICAqIFRoaXMgd2lsbCBiZSB0aGUgc2FtZSBhcyB0aGUgcmVzcG9uc2libGUgY29udGFpbmVyIGlmIHRoZSBzcGVjaWZpZWQgbm9kZVxuICAgICAqIGRvZXMgbm90IGl0c2VsZiBob3N0IGEgY29udGFpbmVyIGNvbmZpZ3VyZWQgd2l0aCByZXNwb25zaWJsZUZvck93bmVyUmVxdWVzdHMuXG4gICAgICovXG4gICAgZmluZFBhcmVudENvbnRhaW5lcihub2RlKSB7XG4gICAgICAgIGNvbnN0IGV2ZW50ID0gbmV3IEN1c3RvbUV2ZW50KERJTG9jYXRlUGFyZW50RXZlbnRUeXBlLCB7XG4gICAgICAgICAgICBidWJibGVzOiB0cnVlLFxuICAgICAgICAgICAgY29tcG9zZWQ6IHRydWUsXG4gICAgICAgICAgICBjYW5jZWxhYmxlOiB0cnVlLFxuICAgICAgICAgICAgZGV0YWlsOiB7IGNvbnRhaW5lcjogdm9pZCAwIH0sXG4gICAgICAgIH0pO1xuICAgICAgICBub2RlLmRpc3BhdGNoRXZlbnQoZXZlbnQpO1xuICAgICAgICByZXR1cm4gZXZlbnQuZGV0YWlsLmNvbnRhaW5lciB8fCBESS5nZXRPckNyZWF0ZURPTUNvbnRhaW5lcigpO1xuICAgIH0sXG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIGRlcGVuZGVuY3kgaW5qZWN0aW9uIGNvbnRhaW5lciBpZiBvbmUgaXMgZXhwbGljaXRseSBvd25lZCBieSB0aGUgc3BlY2lmaWVkXG4gICAgICogbm9kZS4gSWYgb25lIGlzIG5vdCBvd25lZCwgdGhlbiBhIG5ldyBjb250YWluZXIgaXMgY3JlYXRlZCBhbmQgYXNzaWduZWQgdG8gdGhlIG5vZGUuXG4gICAgICogQHBhcmFtIG5vZGUgLSBUaGUgbm9kZSB0byBmaW5kIG9yIGNyZWF0ZSB0aGUgY29udGFpbmVyIGZvci5cbiAgICAgKiBAcGFyYW0gY29uZmlnIC0gVGhlIGNvbmZpZ3VyYXRpb24gZm9yIHRoZSBjb250YWluZXIgaWYgb25lIG5lZWRzIHRvIGJlIGNyZWF0ZWQuXG4gICAgICogQHJldHVybnMgVGhlIGxvY2F0ZWQgb3IgY3JlYXRlZCBjb250YWluZXIuXG4gICAgICogQHJlbWFya3NcbiAgICAgKiBUaGlzIEFQSSBkb2VzIG5vdCBzZWFyY2ggZm9yIGEgcmVzcG9uc2libGUgb3IgcGFyZW50IGNvbnRhaW5lci4gSXQgbG9va3Mgb25seSBmb3IgYSBjb250YWluZXJcbiAgICAgKiBkaXJlY3RseSBkZWZpbmVkIG9uIHRoZSBzcGVjaWZpZWQgbm9kZSBhbmQgY3JlYXRlcyBvbmUgYXQgdGhhdCBsb2NhdGlvbiBpZiBvbmUgZG9lcyBub3RcbiAgICAgKiBhbHJlYWR5IGV4aXN0LlxuICAgICAqL1xuICAgIGdldE9yQ3JlYXRlRE9NQ29udGFpbmVyKG5vZGUsIGNvbmZpZykge1xuICAgICAgICBpZiAoIW5vZGUpIHtcbiAgICAgICAgICAgIHJldHVybiAocm9vdERPTUNvbnRhaW5lciB8fFxuICAgICAgICAgICAgICAgIChyb290RE9NQ29udGFpbmVyID0gbmV3IENvbnRhaW5lckltcGwobnVsbCwgT2JqZWN0LmFzc2lnbih7fSwgQ29udGFpbmVyQ29uZmlndXJhdGlvbi5kZWZhdWx0LCBjb25maWcsIHtcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50TG9jYXRvcjogKCkgPT4gbnVsbCxcbiAgICAgICAgICAgICAgICB9KSkpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gKG5vZGUuJCRjb250YWluZXIkJCB8fFxuICAgICAgICAgICAgbmV3IENvbnRhaW5lckltcGwobm9kZSwgT2JqZWN0LmFzc2lnbih7fSwgQ29udGFpbmVyQ29uZmlndXJhdGlvbi5kZWZhdWx0LCBjb25maWcsIHtcbiAgICAgICAgICAgICAgICBwYXJlbnRMb2NhdG9yOiBESS5maW5kUGFyZW50Q29udGFpbmVyLFxuICAgICAgICAgICAgfSkpKTtcbiAgICB9LFxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIFwiZGVzaWduOnBhcmFtdHlwZXNcIiBtZXRhZGF0YSBmb3IgdGhlIHNwZWNpZmllZCB0eXBlLlxuICAgICAqIEBwYXJhbSBUeXBlIC0gVGhlIHR5cGUgdG8gZ2V0IHRoZSBtZXRhZGF0YSBmb3IuXG4gICAgICogQHJldHVybnMgVGhlIG1ldGFkYXRhIGFycmF5IG9yIHVuZGVmaW5lZCBpZiBubyBtZXRhZGF0YSBpcyBmb3VuZC5cbiAgICAgKi9cbiAgICBnZXREZXNpZ25QYXJhbXR5cGVzOiBnZXRQYXJhbVR5cGVzKFwiZGVzaWduOnBhcmFtdHlwZXNcIiksXG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgXCJkaTpwYXJhbXR5cGVzXCIgbWV0YWRhdGEgZm9yIHRoZSBzcGVjaWZpZWQgdHlwZS5cbiAgICAgKiBAcGFyYW0gVHlwZSAtIFRoZSB0eXBlIHRvIGdldCB0aGUgbWV0YWRhdGEgZm9yLlxuICAgICAqIEByZXR1cm5zIFRoZSBtZXRhZGF0YSBhcnJheSBvciB1bmRlZmluZWQgaWYgbm8gbWV0YWRhdGEgaXMgZm91bmQuXG4gICAgICovXG4gICAgZ2V0QW5ub3RhdGlvblBhcmFtdHlwZXM6IGdldFBhcmFtVHlwZXMoXCJkaTpwYXJhbXR5cGVzXCIpLFxuICAgIC8qKlxuICAgICAqXG4gICAgICogQHBhcmFtIFR5cGUgLSBHZXRzIHRoZSBcImRpOnBhcmFtdHlwZXNcIiBtZXRhZGF0YSBmb3IgdGhlIHNwZWNpZmllZCB0eXBlLiBJZiBub25lIGlzIGZvdW5kLFxuICAgICAqIGFuIGVtcHR5IG1ldGFkYXRhIGFycmF5IGlzIGNyZWF0ZWQgYW5kIGFkZGVkLlxuICAgICAqIEByZXR1cm5zIFRoZSBtZXRhZGF0YSBhcnJheS5cbiAgICAgKi9cbiAgICBnZXRPckNyZWF0ZUFubm90YXRpb25QYXJhbVR5cGVzKFR5cGUpIHtcbiAgICAgICAgbGV0IGFubm90YXRpb25QYXJhbXR5cGVzID0gdGhpcy5nZXRBbm5vdGF0aW9uUGFyYW10eXBlcyhUeXBlKTtcbiAgICAgICAgaWYgKGFubm90YXRpb25QYXJhbXR5cGVzID09PSB2b2lkIDApIHtcbiAgICAgICAgICAgIFJlZmxlY3QuZGVmaW5lTWV0YWRhdGEoXCJkaTpwYXJhbXR5cGVzXCIsIChhbm5vdGF0aW9uUGFyYW10eXBlcyA9IFtdKSwgVHlwZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGFubm90YXRpb25QYXJhbXR5cGVzO1xuICAgIH0sXG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgZGVwZW5kZW5jeSBrZXlzIHJlcHJlc2VudGluZyB3aGF0IGlzIG5lZWRlZCB0byBpbnN0YW50aWF0ZSB0aGUgc3BlY2lmaWVkIHR5cGUuXG4gICAgICogQHBhcmFtIFR5cGUgLSBUaGUgdHlwZSB0byBnZXQgdGhlIGRlcGVuZGVuY2llcyBmb3IuXG4gICAgICogQHJldHVybnMgQW4gYXJyYXkgb2YgZGVwZW5kZW5jeSBrZXlzLlxuICAgICAqL1xuICAgIGdldERlcGVuZGVuY2llcyhUeXBlKSB7XG4gICAgICAgIC8vIE5vdGU6IEV2ZXJ5IGRldGFpbCBvZiB0aGlzIGdldERlcGVuZGVuY2llcyBtZXRob2QgaXMgcHJldHR5IGRlbGliZXJhdGUgYXQgdGhlIG1vbWVudCwgYW5kIHByb2JhYmx5IG5vdCB5ZXQgMTAwJSB0ZXN0ZWQgZnJvbSBldmVyeSBwb3NzaWJsZSBhbmdsZSxcbiAgICAgICAgLy8gc28gYmUgY2FyZWZ1bCB3aXRoIG1ha2luZyBjaGFuZ2VzIGhlcmUgYXMgaXQgY2FuIGhhdmUgYSBodWdlIGltcGFjdCBvbiBjb21wbGV4IGVuZCB1c2VyIGFwcHMuXG4gICAgICAgIC8vIFByZWZlcmFibHksIG9ubHkgbWFrZSBjaGFuZ2VzIHRvIHRoZSBkZXBlbmRlbmN5IHJlc29sdXRpb24gcHJvY2VzcyB2aWEgYSBSRkMuXG4gICAgICAgIGxldCBkZXBlbmRlbmNpZXMgPSBkZXBlbmRlbmN5TG9va3VwLmdldChUeXBlKTtcbiAgICAgICAgaWYgKGRlcGVuZGVuY2llcyA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgICAvLyBUeXBlLmxlbmd0aCBpcyB0aGUgbnVtYmVyIG9mIGNvbnN0cnVjdG9yIHBhcmFtZXRlcnMuIElmIHRoaXMgaXMgMCwgaXQgY291bGQgbWVhbiB0aGUgY2xhc3MgaGFzIGFuIGVtcHR5IGNvbnN0cnVjdG9yXG4gICAgICAgICAgICAvLyBidXQgaXQgY291bGQgYWxzbyBtZWFuIHRoZSBjbGFzcyBoYXMgbm8gY29uc3RydWN0b3IgYXQgYWxsIChpbiB3aGljaCBjYXNlIGl0IGluaGVyaXRzIHRoZSBjb25zdHJ1Y3RvciBmcm9tIHRoZSBwcm90b3R5cGUpLlxuICAgICAgICAgICAgLy8gTm9uLXplcm8gY29uc3RydWN0b3IgbGVuZ3RoICsgbm8gcGFyYW10eXBlcyBtZWFucyBlbWl0RGVjb3JhdG9yTWV0YWRhdGEgaXMgb2ZmLCBvciB0aGUgY2xhc3MgaGFzIG5vIGRlY29yYXRvci5cbiAgICAgICAgICAgIC8vIFdlJ3JlIG5vdCBkb2luZyBhbnl0aGluZyB3aXRoIHRoZSBhYm92ZSByaWdodCBub3csIGJ1dCBpdCdzIGdvb2QgdG8ga2VlcCBpbiBtaW5kIGZvciBhbnkgZnV0dXJlIGlzc3Vlcy5cbiAgICAgICAgICAgIGNvbnN0IGluamVjdCA9IFR5cGUuaW5qZWN0O1xuICAgICAgICAgICAgaWYgKGluamVjdCA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgICAgICAgLy8gZGVzaWduOnBhcmFtdHlwZXMgaXMgc2V0IGJ5IHRzYyB3aGVuIGVtaXREZWNvcmF0b3JNZXRhZGF0YSBpcyBlbmFibGVkLlxuICAgICAgICAgICAgICAgIGNvbnN0IGRlc2lnblBhcmFtdHlwZXMgPSBESS5nZXREZXNpZ25QYXJhbXR5cGVzKFR5cGUpO1xuICAgICAgICAgICAgICAgIC8vIGRpOnBhcmFtdHlwZXMgaXMgc2V0IGJ5IHRoZSBwYXJhbWV0ZXIgZGVjb3JhdG9yIGZyb20gREkuY3JlYXRlSW50ZXJmYWNlIG9yIGJ5IEBpbmplY3RcbiAgICAgICAgICAgICAgICBjb25zdCBhbm5vdGF0aW9uUGFyYW10eXBlcyA9IERJLmdldEFubm90YXRpb25QYXJhbXR5cGVzKFR5cGUpO1xuICAgICAgICAgICAgICAgIGlmIChkZXNpZ25QYXJhbXR5cGVzID09PSB2b2lkIDApIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFubm90YXRpb25QYXJhbXR5cGVzID09PSB2b2lkIDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIE9ubHkgZ28gdXAgdGhlIHByb3RvdHlwZSBpZiBuZWl0aGVyIHN0YXRpYyBpbmplY3Qgbm9yIGFueSBvZiB0aGUgcGFyYW10eXBlcyBpcyBkZWZpbmVkLCBhc1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhlcmUgaXMgbm8gc291bmQgd2F5IHRvIG1lcmdlIGEgdHlwZSdzIGRlcHMgd2l0aCBpdHMgcHJvdG90eXBlJ3MgZGVwc1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgUHJvdG8gPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YoVHlwZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIFByb3RvID09PSBcImZ1bmN0aW9uXCIgJiYgUHJvdG8gIT09IEZ1bmN0aW9uLnByb3RvdHlwZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlcGVuZGVuY2llcyA9IGNsb25lQXJyYXlXaXRoUG9zc2libGVQcm9wcyhESS5nZXREZXBlbmRlbmNpZXMoUHJvdG8pKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlcGVuZGVuY2llcyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gTm8gZGVzaWduOnBhcmFtdHlwZXMgc28ganVzdCB1c2UgdGhlIGRpOnBhcmFtdHlwZXNcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlcGVuZGVuY2llcyA9IGNsb25lQXJyYXlXaXRoUG9zc2libGVQcm9wcyhhbm5vdGF0aW9uUGFyYW10eXBlcyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoYW5ub3RhdGlvblBhcmFtdHlwZXMgPT09IHZvaWQgMCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBObyBkaTpwYXJhbXR5cGVzIHNvIGp1c3QgdXNlIHRoZSBkZXNpZ246cGFyYW10eXBlc1xuICAgICAgICAgICAgICAgICAgICBkZXBlbmRlbmNpZXMgPSBjbG9uZUFycmF5V2l0aFBvc3NpYmxlUHJvcHMoZGVzaWduUGFyYW10eXBlcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvLyBXZSd2ZSBnb3QgYm90aCwgc28gbWVyZ2UgdGhlbSAoaW4gY2FzZSBvZiBjb25mbGljdCBvbiBzYW1lIGluZGV4LCBkaTpwYXJhbXR5cGVzIHRha2UgcHJlY2VkZW5jZSlcbiAgICAgICAgICAgICAgICAgICAgZGVwZW5kZW5jaWVzID0gY2xvbmVBcnJheVdpdGhQb3NzaWJsZVByb3BzKGRlc2lnblBhcmFtdHlwZXMpO1xuICAgICAgICAgICAgICAgICAgICBsZXQgbGVuID0gYW5ub3RhdGlvblBhcmFtdHlwZXMubGVuZ3RoO1xuICAgICAgICAgICAgICAgICAgICBsZXQgYXVBbm5vdGF0aW9uUGFyYW10eXBlO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbjsgKytpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhdUFubm90YXRpb25QYXJhbXR5cGUgPSBhbm5vdGF0aW9uUGFyYW10eXBlc1tpXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhdUFubm90YXRpb25QYXJhbXR5cGUgIT09IHZvaWQgMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlcGVuZGVuY2llc1tpXSA9IGF1QW5ub3RhdGlvblBhcmFtdHlwZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXMoYW5ub3RhdGlvblBhcmFtdHlwZXMpO1xuICAgICAgICAgICAgICAgICAgICBsZW4gPSBrZXlzLmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGtleTtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW47ICsraSkge1xuICAgICAgICAgICAgICAgICAgICAgICAga2V5ID0ga2V5c1tpXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghaXNBcnJheUluZGV4KGtleSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXBlbmRlbmNpZXNba2V5XSA9IGFubm90YXRpb25QYXJhbXR5cGVzW2tleV07XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBJZ25vcmUgcGFyYW10eXBlcyBpZiB3ZSBoYXZlIHN0YXRpYyBpbmplY3RcbiAgICAgICAgICAgICAgICBkZXBlbmRlbmNpZXMgPSBjbG9uZUFycmF5V2l0aFBvc3NpYmxlUHJvcHMoaW5qZWN0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGRlcGVuZGVuY3lMb29rdXAuc2V0KFR5cGUsIGRlcGVuZGVuY2llcyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGRlcGVuZGVuY2llcztcbiAgICB9LFxuICAgIC8qKlxuICAgICAqIERlZmluZXMgYSBwcm9wZXJ0eSBvbiBhIHdlYiBjb21wb25lbnQgY2xhc3MuIFRoZSB2YWx1ZSBvZiB0aGlzIHByb3BlcnR5IHdpbGxcbiAgICAgKiBiZSByZXNvbHZlZCBmcm9tIHRoZSBkZXBlbmRlbmN5IGluamVjdGlvbiBjb250YWluZXIgcmVzcG9uc2libGUgZm9yIHRoZSBlbGVtZW50XG4gICAgICogaW5zdGFuY2UsIGJhc2VkIG9uIHdoZXJlIGl0IGlzIGNvbm5lY3RlZCBpbiB0aGUgRE9NLlxuICAgICAqIEBwYXJhbSB0YXJnZXQgLSBUaGUgdGFyZ2V0IHRvIGRlZmluZSB0aGUgcHJvcGVydHkgb24uXG4gICAgICogQHBhcmFtIHByb3BlcnR5TmFtZSAtIFRoZSBuYW1lIG9mIHRoZSBwcm9wZXJ0eSB0byBkZWZpbmUuXG4gICAgICogQHBhcmFtIGtleSAtIFRoZSBkZXBlbmRlbmN5IGluamVjdGlvbiBrZXkuXG4gICAgICogQHBhcmFtIHJlc3BlY3RDb25uZWN0aW9uIC0gSW5kaWNhdGVzIHdoZXRoZXIgb3Igbm90IHRvIHVwZGF0ZSB0aGUgcHJvcGVydHkgdmFsdWUgaWYgdGhlXG4gICAgICogaG9zdGluZyBjb21wb25lbnQgaXMgZGlzY29ubmVjdGVkIGFuZCB0aGVuIHJlLWNvbm5lY3RlZCBhdCBhIGRpZmZlcmVudCBsb2NhdGlvbiBpbiB0aGUgRE9NLlxuICAgICAqIEByZW1hcmtzXG4gICAgICogVGhlIHJlc3BlY3RDb25uZWN0aW9uIG9wdGlvbiBpcyBvbmx5IGFwcGxpY2FibGUgdG8gZWxlbWVudHMgdGhhdCBkZXNjZW5kIGZyb20gRkFTVEVsZW1lbnQuXG4gICAgICovXG4gICAgZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBwcm9wZXJ0eU5hbWUsIGtleSwgcmVzcGVjdENvbm5lY3Rpb24gPSBmYWxzZSkge1xuICAgICAgICBjb25zdCBkaVByb3BlcnR5S2V5ID0gYCRkaV8ke3Byb3BlcnR5TmFtZX1gO1xuICAgICAgICBSZWZsZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgcHJvcGVydHlOYW1lLCB7XG4gICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBsZXQgdmFsdWUgPSB0aGlzW2RpUHJvcGVydHlLZXldO1xuICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IHRoaXMgaW5zdGFuY2VvZiBIVE1MRWxlbWVudFxuICAgICAgICAgICAgICAgICAgICAgICAgPyBESS5maW5kUmVzcG9uc2libGVDb250YWluZXIodGhpcylcbiAgICAgICAgICAgICAgICAgICAgICAgIDogREkuZ2V0T3JDcmVhdGVET01Db250YWluZXIoKTtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBjb250YWluZXIuZ2V0KGtleSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXNbZGlQcm9wZXJ0eUtleV0gPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3BlY3RDb25uZWN0aW9uICYmIHRoaXMgaW5zdGFuY2VvZiBGQVNURWxlbWVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgbm90aWZpZXIgPSB0aGlzLiRmYXN0Q29udHJvbGxlcjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGhhbmRsZUNoYW5nZSA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdDb250YWluZXIgPSBESS5maW5kUmVzcG9uc2libGVDb250YWluZXIodGhpcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3VmFsdWUgPSBuZXdDb250YWluZXIuZ2V0KGtleSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgb2xkVmFsdWUgPSB0aGlzW2RpUHJvcGVydHlLZXldO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuZXdWYWx1ZSAhPT0gb2xkVmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1tkaVByb3BlcnR5S2V5XSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3RpZmllci5ub3RpZnkocHJvcGVydHlOYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgbm90aWZpZXIuc3Vic2NyaWJlKHsgaGFuZGxlQ2hhbmdlIH0sIFwiaXNDb25uZWN0ZWRcIik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgZGVwZW5kZW5jeSBpbmplY3Rpb24ga2V5LlxuICAgICAqIEBwYXJhbSBuYW1lQ29uZmlnT3JDYWxsYmFjayAtIEEgZnJpZW5kbHkgbmFtZSBmb3IgdGhlIGtleSBvciBhIGxhbWJkYSB0aGF0IGNvbmZpZ3VyZXMgYVxuICAgICAqIGRlZmF1bHQgcmVzb2x1dGlvbiBmb3IgdGhlIGRlcGVuZGVuY3kuXG4gICAgICogQHBhcmFtIGNvbmZpZ3Vyb3IgLSBJZiBhIGZyaWVuZGx5IG5hbWUgd2FzIHByb3ZpZGVkIGZvciB0aGUgZmlyc3QgcGFyYW1ldGVyLCB0aGVuIGFuIG9wdGlvbmFsXG4gICAgICogbGFtYmRhIHRoYXQgY29uZmlndXJlcyBhIGRlZmF1bHQgcmVzb2x1dGlvbiBmb3IgdGhlIGRlcGVuZGVuY3kgY2FuIGJlIHByb3ZpZGVkIHNlY29uZC5cbiAgICAgKiBAcmV0dXJucyBUaGUgY3JlYXRlZCBrZXkuXG4gICAgICogQHJlbWFya3NcbiAgICAgKiBUaGUgY3JlYXRlZCBrZXkgY2FuIGJlIHVzZWQgYXMgYSBwcm9wZXJ0eSBkZWNvcmF0b3Igb3IgY29uc3RydWN0b3IgcGFyYW1ldGVyIGRlY29yYXRvcixcbiAgICAgKiBpbiBhZGRpdGlvbiB0byBpdHMgc3RhbmRhcmQgdXNlIGluIGFuIGluamVjdCBhcnJheSBvciB0aHJvdWdoIGRpcmVjdCBjb250YWluZXIgQVBJcy5cbiAgICAgKi9cbiAgICBjcmVhdGVJbnRlcmZhY2UobmFtZUNvbmZpZ09yQ2FsbGJhY2ssIGNvbmZpZ3Vyb3IpIHtcbiAgICAgICAgY29uc3QgY29uZmlndXJlID0gdHlwZW9mIG5hbWVDb25maWdPckNhbGxiYWNrID09PSBcImZ1bmN0aW9uXCJcbiAgICAgICAgICAgID8gbmFtZUNvbmZpZ09yQ2FsbGJhY2tcbiAgICAgICAgICAgIDogY29uZmlndXJvcjtcbiAgICAgICAgY29uc3QgZnJpZW5kbHlOYW1lID0gdHlwZW9mIG5hbWVDb25maWdPckNhbGxiYWNrID09PSBcInN0cmluZ1wiXG4gICAgICAgICAgICA/IG5hbWVDb25maWdPckNhbGxiYWNrXG4gICAgICAgICAgICA6IG5hbWVDb25maWdPckNhbGxiYWNrICYmIFwiZnJpZW5kbHlOYW1lXCIgaW4gbmFtZUNvbmZpZ09yQ2FsbGJhY2tcbiAgICAgICAgICAgICAgICA/IG5hbWVDb25maWdPckNhbGxiYWNrLmZyaWVuZGx5TmFtZSB8fCBkZWZhdWx0RnJpZW5kbHlOYW1lXG4gICAgICAgICAgICAgICAgOiBkZWZhdWx0RnJpZW5kbHlOYW1lO1xuICAgICAgICBjb25zdCByZXNwZWN0Q29ubmVjdGlvbiA9IHR5cGVvZiBuYW1lQ29uZmlnT3JDYWxsYmFjayA9PT0gXCJzdHJpbmdcIlxuICAgICAgICAgICAgPyBmYWxzZVxuICAgICAgICAgICAgOiBuYW1lQ29uZmlnT3JDYWxsYmFjayAmJiBcInJlc3BlY3RDb25uZWN0aW9uXCIgaW4gbmFtZUNvbmZpZ09yQ2FsbGJhY2tcbiAgICAgICAgICAgICAgICA/IG5hbWVDb25maWdPckNhbGxiYWNrLnJlc3BlY3RDb25uZWN0aW9uIHx8IGZhbHNlXG4gICAgICAgICAgICAgICAgOiBmYWxzZTtcbiAgICAgICAgY29uc3QgSW50ZXJmYWNlID0gZnVuY3Rpb24gKHRhcmdldCwgcHJvcGVydHksIGluZGV4KSB7XG4gICAgICAgICAgICBpZiAodGFyZ2V0ID09IG51bGwgfHwgbmV3LnRhcmdldCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBObyByZWdpc3RyYXRpb24gZm9yIGludGVyZmFjZTogJyR7SW50ZXJmYWNlLmZyaWVuZGx5TmFtZX0nYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocHJvcGVydHkpIHtcbiAgICAgICAgICAgICAgICBESS5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIHByb3BlcnR5LCBJbnRlcmZhY2UsIHJlc3BlY3RDb25uZWN0aW9uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnN0IGFubm90YXRpb25QYXJhbXR5cGVzID0gREkuZ2V0T3JDcmVhdGVBbm5vdGF0aW9uUGFyYW1UeXBlcyh0YXJnZXQpO1xuICAgICAgICAgICAgICAgIGFubm90YXRpb25QYXJhbXR5cGVzW2luZGV4XSA9IEludGVyZmFjZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgSW50ZXJmYWNlLiRpc0ludGVyZmFjZSA9IHRydWU7XG4gICAgICAgIEludGVyZmFjZS5mcmllbmRseU5hbWUgPSBmcmllbmRseU5hbWUgPT0gbnVsbCA/IFwiKGFub255bW91cylcIiA6IGZyaWVuZGx5TmFtZTtcbiAgICAgICAgaWYgKGNvbmZpZ3VyZSAhPSBudWxsKSB7XG4gICAgICAgICAgICBJbnRlcmZhY2UucmVnaXN0ZXIgPSBmdW5jdGlvbiAoY29udGFpbmVyLCBrZXkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY29uZmlndXJlKG5ldyBSZXNvbHZlckJ1aWxkZXIoY29udGFpbmVyLCBrZXkgIT09IG51bGwgJiYga2V5ICE9PSB2b2lkIDAgPyBrZXkgOiBJbnRlcmZhY2UpKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgSW50ZXJmYWNlLnRvU3RyaW5nID0gZnVuY3Rpb24gdG9TdHJpbmcoKSB7XG4gICAgICAgICAgICByZXR1cm4gYEludGVyZmFjZVN5bWJvbDwke0ludGVyZmFjZS5mcmllbmRseU5hbWV9PmA7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBJbnRlcmZhY2U7XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBBIGRlY29yYXRvciB0aGF0IHNwZWNpZmllcyB3aGF0IHRvIGluamVjdCBpbnRvIGl0cyB0YXJnZXQuXG4gICAgICogQHBhcmFtIGRlcGVuZGVuY2llcyAtIFRoZSBkZXBlbmRlbmNpZXMgdG8gaW5qZWN0LlxuICAgICAqIEByZXR1cm5zIFRoZSBkZWNvcmF0b3IgdG8gYmUgYXBwbGllZCB0byB0aGUgdGFyZ2V0IGNsYXNzLlxuICAgICAqIEByZW1hcmtzXG4gICAgICogVGhlIGRlY29yYXRvciBjYW4gYmUgdXNlZCB0byBkZWNvcmF0ZSBhIGNsYXNzLCBsaXN0aW5nIGFsbCBvZiB0aGUgY2xhc3NlcyBkZXBlbmRlbmNpZXMuXG4gICAgICogT3IgaXQgY2FuIGJlIHVzZWQgdG8gZGVjb3JhdGUgYSBjb25zdHJ1Y3RvciBwYXJhbXRlciwgaW5kaWNhdGluZyB3aGF0IHRvIGluamVjdCBmb3IgdGhhdFxuICAgICAqIHBhcmFtZXRlci5cbiAgICAgKiBPciBpdCBjYW4gYmUgdXNlZCBmb3IgYSB3ZWIgY29tcG9uZW50IHByb3BlcnR5LCBpbmRpY2F0aW5nIHdoYXQgdGhhdCBwcm9wZXJ0eSBzaG91bGQgcmVzb2x2ZSB0by5cbiAgICAgKi9cbiAgICBpbmplY3QoLi4uZGVwZW5kZW5jaWVzKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAodGFyZ2V0LCBrZXksIGRlc2NyaXB0b3IpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgZGVzY3JpcHRvciA9PT0gXCJudW1iZXJcIikge1xuICAgICAgICAgICAgICAgIC8vIEl0J3MgYSBwYXJhbWV0ZXIgZGVjb3JhdG9yLlxuICAgICAgICAgICAgICAgIGNvbnN0IGFubm90YXRpb25QYXJhbXR5cGVzID0gREkuZ2V0T3JDcmVhdGVBbm5vdGF0aW9uUGFyYW1UeXBlcyh0YXJnZXQpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGRlcCA9IGRlcGVuZGVuY2llc1swXTtcbiAgICAgICAgICAgICAgICBpZiAoZGVwICE9PSB2b2lkIDApIHtcbiAgICAgICAgICAgICAgICAgICAgYW5ub3RhdGlvblBhcmFtdHlwZXNbZGVzY3JpcHRvcl0gPSBkZXA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoa2V5KSB7XG4gICAgICAgICAgICAgICAgREkuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIGRlcGVuZGVuY2llc1swXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zdCBhbm5vdGF0aW9uUGFyYW10eXBlcyA9IGRlc2NyaXB0b3JcbiAgICAgICAgICAgICAgICAgICAgPyBESS5nZXRPckNyZWF0ZUFubm90YXRpb25QYXJhbVR5cGVzKGRlc2NyaXB0b3IudmFsdWUpXG4gICAgICAgICAgICAgICAgICAgIDogREkuZ2V0T3JDcmVhdGVBbm5vdGF0aW9uUGFyYW1UeXBlcyh0YXJnZXQpO1xuICAgICAgICAgICAgICAgIGxldCBkZXA7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkZXBlbmRlbmNpZXMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgICAgICAgICAgZGVwID0gZGVwZW5kZW5jaWVzW2ldO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZGVwICE9PSB2b2lkIDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFubm90YXRpb25QYXJhbXR5cGVzW2ldID0gZGVwO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH0sXG4gICAgLyoqXG4gICAgICogUmVnaXN0ZXJzIHRoZSBgdGFyZ2V0YCBjbGFzcyBhcyBhIHRyYW5zaWVudCBkZXBlbmRlbmN5OyBlYWNoIHRpbWUgdGhlIGRlcGVuZGVuY3kgaXMgcmVzb2x2ZWRcbiAgICAgKiBhIG5ldyBpbnN0YW5jZSB3aWxsIGJlIGNyZWF0ZWQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdGFyZ2V0IC0gVGhlIGNsYXNzIC8gY29uc3RydWN0b3IgZnVuY3Rpb24gdG8gcmVnaXN0ZXIgYXMgdHJhbnNpZW50LlxuICAgICAqIEByZXR1cm5zIFRoZSBzYW1lIGNsYXNzLCB3aXRoIGEgc3RhdGljIGByZWdpc3RlcmAgbWV0aG9kIHRoYXQgdGFrZXMgYSBjb250YWluZXIgYW5kIHJldHVybnMgdGhlIGFwcHJvcHJpYXRlIHJlc29sdmVyLlxuICAgICAqXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiBPbiBhbiBleGlzdGluZyBjbGFzc1xuICAgICAqIGBgYHRzXG4gICAgICogY2xhc3MgRm9vIHsgfVxuICAgICAqIERJLnRyYW5zaWVudChGb28pO1xuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiBJbmxpbmUgZGVjbGFyYXRpb25cbiAgICAgKlxuICAgICAqIGBgYHRzXG4gICAgICogY29uc3QgRm9vID0gREkudHJhbnNpZW50KGNsYXNzIHsgfSk7XG4gICAgICogLy8gRm9vIGlzIG5vdyBzdHJvbmdseSB0eXBlZCB3aXRoIHJlZ2lzdGVyXG4gICAgICogRm9vLnJlZ2lzdGVyKGNvbnRhaW5lcik7XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBAcHVibGljXG4gICAgICovXG4gICAgdHJhbnNpZW50KHRhcmdldCkge1xuICAgICAgICB0YXJnZXQucmVnaXN0ZXIgPSBmdW5jdGlvbiByZWdpc3Rlcihjb250YWluZXIpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlZ2lzdHJhdGlvbiA9IFJlZ2lzdHJhdGlvbi50cmFuc2llbnQodGFyZ2V0LCB0YXJnZXQpO1xuICAgICAgICAgICAgcmV0dXJuIHJlZ2lzdHJhdGlvbi5yZWdpc3Rlcihjb250YWluZXIpO1xuICAgICAgICB9O1xuICAgICAgICB0YXJnZXQucmVnaXN0ZXJJblJlcXVlc3RvciA9IGZhbHNlO1xuICAgICAgICByZXR1cm4gdGFyZ2V0O1xuICAgIH0sXG4gICAgLyoqXG4gICAgICogUmVnaXN0ZXJzIHRoZSBgdGFyZ2V0YCBjbGFzcyBhcyBhIHNpbmdsZXRvbiBkZXBlbmRlbmN5OyB0aGUgY2xhc3Mgd2lsbCBvbmx5IGJlIGNyZWF0ZWQgb25jZS4gRWFjaFxuICAgICAqIGNvbnNlY3V0aXZlIHRpbWUgdGhlIGRlcGVuZGVuY3kgaXMgcmVzb2x2ZWQsIHRoZSBzYW1lIGluc3RhbmNlIHdpbGwgYmUgcmV0dXJuZWQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdGFyZ2V0IC0gVGhlIGNsYXNzIC8gY29uc3RydWN0b3IgZnVuY3Rpb24gdG8gcmVnaXN0ZXIgYXMgYSBzaW5nbGV0b24uXG4gICAgICogQHJldHVybnMgVGhlIHNhbWUgY2xhc3MsIHdpdGggYSBzdGF0aWMgYHJlZ2lzdGVyYCBtZXRob2QgdGhhdCB0YWtlcyBhIGNvbnRhaW5lciBhbmQgcmV0dXJucyB0aGUgYXBwcm9wcmlhdGUgcmVzb2x2ZXIuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiBPbiBhbiBleGlzdGluZyBjbGFzc1xuICAgICAqIGBgYHRzXG4gICAgICogY2xhc3MgRm9vIHsgfVxuICAgICAqIERJLnNpbmdsZXRvbihGb28pO1xuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiBJbmxpbmUgZGVjbGFyYXRpb25cbiAgICAgKiBgYGB0c1xuICAgICAqIGNvbnN0IEZvbyA9IERJLnNpbmdsZXRvbihjbGFzcyB7IH0pO1xuICAgICAqIC8vIEZvbyBpcyBub3cgc3Ryb25nbHkgdHlwZWQgd2l0aCByZWdpc3RlclxuICAgICAqIEZvby5yZWdpc3Rlcihjb250YWluZXIpO1xuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogQHB1YmxpY1xuICAgICAqL1xuICAgIHNpbmdsZXRvbih0YXJnZXQsIG9wdGlvbnMgPSBkZWZhdWx0U2luZ2xldG9uT3B0aW9ucykge1xuICAgICAgICB0YXJnZXQucmVnaXN0ZXIgPSBmdW5jdGlvbiByZWdpc3Rlcihjb250YWluZXIpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlZ2lzdHJhdGlvbiA9IFJlZ2lzdHJhdGlvbi5zaW5nbGV0b24odGFyZ2V0LCB0YXJnZXQpO1xuICAgICAgICAgICAgcmV0dXJuIHJlZ2lzdHJhdGlvbi5yZWdpc3Rlcihjb250YWluZXIpO1xuICAgICAgICB9O1xuICAgICAgICB0YXJnZXQucmVnaXN0ZXJJblJlcXVlc3RvciA9IG9wdGlvbnMuc2NvcGVkO1xuICAgICAgICByZXR1cm4gdGFyZ2V0O1xuICAgIH0sXG59KTtcbi8qKlxuICogVGhlIGludGVyZmFjZSBrZXkgdGhhdCByZXNvbHZlcyB0aGUgZGVwZW5kZW5jeSBpbmplY3Rpb24gY29udGFpbmVyIGl0c2VsZi5cbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGNvbnN0IENvbnRhaW5lciA9IERJLmNyZWF0ZUludGVyZmFjZShcIkNvbnRhaW5lclwiKTtcbi8qKlxuICogVGhlIGludGVyZmFjZSBrZXkgdGhhdCByZXNvbHZlcyB0aGUgc2VydmljZSBsb2NhdG9yIGl0c2VsZi5cbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGNvbnN0IFNlcnZpY2VMb2NhdG9yID0gQ29udGFpbmVyO1xuZnVuY3Rpb24gY3JlYXRlUmVzb2x2ZXIoZ2V0dGVyKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgY29uc3QgcmVzb2x2ZXIgPSBmdW5jdGlvbiAodGFyZ2V0LCBwcm9wZXJ0eSwgZGVzY3JpcHRvcikge1xuICAgICAgICAgICAgREkuaW5qZWN0KHJlc29sdmVyKSh0YXJnZXQsIHByb3BlcnR5LCBkZXNjcmlwdG9yKTtcbiAgICAgICAgfTtcbiAgICAgICAgcmVzb2x2ZXIuJGlzUmVzb2x2ZXIgPSB0cnVlO1xuICAgICAgICByZXNvbHZlci5yZXNvbHZlID0gZnVuY3Rpb24gKGhhbmRsZXIsIHJlcXVlc3Rvcikge1xuICAgICAgICAgICAgcmV0dXJuIGdldHRlcihrZXksIGhhbmRsZXIsIHJlcXVlc3Rvcik7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiByZXNvbHZlcjtcbiAgICB9O1xufVxuLyoqXG4gKiBBIGRlY29yYXRvciB0aGF0IHNwZWNpZmllcyB3aGF0IHRvIGluamVjdCBpbnRvIGl0cyB0YXJnZXQuXG4gKiBAcGFyYW0gZGVwZW5kZW5jaWVzIC0gVGhlIGRlcGVuZGVuY2llcyB0byBpbmplY3QuXG4gKiBAcmV0dXJucyBUaGUgZGVjb3JhdG9yIHRvIGJlIGFwcGxpZWQgdG8gdGhlIHRhcmdldCBjbGFzcy5cbiAqIEByZW1hcmtzXG4gKiBUaGUgZGVjb3JhdG9yIGNhbiBiZSB1c2VkIHRvIGRlY29yYXRlIGEgY2xhc3MsIGxpc3RpbmcgYWxsIG9mIHRoZSBjbGFzc2VzIGRlcGVuZGVuY2llcy5cbiAqIE9yIGl0IGNhbiBiZSB1c2VkIHRvIGRlY29yYXRlIGEgY29uc3RydWN0b3IgcGFyYW10ZXIsIGluZGljYXRpbmcgd2hhdCB0byBpbmplY3QgZm9yIHRoYXRcbiAqIHBhcmFtZXRlci5cbiAqIE9yIGl0IGNhbiBiZSB1c2VkIGZvciBhIHdlYiBjb21wb25lbnQgcHJvcGVydHksIGluZGljYXRpbmcgd2hhdCB0aGF0IHByb3BlcnR5IHNob3VsZCByZXNvbHZlIHRvLlxuICpcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGNvbnN0IGluamVjdCA9IERJLmluamVjdDtcbmZ1bmN0aW9uIHRyYW5zaWVudERlY29yYXRvcih0YXJnZXQpIHtcbiAgICByZXR1cm4gREkudHJhbnNpZW50KHRhcmdldCk7XG59XG5leHBvcnQgZnVuY3Rpb24gdHJhbnNpZW50KHRhcmdldCkge1xuICAgIHJldHVybiB0YXJnZXQgPT0gbnVsbCA/IHRyYW5zaWVudERlY29yYXRvciA6IHRyYW5zaWVudERlY29yYXRvcih0YXJnZXQpO1xufVxuY29uc3QgZGVmYXVsdFNpbmdsZXRvbk9wdGlvbnMgPSB7IHNjb3BlZDogZmFsc2UgfTtcbmZ1bmN0aW9uIHNpbmdsZXRvbkRlY29yYXRvcih0YXJnZXQpIHtcbiAgICByZXR1cm4gREkuc2luZ2xldG9uKHRhcmdldCk7XG59XG4vKipcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNpbmdsZXRvbih0YXJnZXRPck9wdGlvbnMpIHtcbiAgICBpZiAodHlwZW9mIHRhcmdldE9yT3B0aW9ucyA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIHJldHVybiBESS5zaW5nbGV0b24odGFyZ2V0T3JPcHRpb25zKTtcbiAgICB9XG4gICAgcmV0dXJuIGZ1bmN0aW9uICgkdGFyZ2V0KSB7XG4gICAgICAgIHJldHVybiBESS5zaW5nbGV0b24oJHRhcmdldCwgdGFyZ2V0T3JPcHRpb25zKTtcbiAgICB9O1xufVxuZnVuY3Rpb24gY3JlYXRlQWxsUmVzb2x2ZXIoZ2V0dGVyKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChrZXksIHNlYXJjaEFuY2VzdG9ycykge1xuICAgICAgICBzZWFyY2hBbmNlc3RvcnMgPSAhIXNlYXJjaEFuY2VzdG9ycztcbiAgICAgICAgY29uc3QgcmVzb2x2ZXIgPSBmdW5jdGlvbiAodGFyZ2V0LCBwcm9wZXJ0eSwgZGVzY3JpcHRvcikge1xuICAgICAgICAgICAgREkuaW5qZWN0KHJlc29sdmVyKSh0YXJnZXQsIHByb3BlcnR5LCBkZXNjcmlwdG9yKTtcbiAgICAgICAgfTtcbiAgICAgICAgcmVzb2x2ZXIuJGlzUmVzb2x2ZXIgPSB0cnVlO1xuICAgICAgICByZXNvbHZlci5yZXNvbHZlID0gZnVuY3Rpb24gKGhhbmRsZXIsIHJlcXVlc3Rvcikge1xuICAgICAgICAgICAgLyogZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1ub24tbnVsbC1hc3NlcnRpb24gKi9cbiAgICAgICAgICAgIHJldHVybiBnZXR0ZXIoa2V5LCBoYW5kbGVyLCByZXF1ZXN0b3IsIHNlYXJjaEFuY2VzdG9ycyk7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiByZXNvbHZlcjtcbiAgICB9O1xufVxuLyoqXG4gKiBBIGRlY29yYXRvciBhbmQgREkgcmVzb2x2ZXIgdGhhdCB3aWxsIHJlc29sdmUgYW4gYXJyYXkgb2YgYWxsIGRlcGVuZGVuY2llc1xuICogcmVnaXN0ZXJlZCB3aXRoIHRoZSBzcGVjaWZpZWQga2V5LlxuICogQHBhcmFtIGtleSAtIFRoZSBrZXkgdG8gcmVzb2x2ZSBhbGwgZGVwZW5kZW5jaWVzIGZvci5cbiAqIEBwYXJhbSBzZWFyY2hBbmNlc3RvcnMgLSBbb3B0aW9uYWxdIEluZGljYXRlcyB3aGV0aGVyIHRvIHNlYXJjaCBhbmNlc3RvciBjb250YWluZXJzLlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgY29uc3QgYWxsID0gY3JlYXRlQWxsUmVzb2x2ZXIoKGtleSwgaGFuZGxlciwgcmVxdWVzdG9yLCBzZWFyY2hBbmNlc3RvcnMpID0+IHJlcXVlc3Rvci5nZXRBbGwoa2V5LCBzZWFyY2hBbmNlc3RvcnMpKTtcbi8qKlxuICogQSBkZWNvcmF0b3IgdGhhdCBsYXppbHkgaW5qZWN0cyBhIGRlcGVuZGVuY3kgZGVwZW5kaW5nIG9uIHdoZXRoZXIgdGhlIGBLZXlgIGlzIHByZXNlbnQgYXQgdGhlIHRpbWUgb2YgZnVuY3Rpb24gY2FsbC5cbiAqXG4gKiBAZXhhbXBsZVxuICogWW91IG5lZWQgdG8gbWFrZSB5b3VyIGFyZ3VtZW50IGEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIHRoZSB0eXBlLCBmb3IgZXhhbXBsZVxuICogYGBgdHNcbiAqIGNsYXNzIEZvbyB7XG4gKiAgIGNvbnN0cnVjdG9yKCBAbGF6eSgncmFuZG9tJykgcHVibGljIHJhbmRvbTogKCkgPT4gbnVtYmVyIClcbiAqIH1cbiAqIGNvbnN0IGZvbyA9IGNvbnRhaW5lci5nZXQoRm9vKTsgLy8gaW5zdGFuY2VvZiBGb29cbiAqIGZvby5yYW5kb20oKTsgLy8gdGhyb3dzXG4gKiBgYGBcbiAqIHdvdWxkIHRocm93IGFuIGV4Y2VwdGlvbiBiZWNhdXNlIHlvdSBoYXZlbid0IHJlZ2lzdGVyZWQgYCdyYW5kb20nYCBiZWZvcmUgY2FsbGluZyB0aGUgbWV0aG9kLlxuICogQGV4YW1wbGVcbiAqIFRoaXMsIHdvdWxkIGdpdmUgeW91IGEgbmV3ICdNYXRoLnJhbmRvbSgpJyBudW1iZXIgZWFjaCB0aW1lLlxuICogYGBgdHNcbiAqIGNsYXNzIEZvbyB7XG4gKiAgIGNvbnN0cnVjdG9yKCBAbGF6eSgncmFuZG9tJykgcHVibGljIHJhbmRvbTogKCkgPT4gcmFuZG9tIClcbiAqIH1cbiAqIGNvbnRhaW5lci5yZWdpc3RlcihSZWdpc3RyYXRpb24uY2FsbGJhY2soJ3JhbmRvbScsIE1hdGgucmFuZG9tICkpO1xuICogY29udGFpbmVyLmdldChGb28pLnJhbmRvbSgpOyAvLyBzb21lIHJhbmRvbSBudW1iZXJcbiAqIGNvbnRhaW5lci5nZXQoRm9vKS5yYW5kb20oKTsgLy8gYW5vdGhlciByYW5kb20gbnVtYmVyXG4gKiBgYGBcbiAqXG4gKiBgQGxhenlgIGRvZXMgbm90IG1hbmFnZSB0aGUgbGlmZWN5Y2xlIG9mIHRoZSB1bmRlcmx5aW5nIGtleS4gSWYgeW91IHdhbnQgYSBzaW5nbGV0b24sIHlvdSBoYXZlIHRvIHJlZ2lzdGVyIGFzIGFcbiAqIGBzaW5nbGV0b25gLCBgdHJhbnNpZW50YCB3b3VsZCBhbHNvIGJlaGF2ZSBhcyB5b3Ugd291bGQgZXhwZWN0LCBwcm92aWRpbmcgeW91IGEgbmV3IGluc3RhbmNlIGVhY2ggdGltZS5cbiAqXG4gKiBAcGFyYW0ga2V5IC0gVGhlIGtleSB0byBsYXppbHkgcmVzb2x2ZS5cbiAqIHNlZSB7QGxpbmsgREkuY3JlYXRlSW50ZXJmYWNlfSBvbiBpbnRlcmFjdGlvbnMgd2l0aCBpbnRlcmZhY2VzXG4gKlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgY29uc3QgbGF6eSA9IGNyZWF0ZVJlc29sdmVyKChrZXksIGhhbmRsZXIsIHJlcXVlc3RvcikgPT4ge1xuICAgIHJldHVybiAoKSA9PiByZXF1ZXN0b3IuZ2V0KGtleSk7XG59KTtcbi8qKlxuICogQSBkZWNvcmF0b3IgdGhhdCBhbGxvd3MgeW91IHRvIG9wdGlvbmFsbHkgaW5qZWN0IGEgZGVwZW5kZW5jeSBkZXBlbmRpbmcgb24gd2hldGhlciB0aGUgW1tgS2V5YF1dIGlzIHByZXNlbnQsIGZvciBleGFtcGxlOlxuICogQGV4YW1wbGVcbiAqIGBgYHRzXG4gKiBjbGFzcyBGb28ge1xuICogICBjb25zdHJ1Y3RvciggQGluamVjdCgnbXlzdHJpbmcnKSBwdWJsaWMgc3RyOiBzdHJpbmcgPSAnc29tZXN0cmluZycgKVxuICogfVxuICogY29udGFpbmVyLmdldChGb28pOyAvLyB0aHJvd3NcbiAqIGBgYFxuICogd291bGQgZmFpbFxuICpcbiAqIEBleGFtcGxlXG4gKiBgYGB0c1xuICogY2xhc3MgRm9vIHtcbiAqICAgY29uc3RydWN0b3IoIEBvcHRpb25hbCgnbXlzdHJpbmcnKSBwdWJsaWMgc3RyOiBzdHJpbmcgPSAnc29tZXN0cmluZycgKVxuICogfVxuICogY29udGFpbmVyLmdldChGb28pLnN0ciAvLyBzb21lc3RyaW5nXG4gKiBgYGBcbiAqIGlmIHlvdSB1c2UgaXQgd2l0aG91dCBhIGRlZmF1bHQgaXQgd2lsbCBpbmplY3QgYHVuZGVmaW5lZGAsIHNvIHJlbWVtYmVyIHRvIG1hcmsgeW91ciBpbnB1dCB0eXBlIGFzXG4gKiBwb3NzaWJseSBgdW5kZWZpbmVkYCFcbiAqXG4gKiBAcGFyYW0ga2V5IC0gVGhlIGtleSB0byBvcHRpb25hbGx5IHJlc29sdmUuXG4gKiBzZWUge0BsaW5rIERJLmNyZWF0ZUludGVyZmFjZX0gb24gaW50ZXJhY3Rpb25zIHdpdGggaW50ZXJmYWNlc1xuICpcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGNvbnN0IG9wdGlvbmFsID0gY3JlYXRlUmVzb2x2ZXIoKGtleSwgaGFuZGxlciwgcmVxdWVzdG9yKSA9PiB7XG4gICAgaWYgKHJlcXVlc3Rvci5oYXMoa2V5LCB0cnVlKSkge1xuICAgICAgICByZXR1cm4gcmVxdWVzdG9yLmdldChrZXkpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG59KTtcbi8qKlxuICogQSBkZWNvcmF0b3IgdGhhdCB0ZWxscyB0aGUgY29udGFpbmVyIG5vdCB0byB0cnkgdG8gaW5qZWN0IGEgZGVwZW5kZW5jeS5cbiAqXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpZ25vcmUodGFyZ2V0LCBwcm9wZXJ0eSwgZGVzY3JpcHRvcikge1xuICAgIERJLmluamVjdChpZ25vcmUpKHRhcmdldCwgcHJvcGVydHksIGRlc2NyaXB0b3IpO1xufVxuLy8gSGFjazogY2FzdGluZyBiZWxvdyB1c2VkIHRvIHByZXZlbnQgVFMgZnJvbSBnZW5lcmF0ZSBhIG5hbWVzcGFjZSB3aGljaCBjYW4ndCBiZSBjb21tZW50ZWRcbi8vIGFuZCByZXN1bHRzIGluIGRvY3VtZW50YXRpb24gdmFsaWRhdGlvbiBlcnJvcnMuXG5pZ25vcmUuJGlzUmVzb2x2ZXIgPSB0cnVlO1xuaWdub3JlLnJlc29sdmUgPSAoKSA9PiB1bmRlZmluZWQ7XG4vKipcbiAqIEEgZGVjb3JhdG9yIHRoYXQgaW5kaWNhdGVzIHRoYXQgYSBuZXcgaW5zdGFuY2Ugc2hvdWxkIGJlIGluamVjdGVkIHNjb3BlZCB0byB0aGVcbiAqIGNvbnRhaW5lciB0aGF0IHJlcXVlc3RlZCB0aGUgaW5zdGFuY2UuXG4gKiBAcGFyYW0ga2V5IC0gVGhlIGRlcGVuZGVuY3kga2V5IGZvciB0aGUgbmV3IGluc3RhbmNlLlxuICogQHJlbWFya3NcbiAqIFRoaXMgY3JlYXRlcyBhIHJlc29sdmVyIHdpdGggYW4gaW5zdGFuY2Ugc3RyYXRlZ3kgcG9pbnRpbmcgdG8gdGhlIG5ldyBpbnN0YW5jZSwgZWZmZWN0aXZlbHlcbiAqIG1ha2luZyB0aGlzIGEgc2luZ2xldG9uLCBzY29wZWQgdG8gdGhlIGNvbnRhaW5lciBvciBET00ncyBzdWJ0cmVlLlxuICpcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGNvbnN0IG5ld0luc3RhbmNlRm9yU2NvcGUgPSBjcmVhdGVSZXNvbHZlcigoa2V5LCBoYW5kbGVyLCByZXF1ZXN0b3IpID0+IHtcbiAgICBjb25zdCBpbnN0YW5jZSA9IGNyZWF0ZU5ld0luc3RhbmNlKGtleSwgaGFuZGxlcik7XG4gICAgY29uc3QgcmVzb2x2ZXIgPSBuZXcgUmVzb2x2ZXJJbXBsKGtleSwgMCAvKiBpbnN0YW5jZSAqLywgaW5zdGFuY2UpO1xuICAgIHJlcXVlc3Rvci5yZWdpc3RlclJlc29sdmVyKGtleSwgcmVzb2x2ZXIpO1xuICAgIHJldHVybiBpbnN0YW5jZTtcbn0pO1xuLyoqXG4gKiBBIGRlY29yYXRvciB0aGF0IGluZGljYXRlcyB0aGF0IGEgbmV3IGluc3RhbmNlIHNob3VsZCBiZSBpbmplY3RlZC5cbiAqIEBwYXJhbSBrZXkgLSBUaGUgZGVwZW5kZW5jeSBrZXkgZm9yIHRoZSBuZXcgaW5zdGFuY2UuXG4gKiBAcmVtYXJrc1xuICogVGhlIGluc3RhbmNlIGlzIG5vdCBpbnRlcm5hbGx5IGNhY2hlZCB3aXRoIGEgcmVzb2x2ZXIgYXMgbmV3SW5zdGFuY2VGb3JTY29wZSBkb2VzLlxuICpcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGNvbnN0IG5ld0luc3RhbmNlT2YgPSBjcmVhdGVSZXNvbHZlcigoa2V5LCBoYW5kbGVyLCBfcmVxdWVzdG9yKSA9PiBjcmVhdGVOZXdJbnN0YW5jZShrZXksIGhhbmRsZXIpKTtcbmZ1bmN0aW9uIGNyZWF0ZU5ld0luc3RhbmNlKGtleSwgaGFuZGxlcikge1xuICAgIC8qIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tbm9uLW51bGwtYXNzZXJ0aW9uICovXG4gICAgcmV0dXJuIGhhbmRsZXIuZ2V0RmFjdG9yeShrZXkpLmNvbnN0cnVjdChoYW5kbGVyKTtcbn1cbi8qKiBAaW50ZXJuYWwgKi9cbmV4cG9ydCBjbGFzcyBSZXNvbHZlckltcGwge1xuICAgIGNvbnN0cnVjdG9yKGtleSwgc3RyYXRlZ3ksIHN0YXRlKSB7XG4gICAgICAgIHRoaXMua2V5ID0ga2V5O1xuICAgICAgICB0aGlzLnN0cmF0ZWd5ID0gc3RyYXRlZ3k7XG4gICAgICAgIHRoaXMuc3RhdGUgPSBzdGF0ZTtcbiAgICAgICAgdGhpcy5yZXNvbHZpbmcgPSBmYWxzZTtcbiAgICB9XG4gICAgZ2V0ICRpc1Jlc29sdmVyKCkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmVnaXN0ZXIoY29udGFpbmVyKSB7XG4gICAgICAgIHJldHVybiBjb250YWluZXIucmVnaXN0ZXJSZXNvbHZlcih0aGlzLmtleSwgdGhpcyk7XG4gICAgfVxuICAgIHJlc29sdmUoaGFuZGxlciwgcmVxdWVzdG9yKSB7XG4gICAgICAgIHN3aXRjaCAodGhpcy5zdHJhdGVneSkge1xuICAgICAgICAgICAgY2FzZSAwIC8qIGluc3RhbmNlICovOlxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnN0YXRlO1xuICAgICAgICAgICAgY2FzZSAxIC8qIHNpbmdsZXRvbiAqLzoge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnJlc29sdmluZykge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEN5Y2xpYyBkZXBlbmRlbmN5IGZvdW5kOiAke3RoaXMuc3RhdGUubmFtZX1gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5yZXNvbHZpbmcgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUgPSBoYW5kbGVyXG4gICAgICAgICAgICAgICAgICAgIC5nZXRGYWN0b3J5KHRoaXMuc3RhdGUpXG4gICAgICAgICAgICAgICAgICAgIC5jb25zdHJ1Y3QocmVxdWVzdG9yKTtcbiAgICAgICAgICAgICAgICB0aGlzLnN0cmF0ZWd5ID0gMCAvKiBpbnN0YW5jZSAqLztcbiAgICAgICAgICAgICAgICB0aGlzLnJlc29sdmluZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnN0YXRlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FzZSAyIC8qIHRyYW5zaWVudCAqLzoge1xuICAgICAgICAgICAgICAgIC8vIEFsd2F5cyBjcmVhdGUgdHJhbnNpZW50cyBmcm9tIHRoZSByZXF1ZXN0aW5nIGNvbnRhaW5lclxuICAgICAgICAgICAgICAgIGNvbnN0IGZhY3RvcnkgPSBoYW5kbGVyLmdldEZhY3RvcnkodGhpcy5zdGF0ZSk7XG4gICAgICAgICAgICAgICAgaWYgKGZhY3RvcnkgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBSZXNvbHZlciBmb3IgJHtTdHJpbmcodGhpcy5rZXkpfSByZXR1cm5lZCBhIG51bGwgZmFjdG9yeWApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gZmFjdG9yeS5jb25zdHJ1Y3QocmVxdWVzdG9yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhc2UgMyAvKiBjYWxsYmFjayAqLzpcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5zdGF0ZShoYW5kbGVyLCByZXF1ZXN0b3IsIHRoaXMpO1xuICAgICAgICAgICAgY2FzZSA0IC8qIGFycmF5ICovOlxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnN0YXRlWzBdLnJlc29sdmUoaGFuZGxlciwgcmVxdWVzdG9yKTtcbiAgICAgICAgICAgIGNhc2UgNSAvKiBhbGlhcyAqLzpcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVxdWVzdG9yLmdldCh0aGlzLnN0YXRlKTtcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIHJlc29sdmVyIHN0cmF0ZWd5IHNwZWNpZmllZDogJHt0aGlzLnN0cmF0ZWd5fS5gKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXRGYWN0b3J5KGNvbnRhaW5lcikge1xuICAgICAgICB2YXIgX2EsIF9iLCBfYztcbiAgICAgICAgc3dpdGNoICh0aGlzLnN0cmF0ZWd5KSB7XG4gICAgICAgICAgICBjYXNlIDEgLyogc2luZ2xldG9uICovOlxuICAgICAgICAgICAgY2FzZSAyIC8qIHRyYW5zaWVudCAqLzpcbiAgICAgICAgICAgICAgICByZXR1cm4gY29udGFpbmVyLmdldEZhY3RvcnkodGhpcy5zdGF0ZSk7XG4gICAgICAgICAgICBjYXNlIDUgLyogYWxpYXMgKi86XG4gICAgICAgICAgICAgICAgcmV0dXJuIChfYyA9IChfYiA9IChfYSA9IGNvbnRhaW5lci5nZXRSZXNvbHZlcih0aGlzLnN0YXRlKSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmdldEZhY3RvcnkpID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi5jYWxsKF9hLCBjb250YWluZXIpKSAhPT0gbnVsbCAmJiBfYyAhPT0gdm9pZCAwID8gX2MgOiBudWxsO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgIH1cbn1cbmZ1bmN0aW9uIGNvbnRhaW5lckdldEtleShkKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0KGQpO1xufVxuZnVuY3Rpb24gdHJhbnNmb3JtSW5zdGFuY2UoaW5zdCwgdHJhbnNmb3JtKSB7XG4gICAgcmV0dXJuIHRyYW5zZm9ybShpbnN0KTtcbn1cbi8qKiBAaW50ZXJuYWwgKi9cbmV4cG9ydCBjbGFzcyBGYWN0b3J5SW1wbCB7XG4gICAgY29uc3RydWN0b3IoVHlwZSwgZGVwZW5kZW5jaWVzKSB7XG4gICAgICAgIHRoaXMuVHlwZSA9IFR5cGU7XG4gICAgICAgIHRoaXMuZGVwZW5kZW5jaWVzID0gZGVwZW5kZW5jaWVzO1xuICAgICAgICB0aGlzLnRyYW5zZm9ybWVycyA9IG51bGw7XG4gICAgfVxuICAgIGNvbnN0cnVjdChjb250YWluZXIsIGR5bmFtaWNEZXBlbmRlbmNpZXMpIHtcbiAgICAgICAgbGV0IGluc3RhbmNlO1xuICAgICAgICBpZiAoZHluYW1pY0RlcGVuZGVuY2llcyA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgICBpbnN0YW5jZSA9IG5ldyB0aGlzLlR5cGUoLi4udGhpcy5kZXBlbmRlbmNpZXMubWFwKGNvbnRhaW5lckdldEtleSwgY29udGFpbmVyKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpbnN0YW5jZSA9IG5ldyB0aGlzLlR5cGUoLi4udGhpcy5kZXBlbmRlbmNpZXMubWFwKGNvbnRhaW5lckdldEtleSwgY29udGFpbmVyKSwgLi4uZHluYW1pY0RlcGVuZGVuY2llcyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMudHJhbnNmb3JtZXJzID09IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybiBpbnN0YW5jZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy50cmFuc2Zvcm1lcnMucmVkdWNlKHRyYW5zZm9ybUluc3RhbmNlLCBpbnN0YW5jZSk7XG4gICAgfVxuICAgIHJlZ2lzdGVyVHJhbnNmb3JtZXIodHJhbnNmb3JtZXIpIHtcbiAgICAgICAgKHRoaXMudHJhbnNmb3JtZXJzIHx8ICh0aGlzLnRyYW5zZm9ybWVycyA9IFtdKSkucHVzaCh0cmFuc2Zvcm1lcik7XG4gICAgfVxufVxuY29uc3QgY29udGFpbmVyUmVzb2x2ZXIgPSB7XG4gICAgJGlzUmVzb2x2ZXI6IHRydWUsXG4gICAgcmVzb2x2ZShoYW5kbGVyLCByZXF1ZXN0b3IpIHtcbiAgICAgICAgcmV0dXJuIHJlcXVlc3RvcjtcbiAgICB9LFxufTtcbmZ1bmN0aW9uIGlzUmVnaXN0cnkob2JqKSB7XG4gICAgcmV0dXJuIHR5cGVvZiBvYmoucmVnaXN0ZXIgPT09IFwiZnVuY3Rpb25cIjtcbn1cbmZ1bmN0aW9uIGlzU2VsZlJlZ2lzdHJ5KG9iaikge1xuICAgIHJldHVybiBpc1JlZ2lzdHJ5KG9iaikgJiYgdHlwZW9mIG9iai5yZWdpc3RlckluUmVxdWVzdG9yID09PSBcImJvb2xlYW5cIjtcbn1cbmZ1bmN0aW9uIGlzUmVnaXN0ZXJJblJlcXVlc3RlcihvYmopIHtcbiAgICByZXR1cm4gaXNTZWxmUmVnaXN0cnkob2JqKSAmJiBvYmoucmVnaXN0ZXJJblJlcXVlc3Rvcjtcbn1cbmZ1bmN0aW9uIGlzQ2xhc3Mob2JqKSB7XG4gICAgcmV0dXJuIG9iai5wcm90b3R5cGUgIT09IHZvaWQgMDtcbn1cbmNvbnN0IEluc3RyaW5zaWNUeXBlTmFtZXMgPSBuZXcgU2V0KFtcbiAgICBcIkFycmF5XCIsXG4gICAgXCJBcnJheUJ1ZmZlclwiLFxuICAgIFwiQm9vbGVhblwiLFxuICAgIFwiRGF0YVZpZXdcIixcbiAgICBcIkRhdGVcIixcbiAgICBcIkVycm9yXCIsXG4gICAgXCJFdmFsRXJyb3JcIixcbiAgICBcIkZsb2F0MzJBcnJheVwiLFxuICAgIFwiRmxvYXQ2NEFycmF5XCIsXG4gICAgXCJGdW5jdGlvblwiLFxuICAgIFwiSW50OEFycmF5XCIsXG4gICAgXCJJbnQxNkFycmF5XCIsXG4gICAgXCJJbnQzMkFycmF5XCIsXG4gICAgXCJNYXBcIixcbiAgICBcIk51bWJlclwiLFxuICAgIFwiT2JqZWN0XCIsXG4gICAgXCJQcm9taXNlXCIsXG4gICAgXCJSYW5nZUVycm9yXCIsXG4gICAgXCJSZWZlcmVuY2VFcnJvclwiLFxuICAgIFwiUmVnRXhwXCIsXG4gICAgXCJTZXRcIixcbiAgICBcIlNoYXJlZEFycmF5QnVmZmVyXCIsXG4gICAgXCJTdHJpbmdcIixcbiAgICBcIlN5bnRheEVycm9yXCIsXG4gICAgXCJUeXBlRXJyb3JcIixcbiAgICBcIlVpbnQ4QXJyYXlcIixcbiAgICBcIlVpbnQ4Q2xhbXBlZEFycmF5XCIsXG4gICAgXCJVaW50MTZBcnJheVwiLFxuICAgIFwiVWludDMyQXJyYXlcIixcbiAgICBcIlVSSUVycm9yXCIsXG4gICAgXCJXZWFrTWFwXCIsXG4gICAgXCJXZWFrU2V0XCIsXG5dKTtcbmNvbnN0IERJTG9jYXRlUGFyZW50RXZlbnRUeXBlID0gXCJfX0RJX0xPQ0FURV9QQVJFTlRfX1wiO1xuY29uc3QgZmFjdG9yaWVzID0gbmV3IE1hcCgpO1xuLyoqXG4gKiBAaW50ZXJuYWxcbiAqL1xuZXhwb3J0IGNsYXNzIENvbnRhaW5lckltcGwge1xuICAgIGNvbnN0cnVjdG9yKG93bmVyLCBjb25maWcpIHtcbiAgICAgICAgdGhpcy5vd25lciA9IG93bmVyO1xuICAgICAgICB0aGlzLmNvbmZpZyA9IGNvbmZpZztcbiAgICAgICAgdGhpcy5fcGFyZW50ID0gdm9pZCAwO1xuICAgICAgICB0aGlzLnJlZ2lzdGVyRGVwdGggPSAwO1xuICAgICAgICB0aGlzLmNvbnRleHQgPSBudWxsO1xuICAgICAgICBpZiAob3duZXIgIT09IG51bGwpIHtcbiAgICAgICAgICAgIG93bmVyLiQkY29udGFpbmVyJCQgPSB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucmVzb2x2ZXJzID0gbmV3IE1hcCgpO1xuICAgICAgICB0aGlzLnJlc29sdmVycy5zZXQoQ29udGFpbmVyLCBjb250YWluZXJSZXNvbHZlcik7XG4gICAgICAgIGlmIChvd25lciBpbnN0YW5jZW9mIE5vZGUpIHtcbiAgICAgICAgICAgIG93bmVyLmFkZEV2ZW50TGlzdGVuZXIoRElMb2NhdGVQYXJlbnRFdmVudFR5cGUsIChlKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGUuY29tcG9zZWRQYXRoKClbMF0gIT09IHRoaXMub3duZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgZS5kZXRhaWwuY29udGFpbmVyID0gdGhpcztcbiAgICAgICAgICAgICAgICAgICAgZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXQgcGFyZW50KCkge1xuICAgICAgICBpZiAodGhpcy5fcGFyZW50ID09PSB2b2lkIDApIHtcbiAgICAgICAgICAgIHRoaXMuX3BhcmVudCA9IHRoaXMuY29uZmlnLnBhcmVudExvY2F0b3IodGhpcy5vd25lcik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuX3BhcmVudDtcbiAgICB9XG4gICAgZ2V0IGRlcHRoKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wYXJlbnQgPT09IG51bGwgPyAwIDogdGhpcy5wYXJlbnQuZGVwdGggKyAxO1xuICAgIH1cbiAgICBnZXQgcmVzcG9uc2libGVGb3JPd25lclJlcXVlc3RzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb25maWcucmVzcG9uc2libGVGb3JPd25lclJlcXVlc3RzO1xuICAgIH1cbiAgICByZWdpc3RlcldpdGhDb250ZXh0KGNvbnRleHQsIC4uLnBhcmFtcykge1xuICAgICAgICB0aGlzLmNvbnRleHQgPSBjb250ZXh0O1xuICAgICAgICB0aGlzLnJlZ2lzdGVyKC4uLnBhcmFtcyk7XG4gICAgICAgIHRoaXMuY29udGV4dCA9IG51bGw7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICByZWdpc3RlciguLi5wYXJhbXMpIHtcbiAgICAgICAgaWYgKCsrdGhpcy5yZWdpc3RlckRlcHRoID09PSAxMDApIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlVuYWJsZSB0byBhdXRvcmVnaXN0ZXIgZGVwZW5kZW5jeVwiKTtcbiAgICAgICAgICAgIC8vIE1vc3QgbGlrZWx5IGNhdXNlIGlzIHRyeWluZyB0byByZWdpc3RlciBhIHBsYWluIG9iamVjdCB0aGF0IGRvZXMgbm90IGhhdmUgYVxuICAgICAgICAgICAgLy8gcmVnaXN0ZXIgbWV0aG9kIGFuZCBpcyBub3QgYSBjbGFzcyBjb25zdHJ1Y3RvclxuICAgICAgICB9XG4gICAgICAgIGxldCBjdXJyZW50O1xuICAgICAgICBsZXQga2V5cztcbiAgICAgICAgbGV0IHZhbHVlO1xuICAgICAgICBsZXQgajtcbiAgICAgICAgbGV0IGpqO1xuICAgICAgICBjb25zdCBjb250ZXh0ID0gdGhpcy5jb250ZXh0O1xuICAgICAgICBmb3IgKGxldCBpID0gMCwgaWkgPSBwYXJhbXMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICAgICAgY3VycmVudCA9IHBhcmFtc1tpXTtcbiAgICAgICAgICAgIGlmICghaXNPYmplY3QoY3VycmVudCkpIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChpc1JlZ2lzdHJ5KGN1cnJlbnQpKSB7XG4gICAgICAgICAgICAgICAgY3VycmVudC5yZWdpc3Rlcih0aGlzLCBjb250ZXh0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGlzQ2xhc3MoY3VycmVudCkpIHtcbiAgICAgICAgICAgICAgICBSZWdpc3RyYXRpb24uc2luZ2xldG9uKGN1cnJlbnQsIGN1cnJlbnQpLnJlZ2lzdGVyKHRoaXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAga2V5cyA9IE9iamVjdC5rZXlzKGN1cnJlbnQpO1xuICAgICAgICAgICAgICAgIGogPSAwO1xuICAgICAgICAgICAgICAgIGpqID0ga2V5cy5sZW5ndGg7XG4gICAgICAgICAgICAgICAgZm9yICg7IGogPCBqajsgKytqKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlID0gY3VycmVudFtrZXlzW2pdXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFpc09iamVjdCh2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIC8vIG5vdGU6IHdlIGNvdWxkIHJlbW92ZSB0aGlzIGlmLWJyYW5jaCBhbmQgY2FsbCB0aGlzLnJlZ2lzdGVyIGRpcmVjdGx5XG4gICAgICAgICAgICAgICAgICAgIC8vIC0gdGhlIGV4dHJhIGNoZWNrIGlzIGp1c3QgYSBwZXJmIHR3ZWFrIHRvIGNyZWF0ZSBmZXdlciB1bm5lY2Vzc2FyeSBhcnJheXMgYnkgdGhlIHNwcmVhZCBvcGVyYXRvclxuICAgICAgICAgICAgICAgICAgICBpZiAoaXNSZWdpc3RyeSh2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlLnJlZ2lzdGVyKHRoaXMsIGNvbnRleHQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWdpc3Rlcih2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLS10aGlzLnJlZ2lzdGVyRGVwdGg7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICByZWdpc3RlclJlc29sdmVyKGtleSwgcmVzb2x2ZXIpIHtcbiAgICAgICAgdmFsaWRhdGVLZXkoa2V5KTtcbiAgICAgICAgY29uc3QgcmVzb2x2ZXJzID0gdGhpcy5yZXNvbHZlcnM7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHJlc29sdmVycy5nZXQoa2V5KTtcbiAgICAgICAgaWYgKHJlc3VsdCA9PSBudWxsKSB7XG4gICAgICAgICAgICByZXNvbHZlcnMuc2V0KGtleSwgcmVzb2x2ZXIpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHJlc3VsdCBpbnN0YW5jZW9mIFJlc29sdmVySW1wbCAmJlxuICAgICAgICAgICAgcmVzdWx0LnN0cmF0ZWd5ID09PSA0IC8qIGFycmF5ICovKSB7XG4gICAgICAgICAgICByZXN1bHQuc3RhdGUucHVzaChyZXNvbHZlcik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXNvbHZlcnMuc2V0KGtleSwgbmV3IFJlc29sdmVySW1wbChrZXksIDQgLyogYXJyYXkgKi8sIFtyZXN1bHQsIHJlc29sdmVyXSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXNvbHZlcjtcbiAgICB9XG4gICAgcmVnaXN0ZXJUcmFuc2Zvcm1lcihrZXksIHRyYW5zZm9ybWVyKSB7XG4gICAgICAgIGNvbnN0IHJlc29sdmVyID0gdGhpcy5nZXRSZXNvbHZlcihrZXkpO1xuICAgICAgICBpZiAocmVzb2x2ZXIgPT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChyZXNvbHZlci5nZXRGYWN0b3J5KSB7XG4gICAgICAgICAgICBjb25zdCBmYWN0b3J5ID0gcmVzb2x2ZXIuZ2V0RmFjdG9yeSh0aGlzKTtcbiAgICAgICAgICAgIGlmIChmYWN0b3J5ID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBUaGlzIHR5cGUgY2FzdCBpcyBhIGJpdCBvZiBhIGhhY2t5IG9uZSwgbmVjZXNzYXJ5IGR1ZSB0byB0aGUgZHVwbGljaXR5IG9mIElSZXNvbHZlckxpa2UuXG4gICAgICAgICAgICAvLyBQcm9ibGVtIGlzIHRoYXQgdGhhdCBpbnRlcmZhY2UncyB0eXBlIGFyZyBjYW4gYmUgb2YgdHlwZSBLZXksIGJ1dCB0aGUgZ2V0RmFjdG9yeSBtZXRob2Qgb25seSB3b3JrcyBvblxuICAgICAgICAgICAgLy8gdHlwZSBDb25zdHJ1Y3RhYmxlLiBTbyB0aGUgcmV0dXJuIHR5cGUgb2YgdGhhdCBvcHRpb25hbCBtZXRob2QgaGFzIHRoaXMgYWRkaXRpb25hbCBjb25zdHJhaW50LCB3aGljaFxuICAgICAgICAgICAgLy8gc2VlbXMgdG8gY29uZnVzZSB0aGUgdHlwZSBjaGVja2VyLlxuICAgICAgICAgICAgZmFjdG9yeS5yZWdpc3RlclRyYW5zZm9ybWVyKHRyYW5zZm9ybWVyKTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgZ2V0UmVzb2x2ZXIoa2V5LCBhdXRvUmVnaXN0ZXIgPSB0cnVlKSB7XG4gICAgICAgIHZhbGlkYXRlS2V5KGtleSk7XG4gICAgICAgIGlmIChrZXkucmVzb2x2ZSAhPT0gdm9pZCAwKSB7XG4gICAgICAgICAgICByZXR1cm4ga2V5O1xuICAgICAgICB9XG4gICAgICAgIC8qIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdGhpcy1hbGlhcyAqL1xuICAgICAgICBsZXQgY3VycmVudCA9IHRoaXM7XG4gICAgICAgIGxldCByZXNvbHZlcjtcbiAgICAgICAgd2hpbGUgKGN1cnJlbnQgIT0gbnVsbCkge1xuICAgICAgICAgICAgcmVzb2x2ZXIgPSBjdXJyZW50LnJlc29sdmVycy5nZXQoa2V5KTtcbiAgICAgICAgICAgIGlmIChyZXNvbHZlciA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgaWYgKGN1cnJlbnQucGFyZW50ID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaGFuZGxlciA9IGlzUmVnaXN0ZXJJblJlcXVlc3RlcihrZXkpXG4gICAgICAgICAgICAgICAgICAgICAgICA/IHRoaXNcbiAgICAgICAgICAgICAgICAgICAgICAgIDogY3VycmVudDtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGF1dG9SZWdpc3RlciA/IHRoaXMuaml0UmVnaXN0ZXIoa2V5LCBoYW5kbGVyKSA6IG51bGw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGN1cnJlbnQgPSBjdXJyZW50LnBhcmVudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiByZXNvbHZlcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgaGFzKGtleSwgc2VhcmNoQW5jZXN0b3JzID0gZmFsc2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVzb2x2ZXJzLmhhcyhrZXkpXG4gICAgICAgICAgICA/IHRydWVcbiAgICAgICAgICAgIDogc2VhcmNoQW5jZXN0b3JzICYmIHRoaXMucGFyZW50ICE9IG51bGxcbiAgICAgICAgICAgICAgICA/IHRoaXMucGFyZW50LmhhcyhrZXksIHRydWUpXG4gICAgICAgICAgICAgICAgOiBmYWxzZTtcbiAgICB9XG4gICAgZ2V0KGtleSkge1xuICAgICAgICB2YWxpZGF0ZUtleShrZXkpO1xuICAgICAgICBpZiAoa2V5LiRpc1Jlc29sdmVyKSB7XG4gICAgICAgICAgICByZXR1cm4ga2V5LnJlc29sdmUodGhpcywgdGhpcyk7XG4gICAgICAgIH1cbiAgICAgICAgLyogZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby10aGlzLWFsaWFzICovXG4gICAgICAgIGxldCBjdXJyZW50ID0gdGhpcztcbiAgICAgICAgbGV0IHJlc29sdmVyO1xuICAgICAgICB3aGlsZSAoY3VycmVudCAhPSBudWxsKSB7XG4gICAgICAgICAgICByZXNvbHZlciA9IGN1cnJlbnQucmVzb2x2ZXJzLmdldChrZXkpO1xuICAgICAgICAgICAgaWYgKHJlc29sdmVyID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBpZiAoY3VycmVudC5wYXJlbnQgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBoYW5kbGVyID0gaXNSZWdpc3RlckluUmVxdWVzdGVyKGtleSlcbiAgICAgICAgICAgICAgICAgICAgICAgID8gdGhpc1xuICAgICAgICAgICAgICAgICAgICAgICAgOiBjdXJyZW50O1xuICAgICAgICAgICAgICAgICAgICByZXNvbHZlciA9IHRoaXMuaml0UmVnaXN0ZXIoa2V5LCBoYW5kbGVyKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmVyLnJlc29sdmUoY3VycmVudCwgdGhpcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGN1cnJlbnQgPSBjdXJyZW50LnBhcmVudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiByZXNvbHZlci5yZXNvbHZlKGN1cnJlbnQsIHRoaXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgVW5hYmxlIHRvIHJlc29sdmUga2V5OiAke1N0cmluZyhrZXkpfWApO1xuICAgIH1cbiAgICBnZXRBbGwoa2V5LCBzZWFyY2hBbmNlc3RvcnMgPSBmYWxzZSkge1xuICAgICAgICB2YWxpZGF0ZUtleShrZXkpO1xuICAgICAgICAvKiBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXRoaXMtYWxpYXMgKi9cbiAgICAgICAgY29uc3QgcmVxdWVzdG9yID0gdGhpcztcbiAgICAgICAgbGV0IGN1cnJlbnQgPSByZXF1ZXN0b3I7XG4gICAgICAgIGxldCByZXNvbHZlcjtcbiAgICAgICAgaWYgKHNlYXJjaEFuY2VzdG9ycykge1xuICAgICAgICAgICAgbGV0IHJlc29sdXRpb25zID0gZW1wdHlBcnJheTtcbiAgICAgICAgICAgIHdoaWxlIChjdXJyZW50ICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICByZXNvbHZlciA9IGN1cnJlbnQucmVzb2x2ZXJzLmdldChrZXkpO1xuICAgICAgICAgICAgICAgIGlmIChyZXNvbHZlciAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc29sdXRpb25zID0gcmVzb2x1dGlvbnMuY29uY2F0KFxuICAgICAgICAgICAgICAgICAgICAvKiBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLW5vbi1udWxsLWFzc2VydGlvbiAqL1xuICAgICAgICAgICAgICAgICAgICBidWlsZEFsbFJlc3BvbnNlKHJlc29sdmVyLCBjdXJyZW50LCByZXF1ZXN0b3IpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY3VycmVudCA9IGN1cnJlbnQucGFyZW50O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJlc29sdXRpb25zO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgd2hpbGUgKGN1cnJlbnQgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHJlc29sdmVyID0gY3VycmVudC5yZXNvbHZlcnMuZ2V0KGtleSk7XG4gICAgICAgICAgICAgICAgaWYgKHJlc29sdmVyID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudCA9IGN1cnJlbnQucGFyZW50O1xuICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudCA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZW1wdHlBcnJheTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGJ1aWxkQWxsUmVzcG9uc2UocmVzb2x2ZXIsIGN1cnJlbnQsIHJlcXVlc3Rvcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBlbXB0eUFycmF5O1xuICAgIH1cbiAgICBnZXRGYWN0b3J5KFR5cGUpIHtcbiAgICAgICAgbGV0IGZhY3RvcnkgPSBmYWN0b3JpZXMuZ2V0KFR5cGUpO1xuICAgICAgICBpZiAoZmFjdG9yeSA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgICBpZiAoaXNOYXRpdmVGdW5jdGlvbihUeXBlKSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgJHtUeXBlLm5hbWV9IGlzIGEgbmF0aXZlIGZ1bmN0aW9uIGFuZCB0aGVyZWZvcmUgY2Fubm90IGJlIHNhZmVseSBjb25zdHJ1Y3RlZCBieSBESS4gSWYgdGhpcyBpcyBpbnRlbnRpb25hbCwgcGxlYXNlIHVzZSBhIGNhbGxiYWNrIG9yIGNhY2hlZENhbGxiYWNrIHJlc29sdmVyLmApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZmFjdG9yaWVzLnNldChUeXBlLCAoZmFjdG9yeSA9IG5ldyBGYWN0b3J5SW1wbChUeXBlLCBESS5nZXREZXBlbmRlbmNpZXMoVHlwZSkpKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhY3Rvcnk7XG4gICAgfVxuICAgIHJlZ2lzdGVyRmFjdG9yeShrZXksIGZhY3RvcnkpIHtcbiAgICAgICAgZmFjdG9yaWVzLnNldChrZXksIGZhY3RvcnkpO1xuICAgIH1cbiAgICBjcmVhdGVDaGlsZChjb25maWcpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBDb250YWluZXJJbXBsKG51bGwsIE9iamVjdC5hc3NpZ24oe30sIHRoaXMuY29uZmlnLCBjb25maWcsIHsgcGFyZW50TG9jYXRvcjogKCkgPT4gdGhpcyB9KSk7XG4gICAgfVxuICAgIGppdFJlZ2lzdGVyKGtleUFzVmFsdWUsIGhhbmRsZXIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBrZXlBc1ZhbHVlICE9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQXR0ZW1wdGVkIHRvIGppdFJlZ2lzdGVyIHNvbWV0aGluZyB0aGF0IGlzIG5vdCBhIGNvbnN0cnVjdG9yOiAnJHtrZXlBc1ZhbHVlfScuIERpZCB5b3UgZm9yZ2V0IHRvIHJlZ2lzdGVyIHRoaXMgZGVwZW5kZW5jeT9gKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoSW5zdHJpbnNpY1R5cGVOYW1lcy5oYXMoa2V5QXNWYWx1ZS5uYW1lKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBBdHRlbXB0ZWQgdG8gaml0UmVnaXN0ZXIgYW4gaW50cmluc2ljIHR5cGU6ICR7a2V5QXNWYWx1ZS5uYW1lfS4gRGlkIHlvdSBmb3JnZXQgdG8gYWRkIEBpbmplY3QoS2V5KWApO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc1JlZ2lzdHJ5KGtleUFzVmFsdWUpKSB7XG4gICAgICAgICAgICBjb25zdCByZWdpc3RyYXRpb25SZXNvbHZlciA9IGtleUFzVmFsdWUucmVnaXN0ZXIoaGFuZGxlcik7XG4gICAgICAgICAgICBpZiAoIShyZWdpc3RyYXRpb25SZXNvbHZlciBpbnN0YW5jZW9mIE9iamVjdCkgfHxcbiAgICAgICAgICAgICAgICByZWdpc3RyYXRpb25SZXNvbHZlci5yZXNvbHZlID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBuZXdSZXNvbHZlciA9IGhhbmRsZXIucmVzb2x2ZXJzLmdldChrZXlBc1ZhbHVlKTtcbiAgICAgICAgICAgICAgICBpZiAobmV3UmVzb2x2ZXIgIT0gdm9pZCAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXdSZXNvbHZlcjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQSB2YWxpZCByZXNvbHZlciB3YXMgbm90IHJldHVybmVkIGZyb20gdGhlIHN0YXRpYyByZWdpc3RlciBtZXRob2RcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmVnaXN0cmF0aW9uUmVzb2x2ZXI7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoa2V5QXNWYWx1ZS4kaXNJbnRlcmZhY2UpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQXR0ZW1wdGVkIHRvIGppdFJlZ2lzdGVyIGFuIGludGVyZmFjZTogJHtrZXlBc1ZhbHVlLmZyaWVuZGx5TmFtZX1gKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IHJlc29sdmVyID0gdGhpcy5jb25maWcuZGVmYXVsdFJlc29sdmVyKGtleUFzVmFsdWUsIGhhbmRsZXIpO1xuICAgICAgICAgICAgaGFuZGxlci5yZXNvbHZlcnMuc2V0KGtleUFzVmFsdWUsIHJlc29sdmVyKTtcbiAgICAgICAgICAgIHJldHVybiByZXNvbHZlcjtcbiAgICAgICAgfVxuICAgIH1cbn1cbmNvbnN0IGNhY2hlID0gbmV3IFdlYWtNYXAoKTtcbmZ1bmN0aW9uIGNhY2hlQ2FsbGJhY2tSZXN1bHQoZnVuKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChoYW5kbGVyLCByZXF1ZXN0b3IsIHJlc29sdmVyKSB7XG4gICAgICAgIGlmIChjYWNoZS5oYXMocmVzb2x2ZXIpKSB7XG4gICAgICAgICAgICByZXR1cm4gY2FjaGUuZ2V0KHJlc29sdmVyKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB0ID0gZnVuKGhhbmRsZXIsIHJlcXVlc3RvciwgcmVzb2x2ZXIpO1xuICAgICAgICBjYWNoZS5zZXQocmVzb2x2ZXIsIHQpO1xuICAgICAgICByZXR1cm4gdDtcbiAgICB9O1xufVxuLyoqXG4gKiBZb3UgY2FuIHVzZSB0aGUgcmVzdWx0aW5nIFJlZ2lzdHJhdGlvbiBvZiBhbnkgb2YgdGhlIGZhY3RvcnkgbWV0aG9kc1xuICogdG8gcmVnaXN0ZXIgd2l0aCB0aGUgY29udGFpbmVyLlxuICpcbiAqIEBleGFtcGxlXG4gKiBgYGBcbiAqIGNsYXNzIEZvbyB7fVxuICogY29uc3QgY29udGFpbmVyID0gREkuY3JlYXRlQ29udGFpbmVyKCk7XG4gKiBjb250YWluZXIucmVnaXN0ZXIoUmVnaXN0cmF0aW9uLmluc3RhbmNlKEZvbywgbmV3IEZvbygpKSk7XG4gKiBjb250YWluZXIuZ2V0KEZvbyk7XG4gKiBgYGBcbiAqXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjb25zdCBSZWdpc3RyYXRpb24gPSBPYmplY3QuZnJlZXplKHtcbiAgICAvKipcbiAgICAgKiBBbGxvd3MgeW91IHRvIHBhc3MgYW4gaW5zdGFuY2UuXG4gICAgICogRXZlcnkgdGltZSB5b3UgcmVxdWVzdCB0aGlzIHtAbGluayBLZXl9IHlvdSB3aWxsIGdldCB0aGlzIGluc3RhbmNlIGJhY2suXG4gICAgICpcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIGBgYFxuICAgICAqIFJlZ2lzdHJhdGlvbi5pbnN0YW5jZShGb28sIG5ldyBGb28oKSkpO1xuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogQHBhcmFtIGtleSAtIFRoZSBrZXkgdG8gcmVnaXN0ZXIgdGhlIGluc3RhbmNlIHVuZGVyLlxuICAgICAqIEBwYXJhbSB2YWx1ZSAtIFRoZSBpbnN0YW5jZSB0byByZXR1cm4gd2hlbiB0aGUga2V5IGlzIHJlcXVlc3RlZC5cbiAgICAgKi9cbiAgICBpbnN0YW5jZShrZXksIHZhbHVlKSB7XG4gICAgICAgIHJldHVybiBuZXcgUmVzb2x2ZXJJbXBsKGtleSwgMCAvKiBpbnN0YW5jZSAqLywgdmFsdWUpO1xuICAgIH0sXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBpbnN0YW5jZSBmcm9tIHRoZSBjbGFzcy5cbiAgICAgKiBFdmVyeSB0aW1lIHlvdSByZXF1ZXN0IHRoaXMge0BsaW5rIEtleX0geW91IHdpbGwgZ2V0IHRoZSBzYW1lIG9uZSBiYWNrLlxuICAgICAqXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiBgYGBcbiAgICAgKiBSZWdpc3RyYXRpb24uc2luZ2xldG9uKEZvbywgRm9vKTtcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIEBwYXJhbSBrZXkgLSBUaGUga2V5IHRvIHJlZ2lzdGVyIHRoZSBzaW5nbGV0b24gdW5kZXIuXG4gICAgICogQHBhcmFtIHZhbHVlIC0gVGhlIGNsYXNzIHRvIGluc3RhbnRpYXRlIGFzIGEgc2luZ2xldG9uIHdoZW4gZmlyc3QgcmVxdWVzdGVkLlxuICAgICAqL1xuICAgIHNpbmdsZXRvbihrZXksIHZhbHVlKSB7XG4gICAgICAgIHJldHVybiBuZXcgUmVzb2x2ZXJJbXBsKGtleSwgMSAvKiBzaW5nbGV0b24gKi8sIHZhbHVlKTtcbiAgICB9LFxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gaW5zdGFuY2UgZnJvbSBhIGNsYXNzLlxuICAgICAqIEV2ZXJ5IHRpbWUgeW91IHJlcXVlc3QgdGhpcyB7QGxpbmsgS2V5fSB5b3Ugd2lsbCBnZXQgYSBuZXcgaW5zdGFuY2UuXG4gICAgICpcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIGBgYFxuICAgICAqIFJlZ2lzdHJhdGlvbi5pbnN0YW5jZShGb28sIEZvbyk7XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBAcGFyYW0ga2V5IC0gVGhlIGtleSB0byByZWdpc3RlciB0aGUgaW5zdGFuY2UgdHlwZSB1bmRlci5cbiAgICAgKiBAcGFyYW0gdmFsdWUgLSBUaGUgY2xhc3MgdG8gaW5zdGFudGlhdGUgZWFjaCB0aW1lIHRoZSBrZXkgaXMgcmVxdWVzdGVkLlxuICAgICAqL1xuICAgIHRyYW5zaWVudChrZXksIHZhbHVlKSB7XG4gICAgICAgIHJldHVybiBuZXcgUmVzb2x2ZXJJbXBsKGtleSwgMiAvKiB0cmFuc2llbnQgKi8sIHZhbHVlKTtcbiAgICB9LFxuICAgIC8qKlxuICAgICAqIERlbGVnYXRlcyB0byBhIGNhbGxiYWNrIGZ1bmN0aW9uIHRvIHByb3ZpZGUgdGhlIGRlcGVuZGVuY3kuXG4gICAgICogRXZlcnkgdGltZSB5b3UgcmVxdWVzdCB0aGlzIHtAbGluayBLZXl9IHRoZSBjYWxsYmFjayB3aWxsIGJlIGludm9rZWQgdG8gcHJvdmlkZVxuICAgICAqIHRoZSBkZXBlbmRlbmN5LlxuICAgICAqXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiBgYGBcbiAgICAgKiBSZWdpc3RyYXRpb24uY2FsbGJhY2soRm9vLCAoKSA9PiBuZXcgRm9vKCkpO1xuICAgICAqIFJlZ2lzdHJhdGlvbi5jYWxsYmFjayhCYXIsIChjOiBDb250YWluZXIpID0+IG5ldyBCYXIoYy5nZXQoRm9vKSkpO1xuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogQHBhcmFtIGtleSAtIFRoZSBrZXkgdG8gcmVnaXN0ZXIgdGhlIGNhbGxiYWNrIGZvci5cbiAgICAgKiBAcGFyYW0gY2FsbGJhY2sgLSBUaGUgZnVuY3Rpb24gdGhhdCBpcyBleHBlY3RlZCB0byByZXR1cm4gdGhlIGRlcGVuZGVuY3kuXG4gICAgICovXG4gICAgY2FsbGJhY2soa2V5LCBjYWxsYmFjaykge1xuICAgICAgICByZXR1cm4gbmV3IFJlc29sdmVySW1wbChrZXksIDMgLyogY2FsbGJhY2sgKi8sIGNhbGxiYWNrKTtcbiAgICB9LFxuICAgIC8qKlxuICAgICAqIERlbGVnYXRlcyB0byBhIGNhbGxiYWNrIGZ1bmN0aW9uIHRvIHByb3ZpZGUgdGhlIGRlcGVuZGVuY3kgYW5kIHRoZW4gY2FjaGVzIHRoZVxuICAgICAqIGRlcGVuZGVuY3kgZm9yIGZ1dHVyZSByZXF1ZXN0cy5cbiAgICAgKlxuICAgICAqIEBleGFtcGxlXG4gICAgICogYGBgXG4gICAgICogUmVnaXN0cmF0aW9uLmNhY2hlZENhbGxiYWNrKEZvbywgKCkgPT4gbmV3IEZvbygpKTtcbiAgICAgKiBSZWdpc3RyYXRpb24uY2FjaGVkQ2FsbGJhY2soQmFyLCAoYzogQ29udGFpbmVyKSA9PiBuZXcgQmFyKGMuZ2V0KEZvbykpKTtcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIEBwYXJhbSBrZXkgLSBUaGUga2V5IHRvIHJlZ2lzdGVyIHRoZSBjYWxsYmFjayBmb3IuXG4gICAgICogQHBhcmFtIGNhbGxiYWNrIC0gVGhlIGZ1bmN0aW9uIHRoYXQgaXMgZXhwZWN0ZWQgdG8gcmV0dXJuIHRoZSBkZXBlbmRlbmN5LlxuICAgICAqIEByZW1hcmtzXG4gICAgICogSWYgeW91IHBhc3MgdGhlIHNhbWUgUmVnaXN0cmF0aW9uIHRvIGFub3RoZXIgY29udGFpbmVyLCB0aGUgc2FtZSBjYWNoZWQgdmFsdWUgd2lsbCBiZSB1c2VkLlxuICAgICAqIFNob3VsZCBhbGwgcmVmZXJlbmNlcyB0byB0aGUgcmVzb2x2ZXIgcmV0dXJuZWQgYmUgcmVtb3ZlZCwgdGhlIGNhY2hlIHdpbGwgZXhwaXJlLlxuICAgICAqL1xuICAgIGNhY2hlZENhbGxiYWNrKGtleSwgY2FsbGJhY2spIHtcbiAgICAgICAgcmV0dXJuIG5ldyBSZXNvbHZlckltcGwoa2V5LCAzIC8qIGNhbGxiYWNrICovLCBjYWNoZUNhbGxiYWNrUmVzdWx0KGNhbGxiYWNrKSk7XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIGFsdGVybmF0ZSB7QGxpbmsgS2V5fSB0byByZXRyaWV2ZSBhbiBpbnN0YW5jZSBieS5cbiAgICAgKlxuICAgICAqIEBleGFtcGxlXG4gICAgICogYGBgXG4gICAgICogUmVnaXN0ZXIuc2luZ2xldG9uKEZvbywgRm9vKVxuICAgICAqIFJlZ2lzdGVyLmFsaWFzVG8oRm9vLCBNeUZvb3MpO1xuICAgICAqXG4gICAgICogY29udGFpbmVyLmdldEFsbChNeUZvb3MpIC8vIGNvbnRhaW5zIGFuIGluc3RhbmNlIG9mIEZvb1xuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogQHBhcmFtIG9yaWdpbmFsS2V5IC0gVGhlIG9yaWdpbmFsIGtleSB0aGF0IGhhcyBiZWVuIHJlZ2lzdGVyZWQuXG4gICAgICogQHBhcmFtIGFsaWFzS2V5IC0gVGhlIGFsaWFzIHRvIHRoZSBvcmlnaW5hbCBrZXkuXG4gICAgICovXG4gICAgYWxpYXNUbyhvcmlnaW5hbEtleSwgYWxpYXNLZXkpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBSZXNvbHZlckltcGwoYWxpYXNLZXksIDUgLyogYWxpYXMgKi8sIG9yaWdpbmFsS2V5KTtcbiAgICB9LFxufSk7XG4vKiogQGludGVybmFsICovXG5leHBvcnQgZnVuY3Rpb24gdmFsaWRhdGVLZXkoa2V5KSB7XG4gICAgaWYgKGtleSA9PT0gbnVsbCB8fCBrZXkgPT09IHZvaWQgMCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJrZXkvdmFsdWUgY2Fubm90IGJlIG51bGwgb3IgdW5kZWZpbmVkLiBBcmUgeW91IHRyeWluZyB0byBpbmplY3QvcmVnaXN0ZXIgc29tZXRoaW5nIHRoYXQgZG9lc24ndCBleGlzdCB3aXRoIERJP1wiKTtcbiAgICB9XG59XG5mdW5jdGlvbiBidWlsZEFsbFJlc3BvbnNlKHJlc29sdmVyLCBoYW5kbGVyLCByZXF1ZXN0b3IpIHtcbiAgICBpZiAocmVzb2x2ZXIgaW5zdGFuY2VvZiBSZXNvbHZlckltcGwgJiZcbiAgICAgICAgcmVzb2x2ZXIuc3RyYXRlZ3kgPT09IDQgLyogYXJyYXkgKi8pIHtcbiAgICAgICAgY29uc3Qgc3RhdGUgPSByZXNvbHZlci5zdGF0ZTtcbiAgICAgICAgbGV0IGkgPSBzdGF0ZS5sZW5ndGg7XG4gICAgICAgIGNvbnN0IHJlc3VsdHMgPSBuZXcgQXJyYXkoaSk7XG4gICAgICAgIHdoaWxlIChpLS0pIHtcbiAgICAgICAgICAgIHJlc3VsdHNbaV0gPSBzdGF0ZVtpXS5yZXNvbHZlKGhhbmRsZXIsIHJlcXVlc3Rvcik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdHM7XG4gICAgfVxuICAgIHJldHVybiBbcmVzb2x2ZXIucmVzb2x2ZShoYW5kbGVyLCByZXF1ZXN0b3IpXTtcbn1cbmNvbnN0IGRlZmF1bHRGcmllbmRseU5hbWUgPSBcIihhbm9ueW1vdXMpXCI7XG5mdW5jdGlvbiBpc09iamVjdCh2YWx1ZSkge1xuICAgIHJldHVybiAodHlwZW9mIHZhbHVlID09PSBcIm9iamVjdFwiICYmIHZhbHVlICE9PSBudWxsKSB8fCB0eXBlb2YgdmFsdWUgPT09IFwiZnVuY3Rpb25cIjtcbn1cbi8qKlxuICogRGV0ZXJtaW5lIHdoZXRoZXIgdGhlIHZhbHVlIGlzIGEgbmF0aXZlIGZ1bmN0aW9uLlxuICpcbiAqIEBwYXJhbSBmbiAtIFRoZSBmdW5jdGlvbiB0byBjaGVjay5cbiAqIEByZXR1cm5zIGB0cnVlYCBpcyB0aGUgZnVuY3Rpb24gaXMgYSBuYXRpdmUgZnVuY3Rpb24sIG90aGVyd2lzZSBgZmFsc2VgXG4gKi9cbmNvbnN0IGlzTmF0aXZlRnVuY3Rpb24gPSAoZnVuY3Rpb24gKCkge1xuICAgIGNvbnN0IGxvb2t1cCA9IG5ldyBXZWFrTWFwKCk7XG4gICAgbGV0IGlzTmF0aXZlID0gZmFsc2U7XG4gICAgbGV0IHNvdXJjZVRleHQgPSBcIlwiO1xuICAgIGxldCBpID0gMDtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGZuKSB7XG4gICAgICAgIGlzTmF0aXZlID0gbG9va3VwLmdldChmbik7XG4gICAgICAgIGlmIChpc05hdGl2ZSA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgICBzb3VyY2VUZXh0ID0gZm4udG9TdHJpbmcoKTtcbiAgICAgICAgICAgIGkgPSBzb3VyY2VUZXh0Lmxlbmd0aDtcbiAgICAgICAgICAgIC8vIGh0dHA6Ly93d3cuZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi8jcHJvZC1OYXRpdmVGdW5jdGlvblxuICAgICAgICAgICAgaXNOYXRpdmUgPVxuICAgICAgICAgICAgICAgIC8vIDI5IGlzIHRoZSBsZW5ndGggb2YgJ2Z1bmN0aW9uICgpIHsgW25hdGl2ZSBjb2RlXSB9JyB3aGljaCBpcyB0aGUgc21hbGxlc3QgbGVuZ3RoIG9mIGEgbmF0aXZlIGZ1bmN0aW9uIHN0cmluZ1xuICAgICAgICAgICAgICAgIGkgPj0gMjkgJiZcbiAgICAgICAgICAgICAgICAgICAgLy8gMTAwIHNlZW1zIHRvIGJlIGEgc2FmZSB1cHBlciBib3VuZCBvZiB0aGUgbWF4IGxlbmd0aCBvZiBhIG5hdGl2ZSBmdW5jdGlvbi4gSW4gQ2hyb21lIGFuZCBGRiBpdCdzIDU2LCBpbiBFZGdlIGl0J3MgNjEuXG4gICAgICAgICAgICAgICAgICAgIGkgPD0gMTAwICYmXG4gICAgICAgICAgICAgICAgICAgIC8vIFRoaXMgd2hvbGUgaGV1cmlzdGljICpjb3VsZCogYmUgdHJpY2tlZCBieSBhIGNvbW1lbnQuIERvIHdlIG5lZWQgdG8gY2FyZSBhYm91dCB0aGF0P1xuICAgICAgICAgICAgICAgICAgICBzb3VyY2VUZXh0LmNoYXJDb2RlQXQoaSAtIDEpID09PSAweDdkICYmIC8vIH1cbiAgICAgICAgICAgICAgICAgICAgLy8gVE9ETzogdGhlIHNwZWMgaXMgYSBsaXR0bGUgdmFndWUgYWJvdXQgdGhlIHByZWNpc2UgY29uc3RyYWludHMsIHNvIHdlIGRvIG5lZWQgdG8gdGVzdCB0aGlzIGFjcm9zcyB2YXJpb3VzIGJyb3dzZXJzIHRvIG1ha2Ugc3VyZSBqdXN0IG9uZSB3aGl0ZXNwYWNlIGlzIGEgc2FmZSBhc3N1bXB0aW9uLlxuICAgICAgICAgICAgICAgICAgICBzb3VyY2VUZXh0LmNoYXJDb2RlQXQoaSAtIDIpIDw9IDB4MjAgJiYgLy8gd2hpdGVzcGFjZVxuICAgICAgICAgICAgICAgICAgICBzb3VyY2VUZXh0LmNoYXJDb2RlQXQoaSAtIDMpID09PSAweDVkICYmIC8vIF1cbiAgICAgICAgICAgICAgICAgICAgc291cmNlVGV4dC5jaGFyQ29kZUF0KGkgLSA0KSA9PT0gMHg2NSAmJiAvLyBlXG4gICAgICAgICAgICAgICAgICAgIHNvdXJjZVRleHQuY2hhckNvZGVBdChpIC0gNSkgPT09IDB4NjQgJiYgLy8gZFxuICAgICAgICAgICAgICAgICAgICBzb3VyY2VUZXh0LmNoYXJDb2RlQXQoaSAtIDYpID09PSAweDZmICYmIC8vIG9cbiAgICAgICAgICAgICAgICAgICAgc291cmNlVGV4dC5jaGFyQ29kZUF0KGkgLSA3KSA9PT0gMHg2MyAmJiAvLyBjXG4gICAgICAgICAgICAgICAgICAgIHNvdXJjZVRleHQuY2hhckNvZGVBdChpIC0gOCkgPT09IDB4MjAgJiYgLy9cbiAgICAgICAgICAgICAgICAgICAgc291cmNlVGV4dC5jaGFyQ29kZUF0KGkgLSA5KSA9PT0gMHg2NSAmJiAvLyBlXG4gICAgICAgICAgICAgICAgICAgIHNvdXJjZVRleHQuY2hhckNvZGVBdChpIC0gMTApID09PSAweDc2ICYmIC8vIHZcbiAgICAgICAgICAgICAgICAgICAgc291cmNlVGV4dC5jaGFyQ29kZUF0KGkgLSAxMSkgPT09IDB4NjkgJiYgLy8gaVxuICAgICAgICAgICAgICAgICAgICBzb3VyY2VUZXh0LmNoYXJDb2RlQXQoaSAtIDEyKSA9PT0gMHg3NCAmJiAvLyB0XG4gICAgICAgICAgICAgICAgICAgIHNvdXJjZVRleHQuY2hhckNvZGVBdChpIC0gMTMpID09PSAweDYxICYmIC8vIGFcbiAgICAgICAgICAgICAgICAgICAgc291cmNlVGV4dC5jaGFyQ29kZUF0KGkgLSAxNCkgPT09IDB4NmUgJiYgLy8gblxuICAgICAgICAgICAgICAgICAgICBzb3VyY2VUZXh0LmNoYXJDb2RlQXQoaSAtIDE1KSA9PT0gMHg1ODsgLy8gW1xuICAgICAgICAgICAgbG9va3VwLnNldChmbiwgaXNOYXRpdmUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBpc05hdGl2ZTtcbiAgICB9O1xufSkoKTtcbmNvbnN0IGlzTnVtZXJpY0xvb2t1cCA9IHt9O1xuZnVuY3Rpb24gaXNBcnJheUluZGV4KHZhbHVlKSB7XG4gICAgc3dpdGNoICh0eXBlb2YgdmFsdWUpIHtcbiAgICAgICAgY2FzZSBcIm51bWJlclwiOlxuICAgICAgICAgICAgcmV0dXJuIHZhbHVlID49IDAgJiYgKHZhbHVlIHwgMCkgPT09IHZhbHVlO1xuICAgICAgICBjYXNlIFwic3RyaW5nXCI6IHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGlzTnVtZXJpY0xvb2t1cFt2YWx1ZV07XG4gICAgICAgICAgICBpZiAocmVzdWx0ICE9PSB2b2lkIDApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgbGVuZ3RoID0gdmFsdWUubGVuZ3RoO1xuICAgICAgICAgICAgaWYgKGxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHJldHVybiAoaXNOdW1lcmljTG9va3VwW3ZhbHVlXSA9IGZhbHNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBjaCA9IDA7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICAgICAgY2ggPSB2YWx1ZS5jaGFyQ29kZUF0KGkpO1xuICAgICAgICAgICAgICAgIGlmICgoaSA9PT0gMCAmJiBjaCA9PT0gMHgzMCAmJiBsZW5ndGggPiAxKSAvKiBtdXN0IG5vdCBzdGFydCB3aXRoIDAgKi8gfHxcbiAgICAgICAgICAgICAgICAgICAgY2ggPCAweDMwIC8qIDAgKi8gfHxcbiAgICAgICAgICAgICAgICAgICAgY2ggPiAweDM5IC8qIDkgKi8pIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChpc051bWVyaWNMb29rdXBbdmFsdWVdID0gZmFsc2UpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiAoaXNOdW1lcmljTG9va3VwW3ZhbHVlXSA9IHRydWUpO1xuICAgICAgICB9XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxufVxuIiwiZXhwb3J0ICogZnJvbSBcIi4vZGkuanNcIjtcbiIsImltcG9ydCB7IF9fZGVjb3JhdGUgfSBmcm9tIFwidHNsaWJcIjtcbmltcG9ydCB7IGF0dHIsIERPTSwgT2JzZXJ2YWJsZSB9IGZyb20gXCJAbWljcm9zb2Z0L2Zhc3QtZWxlbWVudFwiO1xuaW1wb3J0IHsga2V5RXNjYXBlLCBrZXlUYWIgfSBmcm9tIFwiQG1pY3Jvc29mdC9mYXN0LXdlYi11dGlsaXRpZXNcIjtcbmltcG9ydCB7IGlzVGFiYmFibGUgfSBmcm9tIFwidGFiYmFibGVcIjtcbmltcG9ydCB7IEZvdW5kYXRpb25FbGVtZW50IH0gZnJvbSBcIi4uL2ZvdW5kYXRpb24tZWxlbWVudC9mb3VuZGF0aW9uLWVsZW1lbnQuanNcIjtcbi8qKlxuICogQSBTd2l0Y2ggQ3VzdG9tIEhUTUwgRWxlbWVudC5cbiAqIEltcGxlbWVudHMgdGhlIHtAbGluayBodHRwczovL3d3dy53My5vcmcvVFIvd2FpLWFyaWEtMS4xLyNkaWFsb2cgfCBBUklBIGRpYWxvZyB9LlxuICpcbiAqIEBzbG90IC0gVGhlIGRlZmF1bHQgc2xvdCBmb3IgdGhlIGRpYWxvZyBjb250ZW50XG4gKiBAY3NzcGFydCBwb3NpdGlvbmluZy1yZWdpb24gLSBBIHdyYXBwaW5nIGVsZW1lbnQgdXNlZCB0byBjZW50ZXIgdGhlIGRpYWxvZyBhbmQgcG9zaXRpb24gdGhlIG1vZGFsIG92ZXJsYXlcbiAqIEBjc3NwYXJ0IG92ZXJsYXkgLSBUaGUgbW9kYWwgZGlhbG9nIG92ZXJsYXlcbiAqIEBjc3NwYXJ0IGNvbnRyb2wgLSBUaGUgZGlhbG9nIGVsZW1lbnRcbiAqIEBmaXJlcyBjYW5jZWwgLSBGaXJlcyBhIGN1c3RvbSAnY2FuY2VsJyBldmVudCB3aGVuIHRoZSBtb2RhbCBvdmVybGF5IGlzIGNsaWNrZWRcbiAqIEBmaXJlcyBjbG9zZSAtIEZpcmVzIGEgY3VzdG9tICdjbG9zZScgZXZlbnQgd2hlbiB0aGUgZGlhbG9nIGlzIGhpZGRlblxuICpcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGNsYXNzIERpYWxvZyBleHRlbmRzIEZvdW5kYXRpb25FbGVtZW50IHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEluZGljYXRlcyB0aGUgZWxlbWVudCBpcyBtb2RhbC4gV2hlbiBtb2RhbCwgdXNlciBtb3VzZSBpbnRlcmFjdGlvbiB3aWxsIGJlIGxpbWl0ZWQgdG8gdGhlIGNvbnRlbnRzIG9mIHRoZSBlbGVtZW50IGJ5IGEgbW9kYWxcbiAgICAgICAgICogb3ZlcmxheS4gIENsaWNrcyBvbiB0aGUgb3ZlcmxheSB3aWxsIGNhdXNlIHRoZSBkaWFsb2cgdG8gZW1pdCBhIFwiZGlzbWlzc1wiIGV2ZW50LlxuICAgICAgICAgKiBAcHVibGljXG4gICAgICAgICAqIEBkZWZhdWx0VmFsdWUgLSB0cnVlXG4gICAgICAgICAqIEByZW1hcmtzXG4gICAgICAgICAqIEhUTUwgQXR0cmlidXRlOiBtb2RhbFxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5tb2RhbCA9IHRydWU7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgaGlkZGVuIHN0YXRlIG9mIHRoZSBlbGVtZW50LlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcHVibGljXG4gICAgICAgICAqIEBkZWZhdWx0VmFsdWUgLSBmYWxzZVxuICAgICAgICAgKiBAcmVtYXJrc1xuICAgICAgICAgKiBIVE1MIEF0dHJpYnV0ZTogaGlkZGVuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmhpZGRlbiA9IGZhbHNlO1xuICAgICAgICAvKipcbiAgICAgICAgICogSW5kaWNhdGVzIHRoYXQgdGhlIGRpYWxvZyBzaG91bGQgdHJhcCBmb2N1cy5cbiAgICAgICAgICpcbiAgICAgICAgICogQHB1YmxpY1xuICAgICAgICAgKiBAZGVmYXVsdFZhbHVlIC0gdHJ1ZVxuICAgICAgICAgKiBAcmVtYXJrc1xuICAgICAgICAgKiBIVE1MIEF0dHJpYnV0ZTogdHJhcC1mb2N1c1xuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy50cmFwRm9jdXMgPSB0cnVlO1xuICAgICAgICB0aGlzLnRyYXBGb2N1c0NoYW5nZWQgPSAoKSA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy4kZmFzdENvbnRyb2xsZXIuaXNDb25uZWN0ZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVRyYXBGb2N1cygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICAvKipcbiAgICAgICAgICogQGludGVybmFsXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmlzVHJhcHBpbmdGb2N1cyA9IGZhbHNlO1xuICAgICAgICB0aGlzLmhhbmRsZURvY3VtZW50S2V5ZG93biA9IChlKSA9PiB7XG4gICAgICAgICAgICBpZiAoIWUuZGVmYXVsdFByZXZlbnRlZCAmJiAhdGhpcy5oaWRkZW4pIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKGUua2V5KSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2Uga2V5RXNjYXBlOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNtaXNzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBrZXlUYWI6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZVRhYktleURvd24oZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuaGFuZGxlRG9jdW1lbnRGb2N1cyA9IChlKSA9PiB7XG4gICAgICAgICAgICBpZiAoIWUuZGVmYXVsdFByZXZlbnRlZCAmJiB0aGlzLnNob3VsZEZvcmNlRm9jdXMoZS50YXJnZXQpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5mb2N1c0ZpcnN0RWxlbWVudCgpO1xuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5oYW5kbGVUYWJLZXlEb3duID0gKGUpID0+IHtcbiAgICAgICAgICAgIGlmICghdGhpcy50cmFwRm9jdXMgfHwgdGhpcy5oaWRkZW4pIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBib3VuZHMgPSB0aGlzLmdldFRhYlF1ZXVlQm91bmRzKCk7XG4gICAgICAgICAgICBpZiAoYm91bmRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChib3VuZHMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICAgICAgLy8ga2VlcCBmb2N1cyBvbiBzaW5nbGUgZWxlbWVudFxuICAgICAgICAgICAgICAgIGJvdW5kc1swXS5mb2N1cygpO1xuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZS5zaGlmdEtleSAmJiBlLnRhcmdldCA9PT0gYm91bmRzWzBdKSB7XG4gICAgICAgICAgICAgICAgYm91bmRzW2JvdW5kcy5sZW5ndGggLSAxXS5mb2N1cygpO1xuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKCFlLnNoaWZ0S2V5ICYmIGUudGFyZ2V0ID09PSBib3VuZHNbYm91bmRzLmxlbmd0aCAtIDFdKSB7XG4gICAgICAgICAgICAgICAgYm91bmRzWzBdLmZvY3VzKCk7XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmdldFRhYlF1ZXVlQm91bmRzID0gKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgYm91bmRzID0gW107XG4gICAgICAgICAgICByZXR1cm4gRGlhbG9nLnJlZHVjZVRhYmJhYmxlSXRlbXMoYm91bmRzLCB0aGlzKTtcbiAgICAgICAgfTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIGZvY3VzIG9uIGZpcnN0IGVsZW1lbnQgb2YgdGFiIHF1ZXVlXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmZvY3VzRmlyc3RFbGVtZW50ID0gKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgYm91bmRzID0gdGhpcy5nZXRUYWJRdWV1ZUJvdW5kcygpO1xuICAgICAgICAgICAgaWYgKGJvdW5kcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgYm91bmRzWzBdLmZvY3VzKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5kaWFsb2cgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmRpYWxvZy5mb2N1cygpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIHdlIHNob3VsZCBvbmx5IGZvY3VzIGlmIGZvY3VzIGhhcyBub3QgYWxyZWFkeSBiZWVuIGJyb3VnaHQgdG8gdGhlIGRpYWxvZ1xuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5zaG91bGRGb3JjZUZvY3VzID0gKGN1cnJlbnRGb2N1c0VsZW1lbnQpID0+IHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmlzVHJhcHBpbmdGb2N1cyAmJiAhdGhpcy5jb250YWlucyhjdXJyZW50Rm9jdXNFbGVtZW50KTtcbiAgICAgICAgfTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIHdlIHNob3VsZCB3ZSBiZSBhY3RpdmUgdHJhcHBpbmcgZm9jdXNcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuc2hvdWxkVHJhcEZvY3VzID0gKCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudHJhcEZvY3VzICYmICF0aGlzLmhpZGRlbjtcbiAgICAgICAgfTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqXG4gICAgICAgICAqXG4gICAgICAgICAqIEBpbnRlcm5hbFxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy51cGRhdGVUcmFwRm9jdXMgPSAoc2hvdWxkVHJhcEZvY3VzT3ZlcnJpZGUpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHNob3VsZFRyYXBGb2N1cyA9IHNob3VsZFRyYXBGb2N1c092ZXJyaWRlID09PSB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICA/IHRoaXMuc2hvdWxkVHJhcEZvY3VzKClcbiAgICAgICAgICAgICAgICA6IHNob3VsZFRyYXBGb2N1c092ZXJyaWRlO1xuICAgICAgICAgICAgaWYgKHNob3VsZFRyYXBGb2N1cyAmJiAhdGhpcy5pc1RyYXBwaW5nRm9jdXMpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmlzVHJhcHBpbmdGb2N1cyA9IHRydWU7XG4gICAgICAgICAgICAgICAgLy8gQWRkIGFuIGV2ZW50IGxpc3RlbmVyIGZvciBmb2N1c2luIGV2ZW50cyBpZiB3ZSBhcmUgdHJhcHBpbmcgZm9jdXNcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiZm9jdXNpblwiLCB0aGlzLmhhbmRsZURvY3VtZW50Rm9jdXMpO1xuICAgICAgICAgICAgICAgIERPTS5xdWV1ZVVwZGF0ZSgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnNob3VsZEZvcmNlRm9jdXMoZG9jdW1lbnQuYWN0aXZlRWxlbWVudCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZm9jdXNGaXJzdEVsZW1lbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoIXNob3VsZFRyYXBGb2N1cyAmJiB0aGlzLmlzVHJhcHBpbmdGb2N1cykge1xuICAgICAgICAgICAgICAgIHRoaXMuaXNUcmFwcGluZ0ZvY3VzID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgLy8gcmVtb3ZlIGV2ZW50IGxpc3RlbmVyIGlmIHdlIGFyZSBub3QgdHJhcHBpbmcgZm9jdXNcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwiZm9jdXNpblwiLCB0aGlzLmhhbmRsZURvY3VtZW50Rm9jdXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBkaXNtaXNzKCkge1xuICAgICAgICB0aGlzLiRlbWl0KFwiZGlzbWlzc1wiKTtcbiAgICAgICAgLy8gaW1wbGVtZW50IGA8ZGlhbG9nPmAgaW50ZXJmYWNlXG4gICAgICAgIHRoaXMuJGVtaXQoXCJjYW5jZWxcIik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBtZXRob2QgdG8gc2hvdyB0aGUgZGlhbG9nLlxuICAgICAqXG4gICAgICogQHB1YmxpY1xuICAgICAqL1xuICAgIHNob3coKSB7XG4gICAgICAgIHRoaXMuaGlkZGVuID0gZmFsc2U7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBtZXRob2QgdG8gaGlkZSB0aGUgZGlhbG9nLlxuICAgICAqXG4gICAgICogQHB1YmxpY1xuICAgICAqL1xuICAgIGhpZGUoKSB7XG4gICAgICAgIHRoaXMuaGlkZGVuID0gdHJ1ZTtcbiAgICAgICAgLy8gaW1wbGVtZW50IGA8ZGlhbG9nPmAgaW50ZXJmYWNlXG4gICAgICAgIHRoaXMuJGVtaXQoXCJjbG9zZVwiKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgICAgIHN1cGVyLmNvbm5lY3RlZENhbGxiYWNrKCk7XG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuaGFuZGxlRG9jdW1lbnRLZXlkb3duKTtcbiAgICAgICAgdGhpcy5ub3RpZmllciA9IE9ic2VydmFibGUuZ2V0Tm90aWZpZXIodGhpcyk7XG4gICAgICAgIHRoaXMubm90aWZpZXIuc3Vic2NyaWJlKHRoaXMsIFwiaGlkZGVuXCIpO1xuICAgICAgICB0aGlzLnVwZGF0ZVRyYXBGb2N1cygpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBkaXNjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICAgICAgc3VwZXIuZGlzY29ubmVjdGVkQ2FsbGJhY2soKTtcbiAgICAgICAgLy8gcmVtb3ZlIGtleWRvd24gZXZlbnQgbGlzdGVuZXJcbiAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5oYW5kbGVEb2N1bWVudEtleWRvd24pO1xuICAgICAgICAvLyBpZiB3ZSBhcmUgdHJhcHBpbmcgZm9jdXMgcmVtb3ZlIHRoZSBmb2N1c2luIGxpc3RlbmVyXG4gICAgICAgIHRoaXMudXBkYXRlVHJhcEZvY3VzKGZhbHNlKTtcbiAgICAgICAgdGhpcy5ub3RpZmllci51bnN1YnNjcmliZSh0aGlzLCBcImhpZGRlblwiKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgaGFuZGxlQ2hhbmdlKHNvdXJjZSwgcHJvcGVydHlOYW1lKSB7XG4gICAgICAgIHN3aXRjaCAocHJvcGVydHlOYW1lKSB7XG4gICAgICAgICAgICBjYXNlIFwiaGlkZGVuXCI6XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVUcmFwRm9jdXMoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVkdWNlIGEgY29sbGVjdGlvbiB0byBvbmx5IGl0cyBmb2N1c2FibGUgZWxlbWVudHMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZWxlbWVudHMgLSBDb2xsZWN0aW9uIG9mIGVsZW1lbnRzIHRvIHJlZHVjZVxuICAgICAqIEBwYXJhbSBlbGVtZW50IC0gVGhlIGN1cnJlbnQgZWxlbWVudFxuICAgICAqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgc3RhdGljIHJlZHVjZVRhYmJhYmxlSXRlbXMoZWxlbWVudHMsIGVsZW1lbnQpIHtcbiAgICAgICAgaWYgKGVsZW1lbnQuZ2V0QXR0cmlidXRlKFwidGFiaW5kZXhcIikgPT09IFwiLTFcIikge1xuICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnRzO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc1RhYmJhYmxlKGVsZW1lbnQpIHx8XG4gICAgICAgICAgICAoRGlhbG9nLmlzRm9jdXNhYmxlRmFzdEVsZW1lbnQoZWxlbWVudCkgJiYgRGlhbG9nLmhhc1RhYmJhYmxlU2hhZG93KGVsZW1lbnQpKSkge1xuICAgICAgICAgICAgZWxlbWVudHMucHVzaChlbGVtZW50KTtcbiAgICAgICAgICAgIHJldHVybiBlbGVtZW50cztcbiAgICAgICAgfVxuICAgICAgICBpZiAoZWxlbWVudC5jaGlsZEVsZW1lbnRDb3VudCkge1xuICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnRzLmNvbmNhdChBcnJheS5mcm9tKGVsZW1lbnQuY2hpbGRyZW4pLnJlZHVjZShEaWFsb2cucmVkdWNlVGFiYmFibGVJdGVtcywgW10pKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZWxlbWVudHM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRlc3QgaWYgZWxlbWVudCBpcyBmb2N1c2FibGUgZmFzdCBlbGVtZW50XG4gICAgICpcbiAgICAgKiBAcGFyYW0gZWxlbWVudCAtIFRoZSBlbGVtZW50IHRvIGNoZWNrXG4gICAgICpcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBzdGF0aWMgaXNGb2N1c2FibGVGYXN0RWxlbWVudChlbGVtZW50KSB7XG4gICAgICAgIHZhciBfYSwgX2I7XG4gICAgICAgIHJldHVybiAhISgoX2IgPSAoX2EgPSBlbGVtZW50LiRmYXN0Q29udHJvbGxlcikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmRlZmluaXRpb24uc2hhZG93T3B0aW9ucykgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLmRlbGVnYXRlc0ZvY3VzKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGVzdCBpZiB0aGUgZWxlbWVudCBoYXMgYSBmb2N1c2FibGUgc2hhZG93XG4gICAgICpcbiAgICAgKiBAcGFyYW0gZWxlbWVudCAtIFRoZSBlbGVtZW50IHRvIGNoZWNrXG4gICAgICpcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBzdGF0aWMgaGFzVGFiYmFibGVTaGFkb3coZWxlbWVudCkge1xuICAgICAgICB2YXIgX2EsIF9iO1xuICAgICAgICByZXR1cm4gQXJyYXkuZnJvbSgoX2IgPSAoX2EgPSBlbGVtZW50LnNoYWRvd1Jvb3QpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5xdWVyeVNlbGVjdG9yQWxsKFwiKlwiKSkgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogW10pLnNvbWUoeCA9PiB7XG4gICAgICAgICAgICByZXR1cm4gaXNUYWJiYWJsZSh4KTtcbiAgICAgICAgfSk7XG4gICAgfVxufVxuX19kZWNvcmF0ZShbXG4gICAgYXR0cih7IG1vZGU6IFwiYm9vbGVhblwiIH0pXG5dLCBEaWFsb2cucHJvdG90eXBlLCBcIm1vZGFsXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBhdHRyKHsgbW9kZTogXCJib29sZWFuXCIgfSlcbl0sIERpYWxvZy5wcm90b3R5cGUsIFwiaGlkZGVuXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBhdHRyKHsgYXR0cmlidXRlOiBcInRyYXAtZm9jdXNcIiwgbW9kZTogXCJib29sZWFuXCIgfSlcbl0sIERpYWxvZy5wcm90b3R5cGUsIFwidHJhcEZvY3VzXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBhdHRyKHsgYXR0cmlidXRlOiBcImFyaWEtZGVzY3JpYmVkYnlcIiB9KVxuXSwgRGlhbG9nLnByb3RvdHlwZSwgXCJhcmlhRGVzY3JpYmVkYnlcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIGF0dHIoeyBhdHRyaWJ1dGU6IFwiYXJpYS1sYWJlbGxlZGJ5XCIgfSlcbl0sIERpYWxvZy5wcm90b3R5cGUsIFwiYXJpYUxhYmVsbGVkYnlcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIGF0dHIoeyBhdHRyaWJ1dGU6IFwiYXJpYS1sYWJlbFwiIH0pXG5dLCBEaWFsb2cucHJvdG90eXBlLCBcImFyaWFMYWJlbFwiLCB2b2lkIDApO1xuIiwiaW1wb3J0IHsgaHRtbCwgcmVmLCB3aGVuIH0gZnJvbSBcIkBtaWNyb3NvZnQvZmFzdC1lbGVtZW50XCI7XG4vKipcbiAqIFRoZSB0ZW1wbGF0ZSBmb3IgdGhlIHtAbGluayBAbWljcm9zb2Z0L2Zhc3QtZm91bmRhdGlvbiNEaWFsb2d9IGNvbXBvbmVudC5cbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGNvbnN0IGRpYWxvZ1RlbXBsYXRlID0gKGNvbnRleHQsIGRlZmluaXRpb24pID0+IGh0bWwgYFxuICAgIDxkaXYgY2xhc3M9XCJwb3NpdGlvbmluZy1yZWdpb25cIiBwYXJ0PVwicG9zaXRpb25pbmctcmVnaW9uXCI+XG4gICAgICAgICR7d2hlbih4ID0+IHgubW9kYWwsIGh0bWwgYFxuICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgY2xhc3M9XCJvdmVybGF5XCJcbiAgICAgICAgICAgICAgICAgICAgcGFydD1cIm92ZXJsYXlcIlxuICAgICAgICAgICAgICAgICAgICByb2xlPVwicHJlc2VudGF0aW9uXCJcbiAgICAgICAgICAgICAgICAgICAgQGNsaWNrPVwiJHt4ID0+IHguZGlzbWlzcygpfVwiXG4gICAgICAgICAgICAgICAgPjwvZGl2PlxuICAgICAgICAgICAgYCl9XG4gICAgICAgIDxkaXZcbiAgICAgICAgICAgIHJvbGU9XCJkaWFsb2dcIlxuICAgICAgICAgICAgdGFiaW5kZXg9XCItMVwiXG4gICAgICAgICAgICBjbGFzcz1cImNvbnRyb2xcIlxuICAgICAgICAgICAgcGFydD1cImNvbnRyb2xcIlxuICAgICAgICAgICAgYXJpYS1tb2RhbD1cIiR7eCA9PiB4Lm1vZGFsfVwiXG4gICAgICAgICAgICBhcmlhLWRlc2NyaWJlZGJ5PVwiJHt4ID0+IHguYXJpYURlc2NyaWJlZGJ5fVwiXG4gICAgICAgICAgICBhcmlhLWxhYmVsbGVkYnk9XCIke3ggPT4geC5hcmlhTGFiZWxsZWRieX1cIlxuICAgICAgICAgICAgYXJpYS1sYWJlbD1cIiR7eCA9PiB4LmFyaWFMYWJlbH1cIlxuICAgICAgICAgICAgJHtyZWYoXCJkaWFsb2dcIil9XG4gICAgICAgID5cbiAgICAgICAgICAgIDxzbG90Pjwvc2xvdD5cbiAgICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG5gO1xuIiwiZXhwb3J0ICogZnJvbSBcIi4vZGlhbG9nLnRlbXBsYXRlLmpzXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9kaWFsb2cuanNcIjtcbiIsImltcG9ydCB7IEF0dGFjaGVkQmVoYXZpb3JIVE1MRGlyZWN0aXZlLCBET00sIFN1YnNjcmliZXJTZXQsIH0gZnJvbSBcIkBtaWNyb3NvZnQvZmFzdC1lbGVtZW50XCI7XG5jb25zdCBvYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKChtdXRhdGlvbnMpID0+IHtcbiAgICBmb3IgKGNvbnN0IG11dGF0aW9uIG9mIG11dGF0aW9ucykge1xuICAgICAgICBBdHRyaWJ1dGVSZWZsZWN0aW9uU3Vic2NyaXB0aW9uU2V0LmdldE9yQ3JlYXRlRm9yKG11dGF0aW9uLnRhcmdldCkubm90aWZ5KG11dGF0aW9uLmF0dHJpYnV0ZU5hbWUpO1xuICAgIH1cbn0pO1xuY2xhc3MgQXR0cmlidXRlUmVmbGVjdGlvblN1YnNjcmlwdGlvblNldCBleHRlbmRzIFN1YnNjcmliZXJTZXQge1xuICAgIGNvbnN0cnVjdG9yKHNvdXJjZSkge1xuICAgICAgICBzdXBlcihzb3VyY2UpO1xuICAgICAgICB0aGlzLndhdGNoZWRBdHRyaWJ1dGVzID0gbmV3IFNldCgpO1xuICAgICAgICBBdHRyaWJ1dGVSZWZsZWN0aW9uU3Vic2NyaXB0aW9uU2V0LnN1YnNjcmliZXJDYWNoZS5zZXQoc291cmNlLCB0aGlzKTtcbiAgICB9XG4gICAgc3Vic2NyaWJlKHN1YnNjcmliZXIpIHtcbiAgICAgICAgc3VwZXIuc3Vic2NyaWJlKHN1YnNjcmliZXIpO1xuICAgICAgICBpZiAoIXRoaXMud2F0Y2hlZEF0dHJpYnV0ZXMuaGFzKHN1YnNjcmliZXIuYXR0cmlidXRlcykpIHtcbiAgICAgICAgICAgIHRoaXMud2F0Y2hlZEF0dHJpYnV0ZXMuYWRkKHN1YnNjcmliZXIuYXR0cmlidXRlcyk7XG4gICAgICAgICAgICB0aGlzLm9ic2VydmUoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB1bnN1YnNjcmliZShzdWJzY3JpYmVyKSB7XG4gICAgICAgIHN1cGVyLnVuc3Vic2NyaWJlKHN1YnNjcmliZXIpO1xuICAgICAgICBpZiAodGhpcy53YXRjaGVkQXR0cmlidXRlcy5oYXMoc3Vic2NyaWJlci5hdHRyaWJ1dGVzKSkge1xuICAgICAgICAgICAgdGhpcy53YXRjaGVkQXR0cmlidXRlcy5kZWxldGUoc3Vic2NyaWJlci5hdHRyaWJ1dGVzKTtcbiAgICAgICAgICAgIHRoaXMub2JzZXJ2ZSgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRpYyBnZXRPckNyZWF0ZUZvcihzb3VyY2UpIHtcbiAgICAgICAgcmV0dXJuICh0aGlzLnN1YnNjcmliZXJDYWNoZS5nZXQoc291cmNlKSB8fFxuICAgICAgICAgICAgbmV3IEF0dHJpYnV0ZVJlZmxlY3Rpb25TdWJzY3JpcHRpb25TZXQoc291cmNlKSk7XG4gICAgfVxuICAgIG9ic2VydmUoKSB7XG4gICAgICAgIGNvbnN0IGF0dHJpYnV0ZUZpbHRlciA9IFtdO1xuICAgICAgICBmb3IgKGNvbnN0IGF0dHJpYnV0ZXMgb2YgdGhpcy53YXRjaGVkQXR0cmlidXRlcy52YWx1ZXMoKSkge1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhdHRyaWJ1dGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgYXR0cmlidXRlRmlsdGVyLnB1c2goYXR0cmlidXRlc1tpXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgb2JzZXJ2ZXIub2JzZXJ2ZSh0aGlzLnNvdXJjZSwgeyBhdHRyaWJ1dGVGaWx0ZXIgfSk7XG4gICAgfVxufVxuQXR0cmlidXRlUmVmbGVjdGlvblN1YnNjcmlwdGlvblNldC5zdWJzY3JpYmVyQ2FjaGUgPSBuZXcgV2Vha01hcCgpO1xuY2xhc3MgUmVmbGVjdEF0dHJCZWhhdmlvciB7XG4gICAgY29uc3RydWN0b3IodGFyZ2V0LCBhdHRyaWJ1dGVzKSB7XG4gICAgICAgIHRoaXMudGFyZ2V0ID0gdGFyZ2V0O1xuICAgICAgICB0aGlzLmF0dHJpYnV0ZXMgPSBPYmplY3QuZnJlZXplKGF0dHJpYnV0ZXMpO1xuICAgIH1cbiAgICBiaW5kKHNvdXJjZSkge1xuICAgICAgICBBdHRyaWJ1dGVSZWZsZWN0aW9uU3Vic2NyaXB0aW9uU2V0LmdldE9yQ3JlYXRlRm9yKHNvdXJjZSkuc3Vic2NyaWJlKHRoaXMpO1xuICAgICAgICAvLyBSZWZsZWN0IGFueSBleGlzdGluZyBhdHRyaWJ1dGVzIGJlY2F1c2UgTXV0YXRpb25PYnNlcnZlciB3aWxsIG9ubHlcbiAgICAgICAgLy8gaGFuZGxlICpjaGFuZ2VzKiB0byBhdHRyaWJ1dGVzLlxuICAgICAgICBpZiAoc291cmNlLmhhc0F0dHJpYnV0ZXMoKSkge1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzb3VyY2UuYXR0cmlidXRlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlQ2hhbmdlKHNvdXJjZSwgc291cmNlLmF0dHJpYnV0ZXNbaV0ubmFtZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgdW5iaW5kKHNvdXJjZSkge1xuICAgICAgICBBdHRyaWJ1dGVSZWZsZWN0aW9uU3Vic2NyaXB0aW9uU2V0LmdldE9yQ3JlYXRlRm9yKHNvdXJjZSkudW5zdWJzY3JpYmUodGhpcyk7XG4gICAgfVxuICAgIGhhbmRsZUNoYW5nZShzb3VyY2UsIGFyZykge1xuICAgICAgICAvLyBJbiBjYXNlcyB3aGVyZSB0d28gb3IgbW9yZSBSZWZsZWN0QXR0ckJlaGF2aW9yIGluc3RhbmNlcyBhcmUgYm91bmQgdG8gdGhlIHNhbWUgZWxlbWVudCxcbiAgICAgICAgLy8gdGhleSB3aWxsIHNoYXJlIGEgU3Vic2NyaWJlciBpbXBsZW1lbnRhdGlvbi4gSW4gdGhhdCBjYXNlLCB0aGlzIGhhbmRsZSBjaGFuZ2UgY2FuIGJlIGludm9rZWQgd2l0aFxuICAgICAgICAvLyBhdHRyaWJ1dGVzIGFuIGluc3RhbmNlcyBkb2Vzbid0IG5lZWQgdG8gcmVmbGVjdC4gVGhpcyBndWFyZHMgYWdhaW5zdCByZWZsZWN0aW5nIGF0dHJzXG4gICAgICAgIC8vIHRoYXQgc2hvdWxkbid0IGJlIHJlZmxlY3RlZC5cbiAgICAgICAgaWYgKHRoaXMuYXR0cmlidXRlcy5pbmNsdWRlcyhhcmcpKSB7XG4gICAgICAgICAgICBET00uc2V0QXR0cmlidXRlKHRoaXMudGFyZ2V0LCBhcmcsIHNvdXJjZS5nZXRBdHRyaWJ1dGUoYXJnKSk7XG4gICAgICAgIH1cbiAgICB9XG59XG4vKipcbiAqIFJlZmxlY3RzIGF0dHJpYnV0ZXMgZnJvbSB0aGUgaG9zdCBlbGVtZW50IHRvIHRoZSB0YXJnZXQgZWxlbWVudCBvZiB0aGUgZGlyZWN0aXZlLlxuICogQHBhcmFtIGF0dHJpYnV0ZXMgLSBUaGUgYXR0cmlidXRlcyB0byByZWZsZWN0XG4gKlxuICogQGJldGFcbiAqIEBleGFtcGxlXG4gKiBgYGB0c1xuICogY29uc3QgdGVtcGxhdGUgPSBodG1sYFxuICogICAgIDxidXR0b25cbiAqICAgICAgICAgJHtyZWZsZWN0QXR0cmlidXRlcyhcImFyaWEtbGFiZWxcIiwgXCJhcmlhLWRlc2NyaWJlZGJ5XCIpfVxuICogICAgID5cbiAqICAgICAgICAgIGhlbGxvIHdvcmxkXG4gKiAgICAgPC9idXR0b25cbiAqIGBcbiAqIGBgYFxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVmbGVjdEF0dHJpYnV0ZXMoLi4uYXR0cmlidXRlcykge1xuICAgIHJldHVybiBuZXcgQXR0YWNoZWRCZWhhdmlvckhUTUxEaXJlY3RpdmUoXCJmYXN0LXJlZmxlY3QtYXR0clwiLCBSZWZsZWN0QXR0ckJlaGF2aW9yLCBhdHRyaWJ1dGVzKTtcbn1cbiIsImltcG9ydCB7IF9fZGVjb3JhdGUgfSBmcm9tIFwidHNsaWJcIjtcbmltcG9ydCB7IGF0dHIgfSBmcm9tIFwiQG1pY3Jvc29mdC9mYXN0LWVsZW1lbnRcIjtcbmltcG9ydCB7IEZvdW5kYXRpb25FbGVtZW50IH0gZnJvbSBcIi4uL2ZvdW5kYXRpb24tZWxlbWVudC9mb3VuZGF0aW9uLWVsZW1lbnQuanNcIjtcbi8qKlxuICogQSBEaXNjbG9zdXJlIEN1c3RvbSBIVE1MIEVsZW1lbnQuXG4gKiBCYXNlZCBsYXJnZWx5IG9uIHRoZSB7QGxpbmsgaHR0cHM6Ly93M2MuZ2l0aHViLmlvL2FyaWEtcHJhY3RpY2VzLyNkaXNjbG9zdXJlIHwgZGlzY2xvc3VyZSBlbGVtZW50IH0uXG4gKlxuICogQHNsb3Qgc3RhcnQgLSBDb250ZW50IHdoaWNoIGNhbiBiZSBwcm92aWRlZCBiZWZvcmUgdGhlIHN1bW1hcnkgY29udGVudFxuICogQHNsb3QgZW5kIC0gQ29udGVudCB3aGljaCBjYW4gYmUgcHJvdmlkZWQgYWZ0ZXIgdGhlIHN1bW1hcnkgY29udGVudFxuICogQHNsb3QgdGl0bGUgLSBUaGUgc3VtbWFyeSBjb250ZW50XG4gKiBAc2xvdCAtIFRoZSBkZWZhdWx0IHNsb3QgZm9yIHRoZSBkaXNjbG9zdXJlIGNvbnRlbnRcbiAqIEBmaXJlcyB0b2dnbGUgLSBmaXJlcyBhIHRvZ2dsZSBldmVudCB3aGVuIHRoZSBzdW1tYXJ5IGlzIHRvZ2dsZWRcbiAqXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjbGFzcyBEaXNjbG9zdXJlIGV4dGVuZHMgRm91bmRhdGlvbkVsZW1lbnQge1xuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIGNvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgICAgICBzdXBlci5jb25uZWN0ZWRDYWxsYmFjaygpO1xuICAgICAgICB0aGlzLnNldHVwKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIGRpc2Nvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgICAgICBzdXBlci5kaXNjb25uZWN0ZWRDYWxsYmFjaygpO1xuICAgICAgICB0aGlzLmRldGFpbHMucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInRvZ2dsZVwiLCB0aGlzLm9uVG9nZ2xlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2hvdyBleHRyYSBjb250ZW50LlxuICAgICAqL1xuICAgIHNob3coKSB7XG4gICAgICAgIHRoaXMuZGV0YWlscy5vcGVuID0gdHJ1ZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSGlkZSBleHRyYSBjb250ZW50LlxuICAgICAqL1xuICAgIGhpZGUoKSB7XG4gICAgICAgIHRoaXMuZGV0YWlscy5vcGVuID0gZmFsc2U7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRvZ2dsZSB0aGUgY3VycmVudChleHBhbmRlZC9jb2xsYXBzZWQpIHN0YXRlLlxuICAgICAqL1xuICAgIHRvZ2dsZSgpIHtcbiAgICAgICAgdGhpcy5kZXRhaWxzLm9wZW4gPSAhdGhpcy5kZXRhaWxzLm9wZW47XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlZ2lzdGVyIGxpc3RlbmVyIGFuZCBzZXQgZGVmYXVsdCBkaXNjbG9zdXJlIG1vZGVcbiAgICAgKi9cbiAgICBzZXR1cCgpIHtcbiAgICAgICAgdGhpcy5vblRvZ2dsZSA9IHRoaXMub25Ub2dnbGUuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5kZXRhaWxzLmFkZEV2ZW50TGlzdGVuZXIoXCJ0b2dnbGVcIiwgdGhpcy5vblRvZ2dsZSk7XG4gICAgICAgIGlmICh0aGlzLmV4cGFuZGVkKSB7XG4gICAgICAgICAgICB0aGlzLnNob3coKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBVcGRhdGUgdGhlIGFyaWEgYXR0ciBhbmQgZmlyZSBgdG9nZ2xlYCBldmVudFxuICAgICAqL1xuICAgIG9uVG9nZ2xlKCkge1xuICAgICAgICB0aGlzLmV4cGFuZGVkID0gdGhpcy5kZXRhaWxzLm9wZW47XG4gICAgICAgIHRoaXMuJGVtaXQoXCJ0b2dnbGVcIik7XG4gICAgfVxufVxuX19kZWNvcmF0ZShbXG4gICAgYXR0cih7IG1vZGU6IFwiYm9vbGVhblwiIH0pXG5dLCBEaXNjbG9zdXJlLnByb3RvdHlwZSwgXCJleHBhbmRlZFwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgYXR0clxuXSwgRGlzY2xvc3VyZS5wcm90b3R5cGUsIFwidGl0bGVcIiwgdm9pZCAwKTtcbiIsImltcG9ydCB7IGh0bWwsIHJlZiB9IGZyb20gXCJAbWljcm9zb2Z0L2Zhc3QtZWxlbWVudFwiO1xuLyoqXG4gKiBUaGUgdGVtcGxhdGUgZm9yIHRoZSB7QGxpbmsgQG1pY3Jvc29mdC9mYXN0LWZvdW5kYXRpb24jRGlzY2xvc3VyZX0gY29tcG9uZW50LlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgY29uc3QgZGlzY2xvc3VyZVRlbXBsYXRlID0gKGNvbnRleHQsIGRlZmluaXRpb24pID0+IGh0bWwgYFxuICAgIDxkZXRhaWxzIGNsYXNzPVwiZGlzY2xvc3VyZVwiICR7cmVmKFwiZGV0YWlsc1wiKX0+XG4gICAgICAgIDxzdW1tYXJ5XG4gICAgICAgICAgICBjbGFzcz1cImludm9rZXJcIlxuICAgICAgICAgICAgcm9sZT1cImJ1dHRvblwiXG4gICAgICAgICAgICBhcmlhLWNvbnRyb2xzPVwiZGlzY2xvc3VyZS1jb250ZW50XCJcbiAgICAgICAgICAgIGFyaWEtZXhwYW5kZWQ9XCIke3ggPT4geC5leHBhbmRlZH1cIlxuICAgICAgICA+XG4gICAgICAgICAgICA8c2xvdCBuYW1lPVwic3RhcnRcIj48L3Nsb3Q+XG4gICAgICAgICAgICA8c2xvdCBuYW1lPVwidGl0bGVcIj4ke3ggPT4geC50aXRsZX08L3Nsb3Q+XG4gICAgICAgICAgICA8c2xvdCBuYW1lPVwiZW5kXCI+PC9zbG90PlxuICAgICAgICA8L3N1bW1hcnk+XG4gICAgICAgIDxkaXYgaWQ9XCJkaXNjbG9zdXJlLWNvbnRlbnRcIj48c2xvdD48L3Nsb3Q+PC9kaXY+XG4gICAgPC9kZXRhaWxzPlxuYDtcbiIsImV4cG9ydCAqIGZyb20gXCIuL2Rpc2Nsb3N1cmUudGVtcGxhdGUuanNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL2Rpc2Nsb3N1cmUuanNcIjtcbiIsImltcG9ydCB7IF9fZGVjb3JhdGUgfSBmcm9tIFwidHNsaWJcIjtcbmltcG9ydCB7IGF0dHIgfSBmcm9tIFwiQG1pY3Jvc29mdC9mYXN0LWVsZW1lbnRcIjtcbmltcG9ydCB7IE9yaWVudGF0aW9uIH0gZnJvbSBcIkBtaWNyb3NvZnQvZmFzdC13ZWItdXRpbGl0aWVzXCI7XG5pbXBvcnQgeyBGb3VuZGF0aW9uRWxlbWVudCB9IGZyb20gXCIuLi9mb3VuZGF0aW9uLWVsZW1lbnQvZm91bmRhdGlvbi1lbGVtZW50LmpzXCI7XG5pbXBvcnQgeyBEaXZpZGVyUm9sZSB9IGZyb20gXCIuL2RpdmlkZXIub3B0aW9ucy5qc1wiO1xuZXhwb3J0IHsgRGl2aWRlclJvbGUgfTtcbi8qKlxuICogQSBEaXZpZGVyIEN1c3RvbSBIVE1MIEVsZW1lbnQuXG4gKiBJbXBsZW1lbnRzIHRoZSB7QGxpbmsgaHR0cHM6Ly93d3cudzMub3JnL1RSL3dhaS1hcmlhLTEuMS8jc2VwYXJhdG9yIHwgQVJJQSBzZXBhcmF0b3IgfSBvciB7QGxpbmsgaHR0cHM6Ly93d3cudzMub3JnL1RSL3dhaS1hcmlhLTEuMS8jcHJlc2VudGF0aW9uIHwgQVJJQSBwcmVzZW50YXRpb259LlxuICpcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGNsYXNzIERpdmlkZXIgZXh0ZW5kcyBGb3VuZGF0aW9uRWxlbWVudCB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgcm9sZSBvZiB0aGUgZWxlbWVudC5cbiAgICAgICAgICpcbiAgICAgICAgICogQHB1YmxpY1xuICAgICAgICAgKiBAcmVtYXJrc1xuICAgICAgICAgKiBIVE1MIEF0dHJpYnV0ZTogcm9sZVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5yb2xlID0gRGl2aWRlclJvbGUuc2VwYXJhdG9yO1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIG9yaWVudGF0aW9uIG9mIHRoZSBkaXZpZGVyLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcHVibGljXG4gICAgICAgICAqIEByZW1hcmtzXG4gICAgICAgICAqIEhUTUwgQXR0cmlidXRlOiBvcmllbnRhdGlvblxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5vcmllbnRhdGlvbiA9IE9yaWVudGF0aW9uLmhvcml6b250YWw7XG4gICAgfVxufVxuX19kZWNvcmF0ZShbXG4gICAgYXR0clxuXSwgRGl2aWRlci5wcm90b3R5cGUsIFwicm9sZVwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgYXR0clxuXSwgRGl2aWRlci5wcm90b3R5cGUsIFwib3JpZW50YXRpb25cIiwgdm9pZCAwKTtcbiIsIi8qKlxuICogRGl2aWRlciByb2xlc1xuICogQHB1YmxpY1xuICovXG5leHBvcnQgY29uc3QgRGl2aWRlclJvbGUgPSB7XG4gICAgLyoqXG4gICAgICogVGhlIGRpdmlkZXIgc2VtYW50aWNhbGx5IHNlcGFyYXRlcyBjb250ZW50XG4gICAgICovXG4gICAgc2VwYXJhdG9yOiBcInNlcGFyYXRvclwiLFxuICAgIC8qKlxuICAgICAqIFRoZSBkaXZpZGVyIGhhcyBubyBzZW1hbnRpYyB2YWx1ZSBhbmQgaXMgZm9yIHZpc3VhbCBwcmVzZW50YXRpb24gb25seS5cbiAgICAgKi9cbiAgICBwcmVzZW50YXRpb246IFwicHJlc2VudGF0aW9uXCIsXG59O1xuIiwiaW1wb3J0IHsgaHRtbCB9IGZyb20gXCJAbWljcm9zb2Z0L2Zhc3QtZWxlbWVudFwiO1xuLyoqXG4gKiBUaGUgdGVtcGxhdGUgZm9yIHRoZSB7QGxpbmsgQG1pY3Jvc29mdC9mYXN0LWZvdW5kYXRpb24jRGl2aWRlcn0gY29tcG9uZW50LlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgY29uc3QgZGl2aWRlclRlbXBsYXRlID0gKGNvbnRleHQsIGRlZmluaXRpb24pID0+IGh0bWwgYFxuICAgIDx0ZW1wbGF0ZSByb2xlPVwiJHt4ID0+IHgucm9sZX1cIiBhcmlhLW9yaWVudGF0aW9uPVwiJHt4ID0+IHgub3JpZW50YXRpb259XCI+PC90ZW1wbGF0ZT5cbmA7XG4iLCJleHBvcnQgKiBmcm9tIFwiLi9kaXZpZGVyLnRlbXBsYXRlLmpzXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9kaXZpZGVyLmpzXCI7XG4iLCJpbXBvcnQgeyBfX2RlY29yYXRlIH0gZnJvbSBcInRzbGliXCI7XG5pbXBvcnQgeyBhdHRyLCBib29sZWFuQ29udmVydGVyIH0gZnJvbSBcIkBtaWNyb3NvZnQvZmFzdC1lbGVtZW50XCI7XG5pbXBvcnQgeyBGb3VuZGF0aW9uRWxlbWVudCwgfSBmcm9tIFwiLi4vZm91bmRhdGlvbi1lbGVtZW50L2ZvdW5kYXRpb24tZWxlbWVudC5qc1wiO1xuaW1wb3J0IHsgRmxpcHBlckRpcmVjdGlvbiB9IGZyb20gXCIuL2ZsaXBwZXIub3B0aW9ucy5qc1wiO1xuZXhwb3J0IHsgRmxpcHBlckRpcmVjdGlvbiB9O1xuLyoqXG4gKiBBIEZsaXBwZXIgQ3VzdG9tIEhUTUwgRWxlbWVudC5cbiAqIEZsaXBwZXJzIGFyZSBhIGZvcm0gb2YgYnV0dG9uIHRoYXQgaW1wbGllcyBkaXJlY3Rpb25hbCBjb250ZW50IG5hdmlnYXRpb24sIHN1Y2ggYXMgaW4gYSBjYXJvdXNlbC5cbiAqXG4gKiBAc2xvdCBuZXh0IC0gVGhlIG5leHQgZmxpcHBlciBjb250ZW50XG4gKiBAc2xvdCBwcmV2aW91cyAtIFRoZSBwcmV2aW91cyBmbGlwcGVyIGNvbnRlbnRcbiAqIEBjc3NwYXJ0IG5leHQgLSBXcmFwcyB0aGUgbmV4dCBmbGlwcGVyIGNvbnRlbnRcbiAqIEBjc3NwYXJ0IHByZXZpb3VzIC0gV3JhcHMgdGhlIHByZXZpb3VzIGZsaXBwZXIgY29udGVudFxuICogQGZpcmVzIGNsaWNrIC0gRmlyZXMgYSBjdXN0b20gJ2NsaWNrJyBldmVudCB3aGVuIEVudGVyIG9yIFNwYWNlIGlzIGludm9rZWQgdmlhIGtleWJvYXJkIGFuZCB0aGUgZmxpcHBlciBpcyBleHBvc2VkIHRvIGFzc2lzdGl2ZSB0ZWNobm9sb2dpZXMuXG4gKlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgY2xhc3MgRmxpcHBlciBleHRlbmRzIEZvdW5kYXRpb25FbGVtZW50IHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEluZGljYXRlcyB0aGUgZmxpcHBlciBzaG91bGQgYmUgaGlkZGVuIGZyb20gYXNzaXN0aXZlIHRlY2hub2xvZ3kuIEJlY2F1c2UgZmxpcHBlcnMgYXJlIG9mdGVuIHN1cHBsZW1lbnRhcnkgbmF2aWdhdGlvbiwgdGhleSBhcmUgb2Z0ZW4gaGlkZGVuIGZyb20gYXNzaXN0aXZlIHRlY2hub2xvZ3kuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwdWJsaWNcbiAgICAgICAgICogQGRlZmF1bHRWYWx1ZSAtIHRydWVcbiAgICAgICAgICogQHJlbWFya3NcbiAgICAgICAgICogSFRNTCBBdHRyaWJ1dGU6IGFyaWEtaGlkZGVuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmhpZGRlbkZyb21BVCA9IHRydWU7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgZGlyZWN0aW9uIHRoYXQgdGhlIGZsaXBwZXIgaW1wbGllcyBuYXZpZ2F0aW5nLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcHVibGljXG4gICAgICAgICAqIEByZW1hcmtzXG4gICAgICAgICAqIEhUTUwgQXR0cmlidXRlOiBkaXJlY3Rpb25cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZGlyZWN0aW9uID0gRmxpcHBlckRpcmVjdGlvbi5uZXh0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTaW11bGF0ZSBhIGNsaWNrIGV2ZW50IHdoZW4gdGhlIGZsaXBwZXIgaGFzIGZvY3VzIGFuZCB0aGUgdXNlciBoaXRzIGVudGVyIG9yIHNwYWNlIGtleXNcbiAgICAgKiBCbHVyIGZvY3VzIGlmIHRoZSB1c2VyIGhpdHMgZXNjYXBlIGtleVxuICAgICAqIEBwYXJhbSBlIC0gS2V5Ym9hcmQgZXZlbnRcbiAgICAgKiBAcHVibGljXG4gICAgICovXG4gICAga2V5dXBIYW5kbGVyKGUpIHtcbiAgICAgICAgaWYgKCF0aGlzLmhpZGRlbkZyb21BVCkge1xuICAgICAgICAgICAgY29uc3Qga2V5ID0gZS5rZXk7XG4gICAgICAgICAgICBpZiAoa2V5ID09PSBcIkVudGVyXCIgfHwga2V5ID09PSBcIlNwYWNlXCIpIHtcbiAgICAgICAgICAgICAgICB0aGlzLiRlbWl0KFwiY2xpY2tcIiwgZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoa2V5ID09PSBcIkVzY2FwZVwiKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5ibHVyKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG5fX2RlY29yYXRlKFtcbiAgICBhdHRyKHsgbW9kZTogXCJib29sZWFuXCIgfSlcbl0sIEZsaXBwZXIucHJvdG90eXBlLCBcImRpc2FibGVkXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBhdHRyKHsgYXR0cmlidXRlOiBcImFyaWEtaGlkZGVuXCIsIGNvbnZlcnRlcjogYm9vbGVhbkNvbnZlcnRlciB9KVxuXSwgRmxpcHBlci5wcm90b3R5cGUsIFwiaGlkZGVuRnJvbUFUXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBhdHRyXG5dLCBGbGlwcGVyLnByb3RvdHlwZSwgXCJkaXJlY3Rpb25cIiwgdm9pZCAwKTtcbiIsIi8qKlxuICogVGhlIGRpcmVjdGlvbiBvcHRpb25zIGZvciBmbGlwcGVyLlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgY29uc3QgRmxpcHBlckRpcmVjdGlvbiA9IHtcbiAgICBuZXh0OiBcIm5leHRcIixcbiAgICBwcmV2aW91czogXCJwcmV2aW91c1wiLFxufTtcbiIsImltcG9ydCB7IGh0bWwsIHdoZW4gfSBmcm9tIFwiQG1pY3Jvc29mdC9mYXN0LWVsZW1lbnRcIjtcbmltcG9ydCB7IEZsaXBwZXJEaXJlY3Rpb24gfSBmcm9tIFwiLi9mbGlwcGVyLm9wdGlvbnMuanNcIjtcbi8qKlxuICogVGhlIHRlbXBsYXRlIGZvciB0aGUge0BsaW5rIEBtaWNyb3NvZnQvZmFzdC1mb3VuZGF0aW9uI0ZsaXBwZXJ9IGNvbXBvbmVudC5cbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGNvbnN0IGZsaXBwZXJUZW1wbGF0ZSA9IChjb250ZXh0LCBkZWZpbml0aW9uKSA9PiBodG1sIGBcbiAgICA8dGVtcGxhdGVcbiAgICAgICAgcm9sZT1cImJ1dHRvblwiXG4gICAgICAgIGFyaWEtZGlzYWJsZWQ9XCIke3ggPT4gKHguZGlzYWJsZWQgPyB0cnVlIDogdm9pZCAwKX1cIlxuICAgICAgICB0YWJpbmRleD1cIiR7eCA9PiAoeC5oaWRkZW5Gcm9tQVQgPyAtMSA6IDApfVwiXG4gICAgICAgIGNsYXNzPVwiJHt4ID0+IHguZGlyZWN0aW9ufSAke3ggPT4gKHguZGlzYWJsZWQgPyBcImRpc2FibGVkXCIgOiBcIlwiKX1cIlxuICAgICAgICBAa2V5dXA9XCIkeyh4LCBjKSA9PiB4LmtleXVwSGFuZGxlcihjLmV2ZW50KX1cIlxuICAgID5cbiAgICAgICAgJHt3aGVuKHggPT4geC5kaXJlY3Rpb24gPT09IEZsaXBwZXJEaXJlY3Rpb24ubmV4dCwgaHRtbCBgXG4gICAgICAgICAgICAgICAgPHNwYW4gcGFydD1cIm5leHRcIiBjbGFzcz1cIm5leHRcIj5cbiAgICAgICAgICAgICAgICAgICAgPHNsb3QgbmFtZT1cIm5leHRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICR7ZGVmaW5pdGlvbi5uZXh0IHx8IFwiXCJ9XG4gICAgICAgICAgICAgICAgICAgIDwvc2xvdD5cbiAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICBgKX1cbiAgICAgICAgJHt3aGVuKHggPT4geC5kaXJlY3Rpb24gPT09IEZsaXBwZXJEaXJlY3Rpb24ucHJldmlvdXMsIGh0bWwgYFxuICAgICAgICAgICAgICAgIDxzcGFuIHBhcnQ9XCJwcmV2aW91c1wiIGNsYXNzPVwicHJldmlvdXNcIj5cbiAgICAgICAgICAgICAgICAgICAgPHNsb3QgbmFtZT1cInByZXZpb3VzXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAke2RlZmluaXRpb24ucHJldmlvdXMgfHwgXCJcIn1cbiAgICAgICAgICAgICAgICAgICAgPC9zbG90PlxuICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgIGApfVxuICAgIDwvdGVtcGxhdGU+XG5gO1xuIiwiZXhwb3J0ICogZnJvbSBcIi4vZmxpcHBlci50ZW1wbGF0ZS5qc1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vZmxpcHBlci5qc1wiO1xuIiwiaW1wb3J0IHsgYXR0ciwgYm9vbGVhbkNvbnZlcnRlciwgRE9NLCBlbXB0eUFycmF5LCBvYnNlcnZhYmxlLCB9IGZyb20gXCJAbWljcm9zb2Z0L2Zhc3QtZWxlbWVudFwiO1xuaW1wb3J0IHsga2V5RW50ZXIgfSBmcm9tIFwiQG1pY3Jvc29mdC9mYXN0LXdlYi11dGlsaXRpZXNcIjtcbmNvbnN0IHByb3h5U2xvdE5hbWUgPSBcImZvcm0tYXNzb2NpYXRlZC1wcm94eVwiO1xuY29uc3QgRWxlbWVudEludGVybmFsc0tleSA9IFwiRWxlbWVudEludGVybmFsc1wiO1xuLyoqXG4gKiBAYWxwaGFcbiAqL1xuZXhwb3J0IGNvbnN0IHN1cHBvcnRzRWxlbWVudEludGVybmFscyA9IEVsZW1lbnRJbnRlcm5hbHNLZXkgaW4gd2luZG93ICYmXG4gICAgXCJzZXRGb3JtVmFsdWVcIiBpbiB3aW5kb3dbRWxlbWVudEludGVybmFsc0tleV0ucHJvdG90eXBlO1xuY29uc3QgSW50ZXJuYWxzTWFwID0gbmV3IFdlYWtNYXAoKTtcbi8qKlxuICogQmFzZSBmdW5jdGlvbiBmb3IgcHJvdmlkaW5nIEN1c3RvbSBFbGVtZW50IEZvcm0gQXNzb2NpYXRpb24uXG4gKlxuICogQGFscGhhXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBGb3JtQXNzb2NpYXRlZChCYXNlQ3Rvcikge1xuICAgIGNvbnN0IEMgPSBjbGFzcyBleHRlbmRzIEJhc2VDdG9yIHtcbiAgICAgICAgY29uc3RydWN0b3IoLi4uYXJncykge1xuICAgICAgICAgICAgc3VwZXIoLi4uYXJncyk7XG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIFRyYWNrIHdoZXRoZXIgdGhlIHZhbHVlIGhhcyBiZWVuIGNoYW5nZWQgZnJvbSB0aGUgaW5pdGlhbCB2YWx1ZVxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICB0aGlzLmRpcnR5VmFsdWUgPSBmYWxzZTtcbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogU2V0cyB0aGUgZWxlbWVudCdzIGRpc2FibGVkIHN0YXRlLiBBIGRpc2FibGVkIGVsZW1lbnQgd2lsbCBub3QgYmUgaW5jbHVkZWQgZHVyaW5nIGZvcm0gc3VibWlzc2lvbi5cbiAgICAgICAgICAgICAqXG4gICAgICAgICAgICAgKiBAcmVtYXJrc1xuICAgICAgICAgICAgICogSFRNTCBBdHRyaWJ1dGU6IGRpc2FibGVkXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIHRoaXMuZGlzYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogVGhlc2UgYXJlIGV2ZW50cyB0aGF0IGFyZSBzdGlsbCBmaXJlZCBieSB0aGUgcHJveHlcbiAgICAgICAgICAgICAqIGVsZW1lbnQgYmFzZWQgb24gdXNlciAvIHByb2dyYW1tYXRpYyBpbnRlcmFjdGlvbi5cbiAgICAgICAgICAgICAqXG4gICAgICAgICAgICAgKiBUaGUgcHJveHkgaW1wbGVtZW50YXRpb24gc2hvdWxkIGJlIHRyYW5zcGFyZW50IHRvXG4gICAgICAgICAgICAgKiB0aGUgYXBwIGF1dGhvciwgc28gYmxvY2sgdGhlc2UgZXZlbnRzIGZyb20gZW1pdHRpbmcuXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIHRoaXMucHJveHlFdmVudHNUb0Jsb2NrID0gW1wiY2hhbmdlXCIsIFwiY2xpY2tcIl07XG4gICAgICAgICAgICB0aGlzLnByb3h5SW5pdGlhbGl6ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMucmVxdWlyZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuaW5pdGlhbFZhbHVlID0gdGhpcy5pbml0aWFsVmFsdWUgfHwgXCJcIjtcbiAgICAgICAgICAgIGlmICghdGhpcy5lbGVtZW50SW50ZXJuYWxzKSB7XG4gICAgICAgICAgICAgICAgLy8gV2hlbiBlbGVtZW50SW50ZXJuYWxzIGlzIG5vdCBzdXBwb3J0ZWQsIGZvcm1SZXNldENhbGxiYWNrIGlzXG4gICAgICAgICAgICAgICAgLy8gYm91bmQgdG8gYW4gZXZlbnQgbGlzdGVuZXIsIHNvIGVuc3VyZSB0aGUgaGFuZGxlcidzIGB0aGlzYFxuICAgICAgICAgICAgICAgIC8vIGNvbnRleHQgaXMgY29ycmVjdC5cbiAgICAgICAgICAgICAgICB0aGlzLmZvcm1SZXNldENhbGxiYWNrID0gdGhpcy5mb3JtUmVzZXRDYWxsYmFjay5iaW5kKHRoaXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBNdXN0IGV2YWx1YXRlIHRvIHRydWUgdG8gZW5hYmxlIGVsZW1lbnRJbnRlcm5hbHMuXG4gICAgICAgICAqIEZlYXR1cmUgZGV0ZWN0cyBBUEkgc3VwcG9ydCBhbmQgcmVzb2x2ZSByZXNwZWN0aXZlbHlcbiAgICAgICAgICpcbiAgICAgICAgICogQGludGVybmFsXG4gICAgICAgICAqL1xuICAgICAgICBzdGF0aWMgZ2V0IGZvcm1Bc3NvY2lhdGVkKCkge1xuICAgICAgICAgICAgcmV0dXJuIHN1cHBvcnRzRWxlbWVudEludGVybmFscztcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogUmV0dXJucyB0aGUgdmFsaWRpdHkgc3RhdGUgb2YgdGhlIGVsZW1lbnRcbiAgICAgICAgICpcbiAgICAgICAgICogQGFscGhhXG4gICAgICAgICAqL1xuICAgICAgICBnZXQgdmFsaWRpdHkoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5lbGVtZW50SW50ZXJuYWxzXG4gICAgICAgICAgICAgICAgPyB0aGlzLmVsZW1lbnRJbnRlcm5hbHMudmFsaWRpdHlcbiAgICAgICAgICAgICAgICA6IHRoaXMucHJveHkudmFsaWRpdHk7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFJldHJpZXZlIGEgcmVmZXJlbmNlIHRvIHRoZSBhc3NvY2lhdGVkIGZvcm0uXG4gICAgICAgICAqIFJldHVybnMgbnVsbCBpZiBub3QgYXNzb2NpYXRlZCB0byBhbnkgZm9ybS5cbiAgICAgICAgICpcbiAgICAgICAgICogQGFscGhhXG4gICAgICAgICAqL1xuICAgICAgICBnZXQgZm9ybSgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmVsZW1lbnRJbnRlcm5hbHMgPyB0aGlzLmVsZW1lbnRJbnRlcm5hbHMuZm9ybSA6IHRoaXMucHJveHkuZm9ybTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogUmV0cmlldmUgdGhlIGxvY2FsaXplZCB2YWxpZGF0aW9uIG1lc3NhZ2UsXG4gICAgICAgICAqIG9yIGN1c3RvbSB2YWxpZGF0aW9uIG1lc3NhZ2UgaWYgc2V0LlxuICAgICAgICAgKlxuICAgICAgICAgKiBAYWxwaGFcbiAgICAgICAgICovXG4gICAgICAgIGdldCB2YWxpZGF0aW9uTWVzc2FnZSgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmVsZW1lbnRJbnRlcm5hbHNcbiAgICAgICAgICAgICAgICA/IHRoaXMuZWxlbWVudEludGVybmFscy52YWxpZGF0aW9uTWVzc2FnZVxuICAgICAgICAgICAgICAgIDogdGhpcy5wcm94eS52YWxpZGF0aW9uTWVzc2FnZTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogV2hldGhlciB0aGUgZWxlbWVudCB3aWxsIGJlIHZhbGlkYXRlZCB3aGVuIHRoZVxuICAgICAgICAgKiBmb3JtIGlzIHN1Ym1pdHRlZFxuICAgICAgICAgKi9cbiAgICAgICAgZ2V0IHdpbGxWYWxpZGF0ZSgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmVsZW1lbnRJbnRlcm5hbHNcbiAgICAgICAgICAgICAgICA/IHRoaXMuZWxlbWVudEludGVybmFscy53aWxsVmFsaWRhdGVcbiAgICAgICAgICAgICAgICA6IHRoaXMucHJveHkud2lsbFZhbGlkYXRlO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIHJlZmVyZW5jZSB0byBhbGwgYXNzb2NpYXRlZCBsYWJlbCBlbGVtZW50c1xuICAgICAgICAgKi9cbiAgICAgICAgZ2V0IGxhYmVscygpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmVsZW1lbnRJbnRlcm5hbHMpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gT2JqZWN0LmZyZWV6ZShBcnJheS5mcm9tKHRoaXMuZWxlbWVudEludGVybmFscy5sYWJlbHMpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMucHJveHkgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCAmJlxuICAgICAgICAgICAgICAgIHRoaXMucHJveHkub3duZXJEb2N1bWVudCAmJlxuICAgICAgICAgICAgICAgIHRoaXMuaWQpIHtcbiAgICAgICAgICAgICAgICAvLyBMYWJlbHMgYXNzb2NpYXRlZCBieSB3cmFwcGluZyB0aGUgZWxlbWVudDogPGxhYmVsPjxjdXN0b20tZWxlbWVudD48L2N1c3RvbS1lbGVtZW50PjwvbGFiZWw+XG4gICAgICAgICAgICAgICAgY29uc3QgcGFyZW50TGFiZWxzID0gdGhpcy5wcm94eS5sYWJlbHM7XG4gICAgICAgICAgICAgICAgLy8gTGFiZWxzIGFzc29jaWF0ZWQgdXNpbmcgdGhlIGBmb3JgIGF0dHJpYnV0ZVxuICAgICAgICAgICAgICAgIGNvbnN0IGZvckxhYmVscyA9IEFycmF5LmZyb20odGhpcy5wcm94eS5nZXRSb290Tm9kZSgpLnF1ZXJ5U2VsZWN0b3JBbGwoYFtmb3I9JyR7dGhpcy5pZH0nXWApKTtcbiAgICAgICAgICAgICAgICBjb25zdCBsYWJlbHMgPSBwYXJlbnRMYWJlbHNcbiAgICAgICAgICAgICAgICAgICAgPyBmb3JMYWJlbHMuY29uY2F0KEFycmF5LmZyb20ocGFyZW50TGFiZWxzKSlcbiAgICAgICAgICAgICAgICAgICAgOiBmb3JMYWJlbHM7XG4gICAgICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5mcmVlemUobGFiZWxzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiBlbXB0eUFycmF5O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJbnZva2VkIHdoZW4gdGhlIGB2YWx1ZWAgcHJvcGVydHkgY2hhbmdlc1xuICAgICAgICAgKiBAcGFyYW0gcHJldmlvdXMgLSB0aGUgcHJldmlvdXMgdmFsdWVcbiAgICAgICAgICogQHBhcmFtIG5leHQgLSB0aGUgbmV3IHZhbHVlXG4gICAgICAgICAqXG4gICAgICAgICAqIEByZW1hcmtzXG4gICAgICAgICAqIElmIGVsZW1lbnRzIGV4dGVuZGluZyBgRm9ybUFzc29jaWF0ZWRgIGltcGxlbWVudCBhIGB2YWx1ZUNoYW5nZWRgIG1ldGhvZFxuICAgICAgICAgKiBUaGV5IG11c3QgYmUgc3VyZSB0byBpbnZva2UgYHN1cGVyLnZhbHVlQ2hhbmdlZChwcmV2aW91cywgbmV4dClgIHRvIGVuc3VyZVxuICAgICAgICAgKiBwcm9wZXIgZnVuY3Rpb25pbmcgb2YgYEZvcm1Bc3NvY2lhdGVkYFxuICAgICAgICAgKi9cbiAgICAgICAgdmFsdWVDaGFuZ2VkKHByZXZpb3VzLCBuZXh0KSB7XG4gICAgICAgICAgICB0aGlzLmRpcnR5VmFsdWUgPSB0cnVlO1xuICAgICAgICAgICAgaWYgKHRoaXMucHJveHkgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCkge1xuICAgICAgICAgICAgICAgIHRoaXMucHJveHkudmFsdWUgPSB0aGlzLnZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5jdXJyZW50VmFsdWUgPSB0aGlzLnZhbHVlO1xuICAgICAgICAgICAgdGhpcy5zZXRGb3JtVmFsdWUodGhpcy52YWx1ZSk7XG4gICAgICAgICAgICB0aGlzLnZhbGlkYXRlKCk7XG4gICAgICAgIH1cbiAgICAgICAgY3VycmVudFZhbHVlQ2hhbmdlZCgpIHtcbiAgICAgICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLmN1cnJlbnRWYWx1ZTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogSW52b2tlZCB3aGVuIHRoZSBgaW5pdGlhbFZhbHVlYCBwcm9wZXJ0eSBjaGFuZ2VzXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwYXJhbSBwcmV2aW91cyAtIHRoZSBwcmV2aW91cyB2YWx1ZVxuICAgICAgICAgKiBAcGFyYW0gbmV4dCAtIHRoZSBuZXcgdmFsdWVcbiAgICAgICAgICpcbiAgICAgICAgICogQHJlbWFya3NcbiAgICAgICAgICogSWYgZWxlbWVudHMgZXh0ZW5kaW5nIGBGb3JtQXNzb2NpYXRlZGAgaW1wbGVtZW50IGEgYGluaXRpYWxWYWx1ZUNoYW5nZWRgIG1ldGhvZFxuICAgICAgICAgKiBUaGV5IG11c3QgYmUgc3VyZSB0byBpbnZva2UgYHN1cGVyLmluaXRpYWxWYWx1ZUNoYW5nZWQocHJldmlvdXMsIG5leHQpYCB0byBlbnN1cmVcbiAgICAgICAgICogcHJvcGVyIGZ1bmN0aW9uaW5nIG9mIGBGb3JtQXNzb2NpYXRlZGBcbiAgICAgICAgICovXG4gICAgICAgIGluaXRpYWxWYWx1ZUNoYW5nZWQocHJldmlvdXMsIG5leHQpIHtcbiAgICAgICAgICAgIC8vIElmIHRoZSB2YWx1ZSBpcyBjbGVhbiBhbmQgdGhlIGNvbXBvbmVudCBpcyBjb25uZWN0ZWQgdG8gdGhlIERPTVxuICAgICAgICAgICAgLy8gdGhlbiBzZXQgdmFsdWUgZXF1YWwgdG8gdGhlIGF0dHJpYnV0ZSB2YWx1ZS5cbiAgICAgICAgICAgIGlmICghdGhpcy5kaXJ0eVZhbHVlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy52YWx1ZSA9IHRoaXMuaW5pdGlhbFZhbHVlO1xuICAgICAgICAgICAgICAgIHRoaXMuZGlydHlWYWx1ZSA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJbnZva2VkIHdoZW4gdGhlIGBkaXNhYmxlZGAgcHJvcGVydHkgY2hhbmdlc1xuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0gcHJldmlvdXMgLSB0aGUgcHJldmlvdXMgdmFsdWVcbiAgICAgICAgICogQHBhcmFtIG5leHQgLSB0aGUgbmV3IHZhbHVlXG4gICAgICAgICAqXG4gICAgICAgICAqIEByZW1hcmtzXG4gICAgICAgICAqIElmIGVsZW1lbnRzIGV4dGVuZGluZyBgRm9ybUFzc29jaWF0ZWRgIGltcGxlbWVudCBhIGBkaXNhYmxlZENoYW5nZWRgIG1ldGhvZFxuICAgICAgICAgKiBUaGV5IG11c3QgYmUgc3VyZSB0byBpbnZva2UgYHN1cGVyLmRpc2FibGVkQ2hhbmdlZChwcmV2aW91cywgbmV4dClgIHRvIGVuc3VyZVxuICAgICAgICAgKiBwcm9wZXIgZnVuY3Rpb25pbmcgb2YgYEZvcm1Bc3NvY2lhdGVkYFxuICAgICAgICAgKi9cbiAgICAgICAgZGlzYWJsZWRDaGFuZ2VkKHByZXZpb3VzLCBuZXh0KSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wcm94eSBpbnN0YW5jZW9mIEhUTUxFbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcm94eS5kaXNhYmxlZCA9IHRoaXMuZGlzYWJsZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBET00ucXVldWVVcGRhdGUoKCkgPT4gdGhpcy5jbGFzc0xpc3QudG9nZ2xlKFwiZGlzYWJsZWRcIiwgdGhpcy5kaXNhYmxlZCkpO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJbnZva2VkIHdoZW4gdGhlIGBuYW1lYCBwcm9wZXJ0eSBjaGFuZ2VzXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwYXJhbSBwcmV2aW91cyAtIHRoZSBwcmV2aW91cyB2YWx1ZVxuICAgICAgICAgKiBAcGFyYW0gbmV4dCAtIHRoZSBuZXcgdmFsdWVcbiAgICAgICAgICpcbiAgICAgICAgICogQHJlbWFya3NcbiAgICAgICAgICogSWYgZWxlbWVudHMgZXh0ZW5kaW5nIGBGb3JtQXNzb2NpYXRlZGAgaW1wbGVtZW50IGEgYG5hbWVDaGFuZ2VkYCBtZXRob2RcbiAgICAgICAgICogVGhleSBtdXN0IGJlIHN1cmUgdG8gaW52b2tlIGBzdXBlci5uYW1lQ2hhbmdlZChwcmV2aW91cywgbmV4dClgIHRvIGVuc3VyZVxuICAgICAgICAgKiBwcm9wZXIgZnVuY3Rpb25pbmcgb2YgYEZvcm1Bc3NvY2lhdGVkYFxuICAgICAgICAgKi9cbiAgICAgICAgbmFtZUNoYW5nZWQocHJldmlvdXMsIG5leHQpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnByb3h5IGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnByb3h5Lm5hbWUgPSB0aGlzLm5hbWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEludm9rZWQgd2hlbiB0aGUgYHJlcXVpcmVkYCBwcm9wZXJ0eSBjaGFuZ2VzXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwYXJhbSBwcmV2aW91cyAtIHRoZSBwcmV2aW91cyB2YWx1ZVxuICAgICAgICAgKiBAcGFyYW0gbmV4dCAtIHRoZSBuZXcgdmFsdWVcbiAgICAgICAgICpcbiAgICAgICAgICogQHJlbWFya3NcbiAgICAgICAgICogSWYgZWxlbWVudHMgZXh0ZW5kaW5nIGBGb3JtQXNzb2NpYXRlZGAgaW1wbGVtZW50IGEgYHJlcXVpcmVkQ2hhbmdlZGAgbWV0aG9kXG4gICAgICAgICAqIFRoZXkgbXVzdCBiZSBzdXJlIHRvIGludm9rZSBgc3VwZXIucmVxdWlyZWRDaGFuZ2VkKHByZXZpb3VzLCBuZXh0KWAgdG8gZW5zdXJlXG4gICAgICAgICAqIHByb3BlciBmdW5jdGlvbmluZyBvZiBgRm9ybUFzc29jaWF0ZWRgXG4gICAgICAgICAqL1xuICAgICAgICByZXF1aXJlZENoYW5nZWQocHJldiwgbmV4dCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucHJveHkgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCkge1xuICAgICAgICAgICAgICAgIHRoaXMucHJveHkucmVxdWlyZWQgPSB0aGlzLnJlcXVpcmVkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgRE9NLnF1ZXVlVXBkYXRlKCgpID0+IHRoaXMuY2xhc3NMaXN0LnRvZ2dsZShcInJlcXVpcmVkXCIsIHRoaXMucmVxdWlyZWQpKTtcbiAgICAgICAgICAgIHRoaXMudmFsaWRhdGUoKTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIGVsZW1lbnQgaW50ZXJuYWxzIG9iamVjdC4gV2lsbCBvbmx5IGV4aXN0XG4gICAgICAgICAqIGluIGJyb3dzZXJzIHN1cHBvcnRpbmcgdGhlIGF0dGFjaEludGVybmFscyBBUElcbiAgICAgICAgICovXG4gICAgICAgIGdldCBlbGVtZW50SW50ZXJuYWxzKCkge1xuICAgICAgICAgICAgaWYgKCFzdXBwb3J0c0VsZW1lbnRJbnRlcm5hbHMpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBpbnRlcm5hbHMgPSBJbnRlcm5hbHNNYXAuZ2V0KHRoaXMpO1xuICAgICAgICAgICAgaWYgKCFpbnRlcm5hbHMpIHtcbiAgICAgICAgICAgICAgICBpbnRlcm5hbHMgPSB0aGlzLmF0dGFjaEludGVybmFscygpO1xuICAgICAgICAgICAgICAgIEludGVybmFsc01hcC5zZXQodGhpcywgaW50ZXJuYWxzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBpbnRlcm5hbHM7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBpbnRlcm5hbFxuICAgICAgICAgKi9cbiAgICAgICAgY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgICAgICAgICBzdXBlci5jb25uZWN0ZWRDYWxsYmFjaygpO1xuICAgICAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKFwia2V5cHJlc3NcIiwgdGhpcy5fa2V5cHJlc3NIYW5kbGVyKTtcbiAgICAgICAgICAgIGlmICghdGhpcy52YWx1ZSkge1xuICAgICAgICAgICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLmluaXRpYWxWYWx1ZTtcbiAgICAgICAgICAgICAgICB0aGlzLmRpcnR5VmFsdWUgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghdGhpcy5lbGVtZW50SW50ZXJuYWxzKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hdHRhY2hQcm94eSgpO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmZvcm0pIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5mb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNldFwiLCB0aGlzLmZvcm1SZXNldENhbGxiYWNrKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBpbnRlcm5hbFxuICAgICAgICAgKi9cbiAgICAgICAgZGlzY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgICAgICAgICBzdXBlci5kaXNjb25uZWN0ZWRDYWxsYmFjaygpO1xuICAgICAgICAgICAgdGhpcy5wcm94eUV2ZW50c1RvQmxvY2suZm9yRWFjaChuYW1lID0+IHRoaXMucHJveHkucmVtb3ZlRXZlbnRMaXN0ZW5lcihuYW1lLCB0aGlzLnN0b3BQcm9wYWdhdGlvbikpO1xuICAgICAgICAgICAgaWYgKCF0aGlzLmVsZW1lbnRJbnRlcm5hbHMgJiYgdGhpcy5mb3JtKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5mb3JtLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJyZXNldFwiLCB0aGlzLmZvcm1SZXNldENhbGxiYWNrKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogUmV0dXJuIHRoZSBjdXJyZW50IHZhbGlkaXR5IG9mIHRoZSBlbGVtZW50LlxuICAgICAgICAgKi9cbiAgICAgICAgY2hlY2tWYWxpZGl0eSgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmVsZW1lbnRJbnRlcm5hbHNcbiAgICAgICAgICAgICAgICA/IHRoaXMuZWxlbWVudEludGVybmFscy5jaGVja1ZhbGlkaXR5KClcbiAgICAgICAgICAgICAgICA6IHRoaXMucHJveHkuY2hlY2tWYWxpZGl0eSgpO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBSZXR1cm4gdGhlIGN1cnJlbnQgdmFsaWRpdHkgb2YgdGhlIGVsZW1lbnQuXG4gICAgICAgICAqIElmIGZhbHNlLCBmaXJlcyBhbiBpbnZhbGlkIGV2ZW50IGF0IHRoZSBlbGVtZW50LlxuICAgICAgICAgKi9cbiAgICAgICAgcmVwb3J0VmFsaWRpdHkoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5lbGVtZW50SW50ZXJuYWxzXG4gICAgICAgICAgICAgICAgPyB0aGlzLmVsZW1lbnRJbnRlcm5hbHMucmVwb3J0VmFsaWRpdHkoKVxuICAgICAgICAgICAgICAgIDogdGhpcy5wcm94eS5yZXBvcnRWYWxpZGl0eSgpO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTZXQgdGhlIHZhbGlkaXR5IG9mIHRoZSBjb250cm9sLiBJbiBjYXNlcyB3aGVuIHRoZSBlbGVtZW50SW50ZXJuYWxzIG9iamVjdCBpcyBub3RcbiAgICAgICAgICogYXZhaWxhYmxlIChhbmQgdGhlIHByb3h5IGVsZW1lbnQgaXMgdXNlZCB0byByZXBvcnQgdmFsaWRpdHkpLCB0aGlzIGZ1bmN0aW9uIHdpbGxcbiAgICAgICAgICogZG8gbm90aGluZyB1bmxlc3MgYSBtZXNzYWdlIGlzIHByb3ZpZGVkLCBhdCB3aGljaCBwb2ludCB0aGUgc2V0Q3VzdG9tVmFsaWRpdHkgbWV0aG9kXG4gICAgICAgICAqIG9mIHRoZSBwcm94eSBlbGVtZW50IHdpbGwgYmUgaW52b2tlZCB3aXRoIHRoZSBwcm92aWRlZCBtZXNzYWdlLlxuICAgICAgICAgKiBAcGFyYW0gZmxhZ3MgLSBWYWxpZGl0eSBmbGFnc1xuICAgICAgICAgKiBAcGFyYW0gbWVzc2FnZSAtIE9wdGlvbmFsIG1lc3NhZ2UgdG8gc3VwcGx5XG4gICAgICAgICAqIEBwYXJhbSBhbmNob3IgLSBPcHRpb25hbCBlbGVtZW50IHVzZWQgYnkgVUEgdG8gZGlzcGxheSBhbiBpbnRlcmFjdGl2ZSB2YWxpZGF0aW9uIFVJXG4gICAgICAgICAqL1xuICAgICAgICBzZXRWYWxpZGl0eShmbGFncywgbWVzc2FnZSwgYW5jaG9yKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5lbGVtZW50SW50ZXJuYWxzKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50SW50ZXJuYWxzLnNldFZhbGlkaXR5KGZsYWdzLCBtZXNzYWdlLCBhbmNob3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIG1lc3NhZ2UgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnByb3h5LnNldEN1c3RvbVZhbGlkaXR5KG1lc3NhZ2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJbnZva2VkIHdoZW4gYSBjb25uZWN0ZWQgY29tcG9uZW50J3MgZm9ybSBvciBmaWVsZHNldCBoYXMgaXRzIGRpc2FibGVkXG4gICAgICAgICAqIHN0YXRlIGNoYW5nZWQuXG4gICAgICAgICAqIEBwYXJhbSBkaXNhYmxlZCAtIHRoZSBkaXNhYmxlZCB2YWx1ZSBvZiB0aGUgZm9ybSAvIGZpZWxkc2V0XG4gICAgICAgICAqL1xuICAgICAgICBmb3JtRGlzYWJsZWRDYWxsYmFjayhkaXNhYmxlZCkge1xuICAgICAgICAgICAgdGhpcy5kaXNhYmxlZCA9IGRpc2FibGVkO1xuICAgICAgICB9XG4gICAgICAgIGZvcm1SZXNldENhbGxiYWNrKCkge1xuICAgICAgICAgICAgdGhpcy52YWx1ZSA9IHRoaXMuaW5pdGlhbFZhbHVlO1xuICAgICAgICAgICAgdGhpcy5kaXJ0eVZhbHVlID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEF0dGFjaCB0aGUgcHJveHkgZWxlbWVudCB0byB0aGUgRE9NXG4gICAgICAgICAqL1xuICAgICAgICBhdHRhY2hQcm94eSgpIHtcbiAgICAgICAgICAgIHZhciBfYTtcbiAgICAgICAgICAgIGlmICghdGhpcy5wcm94eUluaXRpYWxpemVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcm94eUluaXRpYWxpemVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB0aGlzLnByb3h5LnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgICAgICAgICAgICB0aGlzLnByb3h5RXZlbnRzVG9CbG9jay5mb3JFYWNoKG5hbWUgPT4gdGhpcy5wcm94eS5hZGRFdmVudExpc3RlbmVyKG5hbWUsIHRoaXMuc3RvcFByb3BhZ2F0aW9uKSk7XG4gICAgICAgICAgICAgICAgLy8gVGhlc2UgYXJlIHR5cGljYWxseSBtYXBwZWQgdG8gdGhlIHByb3h5IGR1cmluZ1xuICAgICAgICAgICAgICAgIC8vIHByb3BlcnR5IGNoYW5nZSBjYWxsYmFja3MsIGJ1dCBkdXJpbmcgaW5pdGlhbGl6YXRpb25cbiAgICAgICAgICAgICAgICAvLyBvbiB0aGUgaW5pdGlhbCBjYWxsIG9mIHRoZSBjYWxsYmFjaywgdGhlIHByb3h5IGlzXG4gICAgICAgICAgICAgICAgLy8gc3RpbGwgdW5kZWZpbmVkLiBXZSBzaG91bGQgZmluZCBhIGJldHRlciB3YXkgdG8gYWRkcmVzcyB0aGlzLlxuICAgICAgICAgICAgICAgIHRoaXMucHJveHkuZGlzYWJsZWQgPSB0aGlzLmRpc2FibGVkO1xuICAgICAgICAgICAgICAgIHRoaXMucHJveHkucmVxdWlyZWQgPSB0aGlzLnJlcXVpcmVkO1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdGhpcy5uYW1lID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJveHkubmFtZSA9IHRoaXMubmFtZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB0aGlzLnZhbHVlID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJveHkudmFsdWUgPSB0aGlzLnZhbHVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnByb3h5LnNldEF0dHJpYnV0ZShcInNsb3RcIiwgcHJveHlTbG90TmFtZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5wcm94eVNsb3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic2xvdFwiKTtcbiAgICAgICAgICAgICAgICB0aGlzLnByb3h5U2xvdC5zZXRBdHRyaWJ1dGUoXCJuYW1lXCIsIHByb3h5U2xvdE5hbWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgKF9hID0gdGhpcy5zaGFkb3dSb290KSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuYXBwZW5kQ2hpbGQodGhpcy5wcm94eVNsb3QpO1xuICAgICAgICAgICAgdGhpcy5hcHBlbmRDaGlsZCh0aGlzLnByb3h5KTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogRGV0YWNoIHRoZSBwcm94eSBlbGVtZW50IGZyb20gdGhlIERPTVxuICAgICAgICAgKi9cbiAgICAgICAgZGV0YWNoUHJveHkoKSB7XG4gICAgICAgICAgICB2YXIgX2E7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZUNoaWxkKHRoaXMucHJveHkpO1xuICAgICAgICAgICAgKF9hID0gdGhpcy5zaGFkb3dSb290KSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EucmVtb3ZlQ2hpbGQodGhpcy5wcm94eVNsb3QpO1xuICAgICAgICB9XG4gICAgICAgIC8qKiB7QGluaGVyaXREb2MgKEZvcm1Bc3NvY2lhdGVkOmludGVyZmFjZSkudmFsaWRhdGV9ICovXG4gICAgICAgIHZhbGlkYXRlKGFuY2hvcikge1xuICAgICAgICAgICAgaWYgKHRoaXMucHJveHkgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0VmFsaWRpdHkodGhpcy5wcm94eS52YWxpZGl0eSwgdGhpcy5wcm94eS52YWxpZGF0aW9uTWVzc2FnZSwgYW5jaG9yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogQXNzb2NpYXRlcyB0aGUgcHJvdmlkZWQgdmFsdWUgKGFuZCBvcHRpb25hbCBzdGF0ZSkgd2l0aCB0aGUgcGFyZW50IGZvcm0uXG4gICAgICAgICAqIEBwYXJhbSB2YWx1ZSAtIFRoZSB2YWx1ZSB0byBzZXRcbiAgICAgICAgICogQHBhcmFtIHN0YXRlIC0gVGhlIHN0YXRlIG9iamVjdCBwcm92aWRlZCB0byBkdXJpbmcgc2Vzc2lvbiByZXN0b3JlcyBhbmQgd2hlbiBhdXRvZmlsbGluZy5cbiAgICAgICAgICovXG4gICAgICAgIHNldEZvcm1WYWx1ZSh2YWx1ZSwgc3RhdGUpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmVsZW1lbnRJbnRlcm5hbHMpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnRJbnRlcm5hbHMuc2V0Rm9ybVZhbHVlKHZhbHVlLCBzdGF0ZSB8fCB2YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgX2tleXByZXNzSGFuZGxlcihlKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKGUua2V5KSB7XG4gICAgICAgICAgICAgICAgY2FzZSBrZXlFbnRlcjpcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZm9ybSBpbnN0YW5jZW9mIEhUTUxGb3JtRWxlbWVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gSW1wbGljaXQgc3VibWlzc2lvblxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZGVmYXVsdEJ1dHRvbiA9IHRoaXMuZm9ybS5xdWVyeVNlbGVjdG9yKFwiW3R5cGU9c3VibWl0XVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRCdXR0b24gPT09IG51bGwgfHwgZGVmYXVsdEJ1dHRvbiA9PT0gdm9pZCAwID8gdm9pZCAwIDogZGVmYXVsdEJ1dHRvbi5jbGljaygpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBVc2VkIHRvIHN0b3AgcHJvcGFnYXRpb24gb2YgcHJveHkgZWxlbWVudCBldmVudHNcbiAgICAgICAgICogQHBhcmFtIGUgLSBFdmVudCBvYmplY3RcbiAgICAgICAgICovXG4gICAgICAgIHN0b3BQcm9wYWdhdGlvbihlKSB7XG4gICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBhdHRyKHsgbW9kZTogXCJib29sZWFuXCIgfSkoQy5wcm90b3R5cGUsIFwiZGlzYWJsZWRcIik7XG4gICAgYXR0cih7IG1vZGU6IFwiZnJvbVZpZXdcIiwgYXR0cmlidXRlOiBcInZhbHVlXCIgfSkoQy5wcm90b3R5cGUsIFwiaW5pdGlhbFZhbHVlXCIpO1xuICAgIGF0dHIoeyBhdHRyaWJ1dGU6IFwiY3VycmVudC12YWx1ZVwiIH0pKEMucHJvdG90eXBlLCBcImN1cnJlbnRWYWx1ZVwiKTtcbiAgICBhdHRyKEMucHJvdG90eXBlLCBcIm5hbWVcIik7XG4gICAgYXR0cih7IG1vZGU6IFwiYm9vbGVhblwiIH0pKEMucHJvdG90eXBlLCBcInJlcXVpcmVkXCIpO1xuICAgIG9ic2VydmFibGUoQy5wcm90b3R5cGUsIFwidmFsdWVcIik7XG4gICAgcmV0dXJuIEM7XG59XG4vKipcbiAqIEBhbHBoYVxuICovXG5leHBvcnQgZnVuY3Rpb24gQ2hlY2thYmxlRm9ybUFzc29jaWF0ZWQoQmFzZUN0b3IpIHtcbiAgICBjbGFzcyBDIGV4dGVuZHMgRm9ybUFzc29jaWF0ZWQoQmFzZUN0b3IpIHtcbiAgICB9XG4gICAgY2xhc3MgRCBleHRlbmRzIEMge1xuICAgICAgICBjb25zdHJ1Y3RvciguLi5hcmdzKSB7XG4gICAgICAgICAgICBzdXBlcihhcmdzKTtcbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogVHJhY2tzIHdoZXRoZXIgdGhlIFwiY2hlY2tlZFwiIHByb3BlcnR5IGhhcyBiZWVuIGNoYW5nZWQuXG4gICAgICAgICAgICAgKiBUaGlzIGlzIG5lY2Vzc2FyeSB0byBwcm92aWRlIGNvbnNpc3RlbnQgYmVoYXZpb3Igd2l0aFxuICAgICAgICAgICAgICogbm9ybWFsIGlucHV0IGNoZWNrYm94ZXNcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgdGhpcy5kaXJ0eUNoZWNrZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogUHJvdmlkZXMgdGhlIGRlZmF1bHQgY2hlY2tlZG5lc3Mgb2YgdGhlIGlucHV0IGVsZW1lbnRcbiAgICAgICAgICAgICAqIFBhc3NlZCBkb3duIHRvIHByb3h5XG4gICAgICAgICAgICAgKlxuICAgICAgICAgICAgICogQHB1YmxpY1xuICAgICAgICAgICAgICogQHJlbWFya3NcbiAgICAgICAgICAgICAqIEhUTUwgQXR0cmlidXRlOiBjaGVja2VkXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIHRoaXMuY2hlY2tlZEF0dHJpYnV0ZSA9IGZhbHNlO1xuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBUaGUgY2hlY2tlZCBzdGF0ZSBvZiB0aGUgY29udHJvbC5cbiAgICAgICAgICAgICAqXG4gICAgICAgICAgICAgKiBAcHVibGljXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIHRoaXMuY2hlY2tlZCA9IGZhbHNlO1xuICAgICAgICAgICAgLy8gUmUtaW5pdGlhbGl6ZSBkaXJ0eUNoZWNrZWQgYmVjYXVzZSBpbml0aWFsaXphdGlvbiBvZiBvdGhlciB2YWx1ZXNcbiAgICAgICAgICAgIC8vIGNhdXNlcyBpdCB0byBiZWNvbWUgdHJ1ZVxuICAgICAgICAgICAgdGhpcy5kaXJ0eUNoZWNrZWQgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBjaGVja2VkQXR0cmlidXRlQ2hhbmdlZCgpIHtcbiAgICAgICAgICAgIHRoaXMuZGVmYXVsdENoZWNrZWQgPSB0aGlzLmNoZWNrZWRBdHRyaWJ1dGU7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBpbnRlcm5hbFxuICAgICAgICAgKi9cbiAgICAgICAgZGVmYXVsdENoZWNrZWRDaGFuZ2VkKCkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmRpcnR5Q2hlY2tlZCkge1xuICAgICAgICAgICAgICAgIC8vIFNldHRpbmcgdGhpcy5jaGVja2VkIHdpbGwgY2F1c2UgdXMgdG8gZW50ZXIgYSBkaXJ0eSBzdGF0ZSxcbiAgICAgICAgICAgICAgICAvLyBidXQgaWYgd2UgYXJlIGNsZWFuIHdoZW4gZGVmYXVsdENoZWNrZWQgaXMgY2hhbmdlZCwgd2Ugd2FudCB0byBzdGF5XG4gICAgICAgICAgICAgICAgLy8gaW4gYSBjbGVhbiBzdGF0ZSwgc28gcmVzZXQgdGhpcy5kaXJ0eUNoZWNrZWRcbiAgICAgICAgICAgICAgICB0aGlzLmNoZWNrZWQgPSB0aGlzLmRlZmF1bHRDaGVja2VkO1xuICAgICAgICAgICAgICAgIHRoaXMuZGlydHlDaGVja2VkID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY2hlY2tlZENoYW5nZWQocHJldiwgbmV4dCkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmRpcnR5Q2hlY2tlZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuZGlydHlDaGVja2VkID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuY3VycmVudENoZWNrZWQgPSB0aGlzLmNoZWNrZWQ7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUZvcm0oKTtcbiAgICAgICAgICAgIGlmICh0aGlzLnByb3h5IGluc3RhbmNlb2YgSFRNTElucHV0RWxlbWVudCkge1xuICAgICAgICAgICAgICAgIHRoaXMucHJveHkuY2hlY2tlZCA9IHRoaXMuY2hlY2tlZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChwcmV2ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLiRlbWl0KFwiY2hhbmdlXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy52YWxpZGF0ZSgpO1xuICAgICAgICB9XG4gICAgICAgIGN1cnJlbnRDaGVja2VkQ2hhbmdlZChwcmV2LCBuZXh0KSB7XG4gICAgICAgICAgICB0aGlzLmNoZWNrZWQgPSB0aGlzLmN1cnJlbnRDaGVja2VkO1xuICAgICAgICB9XG4gICAgICAgIHVwZGF0ZUZvcm0oKSB7XG4gICAgICAgICAgICBjb25zdCB2YWx1ZSA9IHRoaXMuY2hlY2tlZCA/IHRoaXMudmFsdWUgOiBudWxsO1xuICAgICAgICAgICAgdGhpcy5zZXRGb3JtVmFsdWUodmFsdWUsIHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICBjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICAgICAgICAgIHN1cGVyLmNvbm5lY3RlZENhbGxiYWNrKCk7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUZvcm0oKTtcbiAgICAgICAgfVxuICAgICAgICBmb3JtUmVzZXRDYWxsYmFjaygpIHtcbiAgICAgICAgICAgIHN1cGVyLmZvcm1SZXNldENhbGxiYWNrKCk7XG4gICAgICAgICAgICB0aGlzLmNoZWNrZWQgPSAhIXRoaXMuY2hlY2tlZEF0dHJpYnV0ZTtcbiAgICAgICAgICAgIHRoaXMuZGlydHlDaGVja2VkID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXR0cih7IGF0dHJpYnV0ZTogXCJjaGVja2VkXCIsIG1vZGU6IFwiYm9vbGVhblwiIH0pKEQucHJvdG90eXBlLCBcImNoZWNrZWRBdHRyaWJ1dGVcIik7XG4gICAgYXR0cih7IGF0dHJpYnV0ZTogXCJjdXJyZW50LWNoZWNrZWRcIiwgY29udmVydGVyOiBib29sZWFuQ29udmVydGVyIH0pKEQucHJvdG90eXBlLCBcImN1cnJlbnRDaGVja2VkXCIpO1xuICAgIG9ic2VydmFibGUoRC5wcm90b3R5cGUsIFwiZGVmYXVsdENoZWNrZWRcIik7XG4gICAgb2JzZXJ2YWJsZShELnByb3RvdHlwZSwgXCJjaGVja2VkXCIpO1xuICAgIHJldHVybiBEO1xufVxuIiwiZXhwb3J0ICogZnJvbSBcIi4vZm9ybS1hc3NvY2lhdGVkLmpzXCI7XG4iLCJpbXBvcnQgeyBfX2RlY29yYXRlIH0gZnJvbSBcInRzbGliXCI7XG5pbXBvcnQgeyBGQVNURWxlbWVudCwgb2JzZXJ2YWJsZSB9IGZyb20gXCJAbWljcm9zb2Z0L2Zhc3QtZWxlbWVudFwiO1xuaW1wb3J0IHsgQ29tcG9uZW50UHJlc2VudGF0aW9uLCBEZWZhdWx0Q29tcG9uZW50UHJlc2VudGF0aW9uLCB9IGZyb20gXCIuLi9kZXNpZ24tc3lzdGVtL2NvbXBvbmVudC1wcmVzZW50YXRpb24uanNcIjtcbi8qKlxuICogRGVmaW5lcyBhIGZvdW5kYXRpb24gZWxlbWVudCBjbGFzcyB0aGF0OlxuICogMS4gQ29ubmVjdHMgdGhlIGVsZW1lbnQgdG8gaXRzIENvbXBvbmVudFByZXNlbnRhdGlvblxuICogMi4gQWxsb3dzIHJlc29sdmluZyB0aGUgZWxlbWVudCB0ZW1wbGF0ZSBmcm9tIHRoZSBpbnN0YW5jZSBvciBDb21wb25lbnRQcmVzZW50YXRpb25cbiAqIDMuIEFsbG93cyByZXNvbHZpbmcgdGhlIGVsZW1lbnQgc3R5bGVzIGZyb20gdGhlIGluc3RhbmNlIG9yIENvbXBvbmVudFByZXNlbnRhdGlvblxuICpcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGNsYXNzIEZvdW5kYXRpb25FbGVtZW50IGV4dGVuZHMgRkFTVEVsZW1lbnQge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlciguLi5hcmd1bWVudHMpO1xuICAgICAgICB0aGlzLl9wcmVzZW50YXRpb24gPSB2b2lkIDA7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEEgcHJvcGVydHkgd2hpY2ggcmVzb2x2ZXMgdGhlIENvbXBvbmVudFByZXNlbnRhdGlvbiBpbnN0YW5jZVxuICAgICAqIGZvciB0aGUgY3VycmVudCBjb21wb25lbnQuXG4gICAgICogQHB1YmxpY1xuICAgICAqL1xuICAgIGdldCAkcHJlc2VudGF0aW9uKCkge1xuICAgICAgICBpZiAodGhpcy5fcHJlc2VudGF0aW9uID09PSB2b2lkIDApIHtcbiAgICAgICAgICAgIHRoaXMuX3ByZXNlbnRhdGlvbiA9IENvbXBvbmVudFByZXNlbnRhdGlvbi5mb3JUYWcodGhpcy50YWdOYW1lLCB0aGlzKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5fcHJlc2VudGF0aW9uO1xuICAgIH1cbiAgICB0ZW1wbGF0ZUNoYW5nZWQoKSB7XG4gICAgICAgIGlmICh0aGlzLnRlbXBsYXRlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRoaXMuJGZhc3RDb250cm9sbGVyLnRlbXBsYXRlID0gdGhpcy50ZW1wbGF0ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdHlsZXNDaGFuZ2VkKCkge1xuICAgICAgICBpZiAodGhpcy5zdHlsZXMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhpcy4kZmFzdENvbnRyb2xsZXIuc3R5bGVzID0gdGhpcy5zdHlsZXM7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGNvbm5lY3RlZCBjYWxsYmFjayBmb3IgdGhpcyBGQVNURWxlbWVudC5cbiAgICAgKiBAcmVtYXJrc1xuICAgICAqIFRoaXMgbWV0aG9kIGlzIGludm9rZWQgYnkgdGhlIHBsYXRmb3JtIHdoZW5ldmVyIHRoaXMgRm91bmRhdGlvbkVsZW1lbnRcbiAgICAgKiBiZWNvbWVzIGNvbm5lY3RlZCB0byB0aGUgZG9jdW1lbnQuXG4gICAgICogQHB1YmxpY1xuICAgICAqL1xuICAgIGNvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgICAgICBpZiAodGhpcy4kcHJlc2VudGF0aW9uICE9PSBudWxsKSB7XG4gICAgICAgICAgICB0aGlzLiRwcmVzZW50YXRpb24uYXBwbHlUbyh0aGlzKTtcbiAgICAgICAgfVxuICAgICAgICBzdXBlci5jb25uZWN0ZWRDYWxsYmFjaygpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBEZWZpbmVzIGFuIGVsZW1lbnQgcmVnaXN0cnkgZnVuY3Rpb24gd2l0aCBhIHNldCBvZiBlbGVtZW50IGRlZmluaXRpb24gZGVmYXVsdHMuXG4gICAgICogQHBhcmFtIGVsZW1lbnREZWZpbml0aW9uIC0gVGhlIGRlZmluaXRpb24gb2YgdGhlIGVsZW1lbnQgdG8gY3JlYXRlIHRoZSByZWdpc3RyeVxuICAgICAqIGZ1bmN0aW9uIGZvci5cbiAgICAgKiBAcHVibGljXG4gICAgICovXG4gICAgc3RhdGljIGNvbXBvc2UoZWxlbWVudERlZmluaXRpb24pIHtcbiAgICAgICAgcmV0dXJuIChvdmVycmlkZURlZmluaXRpb24gPSB7fSkgPT4gbmV3IEZvdW5kYXRpb25FbGVtZW50UmVnaXN0cnkodGhpcyA9PT0gRm91bmRhdGlvbkVsZW1lbnRcbiAgICAgICAgICAgID8gY2xhc3MgZXh0ZW5kcyBGb3VuZGF0aW9uRWxlbWVudCB7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICA6IHRoaXMsIGVsZW1lbnREZWZpbml0aW9uLCBvdmVycmlkZURlZmluaXRpb24pO1xuICAgIH1cbn1cbl9fZGVjb3JhdGUoW1xuICAgIG9ic2VydmFibGVcbl0sIEZvdW5kYXRpb25FbGVtZW50LnByb3RvdHlwZSwgXCJ0ZW1wbGF0ZVwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgb2JzZXJ2YWJsZVxuXSwgRm91bmRhdGlvbkVsZW1lbnQucHJvdG90eXBlLCBcInN0eWxlc1wiLCB2b2lkIDApO1xuZnVuY3Rpb24gcmVzb2x2ZU9wdGlvbihvcHRpb24sIGNvbnRleHQsIGRlZmluaXRpb24pIHtcbiAgICBpZiAodHlwZW9mIG9wdGlvbiA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIHJldHVybiBvcHRpb24oY29udGV4dCwgZGVmaW5pdGlvbik7XG4gICAgfVxuICAgIHJldHVybiBvcHRpb247XG59XG4vKipcbiAqIFJlZ2lzdHJ5IGNhcGFibGUgb2YgZGVmaW5pbmcgcHJlc2VudGF0aW9uIHByb3BlcnRpZXMgZm9yIGEgRE9NIENvbnRhaW5lciBoaWVyYXJjaHkuXG4gKlxuICogQGludGVybmFsXG4gKi9cbi8qIGVzbGludC1kaXNhYmxlIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnVzZWQtdmFycyAqL1xuZXhwb3J0IGNsYXNzIEZvdW5kYXRpb25FbGVtZW50UmVnaXN0cnkge1xuICAgIGNvbnN0cnVjdG9yKHR5cGUsIGVsZW1lbnREZWZpbml0aW9uLCBvdmVycmlkZURlZmluaXRpb24pIHtcbiAgICAgICAgdGhpcy50eXBlID0gdHlwZTtcbiAgICAgICAgdGhpcy5lbGVtZW50RGVmaW5pdGlvbiA9IGVsZW1lbnREZWZpbml0aW9uO1xuICAgICAgICB0aGlzLm92ZXJyaWRlRGVmaW5pdGlvbiA9IG92ZXJyaWRlRGVmaW5pdGlvbjtcbiAgICAgICAgdGhpcy5kZWZpbml0aW9uID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCB0aGlzLmVsZW1lbnREZWZpbml0aW9uKSwgdGhpcy5vdmVycmlkZURlZmluaXRpb24pO1xuICAgIH1cbiAgICByZWdpc3Rlcihjb250YWluZXIsIGNvbnRleHQpIHtcbiAgICAgICAgY29uc3QgZGVmaW5pdGlvbiA9IHRoaXMuZGVmaW5pdGlvbjtcbiAgICAgICAgY29uc3Qgb3ZlcnJpZGVEZWZpbml0aW9uID0gdGhpcy5vdmVycmlkZURlZmluaXRpb247XG4gICAgICAgIGNvbnN0IHByZWZpeCA9IGRlZmluaXRpb24ucHJlZml4IHx8IGNvbnRleHQuZWxlbWVudFByZWZpeDtcbiAgICAgICAgY29uc3QgbmFtZSA9IGAke3ByZWZpeH0tJHtkZWZpbml0aW9uLmJhc2VOYW1lfWA7XG4gICAgICAgIGNvbnRleHQudHJ5RGVmaW5lRWxlbWVudCh7XG4gICAgICAgICAgICBuYW1lLFxuICAgICAgICAgICAgdHlwZTogdGhpcy50eXBlLFxuICAgICAgICAgICAgYmFzZUNsYXNzOiB0aGlzLmVsZW1lbnREZWZpbml0aW9uLmJhc2VDbGFzcyxcbiAgICAgICAgICAgIGNhbGxiYWNrOiB4ID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBwcmVzZW50YXRpb24gPSBuZXcgRGVmYXVsdENvbXBvbmVudFByZXNlbnRhdGlvbihyZXNvbHZlT3B0aW9uKGRlZmluaXRpb24udGVtcGxhdGUsIHgsIGRlZmluaXRpb24pLCByZXNvbHZlT3B0aW9uKGRlZmluaXRpb24uc3R5bGVzLCB4LCBkZWZpbml0aW9uKSk7XG4gICAgICAgICAgICAgICAgeC5kZWZpbmVQcmVzZW50YXRpb24ocHJlc2VudGF0aW9uKTtcbiAgICAgICAgICAgICAgICBsZXQgc2hhZG93T3B0aW9ucyA9IHJlc29sdmVPcHRpb24oZGVmaW5pdGlvbi5zaGFkb3dPcHRpb25zLCB4LCBkZWZpbml0aW9uKTtcbiAgICAgICAgICAgICAgICBpZiAoeC5zaGFkb3dSb290TW9kZSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBJZiB0aGUgZGVzaWduIHN5c3RlbSBoYXMgb3ZlcnJpZGRlbiB0aGUgc2hhZG93IHJvb3QgbW9kZSwgd2UgbmVlZCBzcGVjaWFsIGhhbmRsaW5nLlxuICAgICAgICAgICAgICAgICAgICBpZiAoc2hhZG93T3B0aW9ucykge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgdGhlcmUgYXJlIHNoYWRvdyBvcHRpb25zIHByZXNlbnQgaW4gdGhlIGRlZmluaXRpb24sIHRoZW5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGVpdGhlciB0aGUgY29tcG9uZW50IGl0c2VsZiBoYXMgc3BlY2lmaWVkIGFuIG9wdGlvbiBvciB0aGVcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlZ2lzdHJ5IGZ1bmN0aW9uIGhhcyBvdmVycmlkZGVuIGl0LlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFvdmVycmlkZURlZmluaXRpb24uc2hhZG93T3B0aW9ucykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoZXJlIHdlcmUgc2hhZG93IG9wdGlvbnMgcHJvdmlkZWQgYnkgdGhlIGNvbXBvbmVudCBhbmQgbm90IG92ZXJyaWRkZW4gYnlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB0aGUgcmVnaXN0cnkuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hhZG93T3B0aW9ucy5tb2RlID0geC5zaGFkb3dSb290TW9kZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChzaGFkb3dPcHRpb25zICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiB0aGUgY29tcG9uZW50IGF1dGhvciBkaWQgbm90IHByb3ZpZGUgc2hhZG93IG9wdGlvbnMsXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBhbmQgZGlkIG5vdCBudWxsIHRoZW0gb3V0IChsaWdodCBkb20gb3B0LWluKSB0aGVuIHRoZXlcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHdlcmUgcmVseWluZyBvbiB0aGUgRkFTVEVsZW1lbnQgZGVmYXVsdC4gU28sIGlmIHRoZVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZGVzaWduIHN5c3RlbSBwcm92aWRlcyBhIG1vZGUsIHdlIG5lZWQgdG8gY3JlYXRlIHRoZSBvcHRpb25zXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB0byBvdmVycmlkZSB0aGUgZGVmYXVsdC5cbiAgICAgICAgICAgICAgICAgICAgICAgIHNoYWRvd09wdGlvbnMgPSB7IG1vZGU6IHguc2hhZG93Um9vdE1vZGUgfTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB4LmRlZmluZUVsZW1lbnQoe1xuICAgICAgICAgICAgICAgICAgICBlbGVtZW50T3B0aW9uczogcmVzb2x2ZU9wdGlvbihkZWZpbml0aW9uLmVsZW1lbnRPcHRpb25zLCB4LCBkZWZpbml0aW9uKSxcbiAgICAgICAgICAgICAgICAgICAgc2hhZG93T3B0aW9ucyxcbiAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlczogcmVzb2x2ZU9wdGlvbihkZWZpbml0aW9uLmF0dHJpYnV0ZXMsIHgsIGRlZmluaXRpb24pLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgfVxufVxuLyogZXNsaW50LWVuYWJsZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW51c2VkLXZhcnMgKi9cbiIsImV4cG9ydCAqIGZyb20gXCIuL2ZvdW5kYXRpb24tZWxlbWVudC5qc1wiO1xuIiwiaW1wb3J0IHsgX19kZWNvcmF0ZSB9IGZyb20gXCJ0c2xpYlwiO1xuaW1wb3J0IHsgYXR0ciwgYm9vbGVhbkNvbnZlcnRlciwgRE9NLCBudWxsYWJsZU51bWJlckNvbnZlcnRlciwgb2JzZXJ2YWJsZSwgfSBmcm9tIFwiQG1pY3Jvc29mdC9mYXN0LWVsZW1lbnRcIjtcbmltcG9ydCB7IEZvdW5kYXRpb25FbGVtZW50IH0gZnJvbSBcIi4uL2ZvdW5kYXRpb24tZWxlbWVudC9mb3VuZGF0aW9uLWVsZW1lbnQuanNcIjtcbi8qKlxuICogQSBIb3Jpem9udGFsU2Nyb2xsIEN1c3RvbSBIVE1MIEVsZW1lbnRcbiAqXG4gKiBAc2xvdCBzdGFydCAtIENvbnRlbnQgd2hpY2ggY2FuIGJlIHByb3ZpZGVkIGJlZm9yZSB0aGUgc2Nyb2xsIGFyZWFcbiAqIEBzbG90IGVuZCAtIENvbnRlbnQgd2hpY2ggY2FuIGJlIHByb3ZpZGVkIGFmdGVyIHRoZSBzY3JvbGwgYXJlYVxuICogQGNzc3BhcnQgc2Nyb2xsLWFyZWEgLSBXcmFwcyB0aGUgZW50aXJlIHNjcm9sbGFibGUgcmVnaW9uXG4gKiBAY3NzcGFydCBzY3JvbGwtdmlldyAtIFRoZSB2aXNpYmxlIHNjcm9sbCBhcmVhXG4gKiBAY3NzcGFydCBjb250ZW50LWNvbnRhaW5lciAtIFRoZSBjb250YWluZXIgZm9yIHRoZSBjb250ZW50XG4gKiBAY3NzcGFydCBzY3JvbGwtcHJldiAtIFRoZSBwcmV2aW91cyBmbGlwcGVyIGNvbnRhaW5lclxuICogQGNzc3BhcnQgc2Nyb2xsLWFjdGlvbi1wcmV2aW91cyAtIFRoZSBlbGVtZW50IHdyYXBwaW5nIHRoZSBwcmV2aW91cyBmbGlwcGVyXG4gKiBAY3NzcGFydCBzY3JvbGwtbmV4dCAtIFRoZSBuZXh0IGZsaXBwZXIgY29udGFpbmVyXG4gKiBAY3NzcGFydCBzY3JvbGwtYWN0aW9uLW5leHQgLSBUaGUgZWxlbWVudCB3cmFwcGluZyB0aGUgbmV4dCBmbGlwcGVyXG4gKiBAZmlyZXMgc2Nyb2xsc3RhcnQgLSBGaXJlcyBhIGN1c3RvbSAnc2Nyb2xsc3RhcnQnIGV2ZW50IHdoZW4gc2Nyb2xsaW5nXG4gKiBAZmlyZXMgc2Nyb2xsZW5kIC0gRmlyZXMgYSBjdXN0b20gJ3Njcm9sbGVuZCcgZXZlbnQgd2hlbiBzY3JvbGxpbmcgc3RvcHNcbiAqXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjbGFzcyBIb3Jpem9udGFsU2Nyb2xsIGV4dGVuZHMgRm91bmRhdGlvbkVsZW1lbnQge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlciguLi5hcmd1bWVudHMpO1xuICAgICAgICAvKipcbiAgICAgICAgICogQGludGVybmFsXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmZyYW1lc1BlclNlY29uZCA9IDYwO1xuICAgICAgICAvKipcbiAgICAgICAgICogRmxhZyBpbmRpY2F0aW5nIHRoYXQgdGhlIGl0ZW1zIGFyZSBiZWluZyB1cGRhdGVkXG4gICAgICAgICAqXG4gICAgICAgICAqIEBpbnRlcm5hbFxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy51cGRhdGluZ0l0ZW1zID0gZmFsc2U7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTcGVlZCBvZiBzY3JvbGwgaW4gcGl4ZWxzIHBlciBzZWNvbmRcbiAgICAgICAgICogQHB1YmxpY1xuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5zcGVlZCA9IDYwMDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEF0dHJpYnV0ZSB1c2VkIGZvciBlYXNpbmcsIGRlZmF1bHRzIHRvIGVhc2UtaW4tb3V0XG4gICAgICAgICAqIEBwdWJsaWNcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZWFzaW5nID0gXCJlYXNlLWluLW91dFwiO1xuICAgICAgICAvKipcbiAgICAgICAgICogQXR0cmlidXRlIHRvIGhpZGUgZmxpcHBlcnMgZnJvbSBhc3Npc3RpdmUgdGVjaG5vbG9neVxuICAgICAgICAgKiBAcHVibGljXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmZsaXBwZXJzSGlkZGVuRnJvbUFUID0gZmFsc2U7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTY3JvbGxpbmcgc3RhdGVcbiAgICAgICAgICogQGludGVybmFsXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnNjcm9sbGluZyA9IGZhbHNlO1xuICAgICAgICAvKipcbiAgICAgICAgICogRGV0ZWN0cyBpZiB0aGUgY29tcG9uZW50IGhhcyBiZWVuIHJlc2l6ZWRcbiAgICAgICAgICogQGludGVybmFsXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnJlc2l6ZURldGVjdG9yID0gbnVsbDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGNhbGN1bGF0ZWQgZHVyYXRpb24gZm9yIGEgZnJhbWUuXG4gICAgICpcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBnZXQgZnJhbWVUaW1lKCkge1xuICAgICAgICByZXR1cm4gMTAwMCAvIHRoaXMuZnJhbWVzUGVyU2Vjb25kO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBGaXJpbmcgc2Nyb2xsc3RhcnQgYW5kIHNjcm9sbGVuZCBldmVudHNcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBzY3JvbGxpbmdDaGFuZ2VkKHByZXYsIG5leHQpIHtcbiAgICAgICAgaWYgKHRoaXMuc2Nyb2xsQ29udGFpbmVyKSB7XG4gICAgICAgICAgICBjb25zdCBldmVudCA9IHRoaXMuc2Nyb2xsaW5nID09IHRydWUgPyBcInNjcm9sbHN0YXJ0XCIgOiBcInNjcm9sbGVuZFwiO1xuICAgICAgICAgICAgdGhpcy4kZW1pdChldmVudCwgdGhpcy5zY3JvbGxDb250YWluZXIuc2Nyb2xsTGVmdCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogSW4gUlRMIG1vZGVcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBnZXQgaXNSdGwoKSB7XG4gICAgICAgIHJldHVybiAodGhpcy5zY3JvbGxJdGVtcy5sZW5ndGggPiAxICYmXG4gICAgICAgICAgICB0aGlzLnNjcm9sbEl0ZW1zWzBdLm9mZnNldExlZnQgPiB0aGlzLnNjcm9sbEl0ZW1zWzFdLm9mZnNldExlZnQpO1xuICAgIH1cbiAgICBjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICAgICAgc3VwZXIuY29ubmVjdGVkQ2FsbGJhY2soKTtcbiAgICAgICAgdGhpcy5pbml0aWFsaXplUmVzaXplRGV0ZWN0b3IoKTtcbiAgICB9XG4gICAgZGlzY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgICAgIHRoaXMuZGlzY29ubmVjdFJlc2l6ZURldGVjdG9yKCk7XG4gICAgICAgIHN1cGVyLmRpc2Nvbm5lY3RlZENhbGxiYWNrKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFVwZGF0ZXMgc2Nyb2xsIHN0b3BzIGFuZCBmbGlwcGVycyB3aGVuIHNjcm9sbCBpdGVtcyBjaGFuZ2VcbiAgICAgKiBAcGFyYW0gcHJldmlvdXMgLSBjdXJyZW50IHNjcm9sbCBpdGVtc1xuICAgICAqIEBwYXJhbSBuZXh0IC0gbmV3IHVwZGF0ZWQgc2Nyb2xsIGl0ZW1zXG4gICAgICogQHB1YmxpY1xuICAgICAqL1xuICAgIHNjcm9sbEl0ZW1zQ2hhbmdlZChwcmV2aW91cywgbmV4dCkge1xuICAgICAgICBpZiAobmV4dCAmJiAhdGhpcy51cGRhdGluZ0l0ZW1zKSB7XG4gICAgICAgICAgICBET00ucXVldWVVcGRhdGUoKCkgPT4gdGhpcy5zZXRTdG9wcygpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBkZXN0cm95cyB0aGUgaW5zdGFuY2UncyByZXNpemUgb2JzZXJ2ZXJcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBkaXNjb25uZWN0UmVzaXplRGV0ZWN0b3IoKSB7XG4gICAgICAgIGlmICh0aGlzLnJlc2l6ZURldGVjdG9yKSB7XG4gICAgICAgICAgICB0aGlzLnJlc2l6ZURldGVjdG9yLmRpc2Nvbm5lY3QoKTtcbiAgICAgICAgICAgIHRoaXMucmVzaXplRGV0ZWN0b3IgPSBudWxsO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIGluaXRpYWxpemVzIHRoZSBpbnN0YW5jZSdzIHJlc2l6ZSBvYnNlcnZlclxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIGluaXRpYWxpemVSZXNpemVEZXRlY3RvcigpIHtcbiAgICAgICAgdGhpcy5kaXNjb25uZWN0UmVzaXplRGV0ZWN0b3IoKTtcbiAgICAgICAgdGhpcy5yZXNpemVEZXRlY3RvciA9IG5ldyB3aW5kb3cuUmVzaXplT2JzZXJ2ZXIodGhpcy5yZXNpemVkLmJpbmQodGhpcykpO1xuICAgICAgICB0aGlzLnJlc2l6ZURldGVjdG9yLm9ic2VydmUodGhpcyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIExvb2tzIGZvciBzbG90cyBhbmQgdXNlcyBjaGlsZCBub2RlcyBpbnN0ZWFkXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgdXBkYXRlU2Nyb2xsU3RvcHMoKSB7XG4gICAgICAgIHRoaXMudXBkYXRpbmdJdGVtcyA9IHRydWU7XG4gICAgICAgIGNvbnN0IHVwZGF0ZWRJdGVtcyA9IHRoaXMuc2Nyb2xsSXRlbXMucmVkdWNlKChzY3JvbGxJdGVtcywgc2Nyb2xsSXRlbSkgPT4ge1xuICAgICAgICAgICAgaWYgKHNjcm9sbEl0ZW0gaW5zdGFuY2VvZiBIVE1MU2xvdEVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gc2Nyb2xsSXRlbXMuY29uY2F0KHNjcm9sbEl0ZW0uYXNzaWduZWRFbGVtZW50cygpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNjcm9sbEl0ZW1zLnB1c2goc2Nyb2xsSXRlbSk7XG4gICAgICAgICAgICByZXR1cm4gc2Nyb2xsSXRlbXM7XG4gICAgICAgIH0sIFtdKTtcbiAgICAgICAgdGhpcy5zY3JvbGxJdGVtcyA9IHVwZGF0ZWRJdGVtcztcbiAgICAgICAgdGhpcy51cGRhdGluZ0l0ZW1zID0gZmFsc2U7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEZpbmRzIGFsbCBvZiB0aGUgc2Nyb2xsIHN0b3BzIGJldHdlZW4gZWxlbWVudHNcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBzZXRTdG9wcygpIHtcbiAgICAgICAgdGhpcy51cGRhdGVTY3JvbGxTdG9wcygpO1xuICAgICAgICBjb25zdCB7IHNjcm9sbENvbnRhaW5lcjogY29udGFpbmVyIH0gPSB0aGlzO1xuICAgICAgICBjb25zdCB7IHNjcm9sbExlZnQgfSA9IGNvbnRhaW5lcjtcbiAgICAgICAgY29uc3QgeyB3aWR0aDogY29udGFpbmVyV2lkdGgsIGxlZnQ6IGNvbnRhaW5lckxlZnQsIH0gPSBjb250YWluZXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgIHRoaXMud2lkdGggPSBjb250YWluZXJXaWR0aDtcbiAgICAgICAgbGV0IGxhc3RTdG9wID0gMDtcbiAgICAgICAgbGV0IHN0b3BzID0gdGhpcy5zY3JvbGxJdGVtc1xuICAgICAgICAgICAgLm1hcCgoaXRlbSwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHsgbGVmdCwgd2lkdGggfSA9IGl0ZW0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgICAgICBjb25zdCBsZWZ0UG9zaXRpb24gPSBNYXRoLnJvdW5kKGxlZnQgKyBzY3JvbGxMZWZ0IC0gY29udGFpbmVyTGVmdCk7XG4gICAgICAgICAgICBjb25zdCByaWdodCA9IE1hdGgucm91bmQobGVmdFBvc2l0aW9uICsgd2lkdGgpO1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNSdGwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gLXJpZ2h0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGFzdFN0b3AgPSByaWdodDtcbiAgICAgICAgICAgIHJldHVybiBpbmRleCA9PT0gMCA/IDAgOiBsZWZ0UG9zaXRpb247XG4gICAgICAgIH0pXG4gICAgICAgICAgICAuY29uY2F0KGxhc3RTdG9wKTtcbiAgICAgICAgLyogRml4ZXMgYSBGaXJlRm94IGJ1ZyB3aGVyZSBpdCBkb2Vzbid0IHNjcm9sbCB0byB0aGUgc3RhcnQgKi9cbiAgICAgICAgc3RvcHMgPSB0aGlzLmZpeFNjcm9sbE1pc2FsaWduKHN0b3BzKTtcbiAgICAgICAgLyogU29ydCB0byB6ZXJvICovXG4gICAgICAgIHN0b3BzLnNvcnQoKGEsIGIpID0+IE1hdGguYWJzKGEpIC0gTWF0aC5hYnMoYikpO1xuICAgICAgICB0aGlzLnNjcm9sbFN0b3BzID0gc3RvcHM7XG4gICAgICAgIHRoaXMuc2V0RmxpcHBlcnMoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2hlY2tzIHRvIHNlZSBpZiB0aGUgc3RvcHMgYXJlIHJldHVybmluZyB2YWx1ZXNcbiAgICAgKiAgb3RoZXJ3aXNlIGl0IHdpbGwgdHJ5IHRvIHJlaW5pdGlhbGl6ZSB0aGVtXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBib29sZWFuIGluZGljYXRpbmcgdGhhdCBjdXJyZW50IHNjcm9sbFN0b3BzIGFyZSB2YWxpZCBub24temVybyB2YWx1ZXNcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICB2YWxpZGF0ZVN0b3BzKHJlaW5pdCA9IHRydWUpIHtcbiAgICAgICAgY29uc3QgaGFzU3RvcHMgPSAoKSA9PiAhIXRoaXMuc2Nyb2xsU3RvcHMuZmluZCgoc3RvcCkgPT4gc3RvcCA+IDApO1xuICAgICAgICBpZiAoIWhhc1N0b3BzKCkgJiYgcmVpbml0KSB7XG4gICAgICAgICAgICB0aGlzLnNldFN0b3BzKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGhhc1N0b3BzKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqXG4gICAgICovXG4gICAgZml4U2Nyb2xsTWlzYWxpZ24oc3RvcHMpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNSdGwgJiYgc3RvcHMuc29tZShzdG9wID0+IHN0b3AgPiAwKSkge1xuICAgICAgICAgICAgc3RvcHMuc29ydCgoYSwgYikgPT4gYiAtIGEpO1xuICAgICAgICAgICAgY29uc3Qgb2Zmc2V0ID0gc3RvcHNbMF07XG4gICAgICAgICAgICBzdG9wcyA9IHN0b3BzLm1hcChzdG9wID0+IHN0b3AgLSBvZmZzZXQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzdG9wcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0cyB0aGUgY29udHJvbHMgdmlldyBpZiBlbmFibGVkXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgc2V0RmxpcHBlcnMoKSB7XG4gICAgICAgIHZhciBfYSwgX2I7XG4gICAgICAgIGNvbnN0IHBvc2l0aW9uID0gdGhpcy5zY3JvbGxDb250YWluZXIuc2Nyb2xsTGVmdDtcbiAgICAgICAgKF9hID0gdGhpcy5wcmV2aW91c0ZsaXBwZXJDb250YWluZXIpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5jbGFzc0xpc3QudG9nZ2xlKFwiZGlzYWJsZWRcIiwgcG9zaXRpb24gPT09IDApO1xuICAgICAgICBpZiAodGhpcy5zY3JvbGxTdG9wcykge1xuICAgICAgICAgICAgY29uc3QgbGFzdFN0b3AgPSBNYXRoLmFicyh0aGlzLnNjcm9sbFN0b3BzW3RoaXMuc2Nyb2xsU3RvcHMubGVuZ3RoIC0gMV0pO1xuICAgICAgICAgICAgKF9iID0gdGhpcy5uZXh0RmxpcHBlckNvbnRhaW5lcikgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLmNsYXNzTGlzdC50b2dnbGUoXCJkaXNhYmxlZFwiLCB0aGlzLnZhbGlkYXRlU3RvcHMoZmFsc2UpICYmIE1hdGguYWJzKHBvc2l0aW9uKSArIHRoaXMud2lkdGggPj0gbGFzdFN0b3ApO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEZ1bmN0aW9uIHRoYXQgY2FuIHNjcm9sbCBhbiBpdGVtIGludG8gdmlldy5cbiAgICAgKiBAcGFyYW0gaXRlbSAtIEFuIGl0ZW0gaW5kZXgsIGEgc2Nyb2xsIGl0ZW0gb3IgYSBjaGlsZCBvZiBvbmUgb2YgdGhlIHNjcm9sbCBpdGVtc1xuICAgICAqIEBwYXJhbSBwYWRkaW5nIC0gUGFkZGluZyBvZiB0aGUgdmlld3BvcnQgd2hlcmUgdGhlIGFjdGl2ZSBpdGVtIHNob3VsZG4ndCBiZVxuICAgICAqIEBwYXJhbSByaWdodFBhZGRpbmcgLSBPcHRpb25hbCByaWdodCBwYWRkaW5nLiBVc2VzIHRoZSBwYWRkaW5nIGlmIG5vdCBkZWZpbmVkXG4gICAgICpcbiAgICAgKiBAcHVibGljXG4gICAgICovXG4gICAgc2Nyb2xsSW5WaWV3KGl0ZW0sIHBhZGRpbmcgPSAwLCByaWdodFBhZGRpbmcpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICBpZiAodHlwZW9mIGl0ZW0gIT09IFwibnVtYmVyXCIgJiYgaXRlbSkge1xuICAgICAgICAgICAgaXRlbSA9IHRoaXMuc2Nyb2xsSXRlbXMuZmluZEluZGV4KHNjcm9sbEl0ZW0gPT4gc2Nyb2xsSXRlbSA9PT0gaXRlbSB8fCBzY3JvbGxJdGVtLmNvbnRhaW5zKGl0ZW0pKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXRlbSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByaWdodFBhZGRpbmcgPSByaWdodFBhZGRpbmcgIT09IG51bGwgJiYgcmlnaHRQYWRkaW5nICE9PSB2b2lkIDAgPyByaWdodFBhZGRpbmcgOiBwYWRkaW5nO1xuICAgICAgICAgICAgY29uc3QgeyBzY3JvbGxDb250YWluZXI6IGNvbnRhaW5lciwgc2Nyb2xsU3RvcHMsIHNjcm9sbEl0ZW1zOiBpdGVtcyB9ID0gdGhpcztcbiAgICAgICAgICAgIGNvbnN0IHsgc2Nyb2xsTGVmdCB9ID0gdGhpcy5zY3JvbGxDb250YWluZXI7XG4gICAgICAgICAgICBjb25zdCB7IHdpZHRoOiBjb250YWluZXJXaWR0aCB9ID0gY29udGFpbmVyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICAgICAgY29uc3QgaXRlbVN0YXJ0ID0gc2Nyb2xsU3RvcHNbaXRlbV07XG4gICAgICAgICAgICBjb25zdCB7IHdpZHRoIH0gPSBpdGVtc1tpdGVtXS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgICAgIGNvbnN0IGl0ZW1FbmQgPSBpdGVtU3RhcnQgKyB3aWR0aDtcbiAgICAgICAgICAgIGNvbnN0IGlzQmVmb3JlID0gc2Nyb2xsTGVmdCArIHBhZGRpbmcgPiBpdGVtU3RhcnQ7XG4gICAgICAgICAgICBpZiAoaXNCZWZvcmUgfHwgc2Nyb2xsTGVmdCArIGNvbnRhaW5lcldpZHRoIC0gcmlnaHRQYWRkaW5nIDwgaXRlbUVuZCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHN0b3BzID0gWy4uLnNjcm9sbFN0b3BzXS5zb3J0KChhLCBiKSA9PiAoaXNCZWZvcmUgPyBiIC0gYSA6IGEgLSBiKSk7XG4gICAgICAgICAgICAgICAgY29uc3Qgc2Nyb2xsVG8gPSAoX2EgPSBzdG9wcy5maW5kKHBvc2l0aW9uID0+IGlzQmVmb3JlXG4gICAgICAgICAgICAgICAgICAgID8gcG9zaXRpb24gKyBwYWRkaW5nIDwgaXRlbVN0YXJ0XG4gICAgICAgICAgICAgICAgICAgIDogcG9zaXRpb24gKyBjb250YWluZXJXaWR0aCAtIChyaWdodFBhZGRpbmcgIT09IG51bGwgJiYgcmlnaHRQYWRkaW5nICE9PSB2b2lkIDAgPyByaWdodFBhZGRpbmcgOiAwKSA+IGl0ZW1FbmQpKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiAwO1xuICAgICAgICAgICAgICAgIHRoaXMuc2Nyb2xsVG9Qb3NpdGlvbihzY3JvbGxUbyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogTGV0cyB0aGUgdXNlciBhcnJvdyBsZWZ0IGFuZCByaWdodCB0aHJvdWdoIHRoZSBob3Jpem9udGFsIHNjcm9sbFxuICAgICAqIEBwYXJhbSBlIC0gS2V5Ym9hcmQgZXZlbnRcbiAgICAgKiBAcHVibGljXG4gICAgICovXG4gICAga2V5dXBIYW5kbGVyKGUpIHtcbiAgICAgICAgY29uc3Qga2V5ID0gZS5rZXk7XG4gICAgICAgIHN3aXRjaCAoa2V5KSB7XG4gICAgICAgICAgICBjYXNlIFwiQXJyb3dMZWZ0XCI6XG4gICAgICAgICAgICAgICAgdGhpcy5zY3JvbGxUb1ByZXZpb3VzKCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiQXJyb3dSaWdodFwiOlxuICAgICAgICAgICAgICAgIHRoaXMuc2Nyb2xsVG9OZXh0KCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogU2Nyb2xscyBpdGVtcyB0byB0aGUgbGVmdFxuICAgICAqIEBwdWJsaWNcbiAgICAgKi9cbiAgICBzY3JvbGxUb1ByZXZpb3VzKCkge1xuICAgICAgICB0aGlzLnZhbGlkYXRlU3RvcHMoKTtcbiAgICAgICAgY29uc3Qgc2Nyb2xsUG9zaXRpb24gPSB0aGlzLnNjcm9sbENvbnRhaW5lci5zY3JvbGxMZWZ0O1xuICAgICAgICBjb25zdCBjdXJyZW50ID0gdGhpcy5zY3JvbGxTdG9wcy5maW5kSW5kZXgoKHN0b3AsIGluZGV4KSA9PiBzdG9wID49IHNjcm9sbFBvc2l0aW9uICYmXG4gICAgICAgICAgICAodGhpcy5pc1J0bCB8fFxuICAgICAgICAgICAgICAgIGluZGV4ID09PSB0aGlzLnNjcm9sbFN0b3BzLmxlbmd0aCAtIDEgfHxcbiAgICAgICAgICAgICAgICB0aGlzLnNjcm9sbFN0b3BzW2luZGV4ICsgMV0gPiBzY3JvbGxQb3NpdGlvbikpO1xuICAgICAgICBjb25zdCByaWdodCA9IE1hdGguYWJzKHRoaXMuc2Nyb2xsU3RvcHNbY3VycmVudCArIDFdKTtcbiAgICAgICAgbGV0IG5leHRJbmRleCA9IHRoaXMuc2Nyb2xsU3RvcHMuZmluZEluZGV4KHN0b3AgPT4gTWF0aC5hYnMoc3RvcCkgKyB0aGlzLndpZHRoID4gcmlnaHQpO1xuICAgICAgICBpZiAobmV4dEluZGV4ID49IGN1cnJlbnQgfHwgbmV4dEluZGV4ID09PSAtMSkge1xuICAgICAgICAgICAgbmV4dEluZGV4ID0gY3VycmVudCA+IDAgPyBjdXJyZW50IC0gMSA6IDA7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zY3JvbGxUb1Bvc2l0aW9uKHRoaXMuc2Nyb2xsU3RvcHNbbmV4dEluZGV4XSwgc2Nyb2xsUG9zaXRpb24pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTY3JvbGxzIGl0ZW1zIHRvIHRoZSByaWdodFxuICAgICAqIEBwdWJsaWNcbiAgICAgKi9cbiAgICBzY3JvbGxUb05leHQoKSB7XG4gICAgICAgIHRoaXMudmFsaWRhdGVTdG9wcygpO1xuICAgICAgICBjb25zdCBzY3JvbGxQb3NpdGlvbiA9IHRoaXMuc2Nyb2xsQ29udGFpbmVyLnNjcm9sbExlZnQ7XG4gICAgICAgIGNvbnN0IGN1cnJlbnQgPSB0aGlzLnNjcm9sbFN0b3BzLmZpbmRJbmRleChzdG9wID0+IE1hdGguYWJzKHN0b3ApID49IE1hdGguYWJzKHNjcm9sbFBvc2l0aW9uKSk7XG4gICAgICAgIGNvbnN0IG91dE9mVmlldyA9IHRoaXMuc2Nyb2xsU3RvcHMuZmluZEluZGV4KHN0b3AgPT4gTWF0aC5hYnMoc2Nyb2xsUG9zaXRpb24pICsgdGhpcy53aWR0aCA8PSBNYXRoLmFicyhzdG9wKSk7XG4gICAgICAgIGxldCBuZXh0SW5kZXggPSBjdXJyZW50O1xuICAgICAgICBpZiAob3V0T2ZWaWV3ID4gY3VycmVudCArIDIpIHtcbiAgICAgICAgICAgIG5leHRJbmRleCA9IG91dE9mVmlldyAtIDI7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoY3VycmVudCA8IHRoaXMuc2Nyb2xsU3RvcHMubGVuZ3RoIC0gMikge1xuICAgICAgICAgICAgbmV4dEluZGV4ID0gY3VycmVudCArIDE7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zY3JvbGxUb1Bvc2l0aW9uKHRoaXMuc2Nyb2xsU3RvcHNbbmV4dEluZGV4XSwgc2Nyb2xsUG9zaXRpb24pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBIYW5kbGVzIHNjcm9sbGluZyB3aXRoIGVhc2luZ1xuICAgICAqIEBwYXJhbSBwb3NpdGlvbiAtIHN0YXJ0aW5nIHBvc2l0aW9uXG4gICAgICogQHBhcmFtIG5ld1Bvc2l0aW9uIC0gcG9zaXRpb24gdG8gc2Nyb2xsIHRvXG4gICAgICogQHB1YmxpY1xuICAgICAqL1xuICAgIHNjcm9sbFRvUG9zaXRpb24obmV3UG9zaXRpb24sIHBvc2l0aW9uID0gdGhpcy5zY3JvbGxDb250YWluZXIuc2Nyb2xsTGVmdCkge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIGlmICh0aGlzLnNjcm9sbGluZykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc2Nyb2xsaW5nID0gdHJ1ZTtcbiAgICAgICAgY29uc3Qgc2Vjb25kcyA9IChfYSA9IHRoaXMuZHVyYXRpb24pICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IGAke01hdGguYWJzKG5ld1Bvc2l0aW9uIC0gcG9zaXRpb24pIC8gdGhpcy5zcGVlZH1zYDtcbiAgICAgICAgdGhpcy5jb250ZW50LnN0eWxlLnNldFByb3BlcnR5KFwidHJhbnNpdGlvbi1kdXJhdGlvblwiLCBzZWNvbmRzKTtcbiAgICAgICAgY29uc3QgY29tcHV0ZWREdXJhdGlvbiA9IHBhcnNlRmxvYXQoZ2V0Q29tcHV0ZWRTdHlsZSh0aGlzLmNvbnRlbnQpLmdldFByb3BlcnR5VmFsdWUoXCJ0cmFuc2l0aW9uLWR1cmF0aW9uXCIpKTtcbiAgICAgICAgY29uc3QgdHJhbnNpdGlvbmVuZEhhbmRsZXIgPSAoZSkgPT4ge1xuICAgICAgICAgICAgaWYgKGUgJiYgZS50YXJnZXQgIT09IGUuY3VycmVudFRhcmdldCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuY29udGVudC5zdHlsZS5zZXRQcm9wZXJ0eShcInRyYW5zaXRpb24tZHVyYXRpb25cIiwgXCIwc1wiKTtcbiAgICAgICAgICAgIHRoaXMuY29udGVudC5zdHlsZS5yZW1vdmVQcm9wZXJ0eShcInRyYW5zZm9ybVwiKTtcbiAgICAgICAgICAgIHRoaXMuc2Nyb2xsQ29udGFpbmVyLnN0eWxlLnNldFByb3BlcnR5KFwic2Nyb2xsLWJlaGF2aW9yXCIsIFwiYXV0b1wiKTtcbiAgICAgICAgICAgIHRoaXMuc2Nyb2xsQ29udGFpbmVyLnNjcm9sbExlZnQgPSBuZXdQb3NpdGlvbjtcbiAgICAgICAgICAgIHRoaXMuc2V0RmxpcHBlcnMoKTtcbiAgICAgICAgICAgIHRoaXMuY29udGVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwidHJhbnNpdGlvbmVuZFwiLCB0cmFuc2l0aW9uZW5kSGFuZGxlcik7XG4gICAgICAgICAgICB0aGlzLnNjcm9sbGluZyA9IGZhbHNlO1xuICAgICAgICB9O1xuICAgICAgICBpZiAoY29tcHV0ZWREdXJhdGlvbiA9PT0gMCkge1xuICAgICAgICAgICAgdHJhbnNpdGlvbmVuZEhhbmRsZXIoKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNvbnRlbnQuYWRkRXZlbnRMaXN0ZW5lcihcInRyYW5zaXRpb25lbmRcIiwgdHJhbnNpdGlvbmVuZEhhbmRsZXIpO1xuICAgICAgICBjb25zdCBtYXhTY3JvbGxWYWx1ZSA9IHRoaXMuc2Nyb2xsQ29udGFpbmVyLnNjcm9sbFdpZHRoIC0gdGhpcy5zY3JvbGxDb250YWluZXIuY2xpZW50V2lkdGg7XG4gICAgICAgIGxldCB0cmFuc2l0aW9uU3RvcCA9IHRoaXMuc2Nyb2xsQ29udGFpbmVyLnNjcm9sbExlZnQgLSBNYXRoLm1pbihuZXdQb3NpdGlvbiwgbWF4U2Nyb2xsVmFsdWUpO1xuICAgICAgICBpZiAodGhpcy5pc1J0bCkge1xuICAgICAgICAgICAgdHJhbnNpdGlvblN0b3AgPVxuICAgICAgICAgICAgICAgIHRoaXMuc2Nyb2xsQ29udGFpbmVyLnNjcm9sbExlZnQgK1xuICAgICAgICAgICAgICAgICAgICBNYXRoLm1pbihNYXRoLmFicyhuZXdQb3NpdGlvbiksIG1heFNjcm9sbFZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNvbnRlbnQuc3R5bGUuc2V0UHJvcGVydHkoXCJ0cmFuc2l0aW9uLXByb3BlcnR5XCIsIFwidHJhbnNmb3JtXCIpO1xuICAgICAgICB0aGlzLmNvbnRlbnQuc3R5bGUuc2V0UHJvcGVydHkoXCJ0cmFuc2l0aW9uLXRpbWluZy1mdW5jdGlvblwiLCB0aGlzLmVhc2luZyk7XG4gICAgICAgIHRoaXMuY29udGVudC5zdHlsZS5zZXRQcm9wZXJ0eShcInRyYW5zZm9ybVwiLCBgdHJhbnNsYXRlWCgke3RyYW5zaXRpb25TdG9wfXB4KWApO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBNb25pdG9ycyByZXNpemUgZXZlbnQgb24gdGhlIGhvcml6b250YWwtc2Nyb2xsIGVsZW1lbnRcbiAgICAgKiBAcHVibGljXG4gICAgICovXG4gICAgcmVzaXplZCgpIHtcbiAgICAgICAgaWYgKHRoaXMucmVzaXplVGltZW91dCkge1xuICAgICAgICAgICAgdGhpcy5yZXNpemVUaW1lb3V0ID0gY2xlYXJUaW1lb3V0KHRoaXMucmVzaXplVGltZW91dCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5yZXNpemVUaW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLndpZHRoID0gdGhpcy5zY3JvbGxDb250YWluZXIub2Zmc2V0V2lkdGg7XG4gICAgICAgICAgICB0aGlzLnNldEZsaXBwZXJzKCk7XG4gICAgICAgIH0sIHRoaXMuZnJhbWVUaW1lKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTW9uaXRvcnMgc2Nyb2xsZWQgZXZlbnQgb24gdGhlIGNvbnRlbnQgY29udGFpbmVyXG4gICAgICogQHB1YmxpY1xuICAgICAqL1xuICAgIHNjcm9sbGVkKCkge1xuICAgICAgICBpZiAodGhpcy5zY3JvbGxUaW1lb3V0KSB7XG4gICAgICAgICAgICB0aGlzLnNjcm9sbFRpbWVvdXQgPSBjbGVhclRpbWVvdXQodGhpcy5zY3JvbGxUaW1lb3V0KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNjcm9sbFRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuc2V0RmxpcHBlcnMoKTtcbiAgICAgICAgfSwgdGhpcy5mcmFtZVRpbWUpO1xuICAgIH1cbn1cbl9fZGVjb3JhdGUoW1xuICAgIGF0dHIoeyBjb252ZXJ0ZXI6IG51bGxhYmxlTnVtYmVyQ29udmVydGVyIH0pXG5dLCBIb3Jpem9udGFsU2Nyb2xsLnByb3RvdHlwZSwgXCJzcGVlZFwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgYXR0clxuXSwgSG9yaXpvbnRhbFNjcm9sbC5wcm90b3R5cGUsIFwiZHVyYXRpb25cIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIGF0dHJcbl0sIEhvcml6b250YWxTY3JvbGwucHJvdG90eXBlLCBcImVhc2luZ1wiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgYXR0cih7IGF0dHJpYnV0ZTogXCJmbGlwcGVycy1oaWRkZW4tZnJvbS1hdFwiLCBjb252ZXJ0ZXI6IGJvb2xlYW5Db252ZXJ0ZXIgfSlcbl0sIEhvcml6b250YWxTY3JvbGwucHJvdG90eXBlLCBcImZsaXBwZXJzSGlkZGVuRnJvbUFUXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBvYnNlcnZhYmxlXG5dLCBIb3Jpem9udGFsU2Nyb2xsLnByb3RvdHlwZSwgXCJzY3JvbGxpbmdcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIG9ic2VydmFibGVcbl0sIEhvcml6b250YWxTY3JvbGwucHJvdG90eXBlLCBcInNjcm9sbEl0ZW1zXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBhdHRyKHsgYXR0cmlidXRlOiBcInZpZXdcIiB9KVxuXSwgSG9yaXpvbnRhbFNjcm9sbC5wcm90b3R5cGUsIFwidmlld1wiLCB2b2lkIDApO1xuIiwiaW1wb3J0IHsgZWxlbWVudHMsIGh0bWwsIHJlZiwgc2xvdHRlZCwgd2hlbiwgfSBmcm9tIFwiQG1pY3Jvc29mdC9mYXN0LWVsZW1lbnRcIjtcbmltcG9ydCB7IGVuZFNsb3RUZW1wbGF0ZSwgc3RhcnRTbG90VGVtcGxhdGUgfSBmcm9tIFwiLi4vcGF0dGVybnMvc3RhcnQtZW5kLmpzXCI7XG4vKipcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGNvbnN0IGhvcml6b250YWxTY3JvbGxUZW1wbGF0ZSA9IChjb250ZXh0LCBkZWZpbml0aW9uKSA9PiB7XG4gICAgdmFyIF9hLCBfYjtcbiAgICByZXR1cm4gaHRtbCBgXG4gICAgPHRlbXBsYXRlXG4gICAgICAgIGNsYXNzPVwiaG9yaXpvbnRhbC1zY3JvbGxcIlxuICAgICAgICBAa2V5dXA9XCIkeyh4LCBjKSA9PiB4LmtleXVwSGFuZGxlcihjLmV2ZW50KX1cIlxuICAgID5cbiAgICAgICAgJHtzdGFydFNsb3RUZW1wbGF0ZShjb250ZXh0LCBkZWZpbml0aW9uKX1cbiAgICAgICAgPGRpdiBjbGFzcz1cInNjcm9sbC1hcmVhXCIgcGFydD1cInNjcm9sbC1hcmVhXCI+XG4gICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgY2xhc3M9XCJzY3JvbGwtdmlld1wiXG4gICAgICAgICAgICAgICAgcGFydD1cInNjcm9sbC12aWV3XCJcbiAgICAgICAgICAgICAgICBAc2Nyb2xsPVwiJHt4ID0+IHguc2Nyb2xsZWQoKX1cIlxuICAgICAgICAgICAgICAgICR7cmVmKFwic2Nyb2xsQ29udGFpbmVyXCIpfVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb250ZW50LWNvbnRhaW5lclwiIHBhcnQ9XCJjb250ZW50LWNvbnRhaW5lclwiICR7cmVmKFwiY29udGVudFwiKX0+XG4gICAgICAgICAgICAgICAgICAgIDxzbG90XG4gICAgICAgICAgICAgICAgICAgICAgICAke3Nsb3R0ZWQoe1xuICAgICAgICBwcm9wZXJ0eTogXCJzY3JvbGxJdGVtc1wiLFxuICAgICAgICBmaWx0ZXI6IGVsZW1lbnRzKCksXG4gICAgfSl9XG4gICAgICAgICAgICAgICAgICAgID48L3Nsb3Q+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICR7d2hlbih4ID0+IHgudmlldyAhPT0gXCJtb2JpbGVcIiwgaHRtbCBgXG4gICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzPVwic2Nyb2xsIHNjcm9sbC1wcmV2XCJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnQ9XCJzY3JvbGwtcHJldlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAke3JlZihcInByZXZpb3VzRmxpcHBlckNvbnRhaW5lclwiKX1cbiAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInNjcm9sbC1hY3Rpb25cIiBwYXJ0PVwic2Nyb2xsLWFjdGlvbi1wcmV2aW91c1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzbG90IG5hbWU9XCJwcmV2aW91cy1mbGlwcGVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR7ZGVmaW5pdGlvbi5wcmV2aW91c0ZsaXBwZXIgaW5zdGFuY2VvZiBGdW5jdGlvblxuICAgICAgICA/IGRlZmluaXRpb24ucHJldmlvdXNGbGlwcGVyKGNvbnRleHQsIGRlZmluaXRpb24pXG4gICAgICAgIDogKF9hID0gZGVmaW5pdGlvbi5wcmV2aW91c0ZsaXBwZXIpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IFwiXCJ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zbG90PlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzcz1cInNjcm9sbCBzY3JvbGwtbmV4dFwiXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJ0PVwic2Nyb2xsLW5leHRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgJHtyZWYoXCJuZXh0RmxpcHBlckNvbnRhaW5lclwiKX1cbiAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInNjcm9sbC1hY3Rpb25cIiBwYXJ0PVwic2Nyb2xsLWFjdGlvbi1uZXh0XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNsb3QgbmFtZT1cIm5leHQtZmxpcHBlclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAke2RlZmluaXRpb24ubmV4dEZsaXBwZXIgaW5zdGFuY2VvZiBGdW5jdGlvblxuICAgICAgICA/IGRlZmluaXRpb24ubmV4dEZsaXBwZXIoY29udGV4dCwgZGVmaW5pdGlvbilcbiAgICAgICAgOiAoX2IgPSBkZWZpbml0aW9uLm5leHRGbGlwcGVyKSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiBcIlwifVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc2xvdD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICBgKX1cbiAgICAgICAgPC9kaXY+XG4gICAgICAgICR7ZW5kU2xvdFRlbXBsYXRlKGNvbnRleHQsIGRlZmluaXRpb24pfVxuICAgIDwvdGVtcGxhdGU+XG5gO1xufTtcbiIsImV4cG9ydCAqIGZyb20gXCIuL2hvcml6b250YWwtc2Nyb2xsLmpzXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9ob3Jpem9udGFsLXNjcm9sbC50ZW1wbGF0ZS5qc1wiO1xuIiwiZXhwb3J0ICogZnJvbSBcIi4vYWNjb3JkaW9uLWl0ZW0vaW5kZXguanNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL2FjY29yZGlvbi9pbmRleC5qc1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vYW5jaG9yL2luZGV4LmpzXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9hbmNob3JlZC1yZWdpb24vaW5kZXguanNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL2F2YXRhci9pbmRleC5qc1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vYmFkZ2UvaW5kZXguanNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL2JyZWFkY3J1bWItaXRlbS9pbmRleC5qc1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vYnJlYWRjcnVtYi9pbmRleC5qc1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vYnV0dG9uL2luZGV4LmpzXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9jYWxlbmRhci9pbmRleC5qc1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vY2FyZC9pbmRleC5qc1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vY2hlY2tib3gvaW5kZXguanNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL2NvbWJvYm94L2luZGV4LmpzXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9kYXRhLWdyaWQvaW5kZXguanNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL2Rlc2lnbi1zeXN0ZW0vaW5kZXguanNcIjtcbmV4cG9ydCB7IERlc2lnblRva2VuLCB9IGZyb20gXCIuL2Rlc2lnbi10b2tlbi9kZXNpZ24tdG9rZW4uanNcIjtcbmV4cG9ydCB7fSBmcm9tIFwiLi9kZXNpZ24tdG9rZW4vaW50ZXJmYWNlcy5qc1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vZGkvaW5kZXguanNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL2RpYWxvZy9pbmRleC5qc1wiO1xuZXhwb3J0IHsgcmVmbGVjdEF0dHJpYnV0ZXMgfSBmcm9tIFwiLi9kaXJlY3RpdmVzL3JlZmxlY3QtYXR0cmlidXRlcy5qc1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vZGlzY2xvc3VyZS9pbmRleC5qc1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vZGl2aWRlci9pbmRleC5qc1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vZmxpcHBlci9pbmRleC5qc1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vZm9ybS1hc3NvY2lhdGVkL2luZGV4LmpzXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9mb3VuZGF0aW9uLWVsZW1lbnQvaW5kZXguanNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL2xpc3Rib3gtb3B0aW9uL2luZGV4LmpzXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9saXN0Ym94L2luZGV4LmpzXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9waWNrZXIvaW5kZXguanNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL21lbnUtaXRlbS9pbmRleC5qc1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vbWVudS9pbmRleC5qc1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vbnVtYmVyLWZpZWxkL2luZGV4LmpzXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9wYXR0ZXJucy9pbmRleC5qc1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vcHJvZ3Jlc3MtcmluZy9pbmRleC5qc1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vcHJvZ3Jlc3MvaW5kZXguanNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL3JhZGlvLWdyb3VwL2luZGV4LmpzXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9yYWRpby9pbmRleC5qc1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vaG9yaXpvbnRhbC1zY3JvbGwvaW5kZXguanNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL3NlYXJjaC9pbmRleC5qc1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vc2VsZWN0L2luZGV4LmpzXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9za2VsZXRvbi9pbmRleC5qc1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vc2xpZGVyLWxhYmVsL2luZGV4LmpzXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9zbGlkZXIvaW5kZXguanNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL3N3aXRjaC9pbmRleC5qc1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vdGFiLXBhbmVsL2luZGV4LmpzXCI7XG5leHBvcnQgKiBmcm9tIFwiLi90YWIvaW5kZXguanNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL3RhYnMvaW5kZXguanNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL3RleHQtYXJlYS9pbmRleC5qc1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vdGV4dC1maWVsZC9pbmRleC5qc1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vdG9vbGJhci9pbmRleC5qc1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vdG9vbHRpcC9pbmRleC5qc1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vdHJlZS1pdGVtL2luZGV4LmpzXCI7XG5leHBvcnQgKiBmcm9tIFwiLi90cmVlLXZpZXcvaW5kZXguanNcIjtcbi8vIGV4cG9ydCBvdXIgdXRpbGl0aWVzXG5leHBvcnQgKiBmcm9tIFwiLi91dGlsaXRpZXMvaW5kZXguanNcIjtcbiIsImV4cG9ydCAqIGZyb20gXCIuL2xpc3Rib3gtb3B0aW9uLmpzXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9saXN0Ym94LW9wdGlvbi50ZW1wbGF0ZS5qc1wiO1xuIiwiaW1wb3J0IHsgX19kZWNvcmF0ZSB9IGZyb20gXCJ0c2xpYlwiO1xuaW1wb3J0IHsgYXR0ciwgb2JzZXJ2YWJsZSwgT2JzZXJ2YWJsZSB9IGZyb20gXCJAbWljcm9zb2Z0L2Zhc3QtZWxlbWVudFwiO1xuaW1wb3J0IHsgaXNIVE1MRWxlbWVudCB9IGZyb20gXCJAbWljcm9zb2Z0L2Zhc3Qtd2ViLXV0aWxpdGllc1wiO1xuaW1wb3J0IHsgRm91bmRhdGlvbkVsZW1lbnQgfSBmcm9tIFwiLi4vZm91bmRhdGlvbi1lbGVtZW50L2ZvdW5kYXRpb24tZWxlbWVudC5qc1wiO1xuaW1wb3J0IHsgQVJJQUdsb2JhbFN0YXRlc0FuZFByb3BlcnRpZXMgfSBmcm9tIFwiLi4vcGF0dGVybnMvYXJpYS1nbG9iYWwuanNcIjtcbmltcG9ydCB7IFN0YXJ0RW5kIH0gZnJvbSBcIi4uL3BhdHRlcm5zL3N0YXJ0LWVuZC5qc1wiO1xuaW1wb3J0IHsgYXBwbHlNaXhpbnMgfSBmcm9tIFwiLi4vdXRpbGl0aWVzL2FwcGx5LW1peGlucy5qc1wiO1xuLyoqXG4gKiBEZXRlcm1pbmVzIGlmIHRoZSBlbGVtZW50IGlzIGEge0BsaW5rIChMaXN0Ym94T3B0aW9uOmNsYXNzKX1cbiAqXG4gKiBAcGFyYW0gZWxlbWVudCAtIHRoZSBlbGVtZW50IHRvIHRlc3QuXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0xpc3Rib3hPcHRpb24oZWwpIHtcbiAgICByZXR1cm4gKGlzSFRNTEVsZW1lbnQoZWwpICYmXG4gICAgICAgIChlbC5nZXRBdHRyaWJ1dGUoXCJyb2xlXCIpID09PSBcIm9wdGlvblwiIHx8XG4gICAgICAgICAgICBlbCBpbnN0YW5jZW9mIEhUTUxPcHRpb25FbGVtZW50KSk7XG59XG4vKipcbiAqIEFuIE9wdGlvbiBDdXN0b20gSFRNTCBFbGVtZW50LlxuICogSW1wbGVtZW50cyB7QGxpbmsgaHR0cHM6Ly93d3cudzMub3JnL1RSL3dhaS1hcmlhLTEuMS8jb3B0aW9uIHwgQVJJQSBvcHRpb24gfS5cbiAqXG4gKiBAc2xvdCBzdGFydCAtIENvbnRlbnQgd2hpY2ggY2FuIGJlIHByb3ZpZGVkIGJlZm9yZSB0aGUgbGlzdGJveCBvcHRpb24gY29udGVudFxuICogQHNsb3QgZW5kIC0gQ29udGVudCB3aGljaCBjYW4gYmUgcHJvdmlkZWQgYWZ0ZXIgdGhlIGxpc3Rib3ggb3B0aW9uIGNvbnRlbnRcbiAqIEBzbG90IC0gVGhlIGRlZmF1bHQgc2xvdCBmb3IgbGlzdGJveCBvcHRpb24gY29udGVudFxuICogQGNzc3BhcnQgY29udGVudCAtIFdyYXBzIHRoZSBsaXN0Ym94IG9wdGlvbiBjb250ZW50XG4gKlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgY2xhc3MgTGlzdGJveE9wdGlvbiBleHRlbmRzIEZvdW5kYXRpb25FbGVtZW50IHtcbiAgICBjb25zdHJ1Y3Rvcih0ZXh0LCB2YWx1ZSwgZGVmYXVsdFNlbGVjdGVkLCBzZWxlY3RlZCkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIGRlZmF1bHRTZWxlY3RlZCBzdGF0ZSBvZiB0aGUgb3B0aW9uLlxuICAgICAgICAgKiBAcHVibGljXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmRlZmF1bHRTZWxlY3RlZCA9IGZhbHNlO1xuICAgICAgICAvKipcbiAgICAgICAgICogVHJhY2tzIHdoZXRoZXIgdGhlIFwic2VsZWN0ZWRcIiBwcm9wZXJ0eSBoYXMgYmVlbiBjaGFuZ2VkLlxuICAgICAgICAgKiBAaW50ZXJuYWxcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZGlydHlTZWxlY3RlZCA9IGZhbHNlO1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIGNoZWNrZWQgc3RhdGUgb2YgdGhlIGNvbnRyb2wuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwdWJsaWNcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuc2VsZWN0ZWQgPSB0aGlzLmRlZmF1bHRTZWxlY3RlZDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRyYWNrIHdoZXRoZXIgdGhlIHZhbHVlIGhhcyBiZWVuIGNoYW5nZWQgZnJvbSB0aGUgaW5pdGlhbCB2YWx1ZVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5kaXJ0eVZhbHVlID0gZmFsc2U7XG4gICAgICAgIGlmICh0ZXh0KSB7XG4gICAgICAgICAgICB0aGlzLnRleHRDb250ZW50ID0gdGV4dDtcbiAgICAgICAgfVxuICAgICAgICBpZiAodmFsdWUpIHtcbiAgICAgICAgICAgIHRoaXMuaW5pdGlhbFZhbHVlID0gdmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGRlZmF1bHRTZWxlY3RlZCkge1xuICAgICAgICAgICAgdGhpcy5kZWZhdWx0U2VsZWN0ZWQgPSBkZWZhdWx0U2VsZWN0ZWQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNlbGVjdGVkKSB7XG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkID0gc2VsZWN0ZWQ7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5wcm94eSA9IG5ldyBPcHRpb24oYCR7dGhpcy50ZXh0Q29udGVudH1gLCB0aGlzLmluaXRpYWxWYWx1ZSwgdGhpcy5kZWZhdWx0U2VsZWN0ZWQsIHRoaXMuc2VsZWN0ZWQpO1xuICAgICAgICB0aGlzLnByb3h5LmRpc2FibGVkID0gdGhpcy5kaXNhYmxlZDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVXBkYXRlcyB0aGUgYXJpYUNoZWNrZWQgcHJvcGVydHkgd2hlbiB0aGUgY2hlY2tlZCBwcm9wZXJ0eSBjaGFuZ2VzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHByZXYgLSB0aGUgcHJldmlvdXMgY2hlY2tlZCB2YWx1ZVxuICAgICAqIEBwYXJhbSBuZXh0IC0gdGhlIGN1cnJlbnQgY2hlY2tlZCB2YWx1ZVxuICAgICAqXG4gICAgICogQHB1YmxpY1xuICAgICAqL1xuICAgIGNoZWNrZWRDaGFuZ2VkKHByZXYsIG5leHQpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBuZXh0ID09PSBcImJvb2xlYW5cIikge1xuICAgICAgICAgICAgdGhpcy5hcmlhQ2hlY2tlZCA9IG5leHQgPyBcInRydWVcIiA6IFwiZmFsc2VcIjtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmFyaWFDaGVja2VkID0gbnVsbDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVXBkYXRlcyB0aGUgcHJveHkncyB0ZXh0IGNvbnRlbnQgd2hlbiB0aGUgZGVmYXVsdCBzbG90IGNoYW5nZXMuXG4gICAgICogQHBhcmFtIHByZXYgLSB0aGUgcHJldmlvdXMgY29udGVudCB2YWx1ZVxuICAgICAqIEBwYXJhbSBuZXh0IC0gdGhlIGN1cnJlbnQgY29udGVudCB2YWx1ZVxuICAgICAqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgY29udGVudENoYW5nZWQocHJldiwgbmV4dCkge1xuICAgICAgICBpZiAodGhpcy5wcm94eSBpbnN0YW5jZW9mIEhUTUxPcHRpb25FbGVtZW50KSB7XG4gICAgICAgICAgICB0aGlzLnByb3h5LnRleHRDb250ZW50ID0gdGhpcy50ZXh0Q29udGVudDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLiRlbWl0KFwiY29udGVudGNoYW5nZVwiLCBudWxsLCB7IGJ1YmJsZXM6IHRydWUgfSk7XG4gICAgfVxuICAgIGRlZmF1bHRTZWxlY3RlZENoYW5nZWQoKSB7XG4gICAgICAgIGlmICghdGhpcy5kaXJ0eVNlbGVjdGVkKSB7XG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkID0gdGhpcy5kZWZhdWx0U2VsZWN0ZWQ7XG4gICAgICAgICAgICBpZiAodGhpcy5wcm94eSBpbnN0YW5jZW9mIEhUTUxPcHRpb25FbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcm94eS5zZWxlY3RlZCA9IHRoaXMuZGVmYXVsdFNlbGVjdGVkO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGRpc2FibGVkQ2hhbmdlZChwcmV2LCBuZXh0KSB7XG4gICAgICAgIHRoaXMuYXJpYURpc2FibGVkID0gdGhpcy5kaXNhYmxlZCA/IFwidHJ1ZVwiIDogXCJmYWxzZVwiO1xuICAgICAgICBpZiAodGhpcy5wcm94eSBpbnN0YW5jZW9mIEhUTUxPcHRpb25FbGVtZW50KSB7XG4gICAgICAgICAgICB0aGlzLnByb3h5LmRpc2FibGVkID0gdGhpcy5kaXNhYmxlZDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzZWxlY3RlZEF0dHJpYnV0ZUNoYW5nZWQoKSB7XG4gICAgICAgIHRoaXMuZGVmYXVsdFNlbGVjdGVkID0gdGhpcy5zZWxlY3RlZEF0dHJpYnV0ZTtcbiAgICAgICAgaWYgKHRoaXMucHJveHkgaW5zdGFuY2VvZiBIVE1MT3B0aW9uRWxlbWVudCkge1xuICAgICAgICAgICAgdGhpcy5wcm94eS5kZWZhdWx0U2VsZWN0ZWQgPSB0aGlzLmRlZmF1bHRTZWxlY3RlZDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzZWxlY3RlZENoYW5nZWQoKSB7XG4gICAgICAgIHRoaXMuYXJpYVNlbGVjdGVkID0gdGhpcy5zZWxlY3RlZCA/IFwidHJ1ZVwiIDogXCJmYWxzZVwiO1xuICAgICAgICBpZiAoIXRoaXMuZGlydHlTZWxlY3RlZCkge1xuICAgICAgICAgICAgdGhpcy5kaXJ0eVNlbGVjdGVkID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5wcm94eSBpbnN0YW5jZW9mIEhUTUxPcHRpb25FbGVtZW50KSB7XG4gICAgICAgICAgICB0aGlzLnByb3h5LnNlbGVjdGVkID0gdGhpcy5zZWxlY3RlZDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpbml0aWFsVmFsdWVDaGFuZ2VkKHByZXZpb3VzLCBuZXh0KSB7XG4gICAgICAgIC8vIElmIHRoZSB2YWx1ZSBpcyBjbGVhbiBhbmQgdGhlIGNvbXBvbmVudCBpcyBjb25uZWN0ZWQgdG8gdGhlIERPTVxuICAgICAgICAvLyB0aGVuIHNldCB2YWx1ZSBlcXVhbCB0byB0aGUgYXR0cmlidXRlIHZhbHVlLlxuICAgICAgICBpZiAoIXRoaXMuZGlydHlWYWx1ZSkge1xuICAgICAgICAgICAgdGhpcy52YWx1ZSA9IHRoaXMuaW5pdGlhbFZhbHVlO1xuICAgICAgICAgICAgdGhpcy5kaXJ0eVZhbHVlID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0IGxhYmVsKCkge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIHJldHVybiAoX2EgPSB0aGlzLnZhbHVlKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiB0aGlzLnRleHQ7XG4gICAgfVxuICAgIGdldCB0ZXh0KCkge1xuICAgICAgICB2YXIgX2EsIF9iO1xuICAgICAgICByZXR1cm4gKF9iID0gKF9hID0gdGhpcy50ZXh0Q29udGVudCkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnJlcGxhY2UoL1xccysvZywgXCIgXCIpLnRyaW0oKSkgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogXCJcIjtcbiAgICB9XG4gICAgc2V0IHZhbHVlKG5leHQpIHtcbiAgICAgICAgY29uc3QgbmV3VmFsdWUgPSBgJHtuZXh0ICE9PSBudWxsICYmIG5leHQgIT09IHZvaWQgMCA/IG5leHQgOiBcIlwifWA7XG4gICAgICAgIHRoaXMuX3ZhbHVlID0gbmV3VmFsdWU7XG4gICAgICAgIHRoaXMuZGlydHlWYWx1ZSA9IHRydWU7XG4gICAgICAgIGlmICh0aGlzLnByb3h5IGluc3RhbmNlb2YgSFRNTE9wdGlvbkVsZW1lbnQpIHtcbiAgICAgICAgICAgIHRoaXMucHJveHkudmFsdWUgPSBuZXdWYWx1ZTtcbiAgICAgICAgfVxuICAgICAgICBPYnNlcnZhYmxlLm5vdGlmeSh0aGlzLCBcInZhbHVlXCIpO1xuICAgIH1cbiAgICBnZXQgdmFsdWUoKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgT2JzZXJ2YWJsZS50cmFjayh0aGlzLCBcInZhbHVlXCIpO1xuICAgICAgICByZXR1cm4gKF9hID0gdGhpcy5fdmFsdWUpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IHRoaXMudGV4dDtcbiAgICB9XG4gICAgZ2V0IGZvcm0oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByb3h5ID8gdGhpcy5wcm94eS5mb3JtIDogbnVsbDtcbiAgICB9XG59XG5fX2RlY29yYXRlKFtcbiAgICBvYnNlcnZhYmxlXG5dLCBMaXN0Ym94T3B0aW9uLnByb3RvdHlwZSwgXCJjaGVja2VkXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBvYnNlcnZhYmxlXG5dLCBMaXN0Ym94T3B0aW9uLnByb3RvdHlwZSwgXCJjb250ZW50XCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBvYnNlcnZhYmxlXG5dLCBMaXN0Ym94T3B0aW9uLnByb3RvdHlwZSwgXCJkZWZhdWx0U2VsZWN0ZWRcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIGF0dHIoeyBtb2RlOiBcImJvb2xlYW5cIiB9KVxuXSwgTGlzdGJveE9wdGlvbi5wcm90b3R5cGUsIFwiZGlzYWJsZWRcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIGF0dHIoeyBhdHRyaWJ1dGU6IFwic2VsZWN0ZWRcIiwgbW9kZTogXCJib29sZWFuXCIgfSlcbl0sIExpc3Rib3hPcHRpb24ucHJvdG90eXBlLCBcInNlbGVjdGVkQXR0cmlidXRlXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBvYnNlcnZhYmxlXG5dLCBMaXN0Ym94T3B0aW9uLnByb3RvdHlwZSwgXCJzZWxlY3RlZFwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgYXR0cih7IGF0dHJpYnV0ZTogXCJ2YWx1ZVwiLCBtb2RlOiBcImZyb21WaWV3XCIgfSlcbl0sIExpc3Rib3hPcHRpb24ucHJvdG90eXBlLCBcImluaXRpYWxWYWx1ZVwiLCB2b2lkIDApO1xuLyoqXG4gKiBTdGF0ZXMgYW5kIHByb3BlcnRpZXMgcmVsYXRpbmcgdG8gdGhlIEFSSUEgYG9wdGlvbmAgcm9sZS5cbiAqXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjbGFzcyBEZWxlZ2F0ZXNBUklBTGlzdGJveE9wdGlvbiB7XG59XG5fX2RlY29yYXRlKFtcbiAgICBvYnNlcnZhYmxlXG5dLCBEZWxlZ2F0ZXNBUklBTGlzdGJveE9wdGlvbi5wcm90b3R5cGUsIFwiYXJpYUNoZWNrZWRcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIG9ic2VydmFibGVcbl0sIERlbGVnYXRlc0FSSUFMaXN0Ym94T3B0aW9uLnByb3RvdHlwZSwgXCJhcmlhUG9zSW5TZXRcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIG9ic2VydmFibGVcbl0sIERlbGVnYXRlc0FSSUFMaXN0Ym94T3B0aW9uLnByb3RvdHlwZSwgXCJhcmlhU2VsZWN0ZWRcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIG9ic2VydmFibGVcbl0sIERlbGVnYXRlc0FSSUFMaXN0Ym94T3B0aW9uLnByb3RvdHlwZSwgXCJhcmlhU2V0U2l6ZVwiLCB2b2lkIDApO1xuYXBwbHlNaXhpbnMoRGVsZWdhdGVzQVJJQUxpc3Rib3hPcHRpb24sIEFSSUFHbG9iYWxTdGF0ZXNBbmRQcm9wZXJ0aWVzKTtcbmFwcGx5TWl4aW5zKExpc3Rib3hPcHRpb24sIFN0YXJ0RW5kLCBEZWxlZ2F0ZXNBUklBTGlzdGJveE9wdGlvbik7XG4iLCJpbXBvcnQgeyBodG1sLCBzbG90dGVkIH0gZnJvbSBcIkBtaWNyb3NvZnQvZmFzdC1lbGVtZW50XCI7XG5pbXBvcnQgeyBlbmRTbG90VGVtcGxhdGUsIHN0YXJ0U2xvdFRlbXBsYXRlIH0gZnJvbSBcIi4uL3BhdHRlcm5zL3N0YXJ0LWVuZC5qc1wiO1xuLyoqXG4gKiBUaGUgdGVtcGxhdGUgZm9yIHRoZSB7QGxpbmsgQG1pY3Jvc29mdC9mYXN0LWZvdW5kYXRpb24jKExpc3Rib3hPcHRpb246Y2xhc3MpfSBjb21wb25lbnQuXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjb25zdCBsaXN0Ym94T3B0aW9uVGVtcGxhdGUgPSAoY29udGV4dCwgZGVmaW5pdGlvbikgPT4gaHRtbCBgXG4gICAgPHRlbXBsYXRlXG4gICAgICAgIGFyaWEtY2hlY2tlZD1cIiR7eCA9PiB4LmFyaWFDaGVja2VkfVwiXG4gICAgICAgIGFyaWEtZGlzYWJsZWQ9XCIke3ggPT4geC5hcmlhRGlzYWJsZWR9XCJcbiAgICAgICAgYXJpYS1wb3NpbnNldD1cIiR7eCA9PiB4LmFyaWFQb3NJblNldH1cIlxuICAgICAgICBhcmlhLXNlbGVjdGVkPVwiJHt4ID0+IHguYXJpYVNlbGVjdGVkfVwiXG4gICAgICAgIGFyaWEtc2V0c2l6ZT1cIiR7eCA9PiB4LmFyaWFTZXRTaXplfVwiXG4gICAgICAgIGNsYXNzPVwiJHt4ID0+IFt4LmNoZWNrZWQgJiYgXCJjaGVja2VkXCIsIHguc2VsZWN0ZWQgJiYgXCJzZWxlY3RlZFwiLCB4LmRpc2FibGVkICYmIFwiZGlzYWJsZWRcIl1cbiAgICAuZmlsdGVyKEJvb2xlYW4pXG4gICAgLmpvaW4oXCIgXCIpfVwiXG4gICAgICAgIHJvbGU9XCJvcHRpb25cIlxuICAgID5cbiAgICAgICAgJHtzdGFydFNsb3RUZW1wbGF0ZShjb250ZXh0LCBkZWZpbml0aW9uKX1cbiAgICAgICAgPHNwYW4gY2xhc3M9XCJjb250ZW50XCIgcGFydD1cImNvbnRlbnRcIj5cbiAgICAgICAgICAgIDxzbG90ICR7c2xvdHRlZChcImNvbnRlbnRcIil9Pjwvc2xvdD5cbiAgICAgICAgPC9zcGFuPlxuICAgICAgICAke2VuZFNsb3RUZW1wbGF0ZShjb250ZXh0LCBkZWZpbml0aW9uKX1cbiAgICA8L3RlbXBsYXRlPlxuYDtcbiIsImV4cG9ydCAqIGZyb20gXCIuL2xpc3Rib3guanNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL2xpc3Rib3guZWxlbWVudC5qc1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vbGlzdGJveC50ZW1wbGF0ZS5qc1wiO1xuIiwiaW1wb3J0IHsgX19kZWNvcmF0ZSB9IGZyb20gXCJ0c2xpYlwiO1xuaW1wb3J0IHsgYXR0ciwgRE9NLCBudWxsYWJsZU51bWJlckNvbnZlcnRlciwgb2JzZXJ2YWJsZSB9IGZyb20gXCJAbWljcm9zb2Z0L2Zhc3QtZWxlbWVudFwiO1xuaW1wb3J0IHsgaW5SYW5nZSwga2V5QXJyb3dEb3duLCBrZXlBcnJvd1VwLCBrZXlFbmQsIGtleUVzY2FwZSwga2V5SG9tZSwga2V5U3BhY2UsIGtleVRhYiwgfSBmcm9tIFwiQG1pY3Jvc29mdC9mYXN0LXdlYi11dGlsaXRpZXNcIjtcbmltcG9ydCB7IExpc3Rib3ggfSBmcm9tIFwiLi9saXN0Ym94LmpzXCI7XG4vKipcbiAqIEEgTGlzdGJveCBDdXN0b20gSFRNTCBFbGVtZW50LlxuICogSW1wbGVtZW50cyB0aGUge0BsaW5rIGh0dHBzOi8vdzNjLmdpdGh1Yi5pby9hcmlhLyNsaXN0Ym94IHwgQVJJQSBsaXN0Ym94IH0uXG4gKlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgY2xhc3MgTGlzdGJveEVsZW1lbnQgZXh0ZW5kcyBMaXN0Ym94IHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBpbmRleCBvZiB0aGUgbW9zdCByZWNlbnRseSBjaGVja2VkIG9wdGlvbi5cbiAgICAgICAgICpcbiAgICAgICAgICogQGludGVybmFsXG4gICAgICAgICAqIEByZW1hcmtzXG4gICAgICAgICAqIE11bHRpcGxlLXNlbGVjdGlvbiBtb2RlIG9ubHkuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmFjdGl2ZUluZGV4ID0gLTE7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgc3RhcnQgaW5kZXggd2hlbiBjaGVja2luZyBhIHJhbmdlIG9mIG9wdGlvbnMuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBpbnRlcm5hbFxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5yYW5nZVN0YXJ0SW5kZXggPSAtMTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgbGFzdCBjaGVja2VkIG9wdGlvbi5cbiAgICAgKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIGdldCBhY3RpdmVPcHRpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm9wdGlvbnNbdGhpcy5hY3RpdmVJbmRleF07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIGxpc3Qgb2YgY2hlY2tlZCBvcHRpb25zLlxuICAgICAqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgZ2V0IGNoZWNrZWRPcHRpb25zKCkge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIHJldHVybiAoX2EgPSB0aGlzLm9wdGlvbnMpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5maWx0ZXIobyA9PiBvLmNoZWNrZWQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBpbmRleCBvZiB0aGUgZmlyc3Qgc2VsZWN0ZWQgb3B0aW9uLlxuICAgICAqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgZ2V0IGZpcnN0U2VsZWN0ZWRPcHRpb25JbmRleCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub3B0aW9ucy5pbmRleE9mKHRoaXMuZmlyc3RTZWxlY3RlZE9wdGlvbik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFVwZGF0ZXMgdGhlIGBhcmlhQWN0aXZlRGVzY2VuZGFudGAgcHJvcGVydHkgd2hlbiB0aGUgYWN0aXZlIGluZGV4IGNoYW5nZXMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcHJldiAtIHRoZSBwcmV2aW91cyBhY3RpdmUgaW5kZXhcbiAgICAgKiBAcGFyYW0gbmV4dCAtIHRoZSBuZXh0IGFjdGl2ZSBpbmRleFxuICAgICAqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgYWN0aXZlSW5kZXhDaGFuZ2VkKHByZXYsIG5leHQpIHtcbiAgICAgICAgdmFyIF9hLCBfYjtcbiAgICAgICAgdGhpcy5hcmlhQWN0aXZlRGVzY2VuZGFudCA9IChfYiA9IChfYSA9IHRoaXMub3B0aW9uc1tuZXh0XSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmlkKSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiBcIlwiO1xuICAgICAgICB0aGlzLmZvY3VzQW5kU2Nyb2xsT3B0aW9uSW50b1ZpZXcoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVG9nZ2xlcyB0aGUgY2hlY2tlZCBzdGF0ZSBmb3IgdGhlIGN1cnJlbnRseSBhY3RpdmUgb3B0aW9uLlxuICAgICAqXG4gICAgICogQHJlbWFya3NcbiAgICAgKiBNdWx0aXBsZS1zZWxlY3Rpb24gbW9kZSBvbmx5LlxuICAgICAqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgY2hlY2tBY3RpdmVJbmRleCgpIHtcbiAgICAgICAgaWYgKCF0aGlzLm11bHRpcGxlKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgYWN0aXZlSXRlbSA9IHRoaXMuYWN0aXZlT3B0aW9uO1xuICAgICAgICBpZiAoYWN0aXZlSXRlbSkge1xuICAgICAgICAgICAgYWN0aXZlSXRlbS5jaGVja2VkID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXRzIHRoZSBhY3RpdmUgaW5kZXggdG8gdGhlIGZpcnN0IG9wdGlvbiBhbmQgbWFya3MgaXQgYXMgY2hlY2tlZC5cbiAgICAgKlxuICAgICAqIEByZW1hcmtzXG4gICAgICogTXVsdGktc2VsZWN0aW9uIG1vZGUgb25seS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBwcmVzZXJ2ZUNoZWNrZWQgLSBtYXJrIGFsbCBvcHRpb25zIHVuY2hlY2tlZCBiZWZvcmUgY2hhbmdpbmcgdGhlIGFjdGl2ZSBpbmRleFxuICAgICAqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgY2hlY2tGaXJzdE9wdGlvbihwcmVzZXJ2ZUNoZWNrZWQgPSBmYWxzZSkge1xuICAgICAgICBpZiAocHJlc2VydmVDaGVja2VkKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5yYW5nZVN0YXJ0SW5kZXggPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yYW5nZVN0YXJ0SW5kZXggPSB0aGlzLmFjdGl2ZUluZGV4ICsgMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMub3B0aW9ucy5mb3JFYWNoKChvLCBpKSA9PiB7XG4gICAgICAgICAgICAgICAgby5jaGVja2VkID0gaW5SYW5nZShpLCB0aGlzLnJhbmdlU3RhcnRJbmRleCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMudW5jaGVja0FsbE9wdGlvbnMoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmFjdGl2ZUluZGV4ID0gMDtcbiAgICAgICAgdGhpcy5jaGVja0FjdGl2ZUluZGV4KCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERlY3JlbWVudHMgdGhlIGFjdGl2ZSBpbmRleCBhbmQgc2V0cyB0aGUgbWF0Y2hpbmcgb3B0aW9uIGFzIGNoZWNrZWQuXG4gICAgICpcbiAgICAgKiBAcmVtYXJrc1xuICAgICAqIE11bHRpLXNlbGVjdGlvbiBtb2RlIG9ubHkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcHJlc2VydmVDaGVja2VkIC0gbWFyayBhbGwgb3B0aW9ucyB1bmNoZWNrZWQgYmVmb3JlIGNoYW5naW5nIHRoZSBhY3RpdmUgaW5kZXhcbiAgICAgKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIGNoZWNrTGFzdE9wdGlvbihwcmVzZXJ2ZUNoZWNrZWQgPSBmYWxzZSkge1xuICAgICAgICBpZiAocHJlc2VydmVDaGVja2VkKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5yYW5nZVN0YXJ0SW5kZXggPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yYW5nZVN0YXJ0SW5kZXggPSB0aGlzLmFjdGl2ZUluZGV4O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5vcHRpb25zLmZvckVhY2goKG8sIGkpID0+IHtcbiAgICAgICAgICAgICAgICBvLmNoZWNrZWQgPSBpblJhbmdlKGksIHRoaXMucmFuZ2VTdGFydEluZGV4LCB0aGlzLm9wdGlvbnMubGVuZ3RoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy51bmNoZWNrQWxsT3B0aW9ucygpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuYWN0aXZlSW5kZXggPSB0aGlzLm9wdGlvbnMubGVuZ3RoIC0gMTtcbiAgICAgICAgdGhpcy5jaGVja0FjdGl2ZUluZGV4KCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBvdmVycmlkZVxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIGNvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgICAgICBzdXBlci5jb25uZWN0ZWRDYWxsYmFjaygpO1xuICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoXCJmb2N1c291dFwiLCB0aGlzLmZvY3Vzb3V0SGFuZGxlcik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBvdmVycmlkZVxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIGRpc2Nvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgICAgICB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJmb2N1c291dFwiLCB0aGlzLmZvY3Vzb3V0SGFuZGxlcik7XG4gICAgICAgIHN1cGVyLmRpc2Nvbm5lY3RlZENhbGxiYWNrKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEluY3JlbWVudHMgdGhlIGFjdGl2ZSBpbmRleCBhbmQgbWFya3MgdGhlIG1hdGNoaW5nIG9wdGlvbiBhcyBjaGVja2VkLlxuICAgICAqXG4gICAgICogQHJlbWFya3NcbiAgICAgKiBNdWx0aXBsZS1zZWxlY3Rpb24gbW9kZSBvbmx5LlxuICAgICAqXG4gICAgICogQHBhcmFtIHByZXNlcnZlQ2hlY2tlZCAtIG1hcmsgYWxsIG9wdGlvbnMgdW5jaGVja2VkIGJlZm9yZSBjaGFuZ2luZyB0aGUgYWN0aXZlIGluZGV4XG4gICAgICpcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBjaGVja05leHRPcHRpb24ocHJlc2VydmVDaGVja2VkID0gZmFsc2UpIHtcbiAgICAgICAgaWYgKHByZXNlcnZlQ2hlY2tlZCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucmFuZ2VTdGFydEluZGV4ID09PSAtMSkge1xuICAgICAgICAgICAgICAgIHRoaXMucmFuZ2VTdGFydEluZGV4ID0gdGhpcy5hY3RpdmVJbmRleDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMub3B0aW9ucy5mb3JFYWNoKChvLCBpKSA9PiB7XG4gICAgICAgICAgICAgICAgby5jaGVja2VkID0gaW5SYW5nZShpLCB0aGlzLnJhbmdlU3RhcnRJbmRleCwgdGhpcy5hY3RpdmVJbmRleCArIDEpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnVuY2hlY2tBbGxPcHRpb25zKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5hY3RpdmVJbmRleCArPSB0aGlzLmFjdGl2ZUluZGV4IDwgdGhpcy5vcHRpb25zLmxlbmd0aCAtIDEgPyAxIDogMDtcbiAgICAgICAgdGhpcy5jaGVja0FjdGl2ZUluZGV4KCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERlY3JlbWVudHMgdGhlIGFjdGl2ZSBpbmRleCBhbmQgbWFya3MgdGhlIG1hdGNoaW5nIG9wdGlvbiBhcyBjaGVja2VkLlxuICAgICAqXG4gICAgICogQHJlbWFya3NcbiAgICAgKiBNdWx0aXBsZS1zZWxlY3Rpb24gbW9kZSBvbmx5LlxuICAgICAqXG4gICAgICogQHBhcmFtIHByZXNlcnZlQ2hlY2tlZCAtIG1hcmsgYWxsIG9wdGlvbnMgdW5jaGVja2VkIGJlZm9yZSBjaGFuZ2luZyB0aGUgYWN0aXZlIGluZGV4XG4gICAgICpcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBjaGVja1ByZXZpb3VzT3B0aW9uKHByZXNlcnZlQ2hlY2tlZCA9IGZhbHNlKSB7XG4gICAgICAgIGlmIChwcmVzZXJ2ZUNoZWNrZWQpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnJhbmdlU3RhcnRJbmRleCA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJhbmdlU3RhcnRJbmRleCA9IHRoaXMuYWN0aXZlSW5kZXg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5jaGVja2VkT3B0aW9ucy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJhbmdlU3RhcnRJbmRleCArPSAxO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5vcHRpb25zLmZvckVhY2goKG8sIGkpID0+IHtcbiAgICAgICAgICAgICAgICBvLmNoZWNrZWQgPSBpblJhbmdlKGksIHRoaXMuYWN0aXZlSW5kZXgsIHRoaXMucmFuZ2VTdGFydEluZGV4KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy51bmNoZWNrQWxsT3B0aW9ucygpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuYWN0aXZlSW5kZXggLT0gdGhpcy5hY3RpdmVJbmRleCA+IDAgPyAxIDogMDtcbiAgICAgICAgdGhpcy5jaGVja0FjdGl2ZUluZGV4KCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEhhbmRsZXMgY2xpY2sgZXZlbnRzIGZvciBsaXN0Ym94IG9wdGlvbnMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZSAtIHRoZSBldmVudCBvYmplY3RcbiAgICAgKlxuICAgICAqIEBvdmVycmlkZVxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIGNsaWNrSGFuZGxlcihlKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgaWYgKCF0aGlzLm11bHRpcGxlKSB7XG4gICAgICAgICAgICByZXR1cm4gc3VwZXIuY2xpY2tIYW5kbGVyKGUpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGNhcHR1cmVkID0gKF9hID0gZS50YXJnZXQpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5jbG9zZXN0KGBbcm9sZT1vcHRpb25dYCk7XG4gICAgICAgIGlmICghY2FwdHVyZWQgfHwgY2FwdHVyZWQuZGlzYWJsZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnVuY2hlY2tBbGxPcHRpb25zKCk7XG4gICAgICAgIHRoaXMuYWN0aXZlSW5kZXggPSB0aGlzLm9wdGlvbnMuaW5kZXhPZihjYXB0dXJlZCk7XG4gICAgICAgIHRoaXMuY2hlY2tBY3RpdmVJbmRleCgpO1xuICAgICAgICB0aGlzLnRvZ2dsZVNlbGVjdGVkRm9yQWxsQ2hlY2tlZE9wdGlvbnMoKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBvdmVycmlkZVxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIGZvY3VzQW5kU2Nyb2xsT3B0aW9uSW50b1ZpZXcoKSB7XG4gICAgICAgIHN1cGVyLmZvY3VzQW5kU2Nyb2xsT3B0aW9uSW50b1ZpZXcodGhpcy5hY3RpdmVPcHRpb24pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBJbiBtdWx0aXBsZS1zZWxlY3Rpb24gbW9kZTpcbiAgICAgKiBJZiBhbnkgb3B0aW9ucyBhcmUgc2VsZWN0ZWQsIHRoZSBmaXJzdCBzZWxlY3RlZCBvcHRpb24gaXMgY2hlY2tlZCB3aGVuXG4gICAgICogdGhlIGxpc3Rib3ggcmVjZWl2ZXMgZm9jdXMuIElmIG5vIG9wdGlvbnMgYXJlIHNlbGVjdGVkLCB0aGUgZmlyc3RcbiAgICAgKiBzZWxlY3RhYmxlIG9wdGlvbiBpcyBjaGVja2VkLlxuICAgICAqXG4gICAgICogQG92ZXJyaWRlXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgZm9jdXNpbkhhbmRsZXIoZSkge1xuICAgICAgICBpZiAoIXRoaXMubXVsdGlwbGUpIHtcbiAgICAgICAgICAgIHJldHVybiBzdXBlci5mb2N1c2luSGFuZGxlcihlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMuc2hvdWxkU2tpcEZvY3VzICYmIGUudGFyZ2V0ID09PSBlLmN1cnJlbnRUYXJnZXQpIHtcbiAgICAgICAgICAgIHRoaXMudW5jaGVja0FsbE9wdGlvbnMoKTtcbiAgICAgICAgICAgIGlmICh0aGlzLmFjdGl2ZUluZGV4ID09PSAtMSkge1xuICAgICAgICAgICAgICAgIHRoaXMuYWN0aXZlSW5kZXggPVxuICAgICAgICAgICAgICAgICAgICB0aGlzLmZpcnN0U2VsZWN0ZWRPcHRpb25JbmRleCAhPT0gLTFcbiAgICAgICAgICAgICAgICAgICAgICAgID8gdGhpcy5maXJzdFNlbGVjdGVkT3B0aW9uSW5kZXhcbiAgICAgICAgICAgICAgICAgICAgICAgIDogMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuY2hlY2tBY3RpdmVJbmRleCgpO1xuICAgICAgICAgICAgdGhpcy5zZXRTZWxlY3RlZE9wdGlvbnMoKTtcbiAgICAgICAgICAgIHRoaXMuZm9jdXNBbmRTY3JvbGxPcHRpb25JbnRvVmlldygpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc2hvdWxkU2tpcEZvY3VzID0gZmFsc2U7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFVuY2hlY2tzIGFsbCBvcHRpb25zIHdoZW4gdGhlIGxpc3Rib3ggbG9zZXMgZm9jdXMuXG4gICAgICpcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBmb2N1c291dEhhbmRsZXIoZSkge1xuICAgICAgICBpZiAodGhpcy5tdWx0aXBsZSkge1xuICAgICAgICAgICAgdGhpcy51bmNoZWNrQWxsT3B0aW9ucygpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEhhbmRsZXMga2V5ZG93biBhY3Rpb25zIGZvciBsaXN0Ym94IG5hdmlnYXRpb24gYW5kIHR5cGVhaGVhZFxuICAgICAqXG4gICAgICogQG92ZXJyaWRlXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAga2V5ZG93bkhhbmRsZXIoZSkge1xuICAgICAgICBpZiAoIXRoaXMubXVsdGlwbGUpIHtcbiAgICAgICAgICAgIHJldHVybiBzdXBlci5rZXlkb3duSGFuZGxlcihlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5kaXNhYmxlZCkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgeyBrZXksIHNoaWZ0S2V5IH0gPSBlO1xuICAgICAgICB0aGlzLnNob3VsZFNraXBGb2N1cyA9IGZhbHNlO1xuICAgICAgICBzd2l0Y2ggKGtleSkge1xuICAgICAgICAgICAgLy8gU2VsZWN0IHRoZSBmaXJzdCBhdmFpbGFibGUgb3B0aW9uXG4gICAgICAgICAgICBjYXNlIGtleUhvbWU6IHtcbiAgICAgICAgICAgICAgICB0aGlzLmNoZWNrRmlyc3RPcHRpb24oc2hpZnRLZXkpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFNlbGVjdCB0aGUgbmV4dCBzZWxlY3RhYmxlIG9wdGlvblxuICAgICAgICAgICAgY2FzZSBrZXlBcnJvd0Rvd246IHtcbiAgICAgICAgICAgICAgICB0aGlzLmNoZWNrTmV4dE9wdGlvbihzaGlmdEtleSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gU2VsZWN0IHRoZSBwcmV2aW91cyBzZWxlY3RhYmxlIG9wdGlvblxuICAgICAgICAgICAgY2FzZSBrZXlBcnJvd1VwOiB7XG4gICAgICAgICAgICAgICAgdGhpcy5jaGVja1ByZXZpb3VzT3B0aW9uKHNoaWZ0S2V5KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBTZWxlY3QgdGhlIGxhc3QgYXZhaWxhYmxlIG9wdGlvblxuICAgICAgICAgICAgY2FzZSBrZXlFbmQ6IHtcbiAgICAgICAgICAgICAgICB0aGlzLmNoZWNrTGFzdE9wdGlvbihzaGlmdEtleSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FzZSBrZXlUYWI6IHtcbiAgICAgICAgICAgICAgICB0aGlzLmZvY3VzQW5kU2Nyb2xsT3B0aW9uSW50b1ZpZXcoKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhc2Uga2V5RXNjYXBlOiB7XG4gICAgICAgICAgICAgICAgdGhpcy51bmNoZWNrQWxsT3B0aW9ucygpO1xuICAgICAgICAgICAgICAgIHRoaXMuY2hlY2tBY3RpdmVJbmRleCgpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FzZSBrZXlTcGFjZToge1xuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy50eXBlQWhlYWRFeHBpcmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudG9nZ2xlU2VsZWN0ZWRGb3JBbGxDaGVja2VkT3B0aW9ucygpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gU2VuZCBrZXkgdG8gVHlwZWFoZWFkIGhhbmRsZXJcbiAgICAgICAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgICAgICAgICBpZiAoa2V5Lmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZVR5cGVBaGVhZChgJHtrZXl9YCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFByZXZlbnRzIGBmb2N1c2luYCBldmVudHMgZnJvbSBmaXJpbmcgYmVmb3JlIGBjbGlja2AgZXZlbnRzIHdoZW4gdGhlXG4gICAgICogZWxlbWVudCBpcyB1bmZvY3VzZWQuXG4gICAgICpcbiAgICAgKiBAb3ZlcnJpZGVcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBtb3VzZWRvd25IYW5kbGVyKGUpIHtcbiAgICAgICAgaWYgKGUub2Zmc2V0WCA+PSAwICYmIGUub2Zmc2V0WCA8PSB0aGlzLnNjcm9sbFdpZHRoKSB7XG4gICAgICAgICAgICByZXR1cm4gc3VwZXIubW91c2Vkb3duSGFuZGxlcihlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBTd2l0Y2hlcyBiZXR3ZWVuIHNpbmdsZS1zZWxlY3Rpb24gYW5kIG11bHRpLXNlbGVjdGlvbiBtb2RlLlxuICAgICAqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgbXVsdGlwbGVDaGFuZ2VkKHByZXYsIG5leHQpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICB0aGlzLmFyaWFNdWx0aVNlbGVjdGFibGUgPSBuZXh0ID8gXCJ0cnVlXCIgOiBudWxsO1xuICAgICAgICAoX2EgPSB0aGlzLm9wdGlvbnMpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5mb3JFYWNoKG8gPT4ge1xuICAgICAgICAgICAgby5jaGVja2VkID0gbmV4dCA/IGZhbHNlIDogdW5kZWZpbmVkO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5zZXRTZWxlY3RlZE9wdGlvbnMoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0cyBhbiBvcHRpb24gYXMgc2VsZWN0ZWQgYW5kIGdpdmVzIGl0IGZvY3VzLlxuICAgICAqXG4gICAgICogQG92ZXJyaWRlXG4gICAgICogQHB1YmxpY1xuICAgICAqL1xuICAgIHNldFNlbGVjdGVkT3B0aW9ucygpIHtcbiAgICAgICAgaWYgKCF0aGlzLm11bHRpcGxlKSB7XG4gICAgICAgICAgICBzdXBlci5zZXRTZWxlY3RlZE9wdGlvbnMoKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy4kZmFzdENvbnRyb2xsZXIuaXNDb25uZWN0ZWQgJiYgdGhpcy5vcHRpb25zKSB7XG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkT3B0aW9ucyA9IHRoaXMub3B0aW9ucy5maWx0ZXIobyA9PiBvLnNlbGVjdGVkKTtcbiAgICAgICAgICAgIHRoaXMuZm9jdXNBbmRTY3JvbGxPcHRpb25JbnRvVmlldygpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEVuc3VyZXMgdGhlIHNpemUgaXMgYSBwb3NpdGl2ZSBpbnRlZ2VyIHdoZW4gdGhlIHByb3BlcnR5IGlzIHVwZGF0ZWQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcHJldiAtIHRoZSBwcmV2aW91cyBzaXplIHZhbHVlXG4gICAgICogQHBhcmFtIG5leHQgLSB0aGUgY3VycmVudCBzaXplIHZhbHVlXG4gICAgICpcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBzaXplQ2hhbmdlZChwcmV2LCBuZXh0KSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgY29uc3Qgc2l6ZSA9IE1hdGgubWF4KDAsIHBhcnNlSW50KChfYSA9IG5leHQgPT09IG51bGwgfHwgbmV4dCA9PT0gdm9pZCAwID8gdm9pZCAwIDogbmV4dC50b0ZpeGVkKCkpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IFwiXCIsIDEwKSk7XG4gICAgICAgIGlmIChzaXplICE9PSBuZXh0KSB7XG4gICAgICAgICAgICBET00ucXVldWVVcGRhdGUoKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuc2l6ZSA9IHNpemU7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBUb2dnbGVzIHRoZSBzZWxlY3RlZCBzdGF0ZSBvZiB0aGUgcHJvdmlkZWQgb3B0aW9ucy4gSWYgYW55IHByb3ZpZGVkIGl0ZW1zXG4gICAgICogYXJlIGluIGFuIHVuc2VsZWN0ZWQgc3RhdGUsIGFsbCBpdGVtcyBhcmUgc2V0IHRvIHNlbGVjdGVkLiBJZiBldmVyeVxuICAgICAqIHByb3ZpZGVkIGl0ZW0gaXMgc2VsZWN0ZWQsIHRoZXkgYXJlIGFsbCB1bnNlbGVjdGVkLlxuICAgICAqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgdG9nZ2xlU2VsZWN0ZWRGb3JBbGxDaGVja2VkT3B0aW9ucygpIHtcbiAgICAgICAgY29uc3QgZW5hYmxlZENoZWNrZWRPcHRpb25zID0gdGhpcy5jaGVja2VkT3B0aW9ucy5maWx0ZXIobyA9PiAhby5kaXNhYmxlZCk7XG4gICAgICAgIGNvbnN0IGZvcmNlID0gIWVuYWJsZWRDaGVja2VkT3B0aW9ucy5ldmVyeShvID0+IG8uc2VsZWN0ZWQpO1xuICAgICAgICBlbmFibGVkQ2hlY2tlZE9wdGlvbnMuZm9yRWFjaChvID0+IChvLnNlbGVjdGVkID0gZm9yY2UpKTtcbiAgICAgICAgdGhpcy5zZWxlY3RlZEluZGV4ID0gdGhpcy5vcHRpb25zLmluZGV4T2YoZW5hYmxlZENoZWNrZWRPcHRpb25zW2VuYWJsZWRDaGVja2VkT3B0aW9ucy5sZW5ndGggLSAxXSk7XG4gICAgICAgIHRoaXMuc2V0U2VsZWN0ZWRPcHRpb25zKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBvdmVycmlkZVxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIHR5cGVhaGVhZEJ1ZmZlckNoYW5nZWQocHJldiwgbmV4dCkge1xuICAgICAgICBpZiAoIXRoaXMubXVsdGlwbGUpIHtcbiAgICAgICAgICAgIHN1cGVyLnR5cGVhaGVhZEJ1ZmZlckNoYW5nZWQocHJldiwgbmV4dCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuJGZhc3RDb250cm9sbGVyLmlzQ29ubmVjdGVkKSB7XG4gICAgICAgICAgICBjb25zdCB0eXBlYWhlYWRNYXRjaGVzID0gdGhpcy5nZXRUeXBlYWhlYWRNYXRjaGVzKCk7XG4gICAgICAgICAgICBjb25zdCBhY3RpdmVJbmRleCA9IHRoaXMub3B0aW9ucy5pbmRleE9mKHR5cGVhaGVhZE1hdGNoZXNbMF0pO1xuICAgICAgICAgICAgaWYgKGFjdGl2ZUluZGV4ID4gLTEpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFjdGl2ZUluZGV4ID0gYWN0aXZlSW5kZXg7XG4gICAgICAgICAgICAgICAgdGhpcy51bmNoZWNrQWxsT3B0aW9ucygpO1xuICAgICAgICAgICAgICAgIHRoaXMuY2hlY2tBY3RpdmVJbmRleCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy50eXBlQWhlYWRFeHBpcmVkID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogVW5jaGVja3MgYWxsIG9wdGlvbnMuXG4gICAgICpcbiAgICAgKiBAcmVtYXJrc1xuICAgICAqIE11bHRpcGxlLXNlbGVjdGlvbiBtb2RlIG9ubHkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcHJlc2VydmVDaGVja2VkIC0gcmVzZXQgdGhlIHJhbmdlU3RhcnRJbmRleFxuICAgICAqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgdW5jaGVja0FsbE9wdGlvbnMocHJlc2VydmVDaGVja2VkID0gZmFsc2UpIHtcbiAgICAgICAgdGhpcy5vcHRpb25zLmZvckVhY2gobyA9PiAoby5jaGVja2VkID0gdGhpcy5tdWx0aXBsZSA/IGZhbHNlIDogdW5kZWZpbmVkKSk7XG4gICAgICAgIGlmICghcHJlc2VydmVDaGVja2VkKSB7XG4gICAgICAgICAgICB0aGlzLnJhbmdlU3RhcnRJbmRleCA9IC0xO1xuICAgICAgICB9XG4gICAgfVxufVxuX19kZWNvcmF0ZShbXG4gICAgb2JzZXJ2YWJsZVxuXSwgTGlzdGJveEVsZW1lbnQucHJvdG90eXBlLCBcImFjdGl2ZUluZGV4XCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBhdHRyKHsgbW9kZTogXCJib29sZWFuXCIgfSlcbl0sIExpc3Rib3hFbGVtZW50LnByb3RvdHlwZSwgXCJtdWx0aXBsZVwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgYXR0cih7IGNvbnZlcnRlcjogbnVsbGFibGVOdW1iZXJDb252ZXJ0ZXIgfSlcbl0sIExpc3Rib3hFbGVtZW50LnByb3RvdHlwZSwgXCJzaXplXCIsIHZvaWQgMCk7XG4iLCJpbXBvcnQgeyBfX2RlY29yYXRlIH0gZnJvbSBcInRzbGliXCI7XG5pbXBvcnQgeyBhdHRyLCBvYnNlcnZhYmxlLCBPYnNlcnZhYmxlIH0gZnJvbSBcIkBtaWNyb3NvZnQvZmFzdC1lbGVtZW50XCI7XG5pbXBvcnQgeyBmaW5kTGFzdEluZGV4LCBrZXlBcnJvd0Rvd24sIGtleUFycm93VXAsIGtleUVuZCwga2V5RW50ZXIsIGtleUVzY2FwZSwga2V5SG9tZSwga2V5U3BhY2UsIGtleVRhYiwgdW5pcXVlSWQsIH0gZnJvbSBcIkBtaWNyb3NvZnQvZmFzdC13ZWItdXRpbGl0aWVzXCI7XG5pbXBvcnQgeyBGb3VuZGF0aW9uRWxlbWVudCB9IGZyb20gXCIuLi9mb3VuZGF0aW9uLWVsZW1lbnQvZm91bmRhdGlvbi1lbGVtZW50LmpzXCI7XG5pbXBvcnQgeyBpc0xpc3Rib3hPcHRpb24gfSBmcm9tIFwiLi4vbGlzdGJveC1vcHRpb24vbGlzdGJveC1vcHRpb24uanNcIjtcbmltcG9ydCB7IEFSSUFHbG9iYWxTdGF0ZXNBbmRQcm9wZXJ0aWVzIH0gZnJvbSBcIi4uL3BhdHRlcm5zL2FyaWEtZ2xvYmFsLmpzXCI7XG5pbXBvcnQgeyBhcHBseU1peGlucyB9IGZyb20gXCIuLi91dGlsaXRpZXMvYXBwbHktbWl4aW5zLmpzXCI7XG4vKipcbiAqIEEgTGlzdGJveCBDdXN0b20gSFRNTCBFbGVtZW50LlxuICogSW1wbGVtZW50cyB0aGUge0BsaW5rIGh0dHBzOi8vd3d3LnczLm9yZy9UUi93YWktYXJpYS0xLjEvI2xpc3Rib3ggfCBBUklBIGxpc3Rib3ggfS5cbiAqXG4gKiBAc2xvdCAtIFRoZSBkZWZhdWx0IHNsb3QgZm9yIHRoZSBsaXN0Ym94IG9wdGlvbnNcbiAqXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjbGFzcyBMaXN0Ym94IGV4dGVuZHMgRm91bmRhdGlvbkVsZW1lbnQge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlciguLi5hcmd1bWVudHMpO1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIGludGVybmFsIHVuZmlsdGVyZWQgbGlzdCBvZiBzZWxlY3RhYmxlIG9wdGlvbnMuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBpbnRlcm5hbFxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5fb3B0aW9ucyA9IFtdO1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIGluZGV4IG9mIHRoZSBzZWxlY3RlZCBvcHRpb24uXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwdWJsaWNcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuc2VsZWN0ZWRJbmRleCA9IC0xO1xuICAgICAgICAvKipcbiAgICAgICAgICogQSBjb2xsZWN0aW9uIG9mIHRoZSBzZWxlY3RlZCBvcHRpb25zLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcHVibGljXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnNlbGVjdGVkT3B0aW9ucyA9IFtdO1xuICAgICAgICAvKipcbiAgICAgICAgICogQSBzdGFuZGFyZCBgY2xpY2tgIGV2ZW50IGNyZWF0ZXMgYSBgZm9jdXNgIGV2ZW50IGJlZm9yZSBmaXJpbmcsIHNvIGFcbiAgICAgICAgICogYG1vdXNlZG93bmAgZXZlbnQgaXMgdXNlZCB0byBza2lwIHRoYXQgaW5pdGlhbCBmb2N1cy5cbiAgICAgICAgICpcbiAgICAgICAgICogQGludGVybmFsXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnNob3VsZFNraXBGb2N1cyA9IGZhbHNlO1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIGN1cnJlbnQgdHlwZWFoZWFkIGJ1ZmZlciBzdHJpbmcuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBpbnRlcm5hbFxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy50eXBlYWhlYWRCdWZmZXIgPSBcIlwiO1xuICAgICAgICAvKipcbiAgICAgICAgICogRmxhZyBmb3IgdGhlIHR5cGVhaGVhZCB0aW1lb3V0IGV4cGlyYXRpb24uXG4gICAgICAgICAqXG4gICAgICAgICAqIEBpbnRlcm5hbFxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy50eXBlYWhlYWRFeHBpcmVkID0gdHJ1ZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSB0aW1lb3V0IElEIGZvciB0aGUgdHlwZWFoZWFkIGhhbmRsZXIuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBpbnRlcm5hbFxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy50eXBlYWhlYWRUaW1lb3V0ID0gLTE7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBmaXJzdCBzZWxlY3RlZCBvcHRpb24uXG4gICAgICpcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBnZXQgZmlyc3RTZWxlY3RlZE9wdGlvbigpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICByZXR1cm4gKF9hID0gdGhpcy5zZWxlY3RlZE9wdGlvbnNbMF0pICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IG51bGw7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdHJ1ZSBpZiB0aGVyZSBpcyBvbmUgb3IgbW9yZSBzZWxlY3RhYmxlIG9wdGlvbi5cbiAgICAgKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIGdldCBoYXNTZWxlY3RhYmxlT3B0aW9ucygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub3B0aW9ucy5sZW5ndGggPiAwICYmICF0aGlzLm9wdGlvbnMuZXZlcnkobyA9PiBvLmRpc2FibGVkKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIG51bWJlciBvZiBvcHRpb25zLlxuICAgICAqXG4gICAgICogQHB1YmxpY1xuICAgICAqL1xuICAgIGdldCBsZW5ndGgoKSB7XG4gICAgICAgIHZhciBfYSwgX2I7XG4gICAgICAgIHJldHVybiAoX2IgPSAoX2EgPSB0aGlzLm9wdGlvbnMpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5sZW5ndGgpICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IDA7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBsaXN0IG9mIG9wdGlvbnMuXG4gICAgICpcbiAgICAgKiBAcHVibGljXG4gICAgICovXG4gICAgZ2V0IG9wdGlvbnMoKSB7XG4gICAgICAgIE9ic2VydmFibGUudHJhY2sodGhpcywgXCJvcHRpb25zXCIpO1xuICAgICAgICByZXR1cm4gdGhpcy5fb3B0aW9ucztcbiAgICB9XG4gICAgc2V0IG9wdGlvbnModmFsdWUpIHtcbiAgICAgICAgdGhpcy5fb3B0aW9ucyA9IHZhbHVlO1xuICAgICAgICBPYnNlcnZhYmxlLm5vdGlmeSh0aGlzLCBcIm9wdGlvbnNcIik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEZsYWcgZm9yIHRoZSB0eXBlYWhlYWQgdGltZW91dCBleHBpcmF0aW9uLlxuICAgICAqXG4gICAgICogQGRlcHJlY2F0ZWQgdXNlIGBMaXN0Ym94LnR5cGVhaGVhZEV4cGlyZWRgXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgZ2V0IHR5cGVBaGVhZEV4cGlyZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnR5cGVhaGVhZEV4cGlyZWQ7XG4gICAgfVxuICAgIHNldCB0eXBlQWhlYWRFeHBpcmVkKHZhbHVlKSB7XG4gICAgICAgIHRoaXMudHlwZWFoZWFkRXhwaXJlZCA9IHZhbHVlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBIYW5kbGUgY2xpY2sgZXZlbnRzIGZvciBsaXN0Ym94IG9wdGlvbnMuXG4gICAgICpcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBjbGlja0hhbmRsZXIoZSkge1xuICAgICAgICBjb25zdCBjYXB0dXJlZCA9IGUudGFyZ2V0LmNsb3Nlc3QoYG9wdGlvbixbcm9sZT1vcHRpb25dYCk7XG4gICAgICAgIGlmIChjYXB0dXJlZCAmJiAhY2FwdHVyZWQuZGlzYWJsZWQpIHtcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRJbmRleCA9IHRoaXMub3B0aW9ucy5pbmRleE9mKGNhcHR1cmVkKTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEVuc3VyZXMgdGhhdCB0aGUgcHJvdmlkZWQgb3B0aW9uIGlzIGZvY3VzZWQgYW5kIHNjcm9sbGVkIGludG8gdmlldy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvcHRpb25Ub0ZvY3VzIC0gVGhlIG9wdGlvbiB0byBmb2N1c1xuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIGZvY3VzQW5kU2Nyb2xsT3B0aW9uSW50b1ZpZXcob3B0aW9uVG9Gb2N1cyA9IHRoaXMuZmlyc3RTZWxlY3RlZE9wdGlvbikge1xuICAgICAgICAvLyBUbyBlbnN1cmUgdGhhdCB0aGUgYnJvd3NlciBoYW5kbGVzIGJvdGggYGZvY3VzKClgIGFuZCBgc2Nyb2xsSW50b1ZpZXcoKWAsIHRoZVxuICAgICAgICAvLyB0aW1pbmcgaGVyZSBuZWVkcyB0byBndWFyYW50ZWUgdGhhdCB0aGV5IGhhcHBlbiBvbiBkaWZmZXJlbnQgZnJhbWVzLiBTaW5jZSB0aGlzXG4gICAgICAgIC8vIGZ1bmN0aW9uIGlzIHR5cGljYWxseSBjYWxsZWQgZnJvbSB0aGUgYG9wZW5DaGFuZ2VkYCBvYnNlcnZlciwgYERPTS5xdWV1ZVVwZGF0ZWBcbiAgICAgICAgLy8gY2F1c2VzIHRoZSBjYWxscyB0byBiZSBncm91cGVkIGludG8gdGhlIHNhbWUgZnJhbWUuIFRvIHByZXZlbnQgdGhpcyxcbiAgICAgICAgLy8gYHJlcXVlc3RBbmltYXRpb25GcmFtZWAgaXMgdXNlZCBpbnN0ZWFkIG9mIGBET00ucXVldWVVcGRhdGVgLlxuICAgICAgICBpZiAodGhpcy5jb250YWlucyhkb2N1bWVudC5hY3RpdmVFbGVtZW50KSAmJiBvcHRpb25Ub0ZvY3VzICE9PSBudWxsKSB7XG4gICAgICAgICAgICBvcHRpb25Ub0ZvY3VzLmZvY3VzKCk7XG4gICAgICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgICAgICAgICAgICAgIG9wdGlvblRvRm9jdXMuc2Nyb2xsSW50b1ZpZXcoeyBibG9jazogXCJuZWFyZXN0XCIgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBIYW5kbGVzIGBmb2N1c2luYCBhY3Rpb25zIGZvciB0aGUgY29tcG9uZW50LiBXaGVuIHRoZSBjb21wb25lbnQgcmVjZWl2ZXMgZm9jdXMsXG4gICAgICogdGhlIGxpc3Qgb2Ygc2VsZWN0ZWQgb3B0aW9ucyBpcyByZWZyZXNoZWQgYW5kIHRoZSBmaXJzdCBzZWxlY3RlZCBvcHRpb24gaXMgc2Nyb2xsZWRcbiAgICAgKiBpbnRvIHZpZXcuXG4gICAgICpcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBmb2N1c2luSGFuZGxlcihlKSB7XG4gICAgICAgIGlmICghdGhpcy5zaG91bGRTa2lwRm9jdXMgJiYgZS50YXJnZXQgPT09IGUuY3VycmVudFRhcmdldCkge1xuICAgICAgICAgICAgdGhpcy5zZXRTZWxlY3RlZE9wdGlvbnMoKTtcbiAgICAgICAgICAgIHRoaXMuZm9jdXNBbmRTY3JvbGxPcHRpb25JbnRvVmlldygpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc2hvdWxkU2tpcEZvY3VzID0gZmFsc2U7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIG9wdGlvbnMgd2hpY2ggbWF0Y2ggdGhlIGN1cnJlbnQgdHlwZWFoZWFkIGJ1ZmZlci5cbiAgICAgKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIGdldFR5cGVhaGVhZE1hdGNoZXMoKSB7XG4gICAgICAgIGNvbnN0IHBhdHRlcm4gPSB0aGlzLnR5cGVhaGVhZEJ1ZmZlci5yZXBsYWNlKC9bLiorXFwtP14ke30oKXxbXFxdXFxcXF0vZywgXCJcXFxcJCZcIik7XG4gICAgICAgIGNvbnN0IHJlID0gbmV3IFJlZ0V4cChgXiR7cGF0dGVybn1gLCBcImdpXCIpO1xuICAgICAgICByZXR1cm4gdGhpcy5vcHRpb25zLmZpbHRlcigobykgPT4gby50ZXh0LnRyaW0oKS5tYXRjaChyZSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBEZXRlcm1pbmVzIHRoZSBpbmRleCBvZiB0aGUgbmV4dCBvcHRpb24gd2hpY2ggaXMgc2VsZWN0YWJsZSwgaWYgYW55LlxuICAgICAqXG4gICAgICogQHBhcmFtIHByZXYgLSB0aGUgcHJldmlvdXMgc2VsZWN0ZWQgaW5kZXhcbiAgICAgKiBAcGFyYW0gbmV4dCAtIHRoZSBuZXh0IGluZGV4IHRvIHNlbGVjdFxuICAgICAqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgZ2V0U2VsZWN0YWJsZUluZGV4KHByZXYgPSB0aGlzLnNlbGVjdGVkSW5kZXgsIG5leHQpIHtcbiAgICAgICAgY29uc3QgZGlyZWN0aW9uID0gcHJldiA+IG5leHQgPyAtMSA6IHByZXYgPCBuZXh0ID8gMSA6IDA7XG4gICAgICAgIGNvbnN0IHBvdGVudGlhbERpcmVjdGlvbiA9IHByZXYgKyBkaXJlY3Rpb247XG4gICAgICAgIGxldCBuZXh0U2VsZWN0YWJsZU9wdGlvbiA9IG51bGw7XG4gICAgICAgIHN3aXRjaCAoZGlyZWN0aW9uKSB7XG4gICAgICAgICAgICBjYXNlIC0xOiB7XG4gICAgICAgICAgICAgICAgbmV4dFNlbGVjdGFibGVPcHRpb24gPSB0aGlzLm9wdGlvbnMucmVkdWNlUmlnaHQoKG5leHRTZWxlY3RhYmxlT3B0aW9uLCB0aGlzT3B0aW9uLCBpbmRleCkgPT4gIW5leHRTZWxlY3RhYmxlT3B0aW9uICYmXG4gICAgICAgICAgICAgICAgICAgICF0aGlzT3B0aW9uLmRpc2FibGVkICYmXG4gICAgICAgICAgICAgICAgICAgIGluZGV4IDwgcG90ZW50aWFsRGlyZWN0aW9uXG4gICAgICAgICAgICAgICAgICAgID8gdGhpc09wdGlvblxuICAgICAgICAgICAgICAgICAgICA6IG5leHRTZWxlY3RhYmxlT3B0aW9uLCBuZXh0U2VsZWN0YWJsZU9wdGlvbik7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXNlIDE6IHtcbiAgICAgICAgICAgICAgICBuZXh0U2VsZWN0YWJsZU9wdGlvbiA9IHRoaXMub3B0aW9ucy5yZWR1Y2UoKG5leHRTZWxlY3RhYmxlT3B0aW9uLCB0aGlzT3B0aW9uLCBpbmRleCkgPT4gIW5leHRTZWxlY3RhYmxlT3B0aW9uICYmXG4gICAgICAgICAgICAgICAgICAgICF0aGlzT3B0aW9uLmRpc2FibGVkICYmXG4gICAgICAgICAgICAgICAgICAgIGluZGV4ID4gcG90ZW50aWFsRGlyZWN0aW9uXG4gICAgICAgICAgICAgICAgICAgID8gdGhpc09wdGlvblxuICAgICAgICAgICAgICAgICAgICA6IG5leHRTZWxlY3RhYmxlT3B0aW9uLCBuZXh0U2VsZWN0YWJsZU9wdGlvbik7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMub3B0aW9ucy5pbmRleE9mKG5leHRTZWxlY3RhYmxlT3B0aW9uKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSGFuZGxlcyBleHRlcm5hbCBjaGFuZ2VzIHRvIGNoaWxkIG9wdGlvbnMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gc291cmNlIC0gdGhlIHNvdXJjZSBvYmplY3RcbiAgICAgKiBAcGFyYW0gcHJvcGVydHlOYW1lIC0gdGhlIHByb3BlcnR5XG4gICAgICpcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBoYW5kbGVDaGFuZ2Uoc291cmNlLCBwcm9wZXJ0eU5hbWUpIHtcbiAgICAgICAgc3dpdGNoIChwcm9wZXJ0eU5hbWUpIHtcbiAgICAgICAgICAgIGNhc2UgXCJzZWxlY3RlZFwiOiB7XG4gICAgICAgICAgICAgICAgaWYgKExpc3Rib3guc2xvdHRlZE9wdGlvbkZpbHRlcihzb3VyY2UpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRJbmRleCA9IHRoaXMub3B0aW9ucy5pbmRleE9mKHNvdXJjZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuc2V0U2VsZWN0ZWRPcHRpb25zKCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogTW92ZXMgZm9jdXMgdG8gYW4gb3B0aW9uIHdob3NlIGxhYmVsIG1hdGNoZXMgY2hhcmFjdGVycyB0eXBlZCBieSB0aGUgdXNlci5cbiAgICAgKiBDb25zZWN1dGl2ZSBrZXlzdHJva2VzIGFyZSBiYXRjaGVkIGludG8gYSBidWZmZXIgb2Ygc2VhcmNoIHRleHQgdXNlZFxuICAgICAqIHRvIG1hdGNoIGFnYWluc3QgdGhlIHNldCBvZiBvcHRpb25zLiAgSWYgYFRZUEVfQUhFQURfVElNRU9VVF9NU2AgcGFzc2VzXG4gICAgICogYmV0d2VlbiBjb25zZWN1dGl2ZSBrZXlzdHJva2VzLCB0aGUgc2VhcmNoIHJlc3RhcnRzLlxuICAgICAqXG4gICAgICogQHBhcmFtIGtleSAtIHRoZSBrZXkgdG8gYmUgZXZhbHVhdGVkXG4gICAgICpcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBoYW5kbGVUeXBlQWhlYWQoa2V5KSB7XG4gICAgICAgIGlmICh0aGlzLnR5cGVhaGVhZFRpbWVvdXQpIHtcbiAgICAgICAgICAgIHdpbmRvdy5jbGVhclRpbWVvdXQodGhpcy50eXBlYWhlYWRUaW1lb3V0KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnR5cGVhaGVhZFRpbWVvdXQgPSB3aW5kb3cuc2V0VGltZW91dCgoKSA9PiAodGhpcy50eXBlYWhlYWRFeHBpcmVkID0gdHJ1ZSksIExpc3Rib3guVFlQRV9BSEVBRF9USU1FT1VUX01TKTtcbiAgICAgICAgaWYgKGtleS5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy50eXBlYWhlYWRCdWZmZXIgPSBgJHt0aGlzLnR5cGVhaGVhZEV4cGlyZWQgPyBcIlwiIDogdGhpcy50eXBlYWhlYWRCdWZmZXJ9JHtrZXl9YDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSGFuZGxlcyBga2V5ZG93bmAgYWN0aW9ucyBmb3IgbGlzdGJveCBuYXZpZ2F0aW9uIGFuZCB0eXBlYWhlYWQuXG4gICAgICpcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBrZXlkb3duSGFuZGxlcihlKSB7XG4gICAgICAgIGlmICh0aGlzLmRpc2FibGVkKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNob3VsZFNraXBGb2N1cyA9IGZhbHNlO1xuICAgICAgICBjb25zdCBrZXkgPSBlLmtleTtcbiAgICAgICAgc3dpdGNoIChrZXkpIHtcbiAgICAgICAgICAgIC8vIFNlbGVjdCB0aGUgZmlyc3QgYXZhaWxhYmxlIG9wdGlvblxuICAgICAgICAgICAgY2FzZSBrZXlIb21lOiB7XG4gICAgICAgICAgICAgICAgaWYgKCFlLnNoaWZ0S2V5KSB7XG4gICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RGaXJzdE9wdGlvbigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFNlbGVjdCB0aGUgbmV4dCBzZWxlY3RhYmxlIG9wdGlvblxuICAgICAgICAgICAgY2FzZSBrZXlBcnJvd0Rvd246IHtcbiAgICAgICAgICAgICAgICBpZiAoIWUuc2hpZnRLZXkpIHtcbiAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdE5leHRPcHRpb24oKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBTZWxlY3QgdGhlIHByZXZpb3VzIHNlbGVjdGFibGUgb3B0aW9uXG4gICAgICAgICAgICBjYXNlIGtleUFycm93VXA6IHtcbiAgICAgICAgICAgICAgICBpZiAoIWUuc2hpZnRLZXkpIHtcbiAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdFByZXZpb3VzT3B0aW9uKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gU2VsZWN0IHRoZSBsYXN0IGF2YWlsYWJsZSBvcHRpb25cbiAgICAgICAgICAgIGNhc2Uga2V5RW5kOiB7XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0TGFzdE9wdGlvbigpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FzZSBrZXlUYWI6IHtcbiAgICAgICAgICAgICAgICB0aGlzLmZvY3VzQW5kU2Nyb2xsT3B0aW9uSW50b1ZpZXcoKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhc2Uga2V5RW50ZXI6XG4gICAgICAgICAgICBjYXNlIGtleUVzY2FwZToge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FzZSBrZXlTcGFjZToge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnR5cGVhaGVhZEV4cGlyZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gU2VuZCBrZXkgdG8gVHlwZWFoZWFkIGhhbmRsZXJcbiAgICAgICAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgICAgICAgICBpZiAoa2V5Lmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZVR5cGVBaGVhZChgJHtrZXl9YCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFByZXZlbnRzIGBmb2N1c2luYCBldmVudHMgZnJvbSBmaXJpbmcgYmVmb3JlIGBjbGlja2AgZXZlbnRzIHdoZW4gdGhlXG4gICAgICogZWxlbWVudCBpcyB1bmZvY3VzZWQuXG4gICAgICpcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBtb3VzZWRvd25IYW5kbGVyKGUpIHtcbiAgICAgICAgdGhpcy5zaG91bGRTa2lwRm9jdXMgPSAhdGhpcy5jb250YWlucyhkb2N1bWVudC5hY3RpdmVFbGVtZW50KTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFN3aXRjaGVzIGJldHdlZW4gc2luZ2xlLXNlbGVjdGlvbiBhbmQgbXVsdGktc2VsZWN0aW9uIG1vZGUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcHJldiAtIHRoZSBwcmV2aW91cyB2YWx1ZSBvZiB0aGUgYG11bHRpcGxlYCBhdHRyaWJ1dGVcbiAgICAgKiBAcGFyYW0gbmV4dCAtIHRoZSBuZXh0IHZhbHVlIG9mIHRoZSBgbXVsdGlwbGVgIGF0dHJpYnV0ZVxuICAgICAqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgbXVsdGlwbGVDaGFuZ2VkKHByZXYsIG5leHQpIHtcbiAgICAgICAgdGhpcy5hcmlhTXVsdGlTZWxlY3RhYmxlID0gbmV4dCA/IFwidHJ1ZVwiIDogbnVsbDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVXBkYXRlcyB0aGUgbGlzdCBvZiBzZWxlY3RlZCBvcHRpb25zIHdoZW4gdGhlIGBzZWxlY3RlZEluZGV4YCBjaGFuZ2VzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHByZXYgLSB0aGUgcHJldmlvdXMgc2VsZWN0ZWQgaW5kZXggdmFsdWVcbiAgICAgKiBAcGFyYW0gbmV4dCAtIHRoZSBjdXJyZW50IHNlbGVjdGVkIGluZGV4IHZhbHVlXG4gICAgICpcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBzZWxlY3RlZEluZGV4Q2hhbmdlZChwcmV2LCBuZXh0KSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgaWYgKCF0aGlzLmhhc1NlbGVjdGFibGVPcHRpb25zKSB7XG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkSW5kZXggPSAtMTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoKChfYSA9IHRoaXMub3B0aW9uc1t0aGlzLnNlbGVjdGVkSW5kZXhdKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuZGlzYWJsZWQpICYmIHR5cGVvZiBwcmV2ID09PSBcIm51bWJlclwiKSB7XG4gICAgICAgICAgICBjb25zdCBzZWxlY3RhYmxlSW5kZXggPSB0aGlzLmdldFNlbGVjdGFibGVJbmRleChwcmV2LCBuZXh0KTtcbiAgICAgICAgICAgIGNvbnN0IG5ld05leHQgPSBzZWxlY3RhYmxlSW5kZXggPiAtMSA/IHNlbGVjdGFibGVJbmRleCA6IHByZXY7XG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkSW5kZXggPSBuZXdOZXh0O1xuICAgICAgICAgICAgaWYgKG5leHQgPT09IG5ld05leHQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkSW5kZXhDaGFuZ2VkKG5leHQsIG5ld05leHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc2V0U2VsZWN0ZWRPcHRpb25zKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFVwZGF0ZXMgdGhlIHNlbGVjdGVkbmVzcyBvZiBlYWNoIG9wdGlvbiB3aGVuIHRoZSBsaXN0IG9mIHNlbGVjdGVkIG9wdGlvbnMgY2hhbmdlcy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBwcmV2IC0gdGhlIHByZXZpb3VzIGxpc3Qgb2Ygc2VsZWN0ZWQgb3B0aW9uc1xuICAgICAqIEBwYXJhbSBuZXh0IC0gdGhlIGN1cnJlbnQgbGlzdCBvZiBzZWxlY3RlZCBvcHRpb25zXG4gICAgICpcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBzZWxlY3RlZE9wdGlvbnNDaGFuZ2VkKHByZXYsIG5leHQpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICBjb25zdCBmaWx0ZXJlZE5leHQgPSBuZXh0LmZpbHRlcihMaXN0Ym94LnNsb3R0ZWRPcHRpb25GaWx0ZXIpO1xuICAgICAgICAoX2EgPSB0aGlzLm9wdGlvbnMpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5mb3JFYWNoKG8gPT4ge1xuICAgICAgICAgICAgY29uc3Qgbm90aWZpZXIgPSBPYnNlcnZhYmxlLmdldE5vdGlmaWVyKG8pO1xuICAgICAgICAgICAgbm90aWZpZXIudW5zdWJzY3JpYmUodGhpcywgXCJzZWxlY3RlZFwiKTtcbiAgICAgICAgICAgIG8uc2VsZWN0ZWQgPSBmaWx0ZXJlZE5leHQuaW5jbHVkZXMobyk7XG4gICAgICAgICAgICBub3RpZmllci5zdWJzY3JpYmUodGhpcywgXCJzZWxlY3RlZFwiKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE1vdmVzIGZvY3VzIHRvIHRoZSBmaXJzdCBzZWxlY3RhYmxlIG9wdGlvbi5cbiAgICAgKlxuICAgICAqIEBwdWJsaWNcbiAgICAgKi9cbiAgICBzZWxlY3RGaXJzdE9wdGlvbigpIHtcbiAgICAgICAgdmFyIF9hLCBfYjtcbiAgICAgICAgaWYgKCF0aGlzLmRpc2FibGVkKSB7XG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkSW5kZXggPSAoX2IgPSAoX2EgPSB0aGlzLm9wdGlvbnMpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5maW5kSW5kZXgobyA9PiAhby5kaXNhYmxlZCkpICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IC0xO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE1vdmVzIGZvY3VzIHRvIHRoZSBsYXN0IHNlbGVjdGFibGUgb3B0aW9uLlxuICAgICAqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgc2VsZWN0TGFzdE9wdGlvbigpIHtcbiAgICAgICAgaWYgKCF0aGlzLmRpc2FibGVkKSB7XG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkSW5kZXggPSBmaW5kTGFzdEluZGV4KHRoaXMub3B0aW9ucywgbyA9PiAhby5kaXNhYmxlZCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogTW92ZXMgZm9jdXMgdG8gdGhlIG5leHQgc2VsZWN0YWJsZSBvcHRpb24uXG4gICAgICpcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBzZWxlY3ROZXh0T3B0aW9uKCkge1xuICAgICAgICBpZiAoIXRoaXMuZGlzYWJsZWQgJiYgdGhpcy5zZWxlY3RlZEluZGV4IDwgdGhpcy5vcHRpb25zLmxlbmd0aCAtIDEpIHtcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRJbmRleCArPSAxO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE1vdmVzIGZvY3VzIHRvIHRoZSBwcmV2aW91cyBzZWxlY3RhYmxlIG9wdGlvbi5cbiAgICAgKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIHNlbGVjdFByZXZpb3VzT3B0aW9uKCkge1xuICAgICAgICBpZiAoIXRoaXMuZGlzYWJsZWQgJiYgdGhpcy5zZWxlY3RlZEluZGV4ID4gMCkge1xuICAgICAgICAgICAgdGhpcy5zZWxlY3RlZEluZGV4ID0gdGhpcy5zZWxlY3RlZEluZGV4IC0gMTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBVcGRhdGVzIHRoZSBzZWxlY3RlZCBpbmRleCB0byBtYXRjaCB0aGUgZmlyc3Qgc2VsZWN0ZWQgb3B0aW9uLlxuICAgICAqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgc2V0RGVmYXVsdFNlbGVjdGVkT3B0aW9uKCkge1xuICAgICAgICB2YXIgX2EsIF9iO1xuICAgICAgICB0aGlzLnNlbGVjdGVkSW5kZXggPSAoX2IgPSAoX2EgPSB0aGlzLm9wdGlvbnMpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5maW5kSW5kZXgoZWwgPT4gZWwuZGVmYXVsdFNlbGVjdGVkKSkgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogLTE7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldHMgYW4gb3B0aW9uIGFzIHNlbGVjdGVkIGFuZCBnaXZlcyBpdCBmb2N1cy5cbiAgICAgKlxuICAgICAqIEBwdWJsaWNcbiAgICAgKi9cbiAgICBzZXRTZWxlY3RlZE9wdGlvbnMoKSB7XG4gICAgICAgIHZhciBfYSwgX2IsIF9jO1xuICAgICAgICBpZiAoKF9hID0gdGhpcy5vcHRpb25zKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EubGVuZ3RoKSB7XG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkT3B0aW9ucyA9IFt0aGlzLm9wdGlvbnNbdGhpcy5zZWxlY3RlZEluZGV4XV07XG4gICAgICAgICAgICB0aGlzLmFyaWFBY3RpdmVEZXNjZW5kYW50ID0gKF9jID0gKF9iID0gdGhpcy5maXJzdFNlbGVjdGVkT3B0aW9uKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IuaWQpICE9PSBudWxsICYmIF9jICE9PSB2b2lkIDAgPyBfYyA6IFwiXCI7XG4gICAgICAgICAgICB0aGlzLmZvY3VzQW5kU2Nyb2xsT3B0aW9uSW50b1ZpZXcoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBVcGRhdGVzIHRoZSBsaXN0IG9mIG9wdGlvbnMgYW5kIHJlc2V0cyB0aGUgc2VsZWN0ZWQgb3B0aW9uIHdoZW4gdGhlIHNsb3R0ZWQgb3B0aW9uIGNvbnRlbnQgY2hhbmdlcy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBwcmV2IC0gdGhlIHByZXZpb3VzIGxpc3Qgb2Ygc2xvdHRlZCBvcHRpb25zXG4gICAgICogQHBhcmFtIG5leHQgLSB0aGUgY3VycmVudCBsaXN0IG9mIHNsb3R0ZWQgb3B0aW9uc1xuICAgICAqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgc2xvdHRlZE9wdGlvbnNDaGFuZ2VkKHByZXYsIG5leHQpIHtcbiAgICAgICAgdGhpcy5vcHRpb25zID0gbmV4dC5yZWR1Y2UoKG9wdGlvbnMsIGl0ZW0pID0+IHtcbiAgICAgICAgICAgIGlmIChpc0xpc3Rib3hPcHRpb24oaXRlbSkpIHtcbiAgICAgICAgICAgICAgICBvcHRpb25zLnB1c2goaXRlbSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gb3B0aW9ucztcbiAgICAgICAgfSwgW10pO1xuICAgICAgICBjb25zdCBzZXRTaXplID0gYCR7dGhpcy5vcHRpb25zLmxlbmd0aH1gO1xuICAgICAgICB0aGlzLm9wdGlvbnMuZm9yRWFjaCgob3B0aW9uLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgaWYgKCFvcHRpb24uaWQpIHtcbiAgICAgICAgICAgICAgICBvcHRpb24uaWQgPSB1bmlxdWVJZChcIm9wdGlvbi1cIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBvcHRpb24uYXJpYVBvc0luU2V0ID0gYCR7aW5kZXggKyAxfWA7XG4gICAgICAgICAgICBvcHRpb24uYXJpYVNldFNpemUgPSBzZXRTaXplO1xuICAgICAgICB9KTtcbiAgICAgICAgaWYgKHRoaXMuJGZhc3RDb250cm9sbGVyLmlzQ29ubmVjdGVkKSB7XG4gICAgICAgICAgICB0aGlzLnNldFNlbGVjdGVkT3B0aW9ucygpO1xuICAgICAgICAgICAgdGhpcy5zZXREZWZhdWx0U2VsZWN0ZWRPcHRpb24oKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBVcGRhdGVzIHRoZSBmaWx0ZXJlZCBsaXN0IG9mIG9wdGlvbnMgd2hlbiB0aGUgdHlwZWFoZWFkIGJ1ZmZlciBjaGFuZ2VzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHByZXYgLSB0aGUgcHJldmlvdXMgdHlwZWFoZWFkIGJ1ZmZlciB2YWx1ZVxuICAgICAqIEBwYXJhbSBuZXh0IC0gdGhlIGN1cnJlbnQgdHlwZWFoZWFkIGJ1ZmZlciB2YWx1ZVxuICAgICAqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgdHlwZWFoZWFkQnVmZmVyQ2hhbmdlZChwcmV2LCBuZXh0KSB7XG4gICAgICAgIGlmICh0aGlzLiRmYXN0Q29udHJvbGxlci5pc0Nvbm5lY3RlZCkge1xuICAgICAgICAgICAgY29uc3QgdHlwZWFoZWFkTWF0Y2hlcyA9IHRoaXMuZ2V0VHlwZWFoZWFkTWF0Y2hlcygpO1xuICAgICAgICAgICAgaWYgKHR5cGVhaGVhZE1hdGNoZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc2VsZWN0ZWRJbmRleCA9IHRoaXMub3B0aW9ucy5pbmRleE9mKHR5cGVhaGVhZE1hdGNoZXNbMF0pO1xuICAgICAgICAgICAgICAgIGlmIChzZWxlY3RlZEluZGV4ID4gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZEluZGV4ID0gc2VsZWN0ZWRJbmRleDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnR5cGVhaGVhZEV4cGlyZWQgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cbn1cbi8qKlxuICogQSBzdGF0aWMgZmlsdGVyIHRvIGluY2x1ZGUgb25seSBzZWxlY3RhYmxlIG9wdGlvbnMuXG4gKlxuICogQHBhcmFtIG4gLSBlbGVtZW50IHRvIGZpbHRlclxuICogQHB1YmxpY1xuICovXG5MaXN0Ym94LnNsb3R0ZWRPcHRpb25GaWx0ZXIgPSAobikgPT4gaXNMaXN0Ym94T3B0aW9uKG4pICYmICFuLmhpZGRlbjtcbi8qKlxuICogVHlwZWFoZWFkIHRpbWVvdXQgaW4gbWlsbGlzZWNvbmRzLlxuICpcbiAqIEBpbnRlcm5hbFxuICovXG5MaXN0Ym94LlRZUEVfQUhFQURfVElNRU9VVF9NUyA9IDEwMDA7XG5fX2RlY29yYXRlKFtcbiAgICBhdHRyKHsgbW9kZTogXCJib29sZWFuXCIgfSlcbl0sIExpc3Rib3gucHJvdG90eXBlLCBcImRpc2FibGVkXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBvYnNlcnZhYmxlXG5dLCBMaXN0Ym94LnByb3RvdHlwZSwgXCJzZWxlY3RlZEluZGV4XCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBvYnNlcnZhYmxlXG5dLCBMaXN0Ym94LnByb3RvdHlwZSwgXCJzZWxlY3RlZE9wdGlvbnNcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIG9ic2VydmFibGVcbl0sIExpc3Rib3gucHJvdG90eXBlLCBcInNsb3R0ZWRPcHRpb25zXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBvYnNlcnZhYmxlXG5dLCBMaXN0Ym94LnByb3RvdHlwZSwgXCJ0eXBlYWhlYWRCdWZmZXJcIiwgdm9pZCAwKTtcbi8qKlxuICogSW5jbHVkZXMgQVJJQSBzdGF0ZXMgYW5kIHByb3BlcnRpZXMgcmVsYXRpbmcgdG8gdGhlIEFSSUEgbGlzdGJveCByb2xlXG4gKlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgY2xhc3MgRGVsZWdhdGVzQVJJQUxpc3Rib3gge1xufVxuX19kZWNvcmF0ZShbXG4gICAgb2JzZXJ2YWJsZVxuXSwgRGVsZWdhdGVzQVJJQUxpc3Rib3gucHJvdG90eXBlLCBcImFyaWFBY3RpdmVEZXNjZW5kYW50XCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBvYnNlcnZhYmxlXG5dLCBEZWxlZ2F0ZXNBUklBTGlzdGJveC5wcm90b3R5cGUsIFwiYXJpYURpc2FibGVkXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBvYnNlcnZhYmxlXG5dLCBEZWxlZ2F0ZXNBUklBTGlzdGJveC5wcm90b3R5cGUsIFwiYXJpYUV4cGFuZGVkXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBvYnNlcnZhYmxlXG5dLCBEZWxlZ2F0ZXNBUklBTGlzdGJveC5wcm90b3R5cGUsIFwiYXJpYU11bHRpU2VsZWN0YWJsZVwiLCB2b2lkIDApO1xuYXBwbHlNaXhpbnMoRGVsZWdhdGVzQVJJQUxpc3Rib3gsIEFSSUFHbG9iYWxTdGF0ZXNBbmRQcm9wZXJ0aWVzKTtcbmFwcGx5TWl4aW5zKExpc3Rib3gsIERlbGVnYXRlc0FSSUFMaXN0Ym94KTtcbiIsImltcG9ydCB7IGh0bWwsIHNsb3R0ZWQgfSBmcm9tIFwiQG1pY3Jvc29mdC9mYXN0LWVsZW1lbnRcIjtcbmltcG9ydCB7IExpc3Rib3hFbGVtZW50IH0gZnJvbSBcIi4vbGlzdGJveC5lbGVtZW50LmpzXCI7XG4vKipcbiAqIFRoZSB0ZW1wbGF0ZSBmb3IgdGhlIHtAbGluayBAbWljcm9zb2Z0L2Zhc3QtZm91bmRhdGlvbiMoTGlzdGJveDpjbGFzcyl9IGNvbXBvbmVudC5cbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGNvbnN0IGxpc3Rib3hUZW1wbGF0ZSA9IChjb250ZXh0LCBkZWZpbml0aW9uKSA9PiBodG1sIGBcbiAgICA8dGVtcGxhdGVcbiAgICAgICAgYXJpYS1hY3RpdmVkZXNjZW5kYW50PVwiJHt4ID0+IHguYXJpYUFjdGl2ZURlc2NlbmRhbnR9XCJcbiAgICAgICAgYXJpYS1tdWx0aXNlbGVjdGFibGU9XCIke3ggPT4geC5hcmlhTXVsdGlTZWxlY3RhYmxlfVwiXG4gICAgICAgIGNsYXNzPVwibGlzdGJveFwiXG4gICAgICAgIHJvbGU9XCJsaXN0Ym94XCJcbiAgICAgICAgdGFiaW5kZXg9XCIke3ggPT4gKCF4LmRpc2FibGVkID8gXCIwXCIgOiBudWxsKX1cIlxuICAgICAgICBAY2xpY2s9XCIkeyh4LCBjKSA9PiB4LmNsaWNrSGFuZGxlcihjLmV2ZW50KX1cIlxuICAgICAgICBAZm9jdXNpbj1cIiR7KHgsIGMpID0+IHguZm9jdXNpbkhhbmRsZXIoYy5ldmVudCl9XCJcbiAgICAgICAgQGtleWRvd249XCIkeyh4LCBjKSA9PiB4LmtleWRvd25IYW5kbGVyKGMuZXZlbnQpfVwiXG4gICAgICAgIEBtb3VzZWRvd249XCIkeyh4LCBjKSA9PiB4Lm1vdXNlZG93bkhhbmRsZXIoYy5ldmVudCl9XCJcbiAgICA+XG4gICAgICAgIDxzbG90XG4gICAgICAgICAgICAke3Nsb3R0ZWQoe1xuICAgIGZpbHRlcjogTGlzdGJveEVsZW1lbnQuc2xvdHRlZE9wdGlvbkZpbHRlcixcbiAgICBmbGF0dGVuOiB0cnVlLFxuICAgIHByb3BlcnR5OiBcInNsb3R0ZWRPcHRpb25zXCIsXG59KX1cbiAgICAgICAgPjwvc2xvdD5cbiAgICA8L3RlbXBsYXRlPlxuYDtcbiIsImV4cG9ydCAqIGZyb20gXCIuL21lbnUtaXRlbS50ZW1wbGF0ZS5qc1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vbWVudS1pdGVtLmpzXCI7XG4iLCJpbXBvcnQgeyBfX2RlY29yYXRlIH0gZnJvbSBcInRzbGliXCI7XG5pbXBvcnQgeyBhdHRyLCBET00sIG9ic2VydmFibGUgfSBmcm9tIFwiQG1pY3Jvc29mdC9mYXN0LWVsZW1lbnRcIjtcbmltcG9ydCB7IERpcmVjdGlvbiwga2V5QXJyb3dMZWZ0LCBrZXlBcnJvd1JpZ2h0LCBrZXlFbnRlciwga2V5U3BhY2UsIH0gZnJvbSBcIkBtaWNyb3NvZnQvZmFzdC13ZWItdXRpbGl0aWVzXCI7XG5pbXBvcnQgeyBGb3VuZGF0aW9uRWxlbWVudCwgfSBmcm9tIFwiLi4vZm91bmRhdGlvbi1lbGVtZW50L2ZvdW5kYXRpb24tZWxlbWVudC5qc1wiO1xuaW1wb3J0IHsgU3RhcnRFbmQgfSBmcm9tIFwiLi4vcGF0dGVybnMvc3RhcnQtZW5kLmpzXCI7XG5pbXBvcnQgeyBnZXREaXJlY3Rpb24gfSBmcm9tIFwiLi4vdXRpbGl0aWVzL2RpcmVjdGlvbi5qc1wiO1xuaW1wb3J0IHsgYXBwbHlNaXhpbnMgfSBmcm9tIFwiLi4vdXRpbGl0aWVzL2FwcGx5LW1peGlucy5qc1wiO1xuaW1wb3J0IHsgTWVudUl0ZW1Sb2xlLCByb2xlRm9yTWVudUl0ZW0gfSBmcm9tIFwiLi9tZW51LWl0ZW0ub3B0aW9ucy5qc1wiO1xuZXhwb3J0IHsgTWVudUl0ZW1Sb2xlLCByb2xlRm9yTWVudUl0ZW0gfTtcbi8qKlxuICogQSBTd2l0Y2ggQ3VzdG9tIEhUTUwgRWxlbWVudC5cbiAqIEltcGxlbWVudHMge0BsaW5rIGh0dHBzOi8vd3d3LnczLm9yZy9UUi93YWktYXJpYS0xLjEvI21lbnVpdGVtIHwgQVJJQSBtZW51aXRlbSB9LCB7QGxpbmsgaHR0cHM6Ly93d3cudzMub3JnL1RSL3dhaS1hcmlhLTEuMS8jbWVudWl0ZW1jaGVja2JveCB8IEFSSUEgbWVudWl0ZW1jaGVja2JveH0sIG9yIHtAbGluayBodHRwczovL3d3dy53My5vcmcvVFIvd2FpLWFyaWEtMS4xLyNtZW51aXRlbXJhZGlvIHwgQVJJQSBtZW51aXRlbXJhZGlvIH0uXG4gKlxuICogQHNsb3QgY2hlY2tlZC1pbmRpY2F0b3IgLSBUaGUgY2hlY2tlZCBpbmRpY2F0b3JcbiAqIEBzbG90IHJhZGlvLWluZGljYXRvciAtIFRoZSByYWRpbyBpbmRpY2F0b3JcbiAqIEBzbG90IHN0YXJ0IC0gQ29udGVudCB3aGljaCBjYW4gYmUgcHJvdmlkZWQgYmVmb3JlIHRoZSBtZW51IGl0ZW0gY29udGVudFxuICogQHNsb3QgZW5kIC0gQ29udGVudCB3aGljaCBjYW4gYmUgcHJvdmlkZWQgYWZ0ZXIgdGhlIG1lbnUgaXRlbSBjb250ZW50XG4gKiBAc2xvdCAtIFRoZSBkZWZhdWx0IHNsb3QgZm9yIG1lbnUgaXRlbSBjb250ZW50XG4gKiBAc2xvdCBleHBhbmQtY29sbGFwc2UtaW5kaWNhdG9yIC0gVGhlIGV4cGFuZC9jb2xsYXBzZSBpbmRpY2F0b3JcbiAqIEBzbG90IHN1Ym1lbnUgLSBVc2VkIHRvIG5lc3QgbWVudSdzIHdpdGhpbiBtZW51IGl0ZW1zXG4gKiBAY3NzcGFydCBpbnB1dC1jb250YWluZXIgLSBUaGUgZWxlbWVudCByZXByZXNlbnRpbmcgdGhlIHZpc3VhbCBjaGVja2VkIG9yIHJhZGlvIGluZGljYXRvclxuICogQGNzc3BhcnQgY2hlY2tib3ggLSBUaGUgZWxlbWVudCB3cmFwcGluZyB0aGUgYG1lbnVpdGVtY2hlY2tib3hgIGluZGljYXRvclxuICogQGNzc3BhcnQgcmFkaW8gLSBUaGUgZWxlbWVudCB3cmFwcGluZyB0aGUgYG1lbnVpdGVtcmFkaW9gIGluZGljYXRvclxuICogQGNzc3BhcnQgY29udGVudCAtIFRoZSBlbGVtZW50IHdyYXBwaW5nIHRoZSBtZW51IGl0ZW0gY29udGVudFxuICogQGNzc3BhcnQgZXhwYW5kLWNvbGxhcHNlLWdseXBoLWNvbnRhaW5lciAtIFRoZSBlbGVtZW50IHdyYXBwaW5nIHRoZSBleHBhbmQgY29sbGFwc2UgZWxlbWVudFxuICogQGNzc3BhcnQgZXhwYW5kLWNvbGxhcHNlIC0gVGhlIGV4cGFuZC9jb2xsYXBzZSBlbGVtZW50XG4gKiBAY3NzcGFydCBzdWJtZW51LXJlZ2lvbiAtIFRoZSBjb250YWluZXIgZm9yIHRoZSBzdWJtZW51LCB1c2VkIGZvciBwb3NpdGlvbmluZ1xuICogQGZpcmVzIGV4cGFuZGVkLWNoYW5nZSAtIEZpcmVzIGEgY3VzdG9tICdleHBhbmRlZC1jaGFuZ2UnIGV2ZW50IHdoZW4gdGhlIGV4cGFuZGVkIHN0YXRlIGNoYW5nZXNcbiAqIEBmaXJlcyBjaGFuZ2UgLSBGaXJlcyBhIGN1c3RvbSAnY2hhbmdlJyBldmVudCB3aGVuIGEgbm9uLXN1Ym1lbnUgaXRlbSB3aXRoIGEgcm9sZSBvZiBgbWVudWl0ZW1jaGVja2JveGAsIGBtZW51aXRlbXJhZGlvYCwgb3IgYG1lbnVpdGVtYCBpcyBpbnZva2VkXG4gKlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgY2xhc3MgTWVudUl0ZW0gZXh0ZW5kcyBGb3VuZGF0aW9uRWxlbWVudCB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgcm9sZSBvZiB0aGUgZWxlbWVudC5cbiAgICAgICAgICpcbiAgICAgICAgICogQHB1YmxpY1xuICAgICAgICAgKiBAcmVtYXJrc1xuICAgICAgICAgKiBIVE1MIEF0dHJpYnV0ZTogcm9sZVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5yb2xlID0gTWVudUl0ZW1Sb2xlLm1lbnVpdGVtO1xuICAgICAgICAvKipcbiAgICAgICAgICogQGludGVybmFsXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmhhc1N1Ym1lbnUgPSBmYWxzZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRyYWNrIGN1cnJlbnQgZGlyZWN0aW9uIHRvIHBhc3MgdG8gdGhlIGFuY2hvcmVkIHJlZ2lvblxuICAgICAgICAgKlxuICAgICAgICAgKiBAaW50ZXJuYWxcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuY3VycmVudERpcmVjdGlvbiA9IERpcmVjdGlvbi5sdHI7XG4gICAgICAgIHRoaXMuZm9jdXNTdWJtZW51T25Mb2FkID0gZmFsc2U7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAaW50ZXJuYWxcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuaGFuZGxlTWVudUl0ZW1LZXlEb3duID0gKGUpID0+IHtcbiAgICAgICAgICAgIGlmIChlLmRlZmF1bHRQcmV2ZW50ZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzd2l0Y2ggKGUua2V5KSB7XG4gICAgICAgICAgICAgICAgY2FzZSBrZXlFbnRlcjpcbiAgICAgICAgICAgICAgICBjYXNlIGtleVNwYWNlOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLmludm9rZSgpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgY2FzZSBrZXlBcnJvd1JpZ2h0OlxuICAgICAgICAgICAgICAgICAgICAvL29wZW4vZm9jdXMgb24gc3VibWVudVxuICAgICAgICAgICAgICAgICAgICB0aGlzLmV4cGFuZEFuZEZvY3VzKCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICBjYXNlIGtleUFycm93TGVmdDpcbiAgICAgICAgICAgICAgICAgICAgLy9jbG9zZSBzdWJtZW51XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmV4cGFuZGVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmV4cGFuZGVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmZvY3VzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9O1xuICAgICAgICAvKipcbiAgICAgICAgICogQGludGVybmFsXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmhhbmRsZU1lbnVJdGVtQ2xpY2sgPSAoZSkgPT4ge1xuICAgICAgICAgICAgaWYgKGUuZGVmYXVsdFByZXZlbnRlZCB8fCB0aGlzLmRpc2FibGVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5pbnZva2UoKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBpbnRlcm5hbFxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5zdWJtZW51TG9hZGVkID0gKCkgPT4ge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmZvY3VzU3VibWVudU9uTG9hZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZm9jdXNTdWJtZW51T25Mb2FkID0gZmFsc2U7XG4gICAgICAgICAgICBpZiAodGhpcy5oYXNTdWJtZW51KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zdWJtZW51LmZvY3VzKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRBdHRyaWJ1dGUoXCJ0YWJpbmRleFwiLCBcIi0xXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICAvKipcbiAgICAgICAgICogQGludGVybmFsXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmhhbmRsZU1vdXNlT3ZlciA9IChlKSA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy5kaXNhYmxlZCB8fCAhdGhpcy5oYXNTdWJtZW51IHx8IHRoaXMuZXhwYW5kZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmV4cGFuZGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBpbnRlcm5hbFxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5oYW5kbGVNb3VzZU91dCA9IChlKSA9PiB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuZXhwYW5kZWQgfHwgdGhpcy5jb250YWlucyhkb2N1bWVudC5hY3RpdmVFbGVtZW50KSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZXhwYW5kZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBpbnRlcm5hbFxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5leHBhbmRBbmRGb2N1cyA9ICgpID0+IHtcbiAgICAgICAgICAgIGlmICghdGhpcy5oYXNTdWJtZW51KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5mb2N1c1N1Ym1lbnVPbkxvYWQgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5leHBhbmRlZCA9IHRydWU7XG4gICAgICAgIH07XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAaW50ZXJuYWxcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuaW52b2tlID0gKCkgPT4ge1xuICAgICAgICAgICAgaWYgKHRoaXMuZGlzYWJsZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzd2l0Y2ggKHRoaXMucm9sZSkge1xuICAgICAgICAgICAgICAgIGNhc2UgTWVudUl0ZW1Sb2xlLm1lbnVpdGVtY2hlY2tib3g6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2hlY2tlZCA9ICF0aGlzLmNoZWNrZWQ7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgTWVudUl0ZW1Sb2xlLm1lbnVpdGVtOlxuICAgICAgICAgICAgICAgICAgICAvLyB1cGRhdGUgc3VibWVudVxuICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVN1Ym1lbnUoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuaGFzU3VibWVudSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5leHBhbmRBbmRGb2N1cygpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kZW1pdChcImNoYW5nZVwiKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIE1lbnVJdGVtUm9sZS5tZW51aXRlbXJhZGlvOlxuICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuY2hlY2tlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGVja2VkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEdldHMgdGhlIHN1Ym1lbnUgZWxlbWVudCBpZiBhbnlcbiAgICAgICAgICpcbiAgICAgICAgICogQGludGVybmFsXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnVwZGF0ZVN1Ym1lbnUgPSAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnN1Ym1lbnUgPSB0aGlzLmRvbUNoaWxkcmVuKCkuZmluZCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiBlbGVtZW50LmdldEF0dHJpYnV0ZShcInJvbGVcIikgPT09IFwibWVudVwiO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLmhhc1N1Ym1lbnUgPSB0aGlzLnN1Ym1lbnUgPT09IHVuZGVmaW5lZCA/IGZhbHNlIDogdHJ1ZTtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgZXhwYW5kZWRDaGFuZ2VkKG9sZFZhbHVlKSB7XG4gICAgICAgIGlmICh0aGlzLiRmYXN0Q29udHJvbGxlci5pc0Nvbm5lY3RlZCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuc3VibWVudSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuZXhwYW5kZWQgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zdWJtZW51LmNvbGxhcHNlRXhwYW5kZWRJdGVtKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnREaXJlY3Rpb24gPSBnZXREaXJlY3Rpb24odGhpcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLiRlbWl0KFwiZXhwYW5kZWQtY2hhbmdlXCIsIHRoaXMsIHsgYnViYmxlczogZmFsc2UgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY2hlY2tlZENoYW5nZWQob2xkVmFsdWUsIG5ld1ZhbHVlKSB7XG4gICAgICAgIGlmICh0aGlzLiRmYXN0Q29udHJvbGxlci5pc0Nvbm5lY3RlZCkge1xuICAgICAgICAgICAgdGhpcy4kZW1pdChcImNoYW5nZVwiKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICAgICAgc3VwZXIuY29ubmVjdGVkQ2FsbGJhY2soKTtcbiAgICAgICAgRE9NLnF1ZXVlVXBkYXRlKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlU3VibWVudSgpO1xuICAgICAgICB9KTtcbiAgICAgICAgaWYgKCF0aGlzLnN0YXJ0Q29sdW1uQ291bnQpIHtcbiAgICAgICAgICAgIHRoaXMuc3RhcnRDb2x1bW5Db3VudCA9IDE7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5vYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKHRoaXMudXBkYXRlU3VibWVudSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIGRpc2Nvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgICAgICBzdXBlci5kaXNjb25uZWN0ZWRDYWxsYmFjaygpO1xuICAgICAgICB0aGlzLnN1Ym1lbnUgPSB1bmRlZmluZWQ7XG4gICAgICAgIGlmICh0aGlzLm9ic2VydmVyICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRoaXMub2JzZXJ2ZXIuZGlzY29ubmVjdCgpO1xuICAgICAgICAgICAgdGhpcy5vYnNlcnZlciA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBnZXQgYW4gYXJyYXkgb2YgdmFsaWQgRE9NIGNoaWxkcmVuXG4gICAgICovXG4gICAgZG9tQ2hpbGRyZW4oKSB7XG4gICAgICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMuY2hpbGRyZW4pLmZpbHRlcihjaGlsZCA9PiAhY2hpbGQuaGFzQXR0cmlidXRlKFwiaGlkZGVuXCIpKTtcbiAgICB9XG59XG5fX2RlY29yYXRlKFtcbiAgICBhdHRyKHsgbW9kZTogXCJib29sZWFuXCIgfSlcbl0sIE1lbnVJdGVtLnByb3RvdHlwZSwgXCJkaXNhYmxlZFwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgYXR0cih7IG1vZGU6IFwiYm9vbGVhblwiIH0pXG5dLCBNZW51SXRlbS5wcm90b3R5cGUsIFwiZXhwYW5kZWRcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIG9ic2VydmFibGVcbl0sIE1lbnVJdGVtLnByb3RvdHlwZSwgXCJzdGFydENvbHVtbkNvdW50XCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBhdHRyXG5dLCBNZW51SXRlbS5wcm90b3R5cGUsIFwicm9sZVwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgYXR0cih7IG1vZGU6IFwiYm9vbGVhblwiIH0pXG5dLCBNZW51SXRlbS5wcm90b3R5cGUsIFwiY2hlY2tlZFwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgb2JzZXJ2YWJsZVxuXSwgTWVudUl0ZW0ucHJvdG90eXBlLCBcInN1Ym1lbnVSZWdpb25cIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIG9ic2VydmFibGVcbl0sIE1lbnVJdGVtLnByb3RvdHlwZSwgXCJoYXNTdWJtZW51XCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBvYnNlcnZhYmxlXG5dLCBNZW51SXRlbS5wcm90b3R5cGUsIFwiY3VycmVudERpcmVjdGlvblwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgb2JzZXJ2YWJsZVxuXSwgTWVudUl0ZW0ucHJvdG90eXBlLCBcInN1Ym1lbnVcIiwgdm9pZCAwKTtcbmFwcGx5TWl4aW5zKE1lbnVJdGVtLCBTdGFydEVuZCk7XG4iLCIvKipcbiAqIE1lbnUgaXRlbXMgcm9sZXMuXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjb25zdCBNZW51SXRlbVJvbGUgPSB7XG4gICAgLyoqXG4gICAgICogVGhlIG1lbnUgaXRlbSBoYXMgYSBcIm1lbnVpdGVtXCIgcm9sZVxuICAgICAqL1xuICAgIG1lbnVpdGVtOiBcIm1lbnVpdGVtXCIsXG4gICAgLyoqXG4gICAgICogVGhlIG1lbnUgaXRlbSBoYXMgYSBcIm1lbnVpdGVtY2hlY2tib3hcIiByb2xlXG4gICAgICovXG4gICAgbWVudWl0ZW1jaGVja2JveDogXCJtZW51aXRlbWNoZWNrYm94XCIsXG4gICAgLyoqXG4gICAgICogVGhlIG1lbnUgaXRlbSBoYXMgYSBcIm1lbnVpdGVtcmFkaW9cIiByb2xlXG4gICAgICovXG4gICAgbWVudWl0ZW1yYWRpbzogXCJtZW51aXRlbXJhZGlvXCIsXG59O1xuLyoqXG4gKiBAaW50ZXJuYWxcbiAqL1xuZXhwb3J0IGNvbnN0IHJvbGVGb3JNZW51SXRlbSA9IHtcbiAgICBbTWVudUl0ZW1Sb2xlLm1lbnVpdGVtXTogXCJtZW51aXRlbVwiLFxuICAgIFtNZW51SXRlbVJvbGUubWVudWl0ZW1jaGVja2JveF06IFwibWVudWl0ZW1jaGVja2JveFwiLFxuICAgIFtNZW51SXRlbVJvbGUubWVudWl0ZW1yYWRpb106IFwibWVudWl0ZW1yYWRpb1wiLFxufTtcbiIsImltcG9ydCB7IGh0bWwsIHJlZiwgd2hlbiB9IGZyb20gXCJAbWljcm9zb2Z0L2Zhc3QtZWxlbWVudFwiO1xuaW1wb3J0IHsgQW5jaG9yZWRSZWdpb24gfSBmcm9tIFwiLi4vYW5jaG9yZWQtcmVnaW9uL2FuY2hvcmVkLXJlZ2lvbi5qc1wiO1xuaW1wb3J0IHsgZW5kU2xvdFRlbXBsYXRlLCBzdGFydFNsb3RUZW1wbGF0ZSB9IGZyb20gXCIuLi9wYXR0ZXJucy9zdGFydC1lbmQuanNcIjtcbmltcG9ydCB7IE1lbnVJdGVtUm9sZSB9IGZyb20gXCIuL21lbnUtaXRlbS5qc1wiO1xuLyoqXG4gKiBHZW5lcmF0ZXMgYSB0ZW1wbGF0ZSBmb3IgdGhlIHtAbGluayBAbWljcm9zb2Z0L2Zhc3QtZm91bmRhdGlvbiMoTWVudUl0ZW06Y2xhc3MpfSBjb21wb25lbnQgdXNpbmdcbiAqIHRoZSBwcm92aWRlZCBwcmVmaXguXG4gKlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgY29uc3QgbWVudUl0ZW1UZW1wbGF0ZSA9IChjb250ZXh0LCBkZWZpbml0aW9uKSA9PiBodG1sIGBcbiAgICA8dGVtcGxhdGVcbiAgICAgICAgcm9sZT1cIiR7eCA9PiB4LnJvbGV9XCJcbiAgICAgICAgYXJpYS1oYXNwb3B1cD1cIiR7eCA9PiAoeC5oYXNTdWJtZW51ID8gXCJtZW51XCIgOiB2b2lkIDApfVwiXG4gICAgICAgIGFyaWEtY2hlY2tlZD1cIiR7eCA9PiAoeC5yb2xlICE9PSBNZW51SXRlbVJvbGUubWVudWl0ZW0gPyB4LmNoZWNrZWQgOiB2b2lkIDApfVwiXG4gICAgICAgIGFyaWEtZGlzYWJsZWQ9XCIke3ggPT4geC5kaXNhYmxlZH1cIlxuICAgICAgICBhcmlhLWV4cGFuZGVkPVwiJHt4ID0+IHguZXhwYW5kZWR9XCJcbiAgICAgICAgQGtleWRvd249XCIkeyh4LCBjKSA9PiB4LmhhbmRsZU1lbnVJdGVtS2V5RG93bihjLmV2ZW50KX1cIlxuICAgICAgICBAY2xpY2s9XCIkeyh4LCBjKSA9PiB4LmhhbmRsZU1lbnVJdGVtQ2xpY2soYy5ldmVudCl9XCJcbiAgICAgICAgQG1vdXNlb3Zlcj1cIiR7KHgsIGMpID0+IHguaGFuZGxlTW91c2VPdmVyKGMuZXZlbnQpfVwiXG4gICAgICAgIEBtb3VzZW91dD1cIiR7KHgsIGMpID0+IHguaGFuZGxlTW91c2VPdXQoYy5ldmVudCl9XCJcbiAgICAgICAgY2xhc3M9XCIke3ggPT4gKHguZGlzYWJsZWQgPyBcImRpc2FibGVkXCIgOiBcIlwiKX0gJHt4ID0+IHguZXhwYW5kZWQgPyBcImV4cGFuZGVkXCIgOiBcIlwifSAke3ggPT4gYGluZGVudC0ke3guc3RhcnRDb2x1bW5Db3VudH1gfVwiXG4gICAgPlxuICAgICAgICAgICAgJHt3aGVuKHggPT4geC5yb2xlID09PSBNZW51SXRlbVJvbGUubWVudWl0ZW1jaGVja2JveCwgaHRtbCBgXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgcGFydD1cImlucHV0LWNvbnRhaW5lclwiIGNsYXNzPVwiaW5wdXQtY29udGFpbmVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBwYXJ0PVwiY2hlY2tib3hcIiBjbGFzcz1cImNoZWNrYm94XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNsb3QgbmFtZT1cImNoZWNrYm94LWluZGljYXRvclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAke2RlZmluaXRpb24uY2hlY2tib3hJbmRpY2F0b3IgfHwgXCJcIn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3Nsb3Q+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIGApfVxuICAgICAgICAgICAgJHt3aGVuKHggPT4geC5yb2xlID09PSBNZW51SXRlbVJvbGUubWVudWl0ZW1yYWRpbywgaHRtbCBgXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgcGFydD1cImlucHV0LWNvbnRhaW5lclwiIGNsYXNzPVwiaW5wdXQtY29udGFpbmVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBwYXJ0PVwicmFkaW9cIiBjbGFzcz1cInJhZGlvXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNsb3QgbmFtZT1cInJhZGlvLWluZGljYXRvclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAke2RlZmluaXRpb24ucmFkaW9JbmRpY2F0b3IgfHwgXCJcIn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3Nsb3Q+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIGApfVxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgJHtzdGFydFNsb3RUZW1wbGF0ZShjb250ZXh0LCBkZWZpbml0aW9uKX1cbiAgICAgICAgPHNwYW4gY2xhc3M9XCJjb250ZW50XCIgcGFydD1cImNvbnRlbnRcIj5cbiAgICAgICAgICAgIDxzbG90Pjwvc2xvdD5cbiAgICAgICAgPC9zcGFuPlxuICAgICAgICAke2VuZFNsb3RUZW1wbGF0ZShjb250ZXh0LCBkZWZpbml0aW9uKX1cbiAgICAgICAgJHt3aGVuKHggPT4geC5oYXNTdWJtZW51LCBodG1sIGBcbiAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgIHBhcnQ9XCJleHBhbmQtY29sbGFwc2UtZ2x5cGgtY29udGFpbmVyXCJcbiAgICAgICAgICAgICAgICAgICAgY2xhc3M9XCJleHBhbmQtY29sbGFwc2UtZ2x5cGgtY29udGFpbmVyXCJcbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIHBhcnQ9XCJleHBhbmQtY29sbGFwc2VcIiBjbGFzcz1cImV4cGFuZC1jb2xsYXBzZVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHNsb3QgbmFtZT1cImV4cGFuZC1jb2xsYXBzZS1pbmRpY2F0b3JcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAke2RlZmluaXRpb24uZXhwYW5kQ29sbGFwc2VHbHlwaCB8fCBcIlwifVxuICAgICAgICAgICAgICAgICAgICAgICAgPC9zbG90PlxuICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICBgKX1cbiAgICAgICAgJHt3aGVuKHggPT4geC5leHBhbmRlZCwgaHRtbCBgXG4gICAgICAgICAgICAgICAgPCR7Y29udGV4dC50YWdGb3IoQW5jaG9yZWRSZWdpb24pfVxuICAgICAgICAgICAgICAgICAgICA6YW5jaG9yRWxlbWVudD1cIiR7eCA9PiB4fVwiXG4gICAgICAgICAgICAgICAgICAgIHZlcnRpY2FsLXBvc2l0aW9uaW5nLW1vZGU9XCJkeW5hbWljXCJcbiAgICAgICAgICAgICAgICAgICAgdmVydGljYWwtZGVmYXVsdC1wb3NpdGlvbj1cImJvdHRvbVwiXG4gICAgICAgICAgICAgICAgICAgIHZlcnRpY2FsLWluc2V0PVwidHJ1ZVwiXG4gICAgICAgICAgICAgICAgICAgIGhvcml6b250YWwtcG9zaXRpb25pbmctbW9kZT1cImR5bmFtaWNcIlxuICAgICAgICAgICAgICAgICAgICBob3Jpem9udGFsLWRlZmF1bHQtcG9zaXRpb249XCJlbmRcIlxuICAgICAgICAgICAgICAgICAgICBjbGFzcz1cInN1Ym1lbnUtcmVnaW9uXCJcbiAgICAgICAgICAgICAgICAgICAgZGlyPVwiJHt4ID0+IHguY3VycmVudERpcmVjdGlvbn1cIlxuICAgICAgICAgICAgICAgICAgICBAbG9hZGVkPVwiJHt4ID0+IHguc3VibWVudUxvYWRlZCgpfVwiXG4gICAgICAgICAgICAgICAgICAgICR7cmVmKFwic3VibWVudVJlZ2lvblwiKX1cbiAgICAgICAgICAgICAgICAgICAgcGFydD1cInN1Ym1lbnUtcmVnaW9uXCJcbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIDxzbG90IG5hbWU9XCJzdWJtZW51XCI+PC9zbG90PlxuICAgICAgICAgICAgICAgIDwvJHtjb250ZXh0LnRhZ0ZvcihBbmNob3JlZFJlZ2lvbil9PlxuICAgICAgICAgICAgYCl9XG4gICAgPC90ZW1wbGF0ZT5cbmA7XG4iLCJleHBvcnQgKiBmcm9tIFwiLi9tZW51LnRlbXBsYXRlLmpzXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9tZW51LmpzXCI7XG4iLCJpbXBvcnQgeyBfX2RlY29yYXRlIH0gZnJvbSBcInRzbGliXCI7XG5pbXBvcnQgeyBET00sIG9ic2VydmFibGUgfSBmcm9tIFwiQG1pY3Jvc29mdC9mYXN0LWVsZW1lbnRcIjtcbmltcG9ydCB7IGlzSFRNTEVsZW1lbnQsIGtleUFycm93RG93biwga2V5QXJyb3dVcCwga2V5RW5kLCBrZXlIb21lLCB9IGZyb20gXCJAbWljcm9zb2Z0L2Zhc3Qtd2ViLXV0aWxpdGllc1wiO1xuaW1wb3J0IHsgTWVudUl0ZW0sIE1lbnVJdGVtUm9sZSwgcm9sZUZvck1lbnVJdGVtLCB9IGZyb20gXCIuLi9tZW51LWl0ZW0vaW5kZXguanNcIjtcbmltcG9ydCB7IEZvdW5kYXRpb25FbGVtZW50IH0gZnJvbSBcIi4uL2ZvdW5kYXRpb24tZWxlbWVudC9mb3VuZGF0aW9uLWVsZW1lbnQuanNcIjtcbi8qKlxuICogQSBNZW51IEN1c3RvbSBIVE1MIEVsZW1lbnQuXG4gKiBJbXBsZW1lbnRzIHRoZSB7QGxpbmsgaHR0cHM6Ly93d3cudzMub3JnL1RSL3dhaS1hcmlhLTEuMS8jbWVudSB8IEFSSUEgbWVudSB9LlxuICpcbiAqIEBzbG90IC0gVGhlIGRlZmF1bHQgc2xvdCBmb3IgdGhlIG1lbnUgaXRlbXNcbiAqXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjbGFzcyBNZW51IGV4dGVuZHMgRm91bmRhdGlvbkVsZW1lbnQge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlciguLi5hcmd1bWVudHMpO1xuICAgICAgICB0aGlzLmV4cGFuZGVkSXRlbSA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgaW5kZXggb2YgdGhlIGZvY3VzYWJsZSBlbGVtZW50IGluIHRoZSBpdGVtcyBhcnJheVxuICAgICAgICAgKiBkZWZhdWx0cyB0byAtMVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5mb2N1c0luZGV4ID0gLTE7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAaW50ZXJuYWxcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuaXNOZXN0ZWRNZW51ID0gKCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuICh0aGlzLnBhcmVudEVsZW1lbnQgIT09IG51bGwgJiZcbiAgICAgICAgICAgICAgICBpc0hUTUxFbGVtZW50KHRoaXMucGFyZW50RWxlbWVudCkgJiZcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudEVsZW1lbnQuZ2V0QXR0cmlidXRlKFwicm9sZVwiKSA9PT0gXCJtZW51aXRlbVwiKTtcbiAgICAgICAgfTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIGlmIGZvY3VzIGlzIG1vdmluZyBvdXQgb2YgdGhlIG1lbnUsIHJlc2V0IHRvIGEgc3RhYmxlIGluaXRpYWwgc3RhdGVcbiAgICAgICAgICogQGludGVybmFsXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmhhbmRsZUZvY3VzT3V0ID0gKGUpID0+IHtcbiAgICAgICAgICAgIGlmICghdGhpcy5jb250YWlucyhlLnJlbGF0ZWRUYXJnZXQpICYmIHRoaXMubWVudUl0ZW1zICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbGxhcHNlRXhwYW5kZWRJdGVtKCk7XG4gICAgICAgICAgICAgICAgLy8gZmluZCBvdXIgZmlyc3QgZm9jdXNhYmxlIGVsZW1lbnRcbiAgICAgICAgICAgICAgICBjb25zdCBmb2N1c0luZGV4ID0gdGhpcy5tZW51SXRlbXMuZmluZEluZGV4KHRoaXMuaXNGb2N1c2FibGVFbGVtZW50KTtcbiAgICAgICAgICAgICAgICAvLyBzZXQgdGhlIGN1cnJlbnQgZm9jdXMgaW5kZXgncyB0YWJpbmRleCB0byAtMVxuICAgICAgICAgICAgICAgIHRoaXMubWVudUl0ZW1zW3RoaXMuZm9jdXNJbmRleF0uc2V0QXR0cmlidXRlKFwidGFiaW5kZXhcIiwgXCItMVwiKTtcbiAgICAgICAgICAgICAgICAvLyBzZXQgdGhlIGZpcnN0IGZvY3VzYWJsZSBlbGVtZW50IHRhYmluZGV4IHRvIDBcbiAgICAgICAgICAgICAgICB0aGlzLm1lbnVJdGVtc1tmb2N1c0luZGV4XS5zZXRBdHRyaWJ1dGUoXCJ0YWJpbmRleFwiLCBcIjBcIik7XG4gICAgICAgICAgICAgICAgLy8gc2V0IHRoZSBmb2N1cyBpbmRleFxuICAgICAgICAgICAgICAgIHRoaXMuZm9jdXNJbmRleCA9IGZvY3VzSW5kZXg7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuaGFuZGxlSXRlbUZvY3VzID0gKGUpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHRhcmdldEl0ZW0gPSBlLnRhcmdldDtcbiAgICAgICAgICAgIGlmICh0aGlzLm1lbnVJdGVtcyAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICAgICAgdGFyZ2V0SXRlbSAhPT0gdGhpcy5tZW51SXRlbXNbdGhpcy5mb2N1c0luZGV4XSkge1xuICAgICAgICAgICAgICAgIHRoaXMubWVudUl0ZW1zW3RoaXMuZm9jdXNJbmRleF0uc2V0QXR0cmlidXRlKFwidGFiaW5kZXhcIiwgXCItMVwiKTtcbiAgICAgICAgICAgICAgICB0aGlzLmZvY3VzSW5kZXggPSB0aGlzLm1lbnVJdGVtcy5pbmRleE9mKHRhcmdldEl0ZW0pO1xuICAgICAgICAgICAgICAgIHRhcmdldEl0ZW0uc2V0QXR0cmlidXRlKFwidGFiaW5kZXhcIiwgXCIwXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICB0aGlzLmhhbmRsZUV4cGFuZGVkQ2hhbmdlZCA9IChlKSA9PiB7XG4gICAgICAgICAgICBpZiAoZS5kZWZhdWx0UHJldmVudGVkIHx8XG4gICAgICAgICAgICAgICAgZS50YXJnZXQgPT09IG51bGwgfHxcbiAgICAgICAgICAgICAgICB0aGlzLm1lbnVJdGVtcyA9PT0gdW5kZWZpbmVkIHx8XG4gICAgICAgICAgICAgICAgdGhpcy5tZW51SXRlbXMuaW5kZXhPZihlLnRhcmdldCkgPCAwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgY29uc3QgY2hhbmdlZEl0ZW0gPSBlLnRhcmdldDtcbiAgICAgICAgICAgIC8vIGNsb3NpbmcgYW4gZXhwYW5kZWQgaXRlbSB3aXRob3V0IG9wZW5pbmcgYW5vdGhlclxuICAgICAgICAgICAgaWYgKHRoaXMuZXhwYW5kZWRJdGVtICE9PSBudWxsICYmXG4gICAgICAgICAgICAgICAgY2hhbmdlZEl0ZW0gPT09IHRoaXMuZXhwYW5kZWRJdGVtICYmXG4gICAgICAgICAgICAgICAgY2hhbmdlZEl0ZW0uZXhwYW5kZWQgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5leHBhbmRlZEl0ZW0gPSBudWxsO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjaGFuZ2VkSXRlbS5leHBhbmRlZCkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmV4cGFuZGVkSXRlbSAhPT0gbnVsbCAmJiB0aGlzLmV4cGFuZGVkSXRlbSAhPT0gY2hhbmdlZEl0ZW0pIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5leHBhbmRlZEl0ZW0uZXhwYW5kZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5tZW51SXRlbXNbdGhpcy5mb2N1c0luZGV4XS5zZXRBdHRyaWJ1dGUoXCJ0YWJpbmRleFwiLCBcIi0xXCIpO1xuICAgICAgICAgICAgICAgIHRoaXMuZXhwYW5kZWRJdGVtID0gY2hhbmdlZEl0ZW07XG4gICAgICAgICAgICAgICAgdGhpcy5mb2N1c0luZGV4ID0gdGhpcy5tZW51SXRlbXMuaW5kZXhPZihjaGFuZ2VkSXRlbSk7XG4gICAgICAgICAgICAgICAgY2hhbmdlZEl0ZW0uc2V0QXR0cmlidXRlKFwidGFiaW5kZXhcIiwgXCIwXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICB0aGlzLnJlbW92ZUl0ZW1MaXN0ZW5lcnMgPSAoKSA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy5tZW51SXRlbXMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRoaXMubWVudUl0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaXRlbS5yZW1vdmVFdmVudExpc3RlbmVyKFwiZXhwYW5kZWQtY2hhbmdlXCIsIHRoaXMuaGFuZGxlRXhwYW5kZWRDaGFuZ2VkKTtcbiAgICAgICAgICAgICAgICAgICAgaXRlbS5yZW1vdmVFdmVudExpc3RlbmVyKFwiZm9jdXNcIiwgdGhpcy5oYW5kbGVJdGVtRm9jdXMpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICB0aGlzLnNldEl0ZW1zID0gKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgbmV3SXRlbXMgPSB0aGlzLmRvbUNoaWxkcmVuKCk7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZUl0ZW1MaXN0ZW5lcnMoKTtcbiAgICAgICAgICAgIHRoaXMubWVudUl0ZW1zID0gbmV3SXRlbXM7XG4gICAgICAgICAgICBjb25zdCBtZW51SXRlbXMgPSB0aGlzLm1lbnVJdGVtcy5maWx0ZXIodGhpcy5pc01lbnVJdGVtRWxlbWVudCk7XG4gICAgICAgICAgICAvLyBpZiBvdXIgZm9jdXMgaW5kZXggaXMgbm90IC0xIHdlIGhhdmUgaXRlbXNcbiAgICAgICAgICAgIGlmIChtZW51SXRlbXMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5mb2N1c0luZGV4ID0gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZ1bmN0aW9uIGVsZW1lbnRJbmRlbnQoZWwpIHtcbiAgICAgICAgICAgICAgICBjb25zdCByb2xlID0gZWwuZ2V0QXR0cmlidXRlKFwicm9sZVwiKTtcbiAgICAgICAgICAgICAgICBjb25zdCBzdGFydFNsb3QgPSBlbC5xdWVyeVNlbGVjdG9yKFwiW3Nsb3Q9c3RhcnRdXCIpO1xuICAgICAgICAgICAgICAgIGlmIChyb2xlICE9PSBNZW51SXRlbVJvbGUubWVudWl0ZW0gJiYgc3RhcnRTbG90ID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAxO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChyb2xlID09PSBNZW51SXRlbVJvbGUubWVudWl0ZW0gJiYgc3RhcnRTbG90ICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAxO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChyb2xlICE9PSBNZW51SXRlbVJvbGUubWVudWl0ZW0gJiYgc3RhcnRTbG90ICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAyO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgaW5kZW50ID0gbWVudUl0ZW1zLnJlZHVjZSgoYWNjdW0sIGN1cnJlbnQpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBlbGVtZW50VmFsdWUgPSBlbGVtZW50SW5kZW50KGN1cnJlbnQpO1xuICAgICAgICAgICAgICAgIHJldHVybiBhY2N1bSA+IGVsZW1lbnRWYWx1ZSA/IGFjY3VtIDogZWxlbWVudFZhbHVlO1xuICAgICAgICAgICAgfSwgMCk7XG4gICAgICAgICAgICBtZW51SXRlbXMuZm9yRWFjaCgoaXRlbSwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgICAgICBpdGVtLnNldEF0dHJpYnV0ZShcInRhYmluZGV4XCIsIGluZGV4ID09PSAwID8gXCIwXCIgOiBcIi0xXCIpO1xuICAgICAgICAgICAgICAgIGl0ZW0uYWRkRXZlbnRMaXN0ZW5lcihcImV4cGFuZGVkLWNoYW5nZVwiLCB0aGlzLmhhbmRsZUV4cGFuZGVkQ2hhbmdlZCk7XG4gICAgICAgICAgICAgICAgaXRlbS5hZGRFdmVudExpc3RlbmVyKFwiZm9jdXNcIiwgdGhpcy5oYW5kbGVJdGVtRm9jdXMpO1xuICAgICAgICAgICAgICAgIGlmIChpdGVtIGluc3RhbmNlb2YgTWVudUl0ZW0pIHtcbiAgICAgICAgICAgICAgICAgICAgaXRlbS5zdGFydENvbHVtbkNvdW50ID0gaW5kZW50O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICAvKipcbiAgICAgICAgICogaGFuZGxlIGNoYW5nZSBmcm9tIGNoaWxkIGVsZW1lbnRcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuY2hhbmdlSGFuZGxlciA9IChlKSA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy5tZW51SXRlbXMgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGNoYW5nZWRNZW51SXRlbSA9IGUudGFyZ2V0O1xuICAgICAgICAgICAgY29uc3QgY2hhbmdlSXRlbUluZGV4ID0gdGhpcy5tZW51SXRlbXMuaW5kZXhPZihjaGFuZ2VkTWVudUl0ZW0pO1xuICAgICAgICAgICAgaWYgKGNoYW5nZUl0ZW1JbmRleCA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoY2hhbmdlZE1lbnVJdGVtLnJvbGUgPT09IFwibWVudWl0ZW1yYWRpb1wiICYmXG4gICAgICAgICAgICAgICAgY2hhbmdlZE1lbnVJdGVtLmNoZWNrZWQgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gY2hhbmdlSXRlbUluZGV4IC0gMTsgaSA+PSAwOyAtLWkpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaXRlbSA9IHRoaXMubWVudUl0ZW1zW2ldO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCByb2xlID0gaXRlbS5nZXRBdHRyaWJ1dGUoXCJyb2xlXCIpO1xuICAgICAgICAgICAgICAgICAgICBpZiAocm9sZSA9PT0gTWVudUl0ZW1Sb2xlLm1lbnVpdGVtcmFkaW8pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0uY2hlY2tlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChyb2xlID09PSBcInNlcGFyYXRvclwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCBtYXhJbmRleCA9IHRoaXMubWVudUl0ZW1zLmxlbmd0aCAtIDE7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IGNoYW5nZUl0ZW1JbmRleCArIDE7IGkgPD0gbWF4SW5kZXg7ICsraSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBpdGVtID0gdGhpcy5tZW51SXRlbXNbaV07XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJvbGUgPSBpdGVtLmdldEF0dHJpYnV0ZShcInJvbGVcIik7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyb2xlID09PSBNZW51SXRlbVJvbGUubWVudWl0ZW1yYWRpbykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaXRlbS5jaGVja2VkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHJvbGUgPT09IFwic2VwYXJhdG9yXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICAvKipcbiAgICAgICAgICogY2hlY2sgaWYgdGhlIGl0ZW0gaXMgYSBtZW51IGl0ZW1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuaXNNZW51SXRlbUVsZW1lbnQgPSAoZWwpID0+IHtcbiAgICAgICAgICAgIHJldHVybiAoaXNIVE1MRWxlbWVudChlbCkgJiZcbiAgICAgICAgICAgICAgICBNZW51LmZvY3VzYWJsZUVsZW1lbnRSb2xlcy5oYXNPd25Qcm9wZXJ0eShlbC5nZXRBdHRyaWJ1dGUoXCJyb2xlXCIpKSk7XG4gICAgICAgIH07XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBjaGVjayBpZiB0aGUgaXRlbSBpcyBmb2N1c2FibGVcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuaXNGb2N1c2FibGVFbGVtZW50ID0gKGVsKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5pc01lbnVJdGVtRWxlbWVudChlbCk7XG4gICAgICAgIH07XG4gICAgfVxuICAgIGl0ZW1zQ2hhbmdlZChvbGRWYWx1ZSwgbmV3VmFsdWUpIHtcbiAgICAgICAgLy8gb25seSB1cGRhdGUgY2hpbGRyZW4gYWZ0ZXIgdGhlIGNvbXBvbmVudCBpcyBjb25uZWN0ZWQgYW5kXG4gICAgICAgIC8vIHRoZSBzZXRJdGVtcyBoYXMgcnVuIG9uIGNvbm5lY3RlZENhbGxiYWNrXG4gICAgICAgIC8vIChtZW51SXRlbXMgaXMgdW5kZWZpbmVkIHVudGlsIHRoZW4pXG4gICAgICAgIGlmICh0aGlzLiRmYXN0Q29udHJvbGxlci5pc0Nvbm5lY3RlZCAmJiB0aGlzLm1lbnVJdGVtcyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aGlzLnNldEl0ZW1zKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgICAgIHN1cGVyLmNvbm5lY3RlZENhbGxiYWNrKCk7XG4gICAgICAgIERPTS5xdWV1ZVVwZGF0ZSgoKSA9PiB7XG4gICAgICAgICAgICAvLyB3YWl0IHVudGlsIGNoaWxkcmVuIGhhdmUgaGFkIGEgY2hhbmNlIHRvXG4gICAgICAgICAgICAvLyBjb25uZWN0IGJlZm9yZSBzZXR0aW5nL2NoZWNraW5nIHRoZWlyIHByb3BzL2F0dHJpYnV0ZXNcbiAgICAgICAgICAgIHRoaXMuc2V0SXRlbXMoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcihcImNoYW5nZVwiLCB0aGlzLmNoYW5nZUhhbmRsZXIpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBkaXNjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICAgICAgc3VwZXIuZGlzY29ubmVjdGVkQ2FsbGJhY2soKTtcbiAgICAgICAgdGhpcy5yZW1vdmVJdGVtTGlzdGVuZXJzKCk7XG4gICAgICAgIHRoaXMubWVudUl0ZW1zID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjaGFuZ2VcIiwgdGhpcy5jaGFuZ2VIYW5kbGVyKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRm9jdXNlcyB0aGUgZmlyc3QgaXRlbSBpbiB0aGUgbWVudS5cbiAgICAgKlxuICAgICAqIEBwdWJsaWNcbiAgICAgKi9cbiAgICBmb2N1cygpIHtcbiAgICAgICAgdGhpcy5zZXRGb2N1cygwLCAxKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ29sbGFwc2VzIGFueSBleHBhbmRlZCBtZW51IGl0ZW1zLlxuICAgICAqXG4gICAgICogQHB1YmxpY1xuICAgICAqL1xuICAgIGNvbGxhcHNlRXhwYW5kZWRJdGVtKCkge1xuICAgICAgICBpZiAodGhpcy5leHBhbmRlZEl0ZW0gIT09IG51bGwpIHtcbiAgICAgICAgICAgIHRoaXMuZXhwYW5kZWRJdGVtLmV4cGFuZGVkID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLmV4cGFuZGVkSXRlbSA9IG51bGw7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgaGFuZGxlTWVudUtleURvd24oZSkge1xuICAgICAgICBpZiAoZS5kZWZhdWx0UHJldmVudGVkIHx8IHRoaXMubWVudUl0ZW1zID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBzd2l0Y2ggKGUua2V5KSB7XG4gICAgICAgICAgICBjYXNlIGtleUFycm93RG93bjpcbiAgICAgICAgICAgICAgICAvLyBnbyBmb3J3YXJkIG9uZSBpbmRleFxuICAgICAgICAgICAgICAgIHRoaXMuc2V0Rm9jdXModGhpcy5mb2N1c0luZGV4ICsgMSwgMSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgY2FzZSBrZXlBcnJvd1VwOlxuICAgICAgICAgICAgICAgIC8vIGdvIGJhY2sgb25lIGluZGV4XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRGb2N1cyh0aGlzLmZvY3VzSW5kZXggLSAxLCAtMSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgY2FzZSBrZXlFbmQ6XG4gICAgICAgICAgICAgICAgLy8gc2V0IGZvY3VzIG9uIGxhc3QgaXRlbVxuICAgICAgICAgICAgICAgIHRoaXMuc2V0Rm9jdXModGhpcy5tZW51SXRlbXMubGVuZ3RoIC0gMSwgLTEpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIGNhc2Uga2V5SG9tZTpcbiAgICAgICAgICAgICAgICAvLyBzZXQgZm9jdXMgb24gZmlyc3QgaXRlbVxuICAgICAgICAgICAgICAgIHRoaXMuc2V0Rm9jdXMoMCwgMSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAvLyBpZiB3ZSBhcmUgbm90IGhhbmRsaW5nIHRoZSBldmVudCwgZG8gbm90IHByZXZlbnQgZGVmYXVsdFxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIGdldCBhbiBhcnJheSBvZiB2YWxpZCBET00gY2hpbGRyZW5cbiAgICAgKi9cbiAgICBkb21DaGlsZHJlbigpIHtcbiAgICAgICAgcmV0dXJuIEFycmF5LmZyb20odGhpcy5jaGlsZHJlbikuZmlsdGVyKGNoaWxkID0+ICFjaGlsZC5oYXNBdHRyaWJ1dGUoXCJoaWRkZW5cIikpO1xuICAgIH1cbiAgICBzZXRGb2N1cyhmb2N1c0luZGV4LCBhZGp1c3RtZW50KSB7XG4gICAgICAgIGlmICh0aGlzLm1lbnVJdGVtcyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgd2hpbGUgKGZvY3VzSW5kZXggPj0gMCAmJiBmb2N1c0luZGV4IDwgdGhpcy5tZW51SXRlbXMubGVuZ3RoKSB7XG4gICAgICAgICAgICBjb25zdCBjaGlsZCA9IHRoaXMubWVudUl0ZW1zW2ZvY3VzSW5kZXhdO1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNGb2N1c2FibGVFbGVtZW50KGNoaWxkKSkge1xuICAgICAgICAgICAgICAgIC8vIGNoYW5nZSB0aGUgcHJldmlvdXMgaW5kZXggdG8gLTFcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5mb2N1c0luZGV4ID4gLTEgJiZcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tZW51SXRlbXMubGVuZ3RoID49IHRoaXMuZm9jdXNJbmRleCAtIDEpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tZW51SXRlbXNbdGhpcy5mb2N1c0luZGV4XS5zZXRBdHRyaWJ1dGUoXCJ0YWJpbmRleFwiLCBcIi0xXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyB1cGRhdGUgdGhlIGZvY3VzIGluZGV4XG4gICAgICAgICAgICAgICAgdGhpcy5mb2N1c0luZGV4ID0gZm9jdXNJbmRleDtcbiAgICAgICAgICAgICAgICAvLyB1cGRhdGUgdGhlIHRhYmluZGV4IG9mIG5leHQgZm9jdXNhYmxlIGVsZW1lbnRcbiAgICAgICAgICAgICAgICBjaGlsZC5zZXRBdHRyaWJ1dGUoXCJ0YWJpbmRleFwiLCBcIjBcIik7XG4gICAgICAgICAgICAgICAgLy8gZm9jdXMgdGhlIGVsZW1lbnRcbiAgICAgICAgICAgICAgICBjaGlsZC5mb2N1cygpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9jdXNJbmRleCArPSBhZGp1c3RtZW50O1xuICAgICAgICB9XG4gICAgfVxufVxuTWVudS5mb2N1c2FibGVFbGVtZW50Um9sZXMgPSByb2xlRm9yTWVudUl0ZW07XG5fX2RlY29yYXRlKFtcbiAgICBvYnNlcnZhYmxlXG5dLCBNZW51LnByb3RvdHlwZSwgXCJpdGVtc1wiLCB2b2lkIDApO1xuIiwiaW1wb3J0IHsgaHRtbCwgc2xvdHRlZCB9IGZyb20gXCJAbWljcm9zb2Z0L2Zhc3QtZWxlbWVudFwiO1xuLyoqXG4gKiBUaGUgdGVtcGxhdGUgZm9yIHRoZSB7QGxpbmsgQG1pY3Jvc29mdC9mYXN0LWZvdW5kYXRpb24jTWVudX0gY29tcG9uZW50LlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgY29uc3QgbWVudVRlbXBsYXRlID0gKGNvbnRleHQsIGRlZmluaXRpb24pID0+IGh0bWwgYFxuICAgIDx0ZW1wbGF0ZVxuICAgICAgICBzbG90PVwiJHt4ID0+ICh4LnNsb3QgPyB4LnNsb3QgOiB4LmlzTmVzdGVkTWVudSgpID8gXCJzdWJtZW51XCIgOiB2b2lkIDApfVwiXG4gICAgICAgIHJvbGU9XCJtZW51XCJcbiAgICAgICAgQGtleWRvd249XCIkeyh4LCBjKSA9PiB4LmhhbmRsZU1lbnVLZXlEb3duKGMuZXZlbnQpfVwiXG4gICAgICAgIEBmb2N1c291dD1cIiR7KHgsIGMpID0+IHguaGFuZGxlRm9jdXNPdXQoYy5ldmVudCl9XCJcbiAgICA+XG4gICAgICAgIDxzbG90ICR7c2xvdHRlZChcIml0ZW1zXCIpfT48L3Nsb3Q+XG4gICAgPC90ZW1wbGF0ZT5cbmA7XG4iLCJleHBvcnQgKiBmcm9tIFwiLi9udW1iZXItZmllbGQudGVtcGxhdGUuanNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL251bWJlci1maWVsZC5qc1wiO1xuIiwiaW1wb3J0IHsgRm9ybUFzc29jaWF0ZWQgfSBmcm9tIFwiLi4vZm9ybS1hc3NvY2lhdGVkL2Zvcm0tYXNzb2NpYXRlZC5qc1wiO1xuaW1wb3J0IHsgRm91bmRhdGlvbkVsZW1lbnQgfSBmcm9tIFwiLi4vZm91bmRhdGlvbi1lbGVtZW50L2ZvdW5kYXRpb24tZWxlbWVudC5qc1wiO1xuY2xhc3MgX051bWJlckZpZWxkIGV4dGVuZHMgRm91bmRhdGlvbkVsZW1lbnQge1xufVxuLyoqXG4gKiBBIGZvcm0tYXNzb2NpYXRlZCBiYXNlIGNsYXNzIGZvciB0aGUge0BsaW5rIEBtaWNyb3NvZnQvZmFzdC1mb3VuZGF0aW9uIyhOdW1iZXJGaWVsZDpjbGFzcyl9IGNvbXBvbmVudC5cbiAqXG4gKiBAaW50ZXJuYWxcbiAqL1xuZXhwb3J0IGNsYXNzIEZvcm1Bc3NvY2lhdGVkTnVtYmVyRmllbGQgZXh0ZW5kcyBGb3JtQXNzb2NpYXRlZChfTnVtYmVyRmllbGQpIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgdGhpcy5wcm94eSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBfX2RlY29yYXRlIH0gZnJvbSBcInRzbGliXCI7XG5pbXBvcnQgeyBhdHRyLCBET00sIG51bGxhYmxlTnVtYmVyQ29udmVydGVyLCBvYnNlcnZhYmxlLCB9IGZyb20gXCJAbWljcm9zb2Z0L2Zhc3QtZWxlbWVudFwiO1xuaW1wb3J0IHsga2V5QXJyb3dEb3duLCBrZXlBcnJvd1VwIH0gZnJvbSBcIkBtaWNyb3NvZnQvZmFzdC13ZWItdXRpbGl0aWVzXCI7XG5pbXBvcnQgeyBTdGFydEVuZCB9IGZyb20gXCIuLi9wYXR0ZXJucy9zdGFydC1lbmQuanNcIjtcbmltcG9ydCB7IGFwcGx5TWl4aW5zIH0gZnJvbSBcIi4uL3V0aWxpdGllcy9hcHBseS1taXhpbnMuanNcIjtcbmltcG9ydCB7IERlbGVnYXRlc0FSSUFUZXh0Ym94IH0gZnJvbSBcIi4uL3RleHQtZmllbGQvdGV4dC1maWVsZC5qc1wiO1xuaW1wb3J0IHsgRm9ybUFzc29jaWF0ZWROdW1iZXJGaWVsZCB9IGZyb20gXCIuL251bWJlci1maWVsZC5mb3JtLWFzc29jaWF0ZWQuanNcIjtcbi8qKlxuICogQSBOdW1iZXIgRmllbGQgQ3VzdG9tIEhUTUwgRWxlbWVudC5cbiAqIEJhc2VkIGxhcmdlbHkgb24gdGhlIHtAbGluayBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9IVE1ML0VsZW1lbnQvaW5wdXQvbnVtYmVyIHwgPGlucHV0IHR5cGU9XCJudW1iZXJcIiAvPiBlbGVtZW50IH0uXG4gKlxuICogQHNsb3Qgc3RhcnQgLSBDb250ZW50IHdoaWNoIGNhbiBiZSBwcm92aWRlZCBiZWZvcmUgdGhlIG51bWJlciBmaWVsZCBpbnB1dFxuICogQHNsb3QgZW5kIC0gQ29udGVudCB3aGljaCBjYW4gYmUgcHJvdmlkZWQgYWZ0ZXIgdGhlIG51bWJlciBmaWVsZCBpbnB1dFxuICogQHNsb3QgLSBUaGUgZGVmYXVsdCBzbG90IGZvciB0aGUgbGFiZWxcbiAqIEBzbG90IHN0ZXAtdXAtZ2x5cGggLSBUaGUgZ2x5cGggZm9yIHRoZSBzdGVwIHVwIGNvbnRyb2xcbiAqIEBzbG90IHN0ZXAtZG93bi1nbHlwaCAtIFRoZSBnbHlwaCBmb3IgdGhlIHN0ZXAgZG93biBjb250cm9sXG4gKiBAY3NzcGFydCBsYWJlbCAtIFRoZSBsYWJlbFxuICogQGNzc3BhcnQgcm9vdCAtIFRoZSBlbGVtZW50IHdyYXBwaW5nIHRoZSBjb250cm9sLCBpbmNsdWRpbmcgc3RhcnQgYW5kIGVuZCBzbG90c1xuICogQGNzc3BhcnQgY29udHJvbCAtIFRoZSBlbGVtZW50IHJlcHJlc2VudGluZyB0aGUgaW5wdXRcbiAqIEBjc3NwYXJ0IGNvbnRyb2xzIC0gVGhlIHN0ZXAgdXAgYW5kIHN0ZXAgZG93biBjb250cm9sc1xuICogQGNzc3BhcnQgc3RlcC11cCAtIFRoZSBzdGVwIHVwIGNvbnRyb2xcbiAqIEBjc3NwYXJ0IHN0ZXAtZG93biAtIFRoZSBzdGVwIGRvd24gY29udHJvbFxuICogQGZpcmVzIGlucHV0IC0gRmlyZXMgYSBjdXN0b20gJ2lucHV0JyBldmVudCB3aGVuIHRoZSB2YWx1ZSBoYXMgY2hhbmdlZFxuICogQGZpcmVzIGNoYW5nZSAtIEZpcmVzIGEgY3VzdG9tICdjaGFuZ2UnIGV2ZW50IHdoZW4gdGhlIHZhbHVlIGhhcyBjaGFuZ2VkXG4gKlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgY2xhc3MgTnVtYmVyRmllbGQgZXh0ZW5kcyBGb3JtQXNzb2NpYXRlZE51bWJlckZpZWxkIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFdoZW4gdHJ1ZSwgc3BpbiBidXR0b25zIHdpbGwgbm90IGJlIHJlbmRlcmVkXG4gICAgICAgICAqIEBwdWJsaWNcbiAgICAgICAgICogQHJlbWFya3NcbiAgICAgICAgICogSFRNTCBBdHRyaWJ1dGU6IGF1dG9mb2N1c1xuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5oaWRlU3RlcCA9IGZhbHNlO1xuICAgICAgICAvKipcbiAgICAgICAgICogQW1vdW50IHRvIGluY3JlbWVudCBvciBkZWNyZW1lbnQgdGhlIHZhbHVlIGJ5XG4gICAgICAgICAqIEBwdWJsaWNcbiAgICAgICAgICogQHJlbWFya3NcbiAgICAgICAgICogSFRNTEF0dHJpYnV0ZTogc3RlcFxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5zdGVwID0gMTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEZsYWcgdG8gaW5kaWNhdGUgdGhhdCB0aGUgdmFsdWUgY2hhbmdlIGlzIGZyb20gdGhlIHVzZXIgaW5wdXRcbiAgICAgICAgICogQGludGVybmFsXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmlzVXNlcklucHV0ID0gZmFsc2U7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEVuc3VyZXMgdGhhdCB0aGUgbWF4IGlzIGdyZWF0ZXIgdGhhbiB0aGUgbWluIGFuZCB0aGF0IHRoZSB2YWx1ZVxuICAgICAqICBpcyBsZXNzIHRoYW4gdGhlIG1heFxuICAgICAqIEBwYXJhbSBwcmV2aW91cyAtIHRoZSBwcmV2aW91cyBtYXggdmFsdWVcbiAgICAgKiBAcGFyYW0gbmV4dCAtIHVwZGF0ZWQgbWF4IHZhbHVlXG4gICAgICpcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBtYXhDaGFuZ2VkKHByZXZpb3VzLCBuZXh0KSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgdGhpcy5tYXggPSBNYXRoLm1heChuZXh0LCAoX2EgPSB0aGlzLm1pbikgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogbmV4dCk7XG4gICAgICAgIGNvbnN0IG1pbiA9IE1hdGgubWluKHRoaXMubWluLCB0aGlzLm1heCk7XG4gICAgICAgIGlmICh0aGlzLm1pbiAhPT0gdW5kZWZpbmVkICYmIHRoaXMubWluICE9PSBtaW4pIHtcbiAgICAgICAgICAgIHRoaXMubWluID0gbWluO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLmdldFZhbGlkVmFsdWUodGhpcy52YWx1ZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEVuc3VyZXMgdGhhdCB0aGUgbWluIGlzIGxlc3MgdGhhbiB0aGUgbWF4IGFuZCB0aGF0IHRoZSB2YWx1ZVxuICAgICAqICBpcyBncmVhdGVyIHRoYW4gdGhlIG1pblxuICAgICAqIEBwYXJhbSBwcmV2aW91cyAtIHByZXZpb3VzIG1pbiB2YWx1ZVxuICAgICAqIEBwYXJhbSBuZXh0IC0gdXBkYXRlZCBtaW4gdmFsdWVcbiAgICAgKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIG1pbkNoYW5nZWQocHJldmlvdXMsIG5leHQpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICB0aGlzLm1pbiA9IE1hdGgubWluKG5leHQsIChfYSA9IHRoaXMubWF4KSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBuZXh0KTtcbiAgICAgICAgY29uc3QgbWF4ID0gTWF0aC5tYXgodGhpcy5taW4sIHRoaXMubWF4KTtcbiAgICAgICAgaWYgKHRoaXMubWF4ICE9PSB1bmRlZmluZWQgJiYgdGhpcy5tYXggIT09IG1heCkge1xuICAgICAgICAgICAgdGhpcy5tYXggPSBtYXg7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy52YWx1ZSA9IHRoaXMuZ2V0VmFsaWRWYWx1ZSh0aGlzLnZhbHVlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIHZhbHVlIHByb3BlcnR5LCB0eXBlZCBhcyBhIG51bWJlci5cbiAgICAgKlxuICAgICAqIEBwdWJsaWNcbiAgICAgKi9cbiAgICBnZXQgdmFsdWVBc051bWJlcigpIHtcbiAgICAgICAgcmV0dXJuIHBhcnNlRmxvYXQoc3VwZXIudmFsdWUpO1xuICAgIH1cbiAgICBzZXQgdmFsdWVBc051bWJlcihuZXh0KSB7XG4gICAgICAgIHRoaXMudmFsdWUgPSBuZXh0LnRvU3RyaW5nKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFZhbGlkYXRlcyB0aGF0IHRoZSB2YWx1ZSBpcyBhIG51bWJlciBiZXR3ZWVuIHRoZSBtaW4gYW5kIG1heFxuICAgICAqIEBwYXJhbSBwcmV2aW91cyAtIHByZXZpb3VzIHN0b3JlZCB2YWx1ZVxuICAgICAqIEBwYXJhbSBuZXh0IC0gdmFsdWUgYmVpbmcgdXBkYXRlZFxuICAgICAqIEBwYXJhbSB1cGRhdGVDb250cm9sIC0gc2hvdWxkIHRoZSB0ZXh0IGZpZWxkIGJlIHVwZGF0ZWQgd2l0aCB2YWx1ZSwgZGVmYXVsdHMgdG8gdHJ1ZVxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIHZhbHVlQ2hhbmdlZChwcmV2aW91cywgbmV4dCkge1xuICAgICAgICB0aGlzLnZhbHVlID0gdGhpcy5nZXRWYWxpZFZhbHVlKG5leHQpO1xuICAgICAgICBpZiAobmV4dCAhPT0gdGhpcy52YWx1ZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmNvbnRyb2wgJiYgIXRoaXMuaXNVc2VySW5wdXQpIHtcbiAgICAgICAgICAgIHRoaXMuY29udHJvbC52YWx1ZSA9IHRoaXMudmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgc3VwZXIudmFsdWVDaGFuZ2VkKHByZXZpb3VzLCB0aGlzLnZhbHVlKTtcbiAgICAgICAgaWYgKHByZXZpb3VzICE9PSB1bmRlZmluZWQgJiYgIXRoaXMuaXNVc2VySW5wdXQpIHtcbiAgICAgICAgICAgIHRoaXMuJGVtaXQoXCJpbnB1dFwiKTtcbiAgICAgICAgICAgIHRoaXMuJGVtaXQoXCJjaGFuZ2VcIik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5pc1VzZXJJbnB1dCA9IGZhbHNlO1xuICAgIH1cbiAgICAvKioge0Bpbmhlcml0RG9jIChGb3JtQXNzb2NpYXRlZDppbnRlcmZhY2UpLnZhbGlkYXRlfSAqL1xuICAgIHZhbGlkYXRlKCkge1xuICAgICAgICBzdXBlci52YWxpZGF0ZSh0aGlzLmNvbnRyb2wpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXRzIHRoZSBpbnRlcm5hbCB2YWx1ZSB0byBhIHZhbGlkIG51bWJlciBiZXR3ZWVuIHRoZSBtaW4gYW5kIG1heCBwcm9wZXJ0aWVzXG4gICAgICogQHBhcmFtIHZhbHVlIC0gdXNlciBpbnB1dFxuICAgICAqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgZ2V0VmFsaWRWYWx1ZSh2YWx1ZSkge1xuICAgICAgICB2YXIgX2EsIF9iO1xuICAgICAgICBsZXQgdmFsaWRWYWx1ZSA9IHBhcnNlRmxvYXQocGFyc2VGbG9hdCh2YWx1ZSkudG9QcmVjaXNpb24oMTIpKTtcbiAgICAgICAgaWYgKGlzTmFOKHZhbGlkVmFsdWUpKSB7XG4gICAgICAgICAgICB2YWxpZFZhbHVlID0gXCJcIjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHZhbGlkVmFsdWUgPSBNYXRoLm1pbih2YWxpZFZhbHVlLCAoX2EgPSB0aGlzLm1heCkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogdmFsaWRWYWx1ZSk7XG4gICAgICAgICAgICB2YWxpZFZhbHVlID0gTWF0aC5tYXgodmFsaWRWYWx1ZSwgKF9iID0gdGhpcy5taW4pICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IHZhbGlkVmFsdWUpLnRvU3RyaW5nKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHZhbGlkVmFsdWU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEluY3JlbWVudHMgdGhlIHZhbHVlIHVzaW5nIHRoZSBzdGVwIHZhbHVlXG4gICAgICpcbiAgICAgKiBAcHVibGljXG4gICAgICovXG4gICAgc3RlcFVwKCkge1xuICAgICAgICBjb25zdCB2YWx1ZSA9IHBhcnNlRmxvYXQodGhpcy52YWx1ZSk7XG4gICAgICAgIGNvbnN0IHN0ZXBVcFZhbHVlID0gIWlzTmFOKHZhbHVlKVxuICAgICAgICAgICAgPyB2YWx1ZSArIHRoaXMuc3RlcFxuICAgICAgICAgICAgOiB0aGlzLm1pbiA+IDBcbiAgICAgICAgICAgICAgICA/IHRoaXMubWluXG4gICAgICAgICAgICAgICAgOiB0aGlzLm1heCA8IDBcbiAgICAgICAgICAgICAgICAgICAgPyB0aGlzLm1heFxuICAgICAgICAgICAgICAgICAgICA6ICF0aGlzLm1pblxuICAgICAgICAgICAgICAgICAgICAgICAgPyB0aGlzLnN0ZXBcbiAgICAgICAgICAgICAgICAgICAgICAgIDogMDtcbiAgICAgICAgdGhpcy52YWx1ZSA9IHN0ZXBVcFZhbHVlLnRvU3RyaW5nKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERlY3JlbWVudHMgdGhlIHZhbHVlIHVzaW5nIHRoZSBzdGVwIHZhbHVlXG4gICAgICpcbiAgICAgKiBAcHVibGljXG4gICAgICovXG4gICAgc3RlcERvd24oKSB7XG4gICAgICAgIGNvbnN0IHZhbHVlID0gcGFyc2VGbG9hdCh0aGlzLnZhbHVlKTtcbiAgICAgICAgY29uc3Qgc3RlcERvd25WYWx1ZSA9ICFpc05hTih2YWx1ZSlcbiAgICAgICAgICAgID8gdmFsdWUgLSB0aGlzLnN0ZXBcbiAgICAgICAgICAgIDogdGhpcy5taW4gPiAwXG4gICAgICAgICAgICAgICAgPyB0aGlzLm1pblxuICAgICAgICAgICAgICAgIDogdGhpcy5tYXggPCAwXG4gICAgICAgICAgICAgICAgICAgID8gdGhpcy5tYXhcbiAgICAgICAgICAgICAgICAgICAgOiAhdGhpcy5taW5cbiAgICAgICAgICAgICAgICAgICAgICAgID8gMCAtIHRoaXMuc3RlcFxuICAgICAgICAgICAgICAgICAgICAgICAgOiAwO1xuICAgICAgICB0aGlzLnZhbHVlID0gc3RlcERvd25WYWx1ZS50b1N0cmluZygpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXRzIHVwIHRoZSBpbml0aWFsIHN0YXRlIG9mIHRoZSBudW1iZXIgZmllbGRcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICAgICAgc3VwZXIuY29ubmVjdGVkQ2FsbGJhY2soKTtcbiAgICAgICAgdGhpcy5wcm94eS5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsIFwibnVtYmVyXCIpO1xuICAgICAgICB0aGlzLnZhbGlkYXRlKCk7XG4gICAgICAgIHRoaXMuY29udHJvbC52YWx1ZSA9IHRoaXMudmFsdWU7XG4gICAgICAgIGlmICh0aGlzLmF1dG9mb2N1cykge1xuICAgICAgICAgICAgRE9NLnF1ZXVlVXBkYXRlKCgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmZvY3VzKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZWxlY3RzIGFsbCB0aGUgdGV4dCBpbiB0aGUgbnVtYmVyIGZpZWxkXG4gICAgICpcbiAgICAgKiBAcHVibGljXG4gICAgICovXG4gICAgc2VsZWN0KCkge1xuICAgICAgICB0aGlzLmNvbnRyb2wuc2VsZWN0KCk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgc2VsZWN0IGV2ZW50IGRvZXMgbm90IHBlcm1lYXRlIHRoZSBzaGFkb3cgRE9NIGJvdW5kYXJ5LlxuICAgICAgICAgKiBUaGlzIGZuIGVmZmVjdGl2ZWx5IHByb3hpZXMgdGhlIHNlbGVjdCBldmVudCxcbiAgICAgICAgICogZW1pdHRpbmcgYSBgc2VsZWN0YCBldmVudCB3aGVuZXZlciB0aGUgaW50ZXJuYWxcbiAgICAgICAgICogY29udHJvbCBlbWl0cyBhIGBzZWxlY3RgIGV2ZW50XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLiRlbWl0KFwic2VsZWN0XCIpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBIYW5kbGVzIHRoZSBpbnRlcm5hbCBjb250cm9sJ3MgYGlucHV0YCBldmVudFxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIGhhbmRsZVRleHRJbnB1dCgpIHtcbiAgICAgICAgdGhpcy5jb250cm9sLnZhbHVlID0gdGhpcy5jb250cm9sLnZhbHVlLnJlcGxhY2UoL1teMC05XFwtK2UuXS9nLCBcIlwiKTtcbiAgICAgICAgdGhpcy5pc1VzZXJJbnB1dCA9IHRydWU7XG4gICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLmNvbnRyb2wudmFsdWU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENoYW5nZSBldmVudCBoYW5kbGVyIGZvciBpbm5lciBjb250cm9sLlxuICAgICAqIEByZW1hcmtzXG4gICAgICogXCJDaGFuZ2VcIiBldmVudHMgYXJlIG5vdCBgY29tcG9zYWJsZWAgc28gdGhleSB3aWxsIG5vdFxuICAgICAqIHBlcm1lYXRlIHRoZSBzaGFkb3cgRE9NIGJvdW5kYXJ5LiBUaGlzIGZuIGVmZmVjdGl2ZWx5IHByb3hpZXNcbiAgICAgKiB0aGUgY2hhbmdlIGV2ZW50LCBlbWl0dGluZyBhIGBjaGFuZ2VgIGV2ZW50IHdoZW5ldmVyIHRoZSBpbnRlcm5hbFxuICAgICAqIGNvbnRyb2wgZW1pdHMgYSBgY2hhbmdlYCBldmVudFxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIGhhbmRsZUNoYW5nZSgpIHtcbiAgICAgICAgdGhpcy4kZW1pdChcImNoYW5nZVwiKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSGFuZGxlcyB0aGUgaW50ZXJuYWwgY29udHJvbCdzIGBrZXlkb3duYCBldmVudFxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIGhhbmRsZUtleURvd24oZSkge1xuICAgICAgICBjb25zdCBrZXkgPSBlLmtleTtcbiAgICAgICAgc3dpdGNoIChrZXkpIHtcbiAgICAgICAgICAgIGNhc2Uga2V5QXJyb3dVcDpcbiAgICAgICAgICAgICAgICB0aGlzLnN0ZXBVcCgpO1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIGNhc2Uga2V5QXJyb3dEb3duOlxuICAgICAgICAgICAgICAgIHRoaXMuc3RlcERvd24oKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEhhbmRsZXMgcG9wdWxhdGluZyB0aGUgaW5wdXQgZmllbGQgd2l0aCBhIHZhbGlkYXRlZCB2YWx1ZSB3aGVuXG4gICAgICogIGxlYXZpbmcgdGhlIGlucHV0IGZpZWxkLlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIGhhbmRsZUJsdXIoKSB7XG4gICAgICAgIHRoaXMuY29udHJvbC52YWx1ZSA9IHRoaXMudmFsdWU7XG4gICAgfVxufVxuX19kZWNvcmF0ZShbXG4gICAgYXR0cih7IGF0dHJpYnV0ZTogXCJyZWFkb25seVwiLCBtb2RlOiBcImJvb2xlYW5cIiB9KVxuXSwgTnVtYmVyRmllbGQucHJvdG90eXBlLCBcInJlYWRPbmx5XCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBhdHRyKHsgbW9kZTogXCJib29sZWFuXCIgfSlcbl0sIE51bWJlckZpZWxkLnByb3RvdHlwZSwgXCJhdXRvZm9jdXNcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIGF0dHIoeyBhdHRyaWJ1dGU6IFwiaGlkZS1zdGVwXCIsIG1vZGU6IFwiYm9vbGVhblwiIH0pXG5dLCBOdW1iZXJGaWVsZC5wcm90b3R5cGUsIFwiaGlkZVN0ZXBcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIGF0dHJcbl0sIE51bWJlckZpZWxkLnByb3RvdHlwZSwgXCJwbGFjZWhvbGRlclwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgYXR0clxuXSwgTnVtYmVyRmllbGQucHJvdG90eXBlLCBcImxpc3RcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIGF0dHIoeyBjb252ZXJ0ZXI6IG51bGxhYmxlTnVtYmVyQ29udmVydGVyIH0pXG5dLCBOdW1iZXJGaWVsZC5wcm90b3R5cGUsIFwibWF4bGVuZ3RoXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBhdHRyKHsgY29udmVydGVyOiBudWxsYWJsZU51bWJlckNvbnZlcnRlciB9KVxuXSwgTnVtYmVyRmllbGQucHJvdG90eXBlLCBcIm1pbmxlbmd0aFwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgYXR0cih7IGNvbnZlcnRlcjogbnVsbGFibGVOdW1iZXJDb252ZXJ0ZXIgfSlcbl0sIE51bWJlckZpZWxkLnByb3RvdHlwZSwgXCJzaXplXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBhdHRyKHsgY29udmVydGVyOiBudWxsYWJsZU51bWJlckNvbnZlcnRlciB9KVxuXSwgTnVtYmVyRmllbGQucHJvdG90eXBlLCBcInN0ZXBcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIGF0dHIoeyBjb252ZXJ0ZXI6IG51bGxhYmxlTnVtYmVyQ29udmVydGVyIH0pXG5dLCBOdW1iZXJGaWVsZC5wcm90b3R5cGUsIFwibWF4XCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBhdHRyKHsgY29udmVydGVyOiBudWxsYWJsZU51bWJlckNvbnZlcnRlciB9KVxuXSwgTnVtYmVyRmllbGQucHJvdG90eXBlLCBcIm1pblwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgb2JzZXJ2YWJsZVxuXSwgTnVtYmVyRmllbGQucHJvdG90eXBlLCBcImRlZmF1bHRTbG90dGVkTm9kZXNcIiwgdm9pZCAwKTtcbmFwcGx5TWl4aW5zKE51bWJlckZpZWxkLCBTdGFydEVuZCwgRGVsZWdhdGVzQVJJQVRleHRib3gpO1xuIiwiaW1wb3J0IHsgaHRtbCwgcmVmLCBzbG90dGVkLCB3aGVuIH0gZnJvbSBcIkBtaWNyb3NvZnQvZmFzdC1lbGVtZW50XCI7XG5pbXBvcnQgeyBlbmRTbG90VGVtcGxhdGUsIHN0YXJ0U2xvdFRlbXBsYXRlIH0gZnJvbSBcIi4uL3BhdHRlcm5zL3N0YXJ0LWVuZC5qc1wiO1xuLyoqXG4gKiBUaGUgdGVtcGxhdGUgZm9yIHRoZSB7QGxpbmsgQG1pY3Jvc29mdC9mYXN0LWZvdW5kYXRpb24jKE51bWJlckZpZWxkOmNsYXNzKX0gY29tcG9uZW50LlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgY29uc3QgbnVtYmVyRmllbGRUZW1wbGF0ZSA9IChjb250ZXh0LCBkZWZpbml0aW9uKSA9PiBodG1sIGBcbiAgICA8dGVtcGxhdGUgY2xhc3M9XCIke3ggPT4gKHgucmVhZE9ubHkgPyBcInJlYWRvbmx5XCIgOiBcIlwiKX1cIj5cbiAgICAgICAgPGxhYmVsXG4gICAgICAgICAgICBwYXJ0PVwibGFiZWxcIlxuICAgICAgICAgICAgZm9yPVwiY29udHJvbFwiXG4gICAgICAgICAgICBjbGFzcz1cIiR7eCA9PiB4LmRlZmF1bHRTbG90dGVkTm9kZXMgJiYgeC5kZWZhdWx0U2xvdHRlZE5vZGVzLmxlbmd0aFxuICAgID8gXCJsYWJlbFwiXG4gICAgOiBcImxhYmVsIGxhYmVsX19oaWRkZW5cIn1cIlxuICAgICAgICA+XG4gICAgICAgICAgICA8c2xvdCAke3Nsb3R0ZWQoXCJkZWZhdWx0U2xvdHRlZE5vZGVzXCIpfT48L3Nsb3Q+XG4gICAgICAgIDwvbGFiZWw+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJyb290XCIgcGFydD1cInJvb3RcIj5cbiAgICAgICAgICAgICR7c3RhcnRTbG90VGVtcGxhdGUoY29udGV4dCwgZGVmaW5pdGlvbil9XG4gICAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgICAgICBjbGFzcz1cImNvbnRyb2xcIlxuICAgICAgICAgICAgICAgIHBhcnQ9XCJjb250cm9sXCJcbiAgICAgICAgICAgICAgICBpZD1cImNvbnRyb2xcIlxuICAgICAgICAgICAgICAgIEBpbnB1dD1cIiR7eCA9PiB4LmhhbmRsZVRleHRJbnB1dCgpfVwiXG4gICAgICAgICAgICAgICAgQGNoYW5nZT1cIiR7eCA9PiB4LmhhbmRsZUNoYW5nZSgpfVwiXG4gICAgICAgICAgICAgICAgQGtleWRvd249XCIkeyh4LCBjKSA9PiB4LmhhbmRsZUtleURvd24oYy5ldmVudCl9XCJcbiAgICAgICAgICAgICAgICBAYmx1cj1cIiR7KHgsIGMpID0+IHguaGFuZGxlQmx1cigpfVwiXG4gICAgICAgICAgICAgICAgP2F1dG9mb2N1cz1cIiR7eCA9PiB4LmF1dG9mb2N1c31cIlxuICAgICAgICAgICAgICAgID9kaXNhYmxlZD1cIiR7eCA9PiB4LmRpc2FibGVkfVwiXG4gICAgICAgICAgICAgICAgbGlzdD1cIiR7eCA9PiB4Lmxpc3R9XCJcbiAgICAgICAgICAgICAgICBtYXhsZW5ndGg9XCIke3ggPT4geC5tYXhsZW5ndGh9XCJcbiAgICAgICAgICAgICAgICBtaW5sZW5ndGg9XCIke3ggPT4geC5taW5sZW5ndGh9XCJcbiAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIiR7eCA9PiB4LnBsYWNlaG9sZGVyfVwiXG4gICAgICAgICAgICAgICAgP3JlYWRvbmx5PVwiJHt4ID0+IHgucmVhZE9ubHl9XCJcbiAgICAgICAgICAgICAgICA/cmVxdWlyZWQ9XCIke3ggPT4geC5yZXF1aXJlZH1cIlxuICAgICAgICAgICAgICAgIHNpemU9XCIke3ggPT4geC5zaXplfVwiXG4gICAgICAgICAgICAgICAgdHlwZT1cInRleHRcIlxuICAgICAgICAgICAgICAgIGlucHV0bW9kZT1cIm51bWVyaWNcIlxuICAgICAgICAgICAgICAgIG1pbj1cIiR7eCA9PiB4Lm1pbn1cIlxuICAgICAgICAgICAgICAgIG1heD1cIiR7eCA9PiB4Lm1heH1cIlxuICAgICAgICAgICAgICAgIHN0ZXA9XCIke3ggPT4geC5zdGVwfVwiXG4gICAgICAgICAgICAgICAgYXJpYS1hdG9taWM9XCIke3ggPT4geC5hcmlhQXRvbWljfVwiXG4gICAgICAgICAgICAgICAgYXJpYS1idXN5PVwiJHt4ID0+IHguYXJpYUJ1c3l9XCJcbiAgICAgICAgICAgICAgICBhcmlhLWNvbnRyb2xzPVwiJHt4ID0+IHguYXJpYUNvbnRyb2xzfVwiXG4gICAgICAgICAgICAgICAgYXJpYS1jdXJyZW50PVwiJHt4ID0+IHguYXJpYUN1cnJlbnR9XCJcbiAgICAgICAgICAgICAgICBhcmlhLWRlc2NyaWJlZGJ5PVwiJHt4ID0+IHguYXJpYURlc2NyaWJlZGJ5fVwiXG4gICAgICAgICAgICAgICAgYXJpYS1kZXRhaWxzPVwiJHt4ID0+IHguYXJpYURldGFpbHN9XCJcbiAgICAgICAgICAgICAgICBhcmlhLWRpc2FibGVkPVwiJHt4ID0+IHguYXJpYURpc2FibGVkfVwiXG4gICAgICAgICAgICAgICAgYXJpYS1lcnJvcm1lc3NhZ2U9XCIke3ggPT4geC5hcmlhRXJyb3JtZXNzYWdlfVwiXG4gICAgICAgICAgICAgICAgYXJpYS1mbG93dG89XCIke3ggPT4geC5hcmlhRmxvd3RvfVwiXG4gICAgICAgICAgICAgICAgYXJpYS1oYXNwb3B1cD1cIiR7eCA9PiB4LmFyaWFIYXNwb3B1cH1cIlxuICAgICAgICAgICAgICAgIGFyaWEtaGlkZGVuPVwiJHt4ID0+IHguYXJpYUhpZGRlbn1cIlxuICAgICAgICAgICAgICAgIGFyaWEtaW52YWxpZD1cIiR7eCA9PiB4LmFyaWFJbnZhbGlkfVwiXG4gICAgICAgICAgICAgICAgYXJpYS1rZXlzaG9ydGN1dHM9XCIke3ggPT4geC5hcmlhS2V5c2hvcnRjdXRzfVwiXG4gICAgICAgICAgICAgICAgYXJpYS1sYWJlbD1cIiR7eCA9PiB4LmFyaWFMYWJlbH1cIlxuICAgICAgICAgICAgICAgIGFyaWEtbGFiZWxsZWRieT1cIiR7eCA9PiB4LmFyaWFMYWJlbGxlZGJ5fVwiXG4gICAgICAgICAgICAgICAgYXJpYS1saXZlPVwiJHt4ID0+IHguYXJpYUxpdmV9XCJcbiAgICAgICAgICAgICAgICBhcmlhLW93bnM9XCIke3ggPT4geC5hcmlhT3duc31cIlxuICAgICAgICAgICAgICAgIGFyaWEtcmVsZXZhbnQ9XCIke3ggPT4geC5hcmlhUmVsZXZhbnR9XCJcbiAgICAgICAgICAgICAgICBhcmlhLXJvbGVkZXNjcmlwdGlvbj1cIiR7eCA9PiB4LmFyaWFSb2xlZGVzY3JpcHRpb259XCJcbiAgICAgICAgICAgICAgICAke3JlZihcImNvbnRyb2xcIil9XG4gICAgICAgICAgICAvPlxuICAgICAgICAgICAgJHt3aGVuKHggPT4gIXguaGlkZVN0ZXAgJiYgIXgucmVhZE9ubHkgJiYgIXguZGlzYWJsZWQsIGh0bWwgYFxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29udHJvbHNcIiBwYXJ0PVwiY29udHJvbHNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJzdGVwLXVwXCIgcGFydD1cInN0ZXAtdXBcIiBAY2xpY2s9XCIke3ggPT4geC5zdGVwVXAoKX1cIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c2xvdCBuYW1lPVwic3RlcC11cC1nbHlwaFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAke2RlZmluaXRpb24uc3RlcFVwR2x5cGggfHwgXCJcIn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3Nsb3Q+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzcz1cInN0ZXAtZG93blwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFydD1cInN0ZXAtZG93blwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgQGNsaWNrPVwiJHt4ID0+IHguc3RlcERvd24oKX1cIlxuICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzbG90IG5hbWU9XCJzdGVwLWRvd24tZ2x5cGhcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHtkZWZpbml0aW9uLnN0ZXBEb3duR2x5cGggfHwgXCJcIn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3Nsb3Q+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgYCl9XG4gICAgICAgICAgICAke2VuZFNsb3RUZW1wbGF0ZShjb250ZXh0LCBkZWZpbml0aW9uKX1cbiAgICAgICAgPC9kaXY+XG4gICAgPC90ZW1wbGF0ZT5cbmA7XG4iLCJpbXBvcnQgeyBfX2RlY29yYXRlIH0gZnJvbSBcInRzbGliXCI7XG5pbXBvcnQgeyBhdHRyIH0gZnJvbSBcIkBtaWNyb3NvZnQvZmFzdC1lbGVtZW50XCI7XG4vKipcbiAqIFNvbWUgc3RhdGVzIGFuZCBwcm9wZXJ0aWVzIGFyZSBhcHBsaWNhYmxlIHRvIGFsbCBob3N0IGxhbmd1YWdlIGVsZW1lbnRzIHJlZ2FyZGxlc3Mgb2Ygd2hldGhlciBhIHJvbGUgaXMgYXBwbGllZC5cbiAqIFRoZSBmb2xsb3dpbmcgZ2xvYmFsIHN0YXRlcyBhbmQgcHJvcGVydGllcyBhcmUgc3VwcG9ydGVkIGJ5IGFsbCByb2xlcyBhbmQgYnkgYWxsIGJhc2UgbWFya3VwIGVsZW1lbnRzLlxuICoge0BsaW5rIGh0dHBzOi8vd3d3LnczLm9yZy9UUi93YWktYXJpYS0xLjEvI2dsb2JhbF9zdGF0ZXN9XG4gKlxuICogVGhpcyBpcyBpbnRlbmRlZCB0byBiZSB1c2VkIGFzIGEgbWl4aW4uIEJlIHN1cmUgeW91IGV4dGVuZCBGQVNURWxlbWVudC5cbiAqXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjbGFzcyBBUklBR2xvYmFsU3RhdGVzQW5kUHJvcGVydGllcyB7XG59XG5fX2RlY29yYXRlKFtcbiAgICBhdHRyKHsgYXR0cmlidXRlOiBcImFyaWEtYXRvbWljXCIgfSlcbl0sIEFSSUFHbG9iYWxTdGF0ZXNBbmRQcm9wZXJ0aWVzLnByb3RvdHlwZSwgXCJhcmlhQXRvbWljXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBhdHRyKHsgYXR0cmlidXRlOiBcImFyaWEtYnVzeVwiIH0pXG5dLCBBUklBR2xvYmFsU3RhdGVzQW5kUHJvcGVydGllcy5wcm90b3R5cGUsIFwiYXJpYUJ1c3lcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIGF0dHIoeyBhdHRyaWJ1dGU6IFwiYXJpYS1jb250cm9sc1wiIH0pXG5dLCBBUklBR2xvYmFsU3RhdGVzQW5kUHJvcGVydGllcy5wcm90b3R5cGUsIFwiYXJpYUNvbnRyb2xzXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBhdHRyKHsgYXR0cmlidXRlOiBcImFyaWEtY3VycmVudFwiIH0pXG5dLCBBUklBR2xvYmFsU3RhdGVzQW5kUHJvcGVydGllcy5wcm90b3R5cGUsIFwiYXJpYUN1cnJlbnRcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIGF0dHIoeyBhdHRyaWJ1dGU6IFwiYXJpYS1kZXNjcmliZWRieVwiIH0pXG5dLCBBUklBR2xvYmFsU3RhdGVzQW5kUHJvcGVydGllcy5wcm90b3R5cGUsIFwiYXJpYURlc2NyaWJlZGJ5XCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBhdHRyKHsgYXR0cmlidXRlOiBcImFyaWEtZGV0YWlsc1wiIH0pXG5dLCBBUklBR2xvYmFsU3RhdGVzQW5kUHJvcGVydGllcy5wcm90b3R5cGUsIFwiYXJpYURldGFpbHNcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIGF0dHIoeyBhdHRyaWJ1dGU6IFwiYXJpYS1kaXNhYmxlZFwiIH0pXG5dLCBBUklBR2xvYmFsU3RhdGVzQW5kUHJvcGVydGllcy5wcm90b3R5cGUsIFwiYXJpYURpc2FibGVkXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBhdHRyKHsgYXR0cmlidXRlOiBcImFyaWEtZXJyb3JtZXNzYWdlXCIgfSlcbl0sIEFSSUFHbG9iYWxTdGF0ZXNBbmRQcm9wZXJ0aWVzLnByb3RvdHlwZSwgXCJhcmlhRXJyb3JtZXNzYWdlXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBhdHRyKHsgYXR0cmlidXRlOiBcImFyaWEtZmxvd3RvXCIgfSlcbl0sIEFSSUFHbG9iYWxTdGF0ZXNBbmRQcm9wZXJ0aWVzLnByb3RvdHlwZSwgXCJhcmlhRmxvd3RvXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBhdHRyKHsgYXR0cmlidXRlOiBcImFyaWEtaGFzcG9wdXBcIiB9KVxuXSwgQVJJQUdsb2JhbFN0YXRlc0FuZFByb3BlcnRpZXMucHJvdG90eXBlLCBcImFyaWFIYXNwb3B1cFwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgYXR0cih7IGF0dHJpYnV0ZTogXCJhcmlhLWhpZGRlblwiIH0pXG5dLCBBUklBR2xvYmFsU3RhdGVzQW5kUHJvcGVydGllcy5wcm90b3R5cGUsIFwiYXJpYUhpZGRlblwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgYXR0cih7IGF0dHJpYnV0ZTogXCJhcmlhLWludmFsaWRcIiB9KVxuXSwgQVJJQUdsb2JhbFN0YXRlc0FuZFByb3BlcnRpZXMucHJvdG90eXBlLCBcImFyaWFJbnZhbGlkXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBhdHRyKHsgYXR0cmlidXRlOiBcImFyaWEta2V5c2hvcnRjdXRzXCIgfSlcbl0sIEFSSUFHbG9iYWxTdGF0ZXNBbmRQcm9wZXJ0aWVzLnByb3RvdHlwZSwgXCJhcmlhS2V5c2hvcnRjdXRzXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBhdHRyKHsgYXR0cmlidXRlOiBcImFyaWEtbGFiZWxcIiB9KVxuXSwgQVJJQUdsb2JhbFN0YXRlc0FuZFByb3BlcnRpZXMucHJvdG90eXBlLCBcImFyaWFMYWJlbFwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgYXR0cih7IGF0dHJpYnV0ZTogXCJhcmlhLWxhYmVsbGVkYnlcIiB9KVxuXSwgQVJJQUdsb2JhbFN0YXRlc0FuZFByb3BlcnRpZXMucHJvdG90eXBlLCBcImFyaWFMYWJlbGxlZGJ5XCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBhdHRyKHsgYXR0cmlidXRlOiBcImFyaWEtbGl2ZVwiIH0pXG5dLCBBUklBR2xvYmFsU3RhdGVzQW5kUHJvcGVydGllcy5wcm90b3R5cGUsIFwiYXJpYUxpdmVcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIGF0dHIoeyBhdHRyaWJ1dGU6IFwiYXJpYS1vd25zXCIgfSlcbl0sIEFSSUFHbG9iYWxTdGF0ZXNBbmRQcm9wZXJ0aWVzLnByb3RvdHlwZSwgXCJhcmlhT3duc1wiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgYXR0cih7IGF0dHJpYnV0ZTogXCJhcmlhLXJlbGV2YW50XCIgfSlcbl0sIEFSSUFHbG9iYWxTdGF0ZXNBbmRQcm9wZXJ0aWVzLnByb3RvdHlwZSwgXCJhcmlhUmVsZXZhbnRcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIGF0dHIoeyBhdHRyaWJ1dGU6IFwiYXJpYS1yb2xlZGVzY3JpcHRpb25cIiB9KVxuXSwgQVJJQUdsb2JhbFN0YXRlc0FuZFByb3BlcnRpZXMucHJvdG90eXBlLCBcImFyaWFSb2xlZGVzY3JpcHRpb25cIiwgdm9pZCAwKTtcbiIsImV4cG9ydCAqIGZyb20gXCIuL2FyaWEtZ2xvYmFsLmpzXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9zdGFydC1lbmQuanNcIjtcbiIsImltcG9ydCB7IGh0bWwsIHJlZiB9IGZyb20gXCJAbWljcm9zb2Z0L2Zhc3QtZWxlbWVudFwiO1xuLyoqXG4gKiBBIG1peGluIGNsYXNzIGltcGxlbWVudGluZyBzdGFydCBhbmQgZW5kIGVsZW1lbnRzLlxuICogVGhlc2UgYXJlIGdlbmVyYWxseSB1c2VkIHRvIGRlY29yYXRlIHRleHQgZWxlbWVudHMgd2l0aCBpY29ucyBvciBvdGhlciB2aXN1YWwgaW5kaWNhdG9ycy5cbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGNsYXNzIFN0YXJ0RW5kIHtcbiAgICBoYW5kbGVTdGFydENvbnRlbnRDaGFuZ2UoKSB7XG4gICAgICAgIHRoaXMuc3RhcnRDb250YWluZXIuY2xhc3NMaXN0LnRvZ2dsZShcInN0YXJ0XCIsIHRoaXMuc3RhcnQuYXNzaWduZWROb2RlcygpLmxlbmd0aCA+IDApO1xuICAgIH1cbiAgICBoYW5kbGVFbmRDb250ZW50Q2hhbmdlKCkge1xuICAgICAgICB0aGlzLmVuZENvbnRhaW5lci5jbGFzc0xpc3QudG9nZ2xlKFwiZW5kXCIsIHRoaXMuZW5kLmFzc2lnbmVkTm9kZXMoKS5sZW5ndGggPiAwKTtcbiAgICB9XG59XG4vKipcbiAqIFRoZSB0ZW1wbGF0ZSBmb3IgdGhlIGVuZCBlbGVtZW50LlxuICogRm9yIHVzZSB3aXRoIHtAbGluayBTdGFydEVuZH1cbiAqXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjb25zdCBlbmRTbG90VGVtcGxhdGUgPSAoY29udGV4dCwgZGVmaW5pdGlvbikgPT4gaHRtbCBgXG4gICAgPHNwYW5cbiAgICAgICAgcGFydD1cImVuZFwiXG4gICAgICAgICR7cmVmKFwiZW5kQ29udGFpbmVyXCIpfVxuICAgICAgICBjbGFzcz0ke3ggPT4gKGRlZmluaXRpb24uZW5kID8gXCJlbmRcIiA6IHZvaWQgMCl9XG4gICAgPlxuICAgICAgICA8c2xvdCBuYW1lPVwiZW5kXCIgJHtyZWYoXCJlbmRcIil9IEBzbG90Y2hhbmdlPVwiJHt4ID0+IHguaGFuZGxlRW5kQ29udGVudENoYW5nZSgpfVwiPlxuICAgICAgICAgICAgJHtkZWZpbml0aW9uLmVuZCB8fCBcIlwifVxuICAgICAgICA8L3Nsb3Q+XG4gICAgPC9zcGFuPlxuYDtcbi8qKlxuICogVGhlIHRlbXBsYXRlIGZvciB0aGUgc3RhcnQgZWxlbWVudC5cbiAqIEZvciB1c2Ugd2l0aCB7QGxpbmsgU3RhcnRFbmR9XG4gKlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgY29uc3Qgc3RhcnRTbG90VGVtcGxhdGUgPSAoY29udGV4dCwgZGVmaW5pdGlvbikgPT4gaHRtbCBgXG4gICAgPHNwYW5cbiAgICAgICAgcGFydD1cInN0YXJ0XCJcbiAgICAgICAgJHtyZWYoXCJzdGFydENvbnRhaW5lclwiKX1cbiAgICAgICAgY2xhc3M9XCIke3ggPT4gKGRlZmluaXRpb24uc3RhcnQgPyBcInN0YXJ0XCIgOiB2b2lkIDApfVwiXG4gICAgPlxuICAgICAgICA8c2xvdFxuICAgICAgICAgICAgbmFtZT1cInN0YXJ0XCJcbiAgICAgICAgICAgICR7cmVmKFwic3RhcnRcIil9XG4gICAgICAgICAgICBAc2xvdGNoYW5nZT1cIiR7eCA9PiB4LmhhbmRsZVN0YXJ0Q29udGVudENoYW5nZSgpfVwiXG4gICAgICAgID5cbiAgICAgICAgICAgICR7ZGVmaW5pdGlvbi5zdGFydCB8fCBcIlwifVxuICAgICAgICA8L3Nsb3Q+XG4gICAgPC9zcGFuPlxuYDtcbi8qKlxuICogVGhlIHRlbXBsYXRlIGZvciB0aGUgZW5kIGVsZW1lbnQuXG4gKiBGb3IgdXNlIHdpdGgge0BsaW5rIFN0YXJ0RW5kfVxuICpcbiAqIEBwdWJsaWNcbiAqIEBkZXByZWNhdGVkIC0gdXNlIGVuZFNsb3RUZW1wbGF0ZVxuICovXG5leHBvcnQgY29uc3QgZW5kVGVtcGxhdGUgPSBodG1sIGBcbiAgICA8c3BhbiBwYXJ0PVwiZW5kXCIgJHtyZWYoXCJlbmRDb250YWluZXJcIil9PlxuICAgICAgICA8c2xvdFxuICAgICAgICAgICAgbmFtZT1cImVuZFwiXG4gICAgICAgICAgICAke3JlZihcImVuZFwiKX1cbiAgICAgICAgICAgIEBzbG90Y2hhbmdlPVwiJHt4ID0+IHguaGFuZGxlRW5kQ29udGVudENoYW5nZSgpfVwiXG4gICAgICAgID48L3Nsb3Q+XG4gICAgPC9zcGFuPlxuYDtcbi8qKlxuICogVGhlIHRlbXBsYXRlIGZvciB0aGUgc3RhcnQgZWxlbWVudC5cbiAqIEZvciB1c2Ugd2l0aCB7QGxpbmsgU3RhcnRFbmR9XG4gKlxuICogQHB1YmxpY1xuICogQGRlcHJlY2F0ZWQgLSB1c2Ugc3RhcnRTbG90VGVtcGxhdGVcbiAqL1xuZXhwb3J0IGNvbnN0IHN0YXJ0VGVtcGxhdGUgPSBodG1sIGBcbiAgICA8c3BhbiBwYXJ0PVwic3RhcnRcIiAke3JlZihcInN0YXJ0Q29udGFpbmVyXCIpfT5cbiAgICAgICAgPHNsb3RcbiAgICAgICAgICAgIG5hbWU9XCJzdGFydFwiXG4gICAgICAgICAgICAke3JlZihcInN0YXJ0XCIpfVxuICAgICAgICAgICAgQHNsb3RjaGFuZ2U9XCIke3ggPT4geC5oYW5kbGVTdGFydENvbnRlbnRDaGFuZ2UoKX1cIlxuICAgICAgICA+PC9zbG90PlxuICAgIDwvc3Bhbj5cbmA7XG4iLCJleHBvcnQgKiBmcm9tIFwiLi9waWNrZXIudGVtcGxhdGUuanNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL3BpY2tlci5qc1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vcGlja2VyLW1lbnUudGVtcGxhdGUuanNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL3BpY2tlci1tZW51LmpzXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9waWNrZXItbWVudS1vcHRpb24udGVtcGxhdGUuanNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL3BpY2tlci1tZW51LW9wdGlvbi5qc1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vcGlja2VyLWxpc3QudGVtcGxhdGUuanNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL3BpY2tlci1saXN0LmpzXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9waWNrZXItbGlzdC1pdGVtLnRlbXBsYXRlLmpzXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9waWNrZXItbGlzdC1pdGVtLmpzXCI7XG4iLCJpbXBvcnQgeyBfX2RlY29yYXRlIH0gZnJvbSBcInRzbGliXCI7XG5pbXBvcnQgeyBhdHRyLCBodG1sLCBvYnNlcnZhYmxlIH0gZnJvbSBcIkBtaWNyb3NvZnQvZmFzdC1lbGVtZW50XCI7XG5pbXBvcnQgeyBrZXlFbnRlciB9IGZyb20gXCJAbWljcm9zb2Z0L2Zhc3Qtd2ViLXV0aWxpdGllc1wiO1xuaW1wb3J0IHsgRm91bmRhdGlvbkVsZW1lbnQgfSBmcm9tIFwiLi4vZm91bmRhdGlvbi1lbGVtZW50L2ZvdW5kYXRpb24tZWxlbWVudC5qc1wiO1xuY29uc3QgZGVmYXVsdENvbnRlbnRzVGVtcGxhdGUgPSBodG1sIGBcbiAgICA8dGVtcGxhdGU+XG4gICAgICAgICR7eCA9PiB4LnZhbHVlfVxuICAgIDwvdGVtcGxhdGU+XG5gO1xuLyoqXG4gKiBBIHBpY2tlciBsaXN0IGl0ZW0gQ3VzdG9tIEhUTUwgRWxlbWVudC5cbiAqXG4gKiBAYWxwaGFcbiAqL1xuZXhwb3J0IGNsYXNzIFBpY2tlckxpc3RJdGVtIGV4dGVuZHMgRm91bmRhdGlvbkVsZW1lbnQge1xuICAgIGNvbnRlbnRzVGVtcGxhdGVDaGFuZ2VkKCkge1xuICAgICAgICBpZiAodGhpcy4kZmFzdENvbnRyb2xsZXIuaXNDb25uZWN0ZWQpIHtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlVmlldygpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIGNvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgICAgICBzdXBlci5jb25uZWN0ZWRDYWxsYmFjaygpO1xuICAgICAgICB0aGlzLnVwZGF0ZVZpZXcoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgZGlzY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgICAgIHRoaXMuZGlzY29ubmVjdFZpZXcoKTtcbiAgICAgICAgc3VwZXIuZGlzY29ubmVjdGVkQ2FsbGJhY2soKTtcbiAgICB9XG4gICAgaGFuZGxlS2V5RG93bihlKSB7XG4gICAgICAgIGlmIChlLmRlZmF1bHRQcmV2ZW50ZWQpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZS5rZXkgPT09IGtleUVudGVyKSB7XG4gICAgICAgICAgICB0aGlzLmhhbmRsZUludm9rZSgpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBoYW5kbGVDbGljayhlKSB7XG4gICAgICAgIGlmICghZS5kZWZhdWx0UHJldmVudGVkKSB7XG4gICAgICAgICAgICB0aGlzLmhhbmRsZUludm9rZSgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgaGFuZGxlSW52b2tlKCkge1xuICAgICAgICB0aGlzLiRlbWl0KFwicGlja2VyaXRlbWludm9rZWRcIik7XG4gICAgfVxuICAgIHVwZGF0ZVZpZXcoKSB7XG4gICAgICAgIHZhciBfYSwgX2I7XG4gICAgICAgIHRoaXMuZGlzY29ubmVjdFZpZXcoKTtcbiAgICAgICAgdGhpcy5jdXN0b21WaWV3ID1cbiAgICAgICAgICAgIChfYiA9IChfYSA9IHRoaXMuY29udGVudHNUZW1wbGF0ZSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnJlbmRlcih0aGlzLCB0aGlzKSkgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogZGVmYXVsdENvbnRlbnRzVGVtcGxhdGUucmVuZGVyKHRoaXMsIHRoaXMpO1xuICAgIH1cbiAgICBkaXNjb25uZWN0VmlldygpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICAoX2EgPSB0aGlzLmN1c3RvbVZpZXcpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5kaXNwb3NlKCk7XG4gICAgICAgIHRoaXMuY3VzdG9tVmlldyA9IHVuZGVmaW5lZDtcbiAgICB9XG59XG5fX2RlY29yYXRlKFtcbiAgICBhdHRyKHsgYXR0cmlidXRlOiBcInZhbHVlXCIgfSlcbl0sIFBpY2tlckxpc3RJdGVtLnByb3RvdHlwZSwgXCJ2YWx1ZVwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgb2JzZXJ2YWJsZVxuXSwgUGlja2VyTGlzdEl0ZW0ucHJvdG90eXBlLCBcImNvbnRlbnRzVGVtcGxhdGVcIiwgdm9pZCAwKTtcbiIsImltcG9ydCB7IGh0bWwgfSBmcm9tIFwiQG1pY3Jvc29mdC9mYXN0LWVsZW1lbnRcIjtcbi8qKlxuICpcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGNvbnN0IHBpY2tlckxpc3RJdGVtVGVtcGxhdGUgPSAoY29udGV4dCwgZGVmaW5pdGlvbikgPT4ge1xuICAgIHJldHVybiBodG1sIGBcbiAgICAgICAgPHRlbXBsYXRlXG4gICAgICAgICAgICByb2xlPVwibGlzdGl0ZW1cIlxuICAgICAgICAgICAgdGFiaW5kZXg9XCIwXCJcbiAgICAgICAgICAgIEBjbGljaz1cIiR7KHgsIGMpID0+IHguaGFuZGxlQ2xpY2soYy5ldmVudCl9XCJcbiAgICAgICAgICAgIEBrZXlkb3duPVwiJHsoeCwgYykgPT4geC5oYW5kbGVLZXlEb3duKGMuZXZlbnQpfVwiXG4gICAgICAgID5cbiAgICAgICAgICAgIDxzbG90Pjwvc2xvdD5cbiAgICAgICAgPC90ZW1wbGF0ZT5cbiAgICBgO1xufTtcbiIsImltcG9ydCB7IEZvdW5kYXRpb25FbGVtZW50IH0gZnJvbSBcIi4uL2ZvdW5kYXRpb24tZWxlbWVudC9mb3VuZGF0aW9uLWVsZW1lbnQuanNcIjtcbi8qKlxuICogQSBMaXN0IFBpY2tlciBNZW51IEN1c3RvbSBIVE1MIEVsZW1lbnQuXG4gKlxuICogQGFscGhhXG4gKi9cbmV4cG9ydCBjbGFzcyBQaWNrZXJMaXN0IGV4dGVuZHMgRm91bmRhdGlvbkVsZW1lbnQge1xufVxuIiwiaW1wb3J0IHsgaHRtbCB9IGZyb20gXCJAbWljcm9zb2Z0L2Zhc3QtZWxlbWVudFwiO1xuLyoqXG4gKlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgY29uc3QgcGlja2VyTGlzdFRlbXBsYXRlID0gKGNvbnRleHQsIGRlZmluaXRpb24pID0+IHtcbiAgICByZXR1cm4gaHRtbCBgXG4gICAgICAgIDx0ZW1wbGF0ZSBzbG90PVwibGlzdC1yZWdpb25cIiByb2xlPVwibGlzdFwiIGNsYXNzPVwicGlja2VyLWxpc3RcIj5cbiAgICAgICAgICAgIDxzbG90Pjwvc2xvdD5cbiAgICAgICAgICAgIDxzbG90IG5hbWU9XCJpbnB1dC1yZWdpb25cIj48L3Nsb3Q+XG4gICAgICAgIDwvdGVtcGxhdGU+XG4gICAgYDtcbn07XG4iLCJpbXBvcnQgeyBfX2RlY29yYXRlIH0gZnJvbSBcInRzbGliXCI7XG5pbXBvcnQgeyBhdHRyLCBodG1sLCBvYnNlcnZhYmxlIH0gZnJvbSBcIkBtaWNyb3NvZnQvZmFzdC1lbGVtZW50XCI7XG5pbXBvcnQgeyBGb3VuZGF0aW9uRWxlbWVudCB9IGZyb20gXCIuLi9mb3VuZGF0aW9uLWVsZW1lbnQvZm91bmRhdGlvbi1lbGVtZW50LmpzXCI7XG5jb25zdCBkZWZhdWx0Q29udGVudHNUZW1wbGF0ZSA9IGh0bWwgYFxuICAgIDx0ZW1wbGF0ZT5cbiAgICAgICAgJHt4ID0+IHgudmFsdWV9XG4gICAgPC90ZW1wbGF0ZT5cbmA7XG4vKipcbiAqIEEgcGlja2VyIGxpc3QgaXRlbSBDdXN0b20gSFRNTCBFbGVtZW50LlxuICpcbiAqIEBhbHBoYVxuICovXG5leHBvcnQgY2xhc3MgUGlja2VyTWVudU9wdGlvbiBleHRlbmRzIEZvdW5kYXRpb25FbGVtZW50IHtcbiAgICBjb250ZW50c1RlbXBsYXRlQ2hhbmdlZCgpIHtcbiAgICAgICAgaWYgKHRoaXMuJGZhc3RDb250cm9sbGVyLmlzQ29ubmVjdGVkKSB7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVZpZXcoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICAgICAgc3VwZXIuY29ubmVjdGVkQ2FsbGJhY2soKTtcbiAgICAgICAgdGhpcy51cGRhdGVWaWV3KCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIGRpc2Nvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgICAgICBzdXBlci5kaXNjb25uZWN0ZWRDYWxsYmFjaygpO1xuICAgICAgICB0aGlzLmRpc2Nvbm5lY3RWaWV3KCk7XG4gICAgfVxuICAgIGhhbmRsZUNsaWNrKGUpIHtcbiAgICAgICAgaWYgKGUuZGVmYXVsdFByZXZlbnRlZCkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuaGFuZGxlSW52b2tlZCgpO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGhhbmRsZUludm9rZWQoKSB7XG4gICAgICAgIHRoaXMuJGVtaXQoXCJwaWNrZXJvcHRpb25pbnZva2VkXCIpO1xuICAgIH1cbiAgICB1cGRhdGVWaWV3KCkge1xuICAgICAgICB2YXIgX2EsIF9iO1xuICAgICAgICB0aGlzLmRpc2Nvbm5lY3RWaWV3KCk7XG4gICAgICAgIHRoaXMuY3VzdG9tVmlldyA9XG4gICAgICAgICAgICAoX2IgPSAoX2EgPSB0aGlzLmNvbnRlbnRzVGVtcGxhdGUpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5yZW5kZXIodGhpcywgdGhpcykpICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IGRlZmF1bHRDb250ZW50c1RlbXBsYXRlLnJlbmRlcih0aGlzLCB0aGlzKTtcbiAgICB9XG4gICAgZGlzY29ubmVjdFZpZXcoKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgKF9hID0gdGhpcy5jdXN0b21WaWV3KSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuZGlzcG9zZSgpO1xuICAgICAgICB0aGlzLmN1c3RvbVZpZXcgPSB1bmRlZmluZWQ7XG4gICAgfVxufVxuX19kZWNvcmF0ZShbXG4gICAgYXR0cih7IGF0dHJpYnV0ZTogXCJ2YWx1ZVwiIH0pXG5dLCBQaWNrZXJNZW51T3B0aW9uLnByb3RvdHlwZSwgXCJ2YWx1ZVwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgb2JzZXJ2YWJsZVxuXSwgUGlja2VyTWVudU9wdGlvbi5wcm90b3R5cGUsIFwiY29udGVudHNUZW1wbGF0ZVwiLCB2b2lkIDApO1xuIiwiaW1wb3J0IHsgaHRtbCB9IGZyb20gXCJAbWljcm9zb2Z0L2Zhc3QtZWxlbWVudFwiO1xuLyoqXG4gKlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgY29uc3QgcGlja2VyTWVudU9wdGlvblRlbXBsYXRlID0gKGNvbnRleHQsIGRlZmluaXRpb24pID0+IHtcbiAgICByZXR1cm4gaHRtbCBgXG4gICAgICAgIDx0ZW1wbGF0ZVxuICAgICAgICAgICAgcm9sZT1cImxpc3RpdGVtXCJcbiAgICAgICAgICAgIHRhYmluZGV4PVwiLTFcIlxuICAgICAgICAgICAgQGNsaWNrPVwiJHsoeCwgYykgPT4geC5oYW5kbGVDbGljayhjLmV2ZW50KX1cIlxuICAgICAgICA+XG4gICAgICAgICAgICA8c2xvdD48L3Nsb3Q+XG4gICAgICAgIDwvdGVtcGxhdGU+XG4gICAgYDtcbn07XG4iLCJpbXBvcnQgeyBfX2RlY29yYXRlIH0gZnJvbSBcInRzbGliXCI7XG5pbXBvcnQgeyB1bmlxdWVJZCB9IGZyb20gXCJAbWljcm9zb2Z0L2Zhc3Qtd2ViLXV0aWxpdGllc1wiO1xuaW1wb3J0IHsgb2JzZXJ2YWJsZSB9IGZyb20gXCJAbWljcm9zb2Z0L2Zhc3QtZWxlbWVudFwiO1xuaW1wb3J0IHsgRm91bmRhdGlvbkVsZW1lbnQgfSBmcm9tIFwiLi4vZm91bmRhdGlvbi1lbGVtZW50L2ZvdW5kYXRpb24tZWxlbWVudC5qc1wiO1xuLyoqXG4gKiBBIExpc3QgUGlja2VyIE1lbnUgQ3VzdG9tIEhUTUwgRWxlbWVudC5cbiAqXG4gKiBAYWxwaGFcbiAqL1xuZXhwb3J0IGNsYXNzIFBpY2tlck1lbnUgZXh0ZW5kcyBGb3VuZGF0aW9uRWxlbWVudCB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDaGlsZHJlbiB0aGF0IGFyZSBsaXN0IGl0ZW1zXG4gICAgICAgICAqXG4gICAgICAgICAqIEBpbnRlcm5hbFxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5vcHRpb25FbGVtZW50cyA9IFtdO1xuICAgIH1cbiAgICBtZW51RWxlbWVudHNDaGFuZ2VkKCkge1xuICAgICAgICB0aGlzLnVwZGF0ZU9wdGlvbnMoKTtcbiAgICB9XG4gICAgaGVhZGVyRWxlbWVudHNDaGFuZ2VkKCkge1xuICAgICAgICB0aGlzLnVwZGF0ZU9wdGlvbnMoKTtcbiAgICB9XG4gICAgZm9vdGVyRWxlbWVudHNDaGFuZ2VkKCkge1xuICAgICAgICB0aGlzLnVwZGF0ZU9wdGlvbnMoKTtcbiAgICB9XG4gICAgdXBkYXRlT3B0aW9ucygpIHtcbiAgICAgICAgdGhpcy5vcHRpb25FbGVtZW50cy5zcGxpY2UoMCwgdGhpcy5vcHRpb25FbGVtZW50cy5sZW5ndGgpO1xuICAgICAgICB0aGlzLmFkZFNsb3R0ZWRMaXN0SXRlbXModGhpcy5oZWFkZXJFbGVtZW50cyk7XG4gICAgICAgIHRoaXMuYWRkU2xvdHRlZExpc3RJdGVtcyh0aGlzLm1lbnVFbGVtZW50cyk7XG4gICAgICAgIHRoaXMuYWRkU2xvdHRlZExpc3RJdGVtcyh0aGlzLmZvb3RlckVsZW1lbnRzKTtcbiAgICAgICAgdGhpcy4kZW1pdChcIm9wdGlvbnN1cGRhdGVkXCIsIHsgYnViYmxlczogZmFsc2UgfSk7XG4gICAgfVxuICAgIGFkZFNsb3R0ZWRMaXN0SXRlbXMoc2xvdENoaWxkcmVuKSB7XG4gICAgICAgIGlmIChzbG90Q2hpbGRyZW4gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHNsb3RDaGlsZHJlbi5mb3JFYWNoKChjaGlsZCkgPT4ge1xuICAgICAgICAgICAgaWYgKGNoaWxkLm5vZGVUeXBlID09PSAxICYmIGNoaWxkLmdldEF0dHJpYnV0ZShcInJvbGVcIikgPT09IFwibGlzdGl0ZW1cIikge1xuICAgICAgICAgICAgICAgIGNoaWxkLmlkID0gY2hpbGQuaWQgfHwgdW5pcXVlSWQoXCJvcHRpb24tXCIpO1xuICAgICAgICAgICAgICAgIHRoaXMub3B0aW9uRWxlbWVudHMucHVzaChjaGlsZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbn1cbl9fZGVjb3JhdGUoW1xuICAgIG9ic2VydmFibGVcbl0sIFBpY2tlck1lbnUucHJvdG90eXBlLCBcIm1lbnVFbGVtZW50c1wiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgb2JzZXJ2YWJsZVxuXSwgUGlja2VyTWVudS5wcm90b3R5cGUsIFwiaGVhZGVyRWxlbWVudHNcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIG9ic2VydmFibGVcbl0sIFBpY2tlck1lbnUucHJvdG90eXBlLCBcImZvb3RlckVsZW1lbnRzXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBvYnNlcnZhYmxlXG5dLCBQaWNrZXJNZW51LnByb3RvdHlwZSwgXCJzdWdnZXN0aW9uc0F2YWlsYWJsZVRleHRcIiwgdm9pZCAwKTtcbiIsImltcG9ydCB7IGh0bWwsIHNsb3R0ZWQgfSBmcm9tIFwiQG1pY3Jvc29mdC9mYXN0LWVsZW1lbnRcIjtcbi8qKlxuICogVGhlIHRlbXBsYXRlIGZvciB0aGUgTGlzdCBQaWNrZXIgY29tcG9uZW50LlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgY29uc3QgcGlja2VyTWVudVRlbXBsYXRlID0gKGNvbnRleHQsIGRlZmluaXRpb24pID0+IHtcbiAgICByZXR1cm4gaHRtbCBgXG4gICAgICAgIDx0ZW1wbGF0ZSByb2xlPVwibGlzdFwiIHNsb3Q9XCJtZW51LXJlZ2lvblwiPlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm9wdGlvbnMtZGlzcGxheVwiIHBhcnQ9XCJvcHRpb25zLWRpc3BsYXlcIj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiaGVhZGVyLXJlZ2lvblwiIHBhcnQ9XCJoZWFkZXItcmVnaW9uXCI+XG4gICAgICAgICAgICAgICAgICAgIDxzbG90IG5hbWU9XCJoZWFkZXItcmVnaW9uXCIgJHtzbG90dGVkKFwiaGVhZGVyRWxlbWVudHNcIil9Pjwvc2xvdD5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgICAgICAgIDxzbG90ICR7c2xvdHRlZChcIm1lbnVFbGVtZW50c1wiKX0+PC9zbG90PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJmb290ZXItcmVnaW9uXCIgcGFydD1cImZvb3Rlci1yZWdpb25cIj5cbiAgICAgICAgICAgICAgICAgICAgPHNsb3QgbmFtZT1cImZvb3Rlci1yZWdpb25cIiAke3Nsb3R0ZWQoXCJmb290ZXJFbGVtZW50c1wiKX0+PC9zbG90PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgcm9sZT1cImFsZXJ0XCJcbiAgICAgICAgICAgICAgICAgICAgYXJpYS1saXZlPVwicG9saXRlXCJcbiAgICAgICAgICAgICAgICAgICAgcGFydD1cInN1Z2dlc3Rpb25zLWF2YWlsYWJsZS1hbGVydFwiXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzPVwic3VnZ2VzdGlvbnMtYXZhaWxhYmxlLWFsZXJ0XCJcbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICR7eCA9PiB4LnN1Z2dlc3Rpb25zQXZhaWxhYmxlVGV4dH1cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L3RlbXBsYXRlPlxuICAgIGA7XG59O1xuIiwiaW1wb3J0IHsgRm9ybUFzc29jaWF0ZWQgfSBmcm9tIFwiLi4vZm9ybS1hc3NvY2lhdGVkL2Zvcm0tYXNzb2NpYXRlZC5qc1wiO1xuaW1wb3J0IHsgRm91bmRhdGlvbkVsZW1lbnQgfSBmcm9tIFwiLi4vZm91bmRhdGlvbi1lbGVtZW50L2ZvdW5kYXRpb24tZWxlbWVudC5qc1wiO1xuY2xhc3MgX1BpY2tlciBleHRlbmRzIEZvdW5kYXRpb25FbGVtZW50IHtcbn1cbi8qKlxuICogQSBmb3JtLWFzc29jaWF0ZWQgYmFzZSBjbGFzcyBmb3IgdGhlIHtAbGluayBAbWljcm9zb2Z0L2Zhc3QtZm91bmRhdGlvbiMoUGlja2VyOmNsYXNzKX0gY29tcG9uZW50LlxuICpcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgY2xhc3MgRm9ybUFzc29jaWF0ZWRQaWNrZXIgZXh0ZW5kcyBGb3JtQXNzb2NpYXRlZChfUGlja2VyKSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICAgIHRoaXMucHJveHkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgX19kZWNvcmF0ZSB9IGZyb20gXCJ0c2xpYlwiO1xuaW1wb3J0IHsgYXR0ciwgRE9NLCBodG1sLCBvYnNlcnZhYmxlLCByZWYsIFJlcGVhdERpcmVjdGl2ZSwgfSBmcm9tIFwiQG1pY3Jvc29mdC9mYXN0LWVsZW1lbnRcIjtcbmltcG9ydCB7IGtleUFycm93RG93biwga2V5QXJyb3dMZWZ0LCBrZXlBcnJvd1JpZ2h0LCBrZXlBcnJvd1VwLCBrZXlCYWNrc3BhY2UsIGtleURlbGV0ZSwga2V5RW50ZXIsIGtleUVzY2FwZSwgdW5pcXVlSWQsIH0gZnJvbSBcIkBtaWNyb3NvZnQvZmFzdC13ZWItdXRpbGl0aWVzXCI7XG5pbXBvcnQgeyBGbHlvdXRQb3NCb3R0b20sIEZseW91dFBvc0JvdHRvbUZpbGwsIEZseW91dFBvc1RhbGxlc3QsIEZseW91dFBvc1RhbGxlc3RGaWxsLCBGbHlvdXRQb3NUb3AsIEZseW91dFBvc1RvcEZpbGwsIH0gZnJvbSBcIi4uL2FuY2hvcmVkLXJlZ2lvbi9pbmRleC5qc1wiO1xuaW1wb3J0IHsgUGlja2VyTWVudU9wdGlvbiB9IGZyb20gXCIuL3BpY2tlci1tZW51LW9wdGlvbi5qc1wiO1xuaW1wb3J0IHsgUGlja2VyTGlzdEl0ZW0gfSBmcm9tIFwiLi9waWNrZXItbGlzdC1pdGVtLmpzXCI7XG5pbXBvcnQgeyBGb3JtQXNzb2NpYXRlZFBpY2tlciB9IGZyb20gXCIuL3BpY2tlci5mb3JtLWFzc29jaWF0ZWQuanNcIjtcbmNvbnN0IHBpY2tlcklucHV0VGVtcGxhdGUgPSBodG1sIGBcbiAgICA8aW5wdXRcbiAgICAgICAgc2xvdD1cImlucHV0LXJlZ2lvblwiXG4gICAgICAgIHJvbGU9XCJjb21ib2JveFwiXG4gICAgICAgIHR5cGU9XCJ0ZXh0XCJcbiAgICAgICAgYXV0b2NhcGl0YWxpemU9XCJvZmZcIlxuICAgICAgICBhdXRvY29tcGxldGU9XCJvZmZcIlxuICAgICAgICBoYXNwb3B1cD1cImxpc3RcIlxuICAgICAgICBhcmlhLWxhYmVsPVwiJHt4ID0+IHgubGFiZWx9XCJcbiAgICAgICAgYXJpYS1sYWJlbGxlZGJ5PVwiJHt4ID0+IHgubGFiZWxsZWRCeX1cIlxuICAgICAgICBwbGFjZWhvbGRlcj1cIiR7eCA9PiB4LnBsYWNlaG9sZGVyfVwiXG4gICAgICAgICR7cmVmKFwiaW5wdXRFbGVtZW50XCIpfVxuICAgID48L2lucHV0PlxuYDtcbi8qKlxuICogQSBQaWNrZXIgQ3VzdG9tIEhUTUwgRWxlbWVudC4gIFRoaXMgaXMgYW4gZWFybHkgXCJhbHBoYVwiIHZlcnNpb24gb2YgdGhlIGNvbXBvbmVudC5cbiAqIERldmVsb3BlcnMgc2hvdWxkIGV4cGVjdCB0aGUgYXBpIHRvIGV2b2x2ZSwgYnJlYWtpbmcgY2hhbmdlcyBhcmUgcG9zc2libGUuXG4gKlxuICogQGFscGhhXG4gKi9cbmV4cG9ydCBjbGFzcyBQaWNrZXIgZXh0ZW5kcyBGb3JtQXNzb2NpYXRlZFBpY2tlciB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDdXJyZW50bHkgc2VsZWN0ZWQgaXRlbXMuIENvbW1hIGRlbGluZWF0ZWQgc3RyaW5nIGllLiBcImFwcGxlcyxvcmFuZ2VzXCIuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBhbHBoYVxuICAgICAgICAgKiBAcmVtYXJrc1xuICAgICAgICAgKiBIVE1MIEF0dHJpYnV0ZTogc2VsZWN0aW9uXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnNlbGVjdGlvbiA9IFwiXCI7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBXaGV0aGVyIHRoZSBjb21wb25lbnQgc2hvdWxkIHJlbW92ZSBhbiBvcHRpb24gZnJvbSB0aGUgbGlzdCB3aGVuIGl0IGlzIGluIHRoZSBzZWxlY3Rpb25cbiAgICAgICAgICpcbiAgICAgICAgICogQGFscGhhXG4gICAgICAgICAqIEByZW1hcmtzXG4gICAgICAgICAqIEhUTUwgQXR0cmlidXRlOiBmaWx0ZXItc2VsZWN0ZWRcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZmlsdGVyU2VsZWN0ZWQgPSB0cnVlO1xuICAgICAgICAvKipcbiAgICAgICAgICogV2hldGhlciB0aGUgY29tcG9uZW50IHNob3VsZCByZW1vdmUgb3B0aW9ucyBiYXNlZCBvbiB0aGUgY3VycmVudCBxdWVyeVxuICAgICAgICAgKlxuICAgICAgICAgKiBAYWxwaGFcbiAgICAgICAgICogQHJlbWFya3NcbiAgICAgICAgICogSFRNTCBBdHRyaWJ1dGU6IGZpbHRlci1xdWVyeVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5maWx0ZXJRdWVyeSA9IHRydWU7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgdGV4dCB0byBwcmVzZW50IHRvIGFzc2lzdGl2ZSB0ZWNobm9sZ2llcyB3aGVuIG5vIHN1Z2dlc3Rpb25zIGFyZSBhdmFpbGFibGUuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBhbHBoYVxuICAgICAgICAgKiBAcmVtYXJrc1xuICAgICAgICAgKiBIVE1MIEF0dHJpYnV0ZTogbm8tc3VnZ2VzdGlvbnMtdGV4dFxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5ub1N1Z2dlc3Rpb25zVGV4dCA9IFwiTm8gc3VnZ2VzdGlvbnMgYXZhaWxhYmxlXCI7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiAgVGhlIHRleHQgdG8gcHJlc2VudCB0byBhc3Npc3RpdmUgdGVjaG5vbGdpZXMgd2hlbiBzdWdnZXN0aW9ucyBhcmUgYXZhaWxhYmxlLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAYWxwaGFcbiAgICAgICAgICogQHJlbWFya3NcbiAgICAgICAgICogSFRNTCBBdHRyaWJ1dGU6IHN1Z2dlc3Rpb25zLWF2YWlsYWJsZS10ZXh0XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnN1Z2dlc3Rpb25zQXZhaWxhYmxlVGV4dCA9IFwiU3VnZ2VzdGlvbnMgYXZhaWxhYmxlXCI7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgdGV4dCB0byBwcmVzZW50IHRvIGFzc2lzdGl2ZSB0ZWNobm9sb2dpZXMgd2hlbiBzdWdnZXN0aW9ucyBhcmUgbG9hZGluZy5cbiAgICAgICAgICpcbiAgICAgICAgICogQGFscGhhXG4gICAgICAgICAqIEByZW1hcmtzXG4gICAgICAgICAqIEhUTUwgQXR0cmlidXRlOiBsb2FkaW5nLXRleHRcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMubG9hZGluZ1RleHQgPSBcIkxvYWRpbmcgc3VnZ2VzdGlvbnNcIjtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIENvbnRyb2xzIG1lbnUgcGxhY2VtZW50XG4gICAgICAgICAqXG4gICAgICAgICAqIEBhbHBoYVxuICAgICAgICAgKiBAcmVtYXJrc1xuICAgICAgICAgKiBIVE1MIEF0dHJpYnV0ZTogbWVudS1wbGFjZW1lbnRcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMubWVudVBsYWNlbWVudCA9IFwiYm90dG9tLWZpbGxcIjtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFdoZXRoZXIgdG8gZGlzcGxheSBhIGxvYWRpbmcgc3RhdGUgaWYgdGhlIG1lbnUgaXMgb3BlbmVkLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAYWxwaGFcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuc2hvd0xvYWRpbmcgPSBmYWxzZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqICBDdXJyZW50IGxpc3Qgb2Ygb3B0aW9ucyBpbiBhcnJheSBmb3JtXG4gICAgICAgICAqXG4gICAgICAgICAqIEBhbHBoYVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5vcHRpb25zTGlzdCA9IFtdO1xuICAgICAgICAvKipcbiAgICAgICAgICogIEN1cnJlbnQgbGlzdCBvZiBmaWx0ZXJlZCBvcHRpb25zIGluIGFycmF5IGZvcm1cbiAgICAgICAgICpcbiAgICAgICAgICogQGludGVybmFsXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmZpbHRlcmVkT3B0aW9uc0xpc3QgPSBbXTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqICBJbmRpY2F0ZXMgaWYgdGhlIGZseW91dCBtZW51IGlzIG9wZW4gb3Igbm90XG4gICAgICAgICAqXG4gICAgICAgICAqIEBpbnRlcm5hbFxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5mbHlvdXRPcGVuID0gZmFsc2U7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiAgSW5kZXggb2YgY3VycmVudGx5IGFjdGl2ZSBtZW51IG9wdGlvblxuICAgICAgICAgKlxuICAgICAgICAgKiBAaW50ZXJuYWxcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMubWVudUZvY3VzSW5kZXggPSAtMTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqICBJbnRlcm5hbCBmbGFnIHRvIGluZGljYXRlIG5vIG9wdGlvbnMgYXZhaWxhYmxlIGRpc3BsYXkgc2hvdWxkIGJlIHNob3duLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAaW50ZXJuYWxcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuc2hvd05vT3B0aW9ucyA9IGZhbHNlO1xuICAgICAgICAvKipcbiAgICAgICAgICpcbiAgICAgICAgICpcbiAgICAgICAgICogQGludGVybmFsXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnNlbGVjdGVkSXRlbXMgPSBbXTtcbiAgICAgICAgdGhpcy5pbnB1dEVsZW1lbnRWaWV3ID0gbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEhhbmRsZSBpbnB1dCBldmVudCBmcm9tIGlucHV0IGVsZW1lbnRcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuaGFuZGxlVGV4dElucHV0ID0gKGUpID0+IHtcbiAgICAgICAgICAgIHRoaXMucXVlcnkgPSB0aGlzLmlucHV0RWxlbWVudC52YWx1ZTtcbiAgICAgICAgfTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEhhbmRsZSBjbGljayBldmVudCBmcm9tIGlucHV0IGVsZW1lbnRcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuaGFuZGxlSW5wdXRDbGljayA9IChlKSA9PiB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB0aGlzLnRvZ2dsZUZseW91dCh0cnVlKTtcbiAgICAgICAgfTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNldHMgcHJvcGVydGllcyBvbiB0aGUgYW5jaG9yZWQgcmVnaW9uIG9uY2UgaXQgaXMgaW5zdGFuY2lhdGVkLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5zZXRSZWdpb25Qcm9wcyA9ICgpID0+IHtcbiAgICAgICAgICAgIGlmICghdGhpcy5mbHlvdXRPcGVuKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMucmVnaW9uID09PSBudWxsIHx8IHRoaXMucmVnaW9uID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAvLyBUT0RPOiBsaW1pdCB0aGlzXG4gICAgICAgICAgICAgICAgRE9NLnF1ZXVlVXBkYXRlKHRoaXMuc2V0UmVnaW9uUHJvcHMpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucmVnaW9uLmFuY2hvckVsZW1lbnQgPSB0aGlzLmlucHV0RWxlbWVudDtcbiAgICAgICAgfTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIG1hdGNoZXMgbWVudSBwbGFjZW1lbnQgdmFsdWVzIHdpdGggdGhlIGFzc29jaWF0ZWQgbWVudSBjb25maWdcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuY29uZmlnTG9va3VwID0ge1xuICAgICAgICAgICAgdG9wOiBGbHlvdXRQb3NUb3AsXG4gICAgICAgICAgICBib3R0b206IEZseW91dFBvc0JvdHRvbSxcbiAgICAgICAgICAgIHRhbGxlc3Q6IEZseW91dFBvc1RhbGxlc3QsXG4gICAgICAgICAgICBcInRvcC1maWxsXCI6IEZseW91dFBvc1RvcEZpbGwsXG4gICAgICAgICAgICBcImJvdHRvbS1maWxsXCI6IEZseW91dFBvc0JvdHRvbUZpbGwsXG4gICAgICAgICAgICBcInRhbGxlc3QtZmlsbFwiOiBGbHlvdXRQb3NUYWxsZXN0RmlsbCxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgc2VsZWN0aW9uQ2hhbmdlZCgpIHtcbiAgICAgICAgaWYgKHRoaXMuJGZhc3RDb250cm9sbGVyLmlzQ29ubmVjdGVkKSB7XG4gICAgICAgICAgICB0aGlzLmhhbmRsZVNlbGVjdGlvbkNoYW5nZSgpO1xuICAgICAgICAgICAgaWYgKHRoaXMucHJveHkgaW5zdGFuY2VvZiBIVE1MSW5wdXRFbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcm94eS52YWx1ZSA9IHRoaXMuc2VsZWN0aW9uO1xuICAgICAgICAgICAgICAgIHRoaXMudmFsaWRhdGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBvcHRpb25zQ2hhbmdlZCgpIHtcbiAgICAgICAgdGhpcy5vcHRpb25zTGlzdCA9IHRoaXMub3B0aW9uc1xuICAgICAgICAgICAgLnNwbGl0KFwiLFwiKVxuICAgICAgICAgICAgLm1hcChvcHQgPT4gb3B0LnRyaW0oKSlcbiAgICAgICAgICAgIC5maWx0ZXIob3B0ID0+IG9wdCAhPT0gXCJcIik7XG4gICAgfVxuICAgIG1lbnVQbGFjZW1lbnRDaGFuZ2VkKCkge1xuICAgICAgICBpZiAodGhpcy4kZmFzdENvbnRyb2xsZXIuaXNDb25uZWN0ZWQpIHtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlTWVudUNvbmZpZygpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHNob3dMb2FkaW5nQ2hhbmdlZCgpIHtcbiAgICAgICAgaWYgKHRoaXMuJGZhc3RDb250cm9sbGVyLmlzQ29ubmVjdGVkKSB7XG4gICAgICAgICAgICBET00ucXVldWVVcGRhdGUoKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0Rm9jdXNlZE9wdGlvbigwKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGxpc3RJdGVtVGVtcGxhdGVDaGFuZ2VkKCkge1xuICAgICAgICB0aGlzLnVwZGF0ZUxpc3RJdGVtVGVtcGxhdGUoKTtcbiAgICB9XG4gICAgZGVmYXVsdExpc3RJdGVtVGVtcGxhdGVDaGFuZ2VkKCkge1xuICAgICAgICB0aGlzLnVwZGF0ZUxpc3RJdGVtVGVtcGxhdGUoKTtcbiAgICB9XG4gICAgbWVudU9wdGlvblRlbXBsYXRlQ2hhbmdlZCgpIHtcbiAgICAgICAgdGhpcy51cGRhdGVPcHRpb25UZW1wbGF0ZSgpO1xuICAgIH1cbiAgICBkZWZhdWx0TWVudU9wdGlvblRlbXBsYXRlQ2hhbmdlZCgpIHtcbiAgICAgICAgdGhpcy51cGRhdGVPcHRpb25UZW1wbGF0ZSgpO1xuICAgIH1cbiAgICBvcHRpb25zTGlzdENoYW5nZWQoKSB7XG4gICAgICAgIHRoaXMudXBkYXRlRmlsdGVyZWRPcHRpb25zKCk7XG4gICAgfVxuICAgIHF1ZXJ5Q2hhbmdlZCgpIHtcbiAgICAgICAgaWYgKHRoaXMuJGZhc3RDb250cm9sbGVyLmlzQ29ubmVjdGVkKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5pbnB1dEVsZW1lbnQudmFsdWUgIT09IHRoaXMucXVlcnkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmlucHV0RWxlbWVudC52YWx1ZSA9IHRoaXMucXVlcnk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUZpbHRlcmVkT3B0aW9ucygpO1xuICAgICAgICAgICAgdGhpcy4kZW1pdChcInF1ZXJ5Y2hhbmdlXCIsIHsgYnViYmxlczogZmFsc2UgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZmlsdGVyZWRPcHRpb25zTGlzdENoYW5nZWQoKSB7XG4gICAgICAgIGlmICh0aGlzLiRmYXN0Q29udHJvbGxlci5pc0Nvbm5lY3RlZCkge1xuICAgICAgICAgICAgdGhpcy5zaG93Tm9PcHRpb25zID1cbiAgICAgICAgICAgICAgICB0aGlzLmZpbHRlcmVkT3B0aW9uc0xpc3QubGVuZ3RoID09PSAwICYmXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubWVudUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnW3JvbGU9XCJsaXN0aXRlbVwiXScpLmxlbmd0aCA9PT0gMDtcbiAgICAgICAgICAgIHRoaXMuc2V0Rm9jdXNlZE9wdGlvbih0aGlzLnNob3dOb09wdGlvbnMgPyAtMSA6IDApO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZseW91dE9wZW5DaGFuZ2VkKCkge1xuICAgICAgICBpZiAodGhpcy5mbHlvdXRPcGVuKSB7XG4gICAgICAgICAgICBET00ucXVldWVVcGRhdGUodGhpcy5zZXRSZWdpb25Qcm9wcyk7XG4gICAgICAgICAgICB0aGlzLiRlbWl0KFwibWVudW9wZW5pbmdcIiwgeyBidWJibGVzOiBmYWxzZSB9KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuJGVtaXQoXCJtZW51Y2xvc2luZ1wiLCB7IGJ1YmJsZXM6IGZhbHNlIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIHNob3dOb09wdGlvbnNDaGFuZ2VkKCkge1xuICAgICAgICBpZiAodGhpcy4kZmFzdENvbnRyb2xsZXIuaXNDb25uZWN0ZWQpIHtcbiAgICAgICAgICAgIERPTS5xdWV1ZVVwZGF0ZSgoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRGb2N1c2VkT3B0aW9uKDApO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgICAgIHN1cGVyLmNvbm5lY3RlZENhbGxiYWNrKCk7XG4gICAgICAgIHRoaXMubGlzdEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KHRoaXMuc2VsZWN0ZWRMaXN0VGFnKTtcbiAgICAgICAgdGhpcy5hcHBlbmRDaGlsZCh0aGlzLmxpc3RFbGVtZW50KTtcbiAgICAgICAgdGhpcy5pdGVtc1BsYWNlaG9sZGVyRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUNvbW1lbnQoXCJcIik7XG4gICAgICAgIHRoaXMubGlzdEVsZW1lbnQuYXBwZW5kKHRoaXMuaXRlbXNQbGFjZWhvbGRlckVsZW1lbnQpO1xuICAgICAgICB0aGlzLmlucHV0RWxlbWVudFZpZXcgPSBwaWNrZXJJbnB1dFRlbXBsYXRlLnJlbmRlcih0aGlzLCB0aGlzLmxpc3RFbGVtZW50KTtcbiAgICAgICAgY29uc3QgbWF0Y2ggPSB0aGlzLm1lbnVUYWcudG9VcHBlckNhc2UoKTtcbiAgICAgICAgdGhpcy5tZW51RWxlbWVudCA9IEFycmF5LmZyb20odGhpcy5jaGlsZHJlbikuZmluZCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnQudGFnTmFtZSA9PT0gbWF0Y2g7XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAodGhpcy5tZW51RWxlbWVudCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aGlzLm1lbnVFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0aGlzLm1lbnVUYWcpO1xuICAgICAgICAgICAgdGhpcy5hcHBlbmRDaGlsZCh0aGlzLm1lbnVFbGVtZW50KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5tZW51RWxlbWVudC5pZCA9PT0gXCJcIikge1xuICAgICAgICAgICAgdGhpcy5tZW51RWxlbWVudC5pZCA9IHVuaXF1ZUlkKFwibGlzdGJveC1cIik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5tZW51SWQgPSB0aGlzLm1lbnVFbGVtZW50LmlkO1xuICAgICAgICB0aGlzLm9wdGlvbnNQbGFjZWhvbGRlciA9IGRvY3VtZW50LmNyZWF0ZUNvbW1lbnQoXCJcIik7XG4gICAgICAgIHRoaXMubWVudUVsZW1lbnQuYXBwZW5kKHRoaXMub3B0aW9uc1BsYWNlaG9sZGVyKTtcbiAgICAgICAgdGhpcy51cGRhdGVNZW51Q29uZmlnKCk7XG4gICAgICAgIERPTS5xdWV1ZVVwZGF0ZSgoKSA9PiB0aGlzLmluaXRpYWxpemUoKSk7XG4gICAgfVxuICAgIGRpc2Nvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgICAgICBzdXBlci5kaXNjb25uZWN0ZWRDYWxsYmFjaygpO1xuICAgICAgICB0aGlzLnRvZ2dsZUZseW91dChmYWxzZSk7XG4gICAgICAgIHRoaXMuaW5wdXRFbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCB0aGlzLmhhbmRsZVRleHRJbnB1dCk7XG4gICAgICAgIHRoaXMuaW5wdXRFbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLmhhbmRsZUlucHV0Q2xpY2spO1xuICAgICAgICBpZiAodGhpcy5pbnB1dEVsZW1lbnRWaWV3ICE9PSBudWxsKSB7XG4gICAgICAgICAgICB0aGlzLmlucHV0RWxlbWVudFZpZXcuZGlzcG9zZSgpO1xuICAgICAgICAgICAgdGhpcy5pbnB1dEVsZW1lbnRWaWV3ID0gbnVsbDtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBNb3ZlIGZvY3VzIHRvIHRoZSBpbnB1dCBlbGVtZW50XG4gICAgICogQHB1YmxpY1xuICAgICAqL1xuICAgIGZvY3VzKCkge1xuICAgICAgICB0aGlzLmlucHV0RWxlbWVudC5mb2N1cygpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBJbml0aWFsaXplIHRoZSBjb21wb25lbnQuICBUaGlzIGlzIGRlbGF5ZWQgYSBmcmFtZSB0byBlbnN1cmUgY2hpbGRyZW4gYXJlIGNvbm5lY3RlZCBhcyB3ZWxsLlxuICAgICAqL1xuICAgIGluaXRpYWxpemUoKSB7XG4gICAgICAgIHRoaXMudXBkYXRlTGlzdEl0ZW1UZW1wbGF0ZSgpO1xuICAgICAgICB0aGlzLnVwZGF0ZU9wdGlvblRlbXBsYXRlKCk7XG4gICAgICAgIHRoaXMuaXRlbXNSZXBlYXRCZWhhdmlvciA9IG5ldyBSZXBlYXREaXJlY3RpdmUoeCA9PiB4LnNlbGVjdGVkSXRlbXMsIHggPT4geC5hY3RpdmVMaXN0SXRlbVRlbXBsYXRlLCB7IHBvc2l0aW9uaW5nOiB0cnVlIH0pLmNyZWF0ZUJlaGF2aW9yKHRoaXMuaXRlbXNQbGFjZWhvbGRlckVsZW1lbnQpO1xuICAgICAgICB0aGlzLmlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgdGhpcy5oYW5kbGVUZXh0SW5wdXQpO1xuICAgICAgICB0aGlzLmlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5oYW5kbGVJbnB1dENsaWNrKTtcbiAgICAgICAgLyogZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1ub24tbnVsbC1hc3NlcnRpb24gKi9cbiAgICAgICAgdGhpcy4kZmFzdENvbnRyb2xsZXIuYWRkQmVoYXZpb3JzKFt0aGlzLml0ZW1zUmVwZWF0QmVoYXZpb3JdKTtcbiAgICAgICAgdGhpcy5tZW51RWxlbWVudC5zdWdnZXN0aW9uc0F2YWlsYWJsZVRleHQgPSB0aGlzLnN1Z2dlc3Rpb25zQXZhaWxhYmxlVGV4dDtcbiAgICAgICAgdGhpcy5tZW51RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwib3B0aW9uc3VwZGF0ZWRcIiwgdGhpcy5oYW5kbGVNZW51T3B0aW9uc1VwZGF0ZWQpO1xuICAgICAgICB0aGlzLm9wdGlvbnNSZXBlYXRCZWhhdmlvciA9IG5ldyBSZXBlYXREaXJlY3RpdmUoeCA9PiB4LmZpbHRlcmVkT3B0aW9uc0xpc3QsIHggPT4geC5hY3RpdmVNZW51T3B0aW9uVGVtcGxhdGUsIHsgcG9zaXRpb25pbmc6IHRydWUgfSkuY3JlYXRlQmVoYXZpb3IodGhpcy5vcHRpb25zUGxhY2Vob2xkZXIpO1xuICAgICAgICAvKiBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLW5vbi1udWxsLWFzc2VydGlvbiAqL1xuICAgICAgICB0aGlzLiRmYXN0Q29udHJvbGxlci5hZGRCZWhhdmlvcnMoW3RoaXMub3B0aW9uc1JlcGVhdEJlaGF2aW9yXSk7XG4gICAgICAgIHRoaXMuaGFuZGxlU2VsZWN0aW9uQ2hhbmdlKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRvZ2dsZXMgdGhlIG1lbnUgZmx5b3V0XG4gICAgICovXG4gICAgdG9nZ2xlRmx5b3V0KG9wZW4pIHtcbiAgICAgICAgaWYgKHRoaXMuZmx5b3V0T3BlbiA9PT0gb3Blbikge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcGVuICYmIGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgPT09IHRoaXMuaW5wdXRFbGVtZW50KSB7XG4gICAgICAgICAgICB0aGlzLmZseW91dE9wZW4gPSBvcGVuO1xuICAgICAgICAgICAgRE9NLnF1ZXVlVXBkYXRlKCgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5tZW51RWxlbWVudCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0Rm9jdXNlZE9wdGlvbigwKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzYWJsZU1lbnUoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmZseW91dE9wZW4gPSBmYWxzZTtcbiAgICAgICAgdGhpcy5kaXNhYmxlTWVudSgpO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEhhbmRsZSB0aGUgbWVudSBvcHRpb25zIHVwZGF0ZWQgZXZlbnQgZnJvbSB0aGUgY2hpbGQgbWVudVxuICAgICAqL1xuICAgIGhhbmRsZU1lbnVPcHRpb25zVXBkYXRlZChlKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgaWYgKHRoaXMuZmx5b3V0T3Blbikge1xuICAgICAgICAgICAgdGhpcy5zZXRGb2N1c2VkT3B0aW9uKDApO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEhhbmRsZSBrZXkgZG93biBldmVudHMuXG4gICAgICovXG4gICAgaGFuZGxlS2V5RG93bihlKSB7XG4gICAgICAgIGlmIChlLmRlZmF1bHRQcmV2ZW50ZWQpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBzd2l0Y2ggKGUua2V5KSB7XG4gICAgICAgICAgICAvLyBUT0RPOiB3aGF0IHNob3VsZCBcImhvbWVcIiBhbmQgXCJlbmRcIiBrZXlzIGRvLCBleGFjdGx5P1xuICAgICAgICAgICAgLy9cbiAgICAgICAgICAgIC8vIGNhc2Uga2V5SG9tZToge1xuICAgICAgICAgICAgLy8gICAgIGlmICghdGhpcy5mbHlvdXRPcGVuKSB7XG4gICAgICAgICAgICAvLyAgICAgICAgIHRoaXMudG9nZ2xlRmx5b3V0KHRydWUpO1xuICAgICAgICAgICAgLy8gICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyAgICAgICAgIGlmICh0aGlzLm1lbnVFbGVtZW50Lm9wdGlvbkVsZW1lbnRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgIHRoaXMuc2V0Rm9jdXNlZE9wdGlvbigwKTtcbiAgICAgICAgICAgIC8vICAgICAgICAgfVxuICAgICAgICAgICAgLy8gICAgIH1cbiAgICAgICAgICAgIC8vICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAvLyB9XG4gICAgICAgICAgICAvLyBjYXNlIGtleUVuZDoge1xuICAgICAgICAgICAgLy8gICAgIGlmICghdGhpcy5mbHlvdXRPcGVuKSB7XG4gICAgICAgICAgICAvLyAgICAgICAgIHRoaXMudG9nZ2xlRmx5b3V0KHRydWUpO1xuICAgICAgICAgICAgLy8gICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyAgICAgICAgIGlmICh0aGlzLm1lbnVFbGVtZW50Lm9wdGlvbkVsZW1lbnRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgIHRoaXMudG9nZ2xlRmx5b3V0KHRydWUpO1xuICAgICAgICAgICAgLy8gICAgICAgICAgICAgdGhpcy5zZXRGb2N1c2VkT3B0aW9uKHRoaXMubWVudUVsZW1lbnQub3B0aW9uRWxlbWVudHMubGVuZ3RoIC0gMSk7XG4gICAgICAgICAgICAvLyAgICAgICAgIH1cbiAgICAgICAgICAgIC8vICAgICB9XG4gICAgICAgICAgICAvLyAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgLy8gfVxuICAgICAgICAgICAgY2FzZSBrZXlBcnJvd0Rvd246IHtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuZmx5b3V0T3Blbikge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRvZ2dsZUZseW91dCh0cnVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG5leHRGb2N1c09wdGlvbkluZGV4ID0gdGhpcy5mbHlvdXRPcGVuXG4gICAgICAgICAgICAgICAgICAgICAgICA/IE1hdGgubWluKHRoaXMubWVudUZvY3VzSW5kZXggKyAxLCB0aGlzLm1lbnVFbGVtZW50Lm9wdGlvbkVsZW1lbnRzLmxlbmd0aCAtIDEpXG4gICAgICAgICAgICAgICAgICAgICAgICA6IDA7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0Rm9jdXNlZE9wdGlvbihuZXh0Rm9jdXNPcHRpb25JbmRleCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhc2Uga2V5QXJyb3dVcDoge1xuICAgICAgICAgICAgICAgIGlmICghdGhpcy5mbHlvdXRPcGVuKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudG9nZ2xlRmx5b3V0KHRydWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcHJldmlvdXNGb2N1c09wdGlvbkluZGV4ID0gdGhpcy5mbHlvdXRPcGVuXG4gICAgICAgICAgICAgICAgICAgICAgICA/IE1hdGgubWF4KHRoaXMubWVudUZvY3VzSW5kZXggLSAxLCAwKVxuICAgICAgICAgICAgICAgICAgICAgICAgOiAwO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldEZvY3VzZWRPcHRpb24ocHJldmlvdXNGb2N1c09wdGlvbkluZGV4KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FzZSBrZXlFc2NhcGU6IHtcbiAgICAgICAgICAgICAgICB0aGlzLnRvZ2dsZUZseW91dChmYWxzZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FzZSBrZXlFbnRlcjoge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLm1lbnVGb2N1c0luZGV4ICE9PSAtMSAmJlxuICAgICAgICAgICAgICAgICAgICB0aGlzLm1lbnVFbGVtZW50Lm9wdGlvbkVsZW1lbnRzLmxlbmd0aCA+IHRoaXMubWVudUZvY3VzSW5kZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tZW51RWxlbWVudC5vcHRpb25FbGVtZW50c1t0aGlzLm1lbnVGb2N1c0luZGV4XS5jbGljaygpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXNlIGtleUFycm93UmlnaHQ6IHtcbiAgICAgICAgICAgICAgICBpZiAoZG9jdW1lbnQuYWN0aXZlRWxlbWVudCAhPT0gdGhpcy5pbnB1dEVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbmNyZW1lbnRGb2N1c2VkSXRlbSgxKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBkb24ndCBibG9jayBpZiBhcnJvdyBrZXlzIG1vdmluZyBjYXJldCBpbiBpbnB1dCBlbGVtZW50XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXNlIGtleUFycm93TGVmdDoge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmlucHV0RWxlbWVudC5zZWxlY3Rpb25TdGFydCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmluY3JlbWVudEZvY3VzZWRJdGVtKC0xKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBkb24ndCBibG9jayBpZiBhcnJvdyBrZXlzIG1vdmluZyBjYXJldCBpbiBpbnB1dCBlbGVtZW50XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXNlIGtleURlbGV0ZTpcbiAgICAgICAgICAgIGNhc2Uga2V5QmFja3NwYWNlOiB7XG4gICAgICAgICAgICAgICAgaWYgKGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChkb2N1bWVudC5hY3RpdmVFbGVtZW50ID09PSB0aGlzLmlucHV0RWxlbWVudCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5pbnB1dEVsZW1lbnQuc2VsZWN0aW9uU3RhcnQgPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0aW9uID0gdGhpcy5zZWxlY3RlZEl0ZW1zXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnNsaWNlKDAsIHRoaXMuc2VsZWN0ZWRJdGVtcy5sZW5ndGggLSAxKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50b1N0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50b2dnbGVGbHlvdXQoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIC8vIGxldCB0ZXh0IGRlbGV0aW9uIHByb2NlZWRcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IHNlbGVjdGVkSXRlbXMgPSBBcnJheS5mcm9tKHRoaXMubGlzdEVsZW1lbnQuY2hpbGRyZW4pO1xuICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRGb2N1c2VkSXRlbUluZGV4ID0gc2VsZWN0ZWRJdGVtcy5pbmRleE9mKGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQpO1xuICAgICAgICAgICAgICAgIGlmIChjdXJyZW50Rm9jdXNlZEl0ZW1JbmRleCA+IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGRlbGV0ZSBjdXJyZW50bHkgZm9jdXNlZCBpdGVtXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0aW9uID0gdGhpcy5zZWxlY3RlZEl0ZW1zXG4gICAgICAgICAgICAgICAgICAgICAgICAuc3BsaWNlKGN1cnJlbnRGb2N1c2VkSXRlbUluZGV4LCAxKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgIERPTS5xdWV1ZVVwZGF0ZSgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZEl0ZW1zW01hdGgubWluKHNlbGVjdGVkSXRlbXMubGVuZ3RoLCBjdXJyZW50Rm9jdXNlZEl0ZW1JbmRleCldLmZvY3VzKCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMudG9nZ2xlRmx5b3V0KHRydWUpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSGFuZGxlIGZvY3VzIGluIGV2ZW50cy5cbiAgICAgKi9cbiAgICBoYW5kbGVGb2N1c0luKGUpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBIYW5kbGUgZm9jdXMgb3V0IGV2ZW50cy5cbiAgICAgKi9cbiAgICBoYW5kbGVGb2N1c091dChlKSB7XG4gICAgICAgIGlmICh0aGlzLm1lbnVFbGVtZW50ID09PSB1bmRlZmluZWQgfHxcbiAgICAgICAgICAgICF0aGlzLm1lbnVFbGVtZW50LmNvbnRhaW5zKGUucmVsYXRlZFRhcmdldCkpIHtcbiAgICAgICAgICAgIHRoaXMudG9nZ2xlRmx5b3V0KGZhbHNlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBsaXN0IG9mIHNlbGVjdGVkIGl0ZW1zIGhhcyBjaGFuZ2VkXG4gICAgICovXG4gICAgaGFuZGxlU2VsZWN0aW9uQ2hhbmdlKCkge1xuICAgICAgICBpZiAodGhpcy5zZWxlY3RlZEl0ZW1zLnRvU3RyaW5nKCkgPT09IHRoaXMuc2VsZWN0aW9uKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zZWxlY3RlZEl0ZW1zID0gdGhpcy5zZWxlY3Rpb24gPT09IFwiXCIgPyBbXSA6IHRoaXMuc2VsZWN0aW9uLnNwbGl0KFwiLFwiKTtcbiAgICAgICAgdGhpcy51cGRhdGVGaWx0ZXJlZE9wdGlvbnMoKTtcbiAgICAgICAgRE9NLnF1ZXVlVXBkYXRlKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuY2hlY2tNYXhJdGVtcygpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy4kZW1pdChcInNlbGVjdGlvbmNoYW5nZVwiLCB7IGJ1YmJsZXM6IGZhbHNlIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBbmNob3JlZCByZWdpb24gaXMgbG9hZGVkLCBtZW51IGFuZCBvcHRpb25zIGV4aXN0IGluIHRoZSBET00uXG4gICAgICovXG4gICAgaGFuZGxlUmVnaW9uTG9hZGVkKGUpIHtcbiAgICAgICAgRE9NLnF1ZXVlVXBkYXRlKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuc2V0Rm9jdXNlZE9wdGlvbigwKTtcbiAgICAgICAgICAgIHRoaXMuJGVtaXQoXCJtZW51bG9hZGVkXCIsIHsgYnViYmxlczogZmFsc2UgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDaGVja3MgaWYgdGhlIG1heGltdW0gbnVtYmVyIG9mIGl0ZW1zIGhhcyBiZWVuIGNob3NlbiBhbmQgdXBkYXRlcyB0aGUgdWkuXG4gICAgICovXG4gICAgY2hlY2tNYXhJdGVtcygpIHtcbiAgICAgICAgaWYgKHRoaXMuaW5wdXRFbGVtZW50ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5tYXhTZWxlY3RlZCAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkSXRlbXMubGVuZ3RoID49IHRoaXMubWF4U2VsZWN0ZWQpIHtcbiAgICAgICAgICAgIGlmIChkb2N1bWVudC5hY3RpdmVFbGVtZW50ID09PSB0aGlzLmlucHV0RWxlbWVudCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHNlbGVjdGVkSXRlbUluc3RhbmNlcyA9IEFycmF5LmZyb20odGhpcy5saXN0RWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiW3JvbGU9J2xpc3RpdGVtJ11cIikpO1xuICAgICAgICAgICAgICAgIHNlbGVjdGVkSXRlbUluc3RhbmNlc1tzZWxlY3RlZEl0ZW1JbnN0YW5jZXMubGVuZ3RoIC0gMV0uZm9jdXMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuaW5wdXRFbGVtZW50LmhpZGRlbiA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmlucHV0RWxlbWVudC5oaWRkZW4gPSBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBBIGxpc3QgaXRlbSBoYXMgYmVlbiBpbnZva2VkLlxuICAgICAqL1xuICAgIGhhbmRsZUl0ZW1JbnZva2UoZSkge1xuICAgICAgICBpZiAoZS5kZWZhdWx0UHJldmVudGVkKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGUudGFyZ2V0IGluc3RhbmNlb2YgUGlja2VyTGlzdEl0ZW0pIHtcbiAgICAgICAgICAgIGNvbnN0IGxpc3RJdGVtcyA9IEFycmF5LmZyb20odGhpcy5saXN0RWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiW3JvbGU9J2xpc3RpdGVtJ11cIikpO1xuICAgICAgICAgICAgY29uc3QgaXRlbUluZGV4ID0gbGlzdEl0ZW1zLmluZGV4T2YoZS50YXJnZXQpO1xuICAgICAgICAgICAgaWYgKGl0ZW1JbmRleCAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBuZXdTZWxlY3Rpb24gPSB0aGlzLnNlbGVjdGVkSXRlbXMuc2xpY2UoKTtcbiAgICAgICAgICAgICAgICBuZXdTZWxlY3Rpb24uc3BsaWNlKGl0ZW1JbmRleCwgMSk7XG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3Rpb24gPSBuZXdTZWxlY3Rpb24udG9TdHJpbmcoKTtcbiAgICAgICAgICAgICAgICBET00ucXVldWVVcGRhdGUoKCkgPT4gdGhpcy5pbmNyZW1lbnRGb2N1c2VkSXRlbSgwKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEEgbWVudSBvcHRpb24gaGFzIGJlZW4gaW52b2tlZC5cbiAgICAgKi9cbiAgICBoYW5kbGVPcHRpb25JbnZva2UoZSkge1xuICAgICAgICBpZiAoZS5kZWZhdWx0UHJldmVudGVkKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGUudGFyZ2V0IGluc3RhbmNlb2YgUGlja2VyTWVudU9wdGlvbikge1xuICAgICAgICAgICAgaWYgKGUudGFyZ2V0LnZhbHVlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGlvbiA9IGAke3RoaXMuc2VsZWN0aW9ufSR7dGhpcy5zZWxlY3Rpb24gPT09IFwiXCIgPyBcIlwiIDogXCIsXCJ9JHtlLnRhcmdldC52YWx1ZX1gO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5pbnB1dEVsZW1lbnQudmFsdWUgPSBcIlwiO1xuICAgICAgICAgICAgdGhpcy5xdWVyeSA9IFwiXCI7XG4gICAgICAgICAgICB0aGlzLmlucHV0RWxlbWVudC5mb2N1cygpO1xuICAgICAgICAgICAgdGhpcy50b2dnbGVGbHlvdXQoZmFsc2UpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIC8vIGNvbnN0IHZhbHVlOiBzdHJpbmcgPSAoZS50YXJnZXQgYXMgUGlja2VyTWVudU9wdGlvbikudmFsdWU7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBJbmNyZW1lbnRzIHRoZSBmb2N1c2VkIGxpc3QgaXRlbSBieSB0aGUgc3BlY2lmaWVkIGFtb3VudFxuICAgICAqL1xuICAgIGluY3JlbWVudEZvY3VzZWRJdGVtKGluY3JlbWVudCkge1xuICAgICAgICBpZiAodGhpcy5zZWxlY3RlZEl0ZW1zLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgdGhpcy5pbnB1dEVsZW1lbnQuZm9jdXMoKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBzZWxlY3RlZEl0ZW1zQXNFbGVtZW50cyA9IEFycmF5LmZyb20odGhpcy5saXN0RWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiW3JvbGU9J2xpc3RpdGVtJ11cIikpO1xuICAgICAgICBpZiAoZG9jdW1lbnQuYWN0aXZlRWxlbWVudCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgbGV0IGN1cnJlbnRGb2N1c2VkSXRlbUluZGV4ID0gc2VsZWN0ZWRJdGVtc0FzRWxlbWVudHMuaW5kZXhPZihkb2N1bWVudC5hY3RpdmVFbGVtZW50KTtcbiAgICAgICAgICAgIGlmIChjdXJyZW50Rm9jdXNlZEl0ZW1JbmRleCA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICAvLyB1c2UgdGhlIGlucHV0IGVsZW1lbnRcbiAgICAgICAgICAgICAgICBjdXJyZW50Rm9jdXNlZEl0ZW1JbmRleCA9IHNlbGVjdGVkSXRlbXNBc0VsZW1lbnRzLmxlbmd0aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IG5ld0ZvY3VzZWRJdGVtSW5kZXggPSBNYXRoLm1pbihzZWxlY3RlZEl0ZW1zQXNFbGVtZW50cy5sZW5ndGgsIE1hdGgubWF4KDAsIGN1cnJlbnRGb2N1c2VkSXRlbUluZGV4ICsgaW5jcmVtZW50KSk7XG4gICAgICAgICAgICBpZiAobmV3Rm9jdXNlZEl0ZW1JbmRleCA9PT0gc2VsZWN0ZWRJdGVtc0FzRWxlbWVudHMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMubWF4U2VsZWN0ZWQgIT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkSXRlbXMubGVuZ3RoID49IHRoaXMubWF4U2VsZWN0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRJdGVtc0FzRWxlbWVudHNbbmV3Rm9jdXNlZEl0ZW1JbmRleCAtIDFdLmZvY3VzKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmlucHV0RWxlbWVudC5mb2N1cygpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHNlbGVjdGVkSXRlbXNBc0VsZW1lbnRzW25ld0ZvY3VzZWRJdGVtSW5kZXhdLmZvY3VzKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogRGlzYWJsZXMgdGhlIG1lbnUuIE5vdGUgdGhhdCB0aGUgbWVudSBjYW4gYmUgb3BlbiwganVzdCBkb2Vucyd0IGhhdmUgYW55IHZhbGlkIG9wdGlvbnMgb24gZGlzcGxheS5cbiAgICAgKi9cbiAgICBkaXNhYmxlTWVudSgpIHtcbiAgICAgICAgdmFyIF9hLCBfYiwgX2M7XG4gICAgICAgIHRoaXMubWVudUZvY3VzSW5kZXggPSAtMTtcbiAgICAgICAgdGhpcy5tZW51Rm9jdXNPcHRpb25JZCA9IHVuZGVmaW5lZDtcbiAgICAgICAgKF9hID0gdGhpcy5pbnB1dEVsZW1lbnQpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5yZW1vdmVBdHRyaWJ1dGUoXCJhcmlhLWFjdGl2ZWRlc2NlbmRhbnRcIik7XG4gICAgICAgIChfYiA9IHRoaXMuaW5wdXRFbGVtZW50KSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IucmVtb3ZlQXR0cmlidXRlKFwiYXJpYS1vd25zXCIpO1xuICAgICAgICAoX2MgPSB0aGlzLmlucHV0RWxlbWVudCkgPT09IG51bGwgfHwgX2MgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9jLnJlbW92ZUF0dHJpYnV0ZShcImFyaWEtZXhwYW5kZWRcIik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldHMgdGhlIGN1cnJlbnRseSBmb2N1c2VkIG1lbnUgb3B0aW9uIGJ5IGluZGV4XG4gICAgICovXG4gICAgc2V0Rm9jdXNlZE9wdGlvbihvcHRpb25JbmRleCkge1xuICAgICAgICBpZiAoIXRoaXMuZmx5b3V0T3BlbiB8fFxuICAgICAgICAgICAgb3B0aW9uSW5kZXggPT09IC0xIHx8XG4gICAgICAgICAgICB0aGlzLnNob3dOb09wdGlvbnMgfHxcbiAgICAgICAgICAgIHRoaXMuc2hvd0xvYWRpbmcpIHtcbiAgICAgICAgICAgIHRoaXMuZGlzYWJsZU1lbnUoKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5tZW51RWxlbWVudC5vcHRpb25FbGVtZW50cy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm1lbnVFbGVtZW50Lm9wdGlvbkVsZW1lbnRzLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKFwiYXJpYS1zZWxlY3RlZFwiLCBcImZhbHNlXCIpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5tZW51Rm9jdXNJbmRleCA9IG9wdGlvbkluZGV4O1xuICAgICAgICBpZiAodGhpcy5tZW51Rm9jdXNJbmRleCA+IHRoaXMubWVudUVsZW1lbnQub3B0aW9uRWxlbWVudHMubGVuZ3RoIC0gMSkge1xuICAgICAgICAgICAgdGhpcy5tZW51Rm9jdXNJbmRleCA9IHRoaXMubWVudUVsZW1lbnQub3B0aW9uRWxlbWVudHMubGVuZ3RoIC0gMTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm1lbnVGb2N1c09wdGlvbklkID0gdGhpcy5tZW51RWxlbWVudC5vcHRpb25FbGVtZW50c1t0aGlzLm1lbnVGb2N1c0luZGV4XS5pZDtcbiAgICAgICAgdGhpcy5pbnB1dEVsZW1lbnQuc2V0QXR0cmlidXRlKFwiYXJpYS1vd25zXCIsIHRoaXMubWVudUlkKTtcbiAgICAgICAgdGhpcy5pbnB1dEVsZW1lbnQuc2V0QXR0cmlidXRlKFwiYXJpYS1leHBhbmRlZFwiLCBcInRydWVcIik7XG4gICAgICAgIHRoaXMuaW5wdXRFbGVtZW50LnNldEF0dHJpYnV0ZShcImFyaWEtYWN0aXZlZGVzY2VuZGFudFwiLCB0aGlzLm1lbnVGb2N1c09wdGlvbklkKTtcbiAgICAgICAgY29uc3QgZm9jdXNlZE9wdGlvbiA9IHRoaXMubWVudUVsZW1lbnQub3B0aW9uRWxlbWVudHNbdGhpcy5tZW51Rm9jdXNJbmRleF07XG4gICAgICAgIGZvY3VzZWRPcHRpb24uc2V0QXR0cmlidXRlKFwiYXJpYS1zZWxlY3RlZFwiLCBcInRydWVcIik7XG4gICAgICAgIHRoaXMubWVudUVsZW1lbnQuc2Nyb2xsVG8oMCwgZm9jdXNlZE9wdGlvbi5vZmZzZXRUb3ApO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBVcGRhdGVzIHRoZSB0ZW1wbGF0ZSB1c2VkIGZvciB0aGUgbGlzdCBpdGVtIHJlcGVhdCBiZWhhdmlvclxuICAgICAqL1xuICAgIHVwZGF0ZUxpc3RJdGVtVGVtcGxhdGUoKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgdGhpcy5hY3RpdmVMaXN0SXRlbVRlbXBsYXRlID1cbiAgICAgICAgICAgIChfYSA9IHRoaXMubGlzdEl0ZW1UZW1wbGF0ZSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogdGhpcy5kZWZhdWx0TGlzdEl0ZW1UZW1wbGF0ZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVXBkYXRlcyB0aGUgdGVtcGxhdGUgdXNlZCBmb3IgdGhlIG1lbnUgb3B0aW9uIHJlcGVhdCBiZWhhdmlvclxuICAgICAqL1xuICAgIHVwZGF0ZU9wdGlvblRlbXBsYXRlKCkge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIHRoaXMuYWN0aXZlTWVudU9wdGlvblRlbXBsYXRlID1cbiAgICAgICAgICAgIChfYSA9IHRoaXMubWVudU9wdGlvblRlbXBsYXRlKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiB0aGlzLmRlZmF1bHRNZW51T3B0aW9uVGVtcGxhdGU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFVwZGF0ZXMgdGhlIGZpbHRlcmVkIG9wdGlvbnMgYXJyYXlcbiAgICAgKi9cbiAgICB1cGRhdGVGaWx0ZXJlZE9wdGlvbnMoKSB7XG4gICAgICAgIHRoaXMuZmlsdGVyZWRPcHRpb25zTGlzdCA9IHRoaXMub3B0aW9uc0xpc3Quc2xpY2UoMCk7XG4gICAgICAgIGlmICh0aGlzLmZpbHRlclNlbGVjdGVkKSB7XG4gICAgICAgICAgICB0aGlzLmZpbHRlcmVkT3B0aW9uc0xpc3QgPSB0aGlzLmZpbHRlcmVkT3B0aW9uc0xpc3QuZmlsdGVyKGVsID0+IHRoaXMuc2VsZWN0ZWRJdGVtcy5pbmRleE9mKGVsKSA9PT0gLTEpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmZpbHRlclF1ZXJ5ICYmIHRoaXMucXVlcnkgIT09IFwiXCIgJiYgdGhpcy5xdWVyeSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aGlzLmZpbHRlcmVkT3B0aW9uc0xpc3QgPSB0aGlzLmZpbHRlcmVkT3B0aW9uc0xpc3QuZmlsdGVyKGVsID0+IGVsLmluZGV4T2YodGhpcy5xdWVyeSkgIT09IC0xKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBVcGRhdGVzIHRoZSBtZW51IGNvbmZpZ3VyYXRpb25cbiAgICAgKi9cbiAgICB1cGRhdGVNZW51Q29uZmlnKCkge1xuICAgICAgICBsZXQgbmV3Q29uZmlnID0gdGhpcy5jb25maWdMb29rdXBbdGhpcy5tZW51UGxhY2VtZW50XTtcbiAgICAgICAgaWYgKG5ld0NvbmZpZyA9PT0gbnVsbCkge1xuICAgICAgICAgICAgbmV3Q29uZmlnID0gRmx5b3V0UG9zQm90dG9tRmlsbDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm1lbnVDb25maWcgPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIG5ld0NvbmZpZyksIHsgYXV0b1VwZGF0ZU1vZGU6IFwiYXV0b1wiLCBmaXhlZFBsYWNlbWVudDogdHJ1ZSwgaG9yaXpvbnRhbFZpZXdwb3J0TG9jazogZmFsc2UsIHZlcnRpY2FsVmlld3BvcnRMb2NrOiBmYWxzZSB9KTtcbiAgICB9XG59XG5fX2RlY29yYXRlKFtcbiAgICBhdHRyKHsgYXR0cmlidXRlOiBcInNlbGVjdGlvblwiIH0pXG5dLCBQaWNrZXIucHJvdG90eXBlLCBcInNlbGVjdGlvblwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgYXR0cih7IGF0dHJpYnV0ZTogXCJvcHRpb25zXCIgfSlcbl0sIFBpY2tlci5wcm90b3R5cGUsIFwib3B0aW9uc1wiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgYXR0cih7IGF0dHJpYnV0ZTogXCJmaWx0ZXItc2VsZWN0ZWRcIiwgbW9kZTogXCJib29sZWFuXCIgfSlcbl0sIFBpY2tlci5wcm90b3R5cGUsIFwiZmlsdGVyU2VsZWN0ZWRcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIGF0dHIoeyBhdHRyaWJ1dGU6IFwiZmlsdGVyLXF1ZXJ5XCIsIG1vZGU6IFwiYm9vbGVhblwiIH0pXG5dLCBQaWNrZXIucHJvdG90eXBlLCBcImZpbHRlclF1ZXJ5XCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBhdHRyKHsgYXR0cmlidXRlOiBcIm1heC1zZWxlY3RlZFwiIH0pXG5dLCBQaWNrZXIucHJvdG90eXBlLCBcIm1heFNlbGVjdGVkXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBhdHRyKHsgYXR0cmlidXRlOiBcIm5vLXN1Z2dlc3Rpb25zLXRleHRcIiB9KVxuXSwgUGlja2VyLnByb3RvdHlwZSwgXCJub1N1Z2dlc3Rpb25zVGV4dFwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgYXR0cih7IGF0dHJpYnV0ZTogXCJzdWdnZXN0aW9ucy1hdmFpbGFibGUtdGV4dFwiIH0pXG5dLCBQaWNrZXIucHJvdG90eXBlLCBcInN1Z2dlc3Rpb25zQXZhaWxhYmxlVGV4dFwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgYXR0cih7IGF0dHJpYnV0ZTogXCJsb2FkaW5nLXRleHRcIiB9KVxuXSwgUGlja2VyLnByb3RvdHlwZSwgXCJsb2FkaW5nVGV4dFwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgYXR0cih7IGF0dHJpYnV0ZTogXCJsYWJlbFwiIH0pXG5dLCBQaWNrZXIucHJvdG90eXBlLCBcImxhYmVsXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBhdHRyKHsgYXR0cmlidXRlOiBcImxhYmVsbGVkYnlcIiB9KVxuXSwgUGlja2VyLnByb3RvdHlwZSwgXCJsYWJlbGxlZEJ5XCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBhdHRyKHsgYXR0cmlidXRlOiBcInBsYWNlaG9sZGVyXCIgfSlcbl0sIFBpY2tlci5wcm90b3R5cGUsIFwicGxhY2Vob2xkZXJcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIGF0dHIoeyBhdHRyaWJ1dGU6IFwibWVudS1wbGFjZW1lbnRcIiB9KVxuXSwgUGlja2VyLnByb3RvdHlwZSwgXCJtZW51UGxhY2VtZW50XCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBvYnNlcnZhYmxlXG5dLCBQaWNrZXIucHJvdG90eXBlLCBcInNob3dMb2FkaW5nXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBvYnNlcnZhYmxlXG5dLCBQaWNrZXIucHJvdG90eXBlLCBcImxpc3RJdGVtVGVtcGxhdGVcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIG9ic2VydmFibGVcbl0sIFBpY2tlci5wcm90b3R5cGUsIFwiZGVmYXVsdExpc3RJdGVtVGVtcGxhdGVcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIG9ic2VydmFibGVcbl0sIFBpY2tlci5wcm90b3R5cGUsIFwiYWN0aXZlTGlzdEl0ZW1UZW1wbGF0ZVwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgb2JzZXJ2YWJsZVxuXSwgUGlja2VyLnByb3RvdHlwZSwgXCJtZW51T3B0aW9uVGVtcGxhdGVcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIG9ic2VydmFibGVcbl0sIFBpY2tlci5wcm90b3R5cGUsIFwiZGVmYXVsdE1lbnVPcHRpb25UZW1wbGF0ZVwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgb2JzZXJ2YWJsZVxuXSwgUGlja2VyLnByb3RvdHlwZSwgXCJhY3RpdmVNZW51T3B0aW9uVGVtcGxhdGVcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIG9ic2VydmFibGVcbl0sIFBpY2tlci5wcm90b3R5cGUsIFwibGlzdEl0ZW1Db250ZW50c1RlbXBsYXRlXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBvYnNlcnZhYmxlXG5dLCBQaWNrZXIucHJvdG90eXBlLCBcIm1lbnVPcHRpb25Db250ZW50c1RlbXBsYXRlXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBvYnNlcnZhYmxlXG5dLCBQaWNrZXIucHJvdG90eXBlLCBcIm9wdGlvbnNMaXN0XCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBvYnNlcnZhYmxlXG5dLCBQaWNrZXIucHJvdG90eXBlLCBcInF1ZXJ5XCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBvYnNlcnZhYmxlXG5dLCBQaWNrZXIucHJvdG90eXBlLCBcImZpbHRlcmVkT3B0aW9uc0xpc3RcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIG9ic2VydmFibGVcbl0sIFBpY2tlci5wcm90b3R5cGUsIFwiZmx5b3V0T3BlblwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgb2JzZXJ2YWJsZVxuXSwgUGlja2VyLnByb3RvdHlwZSwgXCJtZW51SWRcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIG9ic2VydmFibGVcbl0sIFBpY2tlci5wcm90b3R5cGUsIFwic2VsZWN0ZWRMaXN0VGFnXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBvYnNlcnZhYmxlXG5dLCBQaWNrZXIucHJvdG90eXBlLCBcIm1lbnVUYWdcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIG9ic2VydmFibGVcbl0sIFBpY2tlci5wcm90b3R5cGUsIFwibWVudUZvY3VzSW5kZXhcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIG9ic2VydmFibGVcbl0sIFBpY2tlci5wcm90b3R5cGUsIFwibWVudUZvY3VzT3B0aW9uSWRcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIG9ic2VydmFibGVcbl0sIFBpY2tlci5wcm90b3R5cGUsIFwic2hvd05vT3B0aW9uc1wiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgb2JzZXJ2YWJsZVxuXSwgUGlja2VyLnByb3RvdHlwZSwgXCJtZW51Q29uZmlnXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBvYnNlcnZhYmxlXG5dLCBQaWNrZXIucHJvdG90eXBlLCBcInNlbGVjdGVkSXRlbXNcIiwgdm9pZCAwKTtcbiIsImltcG9ydCB7IGh0bWwsIHJlZiwgd2hlbiB9IGZyb20gXCJAbWljcm9zb2Z0L2Zhc3QtZWxlbWVudFwiO1xuaW1wb3J0IHsgQW5jaG9yZWRSZWdpb24gfSBmcm9tIFwiLi4vYW5jaG9yZWQtcmVnaW9uL2FuY2hvcmVkLXJlZ2lvbi5qc1wiO1xuaW1wb3J0IHsgUGlja2VyTWVudSB9IGZyb20gXCIuL3BpY2tlci1tZW51LmpzXCI7XG5pbXBvcnQgeyBQaWNrZXJNZW51T3B0aW9uIH0gZnJvbSBcIi4vcGlja2VyLW1lbnUtb3B0aW9uLmpzXCI7XG5pbXBvcnQgeyBQaWNrZXJMaXN0IH0gZnJvbSBcIi4vcGlja2VyLWxpc3QuanNcIjtcbmltcG9ydCB7IFBpY2tlckxpc3RJdGVtIH0gZnJvbSBcIi4vcGlja2VyLWxpc3QtaXRlbS5qc1wiO1xuZnVuY3Rpb24gY3JlYXRlRGVmYXVsdExpc3RJdGVtVGVtcGxhdGUoY29udGV4dCkge1xuICAgIGNvbnN0IHBpY2tlckxpc3RJdGVtVGFnID0gY29udGV4dC50YWdGb3IoUGlja2VyTGlzdEl0ZW0pO1xuICAgIHJldHVybiBodG1sIGBcbiAgICA8JHtwaWNrZXJMaXN0SXRlbVRhZ31cbiAgICAgICAgdmFsdWU9XCIke3ggPT4geH1cIlxuICAgICAgICA6Y29udGVudHNUZW1wbGF0ZT1cIiR7KHgsIGMpID0+IGMucGFyZW50Lmxpc3RJdGVtQ29udGVudHNUZW1wbGF0ZX1cIlxuICAgID5cbiAgICA8LyR7cGlja2VyTGlzdEl0ZW1UYWd9PlxuICAgIGA7XG59XG5mdW5jdGlvbiBjcmVhdGVEZWZhdWx0TWVudU9wdGlvblRlbXBsYXRlKGNvbnRleHQpIHtcbiAgICBjb25zdCBwaWNrZXJNZW51T3B0aW9uVGFnID0gY29udGV4dC50YWdGb3IoUGlja2VyTWVudU9wdGlvbik7XG4gICAgcmV0dXJuIGh0bWwgYFxuICAgIDwke3BpY2tlck1lbnVPcHRpb25UYWd9XG4gICAgICAgIHZhbHVlPVwiJHt4ID0+IHh9XCJcbiAgICAgICAgOmNvbnRlbnRzVGVtcGxhdGU9XCIkeyh4LCBjKSA9PiBjLnBhcmVudC5tZW51T3B0aW9uQ29udGVudHNUZW1wbGF0ZX1cIlxuICAgID5cbiAgICA8LyR7cGlja2VyTWVudU9wdGlvblRhZ30+XG4gICAgYDtcbn1cbi8qKlxuICogVGhlIHRlbXBsYXRlIGZvciB0aGUgTGlzdCBQaWNrZXIgY29tcG9uZW50LlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgY29uc3QgcGlja2VyVGVtcGxhdGUgPSAoY29udGV4dCwgZGVmaW5pdGlvbikgPT4ge1xuICAgIGNvbnN0IGFuY2hvcmVkUmVnaW9uVGFnID0gY29udGV4dC50YWdGb3IoQW5jaG9yZWRSZWdpb24pO1xuICAgIGNvbnN0IHBpY2tlck1lbnVUYWcgPSBjb250ZXh0LnRhZ0ZvcihQaWNrZXJNZW51KTtcbiAgICBjb25zdCBwaWNrZXJMaXN0VGFnID0gY29udGV4dC50YWdGb3IoUGlja2VyTGlzdCk7XG4gICAgY29uc3QgcHJvZ3Jlc3NSaW5nVGFnID0gY29udGV4dC50YWdGb3IoUGlja2VyTGlzdCk7XG4gICAgY29uc3QgZGVmYXVsdExpc3RJdGVtVGVtcGxhdGUgPSBjcmVhdGVEZWZhdWx0TGlzdEl0ZW1UZW1wbGF0ZShjb250ZXh0KTtcbiAgICBjb25zdCBkZWZhdWx0TWVudU9wdGlvblRlbXBsYXRlID0gY3JlYXRlRGVmYXVsdE1lbnVPcHRpb25UZW1wbGF0ZShjb250ZXh0KTtcbiAgICByZXR1cm4gaHRtbCBgXG4gICAgICAgIDx0ZW1wbGF0ZVxuICAgICAgICAgICAgOnNlbGVjdGVkTGlzdFRhZz1cIiR7KCkgPT4gcGlja2VyTGlzdFRhZ31cIlxuICAgICAgICAgICAgOm1lbnVUYWc9XCIkeygpID0+IHBpY2tlck1lbnVUYWd9XCJcbiAgICAgICAgICAgIDpkZWZhdWx0TGlzdEl0ZW1UZW1wbGF0ZT1cIiR7ZGVmYXVsdExpc3RJdGVtVGVtcGxhdGV9XCJcbiAgICAgICAgICAgIDpkZWZhdWx0TWVudU9wdGlvblRlbXBsYXRlPVwiJHtkZWZhdWx0TWVudU9wdGlvblRlbXBsYXRlfVwiXG4gICAgICAgICAgICBAZm9jdXNpbj1cIiR7KHgsIGMpID0+IHguaGFuZGxlRm9jdXNJbihjLmV2ZW50KX1cIlxuICAgICAgICAgICAgQGZvY3Vzb3V0PVwiJHsoeCwgYykgPT4geC5oYW5kbGVGb2N1c091dChjLmV2ZW50KX1cIlxuICAgICAgICAgICAgQGtleWRvd249XCIkeyh4LCBjKSA9PiB4LmhhbmRsZUtleURvd24oYy5ldmVudCl9XCJcbiAgICAgICAgICAgIEBwaWNrZXJpdGVtaW52b2tlZD1cIiR7KHgsIGMpID0+IHguaGFuZGxlSXRlbUludm9rZShjLmV2ZW50KX1cIlxuICAgICAgICAgICAgQHBpY2tlcm9wdGlvbmludm9rZWQ9XCIkeyh4LCBjKSA9PiB4LmhhbmRsZU9wdGlvbkludm9rZShjLmV2ZW50KX1cIlxuICAgICAgICA+XG4gICAgICAgICAgICA8c2xvdCBuYW1lPVwibGlzdC1yZWdpb25cIj48L3Nsb3Q+XG5cbiAgICAgICAgICAgICR7d2hlbih4ID0+IHguZmx5b3V0T3BlbiwgaHRtbCBgXG4gICAgICAgICAgICAgICAgPCR7YW5jaG9yZWRSZWdpb25UYWd9XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzPVwicmVnaW9uXCJcbiAgICAgICAgICAgICAgICAgICAgcGFydD1cInJlZ2lvblwiXG4gICAgICAgICAgICAgICAgICAgIGF1dG8tdXBkYXRlLW1vZGU9XCIke3ggPT4geC5tZW51Q29uZmlnLmF1dG9VcGRhdGVNb2RlfVwiXG4gICAgICAgICAgICAgICAgICAgIGZpeGVkLXBsYWNlbWVudD1cIiR7eCA9PiB4Lm1lbnVDb25maWcuZml4ZWRQbGFjZW1lbnR9XCJcbiAgICAgICAgICAgICAgICAgICAgdmVydGljYWwtcG9zaXRpb25pbmctbW9kZT1cIiR7eCA9PiB4Lm1lbnVDb25maWcudmVydGljYWxQb3NpdGlvbmluZ01vZGV9XCJcbiAgICAgICAgICAgICAgICAgICAgdmVydGljYWwtZGVmYXVsdC1wb3NpdGlvbj1cIiR7eCA9PiB4Lm1lbnVDb25maWcudmVydGljYWxEZWZhdWx0UG9zaXRpb259XCJcbiAgICAgICAgICAgICAgICAgICAgdmVydGljYWwtc2NhbGluZz1cIiR7eCA9PiB4Lm1lbnVDb25maWcudmVydGljYWxTY2FsaW5nfVwiXG4gICAgICAgICAgICAgICAgICAgIHZlcnRpY2FsLWluc2V0PVwiJHt4ID0+IHgubWVudUNvbmZpZy52ZXJ0aWNhbEluc2V0fVwiXG4gICAgICAgICAgICAgICAgICAgIHZlcnRpY2FsLXZpZXdwb3J0LWxvY2s9XCIke3ggPT4geC5tZW51Q29uZmlnLnZlcnRpY2FsVmlld3BvcnRMb2NrfVwiXG4gICAgICAgICAgICAgICAgICAgIGhvcml6b250YWwtcG9zaXRpb25pbmctbW9kZT1cIiR7eCA9PiB4Lm1lbnVDb25maWcuaG9yaXpvbnRhbFBvc2l0aW9uaW5nTW9kZX1cIlxuICAgICAgICAgICAgICAgICAgICBob3Jpem9udGFsLWRlZmF1bHQtcG9zaXRpb249XCIke3ggPT4geC5tZW51Q29uZmlnLmhvcml6b250YWxEZWZhdWx0UG9zaXRpb259XCJcbiAgICAgICAgICAgICAgICAgICAgaG9yaXpvbnRhbC1zY2FsaW5nPVwiJHt4ID0+IHgubWVudUNvbmZpZy5ob3Jpem9udGFsU2NhbGluZ31cIlxuICAgICAgICAgICAgICAgICAgICBob3Jpem9udGFsLWluc2V0PVwiJHt4ID0+IHgubWVudUNvbmZpZy5ob3Jpem9udGFsSW5zZXR9XCJcbiAgICAgICAgICAgICAgICAgICAgaG9yaXpvbnRhbC12aWV3cG9ydC1sb2NrPVwiJHt4ID0+IHgubWVudUNvbmZpZy5ob3Jpem9udGFsVmlld3BvcnRMb2NrfVwiXG4gICAgICAgICAgICAgICAgICAgIEBsb2FkZWQ9XCIkeyh4LCBjKSA9PiB4LmhhbmRsZVJlZ2lvbkxvYWRlZChjLmV2ZW50KX1cIlxuICAgICAgICAgICAgICAgICAgICAke3JlZihcInJlZ2lvblwiKX1cbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICR7d2hlbih4ID0+ICF4LnNob3dOb09wdGlvbnMgJiYgIXguc2hvd0xvYWRpbmcsIGh0bWwgYFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzbG90IG5hbWU9XCJtZW51LXJlZ2lvblwiPjwvc2xvdD5cbiAgICAgICAgICAgICAgICAgICAgICAgIGApfVxuICAgICAgICAgICAgICAgICAgICAke3doZW4oeCA9PiB4LnNob3dOb09wdGlvbnMgJiYgIXguc2hvd0xvYWRpbmcsIGh0bWwgYFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJuby1vcHRpb25zLWRpc3BsYXlcIiBwYXJ0PVwibm8tb3B0aW9ucy1kaXNwbGF5XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzbG90IG5hbWU9XCJuby1vcHRpb25zLXJlZ2lvblwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHt4ID0+IHgubm9TdWdnZXN0aW9uc1RleHR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc2xvdD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIGApfVxuICAgICAgICAgICAgICAgICAgICAke3doZW4oeCA9PiB4LnNob3dMb2FkaW5nLCBodG1sIGBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibG9hZGluZy1kaXNwbGF5XCIgcGFydD1cImxvYWRpbmctZGlzcGxheVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c2xvdCBuYW1lPVwibG9hZGluZy1yZWdpb25cIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwke3Byb2dyZXNzUmluZ1RhZ31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJ0PVwibG9hZGluZy1wcm9ncmVzc1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3M9XCJsb2FkaW5nLXByb2dyZXNzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2xvdD1cImxvYWRpbmctcmVnaW9uXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID48LyR7cHJvZ3Jlc3NSaW5nVGFnfT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAke3ggPT4geC5sb2FkaW5nVGV4dH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zbG90PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgYCl9XG4gICAgICAgICAgICAgICAgPC8ke2FuY2hvcmVkUmVnaW9uVGFnfT5cbiAgICAgICAgICAgIGApfVxuICAgICAgICA8L3RlbXBsYXRlPlxuICAgIGA7XG59O1xuIiwiZXhwb3J0ICogZnJvbSBcIi4vcHJvZ3Jlc3MtcmluZy50ZW1wbGF0ZS5qc1wiO1xuIiwiaW1wb3J0IHsgaHRtbCwgd2hlbiB9IGZyb20gXCJAbWljcm9zb2Z0L2Zhc3QtZWxlbWVudFwiO1xuY29uc3QgcHJvZ3Jlc3NTZWdtZW50cyA9IDQ0O1xuLyoqXG4gKiBUaGUgdGVtcGxhdGUgZm9yIHRoZSB7QGxpbmsgQG1pY3Jvc29mdC9mYXN0LWZvdW5kYXRpb24jQmFzZVByb2dyZXNzfSBjb21wb25lbnQuXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjb25zdCBwcm9ncmVzc1JpbmdUZW1wbGF0ZSA9IChjb250ZXh0LCBkZWZpbml0aW9uKSA9PiBodG1sIGBcbiAgICA8dGVtcGxhdGVcbiAgICAgICAgcm9sZT1cInByb2dyZXNzYmFyXCJcbiAgICAgICAgYXJpYS12YWx1ZW5vdz1cIiR7eCA9PiB4LnZhbHVlfVwiXG4gICAgICAgIGFyaWEtdmFsdWVtaW49XCIke3ggPT4geC5taW59XCJcbiAgICAgICAgYXJpYS12YWx1ZW1heD1cIiR7eCA9PiB4Lm1heH1cIlxuICAgICAgICBjbGFzcz1cIiR7eCA9PiAoeC5wYXVzZWQgPyBcInBhdXNlZFwiIDogXCJcIil9XCJcbiAgICA+XG4gICAgICAgICR7d2hlbih4ID0+IHR5cGVvZiB4LnZhbHVlID09PSBcIm51bWJlclwiLCBodG1sIGBcbiAgICAgICAgICAgICAgICA8c3ZnXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzPVwicHJvZ3Jlc3NcIlxuICAgICAgICAgICAgICAgICAgICBwYXJ0PVwicHJvZ3Jlc3NcIlxuICAgICAgICAgICAgICAgICAgICB2aWV3Qm94PVwiMCAwIDE2IDE2XCJcbiAgICAgICAgICAgICAgICAgICAgc2xvdD1cImRldGVybWluYXRlXCJcbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIDxjaXJjbGVcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzPVwiYmFja2dyb3VuZFwiXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJ0PVwiYmFja2dyb3VuZFwiXG4gICAgICAgICAgICAgICAgICAgICAgICBjeD1cIjhweFwiXG4gICAgICAgICAgICAgICAgICAgICAgICBjeT1cIjhweFwiXG4gICAgICAgICAgICAgICAgICAgICAgICByPVwiN3B4XCJcbiAgICAgICAgICAgICAgICAgICAgPjwvY2lyY2xlPlxuICAgICAgICAgICAgICAgICAgICA8Y2lyY2xlXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzcz1cImRldGVybWluYXRlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnQ9XCJkZXRlcm1pbmF0ZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT1cInN0cm9rZS1kYXNoYXJyYXk6ICR7eCA9PiAocHJvZ3Jlc3NTZWdtZW50cyAqIHgucGVyY2VudENvbXBsZXRlKSAvXG4gICAgMTAwfXB4ICR7cHJvZ3Jlc3NTZWdtZW50c31weFwiXG4gICAgICAgICAgICAgICAgICAgICAgICBjeD1cIjhweFwiXG4gICAgICAgICAgICAgICAgICAgICAgICBjeT1cIjhweFwiXG4gICAgICAgICAgICAgICAgICAgICAgICByPVwiN3B4XCJcbiAgICAgICAgICAgICAgICAgICAgPjwvY2lyY2xlPlxuICAgICAgICAgICAgICAgIDwvc3ZnPlxuICAgICAgICAgICAgYCwgaHRtbCBgXG4gICAgICAgICAgICAgICAgPHNsb3QgbmFtZT1cImluZGV0ZXJtaW5hdGVcIiBzbG90PVwiaW5kZXRlcm1pbmF0ZVwiPlxuICAgICAgICAgICAgICAgICAgICAke2RlZmluaXRpb24uaW5kZXRlcm1pbmF0ZUluZGljYXRvciB8fCBcIlwifVxuICAgICAgICAgICAgICAgIDwvc2xvdD5cbiAgICAgICAgICAgIGApfVxuICAgIDwvdGVtcGxhdGU+XG5gO1xuIiwiaW1wb3J0IHsgX19kZWNvcmF0ZSB9IGZyb20gXCJ0c2xpYlwiO1xuaW1wb3J0IHsgYXR0ciwgbnVsbGFibGVOdW1iZXJDb252ZXJ0ZXIsIG9ic2VydmFibGUsIH0gZnJvbSBcIkBtaWNyb3NvZnQvZmFzdC1lbGVtZW50XCI7XG5pbXBvcnQgeyBGb3VuZGF0aW9uRWxlbWVudCwgfSBmcm9tIFwiLi4vZm91bmRhdGlvbi1lbGVtZW50L2ZvdW5kYXRpb24tZWxlbWVudC5qc1wiO1xuLyoqXG4gKiBBbiBQcm9ncmVzcyBIVE1MIEVsZW1lbnQuXG4gKiBJbXBsZW1lbnRzIHRoZSB7QGxpbmsgaHR0cHM6Ly93d3cudzMub3JnL1RSL3dhaS1hcmlhLTEuMS8jcHJvZ3Jlc3NiYXIgfCBBUklBIHByb2dyZXNzYmFyIH0uXG4gKlxuICogQHNsb3QgaW5kZXRlcm1pbmF0ZSAtIFRoZSBzbG90IGZvciBhIGN1c3RvbSBpbmRldGVybWluYXRlIGluZGljYXRvclxuICogQGNzc3BhcnQgcHJvZ3Jlc3MgLSBSZXByZXNlbnRzIHRoZSBwcm9ncmVzcyBlbGVtZW50XG4gKiBAY3NzcGFydCBkZXRlcm1pbmF0ZSAtIFRoZSBkZXRlcm1pbmF0ZSBpbmRpY2F0b3JcbiAqIEBjc3NwYXJ0IGluZGV0ZXJtaW5hdGUgLSBUaGUgaW5kZXRlcm1pbmF0ZSBpbmRpY2F0b3JcbiAqXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjbGFzcyBCYXNlUHJvZ3Jlc3MgZXh0ZW5kcyBGb3VuZGF0aW9uRWxlbWVudCB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJbmRpY2F0ZXMgcHJvZ3Jlc3MgaW4gJVxuICAgICAgICAgKiBAaW50ZXJuYWxcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMucGVyY2VudENvbXBsZXRlID0gMDtcbiAgICB9XG4gICAgdmFsdWVDaGFuZ2VkKCkge1xuICAgICAgICBpZiAodGhpcy4kZmFzdENvbnRyb2xsZXIuaXNDb25uZWN0ZWQpIHtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlUGVyY2VudENvbXBsZXRlKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgbWluQ2hhbmdlZCgpIHtcbiAgICAgICAgaWYgKHRoaXMuJGZhc3RDb250cm9sbGVyLmlzQ29ubmVjdGVkKSB7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVBlcmNlbnRDb21wbGV0ZSgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIG1heENoYW5nZWQoKSB7XG4gICAgICAgIGlmICh0aGlzLiRmYXN0Q29udHJvbGxlci5pc0Nvbm5lY3RlZCkge1xuICAgICAgICAgICAgdGhpcy51cGRhdGVQZXJjZW50Q29tcGxldGUoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICAgICAgc3VwZXIuY29ubmVjdGVkQ2FsbGJhY2soKTtcbiAgICAgICAgdGhpcy51cGRhdGVQZXJjZW50Q29tcGxldGUoKTtcbiAgICB9XG4gICAgdXBkYXRlUGVyY2VudENvbXBsZXRlKCkge1xuICAgICAgICBjb25zdCBtaW4gPSB0eXBlb2YgdGhpcy5taW4gPT09IFwibnVtYmVyXCIgPyB0aGlzLm1pbiA6IDA7XG4gICAgICAgIGNvbnN0IG1heCA9IHR5cGVvZiB0aGlzLm1heCA9PT0gXCJudW1iZXJcIiA/IHRoaXMubWF4IDogMTAwO1xuICAgICAgICBjb25zdCB2YWx1ZSA9IHR5cGVvZiB0aGlzLnZhbHVlID09PSBcIm51bWJlclwiID8gdGhpcy52YWx1ZSA6IDA7XG4gICAgICAgIGNvbnN0IHJhbmdlID0gbWF4IC0gbWluO1xuICAgICAgICB0aGlzLnBlcmNlbnRDb21wbGV0ZSA9XG4gICAgICAgICAgICByYW5nZSA9PT0gMCA/IDAgOiBNYXRoLmZyb3VuZCgoKHZhbHVlIC0gbWluKSAvIHJhbmdlKSAqIDEwMCk7XG4gICAgfVxufVxuX19kZWNvcmF0ZShbXG4gICAgYXR0cih7IGNvbnZlcnRlcjogbnVsbGFibGVOdW1iZXJDb252ZXJ0ZXIgfSlcbl0sIEJhc2VQcm9ncmVzcy5wcm90b3R5cGUsIFwidmFsdWVcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIGF0dHIoeyBjb252ZXJ0ZXI6IG51bGxhYmxlTnVtYmVyQ29udmVydGVyIH0pXG5dLCBCYXNlUHJvZ3Jlc3MucHJvdG90eXBlLCBcIm1pblwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgYXR0cih7IGNvbnZlcnRlcjogbnVsbGFibGVOdW1iZXJDb252ZXJ0ZXIgfSlcbl0sIEJhc2VQcm9ncmVzcy5wcm90b3R5cGUsIFwibWF4XCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBhdHRyKHsgbW9kZTogXCJib29sZWFuXCIgfSlcbl0sIEJhc2VQcm9ncmVzcy5wcm90b3R5cGUsIFwicGF1c2VkXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBvYnNlcnZhYmxlXG5dLCBCYXNlUHJvZ3Jlc3MucHJvdG90eXBlLCBcInBlcmNlbnRDb21wbGV0ZVwiLCB2b2lkIDApO1xuIiwiZXhwb3J0ICogZnJvbSBcIi4vYmFzZS1wcm9ncmVzcy5qc1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vcHJvZ3Jlc3MudGVtcGxhdGUuanNcIjtcbiIsImltcG9ydCB7IGh0bWwsIHdoZW4gfSBmcm9tIFwiQG1pY3Jvc29mdC9mYXN0LWVsZW1lbnRcIjtcbi8qKlxuICogVGhlIHRlbXBsYXRlIGZvciB0aGUge0BsaW5rIEBtaWNyb3NvZnQvZmFzdC1mb3VuZGF0aW9uI0Jhc2VQcm9ncmVzc30gY29tcG9uZW50LlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgY29uc3QgcHJvZ3Jlc3NUZW1wbGF0ZSA9IChjb250ZXh0LCBkZWZpbnRpb24pID0+IGh0bWwgYFxuICAgIDx0ZW1wbGF0ZVxuICAgICAgICByb2xlPVwicHJvZ3Jlc3NiYXJcIlxuICAgICAgICBhcmlhLXZhbHVlbm93PVwiJHt4ID0+IHgudmFsdWV9XCJcbiAgICAgICAgYXJpYS12YWx1ZW1pbj1cIiR7eCA9PiB4Lm1pbn1cIlxuICAgICAgICBhcmlhLXZhbHVlbWF4PVwiJHt4ID0+IHgubWF4fVwiXG4gICAgICAgIGNsYXNzPVwiJHt4ID0+ICh4LnBhdXNlZCA/IFwicGF1c2VkXCIgOiBcIlwiKX1cIlxuICAgID5cbiAgICAgICAgJHt3aGVuKHggPT4gdHlwZW9mIHgudmFsdWUgPT09IFwibnVtYmVyXCIsIGh0bWwgYFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJwcm9ncmVzc1wiIHBhcnQ9XCJwcm9ncmVzc1wiIHNsb3Q9XCJkZXRlcm1pbmF0ZVwiPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzcz1cImRldGVybWluYXRlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnQ9XCJkZXRlcm1pbmF0ZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT1cIndpZHRoOiAke3ggPT4geC5wZXJjZW50Q29tcGxldGV9JVwiXG4gICAgICAgICAgICAgICAgICAgID48L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIGAsIGh0bWwgYFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJwcm9ncmVzc1wiIHBhcnQ9XCJwcm9ncmVzc1wiIHNsb3Q9XCJpbmRldGVybWluYXRlXCI+XG4gICAgICAgICAgICAgICAgICAgIDxzbG90IGNsYXNzPVwiaW5kZXRlcm1pbmF0ZVwiIG5hbWU9XCJpbmRldGVybWluYXRlXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAke2RlZmludGlvbi5pbmRldGVybWluYXRlSW5kaWNhdG9yMSB8fCBcIlwifVxuICAgICAgICAgICAgICAgICAgICAgICAgJHtkZWZpbnRpb24uaW5kZXRlcm1pbmF0ZUluZGljYXRvcjIgfHwgXCJcIn1cbiAgICAgICAgICAgICAgICAgICAgPC9zbG90PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgYCl9XG4gICAgPC90ZW1wbGF0ZT5cbmA7XG4iLCJleHBvcnQgKiBmcm9tIFwiLi9yYWRpby1ncm91cC50ZW1wbGF0ZS5qc1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vcmFkaW8tZ3JvdXAuanNcIjtcbiIsImltcG9ydCB7IF9fZGVjb3JhdGUgfSBmcm9tIFwidHNsaWJcIjtcbmltcG9ydCB7IGF0dHIsIG9ic2VydmFibGUgfSBmcm9tIFwiQG1pY3Jvc29mdC9mYXN0LWVsZW1lbnRcIjtcbmltcG9ydCB7IEFycm93S2V5cywgRGlyZWN0aW9uLCBrZXlBcnJvd0Rvd24sIGtleUFycm93TGVmdCwga2V5QXJyb3dSaWdodCwga2V5QXJyb3dVcCwga2V5RW50ZXIsIE9yaWVudGF0aW9uLCB9IGZyb20gXCJAbWljcm9zb2Z0L2Zhc3Qtd2ViLXV0aWxpdGllc1wiO1xuaW1wb3J0IHsgZ2V0RGlyZWN0aW9uIH0gZnJvbSBcIi4uL3V0aWxpdGllcy9kaXJlY3Rpb24uanNcIjtcbmltcG9ydCB7IEZvdW5kYXRpb25FbGVtZW50IH0gZnJvbSBcIi4uL2ZvdW5kYXRpb24tZWxlbWVudC9mb3VuZGF0aW9uLWVsZW1lbnQuanNcIjtcbi8qKlxuICogQW4gUmFkaW8gR3JvdXAgQ3VzdG9tIEhUTUwgRWxlbWVudC5cbiAqIEltcGxlbWVudHMgdGhlIHtAbGluayBodHRwczovL3d3dy53My5vcmcvVFIvd2FpLWFyaWEtMS4xLyNyYWRpb2dyb3VwIHwgQVJJQSByYWRpb2dyb3VwIH0uXG4gKlxuICogQHNsb3QgbGFiZWwgLSBUaGUgc2xvdCBmb3IgdGhlIGxhYmVsXG4gKiBAc2xvdCAtIFRoZSBkZWZhdWx0IHNsb3QgZm9yIHJhZGlvIGJ1dHRvbnNcbiAqIEBjc3NwYXJ0IHBvc2l0aW9uaW5nLXJlZ2lvbiAtIFRoZSBwb3NpdGlvbmluZyByZWdpb24gZm9yIGxheWluZyBvdXQgdGhlIHJhZGlvc1xuICogQGZpcmVzIGNoYW5nZSAtIEZpcmVzIGEgY3VzdG9tICdjaGFuZ2UnIGV2ZW50IHdoZW4gdGhlIHZhbHVlIGNoYW5nZXNcbiAqXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjbGFzcyBSYWRpb0dyb3VwIGV4dGVuZHMgRm91bmRhdGlvbkVsZW1lbnQge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlciguLi5hcmd1bWVudHMpO1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIG9yaWVudGF0aW9uIG9mIHRoZSBncm91cFxuICAgICAgICAgKlxuICAgICAgICAgKiBAcHVibGljXG4gICAgICAgICAqIEByZW1hcmtzXG4gICAgICAgICAqIEhUTUwgQXR0cmlidXRlOiBvcmllbnRhdGlvblxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5vcmllbnRhdGlvbiA9IE9yaWVudGF0aW9uLmhvcml6b250YWw7XG4gICAgICAgIHRoaXMucmFkaW9DaGFuZ2VIYW5kbGVyID0gKGUpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGNoYW5nZWRSYWRpbyA9IGUudGFyZ2V0O1xuICAgICAgICAgICAgaWYgKGNoYW5nZWRSYWRpby5jaGVja2VkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zbG90dGVkUmFkaW9CdXR0b25zLmZvckVhY2goKHJhZGlvKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyYWRpbyAhPT0gY2hhbmdlZFJhZGlvKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByYWRpby5jaGVja2VkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuaXNJbnNpZGVGb3VuZGF0aW9uVG9vbGJhcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJhZGlvLnNldEF0dHJpYnV0ZShcInRhYmluZGV4XCIsIFwiLTFcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkUmFkaW8gPSBjaGFuZ2VkUmFkaW87XG4gICAgICAgICAgICAgICAgdGhpcy52YWx1ZSA9IGNoYW5nZWRSYWRpby52YWx1ZTtcbiAgICAgICAgICAgICAgICBjaGFuZ2VkUmFkaW8uc2V0QXR0cmlidXRlKFwidGFiaW5kZXhcIiwgXCIwXCIpO1xuICAgICAgICAgICAgICAgIHRoaXMuZm9jdXNlZFJhZGlvID0gY2hhbmdlZFJhZGlvO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5tb3ZlVG9SYWRpb0J5SW5kZXggPSAoZ3JvdXAsIGluZGV4KSA9PiB7XG4gICAgICAgICAgICBjb25zdCByYWRpbyA9IGdyb3VwW2luZGV4XTtcbiAgICAgICAgICAgIGlmICghdGhpcy5pc0luc2lkZVRvb2xiYXIpIHtcbiAgICAgICAgICAgICAgICByYWRpby5zZXRBdHRyaWJ1dGUoXCJ0YWJpbmRleFwiLCBcIjBcIik7XG4gICAgICAgICAgICAgICAgaWYgKHJhZGlvLnJlYWRPbmx5KSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2xvdHRlZFJhZGlvQnV0dG9ucy5mb3JFYWNoKChuZXh0UmFkaW8pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuZXh0UmFkaW8gIT09IHJhZGlvKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV4dFJhZGlvLnNldEF0dHJpYnV0ZShcInRhYmluZGV4XCIsIFwiLTFcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmFkaW8uY2hlY2tlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRSYWRpbyA9IHJhZGlvO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZm9jdXNlZFJhZGlvID0gcmFkaW87XG4gICAgICAgICAgICByYWRpby5mb2N1cygpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLm1vdmVSaWdodE9mZkdyb3VwID0gKCkgPT4ge1xuICAgICAgICAgICAgdmFyIF9hO1xuICAgICAgICAgICAgKF9hID0gdGhpcy5uZXh0RWxlbWVudFNpYmxpbmcpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5mb2N1cygpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLm1vdmVMZWZ0T2ZmR3JvdXAgPSAoKSA9PiB7XG4gICAgICAgICAgICB2YXIgX2E7XG4gICAgICAgICAgICAoX2EgPSB0aGlzLnByZXZpb3VzRWxlbWVudFNpYmxpbmcpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5mb2N1cygpO1xuICAgICAgICB9O1xuICAgICAgICAvKipcbiAgICAgICAgICogQGludGVybmFsXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmZvY3VzT3V0SGFuZGxlciA9IChlKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBncm91cCA9IHRoaXMuc2xvdHRlZFJhZGlvQnV0dG9ucztcbiAgICAgICAgICAgIGNvbnN0IHJhZGlvID0gZS50YXJnZXQ7XG4gICAgICAgICAgICBjb25zdCBpbmRleCA9IHJhZGlvICE9PSBudWxsID8gZ3JvdXAuaW5kZXhPZihyYWRpbykgOiAwO1xuICAgICAgICAgICAgY29uc3QgZm9jdXNlZEluZGV4ID0gdGhpcy5mb2N1c2VkUmFkaW9cbiAgICAgICAgICAgICAgICA/IGdyb3VwLmluZGV4T2YodGhpcy5mb2N1c2VkUmFkaW8pXG4gICAgICAgICAgICAgICAgOiAtMTtcbiAgICAgICAgICAgIGlmICgoZm9jdXNlZEluZGV4ID09PSAwICYmIGluZGV4ID09PSBmb2N1c2VkSW5kZXgpIHx8XG4gICAgICAgICAgICAgICAgKGZvY3VzZWRJbmRleCA9PT0gZ3JvdXAubGVuZ3RoIC0gMSAmJiBmb2N1c2VkSW5kZXggPT09IGluZGV4KSkge1xuICAgICAgICAgICAgICAgIGlmICghdGhpcy5zZWxlY3RlZFJhZGlvKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZm9jdXNlZFJhZGlvID0gZ3JvdXBbMF07XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZm9jdXNlZFJhZGlvLnNldEF0dHJpYnV0ZShcInRhYmluZGV4XCIsIFwiMFwiKTtcbiAgICAgICAgICAgICAgICAgICAgZ3JvdXAuZm9yRWFjaCgobmV4dFJhZGlvKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobmV4dFJhZGlvICE9PSB0aGlzLmZvY3VzZWRSYWRpbykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5leHRSYWRpby5zZXRBdHRyaWJ1dGUoXCJ0YWJpbmRleFwiLCBcIi0xXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZm9jdXNlZFJhZGlvID0gdGhpcy5zZWxlY3RlZFJhZGlvO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuaXNJbnNpZGVGb3VuZGF0aW9uVG9vbGJhcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFJhZGlvLnNldEF0dHJpYnV0ZShcInRhYmluZGV4XCIsIFwiMFwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGdyb3VwLmZvckVhY2goKG5leHRSYWRpbykgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuZXh0UmFkaW8gIT09IHRoaXMuc2VsZWN0ZWRSYWRpbykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXh0UmFkaW8uc2V0QXR0cmlidXRlKFwidGFiaW5kZXhcIiwgXCItMVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9O1xuICAgICAgICAvKipcbiAgICAgICAgICogQGludGVybmFsXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmNsaWNrSGFuZGxlciA9IChlKSA9PiB7XG4gICAgICAgICAgICBjb25zdCByYWRpbyA9IGUudGFyZ2V0O1xuICAgICAgICAgICAgaWYgKHJhZGlvKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZ3JvdXAgPSB0aGlzLnNsb3R0ZWRSYWRpb0J1dHRvbnM7XG4gICAgICAgICAgICAgICAgaWYgKHJhZGlvLmNoZWNrZWQgfHwgZ3JvdXAuaW5kZXhPZihyYWRpbykgPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgcmFkaW8uc2V0QXR0cmlidXRlKFwidGFiaW5kZXhcIiwgXCIwXCIpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkUmFkaW8gPSByYWRpbztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJhZGlvLnNldEF0dHJpYnV0ZShcInRhYmluZGV4XCIsIFwiLTFcIik7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRSYWRpbyA9IG51bGw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuZm9jdXNlZFJhZGlvID0gcmFkaW87XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuc2hvdWxkTW92ZU9mZkdyb3VwVG9UaGVSaWdodCA9IChpbmRleCwgZ3JvdXAsIGtleSkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIGluZGV4ID09PSBncm91cC5sZW5ndGggJiYgdGhpcy5pc0luc2lkZVRvb2xiYXIgJiYga2V5ID09PSBrZXlBcnJvd1JpZ2h0O1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLnNob3VsZE1vdmVPZmZHcm91cFRvVGhlTGVmdCA9IChncm91cCwga2V5KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBpbmRleCA9IHRoaXMuZm9jdXNlZFJhZGlvID8gZ3JvdXAuaW5kZXhPZih0aGlzLmZvY3VzZWRSYWRpbykgLSAxIDogMDtcbiAgICAgICAgICAgIHJldHVybiBpbmRleCA8IDAgJiYgdGhpcy5pc0luc2lkZVRvb2xiYXIgJiYga2V5ID09PSBrZXlBcnJvd0xlZnQ7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuY2hlY2tGb2N1c2VkUmFkaW8gPSAoKSA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy5mb2N1c2VkUmFkaW8gIT09IG51bGwgJiZcbiAgICAgICAgICAgICAgICAhdGhpcy5mb2N1c2VkUmFkaW8ucmVhZE9ubHkgJiZcbiAgICAgICAgICAgICAgICAhdGhpcy5mb2N1c2VkUmFkaW8uY2hlY2tlZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuZm9jdXNlZFJhZGlvLmNoZWNrZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHRoaXMuZm9jdXNlZFJhZGlvLnNldEF0dHJpYnV0ZShcInRhYmluZGV4XCIsIFwiMFwiKTtcbiAgICAgICAgICAgICAgICB0aGlzLmZvY3VzZWRSYWRpby5mb2N1cygpO1xuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRSYWRpbyA9IHRoaXMuZm9jdXNlZFJhZGlvO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICB0aGlzLm1vdmVSaWdodCA9IChlKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBncm91cCA9IHRoaXMuc2xvdHRlZFJhZGlvQnV0dG9ucztcbiAgICAgICAgICAgIGxldCBpbmRleCA9IDA7XG4gICAgICAgICAgICBpbmRleCA9IHRoaXMuZm9jdXNlZFJhZGlvID8gZ3JvdXAuaW5kZXhPZih0aGlzLmZvY3VzZWRSYWRpbykgKyAxIDogMTtcbiAgICAgICAgICAgIGlmICh0aGlzLnNob3VsZE1vdmVPZmZHcm91cFRvVGhlUmlnaHQoaW5kZXgsIGdyb3VwLCBlLmtleSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm1vdmVSaWdodE9mZkdyb3VwKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoaW5kZXggPT09IGdyb3VwLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIGluZGV4ID0gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8qIGxvb3BpbmcgdG8gZ2V0IHRvIG5leHQgcmFkaW8gdGhhdCBpcyBub3QgZGlzYWJsZWQgKi9cbiAgICAgICAgICAgIC8qIG1hdGNoaW5nIG5hdGl2ZSByYWRpby9yYWRpb2dyb3VwIHdoaWNoIGRvZXMgbm90IHNlbGVjdCBhbiBpdGVtIGlmIHRoZXJlIGlzIG9ubHkgMSBpbiB0aGUgZ3JvdXAgKi9cbiAgICAgICAgICAgIHdoaWxlIChpbmRleCA8IGdyb3VwLmxlbmd0aCAmJiBncm91cC5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFncm91cFtpbmRleF0uZGlzYWJsZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tb3ZlVG9SYWRpb0J5SW5kZXgoZ3JvdXAsIGluZGV4KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMuZm9jdXNlZFJhZGlvICYmIGluZGV4ID09PSBncm91cC5pbmRleE9mKHRoaXMuZm9jdXNlZFJhZGlvKSkge1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoaW5kZXggKyAxID49IGdyb3VwLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5pc0luc2lkZVRvb2xiYXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXggPSAwO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpbmRleCArPSAxO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5tb3ZlTGVmdCA9IChlKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBncm91cCA9IHRoaXMuc2xvdHRlZFJhZGlvQnV0dG9ucztcbiAgICAgICAgICAgIGxldCBpbmRleCA9IDA7XG4gICAgICAgICAgICBpbmRleCA9IHRoaXMuZm9jdXNlZFJhZGlvID8gZ3JvdXAuaW5kZXhPZih0aGlzLmZvY3VzZWRSYWRpbykgLSAxIDogMDtcbiAgICAgICAgICAgIGluZGV4ID0gaW5kZXggPCAwID8gZ3JvdXAubGVuZ3RoIC0gMSA6IGluZGV4O1xuICAgICAgICAgICAgaWYgKHRoaXMuc2hvdWxkTW92ZU9mZkdyb3VwVG9UaGVMZWZ0KGdyb3VwLCBlLmtleSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm1vdmVMZWZ0T2ZmR3JvdXAoKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvKiBsb29waW5nIHRvIGdldCB0byBuZXh0IHJhZGlvIHRoYXQgaXMgbm90IGRpc2FibGVkICovXG4gICAgICAgICAgICB3aGlsZSAoaW5kZXggPj0gMCAmJiBncm91cC5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFncm91cFtpbmRleF0uZGlzYWJsZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tb3ZlVG9SYWRpb0J5SW5kZXgoZ3JvdXAsIGluZGV4KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMuZm9jdXNlZFJhZGlvICYmIGluZGV4ID09PSBncm91cC5pbmRleE9mKHRoaXMuZm9jdXNlZFJhZGlvKSkge1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoaW5kZXggLSAxIDwgMCkge1xuICAgICAgICAgICAgICAgICAgICBpbmRleCA9IGdyb3VwLmxlbmd0aCAtIDE7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpbmRleCAtPSAxO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIGtleWJvYXJkIGhhbmRsaW5nIHBlciBodHRwczovL3czYy5naXRodWIuaW8vYXJpYS1wcmFjdGljZXMvI2Zvci1yYWRpby1ncm91cHMtbm90LWNvbnRhaW5lZC1pbi1hLXRvb2xiYXJcbiAgICAgICAgICogbmF2aWdhdGlvbiBpcyBkaWZmZXJlbnQgd2hlbiB0aGVyZSBpcyBhbiBhbmNlc3RvciB3aXRoIHJvbGU9J3Rvb2xiYXInXG4gICAgICAgICAqXG4gICAgICAgICAqIEBpbnRlcm5hbFxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5rZXlkb3duSGFuZGxlciA9IChlKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBrZXkgPSBlLmtleTtcbiAgICAgICAgICAgIGlmIChrZXkgaW4gQXJyb3dLZXlzICYmIHRoaXMuaXNJbnNpZGVGb3VuZGF0aW9uVG9vbGJhcikge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc3dpdGNoIChrZXkpIHtcbiAgICAgICAgICAgICAgICBjYXNlIGtleUVudGVyOiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2hlY2tGb2N1c2VkUmFkaW8oKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhc2Uga2V5QXJyb3dSaWdodDpcbiAgICAgICAgICAgICAgICBjYXNlIGtleUFycm93RG93bjoge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5kaXJlY3Rpb24gPT09IERpcmVjdGlvbi5sdHIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubW92ZVJpZ2h0KGUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tb3ZlTGVmdChlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2FzZSBrZXlBcnJvd0xlZnQ6XG4gICAgICAgICAgICAgICAgY2FzZSBrZXlBcnJvd1VwOiB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmRpcmVjdGlvbiA9PT0gRGlyZWN0aW9uLmx0cikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tb3ZlTGVmdChlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubW92ZVJpZ2h0KGUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBkZWZhdWx0OiB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9XG4gICAgcmVhZE9ubHlDaGFuZ2VkKCkge1xuICAgICAgICBpZiAodGhpcy5zbG90dGVkUmFkaW9CdXR0b25zICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRoaXMuc2xvdHRlZFJhZGlvQnV0dG9ucy5mb3JFYWNoKChyYWRpbykgPT4ge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnJlYWRPbmx5KSB7XG4gICAgICAgICAgICAgICAgICAgIHJhZGlvLnJlYWRPbmx5ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJhZGlvLnJlYWRPbmx5ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZGlzYWJsZWRDaGFuZ2VkKCkge1xuICAgICAgICBpZiAodGhpcy5zbG90dGVkUmFkaW9CdXR0b25zICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRoaXMuc2xvdHRlZFJhZGlvQnV0dG9ucy5mb3JFYWNoKChyYWRpbykgPT4ge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmRpc2FibGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJhZGlvLmRpc2FibGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJhZGlvLmRpc2FibGVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgbmFtZUNoYW5nZWQoKSB7XG4gICAgICAgIGlmICh0aGlzLnNsb3R0ZWRSYWRpb0J1dHRvbnMpIHtcbiAgICAgICAgICAgIHRoaXMuc2xvdHRlZFJhZGlvQnV0dG9ucy5mb3JFYWNoKChyYWRpbykgPT4ge1xuICAgICAgICAgICAgICAgIHJhZGlvLnNldEF0dHJpYnV0ZShcIm5hbWVcIiwgdGhpcy5uYW1lKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIHZhbHVlQ2hhbmdlZCgpIHtcbiAgICAgICAgaWYgKHRoaXMuc2xvdHRlZFJhZGlvQnV0dG9ucykge1xuICAgICAgICAgICAgdGhpcy5zbG90dGVkUmFkaW9CdXR0b25zLmZvckVhY2goKHJhZGlvKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHJhZGlvLnZhbHVlID09PSB0aGlzLnZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJhZGlvLmNoZWNrZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkUmFkaW8gPSByYWRpbztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLiRlbWl0KFwiY2hhbmdlXCIpO1xuICAgIH1cbiAgICBzbG90dGVkUmFkaW9CdXR0b25zQ2hhbmdlZChvbGRWYWx1ZSwgbmV3VmFsdWUpIHtcbiAgICAgICAgaWYgKHRoaXMuc2xvdHRlZFJhZGlvQnV0dG9ucyAmJiB0aGlzLnNsb3R0ZWRSYWRpb0J1dHRvbnMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgdGhpcy5zZXR1cFJhZGlvQnV0dG9ucygpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldCBwYXJlbnRUb29sYmFyKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jbG9zZXN0KCdbcm9sZT1cInRvb2xiYXJcIl0nKTtcbiAgICB9XG4gICAgZ2V0IGlzSW5zaWRlVG9vbGJhcigpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICByZXR1cm4gKChfYSA9IHRoaXMucGFyZW50VG9vbGJhcikgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogZmFsc2UpO1xuICAgIH1cbiAgICBnZXQgaXNJbnNpZGVGb3VuZGF0aW9uVG9vbGJhcigpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICByZXR1cm4gISEoKF9hID0gdGhpcy5wYXJlbnRUb29sYmFyKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2FbXCIkZmFzdENvbnRyb2xsZXJcIl0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICAgICAgc3VwZXIuY29ubmVjdGVkQ2FsbGJhY2soKTtcbiAgICAgICAgdGhpcy5kaXJlY3Rpb24gPSBnZXREaXJlY3Rpb24odGhpcyk7XG4gICAgICAgIHRoaXMuc2V0dXBSYWRpb0J1dHRvbnMoKTtcbiAgICB9XG4gICAgZGlzY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgICAgIHRoaXMuc2xvdHRlZFJhZGlvQnV0dG9ucy5mb3JFYWNoKChyYWRpbykgPT4ge1xuICAgICAgICAgICAgcmFkaW8ucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNoYW5nZVwiLCB0aGlzLnJhZGlvQ2hhbmdlSGFuZGxlcik7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBzZXR1cFJhZGlvQnV0dG9ucygpIHtcbiAgICAgICAgY29uc3QgY2hlY2tlZFJhZGlvcyA9IHRoaXMuc2xvdHRlZFJhZGlvQnV0dG9ucy5maWx0ZXIoKHJhZGlvKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gcmFkaW8uaGFzQXR0cmlidXRlKFwiY2hlY2tlZFwiKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IG51bWJlck9mQ2hlY2tlZFJhZGlvcyA9IGNoZWNrZWRSYWRpb3MgPyBjaGVja2VkUmFkaW9zLmxlbmd0aCA6IDA7XG4gICAgICAgIGlmIChudW1iZXJPZkNoZWNrZWRSYWRpb3MgPiAxKSB7XG4gICAgICAgICAgICBjb25zdCBsYXN0Q2hlY2tlZFJhZGlvID0gY2hlY2tlZFJhZGlvc1tudW1iZXJPZkNoZWNrZWRSYWRpb3MgLSAxXTtcbiAgICAgICAgICAgIGxhc3RDaGVja2VkUmFkaW8uY2hlY2tlZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGZvdW5kTWF0Y2hpbmdWYWwgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5zbG90dGVkUmFkaW9CdXR0b25zLmZvckVhY2goKHJhZGlvKSA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy5uYW1lICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICByYWRpby5zZXRBdHRyaWJ1dGUoXCJuYW1lXCIsIHRoaXMubmFtZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5kaXNhYmxlZCkge1xuICAgICAgICAgICAgICAgIHJhZGlvLmRpc2FibGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLnJlYWRPbmx5KSB7XG4gICAgICAgICAgICAgICAgcmFkaW8ucmVhZE9ubHkgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMudmFsdWUgJiYgdGhpcy52YWx1ZSA9PT0gcmFkaW8udmFsdWUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkUmFkaW8gPSByYWRpbztcbiAgICAgICAgICAgICAgICB0aGlzLmZvY3VzZWRSYWRpbyA9IHJhZGlvO1xuICAgICAgICAgICAgICAgIHJhZGlvLmNoZWNrZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHJhZGlvLnNldEF0dHJpYnV0ZShcInRhYmluZGV4XCIsIFwiMFwiKTtcbiAgICAgICAgICAgICAgICBmb3VuZE1hdGNoaW5nVmFsID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmICghdGhpcy5pc0luc2lkZUZvdW5kYXRpb25Ub29sYmFyKSB7XG4gICAgICAgICAgICAgICAgICAgIHJhZGlvLnNldEF0dHJpYnV0ZShcInRhYmluZGV4XCIsIFwiLTFcIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJhZGlvLmNoZWNrZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJhZGlvLmFkZEV2ZW50TGlzdGVuZXIoXCJjaGFuZ2VcIiwgdGhpcy5yYWRpb0NoYW5nZUhhbmRsZXIpO1xuICAgICAgICB9KTtcbiAgICAgICAgaWYgKHRoaXMudmFsdWUgPT09IHVuZGVmaW5lZCAmJiB0aGlzLnNsb3R0ZWRSYWRpb0J1dHRvbnMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgY29uc3QgY2hlY2tlZFJhZGlvcyA9IHRoaXMuc2xvdHRlZFJhZGlvQnV0dG9ucy5maWx0ZXIoKHJhZGlvKSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJhZGlvLmhhc0F0dHJpYnV0ZShcImNoZWNrZWRcIik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNvbnN0IG51bWJlck9mQ2hlY2tlZFJhZGlvcyA9IGNoZWNrZWRSYWRpb3MgIT09IG51bGwgPyBjaGVja2VkUmFkaW9zLmxlbmd0aCA6IDA7XG4gICAgICAgICAgICBpZiAobnVtYmVyT2ZDaGVja2VkUmFkaW9zID4gMCAmJiAhZm91bmRNYXRjaGluZ1ZhbCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGxhc3RDaGVja2VkUmFkaW8gPSBjaGVja2VkUmFkaW9zW251bWJlck9mQ2hlY2tlZFJhZGlvcyAtIDFdO1xuICAgICAgICAgICAgICAgIGxhc3RDaGVja2VkUmFkaW8uY2hlY2tlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgdGhpcy5mb2N1c2VkUmFkaW8gPSBsYXN0Q2hlY2tlZFJhZGlvO1xuICAgICAgICAgICAgICAgIGxhc3RDaGVja2VkUmFkaW8uc2V0QXR0cmlidXRlKFwidGFiaW5kZXhcIiwgXCIwXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zbG90dGVkUmFkaW9CdXR0b25zWzBdLnNldEF0dHJpYnV0ZShcInRhYmluZGV4XCIsIFwiMFwiKTtcbiAgICAgICAgICAgICAgICB0aGlzLmZvY3VzZWRSYWRpbyA9IHRoaXMuc2xvdHRlZFJhZGlvQnV0dG9uc1swXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn1cbl9fZGVjb3JhdGUoW1xuICAgIGF0dHIoeyBhdHRyaWJ1dGU6IFwicmVhZG9ubHlcIiwgbW9kZTogXCJib29sZWFuXCIgfSlcbl0sIFJhZGlvR3JvdXAucHJvdG90eXBlLCBcInJlYWRPbmx5XCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBhdHRyKHsgYXR0cmlidXRlOiBcImRpc2FibGVkXCIsIG1vZGU6IFwiYm9vbGVhblwiIH0pXG5dLCBSYWRpb0dyb3VwLnByb3RvdHlwZSwgXCJkaXNhYmxlZFwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgYXR0clxuXSwgUmFkaW9Hcm91cC5wcm90b3R5cGUsIFwibmFtZVwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgYXR0clxuXSwgUmFkaW9Hcm91cC5wcm90b3R5cGUsIFwidmFsdWVcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIGF0dHJcbl0sIFJhZGlvR3JvdXAucHJvdG90eXBlLCBcIm9yaWVudGF0aW9uXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBvYnNlcnZhYmxlXG5dLCBSYWRpb0dyb3VwLnByb3RvdHlwZSwgXCJjaGlsZEl0ZW1zXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBvYnNlcnZhYmxlXG5dLCBSYWRpb0dyb3VwLnByb3RvdHlwZSwgXCJzbG90dGVkUmFkaW9CdXR0b25zXCIsIHZvaWQgMCk7XG4iLCJpbXBvcnQgeyBlbGVtZW50cywgaHRtbCwgc2xvdHRlZCB9IGZyb20gXCJAbWljcm9zb2Z0L2Zhc3QtZWxlbWVudFwiO1xuaW1wb3J0IHsgT3JpZW50YXRpb24gfSBmcm9tIFwiQG1pY3Jvc29mdC9mYXN0LXdlYi11dGlsaXRpZXNcIjtcbi8qKlxuICogVGhlIHRlbXBsYXRlIGZvciB0aGUge0BsaW5rIEBtaWNyb3NvZnQvZmFzdC1mb3VuZGF0aW9uI1JhZGlvR3JvdXB9IGNvbXBvbmVudC5cbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGNvbnN0IHJhZGlvR3JvdXBUZW1wbGF0ZSA9IChjb250ZXh0LCBkZWZpbml0aW9uKSA9PiBodG1sIGBcbiAgICA8dGVtcGxhdGVcbiAgICAgICAgcm9sZT1cInJhZGlvZ3JvdXBcIlxuICAgICAgICBhcmlhLWRpc2FibGVkPVwiJHt4ID0+IHguZGlzYWJsZWR9XCJcbiAgICAgICAgYXJpYS1yZWFkb25seT1cIiR7eCA9PiB4LnJlYWRPbmx5fVwiXG4gICAgICAgIEBjbGljaz1cIiR7KHgsIGMpID0+IHguY2xpY2tIYW5kbGVyKGMuZXZlbnQpfVwiXG4gICAgICAgIEBrZXlkb3duPVwiJHsoeCwgYykgPT4geC5rZXlkb3duSGFuZGxlcihjLmV2ZW50KX1cIlxuICAgICAgICBAZm9jdXNvdXQ9XCIkeyh4LCBjKSA9PiB4LmZvY3VzT3V0SGFuZGxlcihjLmV2ZW50KX1cIlxuICAgID5cbiAgICAgICAgPHNsb3QgbmFtZT1cImxhYmVsXCI+PC9zbG90PlxuICAgICAgICA8ZGl2XG4gICAgICAgICAgICBjbGFzcz1cInBvc2l0aW9uaW5nLXJlZ2lvbiAke3ggPT4geC5vcmllbnRhdGlvbiA9PT0gT3JpZW50YXRpb24uaG9yaXpvbnRhbCA/IFwiaG9yaXpvbnRhbFwiIDogXCJ2ZXJ0aWNhbFwifVwiXG4gICAgICAgICAgICBwYXJ0PVwicG9zaXRpb25pbmctcmVnaW9uXCJcbiAgICAgICAgPlxuICAgICAgICAgICAgPHNsb3RcbiAgICAgICAgICAgICAgICAke3Nsb3R0ZWQoe1xuICAgIHByb3BlcnR5OiBcInNsb3R0ZWRSYWRpb0J1dHRvbnNcIixcbiAgICBmaWx0ZXI6IGVsZW1lbnRzKFwiW3JvbGU9cmFkaW9dXCIpLFxufSl9XG4gICAgICAgICAgICA+PC9zbG90PlxuICAgICAgICA8L2Rpdj5cbiAgICA8L3RlbXBsYXRlPlxuYDtcbiIsImV4cG9ydCAqIGZyb20gXCIuL3JhZGlvLnRlbXBsYXRlLmpzXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9yYWRpby5qc1wiO1xuIiwiaW1wb3J0IHsgQ2hlY2thYmxlRm9ybUFzc29jaWF0ZWQgfSBmcm9tIFwiLi4vZm9ybS1hc3NvY2lhdGVkL2Zvcm0tYXNzb2NpYXRlZC5qc1wiO1xuaW1wb3J0IHsgRm91bmRhdGlvbkVsZW1lbnQgfSBmcm9tIFwiLi4vZm91bmRhdGlvbi1lbGVtZW50L2ZvdW5kYXRpb24tZWxlbWVudC5qc1wiO1xuY2xhc3MgX1JhZGlvIGV4dGVuZHMgRm91bmRhdGlvbkVsZW1lbnQge1xufVxuLyoqXG4gKiBBIGZvcm0tYXNzb2NpYXRlZCBiYXNlIGNsYXNzIGZvciB0aGUge0BsaW5rIEBtaWNyb3NvZnQvZmFzdC1mb3VuZGF0aW9uIyhSYWRpbzpjbGFzcyl9IGNvbXBvbmVudC5cbiAqXG4gKiBAaW50ZXJuYWxcbiAqL1xuZXhwb3J0IGNsYXNzIEZvcm1Bc3NvY2lhdGVkUmFkaW8gZXh0ZW5kcyBDaGVja2FibGVGb3JtQXNzb2NpYXRlZChfUmFkaW8pIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgdGhpcy5wcm94eSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBfX2RlY29yYXRlIH0gZnJvbSBcInRzbGliXCI7XG5pbXBvcnQgeyBhdHRyLCBvYnNlcnZhYmxlIH0gZnJvbSBcIkBtaWNyb3NvZnQvZmFzdC1lbGVtZW50XCI7XG5pbXBvcnQgeyBrZXlTcGFjZSB9IGZyb20gXCJAbWljcm9zb2Z0L2Zhc3Qtd2ViLXV0aWxpdGllc1wiO1xuaW1wb3J0IHsgRm9ybUFzc29jaWF0ZWRSYWRpbyB9IGZyb20gXCIuL3JhZGlvLmZvcm0tYXNzb2NpYXRlZC5qc1wiO1xuLyoqXG4gKiBBIFJhZGlvIEN1c3RvbSBIVE1MIEVsZW1lbnQuXG4gKiBJbXBsZW1lbnRzIHRoZSB7QGxpbmsgaHR0cHM6Ly93d3cudzMub3JnL1RSL3dhaS1hcmlhLTEuMS8jcmFkaW8gfCBBUklBIHJhZGlvIH0uXG4gKlxuICogQHNsb3QgY2hlY2tlZC1pbmRpY2F0b3IgLSBUaGUgY2hlY2tlZCBpbmRpY2F0b3JcbiAqIEBzbG90IC0gVGhlIGRlZmF1bHQgc2xvdCBmb3IgdGhlIGxhYmVsXG4gKiBAY3NzcGFydCBjb250cm9sIC0gVGhlIGVsZW1lbnQgcmVwcmVzZW50aW5nIHRoZSB2aXN1YWwgcmFkaW8gY29udHJvbFxuICogQGNzc3BhcnQgbGFiZWwgLSBUaGUgbGFiZWxcbiAqIEBmaXJlcyBjaGFuZ2UgLSBFbWl0cyBhIGN1c3RvbSBjaGFuZ2UgZXZlbnQgd2hlbiB0aGUgY2hlY2tlZCBzdGF0ZSBjaGFuZ2VzXG4gKlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgY2xhc3MgUmFkaW8gZXh0ZW5kcyBGb3JtQXNzb2NpYXRlZFJhZGlvIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBlbGVtZW50J3MgdmFsdWUgdG8gYmUgaW5jbHVkZWQgaW4gZm9ybSBzdWJtaXNzaW9uIHdoZW4gY2hlY2tlZC5cbiAgICAgICAgICogRGVmYXVsdCB0byBcIm9uXCIgdG8gcmVhY2ggcGFyaXR5IHdpdGggaW5wdXRbdHlwZT1cInJhZGlvXCJdXG4gICAgICAgICAqXG4gICAgICAgICAqIEBpbnRlcm5hbFxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5pbml0aWFsVmFsdWUgPSBcIm9uXCI7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAaW50ZXJuYWxcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMua2V5cHJlc3NIYW5kbGVyID0gKGUpID0+IHtcbiAgICAgICAgICAgIHN3aXRjaCAoZS5rZXkpIHtcbiAgICAgICAgICAgICAgICBjYXNlIGtleVNwYWNlOlxuICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuY2hlY2tlZCAmJiAhdGhpcy5yZWFkT25seSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGVja2VkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5wcm94eS5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsIFwicmFkaW9cIik7XG4gICAgfVxuICAgIHJlYWRPbmx5Q2hhbmdlZCgpIHtcbiAgICAgICAgaWYgKHRoaXMucHJveHkgaW5zdGFuY2VvZiBIVE1MSW5wdXRFbGVtZW50KSB7XG4gICAgICAgICAgICB0aGlzLnByb3h5LnJlYWRPbmx5ID0gdGhpcy5yZWFkT25seTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBkZWZhdWx0Q2hlY2tlZENoYW5nZWQoKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgaWYgKHRoaXMuJGZhc3RDb250cm9sbGVyLmlzQ29ubmVjdGVkICYmICF0aGlzLmRpcnR5Q2hlY2tlZCkge1xuICAgICAgICAgICAgLy8gU2V0dGluZyB0aGlzLmNoZWNrZWQgd2lsbCBjYXVzZSB1cyB0byBlbnRlciBhIGRpcnR5IHN0YXRlLFxuICAgICAgICAgICAgLy8gYnV0IGlmIHdlIGFyZSBjbGVhbiB3aGVuIGRlZmF1bHRDaGVja2VkIGlzIGNoYW5nZWQsIHdlIHdhbnQgdG8gc3RheVxuICAgICAgICAgICAgLy8gaW4gYSBjbGVhbiBzdGF0ZSwgc28gcmVzZXQgdGhpcy5kaXJ0eUNoZWNrZWRcbiAgICAgICAgICAgIGlmICghdGhpcy5pc0luc2lkZVJhZGlvR3JvdXAoKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuY2hlY2tlZCA9IChfYSA9IHRoaXMuZGVmYXVsdENoZWNrZWQpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IGZhbHNlO1xuICAgICAgICAgICAgICAgIHRoaXMuZGlydHlDaGVja2VkID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgICAgIHZhciBfYSwgX2I7XG4gICAgICAgIHN1cGVyLmNvbm5lY3RlZENhbGxiYWNrKCk7XG4gICAgICAgIHRoaXMudmFsaWRhdGUoKTtcbiAgICAgICAgaWYgKCgoX2EgPSB0aGlzLnBhcmVudEVsZW1lbnQpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5nZXRBdHRyaWJ1dGUoXCJyb2xlXCIpKSAhPT0gXCJyYWRpb2dyb3VwXCIgJiZcbiAgICAgICAgICAgIHRoaXMuZ2V0QXR0cmlidXRlKFwidGFiaW5kZXhcIikgPT09IG51bGwpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5kaXNhYmxlZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0QXR0cmlidXRlKFwidGFiaW5kZXhcIiwgXCIwXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmNoZWNrZWRBdHRyaWJ1dGUpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5kaXJ0eUNoZWNrZWQpIHtcbiAgICAgICAgICAgICAgICAvLyBTZXR0aW5nIHRoaXMuY2hlY2tlZCB3aWxsIGNhdXNlIHVzIHRvIGVudGVyIGEgZGlydHkgc3RhdGUsXG4gICAgICAgICAgICAgICAgLy8gYnV0IGlmIHdlIGFyZSBjbGVhbiB3aGVuIGRlZmF1bHRDaGVja2VkIGlzIGNoYW5nZWQsIHdlIHdhbnQgdG8gc3RheVxuICAgICAgICAgICAgICAgIC8vIGluIGEgY2xlYW4gc3RhdGUsIHNvIHJlc2V0IHRoaXMuZGlydHlDaGVja2VkXG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLmlzSW5zaWRlUmFkaW9Hcm91cCgpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2hlY2tlZCA9IChfYiA9IHRoaXMuZGVmYXVsdENoZWNrZWQpICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmRpcnR5Q2hlY2tlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBpc0luc2lkZVJhZGlvR3JvdXAoKSB7XG4gICAgICAgIGNvbnN0IHBhcmVudCA9IHRoaXMuY2xvc2VzdChcIltyb2xlPXJhZGlvZ3JvdXBdXCIpO1xuICAgICAgICByZXR1cm4gcGFyZW50ICE9PSBudWxsO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBjbGlja0hhbmRsZXIoZSkge1xuICAgICAgICBpZiAoIXRoaXMuZGlzYWJsZWQgJiYgIXRoaXMucmVhZE9ubHkgJiYgIXRoaXMuY2hlY2tlZCkge1xuICAgICAgICAgICAgdGhpcy5jaGVja2VkID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cbn1cbl9fZGVjb3JhdGUoW1xuICAgIGF0dHIoeyBhdHRyaWJ1dGU6IFwicmVhZG9ubHlcIiwgbW9kZTogXCJib29sZWFuXCIgfSlcbl0sIFJhZGlvLnByb3RvdHlwZSwgXCJyZWFkT25seVwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgb2JzZXJ2YWJsZVxuXSwgUmFkaW8ucHJvdG90eXBlLCBcIm5hbWVcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIG9ic2VydmFibGVcbl0sIFJhZGlvLnByb3RvdHlwZSwgXCJkZWZhdWx0U2xvdHRlZE5vZGVzXCIsIHZvaWQgMCk7XG4iLCJpbXBvcnQgeyBodG1sLCBzbG90dGVkIH0gZnJvbSBcIkBtaWNyb3NvZnQvZmFzdC1lbGVtZW50XCI7XG4vKipcbiAqIFRoZSB0ZW1wbGF0ZSBmb3IgdGhlIHtAbGluayBAbWljcm9zb2Z0L2Zhc3QtZm91bmRhdGlvbiMoUmFkaW86Y2xhc3MpfSBjb21wb25lbnQuXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjb25zdCByYWRpb1RlbXBsYXRlID0gKGNvbnRleHQsIGRlZmluaXRpb24pID0+IGh0bWwgYFxuICAgIDx0ZW1wbGF0ZVxuICAgICAgICByb2xlPVwicmFkaW9cIlxuICAgICAgICBjbGFzcz1cIiR7eCA9PiAoeC5jaGVja2VkID8gXCJjaGVja2VkXCIgOiBcIlwiKX0gJHt4ID0+IHgucmVhZE9ubHkgPyBcInJlYWRvbmx5XCIgOiBcIlwifVwiXG4gICAgICAgIGFyaWEtY2hlY2tlZD1cIiR7eCA9PiB4LmNoZWNrZWR9XCJcbiAgICAgICAgYXJpYS1yZXF1aXJlZD1cIiR7eCA9PiB4LnJlcXVpcmVkfVwiXG4gICAgICAgIGFyaWEtZGlzYWJsZWQ9XCIke3ggPT4geC5kaXNhYmxlZH1cIlxuICAgICAgICBhcmlhLXJlYWRvbmx5PVwiJHt4ID0+IHgucmVhZE9ubHl9XCJcbiAgICAgICAgQGtleXByZXNzPVwiJHsoeCwgYykgPT4geC5rZXlwcmVzc0hhbmRsZXIoYy5ldmVudCl9XCJcbiAgICAgICAgQGNsaWNrPVwiJHsoeCwgYykgPT4geC5jbGlja0hhbmRsZXIoYy5ldmVudCl9XCJcbiAgICA+XG4gICAgICAgIDxkaXYgcGFydD1cImNvbnRyb2xcIiBjbGFzcz1cImNvbnRyb2xcIj5cbiAgICAgICAgICAgIDxzbG90IG5hbWU9XCJjaGVja2VkLWluZGljYXRvclwiPlxuICAgICAgICAgICAgICAgICR7ZGVmaW5pdGlvbi5jaGVja2VkSW5kaWNhdG9yIHx8IFwiXCJ9XG4gICAgICAgICAgICA8L3Nsb3Q+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8bGFiZWxcbiAgICAgICAgICAgIHBhcnQ9XCJsYWJlbFwiXG4gICAgICAgICAgICBjbGFzcz1cIiR7eCA9PiB4LmRlZmF1bHRTbG90dGVkTm9kZXMgJiYgeC5kZWZhdWx0U2xvdHRlZE5vZGVzLmxlbmd0aFxuICAgID8gXCJsYWJlbFwiXG4gICAgOiBcImxhYmVsIGxhYmVsX19oaWRkZW5cIn1cIlxuICAgICAgICA+XG4gICAgICAgICAgICA8c2xvdCAke3Nsb3R0ZWQoXCJkZWZhdWx0U2xvdHRlZE5vZGVzXCIpfT48L3Nsb3Q+XG4gICAgICAgIDwvbGFiZWw+XG4gICAgPC90ZW1wbGF0ZT5cbmA7XG4iLCJleHBvcnQgKiBmcm9tIFwiLi9zZWFyY2gudGVtcGxhdGUuanNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL3NlYXJjaC5qc1wiO1xuIiwiaW1wb3J0IHsgRm9ybUFzc29jaWF0ZWQgfSBmcm9tIFwiLi4vZm9ybS1hc3NvY2lhdGVkL2Zvcm0tYXNzb2NpYXRlZC5qc1wiO1xuaW1wb3J0IHsgRm91bmRhdGlvbkVsZW1lbnQgfSBmcm9tIFwiLi4vZm91bmRhdGlvbi1lbGVtZW50L2ZvdW5kYXRpb24tZWxlbWVudC5qc1wiO1xuY2xhc3MgX1NlYXJjaCBleHRlbmRzIEZvdW5kYXRpb25FbGVtZW50IHtcbn1cbi8qKlxuICogQSBmb3JtLWFzc29jaWF0ZWQgYmFzZSBjbGFzcyBmb3IgdGhlIHtAbGluayBAbWljcm9zb2Z0L2Zhc3QtZm91bmRhdGlvbiMoU2VhcmNoOmNsYXNzKX0gY29tcG9uZW50LlxuICpcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgY2xhc3MgRm9ybUFzc29jaWF0ZWRTZWFyY2ggZXh0ZW5kcyBGb3JtQXNzb2NpYXRlZChfU2VhcmNoKSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICAgIHRoaXMucHJveHkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgX19kZWNvcmF0ZSB9IGZyb20gXCJ0c2xpYlwiO1xuaW1wb3J0IHsgYXR0ciwgRE9NLCBudWxsYWJsZU51bWJlckNvbnZlcnRlciwgb2JzZXJ2YWJsZSB9IGZyb20gXCJAbWljcm9zb2Z0L2Zhc3QtZWxlbWVudFwiO1xuaW1wb3J0IHsgQVJJQUdsb2JhbFN0YXRlc0FuZFByb3BlcnRpZXMsIFN0YXJ0RW5kLCB9IGZyb20gXCIuLi9wYXR0ZXJucy9pbmRleC5qc1wiO1xuaW1wb3J0IHsgYXBwbHlNaXhpbnMgfSBmcm9tIFwiLi4vdXRpbGl0aWVzL2FwcGx5LW1peGlucy5qc1wiO1xuaW1wb3J0IHsgRm9ybUFzc29jaWF0ZWRTZWFyY2ggfSBmcm9tIFwiLi9zZWFyY2guZm9ybS1hc3NvY2lhdGVkLmpzXCI7XG4vKipcbiAqIEEgU2VhcmNoIEN1c3RvbSBIVE1MIEVsZW1lbnQuXG4gKiBCYXNlZCBsYXJnZWx5IG9uIHRoZSB7QGxpbmsgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSFRNTC9FbGVtZW50L2lucHV0L3NlYXJjaCB8IDxpbnB1dCB0eXBlPVwic2VhcmNoXCIgLz4gZWxlbWVudCB9LlxuICpcbiAqIEBzbG90IHN0YXJ0IC0gQ29udGVudCB3aGljaCBjYW4gYmUgcHJvdmlkZWQgYmVmb3JlIHRoZSBzZWFyY2ggaW5wdXRcbiAqIEBzbG90IGVuZCAtIENvbnRlbnQgd2hpY2ggY2FuIGJlIHByb3ZpZGVkIGFmdGVyIHRoZSBzZWFyY2ggY2xlYXIgYnV0dG9uXG4gKiBAc2xvdCAtIFRoZSBkZWZhdWx0IHNsb3QgZm9yIHRoZSBsYWJlbFxuICogQHNsb3QgY2xvc2UtYnV0dG9uIC0gVGhlIGNsZWFyIGJ1dHRvblxuICogQHNsb3QgY2xvc2UtZ2x5cGggLSBUaGUgY2xlYXIgZ2x5cGhcbiAqIEBjc3NwYXJ0IGxhYmVsIC0gVGhlIGxhYmVsXG4gKiBAY3NzcGFydCByb290IC0gVGhlIGVsZW1lbnQgd3JhcHBpbmcgdGhlIGNvbnRyb2wsIGluY2x1ZGluZyBzdGFydCBhbmQgZW5kIHNsb3RzXG4gKiBAY3NzcGFydCBjb250cm9sIC0gVGhlIGVsZW1lbnQgcmVwcmVzZW50aW5nIHRoZSBpbnB1dFxuICogQGNzc3BhcnQgY2xlYXItYnV0dG9uIC0gVGhlIGJ1dHRvbiB0byBjbGVhciB0aGUgaW5wdXRcbiAqXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjbGFzcyBTZWFyY2ggZXh0ZW5kcyBGb3JtQXNzb2NpYXRlZFNlYXJjaCB7XG4gICAgcmVhZE9ubHlDaGFuZ2VkKCkge1xuICAgICAgICBpZiAodGhpcy5wcm94eSBpbnN0YW5jZW9mIEhUTUxJbnB1dEVsZW1lbnQpIHtcbiAgICAgICAgICAgIHRoaXMucHJveHkucmVhZE9ubHkgPSB0aGlzLnJlYWRPbmx5O1xuICAgICAgICAgICAgdGhpcy52YWxpZGF0ZSgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGF1dG9mb2N1c0NoYW5nZWQoKSB7XG4gICAgICAgIGlmICh0aGlzLnByb3h5IGluc3RhbmNlb2YgSFRNTElucHV0RWxlbWVudCkge1xuICAgICAgICAgICAgdGhpcy5wcm94eS5hdXRvZm9jdXMgPSB0aGlzLmF1dG9mb2N1cztcbiAgICAgICAgICAgIHRoaXMudmFsaWRhdGUoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBwbGFjZWhvbGRlckNoYW5nZWQoKSB7XG4gICAgICAgIGlmICh0aGlzLnByb3h5IGluc3RhbmNlb2YgSFRNTElucHV0RWxlbWVudCkge1xuICAgICAgICAgICAgdGhpcy5wcm94eS5wbGFjZWhvbGRlciA9IHRoaXMucGxhY2Vob2xkZXI7XG4gICAgICAgIH1cbiAgICB9XG4gICAgbGlzdENoYW5nZWQoKSB7XG4gICAgICAgIGlmICh0aGlzLnByb3h5IGluc3RhbmNlb2YgSFRNTElucHV0RWxlbWVudCkge1xuICAgICAgICAgICAgdGhpcy5wcm94eS5zZXRBdHRyaWJ1dGUoXCJsaXN0XCIsIHRoaXMubGlzdCk7XG4gICAgICAgICAgICB0aGlzLnZhbGlkYXRlKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgbWF4bGVuZ3RoQ2hhbmdlZCgpIHtcbiAgICAgICAgaWYgKHRoaXMucHJveHkgaW5zdGFuY2VvZiBIVE1MSW5wdXRFbGVtZW50KSB7XG4gICAgICAgICAgICB0aGlzLnByb3h5Lm1heExlbmd0aCA9IHRoaXMubWF4bGVuZ3RoO1xuICAgICAgICAgICAgdGhpcy52YWxpZGF0ZSgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIG1pbmxlbmd0aENoYW5nZWQoKSB7XG4gICAgICAgIGlmICh0aGlzLnByb3h5IGluc3RhbmNlb2YgSFRNTElucHV0RWxlbWVudCkge1xuICAgICAgICAgICAgdGhpcy5wcm94eS5taW5MZW5ndGggPSB0aGlzLm1pbmxlbmd0aDtcbiAgICAgICAgICAgIHRoaXMudmFsaWRhdGUoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBwYXR0ZXJuQ2hhbmdlZCgpIHtcbiAgICAgICAgaWYgKHRoaXMucHJveHkgaW5zdGFuY2VvZiBIVE1MSW5wdXRFbGVtZW50KSB7XG4gICAgICAgICAgICB0aGlzLnByb3h5LnBhdHRlcm4gPSB0aGlzLnBhdHRlcm47XG4gICAgICAgICAgICB0aGlzLnZhbGlkYXRlKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc2l6ZUNoYW5nZWQoKSB7XG4gICAgICAgIGlmICh0aGlzLnByb3h5IGluc3RhbmNlb2YgSFRNTElucHV0RWxlbWVudCkge1xuICAgICAgICAgICAgdGhpcy5wcm94eS5zaXplID0gdGhpcy5zaXplO1xuICAgICAgICB9XG4gICAgfVxuICAgIHNwZWxsY2hlY2tDaGFuZ2VkKCkge1xuICAgICAgICBpZiAodGhpcy5wcm94eSBpbnN0YW5jZW9mIEhUTUxJbnB1dEVsZW1lbnQpIHtcbiAgICAgICAgICAgIHRoaXMucHJveHkuc3BlbGxjaGVjayA9IHRoaXMuc3BlbGxjaGVjaztcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICAgICAgc3VwZXIuY29ubmVjdGVkQ2FsbGJhY2soKTtcbiAgICAgICAgdGhpcy52YWxpZGF0ZSgpO1xuICAgICAgICBpZiAodGhpcy5hdXRvZm9jdXMpIHtcbiAgICAgICAgICAgIERPTS5xdWV1ZVVwZGF0ZSgoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5mb2N1cygpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqIHtAaW5oZXJpdERvYyAoRm9ybUFzc29jaWF0ZWQ6aW50ZXJmYWNlKS52YWxpZGF0ZX0gKi9cbiAgICB2YWxpZGF0ZSgpIHtcbiAgICAgICAgc3VwZXIudmFsaWRhdGUodGhpcy5jb250cm9sKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSGFuZGxlcyB0aGUgaW50ZXJuYWwgY29udHJvbCdzIGBpbnB1dGAgZXZlbnRcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBoYW5kbGVUZXh0SW5wdXQoKSB7XG4gICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLmNvbnRyb2wudmFsdWU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEhhbmRsZXMgdGhlIGNvbnRyb2wncyBjbGVhciB2YWx1ZSBldmVudFxuICAgICAqIEBwdWJsaWNcbiAgICAgKi9cbiAgICBoYW5kbGVDbGVhcklucHV0KCkge1xuICAgICAgICB0aGlzLnZhbHVlID0gXCJcIjtcbiAgICAgICAgdGhpcy5jb250cm9sLmZvY3VzKCk7XG4gICAgICAgIHRoaXMuaGFuZGxlQ2hhbmdlKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENoYW5nZSBldmVudCBoYW5kbGVyIGZvciBpbm5lciBjb250cm9sLlxuICAgICAqIEByZW1hcmtzXG4gICAgICogXCJDaGFuZ2VcIiBldmVudHMgYXJlIG5vdCBgY29tcG9zYWJsZWAgc28gdGhleSB3aWxsIG5vdFxuICAgICAqIHBlcm1lYXRlIHRoZSBzaGFkb3cgRE9NIGJvdW5kYXJ5LiBUaGlzIGZuIGVmZmVjdGl2ZWx5IHByb3hpZXNcbiAgICAgKiB0aGUgY2hhbmdlIGV2ZW50LCBlbWl0dGluZyBhIGBjaGFuZ2VgIGV2ZW50IHdoZW5ldmVyIHRoZSBpbnRlcm5hbFxuICAgICAqIGNvbnRyb2wgZW1pdHMgYSBgY2hhbmdlYCBldmVudFxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIGhhbmRsZUNoYW5nZSgpIHtcbiAgICAgICAgdGhpcy4kZW1pdChcImNoYW5nZVwiKTtcbiAgICB9XG59XG5fX2RlY29yYXRlKFtcbiAgICBhdHRyKHsgYXR0cmlidXRlOiBcInJlYWRvbmx5XCIsIG1vZGU6IFwiYm9vbGVhblwiIH0pXG5dLCBTZWFyY2gucHJvdG90eXBlLCBcInJlYWRPbmx5XCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBhdHRyKHsgbW9kZTogXCJib29sZWFuXCIgfSlcbl0sIFNlYXJjaC5wcm90b3R5cGUsIFwiYXV0b2ZvY3VzXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBhdHRyXG5dLCBTZWFyY2gucHJvdG90eXBlLCBcInBsYWNlaG9sZGVyXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBhdHRyXG5dLCBTZWFyY2gucHJvdG90eXBlLCBcImxpc3RcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIGF0dHIoeyBjb252ZXJ0ZXI6IG51bGxhYmxlTnVtYmVyQ29udmVydGVyIH0pXG5dLCBTZWFyY2gucHJvdG90eXBlLCBcIm1heGxlbmd0aFwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgYXR0cih7IGNvbnZlcnRlcjogbnVsbGFibGVOdW1iZXJDb252ZXJ0ZXIgfSlcbl0sIFNlYXJjaC5wcm90b3R5cGUsIFwibWlubGVuZ3RoXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBhdHRyXG5dLCBTZWFyY2gucHJvdG90eXBlLCBcInBhdHRlcm5cIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIGF0dHIoeyBjb252ZXJ0ZXI6IG51bGxhYmxlTnVtYmVyQ29udmVydGVyIH0pXG5dLCBTZWFyY2gucHJvdG90eXBlLCBcInNpemVcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIGF0dHIoeyBtb2RlOiBcImJvb2xlYW5cIiB9KVxuXSwgU2VhcmNoLnByb3RvdHlwZSwgXCJzcGVsbGNoZWNrXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBvYnNlcnZhYmxlXG5dLCBTZWFyY2gucHJvdG90eXBlLCBcImRlZmF1bHRTbG90dGVkTm9kZXNcIiwgdm9pZCAwKTtcbi8qKlxuICogSW5jbHVkZXMgQVJJQSBzdGF0ZXMgYW5kIHByb3BlcnRpZXMgcmVsYXRpbmcgdG8gdGhlIEFSSUEgdGV4dGJveCByb2xlXG4gKlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgY2xhc3MgRGVsZWdhdGVzQVJJQVNlYXJjaCB7XG59XG5hcHBseU1peGlucyhEZWxlZ2F0ZXNBUklBU2VhcmNoLCBBUklBR2xvYmFsU3RhdGVzQW5kUHJvcGVydGllcyk7XG5hcHBseU1peGlucyhTZWFyY2gsIFN0YXJ0RW5kLCBEZWxlZ2F0ZXNBUklBU2VhcmNoKTtcbiIsImltcG9ydCB7IGh0bWwsIHJlZiwgc2xvdHRlZCB9IGZyb20gXCJAbWljcm9zb2Z0L2Zhc3QtZWxlbWVudFwiO1xuaW1wb3J0IHsgZW5kU2xvdFRlbXBsYXRlLCBzdGFydFNsb3RUZW1wbGF0ZSB9IGZyb20gXCIuLi9wYXR0ZXJucy9zdGFydC1lbmQuanNcIjtcbmltcG9ydCB7IHdoaXRlc3BhY2VGaWx0ZXIgfSBmcm9tIFwiLi4vdXRpbGl0aWVzL3doaXRlc3BhY2UtZmlsdGVyLmpzXCI7XG4vKipcbiAqIFRoZSB0ZW1wbGF0ZSBmb3IgdGhlIHtAbGluayBAbWljcm9zb2Z0L2Zhc3QtZm91bmRhdGlvbiMoU2VhcmNoOmNsYXNzKX0gY29tcG9uZW50LlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgY29uc3Qgc2VhcmNoVGVtcGxhdGUgPSAoY29udGV4dCwgZGVmaW5pdGlvbikgPT4gaHRtbCBgXG4gICAgPHRlbXBsYXRlXG4gICAgICAgIGNsYXNzPVwiXG4gICAgICAgICAgICAke3ggPT4gKHgucmVhZE9ubHkgPyBcInJlYWRvbmx5XCIgOiBcIlwiKX1cbiAgICAgICAgXCJcbiAgICA+XG4gICAgICAgIDxsYWJlbFxuICAgICAgICAgICAgcGFydD1cImxhYmVsXCJcbiAgICAgICAgICAgIGZvcj1cImNvbnRyb2xcIlxuICAgICAgICAgICAgY2xhc3M9XCIke3ggPT4geC5kZWZhdWx0U2xvdHRlZE5vZGVzICYmIHguZGVmYXVsdFNsb3R0ZWROb2Rlcy5sZW5ndGhcbiAgICA/IFwibGFiZWxcIlxuICAgIDogXCJsYWJlbCBsYWJlbF9faGlkZGVuXCJ9XCJcbiAgICAgICAgPlxuICAgICAgICAgICAgPHNsb3RcbiAgICAgICAgICAgICAgICAke3Nsb3R0ZWQoeyBwcm9wZXJ0eTogXCJkZWZhdWx0U2xvdHRlZE5vZGVzXCIsIGZpbHRlcjogd2hpdGVzcGFjZUZpbHRlciB9KX1cbiAgICAgICAgICAgID48L3Nsb3Q+XG4gICAgICAgIDwvbGFiZWw+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJyb290XCIgcGFydD1cInJvb3RcIiAke3JlZihcInJvb3RcIil9PlxuICAgICAgICAgICAgJHtzdGFydFNsb3RUZW1wbGF0ZShjb250ZXh0LCBkZWZpbml0aW9uKX1cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJpbnB1dC13cmFwcGVyXCIgcGFydD1cImlucHV0LXdyYXBwZXJcIj5cbiAgICAgICAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgICAgICAgICAgY2xhc3M9XCJjb250cm9sXCJcbiAgICAgICAgICAgICAgICAgICAgcGFydD1cImNvbnRyb2xcIlxuICAgICAgICAgICAgICAgICAgICBpZD1cImNvbnRyb2xcIlxuICAgICAgICAgICAgICAgICAgICBAaW5wdXQ9XCIke3ggPT4geC5oYW5kbGVUZXh0SW5wdXQoKX1cIlxuICAgICAgICAgICAgICAgICAgICBAY2hhbmdlPVwiJHt4ID0+IHguaGFuZGxlQ2hhbmdlKCl9XCJcbiAgICAgICAgICAgICAgICAgICAgP2F1dG9mb2N1cz1cIiR7eCA9PiB4LmF1dG9mb2N1c31cIlxuICAgICAgICAgICAgICAgICAgICA/ZGlzYWJsZWQ9XCIke3ggPT4geC5kaXNhYmxlZH1cIlxuICAgICAgICAgICAgICAgICAgICBsaXN0PVwiJHt4ID0+IHgubGlzdH1cIlxuICAgICAgICAgICAgICAgICAgICBtYXhsZW5ndGg9XCIke3ggPT4geC5tYXhsZW5ndGh9XCJcbiAgICAgICAgICAgICAgICAgICAgbWlubGVuZ3RoPVwiJHt4ID0+IHgubWlubGVuZ3RofVwiXG4gICAgICAgICAgICAgICAgICAgIHBhdHRlcm49XCIke3ggPT4geC5wYXR0ZXJufVwiXG4gICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiJHt4ID0+IHgucGxhY2Vob2xkZXJ9XCJcbiAgICAgICAgICAgICAgICAgICAgP3JlYWRvbmx5PVwiJHt4ID0+IHgucmVhZE9ubHl9XCJcbiAgICAgICAgICAgICAgICAgICAgP3JlcXVpcmVkPVwiJHt4ID0+IHgucmVxdWlyZWR9XCJcbiAgICAgICAgICAgICAgICAgICAgc2l6ZT1cIiR7eCA9PiB4LnNpemV9XCJcbiAgICAgICAgICAgICAgICAgICAgP3NwZWxsY2hlY2s9XCIke3ggPT4geC5zcGVsbGNoZWNrfVwiXG4gICAgICAgICAgICAgICAgICAgIDp2YWx1ZT1cIiR7eCA9PiB4LnZhbHVlfVwiXG4gICAgICAgICAgICAgICAgICAgIHR5cGU9XCJzZWFyY2hcIlxuICAgICAgICAgICAgICAgICAgICBhcmlhLWF0b21pYz1cIiR7eCA9PiB4LmFyaWFBdG9taWN9XCJcbiAgICAgICAgICAgICAgICAgICAgYXJpYS1idXN5PVwiJHt4ID0+IHguYXJpYUJ1c3l9XCJcbiAgICAgICAgICAgICAgICAgICAgYXJpYS1jb250cm9scz1cIiR7eCA9PiB4LmFyaWFDb250cm9sc31cIlxuICAgICAgICAgICAgICAgICAgICBhcmlhLWN1cnJlbnQ9XCIke3ggPT4geC5hcmlhQ3VycmVudH1cIlxuICAgICAgICAgICAgICAgICAgICBhcmlhLWRlc2NyaWJlZGJ5PVwiJHt4ID0+IHguYXJpYURlc2NyaWJlZGJ5fVwiXG4gICAgICAgICAgICAgICAgICAgIGFyaWEtZGV0YWlscz1cIiR7eCA9PiB4LmFyaWFEZXRhaWxzfVwiXG4gICAgICAgICAgICAgICAgICAgIGFyaWEtZGlzYWJsZWQ9XCIke3ggPT4geC5hcmlhRGlzYWJsZWR9XCJcbiAgICAgICAgICAgICAgICAgICAgYXJpYS1lcnJvcm1lc3NhZ2U9XCIke3ggPT4geC5hcmlhRXJyb3JtZXNzYWdlfVwiXG4gICAgICAgICAgICAgICAgICAgIGFyaWEtZmxvd3RvPVwiJHt4ID0+IHguYXJpYUZsb3d0b31cIlxuICAgICAgICAgICAgICAgICAgICBhcmlhLWhhc3BvcHVwPVwiJHt4ID0+IHguYXJpYUhhc3BvcHVwfVwiXG4gICAgICAgICAgICAgICAgICAgIGFyaWEtaGlkZGVuPVwiJHt4ID0+IHguYXJpYUhpZGRlbn1cIlxuICAgICAgICAgICAgICAgICAgICBhcmlhLWludmFsaWQ9XCIke3ggPT4geC5hcmlhSW52YWxpZH1cIlxuICAgICAgICAgICAgICAgICAgICBhcmlhLWtleXNob3J0Y3V0cz1cIiR7eCA9PiB4LmFyaWFLZXlzaG9ydGN1dHN9XCJcbiAgICAgICAgICAgICAgICAgICAgYXJpYS1sYWJlbD1cIiR7eCA9PiB4LmFyaWFMYWJlbH1cIlxuICAgICAgICAgICAgICAgICAgICBhcmlhLWxhYmVsbGVkYnk9XCIke3ggPT4geC5hcmlhTGFiZWxsZWRieX1cIlxuICAgICAgICAgICAgICAgICAgICBhcmlhLWxpdmU9XCIke3ggPT4geC5hcmlhTGl2ZX1cIlxuICAgICAgICAgICAgICAgICAgICBhcmlhLW93bnM9XCIke3ggPT4geC5hcmlhT3duc31cIlxuICAgICAgICAgICAgICAgICAgICBhcmlhLXJlbGV2YW50PVwiJHt4ID0+IHguYXJpYVJlbGV2YW50fVwiXG4gICAgICAgICAgICAgICAgICAgIGFyaWEtcm9sZWRlc2NyaXB0aW9uPVwiJHt4ID0+IHguYXJpYVJvbGVkZXNjcmlwdGlvbn1cIlxuICAgICAgICAgICAgICAgICAgICAke3JlZihcImNvbnRyb2xcIil9XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICA8c2xvdCBuYW1lPVwiY2xvc2UtYnV0dG9uXCI+XG4gICAgICAgICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzPVwiY2xlYXItYnV0dG9uICR7eCA9PiB4LnZhbHVlID8gXCJcIiA6IFwiY2xlYXItYnV0dG9uX19oaWRkZW5cIn1cIlxuICAgICAgICAgICAgICAgICAgICAgICAgcGFydD1cImNsZWFyLWJ1dHRvblwiXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWJpbmRleD1cIi0xXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIEBjbGljaz0ke3ggPT4geC5oYW5kbGVDbGVhcklucHV0KCl9XG4gICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxzbG90IG5hbWU9XCJjbG9zZS1nbHlwaFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzdmdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg9XCI5XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0PVwiOVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZpZXdCb3g9XCIwIDAgOSA5XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cGF0aFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZD1cIk0wLjE0NjQ0NyAwLjE0NjQ0N0MwLjMzODY4MyAtMC4wNDc4OTcyIDAuNjQ1OTExIC0wLjAyNzAzNTkgMC44NTM1NTMgMC4xNDY0NDdMNC41IDMuNzkzTDguMTQ2NDUgMC4xNDY0NDdDOC4zNDE3MSAtMC4wNDg4MTU1IDguNjU4MjkgLTAuMDQ4ODE1NSA4Ljg1MzU1IDAuMTQ2NDQ3QzkuMDQ4ODIgMC4zNDE3MDkgOS4wNDg4MiAwLjY1ODI5MSA4Ljg1MzU1IDAuODUzNTUzTDUuMjA3IDQuNUw4Ljg1MzU1IDguMTQ2NDVDOS4wNTkzNCA4LjM1MjIzIDkuMDMxMjkgOC42NzU4MiA4Ljg1MzU1IDguODUzNTVDOC42NzU4MiA5LjAzMTI5IDguMzU0MDkgOS4wMjcwMyA4LjE0NjQ1IDguODUzNTVMNC41IDUuMjA3TDAuODUzNTUzIDguODUzNTVDMC42NTgyOTEgOS4wNDg4MiAwLjM0MTcwOSA5LjA0ODgyIDAuMTQ2NDQ3IDguODUzNTVDLTAuMDQ4ODE1NSA4LjY1ODI5IC0wLjA0ODgxNTUgOC4zNDE3MSAwLjE0NjQ0NyA4LjE0NjQ1TDMuNzkzIDQuNUwwLjE0NjQ0NyAwLjg1MzU1M0MtMC4wMjY4Njk3IDAuNjgwMjM3IC0wLjA0NTc4OTQgMC4zNDA3OSAwLjE0NjQ0NyAwLjE0NjQ0N1pcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3ZnPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9zbG90PlxuICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICA8L3Nsb3Q+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICR7ZW5kU2xvdFRlbXBsYXRlKGNvbnRleHQsIGRlZmluaXRpb24pfVxuICAgICAgICA8L2Rpdj5cbiAgICA8L3RlbXBsYXRlPlxuYDtcbiIsImV4cG9ydCAqIGZyb20gXCIuL3NlbGVjdC5qc1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vc2VsZWN0Lm9wdGlvbnMuanNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL3NlbGVjdC50ZW1wbGF0ZS5qc1wiO1xuIiwiaW1wb3J0IHsgTGlzdGJveEVsZW1lbnQgfSBmcm9tIFwiLi4vbGlzdGJveC9saXN0Ym94LmVsZW1lbnQuanNcIjtcbmltcG9ydCB7IEZvcm1Bc3NvY2lhdGVkIH0gZnJvbSBcIi4uL2Zvcm0tYXNzb2NpYXRlZC9mb3JtLWFzc29jaWF0ZWQuanNcIjtcbmNsYXNzIF9TZWxlY3QgZXh0ZW5kcyBMaXN0Ym94RWxlbWVudCB7XG59XG4vKipcbiAqIEEgZm9ybS1hc3NvY2lhdGVkIGJhc2UgY2xhc3MgZm9yIHRoZSB7QGxpbmsgQG1pY3Jvc29mdC9mYXN0LWZvdW5kYXRpb24jKFNlbGVjdDpjbGFzcyl9IGNvbXBvbmVudC5cbiAqXG4gKiBAaW50ZXJuYWxcbiAqL1xuZXhwb3J0IGNsYXNzIEZvcm1Bc3NvY2lhdGVkU2VsZWN0IGV4dGVuZHMgRm9ybUFzc29jaWF0ZWQoX1NlbGVjdCkge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlciguLi5hcmd1bWVudHMpO1xuICAgICAgICB0aGlzLnByb3h5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNlbGVjdFwiKTtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBfX2RlY29yYXRlIH0gZnJvbSBcInRzbGliXCI7XG5pbXBvcnQgeyBhdHRyLCBET00sIE9ic2VydmFibGUsIG9ic2VydmFibGUsIHZvbGF0aWxlIH0gZnJvbSBcIkBtaWNyb3NvZnQvZmFzdC1lbGVtZW50XCI7XG5pbXBvcnQgeyBrZXlBcnJvd0Rvd24sIGtleUFycm93VXAsIGtleUVuZCwga2V5RW50ZXIsIGtleUVzY2FwZSwga2V5SG9tZSwga2V5U3BhY2UsIGtleVRhYiwgdW5pcXVlSWQsIH0gZnJvbSBcIkBtaWNyb3NvZnQvZmFzdC13ZWItdXRpbGl0aWVzXCI7XG5pbXBvcnQgeyBEZWxlZ2F0ZXNBUklBTGlzdGJveCwgTGlzdGJveCB9IGZyb20gXCIuLi9saXN0Ym94L2xpc3Rib3guanNcIjtcbmltcG9ydCB7IFN0YXJ0RW5kIH0gZnJvbSBcIi4uL3BhdHRlcm5zL3N0YXJ0LWVuZC5qc1wiO1xuaW1wb3J0IHsgYXBwbHlNaXhpbnMgfSBmcm9tIFwiLi4vdXRpbGl0aWVzL2FwcGx5LW1peGlucy5qc1wiO1xuaW1wb3J0IHsgRm9ybUFzc29jaWF0ZWRTZWxlY3QgfSBmcm9tIFwiLi9zZWxlY3QuZm9ybS1hc3NvY2lhdGVkLmpzXCI7XG5pbXBvcnQgeyBTZWxlY3RQb3NpdGlvbiB9IGZyb20gXCIuL3NlbGVjdC5vcHRpb25zLmpzXCI7XG4vKipcbiAqIEEgU2VsZWN0IEN1c3RvbSBIVE1MIEVsZW1lbnQuXG4gKiBJbXBsZW1lbnRzIHRoZSB7QGxpbmsgaHR0cHM6Ly93d3cudzMub3JnL1RSL3dhaS1hcmlhLTEuMS8jc2VsZWN0IHwgQVJJQSBzZWxlY3QgfS5cbiAqXG4gKiBAc2xvdCBzdGFydCAtIENvbnRlbnQgd2hpY2ggY2FuIGJlIHByb3ZpZGVkIGJlZm9yZSB0aGUgYnV0dG9uIGNvbnRlbnRcbiAqIEBzbG90IGVuZCAtIENvbnRlbnQgd2hpY2ggY2FuIGJlIHByb3ZpZGVkIGFmdGVyIHRoZSBidXR0b24gY29udGVudFxuICogQHNsb3QgYnV0dG9uLWNvbnRhaW5lciAtIFRoZSBlbGVtZW50IHJlcHJlc2VudGluZyB0aGUgc2VsZWN0IGJ1dHRvblxuICogQHNsb3Qgc2VsZWN0ZWQtdmFsdWUgLSBUaGUgc2VsZWN0ZWQgdmFsdWVcbiAqIEBzbG90IGluZGljYXRvciAtIFRoZSB2aXN1YWwgaW5kaWNhdG9yIGZvciB0aGUgZXhwYW5kL2NvbGxhcHNlIHN0YXRlIG9mIHRoZSBidXR0b25cbiAqIEBzbG90IC0gVGhlIGRlZmF1bHQgc2xvdCBmb3Igc2xvdHRlZCBvcHRpb25zXG4gKiBAY3NzcGFydCBjb250cm9sIC0gVGhlIGVsZW1lbnQgcmVwcmVzZW50aW5nIHRoZSBzZWxlY3QgaW52b2tpbmcgZWxlbWVudFxuICogQGNzc3BhcnQgc2VsZWN0ZWQtdmFsdWUgLSBUaGUgZWxlbWVudCB3cmFwcGluZyB0aGUgc2VsZWN0ZWQgdmFsdWVcbiAqIEBjc3NwYXJ0IGluZGljYXRvciAtIFRoZSBlbGVtZW50IHdyYXBwaW5nIHRoZSB2aXN1YWwgaW5kaWNhdG9yXG4gKiBAY3NzcGFydCBsaXN0Ym94IC0gVGhlIGxpc3Rib3ggZWxlbWVudFxuICogQGZpcmVzIGlucHV0IC0gRmlyZXMgYSBjdXN0b20gJ2lucHV0JyBldmVudCB3aGVuIHRoZSB2YWx1ZSB1cGRhdGVzXG4gKiBAZmlyZXMgY2hhbmdlIC0gRmlyZXMgYSBjdXN0b20gJ2NoYW5nZScgZXZlbnQgd2hlbiB0aGUgdmFsdWUgdXBkYXRlc1xuICpcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGNsYXNzIFNlbGVjdCBleHRlbmRzIEZvcm1Bc3NvY2lhdGVkU2VsZWN0IHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBvcGVuIGF0dHJpYnV0ZS5cbiAgICAgICAgICpcbiAgICAgICAgICogQHB1YmxpY1xuICAgICAgICAgKiBAcmVtYXJrc1xuICAgICAgICAgKiBIVE1MIEF0dHJpYnV0ZTogb3BlblxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5vcGVuID0gZmFsc2U7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJbmRpY2F0ZXMgdGhlIGluaXRpYWwgc3RhdGUgb2YgdGhlIHBvc2l0aW9uIGF0dHJpYnV0ZS5cbiAgICAgICAgICpcbiAgICAgICAgICogQGludGVybmFsXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmZvcmNlZFBvc2l0aW9uID0gZmFsc2U7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgdW5pcXVlIGlkIGZvciB0aGUgaW50ZXJuYWwgbGlzdGJveCBlbGVtZW50LlxuICAgICAgICAgKlxuICAgICAgICAgKiBAaW50ZXJuYWxcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMubGlzdGJveElkID0gdW5pcXVlSWQoXCJsaXN0Ym94LVwiKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBtYXggaGVpZ2h0IGZvciB0aGUgbGlzdGJveCB3aGVuIG9wZW5lZC5cbiAgICAgICAgICpcbiAgICAgICAgICogQGludGVybmFsXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm1heEhlaWdodCA9IDA7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldHMgZm9jdXMgYW5kIHN5bmNocm9uaXplcyBBUklBIGF0dHJpYnV0ZXMgd2hlbiB0aGUgb3BlbiBwcm9wZXJ0eSBjaGFuZ2VzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHByZXYgLSB0aGUgcHJldmlvdXMgb3BlbiB2YWx1ZVxuICAgICAqIEBwYXJhbSBuZXh0IC0gdGhlIGN1cnJlbnQgb3BlbiB2YWx1ZVxuICAgICAqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgb3BlbkNoYW5nZWQocHJldiwgbmV4dCkge1xuICAgICAgICBpZiAoIXRoaXMuY29sbGFwc2libGUpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5vcGVuKSB7XG4gICAgICAgICAgICB0aGlzLmFyaWFDb250cm9scyA9IHRoaXMubGlzdGJveElkO1xuICAgICAgICAgICAgdGhpcy5hcmlhRXhwYW5kZWQgPSBcInRydWVcIjtcbiAgICAgICAgICAgIHRoaXMuc2V0UG9zaXRpb25pbmcoKTtcbiAgICAgICAgICAgIHRoaXMuZm9jdXNBbmRTY3JvbGxPcHRpb25JbnRvVmlldygpO1xuICAgICAgICAgICAgdGhpcy5pbmRleFdoZW5PcGVuZWQgPSB0aGlzLnNlbGVjdGVkSW5kZXg7XG4gICAgICAgICAgICAvLyBmb2N1cyBpcyBkaXJlY3RlZCB0byB0aGUgZWxlbWVudCB3aGVuIGBvcGVuYCBpcyBjaGFuZ2VkIHByb2dyYW1tYXRpY2FsbHlcbiAgICAgICAgICAgIERPTS5xdWV1ZVVwZGF0ZSgoKSA9PiB0aGlzLmZvY3VzKCkpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuYXJpYUNvbnRyb2xzID0gXCJcIjtcbiAgICAgICAgdGhpcy5hcmlhRXhwYW5kZWQgPSBcImZhbHNlXCI7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBjb21wb25lbnQgaXMgY29sbGFwc2libGUgd2hlbiBpbiBzaW5nbGUtc2VsZWN0aW9uIG1vZGUgd2l0aCBubyBzaXplIGF0dHJpYnV0ZS5cbiAgICAgKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIGdldCBjb2xsYXBzaWJsZSgpIHtcbiAgICAgICAgcmV0dXJuICEodGhpcy5tdWx0aXBsZSB8fCB0eXBlb2YgdGhpcy5zaXplID09PSBcIm51bWJlclwiKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIHZhbHVlIHByb3BlcnR5LlxuICAgICAqXG4gICAgICogQHB1YmxpY1xuICAgICAqL1xuICAgIGdldCB2YWx1ZSgpIHtcbiAgICAgICAgT2JzZXJ2YWJsZS50cmFjayh0aGlzLCBcInZhbHVlXCIpO1xuICAgICAgICByZXR1cm4gdGhpcy5fdmFsdWU7XG4gICAgfVxuICAgIHNldCB2YWx1ZShuZXh0KSB7XG4gICAgICAgIHZhciBfYSwgX2IsIF9jLCBfZCwgX2UsIF9mLCBfZztcbiAgICAgICAgY29uc3QgcHJldiA9IGAke3RoaXMuX3ZhbHVlfWA7XG4gICAgICAgIGlmICgoX2EgPSB0aGlzLl9vcHRpb25zKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EubGVuZ3RoKSB7XG4gICAgICAgICAgICBjb25zdCBzZWxlY3RlZEluZGV4ID0gdGhpcy5fb3B0aW9ucy5maW5kSW5kZXgoZWwgPT4gZWwudmFsdWUgPT09IG5leHQpO1xuICAgICAgICAgICAgY29uc3QgcHJldlNlbGVjdGVkVmFsdWUgPSAoX2MgPSAoX2IgPSB0aGlzLl9vcHRpb25zW3RoaXMuc2VsZWN0ZWRJbmRleF0pID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi52YWx1ZSkgIT09IG51bGwgJiYgX2MgIT09IHZvaWQgMCA/IF9jIDogbnVsbDtcbiAgICAgICAgICAgIGNvbnN0IG5leHRTZWxlY3RlZFZhbHVlID0gKF9lID0gKF9kID0gdGhpcy5fb3B0aW9uc1tzZWxlY3RlZEluZGV4XSkgPT09IG51bGwgfHwgX2QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9kLnZhbHVlKSAhPT0gbnVsbCAmJiBfZSAhPT0gdm9pZCAwID8gX2UgOiBudWxsO1xuICAgICAgICAgICAgaWYgKHNlbGVjdGVkSW5kZXggPT09IC0xIHx8IHByZXZTZWxlY3RlZFZhbHVlICE9PSBuZXh0U2VsZWN0ZWRWYWx1ZSkge1xuICAgICAgICAgICAgICAgIG5leHQgPSBcIlwiO1xuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRJbmRleCA9IHNlbGVjdGVkSW5kZXg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBuZXh0ID0gKF9nID0gKF9mID0gdGhpcy5maXJzdFNlbGVjdGVkT3B0aW9uKSA9PT0gbnVsbCB8fCBfZiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2YudmFsdWUpICE9PSBudWxsICYmIF9nICE9PSB2b2lkIDAgPyBfZyA6IG5leHQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHByZXYgIT09IG5leHQpIHtcbiAgICAgICAgICAgIHRoaXMuX3ZhbHVlID0gbmV4dDtcbiAgICAgICAgICAgIHN1cGVyLnZhbHVlQ2hhbmdlZChwcmV2LCBuZXh0KTtcbiAgICAgICAgICAgIE9ic2VydmFibGUubm90aWZ5KHRoaXMsIFwidmFsdWVcIik7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZURpc3BsYXlWYWx1ZSgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldHMgdGhlIHZhbHVlIGFuZCBkaXNwbGF5IHZhbHVlIHRvIG1hdGNoIHRoZSBmaXJzdCBzZWxlY3RlZCBvcHRpb24uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gc2hvdWxkRW1pdCAtIGlmIHRydWUsIHRoZSBpbnB1dCBhbmQgY2hhbmdlIGV2ZW50cyB3aWxsIGJlIGVtaXR0ZWRcbiAgICAgKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIHVwZGF0ZVZhbHVlKHNob3VsZEVtaXQpIHtcbiAgICAgICAgdmFyIF9hLCBfYjtcbiAgICAgICAgaWYgKHRoaXMuJGZhc3RDb250cm9sbGVyLmlzQ29ubmVjdGVkKSB7XG4gICAgICAgICAgICB0aGlzLnZhbHVlID0gKF9iID0gKF9hID0gdGhpcy5maXJzdFNlbGVjdGVkT3B0aW9uKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EudmFsdWUpICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IFwiXCI7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNob3VsZEVtaXQpIHtcbiAgICAgICAgICAgIHRoaXMuJGVtaXQoXCJpbnB1dFwiKTtcbiAgICAgICAgICAgIHRoaXMuJGVtaXQoXCJjaGFuZ2VcIiwgdGhpcywge1xuICAgICAgICAgICAgICAgIGJ1YmJsZXM6IHRydWUsXG4gICAgICAgICAgICAgICAgY29tcG9zZWQ6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFVwZGF0ZXMgdGhlIHByb3h5IHZhbHVlIHdoZW4gdGhlIHNlbGVjdGVkIGluZGV4IGNoYW5nZXMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcHJldiAtIHRoZSBwcmV2aW91cyBzZWxlY3RlZCBpbmRleFxuICAgICAqIEBwYXJhbSBuZXh0IC0gdGhlIG5leHQgc2VsZWN0ZWQgaW5kZXhcbiAgICAgKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIHNlbGVjdGVkSW5kZXhDaGFuZ2VkKHByZXYsIG5leHQpIHtcbiAgICAgICAgc3VwZXIuc2VsZWN0ZWRJbmRleENoYW5nZWQocHJldiwgbmV4dCk7XG4gICAgICAgIHRoaXMudXBkYXRlVmFsdWUoKTtcbiAgICB9XG4gICAgcG9zaXRpb25DaGFuZ2VkKHByZXYsIG5leHQpIHtcbiAgICAgICAgdGhpcy5wb3NpdGlvbkF0dHJpYnV0ZSA9IG5leHQ7XG4gICAgICAgIHRoaXMuc2V0UG9zaXRpb25pbmcoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2FsY3VsYXRlIGFuZCBhcHBseSBsaXN0Ym94IHBvc2l0aW9uaW5nIGJhc2VkIG9uIGF2YWlsYWJsZSB2aWV3cG9ydCBzcGFjZS5cbiAgICAgKlxuICAgICAqIEBwdWJsaWNcbiAgICAgKi9cbiAgICBzZXRQb3NpdGlvbmluZygpIHtcbiAgICAgICAgY29uc3QgY3VycmVudEJveCA9IHRoaXMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgIGNvbnN0IHZpZXdwb3J0SGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0O1xuICAgICAgICBjb25zdCBhdmFpbGFibGVCb3R0b20gPSB2aWV3cG9ydEhlaWdodCAtIGN1cnJlbnRCb3guYm90dG9tO1xuICAgICAgICB0aGlzLnBvc2l0aW9uID0gdGhpcy5mb3JjZWRQb3NpdGlvblxuICAgICAgICAgICAgPyB0aGlzLnBvc2l0aW9uQXR0cmlidXRlXG4gICAgICAgICAgICA6IGN1cnJlbnRCb3gudG9wID4gYXZhaWxhYmxlQm90dG9tXG4gICAgICAgICAgICAgICAgPyBTZWxlY3RQb3NpdGlvbi5hYm92ZVxuICAgICAgICAgICAgICAgIDogU2VsZWN0UG9zaXRpb24uYmVsb3c7XG4gICAgICAgIHRoaXMucG9zaXRpb25BdHRyaWJ1dGUgPSB0aGlzLmZvcmNlZFBvc2l0aW9uXG4gICAgICAgICAgICA/IHRoaXMucG9zaXRpb25BdHRyaWJ1dGVcbiAgICAgICAgICAgIDogdGhpcy5wb3NpdGlvbjtcbiAgICAgICAgdGhpcy5tYXhIZWlnaHQgPVxuICAgICAgICAgICAgdGhpcy5wb3NpdGlvbiA9PT0gU2VsZWN0UG9zaXRpb24uYWJvdmUgPyB+fmN1cnJlbnRCb3gudG9wIDogfn5hdmFpbGFibGVCb3R0b207XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSB2YWx1ZSBkaXNwbGF5ZWQgb24gdGhlIGJ1dHRvbi5cbiAgICAgKlxuICAgICAqIEBwdWJsaWNcbiAgICAgKi9cbiAgICBnZXQgZGlzcGxheVZhbHVlKCkge1xuICAgICAgICB2YXIgX2EsIF9iO1xuICAgICAgICBPYnNlcnZhYmxlLnRyYWNrKHRoaXMsIFwiZGlzcGxheVZhbHVlXCIpO1xuICAgICAgICByZXR1cm4gKF9iID0gKF9hID0gdGhpcy5maXJzdFNlbGVjdGVkT3B0aW9uKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EudGV4dCkgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogXCJcIjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU3luY2hyb25pemUgdGhlIGBhcmlhLWRpc2FibGVkYCBwcm9wZXJ0eSB3aGVuIHRoZSBgZGlzYWJsZWRgIHByb3BlcnR5IGNoYW5nZXMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcHJldiAtIFRoZSBwcmV2aW91cyBkaXNhYmxlZCB2YWx1ZVxuICAgICAqIEBwYXJhbSBuZXh0IC0gVGhlIG5leHQgZGlzYWJsZWQgdmFsdWVcbiAgICAgKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIGRpc2FibGVkQ2hhbmdlZChwcmV2LCBuZXh0KSB7XG4gICAgICAgIGlmIChzdXBlci5kaXNhYmxlZENoYW5nZWQpIHtcbiAgICAgICAgICAgIHN1cGVyLmRpc2FibGVkQ2hhbmdlZChwcmV2LCBuZXh0KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmFyaWFEaXNhYmxlZCA9IHRoaXMuZGlzYWJsZWQgPyBcInRydWVcIiA6IFwiZmFsc2VcIjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVzZXQgdGhlIGVsZW1lbnQgdG8gaXRzIGZpcnN0IHNlbGVjdGFibGUgb3B0aW9uIHdoZW4gaXRzIHBhcmVudCBmb3JtIGlzIHJlc2V0LlxuICAgICAqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgZm9ybVJlc2V0Q2FsbGJhY2soKSB7XG4gICAgICAgIHRoaXMuc2V0UHJveHlPcHRpb25zKCk7XG4gICAgICAgIC8vIENhbGwgdGhlIGJhc2UgY2xhc3MncyBpbXBsZW1lbnRhdGlvbiBzZXREZWZhdWx0U2VsZWN0ZWRPcHRpb24gaW5zdGVhZCBvZiB0aGUgc2VsZWN0J3NcbiAgICAgICAgLy8gb3ZlcnJpZGUsIGluIG9yZGVyIHRvIHJlc2V0IHRoZSBzZWxlY3RlZEluZGV4IHdpdGhvdXQgdXNpbmcgdGhlIHZhbHVlIHByb3BlcnR5LlxuICAgICAgICBzdXBlci5zZXREZWZhdWx0U2VsZWN0ZWRPcHRpb24oKTtcbiAgICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRJbmRleCA9PT0gLTEpIHtcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRJbmRleCA9IDA7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogSGFuZGxlIG9wZW5pbmcgYW5kIGNsb3NpbmcgdGhlIGxpc3Rib3ggd2hlbiB0aGUgc2VsZWN0IGlzIGNsaWNrZWQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZSAtIHRoZSBtb3VzZSBldmVudFxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIGNsaWNrSGFuZGxlcihlKSB7XG4gICAgICAgIC8vIGRvIG5vdGhpbmcgaWYgdGhlIHNlbGVjdCBpcyBkaXNhYmxlZFxuICAgICAgICBpZiAodGhpcy5kaXNhYmxlZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLm9wZW4pIHtcbiAgICAgICAgICAgIGNvbnN0IGNhcHR1cmVkID0gZS50YXJnZXQuY2xvc2VzdChgb3B0aW9uLFtyb2xlPW9wdGlvbl1gKTtcbiAgICAgICAgICAgIGlmIChjYXB0dXJlZCAmJiBjYXB0dXJlZC5kaXNhYmxlZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBzdXBlci5jbGlja0hhbmRsZXIoZSk7XG4gICAgICAgIHRoaXMub3BlbiA9IHRoaXMuY29sbGFwc2libGUgJiYgIXRoaXMub3BlbjtcbiAgICAgICAgaWYgKCF0aGlzLm9wZW4gJiYgdGhpcy5pbmRleFdoZW5PcGVuZWQgIT09IHRoaXMuc2VsZWN0ZWRJbmRleCkge1xuICAgICAgICAgICAgdGhpcy51cGRhdGVWYWx1ZSh0cnVlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSGFuZGxlcyBmb2N1cyBzdGF0ZSB3aGVuIHRoZSBlbGVtZW50IG9yIGl0cyBjaGlsZHJlbiBsb3NlIGZvY3VzLlxuICAgICAqXG4gICAgICogQHBhcmFtIGUgLSBUaGUgZm9jdXMgZXZlbnRcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBmb2N1c291dEhhbmRsZXIoZSkge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIHN1cGVyLmZvY3Vzb3V0SGFuZGxlcihlKTtcbiAgICAgICAgaWYgKCF0aGlzLm9wZW4pIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGZvY3VzVGFyZ2V0ID0gZS5yZWxhdGVkVGFyZ2V0O1xuICAgICAgICBpZiAodGhpcy5pc1NhbWVOb2RlKGZvY3VzVGFyZ2V0KSkge1xuICAgICAgICAgICAgdGhpcy5mb2N1cygpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICghKChfYSA9IHRoaXMub3B0aW9ucykgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmluY2x1ZGVzKGZvY3VzVGFyZ2V0KSkpIHtcbiAgICAgICAgICAgIHRoaXMub3BlbiA9IGZhbHNlO1xuICAgICAgICAgICAgaWYgKHRoaXMuaW5kZXhXaGVuT3BlbmVkICE9PSB0aGlzLnNlbGVjdGVkSW5kZXgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVZhbHVlKHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFVwZGF0ZXMgdGhlIHZhbHVlIHdoZW4gYW4gb3B0aW9uJ3MgdmFsdWUgY2hhbmdlcy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBzb3VyY2UgLSB0aGUgc291cmNlIG9iamVjdFxuICAgICAqIEBwYXJhbSBwcm9wZXJ0eU5hbWUgLSB0aGUgcHJvcGVydHkgdG8gZXZhbHVhdGVcbiAgICAgKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqIEBvdmVycmlkZVxuICAgICAqL1xuICAgIGhhbmRsZUNoYW5nZShzb3VyY2UsIHByb3BlcnR5TmFtZSkge1xuICAgICAgICBzdXBlci5oYW5kbGVDaGFuZ2Uoc291cmNlLCBwcm9wZXJ0eU5hbWUpO1xuICAgICAgICBpZiAocHJvcGVydHlOYW1lID09PSBcInZhbHVlXCIpIHtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlVmFsdWUoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBTeW5jaHJvbml6ZSB0aGUgZm9ybS1hc3NvY2lhdGVkIHByb3h5IGFuZCB1cGRhdGVzIHRoZSB2YWx1ZSBwcm9wZXJ0eSBvZiB0aGUgZWxlbWVudC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBwcmV2IC0gdGhlIHByZXZpb3VzIGNvbGxlY3Rpb24gb2Ygc2xvdHRlZCBvcHRpb24gZWxlbWVudHNcbiAgICAgKiBAcGFyYW0gbmV4dCAtIHRoZSBuZXh0IGNvbGxlY3Rpb24gb2Ygc2xvdHRlZCBvcHRpb24gZWxlbWVudHNcbiAgICAgKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIHNsb3R0ZWRPcHRpb25zQ2hhbmdlZChwcmV2LCBuZXh0KSB7XG4gICAgICAgIHRoaXMub3B0aW9ucy5mb3JFYWNoKG8gPT4ge1xuICAgICAgICAgICAgY29uc3Qgbm90aWZpZXIgPSBPYnNlcnZhYmxlLmdldE5vdGlmaWVyKG8pO1xuICAgICAgICAgICAgbm90aWZpZXIudW5zdWJzY3JpYmUodGhpcywgXCJ2YWx1ZVwiKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHN1cGVyLnNsb3R0ZWRPcHRpb25zQ2hhbmdlZChwcmV2LCBuZXh0KTtcbiAgICAgICAgdGhpcy5vcHRpb25zLmZvckVhY2gobyA9PiB7XG4gICAgICAgICAgICBjb25zdCBub3RpZmllciA9IE9ic2VydmFibGUuZ2V0Tm90aWZpZXIobyk7XG4gICAgICAgICAgICBub3RpZmllci5zdWJzY3JpYmUodGhpcywgXCJ2YWx1ZVwiKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuc2V0UHJveHlPcHRpb25zKCk7XG4gICAgICAgIHRoaXMudXBkYXRlVmFsdWUoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUHJldmVudHMgZm9jdXMgd2hlbiBzaXplIGlzIHNldCBhbmQgYSBzY3JvbGxiYXIgaXMgY2xpY2tlZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBlIC0gdGhlIG1vdXNlIGV2ZW50IG9iamVjdFxuICAgICAqXG4gICAgICogQG92ZXJyaWRlXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgbW91c2Vkb3duSGFuZGxlcihlKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgaWYgKGUub2Zmc2V0WCA+PSAwICYmIGUub2Zmc2V0WCA8PSAoKF9hID0gdGhpcy5saXN0Ym94KSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2Euc2Nyb2xsV2lkdGgpKSB7XG4gICAgICAgICAgICByZXR1cm4gc3VwZXIubW91c2Vkb3duSGFuZGxlcihlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5jb2xsYXBzaWJsZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0cyB0aGUgbXVsdGlwbGUgcHJvcGVydHkgb24gdGhlIHByb3h5IGVsZW1lbnQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcHJldiAtIHRoZSBwcmV2aW91cyBtdWx0aXBsZSB2YWx1ZVxuICAgICAqIEBwYXJhbSBuZXh0IC0gdGhlIGN1cnJlbnQgbXVsdGlwbGUgdmFsdWVcbiAgICAgKi9cbiAgICBtdWx0aXBsZUNoYW5nZWQocHJldiwgbmV4dCkge1xuICAgICAgICBzdXBlci5tdWx0aXBsZUNoYW5nZWQocHJldiwgbmV4dCk7XG4gICAgICAgIGlmICh0aGlzLnByb3h5KSB7XG4gICAgICAgICAgICB0aGlzLnByb3h5Lm11bHRpcGxlID0gbmV4dDtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBVcGRhdGVzIHRoZSBzZWxlY3RlZG5lc3Mgb2YgZWFjaCBvcHRpb24gd2hlbiB0aGUgbGlzdCBvZiBzZWxlY3RlZCBvcHRpb25zIGNoYW5nZXMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcHJldiAtIHRoZSBwcmV2aW91cyBsaXN0IG9mIHNlbGVjdGVkIG9wdGlvbnNcbiAgICAgKiBAcGFyYW0gbmV4dCAtIHRoZSBjdXJyZW50IGxpc3Qgb2Ygc2VsZWN0ZWQgb3B0aW9uc1xuICAgICAqXG4gICAgICogQG92ZXJyaWRlXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgc2VsZWN0ZWRPcHRpb25zQ2hhbmdlZChwcmV2LCBuZXh0KSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgc3VwZXIuc2VsZWN0ZWRPcHRpb25zQ2hhbmdlZChwcmV2LCBuZXh0KTtcbiAgICAgICAgKF9hID0gdGhpcy5vcHRpb25zKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuZm9yRWFjaCgobywgaSkgPT4ge1xuICAgICAgICAgICAgdmFyIF9hO1xuICAgICAgICAgICAgY29uc3QgcHJveHlPcHRpb24gPSAoX2EgPSB0aGlzLnByb3h5KSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2Eub3B0aW9ucy5pdGVtKGkpO1xuICAgICAgICAgICAgaWYgKHByb3h5T3B0aW9uKSB7XG4gICAgICAgICAgICAgICAgcHJveHlPcHRpb24uc2VsZWN0ZWQgPSBvLnNlbGVjdGVkO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0cyB0aGUgc2VsZWN0ZWQgaW5kZXggdG8gbWF0Y2ggdGhlIGZpcnN0IG9wdGlvbiB3aXRoIHRoZSBzZWxlY3RlZCBhdHRyaWJ1dGUsIG9yXG4gICAgICogdGhlIGZpcnN0IHNlbGVjdGFibGUgb3B0aW9uLlxuICAgICAqXG4gICAgICogQG92ZXJyaWRlXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgc2V0RGVmYXVsdFNlbGVjdGVkT3B0aW9uKCkge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIGNvbnN0IG9wdGlvbnMgPSAoX2EgPSB0aGlzLm9wdGlvbnMpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IEFycmF5LmZyb20odGhpcy5jaGlsZHJlbikuZmlsdGVyKExpc3Rib3guc2xvdHRlZE9wdGlvbkZpbHRlcik7XG4gICAgICAgIGNvbnN0IHNlbGVjdGVkSW5kZXggPSBvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMuZmluZEluZGV4KGVsID0+IGVsLmhhc0F0dHJpYnV0ZShcInNlbGVjdGVkXCIpIHx8IGVsLnNlbGVjdGVkIHx8IGVsLnZhbHVlID09PSB0aGlzLnZhbHVlKTtcbiAgICAgICAgaWYgKHNlbGVjdGVkSW5kZXggIT09IC0xKSB7XG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkSW5kZXggPSBzZWxlY3RlZEluZGV4O1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc2VsZWN0ZWRJbmRleCA9IDA7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlc2V0cyBhbmQgZmlsbHMgdGhlIHByb3h5IHRvIG1hdGNoIHRoZSBjb21wb25lbnQncyBvcHRpb25zLlxuICAgICAqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgc2V0UHJveHlPcHRpb25zKCkge1xuICAgICAgICBpZiAodGhpcy5wcm94eSBpbnN0YW5jZW9mIEhUTUxTZWxlY3RFbGVtZW50ICYmIHRoaXMub3B0aW9ucykge1xuICAgICAgICAgICAgdGhpcy5wcm94eS5vcHRpb25zLmxlbmd0aCA9IDA7XG4gICAgICAgICAgICB0aGlzLm9wdGlvbnMuZm9yRWFjaChvcHRpb24gPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHByb3h5T3B0aW9uID0gb3B0aW9uLnByb3h5IHx8XG4gICAgICAgICAgICAgICAgICAgIChvcHRpb24gaW5zdGFuY2VvZiBIVE1MT3B0aW9uRWxlbWVudCA/IG9wdGlvbi5jbG9uZU5vZGUoKSA6IG51bGwpO1xuICAgICAgICAgICAgICAgIGlmIChwcm94eU9wdGlvbikge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnByb3h5Lm9wdGlvbnMuYWRkKHByb3h5T3B0aW9uKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBIYW5kbGUga2V5Ym9hcmQgaW50ZXJhY3Rpb24gZm9yIHRoZSBzZWxlY3QuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZSAtIHRoZSBrZXlib2FyZCBldmVudFxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIGtleWRvd25IYW5kbGVyKGUpIHtcbiAgICAgICAgc3VwZXIua2V5ZG93bkhhbmRsZXIoZSk7XG4gICAgICAgIGNvbnN0IGtleSA9IGUua2V5IHx8IGUua2V5LmNoYXJDb2RlQXQoMCk7XG4gICAgICAgIHN3aXRjaCAoa2V5KSB7XG4gICAgICAgICAgICBjYXNlIGtleVNwYWNlOiB7XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmNvbGxhcHNpYmxlICYmIHRoaXMudHlwZUFoZWFkRXhwaXJlZCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm9wZW4gPSAhdGhpcy5vcGVuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhc2Uga2V5SG9tZTpcbiAgICAgICAgICAgIGNhc2Uga2V5RW5kOiB7XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FzZSBrZXlFbnRlcjoge1xuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICB0aGlzLm9wZW4gPSAhdGhpcy5vcGVuO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FzZSBrZXlFc2NhcGU6IHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5jb2xsYXBzaWJsZSAmJiB0aGlzLm9wZW4pIHtcbiAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm9wZW4gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXNlIGtleVRhYjoge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmNvbGxhcHNpYmxlICYmIHRoaXMub3Blbikge1xuICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMub3BlbiA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMub3BlbiAmJiB0aGlzLmluZGV4V2hlbk9wZW5lZCAhPT0gdGhpcy5zZWxlY3RlZEluZGV4KSB7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVZhbHVlKHRydWUpO1xuICAgICAgICAgICAgdGhpcy5pbmRleFdoZW5PcGVuZWQgPSB0aGlzLnNlbGVjdGVkSW5kZXg7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICEoa2V5ID09PSBrZXlBcnJvd0Rvd24gfHwga2V5ID09PSBrZXlBcnJvd1VwKTtcbiAgICB9XG4gICAgY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgICAgIHN1cGVyLmNvbm5lY3RlZENhbGxiYWNrKCk7XG4gICAgICAgIHRoaXMuZm9yY2VkUG9zaXRpb24gPSAhIXRoaXMucG9zaXRpb25BdHRyaWJ1dGU7XG4gICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcihcImNvbnRlbnRjaGFuZ2VcIiwgdGhpcy51cGRhdGVEaXNwbGF5VmFsdWUpO1xuICAgIH1cbiAgICBkaXNjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICAgICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKFwiY29udGVudGNoYW5nZVwiLCB0aGlzLnVwZGF0ZURpc3BsYXlWYWx1ZSk7XG4gICAgICAgIHN1cGVyLmRpc2Nvbm5lY3RlZENhbGxiYWNrKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFVwZGF0ZXMgdGhlIHByb3h5J3Mgc2l6ZSBwcm9wZXJ0eSB3aGVuIHRoZSBzaXplIGF0dHJpYnV0ZSBjaGFuZ2VzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHByZXYgLSB0aGUgcHJldmlvdXMgc2l6ZVxuICAgICAqIEBwYXJhbSBuZXh0IC0gdGhlIGN1cnJlbnQgc2l6ZVxuICAgICAqXG4gICAgICogQG92ZXJyaWRlXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgc2l6ZUNoYW5nZWQocHJldiwgbmV4dCkge1xuICAgICAgICBzdXBlci5zaXplQ2hhbmdlZChwcmV2LCBuZXh0KTtcbiAgICAgICAgaWYgKHRoaXMucHJveHkpIHtcbiAgICAgICAgICAgIHRoaXMucHJveHkuc2l6ZSA9IG5leHQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICB1cGRhdGVEaXNwbGF5VmFsdWUoKSB7XG4gICAgICAgIGlmICh0aGlzLmNvbGxhcHNpYmxlKSB7XG4gICAgICAgICAgICBPYnNlcnZhYmxlLm5vdGlmeSh0aGlzLCBcImRpc3BsYXlWYWx1ZVwiKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbl9fZGVjb3JhdGUoW1xuICAgIGF0dHIoeyBhdHRyaWJ1dGU6IFwib3BlblwiLCBtb2RlOiBcImJvb2xlYW5cIiB9KVxuXSwgU2VsZWN0LnByb3RvdHlwZSwgXCJvcGVuXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICB2b2xhdGlsZVxuXSwgU2VsZWN0LnByb3RvdHlwZSwgXCJjb2xsYXBzaWJsZVwiLCBudWxsKTtcbl9fZGVjb3JhdGUoW1xuICAgIG9ic2VydmFibGVcbl0sIFNlbGVjdC5wcm90b3R5cGUsIFwiY29udHJvbFwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgYXR0cih7IGF0dHJpYnV0ZTogXCJwb3NpdGlvblwiIH0pXG5dLCBTZWxlY3QucHJvdG90eXBlLCBcInBvc2l0aW9uQXR0cmlidXRlXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBvYnNlcnZhYmxlXG5dLCBTZWxlY3QucHJvdG90eXBlLCBcInBvc2l0aW9uXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBvYnNlcnZhYmxlXG5dLCBTZWxlY3QucHJvdG90eXBlLCBcIm1heEhlaWdodFwiLCB2b2lkIDApO1xuLyoqXG4gKiBJbmNsdWRlcyBBUklBIHN0YXRlcyBhbmQgcHJvcGVydGllcyByZWxhdGluZyB0byB0aGUgQVJJQSBzZWxlY3Qgcm9sZS5cbiAqXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjbGFzcyBEZWxlZ2F0ZXNBUklBU2VsZWN0IHtcbn1cbl9fZGVjb3JhdGUoW1xuICAgIG9ic2VydmFibGVcbl0sIERlbGVnYXRlc0FSSUFTZWxlY3QucHJvdG90eXBlLCBcImFyaWFDb250cm9sc1wiLCB2b2lkIDApO1xuYXBwbHlNaXhpbnMoRGVsZWdhdGVzQVJJQVNlbGVjdCwgRGVsZWdhdGVzQVJJQUxpc3Rib3gpO1xuYXBwbHlNaXhpbnMoU2VsZWN0LCBTdGFydEVuZCwgRGVsZWdhdGVzQVJJQVNlbGVjdCk7XG4iLCIvKipcbiAqIFBvc2l0aW9uaW5nIGRpcmVjdGlvbnMgZm9yIHRoZSBsaXN0Ym94IHdoZW4gYSBzZWxlY3QgaXMgb3Blbi5cbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGNvbnN0IFNlbGVjdFBvc2l0aW9uID0ge1xuICAgIGFib3ZlOiBcImFib3ZlXCIsXG4gICAgYmVsb3c6IFwiYmVsb3dcIixcbn07XG4iLCJpbXBvcnQgeyBodG1sLCByZWYsIHNsb3R0ZWQsIHdoZW4gfSBmcm9tIFwiQG1pY3Jvc29mdC9mYXN0LWVsZW1lbnRcIjtcbmltcG9ydCB7IExpc3Rib3ggfSBmcm9tIFwiLi4vbGlzdGJveC9saXN0Ym94LmpzXCI7XG5pbXBvcnQgeyBlbmRTbG90VGVtcGxhdGUsIHN0YXJ0U2xvdFRlbXBsYXRlIH0gZnJvbSBcIi4uL3BhdHRlcm5zL3N0YXJ0LWVuZC5qc1wiO1xuLyoqXG4gKiBUaGUgdGVtcGxhdGUgZm9yIHRoZSB7QGxpbmsgQG1pY3Jvc29mdC9mYXN0LWZvdW5kYXRpb24jKFNlbGVjdDpjbGFzcyl9IGNvbXBvbmVudC5cbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGNvbnN0IHNlbGVjdFRlbXBsYXRlID0gKGNvbnRleHQsIGRlZmluaXRpb24pID0+IGh0bWwgYFxuICAgIDx0ZW1wbGF0ZVxuICAgICAgICBjbGFzcz1cIiR7eCA9PiBbXG4gICAgeC5jb2xsYXBzaWJsZSAmJiBcImNvbGxhcHNpYmxlXCIsXG4gICAgeC5jb2xsYXBzaWJsZSAmJiB4Lm9wZW4gJiYgXCJvcGVuXCIsXG4gICAgeC5kaXNhYmxlZCAmJiBcImRpc2FibGVkXCIsXG4gICAgeC5jb2xsYXBzaWJsZSAmJiB4LnBvc2l0aW9uLFxuXVxuICAgIC5maWx0ZXIoQm9vbGVhbilcbiAgICAuam9pbihcIiBcIil9XCJcbiAgICAgICAgYXJpYS1hY3RpdmVkZXNjZW5kYW50PVwiJHt4ID0+IHguYXJpYUFjdGl2ZURlc2NlbmRhbnR9XCJcbiAgICAgICAgYXJpYS1jb250cm9scz1cIiR7eCA9PiB4LmFyaWFDb250cm9sc31cIlxuICAgICAgICBhcmlhLWRpc2FibGVkPVwiJHt4ID0+IHguYXJpYURpc2FibGVkfVwiXG4gICAgICAgIGFyaWEtZXhwYW5kZWQ9XCIke3ggPT4geC5hcmlhRXhwYW5kZWR9XCJcbiAgICAgICAgYXJpYS1oYXNwb3B1cD1cIiR7eCA9PiAoeC5jb2xsYXBzaWJsZSA/IFwibGlzdGJveFwiIDogbnVsbCl9XCJcbiAgICAgICAgYXJpYS1tdWx0aXNlbGVjdGFibGU9XCIke3ggPT4geC5hcmlhTXVsdGlTZWxlY3RhYmxlfVwiXG4gICAgICAgID9vcGVuPVwiJHt4ID0+IHgub3Blbn1cIlxuICAgICAgICByb2xlPVwiY29tYm9ib3hcIlxuICAgICAgICB0YWJpbmRleD1cIiR7eCA9PiAoIXguZGlzYWJsZWQgPyBcIjBcIiA6IG51bGwpfVwiXG4gICAgICAgIEBjbGljaz1cIiR7KHgsIGMpID0+IHguY2xpY2tIYW5kbGVyKGMuZXZlbnQpfVwiXG4gICAgICAgIEBmb2N1c2luPVwiJHsoeCwgYykgPT4geC5mb2N1c2luSGFuZGxlcihjLmV2ZW50KX1cIlxuICAgICAgICBAZm9jdXNvdXQ9XCIkeyh4LCBjKSA9PiB4LmZvY3Vzb3V0SGFuZGxlcihjLmV2ZW50KX1cIlxuICAgICAgICBAa2V5ZG93bj1cIiR7KHgsIGMpID0+IHgua2V5ZG93bkhhbmRsZXIoYy5ldmVudCl9XCJcbiAgICAgICAgQG1vdXNlZG93bj1cIiR7KHgsIGMpID0+IHgubW91c2Vkb3duSGFuZGxlcihjLmV2ZW50KX1cIlxuICAgID5cbiAgICAgICAgJHt3aGVuKHggPT4geC5jb2xsYXBzaWJsZSwgaHRtbCBgXG4gICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICBjbGFzcz1cImNvbnRyb2xcIlxuICAgICAgICAgICAgICAgICAgICBwYXJ0PVwiY29udHJvbFwiXG4gICAgICAgICAgICAgICAgICAgID9kaXNhYmxlZD1cIiR7eCA9PiB4LmRpc2FibGVkfVwiXG4gICAgICAgICAgICAgICAgICAgICR7cmVmKFwiY29udHJvbFwiKX1cbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICR7c3RhcnRTbG90VGVtcGxhdGUoY29udGV4dCwgZGVmaW5pdGlvbil9XG4gICAgICAgICAgICAgICAgICAgIDxzbG90IG5hbWU9XCJidXR0b24tY29udGFpbmVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwic2VsZWN0ZWQtdmFsdWVcIiBwYXJ0PVwic2VsZWN0ZWQtdmFsdWVcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c2xvdCBuYW1lPVwic2VsZWN0ZWQtdmFsdWVcIj4ke3ggPT4geC5kaXNwbGF5VmFsdWV9PC9zbG90PlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGFyaWEtaGlkZGVuPVwidHJ1ZVwiIGNsYXNzPVwiaW5kaWNhdG9yXCIgcGFydD1cImluZGljYXRvclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzbG90IG5hbWU9XCJpbmRpY2F0b3JcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHtkZWZpbml0aW9uLmluZGljYXRvciB8fCBcIlwifVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc2xvdD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L3Nsb3Q+XG4gICAgICAgICAgICAgICAgICAgICR7ZW5kU2xvdFRlbXBsYXRlKGNvbnRleHQsIGRlZmluaXRpb24pfVxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgYCl9XG4gICAgICAgIDxkaXZcbiAgICAgICAgICAgIGNsYXNzPVwibGlzdGJveFwiXG4gICAgICAgICAgICBpZD1cIiR7eCA9PiB4Lmxpc3Rib3hJZH1cIlxuICAgICAgICAgICAgcGFydD1cImxpc3Rib3hcIlxuICAgICAgICAgICAgcm9sZT1cImxpc3Rib3hcIlxuICAgICAgICAgICAgP2Rpc2FibGVkPVwiJHt4ID0+IHguZGlzYWJsZWR9XCJcbiAgICAgICAgICAgID9oaWRkZW49XCIke3ggPT4gKHguY29sbGFwc2libGUgPyAheC5vcGVuIDogZmFsc2UpfVwiXG4gICAgICAgICAgICAke3JlZihcImxpc3Rib3hcIil9XG4gICAgICAgID5cbiAgICAgICAgICAgIDxzbG90XG4gICAgICAgICAgICAgICAgJHtzbG90dGVkKHtcbiAgICBmaWx0ZXI6IExpc3Rib3guc2xvdHRlZE9wdGlvbkZpbHRlcixcbiAgICBmbGF0dGVuOiB0cnVlLFxuICAgIHByb3BlcnR5OiBcInNsb3R0ZWRPcHRpb25zXCIsXG59KX1cbiAgICAgICAgICAgID48L3Nsb3Q+XG4gICAgICAgIDwvZGl2PlxuICAgIDwvdGVtcGxhdGU+XG5gO1xuIiwiZXhwb3J0ICogZnJvbSBcIi4vc2tlbGV0b24udGVtcGxhdGUuanNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL3NrZWxldG9uLmpzXCI7XG4iLCJpbXBvcnQgeyBfX2RlY29yYXRlIH0gZnJvbSBcInRzbGliXCI7XG5pbXBvcnQgeyBhdHRyIH0gZnJvbSBcIkBtaWNyb3NvZnQvZmFzdC1lbGVtZW50XCI7XG5pbXBvcnQgeyBGb3VuZGF0aW9uRWxlbWVudCB9IGZyb20gXCIuLi9mb3VuZGF0aW9uLWVsZW1lbnQvZm91bmRhdGlvbi1lbGVtZW50LmpzXCI7XG4vKipcbiAqIEEgU2tlbGV0b24gQ3VzdG9tIEhUTUwgRWxlbWVudC5cbiAqXG4gKiBAc2xvdCAtIFRoZSBkZWZhdWx0IHNsb3RcbiAqXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjbGFzcyBTa2VsZXRvbiBleHRlbmRzIEZvdW5kYXRpb25FbGVtZW50IHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEluZGljYXRlcyB3aGF0IHRoZSBzaGFwZSBvZiB0aGUgU2tlbGV0b24gc2hvdWxkIGJlLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcHVibGljXG4gICAgICAgICAqIEByZW1hcmtzXG4gICAgICAgICAqIEhUTUwgQXR0cmlidXRlOiBzaGFwZVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5zaGFwZSA9IFwicmVjdFwiO1xuICAgIH1cbn1cbl9fZGVjb3JhdGUoW1xuICAgIGF0dHJcbl0sIFNrZWxldG9uLnByb3RvdHlwZSwgXCJmaWxsXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBhdHRyXG5dLCBTa2VsZXRvbi5wcm90b3R5cGUsIFwic2hhcGVcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIGF0dHJcbl0sIFNrZWxldG9uLnByb3RvdHlwZSwgXCJwYXR0ZXJuXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBhdHRyKHsgbW9kZTogXCJib29sZWFuXCIgfSlcbl0sIFNrZWxldG9uLnByb3RvdHlwZSwgXCJzaGltbWVyXCIsIHZvaWQgMCk7XG4iLCJpbXBvcnQgeyBodG1sLCB3aGVuIH0gZnJvbSBcIkBtaWNyb3NvZnQvZmFzdC1lbGVtZW50XCI7XG4vKipcbiAqIFRoZSB0ZW1wbGF0ZSBmb3IgdGhlIGZhc3Qtc2tlbGV0b24gY29tcG9uZW50XG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjb25zdCBza2VsZXRvblRlbXBsYXRlID0gKGNvbnRleHQsIGRlZmluaXRpb24pID0+IGh0bWwgYFxuICAgIDx0ZW1wbGF0ZVxuICAgICAgICBjbGFzcz1cIiR7eCA9PiAoeC5zaGFwZSA9PT0gXCJjaXJjbGVcIiA/IFwiY2lyY2xlXCIgOiBcInJlY3RcIil9XCJcbiAgICAgICAgcGF0dGVybj1cIiR7eCA9PiB4LnBhdHRlcm59XCJcbiAgICAgICAgP3NoaW1tZXI9XCIke3ggPT4geC5zaGltbWVyfVwiXG4gICAgPlxuICAgICAgICAke3doZW4oeCA9PiB4LnNoaW1tZXIgPT09IHRydWUsIGh0bWwgYFxuICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwic2hpbW1lclwiPjwvc3Bhbj5cbiAgICAgICAgICAgIGApfVxuICAgICAgICA8b2JqZWN0IHR5cGU9XCJpbWFnZS9zdmcreG1sXCIgZGF0YT1cIiR7eCA9PiB4LnBhdHRlcm59XCIgcm9sZT1cInByZXNlbnRhdGlvblwiPlxuICAgICAgICAgICAgPGltZyBjbGFzcz1cInBhdHRlcm5cIiBzcmM9XCIke3ggPT4geC5wYXR0ZXJufVwiIC8+XG4gICAgICAgIDwvb2JqZWN0PlxuICAgICAgICA8c2xvdD48L3Nsb3Q+XG4gICAgPC90ZW1wbGF0ZT5cbmA7XG4iLCJleHBvcnQgKiBmcm9tIFwiLi9zbGlkZXItbGFiZWwudGVtcGxhdGUuanNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL3NsaWRlci1sYWJlbC5qc1wiO1xuIiwiaW1wb3J0IHsgX19kZWNvcmF0ZSB9IGZyb20gXCJ0c2xpYlwiO1xuaW1wb3J0IHsgYXR0ciwgT2JzZXJ2YWJsZSwgb2JzZXJ2YWJsZSB9IGZyb20gXCJAbWljcm9zb2Z0L2Zhc3QtZWxlbWVudFwiO1xuaW1wb3J0IHsgRGlyZWN0aW9uLCBPcmllbnRhdGlvbiB9IGZyb20gXCJAbWljcm9zb2Z0L2Zhc3Qtd2ViLXV0aWxpdGllc1wiO1xuaW1wb3J0IHsgY29udmVydFBpeGVsVG9QZXJjZW50IH0gZnJvbSBcIi4uL3NsaWRlci9zbGlkZXItdXRpbGl0aWVzLmpzXCI7XG5pbXBvcnQgeyBGb3VuZGF0aW9uRWxlbWVudCB9IGZyb20gXCIuLi9mb3VuZGF0aW9uLWVsZW1lbnQvZm91bmRhdGlvbi1lbGVtZW50LmpzXCI7XG5jb25zdCBkZWZhdWx0Q29uZmlnID0ge1xuICAgIG1pbjogMCxcbiAgICBtYXg6IDAsXG4gICAgZGlyZWN0aW9uOiBEaXJlY3Rpb24ubHRyLFxuICAgIG9yaWVudGF0aW9uOiBPcmllbnRhdGlvbi5ob3Jpem9udGFsLFxuICAgIGRpc2FibGVkOiBmYWxzZSxcbn07XG4vKipcbiAqIEEgbGFiZWwgZWxlbWVudCBpbnRlbmRlZCB0byBiZSB1c2VkIHdpdGggdGhlIHtAbGluayBAbWljcm9zb2Z0L2Zhc3QtZm91bmRhdGlvbiMoU2xpZGVyOmNsYXNzKX0gY29tcG9uZW50LlxuICpcbiAqIEBzbG90IC0gVGhlIGRlZmF1bHQgc2xvdCBmb3IgdGhlIGxhYmVsIGNvbnRlbnRcbiAqIEBjc3NwYXJ0IHJvb3QgLSBUaGUgZWxlbWVudCB3cmFwcGluZyB0aGUgbGFiZWwgbWFyayBhbmQgdGV4dFxuICpcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGNsYXNzIFNsaWRlckxhYmVsIGV4dGVuZHMgRm91bmRhdGlvbkVsZW1lbnQge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlciguLi5hcmd1bWVudHMpO1xuICAgICAgICAvKipcbiAgICAgICAgICogSGlkZXMgdGhlIHRpY2sgbWFyay5cbiAgICAgICAgICpcbiAgICAgICAgICogQHB1YmxpY1xuICAgICAgICAgKiBAcmVtYXJrc1xuICAgICAgICAgKiBIVE1MIEF0dHJpYnV0ZTogaGlkZS1tYXJrXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmhpZGVNYXJrID0gZmFsc2U7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAaW50ZXJuYWxcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuc2xpZGVyRGlyZWN0aW9uID0gRGlyZWN0aW9uLmx0cjtcbiAgICAgICAgdGhpcy5nZXRTbGlkZXJDb25maWd1cmF0aW9uID0gKCkgPT4ge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmlzU2xpZGVyQ29uZmlnKHRoaXMucGFyZW50Tm9kZSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNsaWRlckRpcmVjdGlvbiA9IGRlZmF1bHRDb25maWcuZGlyZWN0aW9uIHx8IERpcmVjdGlvbi5sdHI7XG4gICAgICAgICAgICAgICAgdGhpcy5zbGlkZXJPcmllbnRhdGlvbiA9IGRlZmF1bHRDb25maWcub3JpZW50YXRpb24gfHwgT3JpZW50YXRpb24uaG9yaXpvbnRhbDtcbiAgICAgICAgICAgICAgICB0aGlzLnNsaWRlck1heFBvc2l0aW9uID0gZGVmYXVsdENvbmZpZy5tYXg7XG4gICAgICAgICAgICAgICAgdGhpcy5zbGlkZXJNaW5Qb3NpdGlvbiA9IGRlZmF1bHRDb25maWcubWluO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcGFyZW50U2xpZGVyID0gdGhpc1xuICAgICAgICAgICAgICAgICAgICAucGFyZW50Tm9kZTtcbiAgICAgICAgICAgICAgICBjb25zdCB7IG1pbiwgbWF4LCBkaXJlY3Rpb24sIG9yaWVudGF0aW9uLCBkaXNhYmxlZCB9ID0gcGFyZW50U2xpZGVyO1xuICAgICAgICAgICAgICAgIGlmIChkaXNhYmxlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzYWJsZWQgPSBkaXNhYmxlZDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5zbGlkZXJEaXJlY3Rpb24gPSBkaXJlY3Rpb24gfHwgRGlyZWN0aW9uLmx0cjtcbiAgICAgICAgICAgICAgICB0aGlzLnNsaWRlck9yaWVudGF0aW9uID0gb3JpZW50YXRpb24gfHwgT3JpZW50YXRpb24uaG9yaXpvbnRhbDtcbiAgICAgICAgICAgICAgICB0aGlzLnNsaWRlck1heFBvc2l0aW9uID0gbWF4O1xuICAgICAgICAgICAgICAgIHRoaXMuc2xpZGVyTWluUG9zaXRpb24gPSBtaW47XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMucG9zaXRpb25Bc1N0eWxlID0gKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgZGlyZWN0aW9uID0gdGhpcy5zbGlkZXJEaXJlY3Rpb25cbiAgICAgICAgICAgICAgICA/IHRoaXMuc2xpZGVyRGlyZWN0aW9uXG4gICAgICAgICAgICAgICAgOiBEaXJlY3Rpb24ubHRyO1xuICAgICAgICAgICAgY29uc3QgcGN0ID0gY29udmVydFBpeGVsVG9QZXJjZW50KE51bWJlcih0aGlzLnBvc2l0aW9uKSwgTnVtYmVyKHRoaXMuc2xpZGVyTWluUG9zaXRpb24pLCBOdW1iZXIodGhpcy5zbGlkZXJNYXhQb3NpdGlvbikpO1xuICAgICAgICAgICAgbGV0IHJpZ2h0TnVtID0gTWF0aC5yb3VuZCgoMSAtIHBjdCkgKiAxMDApO1xuICAgICAgICAgICAgbGV0IGxlZnROdW0gPSBNYXRoLnJvdW5kKHBjdCAqIDEwMCk7XG4gICAgICAgICAgICBpZiAoTnVtYmVyLmlzTmFOKGxlZnROdW0pICYmIE51bWJlci5pc05hTihyaWdodE51bSkpIHtcbiAgICAgICAgICAgICAgICByaWdodE51bSA9IDUwO1xuICAgICAgICAgICAgICAgIGxlZnROdW0gPSA1MDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLnNsaWRlck9yaWVudGF0aW9uID09PSBPcmllbnRhdGlvbi5ob3Jpem9udGFsKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGRpcmVjdGlvbiA9PT0gRGlyZWN0aW9uLnJ0bFxuICAgICAgICAgICAgICAgICAgICA/IGByaWdodDogJHtsZWZ0TnVtfSU7IGxlZnQ6ICR7cmlnaHROdW19JTtgXG4gICAgICAgICAgICAgICAgICAgIDogYGxlZnQ6ICR7bGVmdE51bX0lOyByaWdodDogJHtyaWdodE51bX0lO2A7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gYHRvcDogJHtsZWZ0TnVtfSU7IGJvdHRvbTogJHtyaWdodE51bX0lO2A7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfVxuICAgIHBvc2l0aW9uQ2hhbmdlZCgpIHtcbiAgICAgICAgdGhpcy5wb3NpdGlvblN0eWxlID0gdGhpcy5wb3NpdGlvbkFzU3R5bGUoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgc2xpZGVyT3JpZW50YXRpb25DaGFuZ2VkKCkge1xuICAgICAgICB2b2lkIDA7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIGNvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgICAgICBzdXBlci5jb25uZWN0ZWRDYWxsYmFjaygpO1xuICAgICAgICB0aGlzLmdldFNsaWRlckNvbmZpZ3VyYXRpb24oKTtcbiAgICAgICAgdGhpcy5wb3NpdGlvblN0eWxlID0gdGhpcy5wb3NpdGlvbkFzU3R5bGUoKTtcbiAgICAgICAgdGhpcy5ub3RpZmllciA9IE9ic2VydmFibGUuZ2V0Tm90aWZpZXIodGhpcy5wYXJlbnROb2RlKTtcbiAgICAgICAgdGhpcy5ub3RpZmllci5zdWJzY3JpYmUodGhpcywgXCJvcmllbnRhdGlvblwiKTtcbiAgICAgICAgdGhpcy5ub3RpZmllci5zdWJzY3JpYmUodGhpcywgXCJkaXJlY3Rpb25cIik7XG4gICAgICAgIHRoaXMubm90aWZpZXIuc3Vic2NyaWJlKHRoaXMsIFwibWF4XCIpO1xuICAgICAgICB0aGlzLm5vdGlmaWVyLnN1YnNjcmliZSh0aGlzLCBcIm1pblwiKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgZGlzY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgICAgIHN1cGVyLmRpc2Nvbm5lY3RlZENhbGxiYWNrKCk7XG4gICAgICAgIHRoaXMubm90aWZpZXIudW5zdWJzY3JpYmUodGhpcywgXCJvcmllbnRhdGlvblwiKTtcbiAgICAgICAgdGhpcy5ub3RpZmllci51bnN1YnNjcmliZSh0aGlzLCBcImRpcmVjdGlvblwiKTtcbiAgICAgICAgdGhpcy5ub3RpZmllci51bnN1YnNjcmliZSh0aGlzLCBcIm1heFwiKTtcbiAgICAgICAgdGhpcy5ub3RpZmllci51bnN1YnNjcmliZSh0aGlzLCBcIm1pblwiKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgaGFuZGxlQ2hhbmdlKHNvdXJjZSwgcHJvcGVydHlOYW1lKSB7XG4gICAgICAgIHN3aXRjaCAocHJvcGVydHlOYW1lKSB7XG4gICAgICAgICAgICBjYXNlIFwiZGlyZWN0aW9uXCI6XG4gICAgICAgICAgICAgICAgdGhpcy5zbGlkZXJEaXJlY3Rpb24gPSBzb3VyY2UuZGlyZWN0aW9uO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcIm9yaWVudGF0aW9uXCI6XG4gICAgICAgICAgICAgICAgdGhpcy5zbGlkZXJPcmllbnRhdGlvbiA9IHNvdXJjZS5vcmllbnRhdGlvbjtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJtYXhcIjpcbiAgICAgICAgICAgICAgICB0aGlzLnNsaWRlck1heFBvc2l0aW9uID0gc291cmNlLm1heDtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJtaW5cIjpcbiAgICAgICAgICAgICAgICB0aGlzLnNsaWRlck1pblBvc2l0aW9uID0gc291cmNlLm1pbjtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5wb3NpdGlvblN0eWxlID0gdGhpcy5wb3NpdGlvbkFzU3R5bGUoKTtcbiAgICB9XG4gICAgaXNTbGlkZXJDb25maWcobm9kZSkge1xuICAgICAgICByZXR1cm4gbm9kZS5tYXggIT09IHVuZGVmaW5lZCAmJiBub2RlLm1pbiAhPT0gdW5kZWZpbmVkO1xuICAgIH1cbn1cbl9fZGVjb3JhdGUoW1xuICAgIG9ic2VydmFibGVcbl0sIFNsaWRlckxhYmVsLnByb3RvdHlwZSwgXCJwb3NpdGlvblN0eWxlXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBhdHRyXG5dLCBTbGlkZXJMYWJlbC5wcm90b3R5cGUsIFwicG9zaXRpb25cIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIGF0dHIoeyBhdHRyaWJ1dGU6IFwiaGlkZS1tYXJrXCIsIG1vZGU6IFwiYm9vbGVhblwiIH0pXG5dLCBTbGlkZXJMYWJlbC5wcm90b3R5cGUsIFwiaGlkZU1hcmtcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIGF0dHIoeyBhdHRyaWJ1dGU6IFwiZGlzYWJsZWRcIiwgbW9kZTogXCJib29sZWFuXCIgfSlcbl0sIFNsaWRlckxhYmVsLnByb3RvdHlwZSwgXCJkaXNhYmxlZFwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgb2JzZXJ2YWJsZVxuXSwgU2xpZGVyTGFiZWwucHJvdG90eXBlLCBcInNsaWRlck9yaWVudGF0aW9uXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBvYnNlcnZhYmxlXG5dLCBTbGlkZXJMYWJlbC5wcm90b3R5cGUsIFwic2xpZGVyTWluUG9zaXRpb25cIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIG9ic2VydmFibGVcbl0sIFNsaWRlckxhYmVsLnByb3RvdHlwZSwgXCJzbGlkZXJNYXhQb3NpdGlvblwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgb2JzZXJ2YWJsZVxuXSwgU2xpZGVyTGFiZWwucHJvdG90eXBlLCBcInNsaWRlckRpcmVjdGlvblwiLCB2b2lkIDApO1xuIiwiaW1wb3J0IHsgaHRtbCwgcmVmLCB3aGVuIH0gZnJvbSBcIkBtaWNyb3NvZnQvZmFzdC1lbGVtZW50XCI7XG5pbXBvcnQgeyBPcmllbnRhdGlvbiB9IGZyb20gXCJAbWljcm9zb2Z0L2Zhc3Qtd2ViLXV0aWxpdGllc1wiO1xuLyoqXG4gKiBUaGUgdGVtcGxhdGUgZm9yIHRoZSB7QGxpbmsgQG1pY3Jvc29mdC9mYXN0LWZvdW5kYXRpb24jKFNsaWRlckxhYmVsOmNsYXNzKX0gY29tcG9uZW50LlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgY29uc3Qgc2xpZGVyTGFiZWxUZW1wbGF0ZSA9IChjb250ZXh0LCBkZWZpbml0aW9uKSA9PiBodG1sIGBcbiAgICA8dGVtcGxhdGVcbiAgICAgICAgYXJpYS1kaXNhYmxlZD1cIiR7eCA9PiB4LmRpc2FibGVkfVwiXG4gICAgICAgIGNsYXNzPVwiJHt4ID0+IHguc2xpZGVyT3JpZW50YXRpb24gfHwgT3JpZW50YXRpb24uaG9yaXpvbnRhbH1cbiAgICAgICAgICAgICR7eCA9PiAoeC5kaXNhYmxlZCA/IFwiZGlzYWJsZWRcIiA6IFwiXCIpfVwiXG4gICAgPlxuICAgICAgICA8ZGl2ICR7cmVmKFwicm9vdFwiKX0gcGFydD1cInJvb3RcIiBjbGFzcz1cInJvb3RcIiBzdHlsZT1cIiR7eCA9PiB4LnBvc2l0aW9uU3R5bGV9XCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29udGFpbmVyXCI+XG4gICAgICAgICAgICAgICAgJHt3aGVuKHggPT4gIXguaGlkZU1hcmssIGh0bWwgYFxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm1hcmtcIj48L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgYCl9XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImxhYmVsXCI+XG4gICAgICAgICAgICAgICAgICAgIDxzbG90Pjwvc2xvdD5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICA8L3RlbXBsYXRlPlxuYDtcbiIsImV4cG9ydCAqIGZyb20gXCIuL3NsaWRlci50ZW1wbGF0ZS5qc1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vc2xpZGVyLmpzXCI7XG4iLCJpbXBvcnQgeyBEaXJlY3Rpb24sIGxpbWl0IH0gZnJvbSBcIkBtaWNyb3NvZnQvZmFzdC13ZWItdXRpbGl0aWVzXCI7XG4vKipcbiAqIENvbnZlcnRzIGEgcGl4ZWwgY29vcmRpbmF0ZSBvbiB0aGUgdHJhY2sgdG8gYSBwZXJjZW50IG9mIHRoZSB0cmFjaydzIHJhbmdlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjb252ZXJ0UGl4ZWxUb1BlcmNlbnQocGl4ZWxQb3MsIG1pblBvc2l0aW9uLCBtYXhQb3NpdGlvbiwgZGlyZWN0aW9uKSB7XG4gICAgbGV0IHBjdCA9IGxpbWl0KDAsIDEsIChwaXhlbFBvcyAtIG1pblBvc2l0aW9uKSAvIChtYXhQb3NpdGlvbiAtIG1pblBvc2l0aW9uKSk7XG4gICAgaWYgKGRpcmVjdGlvbiA9PT0gRGlyZWN0aW9uLnJ0bCkge1xuICAgICAgICBwY3QgPSAxIC0gcGN0O1xuICAgIH1cbiAgICByZXR1cm4gcGN0O1xufVxuIiwiaW1wb3J0IHsgRm9ybUFzc29jaWF0ZWQgfSBmcm9tIFwiLi4vZm9ybS1hc3NvY2lhdGVkL2Zvcm0tYXNzb2NpYXRlZC5qc1wiO1xuaW1wb3J0IHsgRm91bmRhdGlvbkVsZW1lbnQgfSBmcm9tIFwiLi4vZm91bmRhdGlvbi1lbGVtZW50L2ZvdW5kYXRpb24tZWxlbWVudC5qc1wiO1xuY2xhc3MgX1NsaWRlciBleHRlbmRzIEZvdW5kYXRpb25FbGVtZW50IHtcbn1cbi8qKlxuICogQSBmb3JtLWFzc29jaWF0ZWQgYmFzZSBjbGFzcyBmb3IgdGhlIHtAbGluayBAbWljcm9zb2Z0L2Zhc3QtZm91bmRhdGlvbiMoU2xpZGVyOmNsYXNzKX0gY29tcG9uZW50LlxuICpcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgY2xhc3MgRm9ybUFzc29jaWF0ZWRTbGlkZXIgZXh0ZW5kcyBGb3JtQXNzb2NpYXRlZChfU2xpZGVyKSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICAgIHRoaXMucHJveHkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgX19kZWNvcmF0ZSB9IGZyb20gXCJ0c2xpYlwiO1xuaW1wb3J0IHsgYXR0ciwgbnVsbGFibGVOdW1iZXJDb252ZXJ0ZXIsIG9ic2VydmFibGUsIH0gZnJvbSBcIkBtaWNyb3NvZnQvZmFzdC1lbGVtZW50XCI7XG5pbXBvcnQgeyBEaXJlY3Rpb24sIGtleUFycm93RG93biwga2V5QXJyb3dMZWZ0LCBrZXlBcnJvd1JpZ2h0LCBrZXlBcnJvd1VwLCBrZXlFbmQsIGtleUhvbWUsIE9yaWVudGF0aW9uLCB9IGZyb20gXCJAbWljcm9zb2Z0L2Zhc3Qtd2ViLXV0aWxpdGllc1wiO1xuaW1wb3J0IHsgZ2V0RGlyZWN0aW9uIH0gZnJvbSBcIi4uL3V0aWxpdGllcy9kaXJlY3Rpb24uanNcIjtcbmltcG9ydCB7IGNvbnZlcnRQaXhlbFRvUGVyY2VudCB9IGZyb20gXCIuL3NsaWRlci11dGlsaXRpZXMuanNcIjtcbmltcG9ydCB7IEZvcm1Bc3NvY2lhdGVkU2xpZGVyIH0gZnJvbSBcIi4vc2xpZGVyLmZvcm0tYXNzb2NpYXRlZC5qc1wiO1xuLyoqXG4gKiBUaGUgc2VsZWN0aW9uIG1vZGVzIG9mIGEge0BsaW5rIEBtaWNyb3NvZnQvZmFzdC1mb3VuZGF0aW9uIyhTbGlkZXI6Y2xhc3MpfS5cbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGNvbnN0IFNsaWRlck1vZGUgPSB7XG4gICAgc2luZ2xlVmFsdWU6IFwic2luZ2xlLXZhbHVlXCIsXG59O1xuLyoqXG4gKiBBIFNsaWRlciBDdXN0b20gSFRNTCBFbGVtZW50LlxuICogSW1wbGVtZW50cyB0aGUge0BsaW5rIGh0dHBzOi8vd3d3LnczLm9yZy9UUi93YWktYXJpYS0xLjEvI3NsaWRlciB8IEFSSUEgc2xpZGVyIH0uXG4gKlxuICogQHNsb3QgdHJhY2sgLSBUaGUgdHJhY2sgb2YgdGhlIHNsaWRlclxuICogQHNsb3QgdHJhY2stc3RhcnQgLSBUaGUgdHJhY2stc3RhcnQgdmlzdWFsIGluZGljYXRvclxuICogQHNsb3QgdGh1bWIgLSBUaGUgc2xpZGVyIHRodW1iXG4gKiBAc2xvdCAtIFRoZSBkZWZhdWx0IHNsb3QgZm9yIGxhYmVsc1xuICogQGNzc3BhcnQgcG9zaXRpb25pbmctcmVnaW9uIC0gVGhlIHJlZ2lvbiB1c2VkIHRvIHBvc2l0aW9uIHRoZSBlbGVtZW50cyBvZiB0aGUgc2xpZGVyXG4gKiBAY3NzcGFydCB0cmFjay1jb250YWluZXIgLSBUaGUgcmVnaW9uIGNvbnRhaW5pbmcgdGhlIHRyYWNrIGVsZW1lbnRzXG4gKiBAY3NzcGFydCB0cmFjay1zdGFydCAtIFRoZSBlbGVtZW50IHdyYXBwaW5nIHRoZSB0cmFjayBzdGFydCBzbG90XG4gKiBAY3NzcGFydCB0aHVtYi1jb250YWluZXIgLSBUaGUgdGh1bWIgY29udGFpbmVyIGVsZW1lbnQgd2hpY2ggaXMgcHJvZ3JhbWF0aWNhbGx5IHBvc2l0aW9uZWRcbiAqIEBmaXJlcyBjaGFuZ2UgLSBGaXJlcyBhIGN1c3RvbSAnY2hhbmdlJyBldmVudCB3aGVuIHRoZSBzbGlkZXIgdmFsdWUgY2hhbmdlc1xuICpcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGNsYXNzIFNsaWRlciBleHRlbmRzIEZvcm1Bc3NvY2lhdGVkU2xpZGVyIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBpbnRlcm5hbFxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5kaXJlY3Rpb24gPSBEaXJlY3Rpb24ubHRyO1xuICAgICAgICAvKipcbiAgICAgICAgICogQGludGVybmFsXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmlzRHJhZ2dpbmcgPSBmYWxzZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBpbnRlcm5hbFxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy50cmFja1dpZHRoID0gMDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBpbnRlcm5hbFxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy50cmFja01pbldpZHRoID0gMDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBpbnRlcm5hbFxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy50cmFja0hlaWdodCA9IDA7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAaW50ZXJuYWxcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMudHJhY2tMZWZ0ID0gMDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBpbnRlcm5hbFxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy50cmFja01pbkhlaWdodCA9IDA7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDdXN0b20gZnVuY3Rpb24gdGhhdCBnZW5lcmF0ZXMgYSBzdHJpbmcgZm9yIHRoZSBjb21wb25lbnQncyBcImFyaWEtdmFsdWV0ZXh0XCIgYXR0cmlidXRlIGJhc2VkIG9uIHRoZSBjdXJyZW50IHZhbHVlLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcHVibGljXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnZhbHVlVGV4dEZvcm1hdHRlciA9ICgpID0+IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgbWluaW11bSBhbGxvd2VkIHZhbHVlLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAZGVmYXVsdFZhbHVlIC0gMFxuICAgICAgICAgKiBAcHVibGljXG4gICAgICAgICAqIEByZW1hcmtzXG4gICAgICAgICAqIEhUTUwgQXR0cmlidXRlOiBtaW5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMubWluID0gMDsgLy8gTWFwIHRvIHByb3h5IGVsZW1lbnQuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgbWF4aW11bSBhbGxvd2VkIHZhbHVlLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAZGVmYXVsdFZhbHVlIC0gMTBcbiAgICAgICAgICogQHB1YmxpY1xuICAgICAgICAgKiBAcmVtYXJrc1xuICAgICAgICAgKiBIVE1MIEF0dHJpYnV0ZTogbWF4XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm1heCA9IDEwOyAvLyBNYXAgdG8gcHJveHkgZWxlbWVudC5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFZhbHVlIHRvIGluY3JlbWVudCBvciBkZWNyZW1lbnQgdmlhIGFycm93IGtleXMsIG1vdXNlIGNsaWNrIG9yIGRyYWcuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwdWJsaWNcbiAgICAgICAgICogQHJlbWFya3NcbiAgICAgICAgICogSFRNTCBBdHRyaWJ1dGU6IHN0ZXBcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuc3RlcCA9IDE7IC8vIE1hcCB0byBwcm94eSBlbGVtZW50LlxuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIG9yaWVudGF0aW9uIG9mIHRoZSBzbGlkZXIuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwdWJsaWNcbiAgICAgICAgICogQHJlbWFya3NcbiAgICAgICAgICogSFRNTCBBdHRyaWJ1dGU6IG9yaWVudGF0aW9uXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm9yaWVudGF0aW9uID0gT3JpZW50YXRpb24uaG9yaXpvbnRhbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBzZWxlY3Rpb24gbW9kZS5cbiAgICAgICAgICpcbiAgICAgICAgICogQHB1YmxpY1xuICAgICAgICAgKiBAcmVtYXJrc1xuICAgICAgICAgKiBIVE1MIEF0dHJpYnV0ZTogbW9kZVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5tb2RlID0gU2xpZGVyTW9kZS5zaW5nbGVWYWx1ZTtcbiAgICAgICAgdGhpcy5rZXlwcmVzc0hhbmRsZXIgPSAoZSkgPT4ge1xuICAgICAgICAgICAgaWYgKHRoaXMucmVhZE9ubHkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZS5rZXkgPT09IGtleUhvbWUpIHtcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgdGhpcy52YWx1ZSA9IGAke3RoaXMubWlufWA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChlLmtleSA9PT0ga2V5RW5kKSB7XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIHRoaXMudmFsdWUgPSBgJHt0aGlzLm1heH1gO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoIWUuc2hpZnRLZXkpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKGUua2V5KSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2Uga2V5QXJyb3dSaWdodDpcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBrZXlBcnJvd1VwOlxuICAgICAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pbmNyZW1lbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIGtleUFycm93TGVmdDpcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBrZXlBcnJvd0Rvd246XG4gICAgICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRlY3JlbWVudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICB0aGlzLnNldHVwVHJhY2tDb25zdHJhaW50cyA9ICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGNsaWVudFJlY3QgPSB0aGlzLnRyYWNrLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICAgICAgdGhpcy50cmFja1dpZHRoID0gdGhpcy50cmFjay5jbGllbnRXaWR0aDtcbiAgICAgICAgICAgIHRoaXMudHJhY2tNaW5XaWR0aCA9IHRoaXMudHJhY2suY2xpZW50TGVmdDtcbiAgICAgICAgICAgIHRoaXMudHJhY2tIZWlnaHQgPSBjbGllbnRSZWN0LmJvdHRvbTtcbiAgICAgICAgICAgIHRoaXMudHJhY2tNaW5IZWlnaHQgPSBjbGllbnRSZWN0LnRvcDtcbiAgICAgICAgICAgIHRoaXMudHJhY2tMZWZ0ID0gdGhpcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5sZWZ0O1xuICAgICAgICAgICAgaWYgKHRoaXMudHJhY2tXaWR0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHRoaXMudHJhY2tXaWR0aCA9IDE7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuc2V0dXBMaXN0ZW5lcnMgPSAocmVtb3ZlID0gZmFsc2UpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGV2ZW50QWN0aW9uID0gYCR7cmVtb3ZlID8gXCJyZW1vdmVcIiA6IFwiYWRkXCJ9RXZlbnRMaXN0ZW5lcmA7XG4gICAgICAgICAgICB0aGlzW2V2ZW50QWN0aW9uXShcImtleWRvd25cIiwgdGhpcy5rZXlwcmVzc0hhbmRsZXIpO1xuICAgICAgICAgICAgdGhpc1tldmVudEFjdGlvbl0oXCJtb3VzZWRvd25cIiwgdGhpcy5oYW5kbGVNb3VzZURvd24pO1xuICAgICAgICAgICAgdGhpcy50aHVtYltldmVudEFjdGlvbl0oXCJtb3VzZWRvd25cIiwgdGhpcy5oYW5kbGVUaHVtYk1vdXNlRG93biwge1xuICAgICAgICAgICAgICAgIHBhc3NpdmU6IHRydWUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMudGh1bWJbZXZlbnRBY3Rpb25dKFwidG91Y2hzdGFydFwiLCB0aGlzLmhhbmRsZVRodW1iTW91c2VEb3duLCB7XG4gICAgICAgICAgICAgICAgcGFzc2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgLy8gcmVtb3ZlcyBoYW5kbGVycyBhdHRhY2hlZCBieSBtb3VzZWRvd24gaGFuZGxlcnNcbiAgICAgICAgICAgIGlmIChyZW1vdmUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZU1vdXNlRG93bihudWxsKTtcbiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZVRodW1iTW91c2VEb3duKG51bGwpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICAvKipcbiAgICAgICAgICogQGludGVybmFsXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmluaXRpYWxWYWx1ZSA9IFwiXCI7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiAgSGFuZGxlIG1vdXNlIG1vdmVzIGR1cmluZyBhIHRodW1iIGRyYWcgb3BlcmF0aW9uXG4gICAgICAgICAqICBJZiB0aGUgZXZlbnQgaGFuZGxlciBpcyBudWxsIGl0IHJlbW92ZXMgdGhlIGV2ZW50c1xuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5oYW5kbGVUaHVtYk1vdXNlRG93biA9IChldmVudCkgPT4ge1xuICAgICAgICAgICAgaWYgKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucmVhZE9ubHkgfHwgdGhpcy5kaXNhYmxlZCB8fCBldmVudC5kZWZhdWx0UHJldmVudGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZXZlbnQudGFyZ2V0LmZvY3VzKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBldmVudEFjdGlvbiA9IGAke2V2ZW50ICE9PSBudWxsID8gXCJhZGRcIiA6IFwicmVtb3ZlXCJ9RXZlbnRMaXN0ZW5lcmA7XG4gICAgICAgICAgICB3aW5kb3dbZXZlbnRBY3Rpb25dKFwibW91c2V1cFwiLCB0aGlzLmhhbmRsZVdpbmRvd01vdXNlVXApO1xuICAgICAgICAgICAgd2luZG93W2V2ZW50QWN0aW9uXShcIm1vdXNlbW92ZVwiLCB0aGlzLmhhbmRsZU1vdXNlTW92ZSwgeyBwYXNzaXZlOiB0cnVlIH0pO1xuICAgICAgICAgICAgd2luZG93W2V2ZW50QWN0aW9uXShcInRvdWNobW92ZVwiLCB0aGlzLmhhbmRsZU1vdXNlTW92ZSwgeyBwYXNzaXZlOiB0cnVlIH0pO1xuICAgICAgICAgICAgd2luZG93W2V2ZW50QWN0aW9uXShcInRvdWNoZW5kXCIsIHRoaXMuaGFuZGxlV2luZG93TW91c2VVcCk7XG4gICAgICAgICAgICB0aGlzLmlzRHJhZ2dpbmcgPSBldmVudCAhPT0gbnVsbDtcbiAgICAgICAgfTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqICBIYW5kbGUgbW91c2UgbW92ZXMgZHVyaW5nIGEgdGh1bWIgZHJhZyBvcGVyYXRpb25cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuaGFuZGxlTW91c2VNb3ZlID0gKGUpID0+IHtcbiAgICAgICAgICAgIGlmICh0aGlzLnJlYWRPbmx5IHx8IHRoaXMuZGlzYWJsZWQgfHwgZS5kZWZhdWx0UHJldmVudGVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gdXBkYXRlIHRoZSB2YWx1ZSBiYXNlZCBvbiBjdXJyZW50IHBvc2l0aW9uXG4gICAgICAgICAgICBjb25zdCBzb3VyY2VFdmVudCA9IHdpbmRvdy5Ub3VjaEV2ZW50ICYmIGUgaW5zdGFuY2VvZiBUb3VjaEV2ZW50XG4gICAgICAgICAgICAgICAgPyBlLnRvdWNoZXNbMF1cbiAgICAgICAgICAgICAgICA6IGU7XG4gICAgICAgICAgICBjb25zdCBldmVudFZhbHVlID0gdGhpcy5vcmllbnRhdGlvbiA9PT0gT3JpZW50YXRpb24uaG9yaXpvbnRhbFxuICAgICAgICAgICAgICAgID8gc291cmNlRXZlbnQucGFnZVggLSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsTGVmdCAtIHRoaXMudHJhY2tMZWZ0XG4gICAgICAgICAgICAgICAgOiBzb3VyY2VFdmVudC5wYWdlWSAtIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3A7XG4gICAgICAgICAgICB0aGlzLnZhbHVlID0gYCR7dGhpcy5jYWxjdWxhdGVOZXdWYWx1ZShldmVudFZhbHVlKX1gO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmNhbGN1bGF0ZU5ld1ZhbHVlID0gKHJhd1ZhbHVlKSA9PiB7XG4gICAgICAgICAgICAvLyB1cGRhdGUgdGhlIHZhbHVlIGJhc2VkIG9uIGN1cnJlbnQgcG9zaXRpb25cbiAgICAgICAgICAgIGNvbnN0IG5ld1Bvc2l0aW9uID0gY29udmVydFBpeGVsVG9QZXJjZW50KHJhd1ZhbHVlLCB0aGlzLm9yaWVudGF0aW9uID09PSBPcmllbnRhdGlvbi5ob3Jpem9udGFsXG4gICAgICAgICAgICAgICAgPyB0aGlzLnRyYWNrTWluV2lkdGhcbiAgICAgICAgICAgICAgICA6IHRoaXMudHJhY2tNaW5IZWlnaHQsIHRoaXMub3JpZW50YXRpb24gPT09IE9yaWVudGF0aW9uLmhvcml6b250YWxcbiAgICAgICAgICAgICAgICA/IHRoaXMudHJhY2tXaWR0aFxuICAgICAgICAgICAgICAgIDogdGhpcy50cmFja0hlaWdodCwgdGhpcy5kaXJlY3Rpb24pO1xuICAgICAgICAgICAgY29uc3QgbmV3VmFsdWUgPSAodGhpcy5tYXggLSB0aGlzLm1pbikgKiBuZXdQb3NpdGlvbiArIHRoaXMubWluO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29udmVydFRvQ29uc3RyYWluZWRWYWx1ZShuZXdWYWx1ZSk7XG4gICAgICAgIH07XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBIYW5kbGUgYSB3aW5kb3cgbW91c2UgdXAgZHVyaW5nIGEgZHJhZyBvcGVyYXRpb25cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuaGFuZGxlV2luZG93TW91c2VVcCA9IChldmVudCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5zdG9wRHJhZ2dpbmcoKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5zdG9wRHJhZ2dpbmcgPSAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmlzRHJhZ2dpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlTW91c2VEb3duKG51bGwpO1xuICAgICAgICAgICAgdGhpcy5oYW5kbGVUaHVtYk1vdXNlRG93bihudWxsKTtcbiAgICAgICAgfTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwYXJhbSBlIC0gTW91c2VFdmVudCBvciBudWxsLiBJZiB0aGVyZSBpcyBubyBldmVudCBoYW5kbGVyIGl0IHdpbGwgcmVtb3ZlIHRoZSBldmVudHNcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuaGFuZGxlTW91c2VEb3duID0gKGUpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGV2ZW50QWN0aW9uID0gYCR7ZSAhPT0gbnVsbCA/IFwiYWRkXCIgOiBcInJlbW92ZVwifUV2ZW50TGlzdGVuZXJgO1xuICAgICAgICAgICAgaWYgKGUgPT09IG51bGwgfHwgKCF0aGlzLmRpc2FibGVkICYmICF0aGlzLnJlYWRPbmx5KSkge1xuICAgICAgICAgICAgICAgIHdpbmRvd1tldmVudEFjdGlvbl0oXCJtb3VzZXVwXCIsIHRoaXMuaGFuZGxlV2luZG93TW91c2VVcCk7XG4gICAgICAgICAgICAgICAgd2luZG93LmRvY3VtZW50W2V2ZW50QWN0aW9uXShcIm1vdXNlbGVhdmVcIiwgdGhpcy5oYW5kbGVXaW5kb3dNb3VzZVVwKTtcbiAgICAgICAgICAgICAgICB3aW5kb3dbZXZlbnRBY3Rpb25dKFwibW91c2Vtb3ZlXCIsIHRoaXMuaGFuZGxlTW91c2VNb3ZlKTtcbiAgICAgICAgICAgICAgICBpZiAoZSkge1xuICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0dXBUcmFja0NvbnN0cmFpbnRzKCk7XG4gICAgICAgICAgICAgICAgICAgIGUudGFyZ2V0LmZvY3VzKCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbnRyb2xWYWx1ZSA9IHRoaXMub3JpZW50YXRpb24gPT09IE9yaWVudGF0aW9uLmhvcml6b250YWxcbiAgICAgICAgICAgICAgICAgICAgICAgID8gZS5wYWdlWCAtIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxMZWZ0IC0gdGhpcy50cmFja0xlZnRcbiAgICAgICAgICAgICAgICAgICAgICAgIDogZS5wYWdlWSAtIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3A7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudmFsdWUgPSBgJHt0aGlzLmNhbGN1bGF0ZU5ld1ZhbHVlKGNvbnRyb2xWYWx1ZSl9YDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuY29udmVydFRvQ29uc3RyYWluZWRWYWx1ZSA9ICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgaWYgKGlzTmFOKHZhbHVlKSkge1xuICAgICAgICAgICAgICAgIHZhbHVlID0gdGhpcy5taW47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIFRoZSBmb2xsb3dpbmcgbG9naWMgaW50ZW5kcyB0byBvdmVyY29tZSB0aGUgaXNzdWUgd2l0aCBtYXRoIGluIEphdmFTY3JpcHQgd2l0aCByZWdhcmRzIHRvIGZsb2F0aW5nIHBvaW50IG51bWJlcnMuXG4gICAgICAgICAgICAgKiBUaGlzIGlzIG5lZWRlZCBhcyB0aGUgYHN0ZXBgIG1heSBiZSBhbiBpbnRlZ2VyIGJ1dCBjb3VsZCBhbHNvIGJlIGEgZmxvYXQuIFRvIGFjY29tcGxpc2ggdGhpcyB0aGUgc3RlcCAgaXMgYXNzdW1lZCB0byBiZSBhIGZsb2F0XG4gICAgICAgICAgICAgKiBhbmQgaXMgY29udmVydGVkIHRvIGFuIGludGVnZXIgYnkgZGV0ZXJtaW5pbmcgdGhlIG51bWJlciBvZiBkZWNpbWFsIHBsYWNlcyBpdCByZXByZXNlbnQsIG11bHRpcGx5aW5nIGl0IHVudGlsIGl0IGlzIGFuXG4gICAgICAgICAgICAgKiBpbnRlZ2VyIGFuZCB0aGVuIGRpdmlkaW5nIGl0IHRvIGdldCBiYWNrIHRvIHRoZSBjb3JyZWN0IG51bWJlci5cbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgbGV0IGNvbnN0cmFpbmVkVmFsdWUgPSB2YWx1ZSAtIHRoaXMubWluO1xuICAgICAgICAgICAgY29uc3Qgcm91bmRlZENvbnN0cmFpbmVkVmFsdWUgPSBNYXRoLnJvdW5kKGNvbnN0cmFpbmVkVmFsdWUgLyB0aGlzLnN0ZXApO1xuICAgICAgICAgICAgY29uc3QgcmVtYWluZGVyVmFsdWUgPSBjb25zdHJhaW5lZFZhbHVlIC1cbiAgICAgICAgICAgICAgICAocm91bmRlZENvbnN0cmFpbmVkVmFsdWUgKiAodGhpcy5zdGVwTXVsdGlwbGllciAqIHRoaXMuc3RlcCkpIC9cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGVwTXVsdGlwbGllcjtcbiAgICAgICAgICAgIGNvbnN0cmFpbmVkVmFsdWUgPVxuICAgICAgICAgICAgICAgIHJlbWFpbmRlclZhbHVlID49IE51bWJlcih0aGlzLnN0ZXApIC8gMlxuICAgICAgICAgICAgICAgICAgICA/IGNvbnN0cmFpbmVkVmFsdWUgLSByZW1haW5kZXJWYWx1ZSArIE51bWJlcih0aGlzLnN0ZXApXG4gICAgICAgICAgICAgICAgICAgIDogY29uc3RyYWluZWRWYWx1ZSAtIHJlbWFpbmRlclZhbHVlO1xuICAgICAgICAgICAgcmV0dXJuIGNvbnN0cmFpbmVkVmFsdWUgKyB0aGlzLm1pbjtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgcmVhZE9ubHlDaGFuZ2VkKCkge1xuICAgICAgICBpZiAodGhpcy5wcm94eSBpbnN0YW5jZW9mIEhUTUxJbnB1dEVsZW1lbnQpIHtcbiAgICAgICAgICAgIHRoaXMucHJveHkucmVhZE9ubHkgPSB0aGlzLnJlYWRPbmx5O1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSB2YWx1ZSBwcm9wZXJ0eSwgdHlwZWQgYXMgYSBudW1iZXIuXG4gICAgICpcbiAgICAgKiBAcHVibGljXG4gICAgICovXG4gICAgZ2V0IHZhbHVlQXNOdW1iZXIoKSB7XG4gICAgICAgIHJldHVybiBwYXJzZUZsb2F0KHN1cGVyLnZhbHVlKTtcbiAgICB9XG4gICAgc2V0IHZhbHVlQXNOdW1iZXIobmV4dCkge1xuICAgICAgICB0aGlzLnZhbHVlID0gbmV4dC50b1N0cmluZygpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICB2YWx1ZUNoYW5nZWQocHJldmlvdXMsIG5leHQpIHtcbiAgICAgICAgc3VwZXIudmFsdWVDaGFuZ2VkKHByZXZpb3VzLCBuZXh0KTtcbiAgICAgICAgaWYgKHRoaXMuJGZhc3RDb250cm9sbGVyLmlzQ29ubmVjdGVkKSB7XG4gICAgICAgICAgICB0aGlzLnNldFRodW1iUG9zaXRpb25Gb3JPcmllbnRhdGlvbih0aGlzLmRpcmVjdGlvbik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy4kZW1pdChcImNoYW5nZVwiKTtcbiAgICB9XG4gICAgbWluQ2hhbmdlZCgpIHtcbiAgICAgICAgaWYgKHRoaXMucHJveHkgaW5zdGFuY2VvZiBIVE1MSW5wdXRFbGVtZW50KSB7XG4gICAgICAgICAgICB0aGlzLnByb3h5Lm1pbiA9IGAke3RoaXMubWlufWA7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy52YWxpZGF0ZSgpO1xuICAgIH1cbiAgICBtYXhDaGFuZ2VkKCkge1xuICAgICAgICBpZiAodGhpcy5wcm94eSBpbnN0YW5jZW9mIEhUTUxJbnB1dEVsZW1lbnQpIHtcbiAgICAgICAgICAgIHRoaXMucHJveHkubWF4ID0gYCR7dGhpcy5tYXh9YDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnZhbGlkYXRlKCk7XG4gICAgfVxuICAgIHN0ZXBDaGFuZ2VkKCkge1xuICAgICAgICBpZiAodGhpcy5wcm94eSBpbnN0YW5jZW9mIEhUTUxJbnB1dEVsZW1lbnQpIHtcbiAgICAgICAgICAgIHRoaXMucHJveHkuc3RlcCA9IGAke3RoaXMuc3RlcH1gO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudXBkYXRlU3RlcE11bHRpcGxpZXIoKTtcbiAgICAgICAgdGhpcy52YWxpZGF0ZSgpO1xuICAgIH1cbiAgICBvcmllbnRhdGlvbkNoYW5nZWQoKSB7XG4gICAgICAgIGlmICh0aGlzLiRmYXN0Q29udHJvbGxlci5pc0Nvbm5lY3RlZCkge1xuICAgICAgICAgICAgdGhpcy5zZXRUaHVtYlBvc2l0aW9uRm9yT3JpZW50YXRpb24odGhpcy5kaXJlY3Rpb24pO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIGNvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgICAgICBzdXBlci5jb25uZWN0ZWRDYWxsYmFjaygpO1xuICAgICAgICB0aGlzLnByb3h5LnNldEF0dHJpYnV0ZShcInR5cGVcIiwgXCJyYW5nZVwiKTtcbiAgICAgICAgdGhpcy5kaXJlY3Rpb24gPSBnZXREaXJlY3Rpb24odGhpcyk7XG4gICAgICAgIHRoaXMudXBkYXRlU3RlcE11bHRpcGxpZXIoKTtcbiAgICAgICAgdGhpcy5zZXR1cFRyYWNrQ29uc3RyYWludHMoKTtcbiAgICAgICAgdGhpcy5zZXR1cExpc3RlbmVycygpO1xuICAgICAgICB0aGlzLnNldHVwRGVmYXVsdFZhbHVlKCk7XG4gICAgICAgIHRoaXMuc2V0VGh1bWJQb3NpdGlvbkZvck9yaWVudGF0aW9uKHRoaXMuZGlyZWN0aW9uKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgZGlzY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgICAgIHRoaXMuc2V0dXBMaXN0ZW5lcnModHJ1ZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEluY3JlbWVudCB0aGUgdmFsdWUgYnkgdGhlIHN0ZXBcbiAgICAgKlxuICAgICAqIEBwdWJsaWNcbiAgICAgKi9cbiAgICBpbmNyZW1lbnQoKSB7XG4gICAgICAgIGNvbnN0IG5ld1ZhbCA9IHRoaXMuZGlyZWN0aW9uICE9PSBEaXJlY3Rpb24ucnRsICYmIHRoaXMub3JpZW50YXRpb24gIT09IE9yaWVudGF0aW9uLnZlcnRpY2FsXG4gICAgICAgICAgICA/IE51bWJlcih0aGlzLnZhbHVlKSArIE51bWJlcih0aGlzLnN0ZXApXG4gICAgICAgICAgICA6IE51bWJlcih0aGlzLnZhbHVlKSAtIE51bWJlcih0aGlzLnN0ZXApO1xuICAgICAgICBjb25zdCBpbmNyZW1lbnRlZFZhbCA9IHRoaXMuY29udmVydFRvQ29uc3RyYWluZWRWYWx1ZShuZXdWYWwpO1xuICAgICAgICBjb25zdCBpbmNyZW1lbnRlZFZhbFN0cmluZyA9IGluY3JlbWVudGVkVmFsIDwgTnVtYmVyKHRoaXMubWF4KSA/IGAke2luY3JlbWVudGVkVmFsfWAgOiBgJHt0aGlzLm1heH1gO1xuICAgICAgICB0aGlzLnZhbHVlID0gaW5jcmVtZW50ZWRWYWxTdHJpbmc7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERlY3JlbWVudCB0aGUgdmFsdWUgYnkgdGhlIHN0ZXBcbiAgICAgKlxuICAgICAqIEBwdWJsaWNcbiAgICAgKi9cbiAgICBkZWNyZW1lbnQoKSB7XG4gICAgICAgIGNvbnN0IG5ld1ZhbCA9IHRoaXMuZGlyZWN0aW9uICE9PSBEaXJlY3Rpb24ucnRsICYmIHRoaXMub3JpZW50YXRpb24gIT09IE9yaWVudGF0aW9uLnZlcnRpY2FsXG4gICAgICAgICAgICA/IE51bWJlcih0aGlzLnZhbHVlKSAtIE51bWJlcih0aGlzLnN0ZXApXG4gICAgICAgICAgICA6IE51bWJlcih0aGlzLnZhbHVlKSArIE51bWJlcih0aGlzLnN0ZXApO1xuICAgICAgICBjb25zdCBkZWNyZW1lbnRlZFZhbCA9IHRoaXMuY29udmVydFRvQ29uc3RyYWluZWRWYWx1ZShuZXdWYWwpO1xuICAgICAgICBjb25zdCBkZWNyZW1lbnRlZFZhbFN0cmluZyA9IGRlY3JlbWVudGVkVmFsID4gTnVtYmVyKHRoaXMubWluKSA/IGAke2RlY3JlbWVudGVkVmFsfWAgOiBgJHt0aGlzLm1pbn1gO1xuICAgICAgICB0aGlzLnZhbHVlID0gZGVjcmVtZW50ZWRWYWxTdHJpbmc7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFBsYWNlcyB0aGUgdGh1bWIgYmFzZWQgb24gdGhlIGN1cnJlbnQgdmFsdWVcbiAgICAgKlxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcGFyYW0gZGlyZWN0aW9uIC0gd3JpdGluZyBtb2RlXG4gICAgICovXG4gICAgc2V0VGh1bWJQb3NpdGlvbkZvck9yaWVudGF0aW9uKGRpcmVjdGlvbikge1xuICAgICAgICBjb25zdCBuZXdQY3QgPSBjb252ZXJ0UGl4ZWxUb1BlcmNlbnQoTnVtYmVyKHRoaXMudmFsdWUpLCBOdW1iZXIodGhpcy5taW4pLCBOdW1iZXIodGhpcy5tYXgpLCBkaXJlY3Rpb24pO1xuICAgICAgICBjb25zdCBwZXJjZW50YWdlID0gKDEgLSBuZXdQY3QpICogMTAwO1xuICAgICAgICBpZiAodGhpcy5vcmllbnRhdGlvbiA9PT0gT3JpZW50YXRpb24uaG9yaXpvbnRhbCkge1xuICAgICAgICAgICAgdGhpcy5wb3NpdGlvbiA9IHRoaXMuaXNEcmFnZ2luZ1xuICAgICAgICAgICAgICAgID8gYHJpZ2h0OiAke3BlcmNlbnRhZ2V9JTsgdHJhbnNpdGlvbjogbm9uZTtgXG4gICAgICAgICAgICAgICAgOiBgcmlnaHQ6ICR7cGVyY2VudGFnZX0lOyB0cmFuc2l0aW9uOiBhbGwgMC4ycyBlYXNlO2A7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnBvc2l0aW9uID0gdGhpcy5pc0RyYWdnaW5nXG4gICAgICAgICAgICAgICAgPyBgYm90dG9tOiAke3BlcmNlbnRhZ2V9JTsgdHJhbnNpdGlvbjogbm9uZTtgXG4gICAgICAgICAgICAgICAgOiBgYm90dG9tOiAke3BlcmNlbnRhZ2V9JTsgdHJhbnNpdGlvbjogYWxsIDAuMnMgZWFzZTtgO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFVwZGF0ZSB0aGUgc3RlcCBtdWx0aXBsaWVyIHVzZWQgdG8gZW5zdXJlIHJvdW5kaW5nIGVycm9ycyBmcm9tIHN0ZXBzIHRoYXRcbiAgICAgKiBhcmUgbm90IHdob2xlIG51bWJlcnNcbiAgICAgKi9cbiAgICB1cGRhdGVTdGVwTXVsdGlwbGllcigpIHtcbiAgICAgICAgY29uc3Qgc3RlcFN0cmluZyA9IHRoaXMuc3RlcCArIFwiXCI7XG4gICAgICAgIGNvbnN0IGRlY2ltYWxQbGFjZXNPZlN0ZXAgPSAhISh0aGlzLnN0ZXAgJSAxKVxuICAgICAgICAgICAgPyBzdGVwU3RyaW5nLmxlbmd0aCAtIHN0ZXBTdHJpbmcuaW5kZXhPZihcIi5cIikgLSAxXG4gICAgICAgICAgICA6IDA7XG4gICAgICAgIHRoaXMuc3RlcE11bHRpcGxpZXIgPSBNYXRoLnBvdygxMCwgZGVjaW1hbFBsYWNlc09mU3RlcCk7XG4gICAgfVxuICAgIGdldCBtaWRwb2ludCgpIHtcbiAgICAgICAgcmV0dXJuIGAke3RoaXMuY29udmVydFRvQ29uc3RyYWluZWRWYWx1ZSgodGhpcy5tYXggKyB0aGlzLm1pbikgLyAyKX1gO1xuICAgIH1cbiAgICBzZXR1cERlZmF1bHRWYWx1ZSgpIHtcbiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLnZhbHVlID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICBpZiAodGhpcy52YWx1ZS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICB0aGlzLmluaXRpYWxWYWx1ZSA9IHRoaXMubWlkcG9pbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9IHBhcnNlRmxvYXQodGhpcy52YWx1ZSk7XG4gICAgICAgICAgICAgICAgaWYgKCFOdW1iZXIuaXNOYU4odmFsdWUpICYmICh2YWx1ZSA8IHRoaXMubWluIHx8IHZhbHVlID4gdGhpcy5tYXgpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLm1pZHBvaW50O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn1cbl9fZGVjb3JhdGUoW1xuICAgIGF0dHIoeyBhdHRyaWJ1dGU6IFwicmVhZG9ubHlcIiwgbW9kZTogXCJib29sZWFuXCIgfSlcbl0sIFNsaWRlci5wcm90b3R5cGUsIFwicmVhZE9ubHlcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIG9ic2VydmFibGVcbl0sIFNsaWRlci5wcm90b3R5cGUsIFwiZGlyZWN0aW9uXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBvYnNlcnZhYmxlXG5dLCBTbGlkZXIucHJvdG90eXBlLCBcImlzRHJhZ2dpbmdcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIG9ic2VydmFibGVcbl0sIFNsaWRlci5wcm90b3R5cGUsIFwicG9zaXRpb25cIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIG9ic2VydmFibGVcbl0sIFNsaWRlci5wcm90b3R5cGUsIFwidHJhY2tXaWR0aFwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgb2JzZXJ2YWJsZVxuXSwgU2xpZGVyLnByb3RvdHlwZSwgXCJ0cmFja01pbldpZHRoXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBvYnNlcnZhYmxlXG5dLCBTbGlkZXIucHJvdG90eXBlLCBcInRyYWNrSGVpZ2h0XCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBvYnNlcnZhYmxlXG5dLCBTbGlkZXIucHJvdG90eXBlLCBcInRyYWNrTGVmdFwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgb2JzZXJ2YWJsZVxuXSwgU2xpZGVyLnByb3RvdHlwZSwgXCJ0cmFja01pbkhlaWdodFwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgb2JzZXJ2YWJsZVxuXSwgU2xpZGVyLnByb3RvdHlwZSwgXCJ2YWx1ZVRleHRGb3JtYXR0ZXJcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIGF0dHIoeyBjb252ZXJ0ZXI6IG51bGxhYmxlTnVtYmVyQ29udmVydGVyIH0pXG5dLCBTbGlkZXIucHJvdG90eXBlLCBcIm1pblwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgYXR0cih7IGNvbnZlcnRlcjogbnVsbGFibGVOdW1iZXJDb252ZXJ0ZXIgfSlcbl0sIFNsaWRlci5wcm90b3R5cGUsIFwibWF4XCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBhdHRyKHsgY29udmVydGVyOiBudWxsYWJsZU51bWJlckNvbnZlcnRlciB9KVxuXSwgU2xpZGVyLnByb3RvdHlwZSwgXCJzdGVwXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBhdHRyXG5dLCBTbGlkZXIucHJvdG90eXBlLCBcIm9yaWVudGF0aW9uXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBhdHRyXG5dLCBTbGlkZXIucHJvdG90eXBlLCBcIm1vZGVcIiwgdm9pZCAwKTtcbiIsImltcG9ydCB7IGh0bWwsIHJlZiB9IGZyb20gXCJAbWljcm9zb2Z0L2Zhc3QtZWxlbWVudFwiO1xuaW1wb3J0IHsgT3JpZW50YXRpb24gfSBmcm9tIFwiQG1pY3Jvc29mdC9mYXN0LXdlYi11dGlsaXRpZXNcIjtcbi8qKlxuICogVGhlIHRlbXBsYXRlIGZvciB0aGUge0BsaW5rIEBtaWNyb3NvZnQvZmFzdC1mb3VuZGF0aW9uIyhTbGlkZXI6Y2xhc3MpfSBjb21wb25lbnQuXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjb25zdCBzbGlkZXJUZW1wbGF0ZSA9IChjb250ZXh0LCBkZWZpbml0aW9uKSA9PiBodG1sIGBcbiAgICA8dGVtcGxhdGVcbiAgICAgICAgcm9sZT1cInNsaWRlclwiXG4gICAgICAgIGNsYXNzPVwiJHt4ID0+ICh4LnJlYWRPbmx5ID8gXCJyZWFkb25seVwiIDogXCJcIil9XG4gICAgICAgICR7eCA9PiB4Lm9yaWVudGF0aW9uIHx8IE9yaWVudGF0aW9uLmhvcml6b250YWx9XCJcbiAgICAgICAgdGFiaW5kZXg9XCIke3ggPT4gKHguZGlzYWJsZWQgPyBudWxsIDogMCl9XCJcbiAgICAgICAgYXJpYS12YWx1ZXRleHQ9XCIke3ggPT4geC52YWx1ZVRleHRGb3JtYXR0ZXIoeC52YWx1ZSl9XCJcbiAgICAgICAgYXJpYS12YWx1ZW5vdz1cIiR7eCA9PiB4LnZhbHVlfVwiXG4gICAgICAgIGFyaWEtdmFsdWVtaW49XCIke3ggPT4geC5taW59XCJcbiAgICAgICAgYXJpYS12YWx1ZW1heD1cIiR7eCA9PiB4Lm1heH1cIlxuICAgICAgICBhcmlhLWRpc2FibGVkPVwiJHt4ID0+ICh4LmRpc2FibGVkID8gdHJ1ZSA6IHZvaWQgMCl9XCJcbiAgICAgICAgYXJpYS1yZWFkb25seT1cIiR7eCA9PiAoeC5yZWFkT25seSA/IHRydWUgOiB2b2lkIDApfVwiXG4gICAgICAgIGFyaWEtb3JpZW50YXRpb249XCIke3ggPT4geC5vcmllbnRhdGlvbn1cIlxuICAgICAgICBjbGFzcz1cIiR7eCA9PiB4Lm9yaWVudGF0aW9ufVwiXG4gICAgPlxuICAgICAgICA8ZGl2IHBhcnQ9XCJwb3NpdGlvbmluZy1yZWdpb25cIiBjbGFzcz1cInBvc2l0aW9uaW5nLXJlZ2lvblwiPlxuICAgICAgICAgICAgPGRpdiAke3JlZihcInRyYWNrXCIpfSBwYXJ0PVwidHJhY2stY29udGFpbmVyXCIgY2xhc3M9XCJ0cmFja1wiPlxuICAgICAgICAgICAgICAgIDxzbG90IG5hbWU9XCJ0cmFja1wiPjwvc2xvdD5cbiAgICAgICAgICAgICAgICA8ZGl2IHBhcnQ9XCJ0cmFjay1zdGFydFwiIGNsYXNzPVwidHJhY2stc3RhcnRcIiBzdHlsZT1cIiR7eCA9PiB4LnBvc2l0aW9ufVwiPlxuICAgICAgICAgICAgICAgICAgICA8c2xvdCBuYW1lPVwidHJhY2stc3RhcnRcIj48L3Nsb3Q+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxzbG90Pjwvc2xvdD5cbiAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAke3JlZihcInRodW1iXCIpfVxuICAgICAgICAgICAgICAgIHBhcnQ9XCJ0aHVtYi1jb250YWluZXJcIlxuICAgICAgICAgICAgICAgIGNsYXNzPVwidGh1bWItY29udGFpbmVyXCJcbiAgICAgICAgICAgICAgICBzdHlsZT1cIiR7eCA9PiB4LnBvc2l0aW9ufVwiXG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgPHNsb3QgbmFtZT1cInRodW1iXCI+JHtkZWZpbml0aW9uLnRodW1iIHx8IFwiXCJ9PC9zbG90PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgIDwvdGVtcGxhdGU+XG5gO1xuIiwiZXhwb3J0ICogZnJvbSBcIi4vc3dpdGNoLnRlbXBsYXRlLmpzXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9zd2l0Y2guanNcIjtcbiIsImltcG9ydCB7IENoZWNrYWJsZUZvcm1Bc3NvY2lhdGVkIH0gZnJvbSBcIi4uL2Zvcm0tYXNzb2NpYXRlZC9mb3JtLWFzc29jaWF0ZWQuanNcIjtcbmltcG9ydCB7IEZvdW5kYXRpb25FbGVtZW50IH0gZnJvbSBcIi4uL2ZvdW5kYXRpb24tZWxlbWVudC9mb3VuZGF0aW9uLWVsZW1lbnQuanNcIjtcbmNsYXNzIF9Td2l0Y2ggZXh0ZW5kcyBGb3VuZGF0aW9uRWxlbWVudCB7XG59XG4vKipcbiAqIEEgZm9ybS1hc3NvY2lhdGVkIGJhc2UgY2xhc3MgZm9yIHRoZSB7QGxpbmsgQG1pY3Jvc29mdC9mYXN0LWZvdW5kYXRpb24jKFN3aXRjaDpjbGFzcyl9IGNvbXBvbmVudC5cbiAqXG4gKiBAaW50ZXJuYWxcbiAqL1xuZXhwb3J0IGNsYXNzIEZvcm1Bc3NvY2lhdGVkU3dpdGNoIGV4dGVuZHMgQ2hlY2thYmxlRm9ybUFzc29jaWF0ZWQoX1N3aXRjaCkge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlciguLi5hcmd1bWVudHMpO1xuICAgICAgICB0aGlzLnByb3h5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IF9fZGVjb3JhdGUgfSBmcm9tIFwidHNsaWJcIjtcbmltcG9ydCB7IGF0dHIsIG9ic2VydmFibGUgfSBmcm9tIFwiQG1pY3Jvc29mdC9mYXN0LWVsZW1lbnRcIjtcbmltcG9ydCB7IGtleUVudGVyLCBrZXlTcGFjZSB9IGZyb20gXCJAbWljcm9zb2Z0L2Zhc3Qtd2ViLXV0aWxpdGllc1wiO1xuaW1wb3J0IHsgRm9ybUFzc29jaWF0ZWRTd2l0Y2ggfSBmcm9tIFwiLi9zd2l0Y2guZm9ybS1hc3NvY2lhdGVkLmpzXCI7XG4vKipcbiAqIEEgU3dpdGNoIEN1c3RvbSBIVE1MIEVsZW1lbnQuXG4gKiBJbXBsZW1lbnRzIHRoZSB7QGxpbmsgaHR0cHM6Ly93d3cudzMub3JnL1RSL3dhaS1hcmlhLTEuMS8jc3dpdGNoIHwgQVJJQSBzd2l0Y2ggfS5cbiAqXG4gKiBAc2xvdCAtIFRoZSBkZWFmdWx0IHNsb3QgZm9yIHRoZSBsYWJlbFxuICogQHNsb3QgY2hlY2tlZC1tZXNzYWdlIC0gVGhlIG1lc3NhZ2Ugd2hlbiBpbiBhIGNoZWNrZWQgc3RhdGVcbiAqIEBzbG90IHVuY2hlY2tlZC1tZXNzYWdlIC0gVGhlIG1lc3NhZ2Ugd2hlbiBpbiBhbiB1bmNoZWNrZWQgc3RhdGVcbiAqIEBjc3NwYXJ0IGxhYmVsIC0gVGhlIGxhYmVsXG4gKiBAY3NzcGFydCBzd2l0Y2ggLSBUaGUgZWxlbWVudCByZXByZXNlbnRpbmcgdGhlIHN3aXRjaCwgd2hpY2ggd3JhcHMgdGhlIGluZGljYXRvclxuICogQGNzc3BhcnQgc3RhdHVzLW1lc3NhZ2UgLSBUaGUgd3JhcHBlciBmb3IgdGhlIHN0YXR1cyBtZXNzYWdlc1xuICogQGNzc3BhcnQgY2hlY2tlZC1tZXNzYWdlIC0gVGhlIGNoZWNrZWQgbWVzc2FnZVxuICogQGNzc3BhcnQgdW5jaGVja2VkLW1lc3NhZ2UgLSBUaGUgdW5jaGVja2VkIG1lc3NhZ2VcbiAqIEBmaXJlcyBjaGFuZ2UgLSBFbWl0cyBhIGN1c3RvbSBjaGFuZ2UgZXZlbnQgd2hlbiB0aGUgY2hlY2tlZCBzdGF0ZSBjaGFuZ2VzXG4gKlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgY2xhc3MgU3dpdGNoIGV4dGVuZHMgRm9ybUFzc29jaWF0ZWRTd2l0Y2gge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIGVsZW1lbnQncyB2YWx1ZSB0byBiZSBpbmNsdWRlZCBpbiBmb3JtIHN1Ym1pc3Npb24gd2hlbiBjaGVja2VkLlxuICAgICAgICAgKiBEZWZhdWx0IHRvIFwib25cIiB0byByZWFjaCBwYXJpdHkgd2l0aCBpbnB1dFt0eXBlPVwiY2hlY2tib3hcIl1cbiAgICAgICAgICpcbiAgICAgICAgICogQGludGVybmFsXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmluaXRpYWxWYWx1ZSA9IFwib25cIjtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBpbnRlcm5hbFxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5rZXlwcmVzc0hhbmRsZXIgPSAoZSkgPT4ge1xuICAgICAgICAgICAgaWYgKHRoaXMucmVhZE9ubHkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzd2l0Y2ggKGUua2V5KSB7XG4gICAgICAgICAgICAgICAgY2FzZSBrZXlFbnRlcjpcbiAgICAgICAgICAgICAgICBjYXNlIGtleVNwYWNlOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNoZWNrZWQgPSAhdGhpcy5jaGVja2VkO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBpbnRlcm5hbFxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5jbGlja0hhbmRsZXIgPSAoZSkgPT4ge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmRpc2FibGVkICYmICF0aGlzLnJlYWRPbmx5KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jaGVja2VkID0gIXRoaXMuY2hlY2tlZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5wcm94eS5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsIFwiY2hlY2tib3hcIik7XG4gICAgfVxuICAgIHJlYWRPbmx5Q2hhbmdlZCgpIHtcbiAgICAgICAgaWYgKHRoaXMucHJveHkgaW5zdGFuY2VvZiBIVE1MSW5wdXRFbGVtZW50KSB7XG4gICAgICAgICAgICB0aGlzLnByb3h5LnJlYWRPbmx5ID0gdGhpcy5yZWFkT25seTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnJlYWRPbmx5XG4gICAgICAgICAgICA/IHRoaXMuY2xhc3NMaXN0LmFkZChcInJlYWRvbmx5XCIpXG4gICAgICAgICAgICA6IHRoaXMuY2xhc3NMaXN0LnJlbW92ZShcInJlYWRvbmx5XCIpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBjaGVja2VkQ2hhbmdlZChwcmV2LCBuZXh0KSB7XG4gICAgICAgIHN1cGVyLmNoZWNrZWRDaGFuZ2VkKHByZXYsIG5leHQpO1xuICAgICAgICAvKipcbiAgICAgICAgICogQGRlcHJlY2F0ZWQgLSB0aGlzIGJlaGF2aW9yIGFscmVhZHkgZXhpc3RzIGluIHRoZSB0ZW1wbGF0ZSBhbmQgc2hvdWxkIG5vdCBleGlzdCBpbiB0aGUgY2xhc3MuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmNoZWNrZWQgPyB0aGlzLmNsYXNzTGlzdC5hZGQoXCJjaGVja2VkXCIpIDogdGhpcy5jbGFzc0xpc3QucmVtb3ZlKFwiY2hlY2tlZFwiKTtcbiAgICB9XG59XG5fX2RlY29yYXRlKFtcbiAgICBhdHRyKHsgYXR0cmlidXRlOiBcInJlYWRvbmx5XCIsIG1vZGU6IFwiYm9vbGVhblwiIH0pXG5dLCBTd2l0Y2gucHJvdG90eXBlLCBcInJlYWRPbmx5XCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBvYnNlcnZhYmxlXG5dLCBTd2l0Y2gucHJvdG90eXBlLCBcImRlZmF1bHRTbG90dGVkTm9kZXNcIiwgdm9pZCAwKTtcbiIsImltcG9ydCB7IGh0bWwsIHNsb3R0ZWQgfSBmcm9tIFwiQG1pY3Jvc29mdC9mYXN0LWVsZW1lbnRcIjtcbi8qKlxuICogVGhlIHRlbXBsYXRlIGZvciB0aGUge0BsaW5rIEBtaWNyb3NvZnQvZmFzdC1mb3VuZGF0aW9uIyhTd2l0Y2g6Y2xhc3MpfSBjb21wb25lbnQuXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjb25zdCBzd2l0Y2hUZW1wbGF0ZSA9IChjb250ZXh0LCBkZWZpbml0aW9uKSA9PiBodG1sIGBcbiAgICA8dGVtcGxhdGVcbiAgICAgICAgcm9sZT1cInN3aXRjaFwiXG4gICAgICAgIGFyaWEtY2hlY2tlZD1cIiR7eCA9PiB4LmNoZWNrZWR9XCJcbiAgICAgICAgYXJpYS1kaXNhYmxlZD1cIiR7eCA9PiB4LmRpc2FibGVkfVwiXG4gICAgICAgIGFyaWEtcmVhZG9ubHk9XCIke3ggPT4geC5yZWFkT25seX1cIlxuICAgICAgICB0YWJpbmRleD1cIiR7eCA9PiAoeC5kaXNhYmxlZCA/IG51bGwgOiAwKX1cIlxuICAgICAgICBAa2V5cHJlc3M9XCIkeyh4LCBjKSA9PiB4LmtleXByZXNzSGFuZGxlcihjLmV2ZW50KX1cIlxuICAgICAgICBAY2xpY2s9XCIkeyh4LCBjKSA9PiB4LmNsaWNrSGFuZGxlcihjLmV2ZW50KX1cIlxuICAgICAgICBjbGFzcz1cIiR7eCA9PiAoeC5jaGVja2VkID8gXCJjaGVja2VkXCIgOiBcIlwiKX1cIlxuICAgID5cbiAgICAgICAgPGxhYmVsXG4gICAgICAgICAgICBwYXJ0PVwibGFiZWxcIlxuICAgICAgICAgICAgY2xhc3M9XCIke3ggPT4geC5kZWZhdWx0U2xvdHRlZE5vZGVzICYmIHguZGVmYXVsdFNsb3R0ZWROb2Rlcy5sZW5ndGhcbiAgICA/IFwibGFiZWxcIlxuICAgIDogXCJsYWJlbCBsYWJlbF9faGlkZGVuXCJ9XCJcbiAgICAgICAgPlxuICAgICAgICAgICAgPHNsb3QgJHtzbG90dGVkKFwiZGVmYXVsdFNsb3R0ZWROb2Rlc1wiKX0+PC9zbG90PlxuICAgICAgICA8L2xhYmVsPlxuICAgICAgICA8ZGl2IHBhcnQ9XCJzd2l0Y2hcIiBjbGFzcz1cInN3aXRjaFwiPlxuICAgICAgICAgICAgPHNsb3QgbmFtZT1cInN3aXRjaFwiPiR7ZGVmaW5pdGlvbi5zd2l0Y2ggfHwgXCJcIn08L3Nsb3Q+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8c3BhbiBjbGFzcz1cInN0YXR1cy1tZXNzYWdlXCIgcGFydD1cInN0YXR1cy1tZXNzYWdlXCI+XG4gICAgICAgICAgICA8c3BhbiBjbGFzcz1cImNoZWNrZWQtbWVzc2FnZVwiIHBhcnQ9XCJjaGVja2VkLW1lc3NhZ2VcIj5cbiAgICAgICAgICAgICAgICA8c2xvdCBuYW1lPVwiY2hlY2tlZC1tZXNzYWdlXCI+PC9zbG90PlxuICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJ1bmNoZWNrZWQtbWVzc2FnZVwiIHBhcnQ9XCJ1bmNoZWNrZWQtbWVzc2FnZVwiPlxuICAgICAgICAgICAgICAgIDxzbG90IG5hbWU9XCJ1bmNoZWNrZWQtbWVzc2FnZVwiPjwvc2xvdD5cbiAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgPC9zcGFuPlxuICAgIDwvdGVtcGxhdGU+XG5gO1xuIiwiZXhwb3J0ICogZnJvbSBcIi4vdGFiLXBhbmVsLnRlbXBsYXRlLmpzXCI7XG5leHBvcnQgKiBmcm9tIFwiLi90YWItcGFuZWwuanNcIjtcbiIsImltcG9ydCB7IEZvdW5kYXRpb25FbGVtZW50IH0gZnJvbSBcIi4uL2ZvdW5kYXRpb24tZWxlbWVudC9mb3VuZGF0aW9uLWVsZW1lbnQuanNcIjtcbi8qKlxuICogQSBUYWJQYW5lbCBDb21wb25lbnQgdG8gYmUgdXNlZCB3aXRoIHtAbGluayBAbWljcm9zb2Z0L2Zhc3QtZm91bmRhdGlvbiMoVGFiczpjbGFzcyl9XG4gKlxuICogQHNsb3QgLSBUaGUgZGVmYXVsdCBzbG90IGZvciB0aGUgdGFicGFuZWwgY29udGVudFxuICpcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGNsYXNzIFRhYlBhbmVsIGV4dGVuZHMgRm91bmRhdGlvbkVsZW1lbnQge1xufVxuIiwiaW1wb3J0IHsgaHRtbCB9IGZyb20gXCJAbWljcm9zb2Z0L2Zhc3QtZWxlbWVudFwiO1xuLyoqXG4gKiBUaGUgdGVtcGxhdGUgZm9yIHRoZSB7QGxpbmsgQG1pY3Jvc29mdC9mYXN0LWZvdW5kYXRpb24jVGFiUGFuZWx9IGNvbXBvbmVudC5cbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGNvbnN0IHRhYlBhbmVsVGVtcGxhdGUgPSAoY29udGV4dCwgZGVmaW5pdGlvbikgPT4gaHRtbCBgXG4gICAgPHRlbXBsYXRlIHNsb3Q9XCJ0YWJwYW5lbFwiIHJvbGU9XCJ0YWJwYW5lbFwiPlxuICAgICAgICA8c2xvdD48L3Nsb3Q+XG4gICAgPC90ZW1wbGF0ZT5cbmA7XG4iLCJleHBvcnQgKiBmcm9tIFwiLi90YWIudGVtcGxhdGUuanNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL3RhYi5qc1wiO1xuIiwiaW1wb3J0IHsgX19kZWNvcmF0ZSB9IGZyb20gXCJ0c2xpYlwiO1xuaW1wb3J0IHsgYXR0ciB9IGZyb20gXCJAbWljcm9zb2Z0L2Zhc3QtZWxlbWVudFwiO1xuaW1wb3J0IHsgRm91bmRhdGlvbkVsZW1lbnQgfSBmcm9tIFwiLi4vZm91bmRhdGlvbi1lbGVtZW50L2ZvdW5kYXRpb24tZWxlbWVudC5qc1wiO1xuLyoqXG4gKiBBIFRhYiBDb21wb25lbnQgdG8gYmUgdXNlZCB3aXRoIHtAbGluayBAbWljcm9zb2Z0L2Zhc3QtZm91bmRhdGlvbiMoVGFiczpjbGFzcyl9XG4gKlxuICogQHNsb3QgLSBUaGUgZGVmYXVsdCBzbG90IGZvciB0aGUgdGFiIGNvbnRlbnRcbiAqXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjbGFzcyBUYWIgZXh0ZW5kcyBGb3VuZGF0aW9uRWxlbWVudCB7XG59XG5fX2RlY29yYXRlKFtcbiAgICBhdHRyKHsgbW9kZTogXCJib29sZWFuXCIgfSlcbl0sIFRhYi5wcm90b3R5cGUsIFwiZGlzYWJsZWRcIiwgdm9pZCAwKTtcbiIsImltcG9ydCB7IGh0bWwgfSBmcm9tIFwiQG1pY3Jvc29mdC9mYXN0LWVsZW1lbnRcIjtcbi8qKlxuICogVGhlIHRlbXBsYXRlIGZvciB0aGUge0BsaW5rIEBtaWNyb3NvZnQvZmFzdC1mb3VuZGF0aW9uI1RhYn0gY29tcG9uZW50LlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgY29uc3QgdGFiVGVtcGxhdGUgPSAoY29udGV4dCwgZGVmaW5pdGlvbikgPT4gaHRtbCBgXG4gICAgPHRlbXBsYXRlIHNsb3Q9XCJ0YWJcIiByb2xlPVwidGFiXCIgYXJpYS1kaXNhYmxlZD1cIiR7eCA9PiB4LmRpc2FibGVkfVwiPlxuICAgICAgICA8c2xvdD48L3Nsb3Q+XG4gICAgPC90ZW1wbGF0ZT5cbmA7XG4iLCJleHBvcnQgKiBmcm9tIFwiLi90YWJzLnRlbXBsYXRlLmpzXCI7XG5leHBvcnQgKiBmcm9tIFwiLi90YWJzLmpzXCI7XG4iLCJpbXBvcnQgeyBfX2RlY29yYXRlIH0gZnJvbSBcInRzbGliXCI7XG5pbXBvcnQgeyBhdHRyLCBvYnNlcnZhYmxlIH0gZnJvbSBcIkBtaWNyb3NvZnQvZmFzdC1lbGVtZW50XCI7XG5pbXBvcnQgeyBrZXlBcnJvd0Rvd24sIGtleUFycm93TGVmdCwga2V5QXJyb3dSaWdodCwga2V5QXJyb3dVcCwga2V5RW5kLCBrZXlIb21lLCBsaW1pdCwgdW5pcXVlSWQsIH0gZnJvbSBcIkBtaWNyb3NvZnQvZmFzdC13ZWItdXRpbGl0aWVzXCI7XG5pbXBvcnQgeyBTdGFydEVuZCB9IGZyb20gXCIuLi9wYXR0ZXJucy9zdGFydC1lbmQuanNcIjtcbmltcG9ydCB7IGFwcGx5TWl4aW5zIH0gZnJvbSBcIi4uL3V0aWxpdGllcy9hcHBseS1taXhpbnMuanNcIjtcbmltcG9ydCB7IEZvdW5kYXRpb25FbGVtZW50LCB9IGZyb20gXCIuLi9mb3VuZGF0aW9uLWVsZW1lbnQvZm91bmRhdGlvbi1lbGVtZW50LmpzXCI7XG4vKipcbiAqIFRoZSBvcmllbnRhdGlvbiBvZiB0aGUge0BsaW5rIEBtaWNyb3NvZnQvZmFzdC1mb3VuZGF0aW9uIyhUYWJzOmNsYXNzKX0gY29tcG9uZW50XG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjb25zdCBUYWJzT3JpZW50YXRpb24gPSB7XG4gICAgdmVydGljYWw6IFwidmVydGljYWxcIixcbiAgICBob3Jpem9udGFsOiBcImhvcml6b250YWxcIixcbn07XG4vKipcbiAqIEEgVGFicyBDdXN0b20gSFRNTCBFbGVtZW50LlxuICogSW1wbGVtZW50cyB0aGUge0BsaW5rIGh0dHBzOi8vd3d3LnczLm9yZy9UUi93YWktYXJpYS0xLjEvI3RhYmxpc3QgfCBBUklBIHRhYmxpc3QgfS5cbiAqXG4gKiBAc2xvdCBzdGFydCAtIENvbnRlbnQgd2hpY2ggY2FuIGJlIHByb3ZpZGVkIGJlZm9yZSB0aGUgdGFibGlzdCBlbGVtZW50XG4gKiBAc2xvdCBlbmQgLSBDb250ZW50IHdoaWNoIGNhbiBiZSBwcm92aWRlZCBhZnRlciB0aGUgdGFibGlzdCBlbGVtZW50XG4gKiBAc2xvdCB0YWIgLSBUaGUgc2xvdCBmb3IgdGFic1xuICogQHNsb3QgdGFicGFuZWwgLSBUaGUgc2xvdCBmb3IgdGFicGFuZWxzXG4gKiBAY3NzcGFydCB0YWJsaXN0IC0gVGhlIGVsZW1lbnQgd3JhcHBpbmcgZm9yIHRoZSB0YWJzXG4gKiBAY3NzcGFydCB0YWIgLSBUaGUgdGFiIHNsb3RcbiAqIEBjc3NwYXJ0IGFjdGl2ZUluZGljYXRvciAtIFRoZSB2aXN1YWwgaW5kaWNhdG9yXG4gKiBAY3NzcGFydCB0YWJwYW5lbCAtIFRoZSB0YWJwYW5lbCBzbG90XG4gKiBAZmlyZXMgY2hhbmdlIC0gRmlyZXMgYSBjdXN0b20gJ2NoYW5nZScgZXZlbnQgd2hlbiBhIHRhYiBpcyBjbGlja2VkIG9yIGR1cmluZyBrZXlib2FyZCBuYXZpZ2F0aW9uXG4gKlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgY2xhc3MgVGFicyBleHRlbmRzIEZvdW5kYXRpb25FbGVtZW50IHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBvcmllbnRhdGlvblxuICAgICAgICAgKiBAcHVibGljXG4gICAgICAgICAqIEByZW1hcmtzXG4gICAgICAgICAqIEhUTUwgQXR0cmlidXRlOiBvcmllbnRhdGlvblxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5vcmllbnRhdGlvbiA9IFRhYnNPcmllbnRhdGlvbi5ob3Jpem9udGFsO1xuICAgICAgICAvKipcbiAgICAgICAgICogV2hldGhlciBvciBub3QgdG8gc2hvdyB0aGUgYWN0aXZlIGluZGljYXRvclxuICAgICAgICAgKiBAcHVibGljXG4gICAgICAgICAqIEByZW1hcmtzXG4gICAgICAgICAqIEhUTUwgQXR0cmlidXRlOiBhY3RpdmVpbmRpY2F0b3JcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuYWN0aXZlaW5kaWNhdG9yID0gdHJ1ZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBpbnRlcm5hbFxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5zaG93QWN0aXZlSW5kaWNhdG9yID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5wcmV2QWN0aXZlVGFiSW5kZXggPSAwO1xuICAgICAgICB0aGlzLmFjdGl2ZVRhYkluZGV4ID0gMDtcbiAgICAgICAgdGhpcy50aWNraW5nID0gZmFsc2U7XG4gICAgICAgIHRoaXMuY2hhbmdlID0gKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy4kZW1pdChcImNoYW5nZVwiLCB0aGlzLmFjdGl2ZXRhYik7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuaXNEaXNhYmxlZEVsZW1lbnQgPSAoZWwpID0+IHtcbiAgICAgICAgICAgIHJldHVybiBlbC5nZXRBdHRyaWJ1dGUoXCJhcmlhLWRpc2FibGVkXCIpID09PSBcInRydWVcIjtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5pc0hpZGRlbkVsZW1lbnQgPSAoZWwpID0+IHtcbiAgICAgICAgICAgIHJldHVybiBlbC5oYXNBdHRyaWJ1dGUoXCJoaWRkZW5cIik7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuaXNGb2N1c2FibGVFbGVtZW50ID0gKGVsKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gIXRoaXMuaXNEaXNhYmxlZEVsZW1lbnQoZWwpICYmICF0aGlzLmlzSGlkZGVuRWxlbWVudChlbCk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuc2V0VGFicyA9ICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGdyaWRIb3Jpem9udGFsUHJvcGVydHkgPSBcImdyaWRDb2x1bW5cIjtcbiAgICAgICAgICAgIGNvbnN0IGdyaWRWZXJ0aWNhbFByb3BlcnR5ID0gXCJncmlkUm93XCI7XG4gICAgICAgICAgICBjb25zdCBncmlkUHJvcGVydHkgPSB0aGlzLmlzSG9yaXpvbnRhbCgpXG4gICAgICAgICAgICAgICAgPyBncmlkSG9yaXpvbnRhbFByb3BlcnR5XG4gICAgICAgICAgICAgICAgOiBncmlkVmVydGljYWxQcm9wZXJ0eTtcbiAgICAgICAgICAgIHRoaXMuYWN0aXZlVGFiSW5kZXggPSB0aGlzLmdldEFjdGl2ZUluZGV4KCk7XG4gICAgICAgICAgICB0aGlzLnNob3dBY3RpdmVJbmRpY2F0b3IgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMudGFicy5mb3JFYWNoKCh0YWIsIGluZGV4KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHRhYi5zbG90ID09PSBcInRhYlwiKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGlzQWN0aXZlVGFiID0gdGhpcy5hY3RpdmVUYWJJbmRleCA9PT0gaW5kZXggJiYgdGhpcy5pc0ZvY3VzYWJsZUVsZW1lbnQodGFiKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuYWN0aXZlaW5kaWNhdG9yICYmIHRoaXMuaXNGb2N1c2FibGVFbGVtZW50KHRhYikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd0FjdGl2ZUluZGljYXRvciA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdGFiSWQgPSB0aGlzLnRhYklkc1tpbmRleF07XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRhYnBhbmVsSWQgPSB0aGlzLnRhYnBhbmVsSWRzW2luZGV4XTtcbiAgICAgICAgICAgICAgICAgICAgdGFiLnNldEF0dHJpYnV0ZShcImlkXCIsIHRhYklkKTtcbiAgICAgICAgICAgICAgICAgICAgdGFiLnNldEF0dHJpYnV0ZShcImFyaWEtc2VsZWN0ZWRcIiwgaXNBY3RpdmVUYWIgPyBcInRydWVcIiA6IFwiZmFsc2VcIik7XG4gICAgICAgICAgICAgICAgICAgIHRhYi5zZXRBdHRyaWJ1dGUoXCJhcmlhLWNvbnRyb2xzXCIsIHRhYnBhbmVsSWQpO1xuICAgICAgICAgICAgICAgICAgICB0YWIuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuaGFuZGxlVGFiQ2xpY2spO1xuICAgICAgICAgICAgICAgICAgICB0YWIuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5oYW5kbGVUYWJLZXlEb3duKTtcbiAgICAgICAgICAgICAgICAgICAgdGFiLnNldEF0dHJpYnV0ZShcInRhYmluZGV4XCIsIGlzQWN0aXZlVGFiID8gXCIwXCIgOiBcIi0xXCIpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoaXNBY3RpdmVUYWIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWN0aXZldGFiID0gdGFiO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hY3RpdmVpZCA9IHRhYklkO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIElmIHRoZSBvcmlnaW5hbCBwcm9wZXJ0eSBpc24ndCBlbXB0aWVkIG91dCxcbiAgICAgICAgICAgICAgICAvLyB0aGUgbmV4dCBzZXQgd2lsbCBtb3JwaCBpbnRvIGEgZ3JpZC1hcmVhIHN0eWxlIHNldHRpbmcgdGhhdCBpcyBub3Qgd2hhdCB3ZSB3YW50XG4gICAgICAgICAgICAgICAgdGFiLnN0eWxlW2dyaWRIb3Jpem9udGFsUHJvcGVydHldID0gXCJcIjtcbiAgICAgICAgICAgICAgICB0YWIuc3R5bGVbZ3JpZFZlcnRpY2FsUHJvcGVydHldID0gXCJcIjtcbiAgICAgICAgICAgICAgICB0YWIuc3R5bGVbZ3JpZFByb3BlcnR5XSA9IGAke2luZGV4ICsgMX1gO1xuICAgICAgICAgICAgICAgICF0aGlzLmlzSG9yaXpvbnRhbCgpXG4gICAgICAgICAgICAgICAgICAgID8gdGFiLmNsYXNzTGlzdC5hZGQoXCJ2ZXJ0aWNhbFwiKVxuICAgICAgICAgICAgICAgICAgICA6IHRhYi5jbGFzc0xpc3QucmVtb3ZlKFwidmVydGljYWxcIik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5zZXRUYWJQYW5lbHMgPSAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnRhYnBhbmVscy5mb3JFYWNoKCh0YWJwYW5lbCwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCB0YWJJZCA9IHRoaXMudGFiSWRzW2luZGV4XTtcbiAgICAgICAgICAgICAgICBjb25zdCB0YWJwYW5lbElkID0gdGhpcy50YWJwYW5lbElkc1tpbmRleF07XG4gICAgICAgICAgICAgICAgdGFicGFuZWwuc2V0QXR0cmlidXRlKFwiaWRcIiwgdGFicGFuZWxJZCk7XG4gICAgICAgICAgICAgICAgdGFicGFuZWwuc2V0QXR0cmlidXRlKFwiYXJpYS1sYWJlbGxlZGJ5XCIsIHRhYklkKTtcbiAgICAgICAgICAgICAgICB0aGlzLmFjdGl2ZVRhYkluZGV4ICE9PSBpbmRleFxuICAgICAgICAgICAgICAgICAgICA/IHRhYnBhbmVsLnNldEF0dHJpYnV0ZShcImhpZGRlblwiLCBcIlwiKVxuICAgICAgICAgICAgICAgICAgICA6IHRhYnBhbmVsLnJlbW92ZUF0dHJpYnV0ZShcImhpZGRlblwiKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmhhbmRsZVRhYkNsaWNrID0gKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBzZWxlY3RlZFRhYiA9IGV2ZW50LmN1cnJlbnRUYXJnZXQ7XG4gICAgICAgICAgICBpZiAoc2VsZWN0ZWRUYWIubm9kZVR5cGUgPT09IDEgJiYgdGhpcy5pc0ZvY3VzYWJsZUVsZW1lbnQoc2VsZWN0ZWRUYWIpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcmV2QWN0aXZlVGFiSW5kZXggPSB0aGlzLmFjdGl2ZVRhYkluZGV4O1xuICAgICAgICAgICAgICAgIHRoaXMuYWN0aXZlVGFiSW5kZXggPSB0aGlzLnRhYnMuaW5kZXhPZihzZWxlY3RlZFRhYik7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRDb21wb25lbnQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5oYW5kbGVUYWJLZXlEb3duID0gKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy5pc0hvcml6b250YWwoKSkge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoZXZlbnQua2V5KSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2Uga2V5QXJyb3dMZWZ0OlxuICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWRqdXN0QmFja3dhcmQoZXZlbnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2Uga2V5QXJyb3dSaWdodDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFkanVzdEZvcndhcmQoZXZlbnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChldmVudC5rZXkpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBrZXlBcnJvd1VwOlxuICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWRqdXN0QmFja3dhcmQoZXZlbnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2Uga2V5QXJyb3dEb3duOlxuICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWRqdXN0Rm9yd2FyZChldmVudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzd2l0Y2ggKGV2ZW50LmtleSkge1xuICAgICAgICAgICAgICAgIGNhc2Uga2V5SG9tZTpcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGp1c3QoLXRoaXMuYWN0aXZlVGFiSW5kZXgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIGtleUVuZDpcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGp1c3QodGhpcy50YWJzLmxlbmd0aCAtIHRoaXMuYWN0aXZlVGFiSW5kZXggLSAxKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuYWRqdXN0Rm9yd2FyZCA9IChlKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBncm91cCA9IHRoaXMudGFicztcbiAgICAgICAgICAgIGxldCBpbmRleCA9IDA7XG4gICAgICAgICAgICBpbmRleCA9IHRoaXMuYWN0aXZldGFiID8gZ3JvdXAuaW5kZXhPZih0aGlzLmFjdGl2ZXRhYikgKyAxIDogMTtcbiAgICAgICAgICAgIGlmIChpbmRleCA9PT0gZ3JvdXAubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgaW5kZXggPSAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgd2hpbGUgKGluZGV4IDwgZ3JvdXAubGVuZ3RoICYmIGdyb3VwLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5pc0ZvY3VzYWJsZUVsZW1lbnQoZ3JvdXBbaW5kZXhdKSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm1vdmVUb1RhYkJ5SW5kZXgoZ3JvdXAsIGluZGV4KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMuYWN0aXZldGFiICYmIGluZGV4ID09PSBncm91cC5pbmRleE9mKHRoaXMuYWN0aXZldGFiKSkge1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoaW5kZXggKyAxID49IGdyb3VwLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICBpbmRleCA9IDA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpbmRleCArPSAxO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5hZGp1c3RCYWNrd2FyZCA9IChlKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBncm91cCA9IHRoaXMudGFicztcbiAgICAgICAgICAgIGxldCBpbmRleCA9IDA7XG4gICAgICAgICAgICBpbmRleCA9IHRoaXMuYWN0aXZldGFiID8gZ3JvdXAuaW5kZXhPZih0aGlzLmFjdGl2ZXRhYikgLSAxIDogMDtcbiAgICAgICAgICAgIGluZGV4ID0gaW5kZXggPCAwID8gZ3JvdXAubGVuZ3RoIC0gMSA6IGluZGV4O1xuICAgICAgICAgICAgd2hpbGUgKGluZGV4ID49IDAgJiYgZ3JvdXAubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzRm9jdXNhYmxlRWxlbWVudChncm91cFtpbmRleF0pKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubW92ZVRvVGFiQnlJbmRleChncm91cCwgaW5kZXgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoaW5kZXggLSAxIDwgMCkge1xuICAgICAgICAgICAgICAgICAgICBpbmRleCA9IGdyb3VwLmxlbmd0aCAtIDE7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpbmRleCAtPSAxO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5tb3ZlVG9UYWJCeUluZGV4ID0gKGdyb3VwLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgdGFiID0gZ3JvdXBbaW5kZXhdO1xuICAgICAgICAgICAgdGhpcy5hY3RpdmV0YWIgPSB0YWI7XG4gICAgICAgICAgICB0aGlzLnByZXZBY3RpdmVUYWJJbmRleCA9IHRoaXMuYWN0aXZlVGFiSW5kZXg7XG4gICAgICAgICAgICB0aGlzLmFjdGl2ZVRhYkluZGV4ID0gaW5kZXg7XG4gICAgICAgICAgICB0YWIuZm9jdXMoKTtcbiAgICAgICAgICAgIHRoaXMuc2V0Q29tcG9uZW50KCk7XG4gICAgICAgIH07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIG9yaWVudGF0aW9uQ2hhbmdlZCgpIHtcbiAgICAgICAgaWYgKHRoaXMuJGZhc3RDb250cm9sbGVyLmlzQ29ubmVjdGVkKSB7XG4gICAgICAgICAgICB0aGlzLnNldFRhYnMoKTtcbiAgICAgICAgICAgIHRoaXMuc2V0VGFiUGFuZWxzKCk7XG4gICAgICAgICAgICB0aGlzLmhhbmRsZUFjdGl2ZUluZGljYXRvclBvc2l0aW9uKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgYWN0aXZlaWRDaGFuZ2VkKG9sZFZhbHVlLCBuZXdWYWx1ZSkge1xuICAgICAgICBpZiAodGhpcy4kZmFzdENvbnRyb2xsZXIuaXNDb25uZWN0ZWQgJiZcbiAgICAgICAgICAgIHRoaXMudGFicy5sZW5ndGggPD0gdGhpcy50YWJwYW5lbHMubGVuZ3RoKSB7XG4gICAgICAgICAgICB0aGlzLnByZXZBY3RpdmVUYWJJbmRleCA9IHRoaXMudGFicy5maW5kSW5kZXgoKGl0ZW0pID0+IGl0ZW0uaWQgPT09IG9sZFZhbHVlKTtcbiAgICAgICAgICAgIHRoaXMuc2V0VGFicygpO1xuICAgICAgICAgICAgdGhpcy5zZXRUYWJQYW5lbHMoKTtcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlQWN0aXZlSW5kaWNhdG9yUG9zaXRpb24oKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICB0YWJzQ2hhbmdlZCgpIHtcbiAgICAgICAgaWYgKHRoaXMuJGZhc3RDb250cm9sbGVyLmlzQ29ubmVjdGVkICYmXG4gICAgICAgICAgICB0aGlzLnRhYnMubGVuZ3RoIDw9IHRoaXMudGFicGFuZWxzLmxlbmd0aCkge1xuICAgICAgICAgICAgdGhpcy50YWJJZHMgPSB0aGlzLmdldFRhYklkcygpO1xuICAgICAgICAgICAgdGhpcy50YWJwYW5lbElkcyA9IHRoaXMuZ2V0VGFiUGFuZWxJZHMoKTtcbiAgICAgICAgICAgIHRoaXMuc2V0VGFicygpO1xuICAgICAgICAgICAgdGhpcy5zZXRUYWJQYW5lbHMoKTtcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlQWN0aXZlSW5kaWNhdG9yUG9zaXRpb24oKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICB0YWJwYW5lbHNDaGFuZ2VkKCkge1xuICAgICAgICBpZiAodGhpcy4kZmFzdENvbnRyb2xsZXIuaXNDb25uZWN0ZWQgJiZcbiAgICAgICAgICAgIHRoaXMudGFicGFuZWxzLmxlbmd0aCA8PSB0aGlzLnRhYnMubGVuZ3RoKSB7XG4gICAgICAgICAgICB0aGlzLnRhYklkcyA9IHRoaXMuZ2V0VGFiSWRzKCk7XG4gICAgICAgICAgICB0aGlzLnRhYnBhbmVsSWRzID0gdGhpcy5nZXRUYWJQYW5lbElkcygpO1xuICAgICAgICAgICAgdGhpcy5zZXRUYWJzKCk7XG4gICAgICAgICAgICB0aGlzLnNldFRhYlBhbmVscygpO1xuICAgICAgICAgICAgdGhpcy5oYW5kbGVBY3RpdmVJbmRpY2F0b3JQb3NpdGlvbigpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldEFjdGl2ZUluZGV4KCkge1xuICAgICAgICBjb25zdCBpZCA9IHRoaXMuYWN0aXZlaWQ7XG4gICAgICAgIGlmIChpZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy50YWJJZHMuaW5kZXhPZih0aGlzLmFjdGl2ZWlkKSA9PT0gLTFcbiAgICAgICAgICAgICAgICA/IDBcbiAgICAgICAgICAgICAgICA6IHRoaXMudGFiSWRzLmluZGV4T2YodGhpcy5hY3RpdmVpZCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXRUYWJJZHMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRhYnMubWFwKCh0YWIpID0+IHtcbiAgICAgICAgICAgIHZhciBfYTtcbiAgICAgICAgICAgIHJldHVybiAoX2EgPSB0YWIuZ2V0QXR0cmlidXRlKFwiaWRcIikpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IGB0YWItJHt1bmlxdWVJZCgpfWA7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBnZXRUYWJQYW5lbElkcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudGFicGFuZWxzLm1hcCgodGFiUGFuZWwpID0+IHtcbiAgICAgICAgICAgIHZhciBfYTtcbiAgICAgICAgICAgIHJldHVybiAoX2EgPSB0YWJQYW5lbC5nZXRBdHRyaWJ1dGUoXCJpZFwiKSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogYHBhbmVsLSR7dW5pcXVlSWQoKX1gO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgc2V0Q29tcG9uZW50KCkge1xuICAgICAgICBpZiAodGhpcy5hY3RpdmVUYWJJbmRleCAhPT0gdGhpcy5wcmV2QWN0aXZlVGFiSW5kZXgpIHtcbiAgICAgICAgICAgIHRoaXMuYWN0aXZlaWQgPSB0aGlzLnRhYklkc1t0aGlzLmFjdGl2ZVRhYkluZGV4XTtcbiAgICAgICAgICAgIHRoaXMuZm9jdXNUYWIoKTtcbiAgICAgICAgICAgIHRoaXMuY2hhbmdlKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaXNIb3Jpem9udGFsKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5vcmllbnRhdGlvbiA9PT0gVGFic09yaWVudGF0aW9uLmhvcml6b250YWw7XG4gICAgfVxuICAgIGhhbmRsZUFjdGl2ZUluZGljYXRvclBvc2l0aW9uKCkge1xuICAgICAgICAvLyBJZ25vcmUgaWYgd2UgY2xpY2sgdHdpY2Ugb24gdGhlIHNhbWUgdGFiXG4gICAgICAgIGlmICh0aGlzLnNob3dBY3RpdmVJbmRpY2F0b3IgJiZcbiAgICAgICAgICAgIHRoaXMuYWN0aXZlaW5kaWNhdG9yICYmXG4gICAgICAgICAgICB0aGlzLmFjdGl2ZVRhYkluZGV4ICE9PSB0aGlzLnByZXZBY3RpdmVUYWJJbmRleCkge1xuICAgICAgICAgICAgaWYgKHRoaXMudGlja2luZykge1xuICAgICAgICAgICAgICAgIHRoaXMudGlja2luZyA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy50aWNraW5nID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB0aGlzLmFuaW1hdGVBY3RpdmVJbmRpY2F0b3IoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBhbmltYXRlQWN0aXZlSW5kaWNhdG9yKCkge1xuICAgICAgICB0aGlzLnRpY2tpbmcgPSB0cnVlO1xuICAgICAgICBjb25zdCBncmlkUHJvcGVydHkgPSB0aGlzLmlzSG9yaXpvbnRhbCgpID8gXCJncmlkQ29sdW1uXCIgOiBcImdyaWRSb3dcIjtcbiAgICAgICAgY29uc3QgdHJhbnNsYXRlUHJvcGVydHkgPSB0aGlzLmlzSG9yaXpvbnRhbCgpXG4gICAgICAgICAgICA/IFwidHJhbnNsYXRlWFwiXG4gICAgICAgICAgICA6IFwidHJhbnNsYXRlWVwiO1xuICAgICAgICBjb25zdCBvZmZzZXRQcm9wZXJ0eSA9IHRoaXMuaXNIb3Jpem9udGFsKCkgPyBcIm9mZnNldExlZnRcIiA6IFwib2Zmc2V0VG9wXCI7XG4gICAgICAgIGNvbnN0IHByZXYgPSB0aGlzLmFjdGl2ZUluZGljYXRvclJlZltvZmZzZXRQcm9wZXJ0eV07XG4gICAgICAgIHRoaXMuYWN0aXZlSW5kaWNhdG9yUmVmLnN0eWxlW2dyaWRQcm9wZXJ0eV0gPSBgJHt0aGlzLmFjdGl2ZVRhYkluZGV4ICsgMX1gO1xuICAgICAgICBjb25zdCBuZXh0ID0gdGhpcy5hY3RpdmVJbmRpY2F0b3JSZWZbb2Zmc2V0UHJvcGVydHldO1xuICAgICAgICB0aGlzLmFjdGl2ZUluZGljYXRvclJlZi5zdHlsZVtncmlkUHJvcGVydHldID0gYCR7dGhpcy5wcmV2QWN0aXZlVGFiSW5kZXggKyAxfWA7XG4gICAgICAgIGNvbnN0IGRpZiA9IG5leHQgLSBwcmV2O1xuICAgICAgICB0aGlzLmFjdGl2ZUluZGljYXRvclJlZi5zdHlsZS50cmFuc2Zvcm0gPSBgJHt0cmFuc2xhdGVQcm9wZXJ0eX0oJHtkaWZ9cHgpYDtcbiAgICAgICAgdGhpcy5hY3RpdmVJbmRpY2F0b3JSZWYuY2xhc3NMaXN0LmFkZChcImFjdGl2ZUluZGljYXRvclRyYW5zaXRpb25cIik7XG4gICAgICAgIHRoaXMuYWN0aXZlSW5kaWNhdG9yUmVmLmFkZEV2ZW50TGlzdGVuZXIoXCJ0cmFuc2l0aW9uZW5kXCIsICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMudGlja2luZyA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5hY3RpdmVJbmRpY2F0b3JSZWYuc3R5bGVbZ3JpZFByb3BlcnR5XSA9IGAke3RoaXMuYWN0aXZlVGFiSW5kZXggKyAxfWA7XG4gICAgICAgICAgICB0aGlzLmFjdGl2ZUluZGljYXRvclJlZi5zdHlsZS50cmFuc2Zvcm0gPSBgJHt0cmFuc2xhdGVQcm9wZXJ0eX0oMHB4KWA7XG4gICAgICAgICAgICB0aGlzLmFjdGl2ZUluZGljYXRvclJlZi5jbGFzc0xpc3QucmVtb3ZlKFwiYWN0aXZlSW5kaWNhdG9yVHJhbnNpdGlvblwiKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBhZGp1c3QgbWV0aG9kIGZvciBGQVNUVGFic1xuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcmVtYXJrc1xuICAgICAqIFRoaXMgbWV0aG9kIGFsbG93cyB0aGUgYWN0aXZlIGluZGV4IHRvIGJlIGFkanVzdGVkIGJ5IG51bWVyaWNhbCBpbmNyZW1lbnRzXG4gICAgICovXG4gICAgYWRqdXN0KGFkanVzdG1lbnQpIHtcbiAgICAgICAgY29uc3QgZm9jdXNhYmxlVGFicyA9IHRoaXMudGFicy5maWx0ZXIodCA9PiB0aGlzLmlzRm9jdXNhYmxlRWxlbWVudCh0KSk7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRBY3RpdmVUYWJJbmRleCA9IGZvY3VzYWJsZVRhYnMuaW5kZXhPZih0aGlzLmFjdGl2ZXRhYik7XG4gICAgICAgIGNvbnN0IG5leHRUYWJJbmRleCA9IGxpbWl0KDAsIGZvY3VzYWJsZVRhYnMubGVuZ3RoIC0gMSwgY3VycmVudEFjdGl2ZVRhYkluZGV4ICsgYWRqdXN0bWVudCk7XG4gICAgICAgIC8vIHRoZSBpbmRleCBvZiB0aGUgbmV4dCBmb2N1c2FibGUgdGFiIHdpdGhpbiB0aGUgY29udGV4dCBvZiBhbGwgYXZhaWxhYmxlIHRhYnNcbiAgICAgICAgY29uc3QgbmV4dEluZGV4ID0gdGhpcy50YWJzLmluZGV4T2YoZm9jdXNhYmxlVGFic1tuZXh0VGFiSW5kZXhdKTtcbiAgICAgICAgaWYgKG5leHRJbmRleCA+IC0xKSB7XG4gICAgICAgICAgICB0aGlzLm1vdmVUb1RhYkJ5SW5kZXgodGhpcy50YWJzLCBuZXh0SW5kZXgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZvY3VzVGFiKCkge1xuICAgICAgICB0aGlzLnRhYnNbdGhpcy5hY3RpdmVUYWJJbmRleF0uZm9jdXMoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgICAgIHN1cGVyLmNvbm5lY3RlZENhbGxiYWNrKCk7XG4gICAgICAgIHRoaXMudGFiSWRzID0gdGhpcy5nZXRUYWJJZHMoKTtcbiAgICAgICAgdGhpcy50YWJwYW5lbElkcyA9IHRoaXMuZ2V0VGFiUGFuZWxJZHMoKTtcbiAgICAgICAgdGhpcy5hY3RpdmVUYWJJbmRleCA9IHRoaXMuZ2V0QWN0aXZlSW5kZXgoKTtcbiAgICB9XG59XG5fX2RlY29yYXRlKFtcbiAgICBhdHRyXG5dLCBUYWJzLnByb3RvdHlwZSwgXCJvcmllbnRhdGlvblwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgYXR0clxuXSwgVGFicy5wcm90b3R5cGUsIFwiYWN0aXZlaWRcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIG9ic2VydmFibGVcbl0sIFRhYnMucHJvdG90eXBlLCBcInRhYnNcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIG9ic2VydmFibGVcbl0sIFRhYnMucHJvdG90eXBlLCBcInRhYnBhbmVsc1wiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgYXR0cih7IG1vZGU6IFwiYm9vbGVhblwiIH0pXG5dLCBUYWJzLnByb3RvdHlwZSwgXCJhY3RpdmVpbmRpY2F0b3JcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIG9ic2VydmFibGVcbl0sIFRhYnMucHJvdG90eXBlLCBcImFjdGl2ZUluZGljYXRvclJlZlwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgb2JzZXJ2YWJsZVxuXSwgVGFicy5wcm90b3R5cGUsIFwic2hvd0FjdGl2ZUluZGljYXRvclwiLCB2b2lkIDApO1xuYXBwbHlNaXhpbnMoVGFicywgU3RhcnRFbmQpO1xuIiwiaW1wb3J0IHsgaHRtbCwgcmVmLCBzbG90dGVkLCB3aGVuIH0gZnJvbSBcIkBtaWNyb3NvZnQvZmFzdC1lbGVtZW50XCI7XG5pbXBvcnQgeyBlbmRTbG90VGVtcGxhdGUsIHN0YXJ0U2xvdFRlbXBsYXRlIH0gZnJvbSBcIi4uL3BhdHRlcm5zL3N0YXJ0LWVuZC5qc1wiO1xuLyoqXG4gKiBUaGUgdGVtcGxhdGUgZm9yIHRoZSB7QGxpbmsgQG1pY3Jvc29mdC9mYXN0LWZvdW5kYXRpb24jKFRhYnM6Y2xhc3MpfSBjb21wb25lbnQuXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjb25zdCB0YWJzVGVtcGxhdGUgPSAoY29udGV4dCwgZGVmaW5pdGlvbikgPT4gaHRtbCBgXG4gICAgPHRlbXBsYXRlIGNsYXNzPVwiJHt4ID0+IHgub3JpZW50YXRpb259XCI+XG4gICAgICAgICR7c3RhcnRTbG90VGVtcGxhdGUoY29udGV4dCwgZGVmaW5pdGlvbil9XG4gICAgICAgIDxkaXYgY2xhc3M9XCJ0YWJsaXN0XCIgcGFydD1cInRhYmxpc3RcIiByb2xlPVwidGFibGlzdFwiPlxuICAgICAgICAgICAgPHNsb3QgY2xhc3M9XCJ0YWJcIiBuYW1lPVwidGFiXCIgcGFydD1cInRhYlwiICR7c2xvdHRlZChcInRhYnNcIil9Pjwvc2xvdD5cblxuICAgICAgICAgICAgJHt3aGVuKHggPT4geC5zaG93QWN0aXZlSW5kaWNhdG9yLCBodG1sIGBcbiAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgJHtyZWYoXCJhY3RpdmVJbmRpY2F0b3JSZWZcIil9XG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzcz1cImFjdGl2ZUluZGljYXRvclwiXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJ0PVwiYWN0aXZlSW5kaWNhdG9yXCJcbiAgICAgICAgICAgICAgICAgICAgPjwvZGl2PlxuICAgICAgICAgICAgICAgIGApfVxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgJHtlbmRTbG90VGVtcGxhdGUoY29udGV4dCwgZGVmaW5pdGlvbil9XG4gICAgICAgIDxkaXYgY2xhc3M9XCJ0YWJwYW5lbFwiIHBhcnQ9XCJ0YWJwYW5lbFwiPlxuICAgICAgICAgICAgPHNsb3QgbmFtZT1cInRhYnBhbmVsXCIgJHtzbG90dGVkKFwidGFicGFuZWxzXCIpfT48L3Nsb3Q+XG4gICAgICAgIDwvZGl2PlxuICAgIDwvdGVtcGxhdGU+XG5gO1xuIiwiZXhwb3J0ICogZnJvbSBcIi4vdGV4dC1hcmVhLnRlbXBsYXRlLmpzXCI7XG5leHBvcnQgKiBmcm9tIFwiLi90ZXh0LWFyZWEuanNcIjtcbiIsImltcG9ydCB7IEZvcm1Bc3NvY2lhdGVkIH0gZnJvbSBcIi4uL2Zvcm0tYXNzb2NpYXRlZC9mb3JtLWFzc29jaWF0ZWQuanNcIjtcbmltcG9ydCB7IEZvdW5kYXRpb25FbGVtZW50IH0gZnJvbSBcIi4uL2ZvdW5kYXRpb24tZWxlbWVudC9mb3VuZGF0aW9uLWVsZW1lbnQuanNcIjtcbmNsYXNzIF9UZXh0QXJlYSBleHRlbmRzIEZvdW5kYXRpb25FbGVtZW50IHtcbn1cbi8qKlxuICogQSBmb3JtLWFzc29jaWF0ZWQgYmFzZSBjbGFzcyBmb3IgdGhlIHtAbGluayBAbWljcm9zb2Z0L2Zhc3QtZm91bmRhdGlvbiMoVGV4dEFyZWE6Y2xhc3MpfSBjb21wb25lbnQuXG4gKlxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCBjbGFzcyBGb3JtQXNzb2NpYXRlZFRleHRBcmVhIGV4dGVuZHMgRm9ybUFzc29jaWF0ZWQoX1RleHRBcmVhKSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICAgIHRoaXMucHJveHkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGV4dGFyZWFcIik7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgX19kZWNvcmF0ZSB9IGZyb20gXCJ0c2xpYlwiO1xuaW1wb3J0IHsgYXR0ciwgbnVsbGFibGVOdW1iZXJDb252ZXJ0ZXIsIG9ic2VydmFibGUgfSBmcm9tIFwiQG1pY3Jvc29mdC9mYXN0LWVsZW1lbnRcIjtcbmltcG9ydCB7IERlbGVnYXRlc0FSSUFUZXh0Ym94IH0gZnJvbSBcIi4uL3RleHQtZmllbGQvdGV4dC1maWVsZC5qc1wiO1xuaW1wb3J0IHsgYXBwbHlNaXhpbnMgfSBmcm9tIFwiLi4vdXRpbGl0aWVzL2FwcGx5LW1peGlucy5qc1wiO1xuaW1wb3J0IHsgRm9ybUFzc29jaWF0ZWRUZXh0QXJlYSB9IGZyb20gXCIuL3RleHQtYXJlYS5mb3JtLWFzc29jaWF0ZWQuanNcIjtcbmltcG9ydCB7IFRleHRBcmVhUmVzaXplIH0gZnJvbSBcIi4vdGV4dC1hcmVhLm9wdGlvbnMuanNcIjtcbmV4cG9ydCB7IFRleHRBcmVhUmVzaXplIH07XG4vKipcbiAqIEEgVGV4dCBBcmVhIEN1c3RvbSBIVE1MIEVsZW1lbnQuXG4gKiBCYXNlZCBsYXJnZWx5IG9uIHRoZSB7QGxpbmsgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSFRNTC9FbGVtZW50L3RleHRhcmVhIHwgPHRleHRhcmVhPiBlbGVtZW50IH0uXG4gKlxuICogQHNsb3QgLSBUaGUgZGVmYXVsdCBzbG90IGZvciB0aGUgbGFiZWxcbiAqIEBjc3NwYXJ0IGxhYmVsIC0gVGhlIGxhYmVsXG4gKiBAY3NzcGFydCByb290IC0gVGhlIGVsZW1lbnQgd3JhcHBpbmcgdGhlIGNvbnRyb2xcbiAqIEBjc3NwYXJ0IGNvbnRyb2wgLSBUaGUgdGV4dGFyZWEgZWxlbWVudFxuICogQGZpcmVzIGNoYW5nZSAtIEVtaXRzIGEgY3VzdG9tICdjaGFuZ2UnIGV2ZW50IHdoZW4gdGhlIHRleHRhcmVhIGVtaXRzIGEgY2hhbmdlIGV2ZW50XG4gKlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgY2xhc3MgVGV4dEFyZWEgZXh0ZW5kcyBGb3JtQXNzb2NpYXRlZFRleHRBcmVhIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSByZXNpemUgbW9kZSBvZiB0aGUgZWxlbWVudC5cbiAgICAgICAgICogQHB1YmxpY1xuICAgICAgICAgKiBAcmVtYXJrc1xuICAgICAgICAgKiBIVE1MIEF0dHJpYnV0ZTogcmVzaXplXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnJlc2l6ZSA9IFRleHRBcmVhUmVzaXplLm5vbmU7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTaXplcyB0aGUgZWxlbWVudCBob3Jpem9udGFsbHkgYnkgYSBudW1iZXIgb2YgY2hhcmFjdGVyIGNvbHVtbnMuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwdWJsaWNcbiAgICAgICAgICogQHJlbWFya3NcbiAgICAgICAgICogSFRNTCBBdHRyaWJ1dGU6IGNvbHNcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuY29scyA9IDIwO1xuICAgICAgICAvKipcbiAgICAgICAgICogQGludGVybmFsXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmhhbmRsZVRleHRJbnB1dCA9ICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLmNvbnRyb2wudmFsdWU7XG4gICAgICAgIH07XG4gICAgfVxuICAgIHJlYWRPbmx5Q2hhbmdlZCgpIHtcbiAgICAgICAgaWYgKHRoaXMucHJveHkgaW5zdGFuY2VvZiBIVE1MVGV4dEFyZWFFbGVtZW50KSB7XG4gICAgICAgICAgICB0aGlzLnByb3h5LnJlYWRPbmx5ID0gdGhpcy5yZWFkT25seTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhdXRvZm9jdXNDaGFuZ2VkKCkge1xuICAgICAgICBpZiAodGhpcy5wcm94eSBpbnN0YW5jZW9mIEhUTUxUZXh0QXJlYUVsZW1lbnQpIHtcbiAgICAgICAgICAgIHRoaXMucHJveHkuYXV0b2ZvY3VzID0gdGhpcy5hdXRvZm9jdXM7XG4gICAgICAgIH1cbiAgICB9XG4gICAgbGlzdENoYW5nZWQoKSB7XG4gICAgICAgIGlmICh0aGlzLnByb3h5IGluc3RhbmNlb2YgSFRNTFRleHRBcmVhRWxlbWVudCkge1xuICAgICAgICAgICAgdGhpcy5wcm94eS5zZXRBdHRyaWJ1dGUoXCJsaXN0XCIsIHRoaXMubGlzdCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgbWF4bGVuZ3RoQ2hhbmdlZCgpIHtcbiAgICAgICAgaWYgKHRoaXMucHJveHkgaW5zdGFuY2VvZiBIVE1MVGV4dEFyZWFFbGVtZW50KSB7XG4gICAgICAgICAgICB0aGlzLnByb3h5Lm1heExlbmd0aCA9IHRoaXMubWF4bGVuZ3RoO1xuICAgICAgICB9XG4gICAgfVxuICAgIG1pbmxlbmd0aENoYW5nZWQoKSB7XG4gICAgICAgIGlmICh0aGlzLnByb3h5IGluc3RhbmNlb2YgSFRNTFRleHRBcmVhRWxlbWVudCkge1xuICAgICAgICAgICAgdGhpcy5wcm94eS5taW5MZW5ndGggPSB0aGlzLm1pbmxlbmd0aDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzcGVsbGNoZWNrQ2hhbmdlZCgpIHtcbiAgICAgICAgaWYgKHRoaXMucHJveHkgaW5zdGFuY2VvZiBIVE1MVGV4dEFyZWFFbGVtZW50KSB7XG4gICAgICAgICAgICB0aGlzLnByb3h5LnNwZWxsY2hlY2sgPSB0aGlzLnNwZWxsY2hlY2s7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogU2VsZWN0cyBhbGwgdGhlIHRleHQgaW4gdGhlIHRleHQgYXJlYVxuICAgICAqXG4gICAgICogQHB1YmxpY1xuICAgICAqL1xuICAgIHNlbGVjdCgpIHtcbiAgICAgICAgdGhpcy5jb250cm9sLnNlbGVjdCgpO1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIHNlbGVjdCBldmVudCBkb2VzIG5vdCBwZXJtZWF0ZSB0aGUgc2hhZG93IERPTSBib3VuZGFyeS5cbiAgICAgICAgICogVGhpcyBmbiBlZmZlY3RpdmVseSBwcm94aWVzIHRoZSBzZWxlY3QgZXZlbnQsXG4gICAgICAgICAqIGVtaXR0aW5nIGEgYHNlbGVjdGAgZXZlbnQgd2hlbmV2ZXIgdGhlIGludGVybmFsXG4gICAgICAgICAqIGNvbnRyb2wgZW1pdHMgYSBgc2VsZWN0YCBldmVudFxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy4kZW1pdChcInNlbGVjdFwiKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2hhbmdlIGV2ZW50IGhhbmRsZXIgZm9yIGlubmVyIGNvbnRyb2wuXG4gICAgICogQHJlbWFya3NcbiAgICAgKiBcIkNoYW5nZVwiIGV2ZW50cyBhcmUgbm90IGBjb21wb3NhYmxlYCBzbyB0aGV5IHdpbGwgbm90XG4gICAgICogcGVybWVhdGUgdGhlIHNoYWRvdyBET00gYm91bmRhcnkuIFRoaXMgZm4gZWZmZWN0aXZlbHkgcHJveGllc1xuICAgICAqIHRoZSBjaGFuZ2UgZXZlbnQsIGVtaXR0aW5nIGEgYGNoYW5nZWAgZXZlbnQgd2hlbmV2ZXIgdGhlIGludGVybmFsXG4gICAgICogY29udHJvbCBlbWl0cyBhIGBjaGFuZ2VgIGV2ZW50XG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgaGFuZGxlQ2hhbmdlKCkge1xuICAgICAgICB0aGlzLiRlbWl0KFwiY2hhbmdlXCIpO1xuICAgIH1cbiAgICAvKioge0Bpbmhlcml0RG9jIChGb3JtQXNzb2NpYXRlZDppbnRlcmZhY2UpLnZhbGlkYXRlfSAqL1xuICAgIHZhbGlkYXRlKCkge1xuICAgICAgICBzdXBlci52YWxpZGF0ZSh0aGlzLmNvbnRyb2wpO1xuICAgIH1cbn1cbl9fZGVjb3JhdGUoW1xuICAgIGF0dHIoeyBtb2RlOiBcImJvb2xlYW5cIiB9KVxuXSwgVGV4dEFyZWEucHJvdG90eXBlLCBcInJlYWRPbmx5XCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBhdHRyXG5dLCBUZXh0QXJlYS5wcm90b3R5cGUsIFwicmVzaXplXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBhdHRyKHsgbW9kZTogXCJib29sZWFuXCIgfSlcbl0sIFRleHRBcmVhLnByb3RvdHlwZSwgXCJhdXRvZm9jdXNcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIGF0dHIoeyBhdHRyaWJ1dGU6IFwiZm9ybVwiIH0pXG5dLCBUZXh0QXJlYS5wcm90b3R5cGUsIFwiZm9ybUlkXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBhdHRyXG5dLCBUZXh0QXJlYS5wcm90b3R5cGUsIFwibGlzdFwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgYXR0cih7IGNvbnZlcnRlcjogbnVsbGFibGVOdW1iZXJDb252ZXJ0ZXIgfSlcbl0sIFRleHRBcmVhLnByb3RvdHlwZSwgXCJtYXhsZW5ndGhcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIGF0dHIoeyBjb252ZXJ0ZXI6IG51bGxhYmxlTnVtYmVyQ29udmVydGVyIH0pXG5dLCBUZXh0QXJlYS5wcm90b3R5cGUsIFwibWlubGVuZ3RoXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBhdHRyXG5dLCBUZXh0QXJlYS5wcm90b3R5cGUsIFwibmFtZVwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgYXR0clxuXSwgVGV4dEFyZWEucHJvdG90eXBlLCBcInBsYWNlaG9sZGVyXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBhdHRyKHsgY29udmVydGVyOiBudWxsYWJsZU51bWJlckNvbnZlcnRlciwgbW9kZTogXCJmcm9tVmlld1wiIH0pXG5dLCBUZXh0QXJlYS5wcm90b3R5cGUsIFwiY29sc1wiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgYXR0cih7IGNvbnZlcnRlcjogbnVsbGFibGVOdW1iZXJDb252ZXJ0ZXIsIG1vZGU6IFwiZnJvbVZpZXdcIiB9KVxuXSwgVGV4dEFyZWEucHJvdG90eXBlLCBcInJvd3NcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIGF0dHIoeyBtb2RlOiBcImJvb2xlYW5cIiB9KVxuXSwgVGV4dEFyZWEucHJvdG90eXBlLCBcInNwZWxsY2hlY2tcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIG9ic2VydmFibGVcbl0sIFRleHRBcmVhLnByb3RvdHlwZSwgXCJkZWZhdWx0U2xvdHRlZE5vZGVzXCIsIHZvaWQgMCk7XG5hcHBseU1peGlucyhUZXh0QXJlYSwgRGVsZWdhdGVzQVJJQVRleHRib3gpO1xuIiwiLyoqXG4gKiBSZXNpemUgbW9kZSBmb3IgYSBUZXh0QXJlYVxuICogQHB1YmxpY1xuICovXG5leHBvcnQgY29uc3QgVGV4dEFyZWFSZXNpemUgPSB7XG4gICAgLyoqXG4gICAgICogTm8gcmVzaXplLlxuICAgICAqL1xuICAgIG5vbmU6IFwibm9uZVwiLFxuICAgIC8qKlxuICAgICAqIFJlc2l6ZSB2ZXJ0aWNhbGx5IGFuZCBob3Jpem9udGFsbHkuXG4gICAgICovXG4gICAgYm90aDogXCJib3RoXCIsXG4gICAgLyoqXG4gICAgICogUmVzaXplIGhvcml6b250YWxseS5cbiAgICAgKi9cbiAgICBob3Jpem9udGFsOiBcImhvcml6b250YWxcIixcbiAgICAvKipcbiAgICAgKiBSZXNpemUgdmVydGljYWxseS5cbiAgICAgKi9cbiAgICB2ZXJ0aWNhbDogXCJ2ZXJ0aWNhbFwiLFxufTtcbiIsImltcG9ydCB7IGh0bWwsIHJlZiwgc2xvdHRlZCB9IGZyb20gXCJAbWljcm9zb2Z0L2Zhc3QtZWxlbWVudFwiO1xuaW1wb3J0IHsgVGV4dEFyZWFSZXNpemUgfSBmcm9tIFwiLi90ZXh0LWFyZWEuanNcIjtcbi8qKlxuICogVGhlIHRlbXBsYXRlIGZvciB0aGUge0BsaW5rIEBtaWNyb3NvZnQvZmFzdC1mb3VuZGF0aW9uIyhUZXh0QXJlYTpjbGFzcyl9IGNvbXBvbmVudC5cbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGNvbnN0IHRleHRBcmVhVGVtcGxhdGUgPSAoY29udGV4dCwgZGVmaW5pdGlvbikgPT4gaHRtbCBgXG4gICAgPHRlbXBsYXRlXG4gICAgICAgIGNsYXNzPVwiXG4gICAgICAgICAgICAke3ggPT4gKHgucmVhZE9ubHkgPyBcInJlYWRvbmx5XCIgOiBcIlwiKX1cbiAgICAgICAgICAgICR7eCA9PiAoeC5yZXNpemUgIT09IFRleHRBcmVhUmVzaXplLm5vbmUgPyBgcmVzaXplLSR7eC5yZXNpemV9YCA6IFwiXCIpfVwiXG4gICAgPlxuICAgICAgICA8bGFiZWxcbiAgICAgICAgICAgIHBhcnQ9XCJsYWJlbFwiXG4gICAgICAgICAgICBmb3I9XCJjb250cm9sXCJcbiAgICAgICAgICAgIGNsYXNzPVwiJHt4ID0+IHguZGVmYXVsdFNsb3R0ZWROb2RlcyAmJiB4LmRlZmF1bHRTbG90dGVkTm9kZXMubGVuZ3RoXG4gICAgPyBcImxhYmVsXCJcbiAgICA6IFwibGFiZWwgbGFiZWxfX2hpZGRlblwifVwiXG4gICAgICAgID5cbiAgICAgICAgICAgIDxzbG90ICR7c2xvdHRlZChcImRlZmF1bHRTbG90dGVkTm9kZXNcIil9Pjwvc2xvdD5cbiAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgPHRleHRhcmVhXG4gICAgICAgICAgICBwYXJ0PVwiY29udHJvbFwiXG4gICAgICAgICAgICBjbGFzcz1cImNvbnRyb2xcIlxuICAgICAgICAgICAgaWQ9XCJjb250cm9sXCJcbiAgICAgICAgICAgID9hdXRvZm9jdXM9XCIke3ggPT4geC5hdXRvZm9jdXN9XCJcbiAgICAgICAgICAgIGNvbHM9XCIke3ggPT4geC5jb2xzfVwiXG4gICAgICAgICAgICA/ZGlzYWJsZWQ9XCIke3ggPT4geC5kaXNhYmxlZH1cIlxuICAgICAgICAgICAgZm9ybT1cIiR7eCA9PiB4LmZvcm19XCJcbiAgICAgICAgICAgIGxpc3Q9XCIke3ggPT4geC5saXN0fVwiXG4gICAgICAgICAgICBtYXhsZW5ndGg9XCIke3ggPT4geC5tYXhsZW5ndGh9XCJcbiAgICAgICAgICAgIG1pbmxlbmd0aD1cIiR7eCA9PiB4Lm1pbmxlbmd0aH1cIlxuICAgICAgICAgICAgbmFtZT1cIiR7eCA9PiB4Lm5hbWV9XCJcbiAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiJHt4ID0+IHgucGxhY2Vob2xkZXJ9XCJcbiAgICAgICAgICAgID9yZWFkb25seT1cIiR7eCA9PiB4LnJlYWRPbmx5fVwiXG4gICAgICAgICAgICA/cmVxdWlyZWQ9XCIke3ggPT4geC5yZXF1aXJlZH1cIlxuICAgICAgICAgICAgcm93cz1cIiR7eCA9PiB4LnJvd3N9XCJcbiAgICAgICAgICAgID9zcGVsbGNoZWNrPVwiJHt4ID0+IHguc3BlbGxjaGVja31cIlxuICAgICAgICAgICAgOnZhbHVlPVwiJHt4ID0+IHgudmFsdWV9XCJcbiAgICAgICAgICAgIGFyaWEtYXRvbWljPVwiJHt4ID0+IHguYXJpYUF0b21pY31cIlxuICAgICAgICAgICAgYXJpYS1idXN5PVwiJHt4ID0+IHguYXJpYUJ1c3l9XCJcbiAgICAgICAgICAgIGFyaWEtY29udHJvbHM9XCIke3ggPT4geC5hcmlhQ29udHJvbHN9XCJcbiAgICAgICAgICAgIGFyaWEtY3VycmVudD1cIiR7eCA9PiB4LmFyaWFDdXJyZW50fVwiXG4gICAgICAgICAgICBhcmlhLWRlc2NyaWJlZGJ5PVwiJHt4ID0+IHguYXJpYURlc2NyaWJlZGJ5fVwiXG4gICAgICAgICAgICBhcmlhLWRldGFpbHM9XCIke3ggPT4geC5hcmlhRGV0YWlsc31cIlxuICAgICAgICAgICAgYXJpYS1kaXNhYmxlZD1cIiR7eCA9PiB4LmFyaWFEaXNhYmxlZH1cIlxuICAgICAgICAgICAgYXJpYS1lcnJvcm1lc3NhZ2U9XCIke3ggPT4geC5hcmlhRXJyb3JtZXNzYWdlfVwiXG4gICAgICAgICAgICBhcmlhLWZsb3d0bz1cIiR7eCA9PiB4LmFyaWFGbG93dG99XCJcbiAgICAgICAgICAgIGFyaWEtaGFzcG9wdXA9XCIke3ggPT4geC5hcmlhSGFzcG9wdXB9XCJcbiAgICAgICAgICAgIGFyaWEtaGlkZGVuPVwiJHt4ID0+IHguYXJpYUhpZGRlbn1cIlxuICAgICAgICAgICAgYXJpYS1pbnZhbGlkPVwiJHt4ID0+IHguYXJpYUludmFsaWR9XCJcbiAgICAgICAgICAgIGFyaWEta2V5c2hvcnRjdXRzPVwiJHt4ID0+IHguYXJpYUtleXNob3J0Y3V0c31cIlxuICAgICAgICAgICAgYXJpYS1sYWJlbD1cIiR7eCA9PiB4LmFyaWFMYWJlbH1cIlxuICAgICAgICAgICAgYXJpYS1sYWJlbGxlZGJ5PVwiJHt4ID0+IHguYXJpYUxhYmVsbGVkYnl9XCJcbiAgICAgICAgICAgIGFyaWEtbGl2ZT1cIiR7eCA9PiB4LmFyaWFMaXZlfVwiXG4gICAgICAgICAgICBhcmlhLW93bnM9XCIke3ggPT4geC5hcmlhT3duc31cIlxuICAgICAgICAgICAgYXJpYS1yZWxldmFudD1cIiR7eCA9PiB4LmFyaWFSZWxldmFudH1cIlxuICAgICAgICAgICAgYXJpYS1yb2xlZGVzY3JpcHRpb249XCIke3ggPT4geC5hcmlhUm9sZWRlc2NyaXB0aW9ufVwiXG4gICAgICAgICAgICBAaW5wdXQ9XCIkeyh4LCBjKSA9PiB4LmhhbmRsZVRleHRJbnB1dCgpfVwiXG4gICAgICAgICAgICBAY2hhbmdlPVwiJHt4ID0+IHguaGFuZGxlQ2hhbmdlKCl9XCJcbiAgICAgICAgICAgICR7cmVmKFwiY29udHJvbFwiKX1cbiAgICAgICAgPjwvdGV4dGFyZWE+XG4gICAgPC90ZW1wbGF0ZT5cbmA7XG4iLCJleHBvcnQgKiBmcm9tIFwiLi90ZXh0LWZpZWxkLnRlbXBsYXRlLmpzXCI7XG5leHBvcnQgKiBmcm9tIFwiLi90ZXh0LWZpZWxkLmpzXCI7XG4iLCJpbXBvcnQgeyBGb3JtQXNzb2NpYXRlZCB9IGZyb20gXCIuLi9mb3JtLWFzc29jaWF0ZWQvZm9ybS1hc3NvY2lhdGVkLmpzXCI7XG5pbXBvcnQgeyBGb3VuZGF0aW9uRWxlbWVudCB9IGZyb20gXCIuLi9mb3VuZGF0aW9uLWVsZW1lbnQvZm91bmRhdGlvbi1lbGVtZW50LmpzXCI7XG5jbGFzcyBfVGV4dEZpZWxkIGV4dGVuZHMgRm91bmRhdGlvbkVsZW1lbnQge1xufVxuLyoqXG4gKiBBIGZvcm0tYXNzb2NpYXRlZCBiYXNlIGNsYXNzIGZvciB0aGUge0BsaW5rIEBtaWNyb3NvZnQvZmFzdC1mb3VuZGF0aW9uIyhUZXh0RmllbGQ6Y2xhc3MpfSBjb21wb25lbnQuXG4gKlxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCBjbGFzcyBGb3JtQXNzb2NpYXRlZFRleHRGaWVsZCBleHRlbmRzIEZvcm1Bc3NvY2lhdGVkKF9UZXh0RmllbGQpIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgdGhpcy5wcm94eSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBfX2RlY29yYXRlIH0gZnJvbSBcInRzbGliXCI7XG5pbXBvcnQgeyBhdHRyLCBET00sIG51bGxhYmxlTnVtYmVyQ29udmVydGVyLCBvYnNlcnZhYmxlIH0gZnJvbSBcIkBtaWNyb3NvZnQvZmFzdC1lbGVtZW50XCI7XG5pbXBvcnQgeyBBUklBR2xvYmFsU3RhdGVzQW5kUHJvcGVydGllcywgU3RhcnRFbmQsIH0gZnJvbSBcIi4uL3BhdHRlcm5zL2luZGV4LmpzXCI7XG5pbXBvcnQgeyBhcHBseU1peGlucyB9IGZyb20gXCIuLi91dGlsaXRpZXMvYXBwbHktbWl4aW5zLmpzXCI7XG5pbXBvcnQgeyBGb3JtQXNzb2NpYXRlZFRleHRGaWVsZCB9IGZyb20gXCIuL3RleHQtZmllbGQuZm9ybS1hc3NvY2lhdGVkLmpzXCI7XG5pbXBvcnQgeyBUZXh0RmllbGRUeXBlIH0gZnJvbSBcIi4vdGV4dC1maWVsZC5vcHRpb25zLmpzXCI7XG5leHBvcnQgeyBUZXh0RmllbGRUeXBlIH07XG4vKipcbiAqIEEgVGV4dCBGaWVsZCBDdXN0b20gSFRNTCBFbGVtZW50LlxuICogQmFzZWQgbGFyZ2VseSBvbiB0aGUge0BsaW5rIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0hUTUwvRWxlbWVudC9pbnB1dC90ZXh0IHwgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgLz4gZWxlbWVudCB9LlxuICpcbiAqIEBzbG90IHN0YXJ0IC0gQ29udGVudCB3aGljaCBjYW4gYmUgcHJvdmlkZWQgYmVmb3JlIHRoZSBudW1iZXIgZmllbGQgaW5wdXRcbiAqIEBzbG90IGVuZCAtIENvbnRlbnQgd2hpY2ggY2FuIGJlIHByb3ZpZGVkIGFmdGVyIHRoZSBudW1iZXIgZmllbGQgaW5wdXRcbiAqIEBzbG90IC0gVGhlIGRlZmF1bHQgc2xvdCBmb3IgdGhlIGxhYmVsXG4gKiBAY3NzcGFydCBsYWJlbCAtIFRoZSBsYWJlbFxuICogQGNzc3BhcnQgcm9vdCAtIFRoZSBlbGVtZW50IHdyYXBwaW5nIHRoZSBjb250cm9sLCBpbmNsdWRpbmcgc3RhcnQgYW5kIGVuZCBzbG90c1xuICogQGNzc3BhcnQgY29udHJvbCAtIFRoZSB0ZXh0IGZpZWxkIGVsZW1lbnRcbiAqIEBmaXJlcyBjaGFuZ2UgLSBGaXJlcyBhIGN1c3RvbSAnY2hhbmdlJyBldmVudCB3aGVuIHRoZSB2YWx1ZSBoYXMgY2hhbmdlZFxuICpcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGNsYXNzIFRleHRGaWVsZCBleHRlbmRzIEZvcm1Bc3NvY2lhdGVkVGV4dEZpZWxkIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEFsbG93cyBzZXR0aW5nIGEgdHlwZSBvciBtb2RlIG9mIHRleHQuXG4gICAgICAgICAqIEBwdWJsaWNcbiAgICAgICAgICogQHJlbWFya3NcbiAgICAgICAgICogSFRNTCBBdHRyaWJ1dGU6IHR5cGVcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMudHlwZSA9IFRleHRGaWVsZFR5cGUudGV4dDtcbiAgICB9XG4gICAgcmVhZE9ubHlDaGFuZ2VkKCkge1xuICAgICAgICBpZiAodGhpcy5wcm94eSBpbnN0YW5jZW9mIEhUTUxJbnB1dEVsZW1lbnQpIHtcbiAgICAgICAgICAgIHRoaXMucHJveHkucmVhZE9ubHkgPSB0aGlzLnJlYWRPbmx5O1xuICAgICAgICAgICAgdGhpcy52YWxpZGF0ZSgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGF1dG9mb2N1c0NoYW5nZWQoKSB7XG4gICAgICAgIGlmICh0aGlzLnByb3h5IGluc3RhbmNlb2YgSFRNTElucHV0RWxlbWVudCkge1xuICAgICAgICAgICAgdGhpcy5wcm94eS5hdXRvZm9jdXMgPSB0aGlzLmF1dG9mb2N1cztcbiAgICAgICAgICAgIHRoaXMudmFsaWRhdGUoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBwbGFjZWhvbGRlckNoYW5nZWQoKSB7XG4gICAgICAgIGlmICh0aGlzLnByb3h5IGluc3RhbmNlb2YgSFRNTElucHV0RWxlbWVudCkge1xuICAgICAgICAgICAgdGhpcy5wcm94eS5wbGFjZWhvbGRlciA9IHRoaXMucGxhY2Vob2xkZXI7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdHlwZUNoYW5nZWQoKSB7XG4gICAgICAgIGlmICh0aGlzLnByb3h5IGluc3RhbmNlb2YgSFRNTElucHV0RWxlbWVudCkge1xuICAgICAgICAgICAgdGhpcy5wcm94eS50eXBlID0gdGhpcy50eXBlO1xuICAgICAgICAgICAgdGhpcy52YWxpZGF0ZSgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGxpc3RDaGFuZ2VkKCkge1xuICAgICAgICBpZiAodGhpcy5wcm94eSBpbnN0YW5jZW9mIEhUTUxJbnB1dEVsZW1lbnQpIHtcbiAgICAgICAgICAgIHRoaXMucHJveHkuc2V0QXR0cmlidXRlKFwibGlzdFwiLCB0aGlzLmxpc3QpO1xuICAgICAgICAgICAgdGhpcy52YWxpZGF0ZSgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIG1heGxlbmd0aENoYW5nZWQoKSB7XG4gICAgICAgIGlmICh0aGlzLnByb3h5IGluc3RhbmNlb2YgSFRNTElucHV0RWxlbWVudCkge1xuICAgICAgICAgICAgdGhpcy5wcm94eS5tYXhMZW5ndGggPSB0aGlzLm1heGxlbmd0aDtcbiAgICAgICAgICAgIHRoaXMudmFsaWRhdGUoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBtaW5sZW5ndGhDaGFuZ2VkKCkge1xuICAgICAgICBpZiAodGhpcy5wcm94eSBpbnN0YW5jZW9mIEhUTUxJbnB1dEVsZW1lbnQpIHtcbiAgICAgICAgICAgIHRoaXMucHJveHkubWluTGVuZ3RoID0gdGhpcy5taW5sZW5ndGg7XG4gICAgICAgICAgICB0aGlzLnZhbGlkYXRlKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcGF0dGVybkNoYW5nZWQoKSB7XG4gICAgICAgIGlmICh0aGlzLnByb3h5IGluc3RhbmNlb2YgSFRNTElucHV0RWxlbWVudCkge1xuICAgICAgICAgICAgdGhpcy5wcm94eS5wYXR0ZXJuID0gdGhpcy5wYXR0ZXJuO1xuICAgICAgICAgICAgdGhpcy52YWxpZGF0ZSgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHNpemVDaGFuZ2VkKCkge1xuICAgICAgICBpZiAodGhpcy5wcm94eSBpbnN0YW5jZW9mIEhUTUxJbnB1dEVsZW1lbnQpIHtcbiAgICAgICAgICAgIHRoaXMucHJveHkuc2l6ZSA9IHRoaXMuc2l6ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzcGVsbGNoZWNrQ2hhbmdlZCgpIHtcbiAgICAgICAgaWYgKHRoaXMucHJveHkgaW5zdGFuY2VvZiBIVE1MSW5wdXRFbGVtZW50KSB7XG4gICAgICAgICAgICB0aGlzLnByb3h5LnNwZWxsY2hlY2sgPSB0aGlzLnNwZWxsY2hlY2s7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgICAgIHN1cGVyLmNvbm5lY3RlZENhbGxiYWNrKCk7XG4gICAgICAgIHRoaXMucHJveHkuc2V0QXR0cmlidXRlKFwidHlwZVwiLCB0aGlzLnR5cGUpO1xuICAgICAgICB0aGlzLnZhbGlkYXRlKCk7XG4gICAgICAgIGlmICh0aGlzLmF1dG9mb2N1cykge1xuICAgICAgICAgICAgRE9NLnF1ZXVlVXBkYXRlKCgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmZvY3VzKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZWxlY3RzIGFsbCB0aGUgdGV4dCBpbiB0aGUgdGV4dCBmaWVsZFxuICAgICAqXG4gICAgICogQHB1YmxpY1xuICAgICAqL1xuICAgIHNlbGVjdCgpIHtcbiAgICAgICAgdGhpcy5jb250cm9sLnNlbGVjdCgpO1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIHNlbGVjdCBldmVudCBkb2VzIG5vdCBwZXJtZWF0ZSB0aGUgc2hhZG93IERPTSBib3VuZGFyeS5cbiAgICAgICAgICogVGhpcyBmbiBlZmZlY3RpdmVseSBwcm94aWVzIHRoZSBzZWxlY3QgZXZlbnQsXG4gICAgICAgICAqIGVtaXR0aW5nIGEgYHNlbGVjdGAgZXZlbnQgd2hlbmV2ZXIgdGhlIGludGVybmFsXG4gICAgICAgICAqIGNvbnRyb2wgZW1pdHMgYSBgc2VsZWN0YCBldmVudFxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy4kZW1pdChcInNlbGVjdFwiKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSGFuZGxlcyB0aGUgaW50ZXJuYWwgY29udHJvbCdzIGBpbnB1dGAgZXZlbnRcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBoYW5kbGVUZXh0SW5wdXQoKSB7XG4gICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLmNvbnRyb2wudmFsdWU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENoYW5nZSBldmVudCBoYW5kbGVyIGZvciBpbm5lciBjb250cm9sLlxuICAgICAqIEByZW1hcmtzXG4gICAgICogXCJDaGFuZ2VcIiBldmVudHMgYXJlIG5vdCBgY29tcG9zYWJsZWAgc28gdGhleSB3aWxsIG5vdFxuICAgICAqIHBlcm1lYXRlIHRoZSBzaGFkb3cgRE9NIGJvdW5kYXJ5LiBUaGlzIGZuIGVmZmVjdGl2ZWx5IHByb3hpZXNcbiAgICAgKiB0aGUgY2hhbmdlIGV2ZW50LCBlbWl0dGluZyBhIGBjaGFuZ2VgIGV2ZW50IHdoZW5ldmVyIHRoZSBpbnRlcm5hbFxuICAgICAqIGNvbnRyb2wgZW1pdHMgYSBgY2hhbmdlYCBldmVudFxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIGhhbmRsZUNoYW5nZSgpIHtcbiAgICAgICAgdGhpcy4kZW1pdChcImNoYW5nZVwiKTtcbiAgICB9XG4gICAgLyoqIHtAaW5oZXJpdERvYyAoRm9ybUFzc29jaWF0ZWQ6aW50ZXJmYWNlKS52YWxpZGF0ZX0gKi9cbiAgICB2YWxpZGF0ZSgpIHtcbiAgICAgICAgc3VwZXIudmFsaWRhdGUodGhpcy5jb250cm9sKTtcbiAgICB9XG59XG5fX2RlY29yYXRlKFtcbiAgICBhdHRyKHsgYXR0cmlidXRlOiBcInJlYWRvbmx5XCIsIG1vZGU6IFwiYm9vbGVhblwiIH0pXG5dLCBUZXh0RmllbGQucHJvdG90eXBlLCBcInJlYWRPbmx5XCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBhdHRyKHsgbW9kZTogXCJib29sZWFuXCIgfSlcbl0sIFRleHRGaWVsZC5wcm90b3R5cGUsIFwiYXV0b2ZvY3VzXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBhdHRyXG5dLCBUZXh0RmllbGQucHJvdG90eXBlLCBcInBsYWNlaG9sZGVyXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBhdHRyXG5dLCBUZXh0RmllbGQucHJvdG90eXBlLCBcInR5cGVcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIGF0dHJcbl0sIFRleHRGaWVsZC5wcm90b3R5cGUsIFwibGlzdFwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgYXR0cih7IGNvbnZlcnRlcjogbnVsbGFibGVOdW1iZXJDb252ZXJ0ZXIgfSlcbl0sIFRleHRGaWVsZC5wcm90b3R5cGUsIFwibWF4bGVuZ3RoXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBhdHRyKHsgY29udmVydGVyOiBudWxsYWJsZU51bWJlckNvbnZlcnRlciB9KVxuXSwgVGV4dEZpZWxkLnByb3RvdHlwZSwgXCJtaW5sZW5ndGhcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIGF0dHJcbl0sIFRleHRGaWVsZC5wcm90b3R5cGUsIFwicGF0dGVyblwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgYXR0cih7IGNvbnZlcnRlcjogbnVsbGFibGVOdW1iZXJDb252ZXJ0ZXIgfSlcbl0sIFRleHRGaWVsZC5wcm90b3R5cGUsIFwic2l6ZVwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgYXR0cih7IG1vZGU6IFwiYm9vbGVhblwiIH0pXG5dLCBUZXh0RmllbGQucHJvdG90eXBlLCBcInNwZWxsY2hlY2tcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIG9ic2VydmFibGVcbl0sIFRleHRGaWVsZC5wcm90b3R5cGUsIFwiZGVmYXVsdFNsb3R0ZWROb2Rlc1wiLCB2b2lkIDApO1xuLyoqXG4gKiBJbmNsdWRlcyBBUklBIHN0YXRlcyBhbmQgcHJvcGVydGllcyByZWxhdGluZyB0byB0aGUgQVJJQSB0ZXh0Ym94IHJvbGVcbiAqXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjbGFzcyBEZWxlZ2F0ZXNBUklBVGV4dGJveCB7XG59XG5hcHBseU1peGlucyhEZWxlZ2F0ZXNBUklBVGV4dGJveCwgQVJJQUdsb2JhbFN0YXRlc0FuZFByb3BlcnRpZXMpO1xuYXBwbHlNaXhpbnMoVGV4dEZpZWxkLCBTdGFydEVuZCwgRGVsZWdhdGVzQVJJQVRleHRib3gpO1xuIiwiLyoqXG4gKiBUZXh0IGZpZWxkIHN1Yi10eXBlc1xuICogQHB1YmxpY1xuICovXG5leHBvcnQgY29uc3QgVGV4dEZpZWxkVHlwZSA9IHtcbiAgICAvKipcbiAgICAgKiBBbiBlbWFpbCBUZXh0RmllbGRcbiAgICAgKi9cbiAgICBlbWFpbDogXCJlbWFpbFwiLFxuICAgIC8qKlxuICAgICAqIEEgcGFzc3dvcmQgVGV4dEZpZWxkXG4gICAgICovXG4gICAgcGFzc3dvcmQ6IFwicGFzc3dvcmRcIixcbiAgICAvKipcbiAgICAgKiBBIHRlbGVwaG9uZSBUZXh0RmllbGRcbiAgICAgKi9cbiAgICB0ZWw6IFwidGVsXCIsXG4gICAgLyoqXG4gICAgICogQSB0ZXh0IFRleHRGaWVsZFxuICAgICAqL1xuICAgIHRleHQ6IFwidGV4dFwiLFxuICAgIC8qKlxuICAgICAqIEEgVVJMIFRleHRGaWVsZFxuICAgICAqL1xuICAgIHVybDogXCJ1cmxcIixcbn07XG4iLCJpbXBvcnQgeyBodG1sLCByZWYsIHNsb3R0ZWQgfSBmcm9tIFwiQG1pY3Jvc29mdC9mYXN0LWVsZW1lbnRcIjtcbmltcG9ydCB7IGVuZFNsb3RUZW1wbGF0ZSwgc3RhcnRTbG90VGVtcGxhdGUgfSBmcm9tIFwiLi4vcGF0dGVybnMvc3RhcnQtZW5kLmpzXCI7XG5pbXBvcnQgeyB3aGl0ZXNwYWNlRmlsdGVyIH0gZnJvbSBcIi4uL3V0aWxpdGllcy93aGl0ZXNwYWNlLWZpbHRlci5qc1wiO1xuLyoqXG4gKiBUaGUgdGVtcGxhdGUgZm9yIHRoZSB7QGxpbmsgQG1pY3Jvc29mdC9mYXN0LWZvdW5kYXRpb24jKFRleHRGaWVsZDpjbGFzcyl9IGNvbXBvbmVudC5cbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGNvbnN0IHRleHRGaWVsZFRlbXBsYXRlID0gKGNvbnRleHQsIGRlZmluaXRpb24pID0+IGh0bWwgYFxuICAgIDx0ZW1wbGF0ZVxuICAgICAgICBjbGFzcz1cIlxuICAgICAgICAgICAgJHt4ID0+ICh4LnJlYWRPbmx5ID8gXCJyZWFkb25seVwiIDogXCJcIil9XG4gICAgICAgIFwiXG4gICAgPlxuICAgICAgICA8bGFiZWxcbiAgICAgICAgICAgIHBhcnQ9XCJsYWJlbFwiXG4gICAgICAgICAgICBmb3I9XCJjb250cm9sXCJcbiAgICAgICAgICAgIGNsYXNzPVwiJHt4ID0+IHguZGVmYXVsdFNsb3R0ZWROb2RlcyAmJiB4LmRlZmF1bHRTbG90dGVkTm9kZXMubGVuZ3RoXG4gICAgPyBcImxhYmVsXCJcbiAgICA6IFwibGFiZWwgbGFiZWxfX2hpZGRlblwifVwiXG4gICAgICAgID5cbiAgICAgICAgICAgIDxzbG90XG4gICAgICAgICAgICAgICAgJHtzbG90dGVkKHsgcHJvcGVydHk6IFwiZGVmYXVsdFNsb3R0ZWROb2Rlc1wiLCBmaWx0ZXI6IHdoaXRlc3BhY2VGaWx0ZXIgfSl9XG4gICAgICAgICAgICA+PC9zbG90PlxuICAgICAgICA8L2xhYmVsPlxuICAgICAgICA8ZGl2IGNsYXNzPVwicm9vdFwiIHBhcnQ9XCJyb290XCI+XG4gICAgICAgICAgICAke3N0YXJ0U2xvdFRlbXBsYXRlKGNvbnRleHQsIGRlZmluaXRpb24pfVxuICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgICAgY2xhc3M9XCJjb250cm9sXCJcbiAgICAgICAgICAgICAgICBwYXJ0PVwiY29udHJvbFwiXG4gICAgICAgICAgICAgICAgaWQ9XCJjb250cm9sXCJcbiAgICAgICAgICAgICAgICBAaW5wdXQ9XCIke3ggPT4geC5oYW5kbGVUZXh0SW5wdXQoKX1cIlxuICAgICAgICAgICAgICAgIEBjaGFuZ2U9XCIke3ggPT4geC5oYW5kbGVDaGFuZ2UoKX1cIlxuICAgICAgICAgICAgICAgID9hdXRvZm9jdXM9XCIke3ggPT4geC5hdXRvZm9jdXN9XCJcbiAgICAgICAgICAgICAgICA/ZGlzYWJsZWQ9XCIke3ggPT4geC5kaXNhYmxlZH1cIlxuICAgICAgICAgICAgICAgIGxpc3Q9XCIke3ggPT4geC5saXN0fVwiXG4gICAgICAgICAgICAgICAgbWF4bGVuZ3RoPVwiJHt4ID0+IHgubWF4bGVuZ3RofVwiXG4gICAgICAgICAgICAgICAgbWlubGVuZ3RoPVwiJHt4ID0+IHgubWlubGVuZ3RofVwiXG4gICAgICAgICAgICAgICAgcGF0dGVybj1cIiR7eCA9PiB4LnBhdHRlcm59XCJcbiAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIiR7eCA9PiB4LnBsYWNlaG9sZGVyfVwiXG4gICAgICAgICAgICAgICAgP3JlYWRvbmx5PVwiJHt4ID0+IHgucmVhZE9ubHl9XCJcbiAgICAgICAgICAgICAgICA/cmVxdWlyZWQ9XCIke3ggPT4geC5yZXF1aXJlZH1cIlxuICAgICAgICAgICAgICAgIHNpemU9XCIke3ggPT4geC5zaXplfVwiXG4gICAgICAgICAgICAgICAgP3NwZWxsY2hlY2s9XCIke3ggPT4geC5zcGVsbGNoZWNrfVwiXG4gICAgICAgICAgICAgICAgOnZhbHVlPVwiJHt4ID0+IHgudmFsdWV9XCJcbiAgICAgICAgICAgICAgICB0eXBlPVwiJHt4ID0+IHgudHlwZX1cIlxuICAgICAgICAgICAgICAgIGFyaWEtYXRvbWljPVwiJHt4ID0+IHguYXJpYUF0b21pY31cIlxuICAgICAgICAgICAgICAgIGFyaWEtYnVzeT1cIiR7eCA9PiB4LmFyaWFCdXN5fVwiXG4gICAgICAgICAgICAgICAgYXJpYS1jb250cm9scz1cIiR7eCA9PiB4LmFyaWFDb250cm9sc31cIlxuICAgICAgICAgICAgICAgIGFyaWEtY3VycmVudD1cIiR7eCA9PiB4LmFyaWFDdXJyZW50fVwiXG4gICAgICAgICAgICAgICAgYXJpYS1kZXNjcmliZWRieT1cIiR7eCA9PiB4LmFyaWFEZXNjcmliZWRieX1cIlxuICAgICAgICAgICAgICAgIGFyaWEtZGV0YWlscz1cIiR7eCA9PiB4LmFyaWFEZXRhaWxzfVwiXG4gICAgICAgICAgICAgICAgYXJpYS1kaXNhYmxlZD1cIiR7eCA9PiB4LmFyaWFEaXNhYmxlZH1cIlxuICAgICAgICAgICAgICAgIGFyaWEtZXJyb3JtZXNzYWdlPVwiJHt4ID0+IHguYXJpYUVycm9ybWVzc2FnZX1cIlxuICAgICAgICAgICAgICAgIGFyaWEtZmxvd3RvPVwiJHt4ID0+IHguYXJpYUZsb3d0b31cIlxuICAgICAgICAgICAgICAgIGFyaWEtaGFzcG9wdXA9XCIke3ggPT4geC5hcmlhSGFzcG9wdXB9XCJcbiAgICAgICAgICAgICAgICBhcmlhLWhpZGRlbj1cIiR7eCA9PiB4LmFyaWFIaWRkZW59XCJcbiAgICAgICAgICAgICAgICBhcmlhLWludmFsaWQ9XCIke3ggPT4geC5hcmlhSW52YWxpZH1cIlxuICAgICAgICAgICAgICAgIGFyaWEta2V5c2hvcnRjdXRzPVwiJHt4ID0+IHguYXJpYUtleXNob3J0Y3V0c31cIlxuICAgICAgICAgICAgICAgIGFyaWEtbGFiZWw9XCIke3ggPT4geC5hcmlhTGFiZWx9XCJcbiAgICAgICAgICAgICAgICBhcmlhLWxhYmVsbGVkYnk9XCIke3ggPT4geC5hcmlhTGFiZWxsZWRieX1cIlxuICAgICAgICAgICAgICAgIGFyaWEtbGl2ZT1cIiR7eCA9PiB4LmFyaWFMaXZlfVwiXG4gICAgICAgICAgICAgICAgYXJpYS1vd25zPVwiJHt4ID0+IHguYXJpYU93bnN9XCJcbiAgICAgICAgICAgICAgICBhcmlhLXJlbGV2YW50PVwiJHt4ID0+IHguYXJpYVJlbGV2YW50fVwiXG4gICAgICAgICAgICAgICAgYXJpYS1yb2xlZGVzY3JpcHRpb249XCIke3ggPT4geC5hcmlhUm9sZWRlc2NyaXB0aW9ufVwiXG4gICAgICAgICAgICAgICAgJHtyZWYoXCJjb250cm9sXCIpfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICR7ZW5kU2xvdFRlbXBsYXRlKGNvbnRleHQsIGRlZmluaXRpb24pfVxuICAgICAgICA8L2Rpdj5cbiAgICA8L3RlbXBsYXRlPlxuYDtcbiIsImV4cG9ydCAqIGZyb20gXCIuL3Rvb2xiYXIudGVtcGxhdGUuanNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL3Rvb2xiYXIuanNcIjtcbiIsImltcG9ydCB7IF9fZGVjb3JhdGUgfSBmcm9tIFwidHNsaWJcIjtcbmltcG9ydCB7IGF0dHIsIG9ic2VydmFibGUsIE9ic2VydmFibGUgfSBmcm9tIFwiQG1pY3Jvc29mdC9mYXN0LWVsZW1lbnRcIjtcbmltcG9ydCB7IEFycm93S2V5cywgRGlyZWN0aW9uLCBsaW1pdCwgT3JpZW50YXRpb24gfSBmcm9tIFwiQG1pY3Jvc29mdC9mYXN0LXdlYi11dGlsaXRpZXNcIjtcbmltcG9ydCB7IGlzRm9jdXNhYmxlIH0gZnJvbSBcInRhYmJhYmxlXCI7XG5pbXBvcnQgeyBGb3VuZGF0aW9uRWxlbWVudCwgfSBmcm9tIFwiLi4vZm91bmRhdGlvbi1lbGVtZW50L2ZvdW5kYXRpb24tZWxlbWVudC5qc1wiO1xuaW1wb3J0IHsgQVJJQUdsb2JhbFN0YXRlc0FuZFByb3BlcnRpZXMgfSBmcm9tIFwiLi4vcGF0dGVybnMvYXJpYS1nbG9iYWwuanNcIjtcbmltcG9ydCB7IFN0YXJ0RW5kIH0gZnJvbSBcIi4uL3BhdHRlcm5zL3N0YXJ0LWVuZC5qc1wiO1xuaW1wb3J0IHsgYXBwbHlNaXhpbnMgfSBmcm9tIFwiLi4vdXRpbGl0aWVzL2FwcGx5LW1peGlucy5qc1wiO1xuaW1wb3J0IHsgZ2V0RGlyZWN0aW9uIH0gZnJvbSBcIi4uL3V0aWxpdGllcy9kaXJlY3Rpb24uanNcIjtcbi8qKlxuICogQSBtYXAgZm9yIGRpcmVjdGlvbmFsaXR5IGRlcml2ZWQgZnJvbSBrZXlib2FyZCBpbnB1dCBzdHJpbmdzLFxuICogdmlzdWFsIG9yaWVudGF0aW9uLCBhbmQgdGV4dCBkaXJlY3Rpb24uXG4gKlxuICogQGludGVybmFsXG4gKi9cbmNvbnN0IFRvb2xiYXJBcnJvd0tleU1hcCA9IE9iamVjdC5mcmVlemUoe1xuICAgIFtBcnJvd0tleXMuQXJyb3dVcF06IHtcbiAgICAgICAgW09yaWVudGF0aW9uLnZlcnRpY2FsXTogLTEsXG4gICAgfSxcbiAgICBbQXJyb3dLZXlzLkFycm93RG93bl06IHtcbiAgICAgICAgW09yaWVudGF0aW9uLnZlcnRpY2FsXTogMSxcbiAgICB9LFxuICAgIFtBcnJvd0tleXMuQXJyb3dMZWZ0XToge1xuICAgICAgICBbT3JpZW50YXRpb24uaG9yaXpvbnRhbF06IHtcbiAgICAgICAgICAgIFtEaXJlY3Rpb24ubHRyXTogLTEsXG4gICAgICAgICAgICBbRGlyZWN0aW9uLnJ0bF06IDEsXG4gICAgICAgIH0sXG4gICAgfSxcbiAgICBbQXJyb3dLZXlzLkFycm93UmlnaHRdOiB7XG4gICAgICAgIFtPcmllbnRhdGlvbi5ob3Jpem9udGFsXToge1xuICAgICAgICAgICAgW0RpcmVjdGlvbi5sdHJdOiAxLFxuICAgICAgICAgICAgW0RpcmVjdGlvbi5ydGxdOiAtMSxcbiAgICAgICAgfSxcbiAgICB9LFxufSk7XG4vKipcbiAqIEEgVG9vbGJhciBDdXN0b20gSFRNTCBFbGVtZW50LlxuICogSW1wbGVtZW50cyB0aGUge0BsaW5rIGh0dHBzOi8vdzNjLmdpdGh1Yi5pby9hcmlhLXByYWN0aWNlcy8jVG9vbGJhcnxBUklBIFRvb2xiYXJ9LlxuICpcbiAqIEBzbG90IHN0YXJ0IC0gQ29udGVudCB3aGljaCBjYW4gYmUgcHJvdmlkZWQgYmVmb3JlIHRoZSBzbG90dGVkIGl0ZW1zXG4gKiBAc2xvdCBlbmQgLSBDb250ZW50IHdoaWNoIGNhbiBiZSBwcm92aWRlZCBhZnRlciB0aGUgc2xvdHRlZCBpdGVtc1xuICogQHNsb3QgLSBUaGUgZGVmYXVsdCBzbG90IGZvciBzbG90dGVkIGl0ZW1zXG4gKiBAc2xvdCBsYWJlbCAtIFRoZSB0b29sYmFyIGxhYmVsXG4gKiBAY3NzcGFydCBwb3NpdGlvbmluZy1yZWdpb24gLSBUaGUgZWxlbWVudCBjb250YWluaW5nIHRoZSBpdGVtcywgc3RhcnQgYW5kIGVuZCBzbG90c1xuICpcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGNsYXNzIFRvb2xiYXIgZXh0ZW5kcyBGb3VuZGF0aW9uRWxlbWVudCB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgaW50ZXJuYWwgaW5kZXggb2YgdGhlIGN1cnJlbnRseSBmb2N1c2VkIGVsZW1lbnQuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBpbnRlcm5hbFxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5fYWN0aXZlSW5kZXggPSAwO1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIHRleHQgZGlyZWN0aW9uIG9mIHRoZSB0b29sYmFyLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAaW50ZXJuYWxcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZGlyZWN0aW9uID0gRGlyZWN0aW9uLmx0cjtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBvcmllbnRhdGlvbiBvZiB0aGUgdG9vbGJhci5cbiAgICAgICAgICpcbiAgICAgICAgICogQHB1YmxpY1xuICAgICAgICAgKiBAcmVtYXJrc1xuICAgICAgICAgKiBIVE1MIEF0dHJpYnV0ZTogYG9yaWVudGF0aW9uYFxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5vcmllbnRhdGlvbiA9IE9yaWVudGF0aW9uLmhvcml6b250YWw7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBpbmRleCBvZiB0aGUgY3VycmVudGx5IGZvY3VzZWQgZWxlbWVudCwgY2xhbXBlZCBiZXR3ZWVuIDAgYW5kIHRoZSBsYXN0IGVsZW1lbnQuXG4gICAgICpcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBnZXQgYWN0aXZlSW5kZXgoKSB7XG4gICAgICAgIE9ic2VydmFibGUudHJhY2sodGhpcywgXCJhY3RpdmVJbmRleFwiKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FjdGl2ZUluZGV4O1xuICAgIH1cbiAgICBzZXQgYWN0aXZlSW5kZXgodmFsdWUpIHtcbiAgICAgICAgaWYgKHRoaXMuJGZhc3RDb250cm9sbGVyLmlzQ29ubmVjdGVkKSB7XG4gICAgICAgICAgICB0aGlzLl9hY3RpdmVJbmRleCA9IGxpbWl0KDAsIHRoaXMuZm9jdXNhYmxlRWxlbWVudHMubGVuZ3RoIC0gMSwgdmFsdWUpO1xuICAgICAgICAgICAgT2JzZXJ2YWJsZS5ub3RpZnkodGhpcywgXCJhY3RpdmVJbmRleFwiKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzbG90dGVkSXRlbXNDaGFuZ2VkKCkge1xuICAgICAgICBpZiAodGhpcy4kZmFzdENvbnRyb2xsZXIuaXNDb25uZWN0ZWQpIHtcbiAgICAgICAgICAgIHRoaXMucmVkdWNlRm9jdXNhYmxlRWxlbWVudHMoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIGFjdGl2ZUluZGV4IHdoZW4gYSBmb2N1c2FibGUgZWxlbWVudCBpbiB0aGUgdG9vbGJhciBpcyBjbGlja2VkLlxuICAgICAqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgbW91c2VEb3duSGFuZGxlcihlKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgY29uc3QgYWN0aXZlSW5kZXggPSAoX2EgPSB0aGlzLmZvY3VzYWJsZUVsZW1lbnRzKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuZmluZEluZGV4KHggPT4geC5jb250YWlucyhlLnRhcmdldCkpO1xuICAgICAgICBpZiAoYWN0aXZlSW5kZXggPiAtMSAmJiB0aGlzLmFjdGl2ZUluZGV4ICE9PSBhY3RpdmVJbmRleCkge1xuICAgICAgICAgICAgdGhpcy5zZXRGb2N1c2VkRWxlbWVudChhY3RpdmVJbmRleCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGNoaWxkSXRlbXNDaGFuZ2VkKHByZXYsIG5leHQpIHtcbiAgICAgICAgaWYgKHRoaXMuJGZhc3RDb250cm9sbGVyLmlzQ29ubmVjdGVkKSB7XG4gICAgICAgICAgICB0aGlzLnJlZHVjZUZvY3VzYWJsZUVsZW1lbnRzKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgICAgIHN1cGVyLmNvbm5lY3RlZENhbGxiYWNrKCk7XG4gICAgICAgIHRoaXMuZGlyZWN0aW9uID0gZ2V0RGlyZWN0aW9uKHRoaXMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBXaGVuIHRoZSB0b29sYmFyIHJlY2VpdmVzIGZvY3VzLCBzZXQgdGhlIGN1cnJlbnRseSBhY3RpdmUgZWxlbWVudCBhcyBmb2N1c2VkLlxuICAgICAqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgZm9jdXNpbkhhbmRsZXIoZSkge1xuICAgICAgICBjb25zdCByZWxhdGVkVGFyZ2V0ID0gZS5yZWxhdGVkVGFyZ2V0O1xuICAgICAgICBpZiAoIXJlbGF0ZWRUYXJnZXQgfHwgdGhpcy5jb250YWlucyhyZWxhdGVkVGFyZ2V0KSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc2V0Rm9jdXNlZEVsZW1lbnQoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRGV0ZXJtaW5lcyBhIHZhbHVlIHRoYXQgY2FuIGJlIHVzZWQgdG8gaXRlcmF0ZSBhIGxpc3Qgd2l0aCB0aGUgYXJyb3cga2V5cy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB0aGlzIC0gQW4gZWxlbWVudCB3aXRoIGFuIG9yaWVudGF0aW9uIGFuZCBkaXJlY3Rpb25cbiAgICAgKiBAcGFyYW0ga2V5IC0gVGhlIGV2ZW50IGtleSB2YWx1ZVxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIGdldERpcmVjdGlvbmFsSW5jcmVtZW50ZXIoa2V5KSB7XG4gICAgICAgIHZhciBfYSwgX2IsIF9jLCBfZCwgX2U7XG4gICAgICAgIHJldHVybiAoKF9lID0gKF9jID0gKF9iID0gKF9hID0gVG9vbGJhckFycm93S2V5TWFwW2tleV0pID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYVt0aGlzLm9yaWVudGF0aW9uXSkgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iW3RoaXMuZGlyZWN0aW9uXSkgIT09IG51bGwgJiYgX2MgIT09IHZvaWQgMCA/IF9jIDogKF9kID0gVG9vbGJhckFycm93S2V5TWFwW2tleV0pID09PSBudWxsIHx8IF9kID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZFt0aGlzLm9yaWVudGF0aW9uXSkgIT09IG51bGwgJiYgX2UgIT09IHZvaWQgMCA/IF9lIDogMCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEhhbmRsZSBrZXlib2FyZCBldmVudHMgZm9yIHRoZSB0b29sYmFyLlxuICAgICAqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAga2V5ZG93bkhhbmRsZXIoZSkge1xuICAgICAgICBjb25zdCBrZXkgPSBlLmtleTtcbiAgICAgICAgaWYgKCEoa2V5IGluIEFycm93S2V5cykgfHwgZS5kZWZhdWx0UHJldmVudGVkIHx8IGUuc2hpZnRLZXkpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGluY3JlbWVudGVyID0gdGhpcy5nZXREaXJlY3Rpb25hbEluY3JlbWVudGVyKGtleSk7XG4gICAgICAgIGlmICghaW5jcmVtZW50ZXIpIHtcbiAgICAgICAgICAgIHJldHVybiAhZS50YXJnZXQuY2xvc2VzdChcIltyb2xlPXJhZGlvZ3JvdXBdXCIpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG5leHRJbmRleCA9IHRoaXMuYWN0aXZlSW5kZXggKyBpbmNyZW1lbnRlcjtcbiAgICAgICAgaWYgKHRoaXMuZm9jdXNhYmxlRWxlbWVudHNbbmV4dEluZGV4XSkge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc2V0Rm9jdXNlZEVsZW1lbnQobmV4dEluZGV4KTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIGdldCBhbGwgdGhlIHNsb3R0ZWQgZWxlbWVudHNcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBnZXQgYWxsU2xvdHRlZEl0ZW1zKCkge1xuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgLi4udGhpcy5zdGFydC5hc3NpZ25lZEVsZW1lbnRzKCksXG4gICAgICAgICAgICAuLi50aGlzLnNsb3R0ZWRJdGVtcyxcbiAgICAgICAgICAgIC4uLnRoaXMuZW5kLmFzc2lnbmVkRWxlbWVudHMoKSxcbiAgICAgICAgXTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUHJlcGFyZSB0aGUgc2xvdHRlZCBlbGVtZW50cyB3aGljaCBjYW4gYmUgZm9jdXNhYmxlLlxuICAgICAqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgcmVkdWNlRm9jdXNhYmxlRWxlbWVudHMoKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgY29uc3QgcHJldmlvdXNGb2N1c2VkRWxlbWVudCA9IChfYSA9IHRoaXMuZm9jdXNhYmxlRWxlbWVudHMpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYVt0aGlzLmFjdGl2ZUluZGV4XTtcbiAgICAgICAgdGhpcy5mb2N1c2FibGVFbGVtZW50cyA9IHRoaXMuYWxsU2xvdHRlZEl0ZW1zLnJlZHVjZShUb29sYmFyLnJlZHVjZUZvY3VzYWJsZUl0ZW1zLCBbXSk7XG4gICAgICAgIC8vIElmIHRoZSBwcmV2aW91c2x5IGFjdGl2ZSBpdGVtIGlzIHN0aWxsIGZvY3VzYWJsZSwgYWRqdXN0IHRoZSBhY3RpdmUgaW5kZXggdG8gdGhlXG4gICAgICAgIC8vIGluZGV4IG9mIHRoYXQgaXRlbS5cbiAgICAgICAgY29uc3QgYWRqdXN0ZWRBY3RpdmVJbmRleCA9IHRoaXMuZm9jdXNhYmxlRWxlbWVudHMuaW5kZXhPZihwcmV2aW91c0ZvY3VzZWRFbGVtZW50KTtcbiAgICAgICAgdGhpcy5hY3RpdmVJbmRleCA9IE1hdGgubWF4KDAsIGFkanVzdGVkQWN0aXZlSW5kZXgpO1xuICAgICAgICB0aGlzLnNldEZvY3VzYWJsZUVsZW1lbnRzKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldCB0aGUgYWN0aXZlSW5kZXggYW5kIGZvY3VzIHRoZSBjb3JyZXNwb25kaW5nIGNvbnRyb2wuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gYWN0aXZlSW5kZXggLSBUaGUgbmV3IGluZGV4IHRvIHNldFxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIHNldEZvY3VzZWRFbGVtZW50KGFjdGl2ZUluZGV4ID0gdGhpcy5hY3RpdmVJbmRleCkge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIHRoaXMuYWN0aXZlSW5kZXggPSBhY3RpdmVJbmRleDtcbiAgICAgICAgdGhpcy5zZXRGb2N1c2FibGVFbGVtZW50cygpO1xuICAgICAgICAoX2EgPSB0aGlzLmZvY3VzYWJsZUVsZW1lbnRzW3RoaXMuYWN0aXZlSW5kZXhdKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuZm9jdXMoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVkdWNlIGEgY29sbGVjdGlvbiB0byBvbmx5IGl0cyBmb2N1c2FibGUgZWxlbWVudHMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZWxlbWVudHMgLSBDb2xsZWN0aW9uIG9mIGVsZW1lbnRzIHRvIHJlZHVjZVxuICAgICAqIEBwYXJhbSBlbGVtZW50IC0gVGhlIGN1cnJlbnQgZWxlbWVudFxuICAgICAqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgc3RhdGljIHJlZHVjZUZvY3VzYWJsZUl0ZW1zKGVsZW1lbnRzLCBlbGVtZW50KSB7XG4gICAgICAgIHZhciBfYSwgX2IsIF9jLCBfZDtcbiAgICAgICAgY29uc3QgaXNSb2xlUmFkaW8gPSBlbGVtZW50LmdldEF0dHJpYnV0ZShcInJvbGVcIikgPT09IFwicmFkaW9cIjtcbiAgICAgICAgY29uc3QgaXNGb2N1c2FibGVGYXN0RWxlbWVudCA9IChfYiA9IChfYSA9IGVsZW1lbnQuJGZhc3RDb250cm9sbGVyKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuZGVmaW5pdGlvbi5zaGFkb3dPcHRpb25zKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IuZGVsZWdhdGVzRm9jdXM7XG4gICAgICAgIGNvbnN0IGhhc0ZvY3VzYWJsZVNoYWRvdyA9IEFycmF5LmZyb20oKF9kID0gKF9jID0gZWxlbWVudC5zaGFkb3dSb290KSA9PT0gbnVsbCB8fCBfYyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2MucXVlcnlTZWxlY3RvckFsbChcIipcIikpICE9PSBudWxsICYmIF9kICE9PSB2b2lkIDAgPyBfZCA6IFtdKS5zb21lKHggPT4gaXNGb2N1c2FibGUoeCkpO1xuICAgICAgICBpZiAoIWVsZW1lbnQuaGFzQXR0cmlidXRlKFwiZGlzYWJsZWRcIikgJiZcbiAgICAgICAgICAgICFlbGVtZW50Lmhhc0F0dHJpYnV0ZShcImhpZGRlblwiKSAmJlxuICAgICAgICAgICAgKGlzRm9jdXNhYmxlKGVsZW1lbnQpIHx8XG4gICAgICAgICAgICAgICAgaXNSb2xlUmFkaW8gfHxcbiAgICAgICAgICAgICAgICBpc0ZvY3VzYWJsZUZhc3RFbGVtZW50IHx8XG4gICAgICAgICAgICAgICAgaGFzRm9jdXNhYmxlU2hhZG93KSkge1xuICAgICAgICAgICAgZWxlbWVudHMucHVzaChlbGVtZW50KTtcbiAgICAgICAgICAgIHJldHVybiBlbGVtZW50cztcbiAgICAgICAgfVxuICAgICAgICBpZiAoZWxlbWVudC5jaGlsZEVsZW1lbnRDb3VudCkge1xuICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnRzLmNvbmNhdChBcnJheS5mcm9tKGVsZW1lbnQuY2hpbGRyZW4pLnJlZHVjZShUb29sYmFyLnJlZHVjZUZvY3VzYWJsZUl0ZW1zLCBbXSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBlbGVtZW50cztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgc2V0Rm9jdXNhYmxlRWxlbWVudHMoKSB7XG4gICAgICAgIGlmICh0aGlzLiRmYXN0Q29udHJvbGxlci5pc0Nvbm5lY3RlZCAmJiB0aGlzLmZvY3VzYWJsZUVsZW1lbnRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHRoaXMuZm9jdXNhYmxlRWxlbWVudHMuZm9yRWFjaCgoZWxlbWVudCwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgICAgICBlbGVtZW50LnRhYkluZGV4ID0gdGhpcy5hY3RpdmVJbmRleCA9PT0gaW5kZXggPyAwIDogLTE7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbn1cbl9fZGVjb3JhdGUoW1xuICAgIG9ic2VydmFibGVcbl0sIFRvb2xiYXIucHJvdG90eXBlLCBcImRpcmVjdGlvblwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgYXR0clxuXSwgVG9vbGJhci5wcm90b3R5cGUsIFwib3JpZW50YXRpb25cIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIG9ic2VydmFibGVcbl0sIFRvb2xiYXIucHJvdG90eXBlLCBcInNsb3R0ZWRJdGVtc1wiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgb2JzZXJ2YWJsZVxuXSwgVG9vbGJhci5wcm90b3R5cGUsIFwic2xvdHRlZExhYmVsXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBvYnNlcnZhYmxlXG5dLCBUb29sYmFyLnByb3RvdHlwZSwgXCJjaGlsZEl0ZW1zXCIsIHZvaWQgMCk7XG4vKipcbiAqIEluY2x1ZGVzIEFSSUEgc3RhdGVzIGFuZCBwcm9wZXJ0aWVzIHJlbGF0aW5nIHRvIHRoZSBBUklBIHRvb2xiYXIgcm9sZVxuICpcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGNsYXNzIERlbGVnYXRlc0FSSUFUb29sYmFyIHtcbn1cbl9fZGVjb3JhdGUoW1xuICAgIGF0dHIoeyBhdHRyaWJ1dGU6IFwiYXJpYS1sYWJlbGxlZGJ5XCIgfSlcbl0sIERlbGVnYXRlc0FSSUFUb29sYmFyLnByb3RvdHlwZSwgXCJhcmlhTGFiZWxsZWRieVwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgYXR0cih7IGF0dHJpYnV0ZTogXCJhcmlhLWxhYmVsXCIgfSlcbl0sIERlbGVnYXRlc0FSSUFUb29sYmFyLnByb3RvdHlwZSwgXCJhcmlhTGFiZWxcIiwgdm9pZCAwKTtcbmFwcGx5TWl4aW5zKERlbGVnYXRlc0FSSUFUb29sYmFyLCBBUklBR2xvYmFsU3RhdGVzQW5kUHJvcGVydGllcyk7XG5hcHBseU1peGlucyhUb29sYmFyLCBTdGFydEVuZCwgRGVsZWdhdGVzQVJJQVRvb2xiYXIpO1xuIiwiaW1wb3J0IHsgY2hpbGRyZW4sIGVsZW1lbnRzLCBodG1sLCBzbG90dGVkIH0gZnJvbSBcIkBtaWNyb3NvZnQvZmFzdC1lbGVtZW50XCI7XG5pbXBvcnQgeyBlbmRTbG90VGVtcGxhdGUsIHN0YXJ0U2xvdFRlbXBsYXRlIH0gZnJvbSBcIi4uL3BhdHRlcm5zL3N0YXJ0LWVuZC5qc1wiO1xuLyoqXG4gKiBUaGUgdGVtcGxhdGUgZm9yIHRoZSB7QGxpbmsgQG1pY3Jvc29mdC9mYXN0LWZvdW5kYXRpb24jKFRvb2xiYXI6Y2xhc3MpfSBjb21wb25lbnQuXG4gKlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgY29uc3QgdG9vbGJhclRlbXBsYXRlID0gKGNvbnRleHQsIGRlZmluaXRpb24pID0+IGh0bWwgYFxuICAgIDx0ZW1wbGF0ZVxuICAgICAgICBhcmlhLWxhYmVsPVwiJHt4ID0+IHguYXJpYUxhYmVsfVwiXG4gICAgICAgIGFyaWEtbGFiZWxsZWRieT1cIiR7eCA9PiB4LmFyaWFMYWJlbGxlZGJ5fVwiXG4gICAgICAgIGFyaWEtb3JpZW50YXRpb249XCIke3ggPT4geC5vcmllbnRhdGlvbn1cIlxuICAgICAgICBvcmllbnRhdGlvbj1cIiR7eCA9PiB4Lm9yaWVudGF0aW9ufVwiXG4gICAgICAgIHJvbGU9XCJ0b29sYmFyXCJcbiAgICAgICAgQG1vdXNlZG93bj1cIiR7KHgsIGMpID0+IHgubW91c2VEb3duSGFuZGxlcihjLmV2ZW50KX1cIlxuICAgICAgICBAZm9jdXNpbj1cIiR7KHgsIGMpID0+IHguZm9jdXNpbkhhbmRsZXIoYy5ldmVudCl9XCJcbiAgICAgICAgQGtleWRvd249XCIkeyh4LCBjKSA9PiB4LmtleWRvd25IYW5kbGVyKGMuZXZlbnQpfVwiXG4gICAgICAgICR7Y2hpbGRyZW4oe1xuICAgIHByb3BlcnR5OiBcImNoaWxkSXRlbXNcIixcbiAgICBhdHRyaWJ1dGVGaWx0ZXI6IFtcImRpc2FibGVkXCIsIFwiaGlkZGVuXCJdLFxuICAgIGZpbHRlcjogZWxlbWVudHMoKSxcbiAgICBzdWJ0cmVlOiB0cnVlLFxufSl9XG4gICAgPlxuICAgICAgICA8c2xvdCBuYW1lPVwibGFiZWxcIj48L3Nsb3Q+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJwb3NpdGlvbmluZy1yZWdpb25cIiBwYXJ0PVwicG9zaXRpb25pbmctcmVnaW9uXCI+XG4gICAgICAgICAgICAke3N0YXJ0U2xvdFRlbXBsYXRlKGNvbnRleHQsIGRlZmluaXRpb24pfVxuICAgICAgICAgICAgPHNsb3RcbiAgICAgICAgICAgICAgICAke3Nsb3R0ZWQoe1xuICAgIGZpbHRlcjogZWxlbWVudHMoKSxcbiAgICBwcm9wZXJ0eTogXCJzbG90dGVkSXRlbXNcIixcbn0pfVxuICAgICAgICAgICAgPjwvc2xvdD5cbiAgICAgICAgICAgICR7ZW5kU2xvdFRlbXBsYXRlKGNvbnRleHQsIGRlZmluaXRpb24pfVxuICAgICAgICA8L2Rpdj5cbiAgICA8L3RlbXBsYXRlPlxuYDtcbiIsImV4cG9ydCAqIGZyb20gXCIuL3Rvb2x0aXAudGVtcGxhdGUuanNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL3Rvb2x0aXAuanNcIjtcbiIsImltcG9ydCB7IF9fZGVjb3JhdGUgfSBmcm9tIFwidHNsaWJcIjtcbmltcG9ydCB7IGF0dHIsIERPTSwgb2JzZXJ2YWJsZSB9IGZyb20gXCJAbWljcm9zb2Z0L2Zhc3QtZWxlbWVudFwiO1xuaW1wb3J0IHsgRGlyZWN0aW9uLCBrZXlFc2NhcGUgfSBmcm9tIFwiQG1pY3Jvc29mdC9mYXN0LXdlYi11dGlsaXRpZXNcIjtcbmltcG9ydCB7IGdldERpcmVjdGlvbiB9IGZyb20gXCIuLi91dGlsaXRpZXMvZGlyZWN0aW9uLmpzXCI7XG5pbXBvcnQgeyBGb3VuZGF0aW9uRWxlbWVudCB9IGZyb20gXCIuLi9mb3VuZGF0aW9uLWVsZW1lbnQvZm91bmRhdGlvbi1lbGVtZW50LmpzXCI7XG5pbXBvcnQgeyBUb29sdGlwUG9zaXRpb24gfSBmcm9tIFwiLi90b29sdGlwLm9wdGlvbnMuanNcIjtcbmV4cG9ydCB7IFRvb2x0aXBQb3NpdGlvbiB9O1xuLyoqXG4gKiBBbiBUb29sdGlwIEN1c3RvbSBIVE1MIEVsZW1lbnQuXG4gKlxuICogQHNsb3QgLSBUaGUgZGVmYXVsdCBzbG90IGZvciB0aGUgdG9vbHRpcCBjb250ZW50XG4gKiBAY3NzcGFydCB0b29sdGlwIC0gVGhlIHRvb2x0aXAgZWxlbWVudFxuICogQGZpcmVzIGRpc21pc3MgLSBGaXJlcyBhIGN1c3RvbSAnZGlzbWlzcycgZXZlbnQgd2hlbiB0aGUgdG9vbHRpcCBpcyB2aXNpYmxlIGFuZCBlc2NhcGUga2V5IGlzIHByZXNzZWRcbiAqXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjbGFzcyBUb29sdGlwIGV4dGVuZHMgRm91bmRhdGlvbkVsZW1lbnQge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlciguLi5hcmd1bWVudHMpO1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIGlkIG9mIHRoZSBlbGVtZW50IHRoZSB0b29sdGlwIGlzIGFuY2hvcmVkIHRvXG4gICAgICAgICAqXG4gICAgICAgICAqIEBkZWZhdWx0VmFsdWUgLSB1bmRlZmluZWRcbiAgICAgICAgICogQHB1YmxpY1xuICAgICAgICAgKiBIVE1MIEF0dHJpYnV0ZTogYW5jaG9yXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmFuY2hvciA9IFwiXCI7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgZGVsYXkgaW4gbWlsbGlzZWNvbmRzIGJlZm9yZSBhIHRvb2x0aXAgaXMgc2hvd24gYWZ0ZXIgYSBob3ZlciBldmVudFxuICAgICAgICAgKlxuICAgICAgICAgKiBAZGVmYXVsdFZhbHVlIC0gMzAwXG4gICAgICAgICAqIEBwdWJsaWNcbiAgICAgICAgICogSFRNTCBBdHRyaWJ1dGU6IGRlbGF5XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmRlbGF5ID0gMzAwO1xuICAgICAgICAvKipcbiAgICAgICAgICogQ29udHJvbHMgd2hlbiB0aGUgdG9vbHRpcCB1cGRhdGVzIGl0cyBwb3NpdGlvbiwgZGVmYXVsdCBpcyAnYW5jaG9yJyB3aGljaCBvbmx5IHVwZGF0ZXMgd2hlblxuICAgICAgICAgKiB0aGUgYW5jaG9yIGlzIHJlc2l6ZWQuICAnYXV0bycgd2lsbCB1cGRhdGUgb24gc2Nyb2xsL3Jlc2l6ZSBldmVudHMuXG4gICAgICAgICAqIENvcnJlc3BvbmRzIHRvIGFuY2hvcmVkLXJlZ2lvbiBhdXRvLXVwZGF0ZS1tb2RlLlxuICAgICAgICAgKiBAcHVibGljXG4gICAgICAgICAqIEByZW1hcmtzXG4gICAgICAgICAqIEhUTUwgQXR0cmlidXRlOiBhdXRvLXVwZGF0ZS1tb2RlXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmF1dG9VcGRhdGVNb2RlID0gXCJhbmNob3JcIjtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIHRoZSBodG1sIGVsZW1lbnQgY3VycmVudGx5IGJlaW5nIHVzZWQgYXMgYW5jaG9yLlxuICAgICAgICAgKiBTZXR0aW5nIHRoaXMgZGlyZWN0bHkgb3ZlcnJpZGVzIHRoZSBhbmNob3IgYXR0cmlidXRlLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcHVibGljXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmFuY2hvckVsZW1lbnQgPSBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIGN1cnJlbnQgdmlld3BvcnQgZWxlbWVudCBpbnN0YW5jZVxuICAgICAgICAgKlxuICAgICAgICAgKiBAaW50ZXJuYWxcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMudmlld3BvcnRFbGVtZW50ID0gbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBpbnRlcm5hbFxuICAgICAgICAgKiBAZGVmYXVsdFZhbHVlIFwiZHluYW1pY1wiXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnZlcnRpY2FsUG9zaXRpb25pbmdNb2RlID0gXCJkeW5hbWljXCI7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAaW50ZXJuYWxcbiAgICAgICAgICogQGRlZmF1bHRWYWx1ZSBcImR5bmFtaWNcIlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5ob3Jpem9udGFsUG9zaXRpb25pbmdNb2RlID0gXCJkeW5hbWljXCI7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAaW50ZXJuYWxcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuaG9yaXpvbnRhbEluc2V0ID0gXCJmYWxzZVwiO1xuICAgICAgICAvKipcbiAgICAgICAgICogQGludGVybmFsXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnZlcnRpY2FsSW5zZXQgPSBcImZhbHNlXCI7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAaW50ZXJuYWxcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuaG9yaXpvbnRhbFNjYWxpbmcgPSBcImNvbnRlbnRcIjtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBpbnRlcm5hbFxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy52ZXJ0aWNhbFNjYWxpbmcgPSBcImNvbnRlbnRcIjtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBpbnRlcm5hbFxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy52ZXJ0aWNhbERlZmF1bHRQb3NpdGlvbiA9IHVuZGVmaW5lZDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBpbnRlcm5hbFxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5ob3Jpem9udGFsRGVmYXVsdFBvc2l0aW9uID0gdW5kZWZpbmVkO1xuICAgICAgICAvKipcbiAgICAgICAgICogQGludGVybmFsXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnRvb2x0aXBWaXNpYmxlID0gZmFsc2U7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUcmFjayBjdXJyZW50IGRpcmVjdGlvbiB0byBwYXNzIHRvIHRoZSBhbmNob3JlZCByZWdpb25cbiAgICAgICAgICogdXBkYXRlZCB3aGVuIHRvb2x0aXAgaXMgc2hvd25cbiAgICAgICAgICpcbiAgICAgICAgICogQGludGVybmFsXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmN1cnJlbnREaXJlY3Rpb24gPSBEaXJlY3Rpb24ubHRyO1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIHRpbWVyIHRoYXQgdHJhY2tzIGRlbGF5IHRpbWUgYmVmb3JlIHRoZSB0b29sdGlwIGlzIHNob3duIG9uIGhvdmVyXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnNob3dEZWxheVRpbWVyID0gbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSB0aW1lciB0aGF0IHRyYWNrcyBkZWxheSB0aW1lIGJlZm9yZSB0aGUgdG9vbHRpcCBpcyBoaWRkZW5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuaGlkZURlbGF5VGltZXIgPSBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogSW5kaWNhdGVzIHdoZXRoZXIgdGhlIGFuY2hvciBpcyBjdXJyZW50bHkgYmVpbmcgaG92ZXJlZCBvciBoYXMgZm9jdXNcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuaXNBbmNob3JIb3ZlcmVkRm9jdXNlZCA9IGZhbHNlO1xuICAgICAgICAvKipcbiAgICAgICAgICogSW5kaWNhdGVzIHdoZXRoZXIgdGhlIHJlZ2lvbiBpcyBjdXJyZW50bHkgYmVpbmcgaG92ZXJlZFxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5pc1JlZ2lvbkhvdmVyZWQgPSBmYWxzZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIGludm9rZWQgd2hlbiB0aGUgYW5jaG9yZWQgcmVnaW9uJ3MgcG9zaXRpb24gcmVsYXRpdmUgdG8gdGhlIGFuY2hvciBjaGFuZ2VzXG4gICAgICAgICAqXG4gICAgICAgICAqIEBpbnRlcm5hbFxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5oYW5kbGVQb3NpdGlvbkNoYW5nZSA9IChldikgPT4ge1xuICAgICAgICAgICAgdGhpcy5jbGFzc0xpc3QudG9nZ2xlKFwidG9wXCIsIHRoaXMucmVnaW9uLnZlcnRpY2FsUG9zaXRpb24gPT09IFwic3RhcnRcIik7XG4gICAgICAgICAgICB0aGlzLmNsYXNzTGlzdC50b2dnbGUoXCJib3R0b21cIiwgdGhpcy5yZWdpb24udmVydGljYWxQb3NpdGlvbiA9PT0gXCJlbmRcIik7XG4gICAgICAgICAgICB0aGlzLmNsYXNzTGlzdC50b2dnbGUoXCJpbnNldC10b3BcIiwgdGhpcy5yZWdpb24udmVydGljYWxQb3NpdGlvbiA9PT0gXCJpbnNldFN0YXJ0XCIpO1xuICAgICAgICAgICAgdGhpcy5jbGFzc0xpc3QudG9nZ2xlKFwiaW5zZXQtYm90dG9tXCIsIHRoaXMucmVnaW9uLnZlcnRpY2FsUG9zaXRpb24gPT09IFwiaW5zZXRFbmRcIik7XG4gICAgICAgICAgICB0aGlzLmNsYXNzTGlzdC50b2dnbGUoXCJjZW50ZXItdmVydGljYWxcIiwgdGhpcy5yZWdpb24udmVydGljYWxQb3NpdGlvbiA9PT0gXCJjZW50ZXJcIik7XG4gICAgICAgICAgICB0aGlzLmNsYXNzTGlzdC50b2dnbGUoXCJsZWZ0XCIsIHRoaXMucmVnaW9uLmhvcml6b250YWxQb3NpdGlvbiA9PT0gXCJzdGFydFwiKTtcbiAgICAgICAgICAgIHRoaXMuY2xhc3NMaXN0LnRvZ2dsZShcInJpZ2h0XCIsIHRoaXMucmVnaW9uLmhvcml6b250YWxQb3NpdGlvbiA9PT0gXCJlbmRcIik7XG4gICAgICAgICAgICB0aGlzLmNsYXNzTGlzdC50b2dnbGUoXCJpbnNldC1sZWZ0XCIsIHRoaXMucmVnaW9uLmhvcml6b250YWxQb3NpdGlvbiA9PT0gXCJpbnNldFN0YXJ0XCIpO1xuICAgICAgICAgICAgdGhpcy5jbGFzc0xpc3QudG9nZ2xlKFwiaW5zZXQtcmlnaHRcIiwgdGhpcy5yZWdpb24uaG9yaXpvbnRhbFBvc2l0aW9uID09PSBcImluc2V0RW5kXCIpO1xuICAgICAgICAgICAgdGhpcy5jbGFzc0xpc3QudG9nZ2xlKFwiY2VudGVyLWhvcml6b250YWxcIiwgdGhpcy5yZWdpb24uaG9yaXpvbnRhbFBvc2l0aW9uID09PSBcImNlbnRlclwiKTtcbiAgICAgICAgfTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIG1vdXNlIGVudGVycyByZWdpb25cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuaGFuZGxlUmVnaW9uTW91c2VPdmVyID0gKGV2KSA9PiB7XG4gICAgICAgICAgICB0aGlzLmlzUmVnaW9uSG92ZXJlZCA9IHRydWU7XG4gICAgICAgIH07XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBtb3VzZSBsZWF2ZXMgcmVnaW9uXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmhhbmRsZVJlZ2lvbk1vdXNlT3V0ID0gKGV2KSA9PiB7XG4gICAgICAgICAgICB0aGlzLmlzUmVnaW9uSG92ZXJlZCA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5zdGFydEhpZGVEZWxheVRpbWVyKCk7XG4gICAgICAgIH07XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBtb3VzZSBlbnRlcnMgYW5jaG9yXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmhhbmRsZUFuY2hvck1vdXNlT3ZlciA9IChldikgPT4ge1xuICAgICAgICAgICAgaWYgKHRoaXMudG9vbHRpcFZpc2libGUpIHtcbiAgICAgICAgICAgICAgICAvLyB0b29sdGlwIGlzIGFscmVhZHkgdmlzaWJsZSwganVzdCBzZXQgdGhlIGFuY2hvciBob3ZlciBmbGFnXG4gICAgICAgICAgICAgICAgdGhpcy5pc0FuY2hvckhvdmVyZWRGb2N1c2VkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnN0YXJ0U2hvd0RlbGF5VGltZXIoKTtcbiAgICAgICAgfTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIG1vdXNlIGxlYXZlcyBhbmNob3JcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuaGFuZGxlQW5jaG9yTW91c2VPdXQgPSAoZXYpID0+IHtcbiAgICAgICAgICAgIHRoaXMuaXNBbmNob3JIb3ZlcmVkRm9jdXNlZCA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5jbGVhclNob3dEZWxheVRpbWVyKCk7XG4gICAgICAgICAgICB0aGlzLnN0YXJ0SGlkZURlbGF5VGltZXIoKTtcbiAgICAgICAgfTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIGFuY2hvciBnZXRzIGZvY3VzXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmhhbmRsZUFuY2hvckZvY3VzSW4gPSAoZXYpID0+IHtcbiAgICAgICAgICAgIHRoaXMuc3RhcnRTaG93RGVsYXlUaW1lcigpO1xuICAgICAgICB9O1xuICAgICAgICAvKipcbiAgICAgICAgICogYW5jaG9yIGxvc2VzIGZvY3VzXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmhhbmRsZUFuY2hvckZvY3VzT3V0ID0gKGV2KSA9PiB7XG4gICAgICAgICAgICB0aGlzLmlzQW5jaG9ySG92ZXJlZEZvY3VzZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuY2xlYXJTaG93RGVsYXlUaW1lcigpO1xuICAgICAgICAgICAgdGhpcy5zdGFydEhpZGVEZWxheVRpbWVyKCk7XG4gICAgICAgIH07XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBzdGFydHMgdGhlIGhpZGUgdGltZXJcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuc3RhcnRIaWRlRGVsYXlUaW1lciA9ICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuY2xlYXJIaWRlRGVsYXlUaW1lcigpO1xuICAgICAgICAgICAgaWYgKCF0aGlzLnRvb2x0aXBWaXNpYmxlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gYWxsb3cgNjAgbXMgZm9yIGFjY291bnQgZm9yIHBvaW50ZXIgdG8gbW92ZSBiZXR3ZWVuIGFuY2hvci90b29sdGlwXG4gICAgICAgICAgICAvLyB3aXRob3V0IGhpZGluZyB0b29sdGlwXG4gICAgICAgICAgICB0aGlzLmhpZGVEZWxheVRpbWVyID0gd2luZG93LnNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlVG9vbHRpcFZpc2liaWxpdHkoKTtcbiAgICAgICAgICAgIH0sIDYwKTtcbiAgICAgICAgfTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIGNsZWFycyB0aGUgaGlkZSBkZWxheVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5jbGVhckhpZGVEZWxheVRpbWVyID0gKCkgPT4ge1xuICAgICAgICAgICAgaWYgKHRoaXMuaGlkZURlbGF5VGltZXIgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5oaWRlRGVsYXlUaW1lcik7XG4gICAgICAgICAgICAgICAgdGhpcy5oaWRlRGVsYXlUaW1lciA9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBzdGFydHMgdGhlIHNob3cgdGltZXIgaWYgbm90IGN1cnJlbnRseSBydW5uaW5nXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnN0YXJ0U2hvd0RlbGF5VGltZXIgPSAoKSA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy5pc0FuY2hvckhvdmVyZWRGb2N1c2VkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuZGVsYXkgPiAxKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuc2hvd0RlbGF5VGltZXIgPT09IG51bGwpXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd0RlbGF5VGltZXIgPSB3aW5kb3cuc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXJ0SG92ZXIoKTtcbiAgICAgICAgICAgICAgICAgICAgfSwgdGhpcy5kZWxheSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5zdGFydEhvdmVyKCk7XG4gICAgICAgIH07XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBzdGFydCBob3ZlclxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5zdGFydEhvdmVyID0gKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5pc0FuY2hvckhvdmVyZWRGb2N1c2VkID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlVG9vbHRpcFZpc2liaWxpdHkoKTtcbiAgICAgICAgfTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIGNsZWFycyB0aGUgc2hvdyBkZWxheVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5jbGVhclNob3dEZWxheVRpbWVyID0gKCkgPT4ge1xuICAgICAgICAgICAgaWYgKHRoaXMuc2hvd0RlbGF5VGltZXIgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5zaG93RGVsYXlUaW1lcik7XG4gICAgICAgICAgICAgICAgdGhpcy5zaG93RGVsYXlUaW1lciA9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIC8qKlxuICAgICAgICAgKiAgR2V0cyB0aGUgYW5jaG9yIGVsZW1lbnQgYnkgaWRcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZ2V0QW5jaG9yID0gKCkgPT4ge1xuICAgICAgICAgICAgY29uc3Qgcm9vdE5vZGUgPSB0aGlzLmdldFJvb3ROb2RlKCk7XG4gICAgICAgICAgICBpZiAocm9vdE5vZGUgaW5zdGFuY2VvZiBTaGFkb3dSb290KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJvb3ROb2RlLmdldEVsZW1lbnRCeUlkKHRoaXMuYW5jaG9yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLmFuY2hvcik7XG4gICAgICAgIH07XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBoYW5kbGVzIGtleSBkb3duIGV2ZW50cyB0byBjaGVjayBmb3IgZGlzbWlzc1xuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5oYW5kbGVEb2N1bWVudEtleWRvd24gPSAoZSkgPT4ge1xuICAgICAgICAgICAgaWYgKCFlLmRlZmF1bHRQcmV2ZW50ZWQgJiYgdGhpcy50b29sdGlwVmlzaWJsZSkge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoZS5rZXkpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBrZXlFc2NhcGU6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmlzQW5jaG9ySG92ZXJlZEZvY3VzZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlVG9vbHRpcFZpc2liaWxpdHkoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJGVtaXQoXCJkaXNtaXNzXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICAvKipcbiAgICAgICAgICogZGV0ZXJtaW5lcyB3aGV0aGVyIHRvIHNob3cgb3IgaGlkZSB0aGUgdG9vbHRpcCBiYXNlZCBvbiBjdXJyZW50IHN0YXRlXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnVwZGF0ZVRvb2x0aXBWaXNpYmlsaXR5ID0gKCkgPT4ge1xuICAgICAgICAgICAgaWYgKHRoaXMudmlzaWJsZSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmhpZGVUb29sdGlwKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0aGlzLnZpc2libGUgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNob3dUb29sdGlwKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNBbmNob3JIb3ZlcmVkRm9jdXNlZCB8fCB0aGlzLmlzUmVnaW9uSG92ZXJlZCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dUb29sdGlwKCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5oaWRlVG9vbHRpcCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICAvKipcbiAgICAgICAgICogc2hvd3MgdGhlIHRvb2x0aXBcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuc2hvd1Rvb2x0aXAgPSAoKSA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy50b29sdGlwVmlzaWJsZSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuY3VycmVudERpcmVjdGlvbiA9IGdldERpcmVjdGlvbih0aGlzKTtcbiAgICAgICAgICAgIHRoaXMudG9vbHRpcFZpc2libGUgPSB0cnVlO1xuICAgICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5oYW5kbGVEb2N1bWVudEtleWRvd24pO1xuICAgICAgICAgICAgRE9NLnF1ZXVlVXBkYXRlKHRoaXMuc2V0UmVnaW9uUHJvcHMpO1xuICAgICAgICB9O1xuICAgICAgICAvKipcbiAgICAgICAgICogaGlkZXMgdGhlIHRvb2x0aXBcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuaGlkZVRvb2x0aXAgPSAoKSA9PiB7XG4gICAgICAgICAgICBpZiAoIXRoaXMudG9vbHRpcFZpc2libGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmNsZWFySGlkZURlbGF5VGltZXIoKTtcbiAgICAgICAgICAgIGlmICh0aGlzLnJlZ2lvbiAhPT0gbnVsbCAmJiB0aGlzLnJlZ2lvbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZWdpb24ucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInBvc2l0aW9uY2hhbmdlXCIsIHRoaXMuaGFuZGxlUG9zaXRpb25DaGFuZ2UpO1xuICAgICAgICAgICAgICAgIHRoaXMucmVnaW9uLnZpZXdwb3J0RWxlbWVudCA9IG51bGw7XG4gICAgICAgICAgICAgICAgdGhpcy5yZWdpb24uYW5jaG9yRWxlbWVudCA9IG51bGw7XG4gICAgICAgICAgICAgICAgdGhpcy5yZWdpb24ucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlb3ZlclwiLCB0aGlzLmhhbmRsZVJlZ2lvbk1vdXNlT3Zlcik7XG4gICAgICAgICAgICAgICAgdGhpcy5yZWdpb24ucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlb3V0XCIsIHRoaXMuaGFuZGxlUmVnaW9uTW91c2VPdXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5oYW5kbGVEb2N1bWVudEtleWRvd24pO1xuICAgICAgICAgICAgdGhpcy50b29sdGlwVmlzaWJsZSA9IGZhbHNlO1xuICAgICAgICB9O1xuICAgICAgICAvKipcbiAgICAgICAgICogdXBkYXRlcyB0aGUgdG9vbHRpcCBhbmNob3JlZCByZWdpb24gcHJvcHMgYWZ0ZXIgaXQgaGFzIGJlZW5cbiAgICAgICAgICogYWRkZWQgdG8gdGhlIERPTVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5zZXRSZWdpb25Qcm9wcyA9ICgpID0+IHtcbiAgICAgICAgICAgIGlmICghdGhpcy50b29sdGlwVmlzaWJsZSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucmVnaW9uLnZpZXdwb3J0RWxlbWVudCA9IHRoaXMudmlld3BvcnRFbGVtZW50O1xuICAgICAgICAgICAgdGhpcy5yZWdpb24uYW5jaG9yRWxlbWVudCA9IHRoaXMuYW5jaG9yRWxlbWVudDtcbiAgICAgICAgICAgIHRoaXMucmVnaW9uLmFkZEV2ZW50TGlzdGVuZXIoXCJwb3NpdGlvbmNoYW5nZVwiLCB0aGlzLmhhbmRsZVBvc2l0aW9uQ2hhbmdlKTtcbiAgICAgICAgICAgIHRoaXMucmVnaW9uLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW92ZXJcIiwgdGhpcy5oYW5kbGVSZWdpb25Nb3VzZU92ZXIsIHtcbiAgICAgICAgICAgICAgICBwYXNzaXZlOiB0cnVlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLnJlZ2lvbi5hZGRFdmVudExpc3RlbmVyKFwibW91c2VvdXRcIiwgdGhpcy5oYW5kbGVSZWdpb25Nb3VzZU91dCwge1xuICAgICAgICAgICAgICAgIHBhc3NpdmU6IHRydWUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgdmlzaWJsZUNoYW5nZWQoKSB7XG4gICAgICAgIGlmICh0aGlzLiRmYXN0Q29udHJvbGxlci5pc0Nvbm5lY3RlZCkge1xuICAgICAgICAgICAgdGhpcy51cGRhdGVUb29sdGlwVmlzaWJpbGl0eSgpO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVMYXlvdXQoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhbmNob3JDaGFuZ2VkKCkge1xuICAgICAgICBpZiAodGhpcy4kZmFzdENvbnRyb2xsZXIuaXNDb25uZWN0ZWQpIHtcbiAgICAgICAgICAgIHRoaXMuYW5jaG9yRWxlbWVudCA9IHRoaXMuZ2V0QW5jaG9yKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcG9zaXRpb25DaGFuZ2VkKCkge1xuICAgICAgICBpZiAodGhpcy4kZmFzdENvbnRyb2xsZXIuaXNDb25uZWN0ZWQpIHtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlTGF5b3V0KCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYW5jaG9yRWxlbWVudENoYW5nZWQob2xkVmFsdWUpIHtcbiAgICAgICAgaWYgKHRoaXMuJGZhc3RDb250cm9sbGVyLmlzQ29ubmVjdGVkKSB7XG4gICAgICAgICAgICBpZiAob2xkVmFsdWUgIT09IG51bGwgJiYgb2xkVmFsdWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIG9sZFZhbHVlLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZW92ZXJcIiwgdGhpcy5oYW5kbGVBbmNob3JNb3VzZU92ZXIpO1xuICAgICAgICAgICAgICAgIG9sZFZhbHVlLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZW91dFwiLCB0aGlzLmhhbmRsZUFuY2hvck1vdXNlT3V0KTtcbiAgICAgICAgICAgICAgICBvbGRWYWx1ZS5yZW1vdmVFdmVudExpc3RlbmVyKFwiZm9jdXNpblwiLCB0aGlzLmhhbmRsZUFuY2hvckZvY3VzSW4pO1xuICAgICAgICAgICAgICAgIG9sZFZhbHVlLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJmb2N1c291dFwiLCB0aGlzLmhhbmRsZUFuY2hvckZvY3VzT3V0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmFuY2hvckVsZW1lbnQgIT09IG51bGwgJiYgdGhpcy5hbmNob3JFbGVtZW50ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFuY2hvckVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlb3ZlclwiLCB0aGlzLmhhbmRsZUFuY2hvck1vdXNlT3ZlciwgeyBwYXNzaXZlOiB0cnVlIH0pO1xuICAgICAgICAgICAgICAgIHRoaXMuYW5jaG9yRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2VvdXRcIiwgdGhpcy5oYW5kbGVBbmNob3JNb3VzZU91dCwgeyBwYXNzaXZlOiB0cnVlIH0pO1xuICAgICAgICAgICAgICAgIHRoaXMuYW5jaG9yRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiZm9jdXNpblwiLCB0aGlzLmhhbmRsZUFuY2hvckZvY3VzSW4sIHtcbiAgICAgICAgICAgICAgICAgICAgcGFzc2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0aGlzLmFuY2hvckVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImZvY3Vzb3V0XCIsIHRoaXMuaGFuZGxlQW5jaG9yRm9jdXNPdXQsIHsgcGFzc2l2ZTogdHJ1ZSB9KTtcbiAgICAgICAgICAgICAgICBjb25zdCBhbmNob3JJZCA9IHRoaXMuYW5jaG9yRWxlbWVudC5pZDtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5hbmNob3JFbGVtZW50LnBhcmVudEVsZW1lbnQgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hbmNob3JFbGVtZW50LnBhcmVudEVsZW1lbnRcbiAgICAgICAgICAgICAgICAgICAgICAgIC5xdWVyeVNlbGVjdG9yQWxsKFwiOmhvdmVyXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAuZm9yRWFjaChlbGVtZW50ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlbGVtZW50LmlkID09PSBhbmNob3JJZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhcnRTaG93RGVsYXlUaW1lcigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5yZWdpb24gIT09IG51bGwgJiZcbiAgICAgICAgICAgICAgICB0aGlzLnJlZ2lvbiAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICAgICAgdGhpcy50b29sdGlwVmlzaWJsZSkge1xuICAgICAgICAgICAgICAgIHRoaXMucmVnaW9uLmFuY2hvckVsZW1lbnQgPSB0aGlzLmFuY2hvckVsZW1lbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUxheW91dCgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHZpZXdwb3J0RWxlbWVudENoYW5nZWQoKSB7XG4gICAgICAgIGlmICh0aGlzLnJlZ2lvbiAhPT0gbnVsbCAmJiB0aGlzLnJlZ2lvbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aGlzLnJlZ2lvbi52aWV3cG9ydEVsZW1lbnQgPSB0aGlzLnZpZXdwb3J0RWxlbWVudDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnVwZGF0ZUxheW91dCgpO1xuICAgIH1cbiAgICBjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICAgICAgc3VwZXIuY29ubmVjdGVkQ2FsbGJhY2soKTtcbiAgICAgICAgdGhpcy5hbmNob3JFbGVtZW50ID0gdGhpcy5nZXRBbmNob3IoKTtcbiAgICAgICAgdGhpcy51cGRhdGVUb29sdGlwVmlzaWJpbGl0eSgpO1xuICAgIH1cbiAgICBkaXNjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICAgICAgdGhpcy5oaWRlVG9vbHRpcCgpO1xuICAgICAgICB0aGlzLmNsZWFyU2hvd0RlbGF5VGltZXIoKTtcbiAgICAgICAgdGhpcy5jbGVhckhpZGVEZWxheVRpbWVyKCk7XG4gICAgICAgIHN1cGVyLmRpc2Nvbm5lY3RlZENhbGxiYWNrKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIHVwZGF0ZWQgdGhlIHByb3BlcnRpZXMgYmVpbmcgcGFzc2VkIHRvIHRoZSBhbmNob3JlZCByZWdpb25cbiAgICAgKi9cbiAgICB1cGRhdGVMYXlvdXQoKSB7XG4gICAgICAgIHRoaXMudmVydGljYWxQb3NpdGlvbmluZ01vZGUgPSBcImxvY2t0b2RlZmF1bHRcIjtcbiAgICAgICAgdGhpcy5ob3Jpem9udGFsUG9zaXRpb25pbmdNb2RlID0gXCJsb2NrdG9kZWZhdWx0XCI7XG4gICAgICAgIHN3aXRjaCAodGhpcy5wb3NpdGlvbikge1xuICAgICAgICAgICAgY2FzZSBUb29sdGlwUG9zaXRpb24udG9wOlxuICAgICAgICAgICAgY2FzZSBUb29sdGlwUG9zaXRpb24uYm90dG9tOlxuICAgICAgICAgICAgICAgIHRoaXMudmVydGljYWxEZWZhdWx0UG9zaXRpb24gPSB0aGlzLnBvc2l0aW9uO1xuICAgICAgICAgICAgICAgIHRoaXMuaG9yaXpvbnRhbERlZmF1bHRQb3NpdGlvbiA9IFwiY2VudGVyXCI7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFRvb2x0aXBQb3NpdGlvbi5yaWdodDpcbiAgICAgICAgICAgIGNhc2UgVG9vbHRpcFBvc2l0aW9uLmxlZnQ6XG4gICAgICAgICAgICBjYXNlIFRvb2x0aXBQb3NpdGlvbi5zdGFydDpcbiAgICAgICAgICAgIGNhc2UgVG9vbHRpcFBvc2l0aW9uLmVuZDpcbiAgICAgICAgICAgICAgICB0aGlzLnZlcnRpY2FsRGVmYXVsdFBvc2l0aW9uID0gXCJjZW50ZXJcIjtcbiAgICAgICAgICAgICAgICB0aGlzLmhvcml6b250YWxEZWZhdWx0UG9zaXRpb24gPSB0aGlzLnBvc2l0aW9uO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBUb29sdGlwUG9zaXRpb24udG9wTGVmdDpcbiAgICAgICAgICAgICAgICB0aGlzLnZlcnRpY2FsRGVmYXVsdFBvc2l0aW9uID0gXCJ0b3BcIjtcbiAgICAgICAgICAgICAgICB0aGlzLmhvcml6b250YWxEZWZhdWx0UG9zaXRpb24gPSBcImxlZnRcIjtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgVG9vbHRpcFBvc2l0aW9uLnRvcFJpZ2h0OlxuICAgICAgICAgICAgICAgIHRoaXMudmVydGljYWxEZWZhdWx0UG9zaXRpb24gPSBcInRvcFwiO1xuICAgICAgICAgICAgICAgIHRoaXMuaG9yaXpvbnRhbERlZmF1bHRQb3NpdGlvbiA9IFwicmlnaHRcIjtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgVG9vbHRpcFBvc2l0aW9uLmJvdHRvbUxlZnQ6XG4gICAgICAgICAgICAgICAgdGhpcy52ZXJ0aWNhbERlZmF1bHRQb3NpdGlvbiA9IFwiYm90dG9tXCI7XG4gICAgICAgICAgICAgICAgdGhpcy5ob3Jpem9udGFsRGVmYXVsdFBvc2l0aW9uID0gXCJsZWZ0XCI7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFRvb2x0aXBQb3NpdGlvbi5ib3R0b21SaWdodDpcbiAgICAgICAgICAgICAgICB0aGlzLnZlcnRpY2FsRGVmYXVsdFBvc2l0aW9uID0gXCJib3R0b21cIjtcbiAgICAgICAgICAgICAgICB0aGlzLmhvcml6b250YWxEZWZhdWx0UG9zaXRpb24gPSBcInJpZ2h0XCI7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFRvb2x0aXBQb3NpdGlvbi50b3BTdGFydDpcbiAgICAgICAgICAgICAgICB0aGlzLnZlcnRpY2FsRGVmYXVsdFBvc2l0aW9uID0gXCJ0b3BcIjtcbiAgICAgICAgICAgICAgICB0aGlzLmhvcml6b250YWxEZWZhdWx0UG9zaXRpb24gPSBcInN0YXJ0XCI7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFRvb2x0aXBQb3NpdGlvbi50b3BFbmQ6XG4gICAgICAgICAgICAgICAgdGhpcy52ZXJ0aWNhbERlZmF1bHRQb3NpdGlvbiA9IFwidG9wXCI7XG4gICAgICAgICAgICAgICAgdGhpcy5ob3Jpem9udGFsRGVmYXVsdFBvc2l0aW9uID0gXCJlbmRcIjtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgVG9vbHRpcFBvc2l0aW9uLmJvdHRvbVN0YXJ0OlxuICAgICAgICAgICAgICAgIHRoaXMudmVydGljYWxEZWZhdWx0UG9zaXRpb24gPSBcImJvdHRvbVwiO1xuICAgICAgICAgICAgICAgIHRoaXMuaG9yaXpvbnRhbERlZmF1bHRQb3NpdGlvbiA9IFwic3RhcnRcIjtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgVG9vbHRpcFBvc2l0aW9uLmJvdHRvbUVuZDpcbiAgICAgICAgICAgICAgICB0aGlzLnZlcnRpY2FsRGVmYXVsdFBvc2l0aW9uID0gXCJib3R0b21cIjtcbiAgICAgICAgICAgICAgICB0aGlzLmhvcml6b250YWxEZWZhdWx0UG9zaXRpb24gPSBcImVuZFwiO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICB0aGlzLnZlcnRpY2FsUG9zaXRpb25pbmdNb2RlID0gXCJkeW5hbWljXCI7XG4gICAgICAgICAgICAgICAgdGhpcy5ob3Jpem9udGFsUG9zaXRpb25pbmdNb2RlID0gXCJkeW5hbWljXCI7XG4gICAgICAgICAgICAgICAgdGhpcy52ZXJ0aWNhbERlZmF1bHRQb3NpdGlvbiA9IHZvaWQgMDtcbiAgICAgICAgICAgICAgICB0aGlzLmhvcml6b250YWxEZWZhdWx0UG9zaXRpb24gPSBcImNlbnRlclwiO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfVxufVxuX19kZWNvcmF0ZShbXG4gICAgYXR0cih7IG1vZGU6IFwiYm9vbGVhblwiIH0pXG5dLCBUb29sdGlwLnByb3RvdHlwZSwgXCJ2aXNpYmxlXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBhdHRyXG5dLCBUb29sdGlwLnByb3RvdHlwZSwgXCJhbmNob3JcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIGF0dHJcbl0sIFRvb2x0aXAucHJvdG90eXBlLCBcImRlbGF5XCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBhdHRyXG5dLCBUb29sdGlwLnByb3RvdHlwZSwgXCJwb3NpdGlvblwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgYXR0cih7IGF0dHJpYnV0ZTogXCJhdXRvLXVwZGF0ZS1tb2RlXCIgfSlcbl0sIFRvb2x0aXAucHJvdG90eXBlLCBcImF1dG9VcGRhdGVNb2RlXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBhdHRyKHsgYXR0cmlidXRlOiBcImhvcml6b250YWwtdmlld3BvcnQtbG9ja1wiIH0pXG5dLCBUb29sdGlwLnByb3RvdHlwZSwgXCJob3Jpem9udGFsVmlld3BvcnRMb2NrXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBhdHRyKHsgYXR0cmlidXRlOiBcInZlcnRpY2FsLXZpZXdwb3J0LWxvY2tcIiB9KVxuXSwgVG9vbHRpcC5wcm90b3R5cGUsIFwidmVydGljYWxWaWV3cG9ydExvY2tcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIG9ic2VydmFibGVcbl0sIFRvb2x0aXAucHJvdG90eXBlLCBcImFuY2hvckVsZW1lbnRcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIG9ic2VydmFibGVcbl0sIFRvb2x0aXAucHJvdG90eXBlLCBcInZpZXdwb3J0RWxlbWVudFwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgb2JzZXJ2YWJsZVxuXSwgVG9vbHRpcC5wcm90b3R5cGUsIFwidmVydGljYWxQb3NpdGlvbmluZ01vZGVcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIG9ic2VydmFibGVcbl0sIFRvb2x0aXAucHJvdG90eXBlLCBcImhvcml6b250YWxQb3NpdGlvbmluZ01vZGVcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIG9ic2VydmFibGVcbl0sIFRvb2x0aXAucHJvdG90eXBlLCBcImhvcml6b250YWxJbnNldFwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgb2JzZXJ2YWJsZVxuXSwgVG9vbHRpcC5wcm90b3R5cGUsIFwidmVydGljYWxJbnNldFwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgb2JzZXJ2YWJsZVxuXSwgVG9vbHRpcC5wcm90b3R5cGUsIFwiaG9yaXpvbnRhbFNjYWxpbmdcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIG9ic2VydmFibGVcbl0sIFRvb2x0aXAucHJvdG90eXBlLCBcInZlcnRpY2FsU2NhbGluZ1wiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgb2JzZXJ2YWJsZVxuXSwgVG9vbHRpcC5wcm90b3R5cGUsIFwidmVydGljYWxEZWZhdWx0UG9zaXRpb25cIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIG9ic2VydmFibGVcbl0sIFRvb2x0aXAucHJvdG90eXBlLCBcImhvcml6b250YWxEZWZhdWx0UG9zaXRpb25cIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIG9ic2VydmFibGVcbl0sIFRvb2x0aXAucHJvdG90eXBlLCBcInRvb2x0aXBWaXNpYmxlXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBvYnNlcnZhYmxlXG5dLCBUb29sdGlwLnByb3RvdHlwZSwgXCJjdXJyZW50RGlyZWN0aW9uXCIsIHZvaWQgMCk7XG4iLCIvKipcbiAqIEVudW1lcmF0ZXMgcG9zc2libGUgdG9vbHRpcCBwb3NpdGlvbnNcbiAqXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjb25zdCBUb29sdGlwUG9zaXRpb24gPSB7XG4gICAgLyoqXG4gICAgICogVGhlIHRvb2x0aXAgaXMgcG9zaXRpb25lZCBhYm92ZSB0aGUgZWxlbWVudFxuICAgICAqL1xuICAgIHRvcDogXCJ0b3BcIixcbiAgICAvKipcbiAgICAgKiBUaGUgdG9vbHRpcCBpcyBwb3NpdGlvbmVkIHRvIHRoZSByaWdodCBvZiB0aGUgZWxlbWVudFxuICAgICAqL1xuICAgIHJpZ2h0OiBcInJpZ2h0XCIsXG4gICAgLyoqXG4gICAgICogVGhlIHRvb2x0aXAgaXMgcG9zaXRpb25lZCBiZWxvdyB0aGUgZWxlbWVudFxuICAgICAqL1xuICAgIGJvdHRvbTogXCJib3R0b21cIixcbiAgICAvKipcbiAgICAgKiBUaGUgdG9vbHRpcCBpcyBwb3NpdGlvbmVkIHRvIHRoZSBsZWZ0IG9mIHRoZSBlbGVtZW50XG4gICAgICovXG4gICAgbGVmdDogXCJsZWZ0XCIsXG4gICAgLyoqXG4gICAgICogVGhlIHRvb2x0aXAgaXMgcG9zaXRpb25lZCBiZWZvcmUgdGhlIGVsZW1lbnRcbiAgICAgKi9cbiAgICBzdGFydDogXCJzdGFydFwiLFxuICAgIC8qKlxuICAgICAqIFRoZSB0b29sdGlwIGlzIHBvc2l0aW9uZWQgYWZ0ZXIgdGhlIGVsZW1lbnRcbiAgICAgKi9cbiAgICBlbmQ6IFwiZW5kXCIsXG4gICAgLyoqXG4gICAgICogVGhlIHRvb2x0aXAgaXMgcG9zaXRpb25lZCBhYm92ZSB0aGUgZWxlbWVudCBhbmQgdG8gdGhlIGxlZnRcbiAgICAgKi9cbiAgICB0b3BMZWZ0OiBcInRvcC1sZWZ0XCIsXG4gICAgLyoqXG4gICAgICogVGhlIHRvb2x0aXAgaXMgcG9zaXRpb25lZCBhYm92ZSB0aGUgZWxlbWVudCBhbmQgdG8gdGhlIHJpZ2h0XG4gICAgICovXG4gICAgdG9wUmlnaHQ6IFwidG9wLXJpZ2h0XCIsXG4gICAgLyoqXG4gICAgICogVGhlIHRvb2x0aXAgaXMgcG9zaXRpb25lZCBiZWxvdyB0aGUgZWxlbWVudCBhbmQgdG8gdGhlIGxlZnRcbiAgICAgKi9cbiAgICBib3R0b21MZWZ0OiBcImJvdHRvbS1sZWZ0XCIsXG4gICAgLyoqXG4gICAgICogVGhlIHRvb2x0aXAgaXMgcG9zaXRpb25lZCBiZWxvdyB0aGUgZWxlbWVudCBhbmQgdG8gdGhlIHJpZ2h0XG4gICAgICovXG4gICAgYm90dG9tUmlnaHQ6IFwiYm90dG9tLXJpZ2h0XCIsXG4gICAgLyoqXG4gICAgICogVGhlIHRvb2x0aXAgaXMgcG9zaXRpb25lZCBhYm92ZSB0aGUgZWxlbWVudCBhbmQgdG8gdGhlIGxlZnRcbiAgICAgKi9cbiAgICB0b3BTdGFydDogXCJ0b3Atc3RhcnRcIixcbiAgICAvKipcbiAgICAgKiBUaGUgdG9vbHRpcCBpcyBwb3NpdGlvbmVkIGFib3ZlIHRoZSBlbGVtZW50IGFuZCB0byB0aGUgcmlnaHRcbiAgICAgKi9cbiAgICB0b3BFbmQ6IFwidG9wLWVuZFwiLFxuICAgIC8qKlxuICAgICAqIFRoZSB0b29sdGlwIGlzIHBvc2l0aW9uZWQgYmVsb3cgdGhlIGVsZW1lbnQgYW5kIHRvIHRoZSBsZWZ0XG4gICAgICovXG4gICAgYm90dG9tU3RhcnQ6IFwiYm90dG9tLXN0YXJ0XCIsXG4gICAgLyoqXG4gICAgICogVGhlIHRvb2x0aXAgaXMgcG9zaXRpb25lZCBiZWxvdyB0aGUgZWxlbWVudCBhbmQgdG8gdGhlIHJpZ2h0XG4gICAgICovXG4gICAgYm90dG9tRW5kOiBcImJvdHRvbS1lbmRcIixcbn07XG4iLCJpbXBvcnQgeyBodG1sLCByZWYsIHdoZW4gfSBmcm9tIFwiQG1pY3Jvc29mdC9mYXN0LWVsZW1lbnRcIjtcbmltcG9ydCB7IEFuY2hvcmVkUmVnaW9uIH0gZnJvbSBcIi4uL2FuY2hvcmVkLXJlZ2lvbi9hbmNob3JlZC1yZWdpb24uanNcIjtcbi8qKlxuICogQ3JlYXRlcyBhIHRlbXBsYXRlIGZvciB0aGUge0BsaW5rIEBtaWNyb3NvZnQvZmFzdC1mb3VuZGF0aW9uIyhUb29sdGlwOmNsYXNzKX0gY29tcG9uZW50IHVzaW5nIHRoZSBwcm92aWRlZCBwcmVmaXguXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjb25zdCB0b29sdGlwVGVtcGxhdGUgPSAoY29udGV4dCwgZGVmaW5pdGlvbikgPT4ge1xuICAgIHJldHVybiBodG1sIGBcbiAgICAgICAgJHt3aGVuKHggPT4geC50b29sdGlwVmlzaWJsZSwgaHRtbCBgXG4gICAgICAgICAgICA8JHtjb250ZXh0LnRhZ0ZvcihBbmNob3JlZFJlZ2lvbil9XG4gICAgICAgICAgICAgICAgZml4ZWQtcGxhY2VtZW50PVwidHJ1ZVwiXG4gICAgICAgICAgICAgICAgYXV0by11cGRhdGUtbW9kZT1cIiR7eCA9PiB4LmF1dG9VcGRhdGVNb2RlfVwiXG4gICAgICAgICAgICAgICAgdmVydGljYWwtcG9zaXRpb25pbmctbW9kZT1cIiR7eCA9PiB4LnZlcnRpY2FsUG9zaXRpb25pbmdNb2RlfVwiXG4gICAgICAgICAgICAgICAgdmVydGljYWwtZGVmYXVsdC1wb3NpdGlvbj1cIiR7eCA9PiB4LnZlcnRpY2FsRGVmYXVsdFBvc2l0aW9ufVwiXG4gICAgICAgICAgICAgICAgdmVydGljYWwtaW5zZXQ9XCIke3ggPT4geC52ZXJ0aWNhbEluc2V0fVwiXG4gICAgICAgICAgICAgICAgdmVydGljYWwtc2NhbGluZz1cIiR7eCA9PiB4LnZlcnRpY2FsU2NhbGluZ31cIlxuICAgICAgICAgICAgICAgIGhvcml6b250YWwtcG9zaXRpb25pbmctbW9kZT1cIiR7eCA9PiB4Lmhvcml6b250YWxQb3NpdGlvbmluZ01vZGV9XCJcbiAgICAgICAgICAgICAgICBob3Jpem9udGFsLWRlZmF1bHQtcG9zaXRpb249XCIke3ggPT4geC5ob3Jpem9udGFsRGVmYXVsdFBvc2l0aW9ufVwiXG4gICAgICAgICAgICAgICAgaG9yaXpvbnRhbC1zY2FsaW5nPVwiJHt4ID0+IHguaG9yaXpvbnRhbFNjYWxpbmd9XCJcbiAgICAgICAgICAgICAgICBob3Jpem9udGFsLWluc2V0PVwiJHt4ID0+IHguaG9yaXpvbnRhbEluc2V0fVwiXG4gICAgICAgICAgICAgICAgdmVydGljYWwtdmlld3BvcnQtbG9jaz1cIiR7eCA9PiB4Lmhvcml6b250YWxWaWV3cG9ydExvY2t9XCJcbiAgICAgICAgICAgICAgICBob3Jpem9udGFsLXZpZXdwb3J0LWxvY2s9XCIke3ggPT4geC52ZXJ0aWNhbFZpZXdwb3J0TG9ja31cIlxuICAgICAgICAgICAgICAgIGRpcj1cIiR7eCA9PiB4LmN1cnJlbnREaXJlY3Rpb259XCJcbiAgICAgICAgICAgICAgICAke3JlZihcInJlZ2lvblwiKX1cbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwidG9vbHRpcFwiIHBhcnQ9XCJ0b29sdGlwXCIgcm9sZT1cInRvb2x0aXBcIj5cbiAgICAgICAgICAgICAgICAgICAgPHNsb3Q+PC9zbG90PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC8ke2NvbnRleHQudGFnRm9yKEFuY2hvcmVkUmVnaW9uKX0+XG4gICAgICAgIGApfVxuICAgIGA7XG59O1xuIiwiZXhwb3J0ICogZnJvbSBcIi4vdHJlZS1pdGVtLnRlbXBsYXRlLmpzXCI7XG5leHBvcnQgKiBmcm9tIFwiLi90cmVlLWl0ZW0uanNcIjtcbiIsImltcG9ydCB7IF9fZGVjb3JhdGUgfSBmcm9tIFwidHNsaWJcIjtcbmltcG9ydCB7IGF0dHIsIG9ic2VydmFibGUgfSBmcm9tIFwiQG1pY3Jvc29mdC9mYXN0LWVsZW1lbnRcIjtcbmltcG9ydCB7IGlzSFRNTEVsZW1lbnQgfSBmcm9tIFwiQG1pY3Jvc29mdC9mYXN0LXdlYi11dGlsaXRpZXNcIjtcbmltcG9ydCB7IFN0YXJ0RW5kIH0gZnJvbSBcIi4uL3BhdHRlcm5zL3N0YXJ0LWVuZC5qc1wiO1xuaW1wb3J0IHsgYXBwbHlNaXhpbnMgfSBmcm9tIFwiLi4vdXRpbGl0aWVzL2FwcGx5LW1peGlucy5qc1wiO1xuaW1wb3J0IHsgRm91bmRhdGlvbkVsZW1lbnQsIH0gZnJvbSBcIi4uL2ZvdW5kYXRpb24tZWxlbWVudC9mb3VuZGF0aW9uLWVsZW1lbnQuanNcIjtcbi8qKlxuICogY2hlY2sgaWYgdGhlIGl0ZW0gaXMgYSB0cmVlIGl0ZW1cbiAqIEBwdWJsaWNcbiAqIEByZW1hcmtzXG4gKiBkZXRlcm1pbmVzIGlmIGVsZW1lbnQgaXMgYW4gSFRNTEVsZW1lbnQgYW5kIGlmIGl0IGhhcyB0aGUgcm9sZSB0cmVlaXRlbVxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNUcmVlSXRlbUVsZW1lbnQoZWwpIHtcbiAgICByZXR1cm4gaXNIVE1MRWxlbWVudChlbCkgJiYgZWwuZ2V0QXR0cmlidXRlKFwicm9sZVwiKSA9PT0gXCJ0cmVlaXRlbVwiO1xufVxuLyoqXG4gKiBBIFRyZWUgaXRlbSBDdXN0b20gSFRNTCBFbGVtZW50LlxuICpcbiAqIEBzbG90IHN0YXJ0IC0gQ29udGVudCB3aGljaCBjYW4gYmUgcHJvdmlkZWQgYmVmb3JlIHRoZSB0cmVlIGl0ZW0gY29udGVudFxuICogQHNsb3QgZW5kIC0gQ29udGVudCB3aGljaCBjYW4gYmUgcHJvdmlkZWQgYWZ0ZXIgdGhlIHRyZWUgaXRlbSBjb250ZW50XG4gKiBAc2xvdCAtIFRoZSBkZWZhdWx0IHNsb3QgZm9yIHRyZWUgaXRlbSB0ZXh0IGNvbnRlbnRcbiAqIEBzbG90IGl0ZW0gLSBUaGUgc2xvdCBmb3IgdHJlZSBpdGVtcyAoZmFzdCB0cmVlIGl0ZW1zIG1hbmFnZSB0aGlzIGFzc2lnbm1lbnQgdGhlbXNlbHZlcylcbiAqIEBzbG90IGV4cGFuZC1jb2xsYXBzZS1idXR0b24gLSBUaGUgZXhwYW5kL2NvbGxhcHNlIGJ1dHRvblxuICogQGNzc3BhcnQgcG9zaXRpb25pbmctcmVnaW9uIC0gVGhlIGVsZW1lbnQgdXNlZCB0byBwb3NpdGlvbiB0aGUgdHJlZSBpdGVtIGNvbnRlbnQgd2l0aCBleGNlcHRpb24gb2YgYW55IGNoaWxkIG5vZGVzXG4gKiBAY3NzcGFydCBjb250ZW50LXJlZ2lvbiAtIFRoZSBlbGVtZW50IGNvbnRhaW5pbmcgdGhlIGV4cGFuZC9jb2xsYXBzZSwgc3RhcnQsIGFuZCBlbmQgc2xvdHNcbiAqIEBjc3NwYXJ0IGl0ZW1zIC0gVGhlIGVsZW1lbnQgd3JhcHBpbmcgYW55IGNoaWxkIGl0ZW1zXG4gKiBAY3NzcGFydCBleHBhbmQtY29sbGFwc2UtYnV0dG9uIC0gVGhlIGV4cGFuZC9jb2xsYXBzZSBidXR0b25cbiAqIEBmaXJlcyBleHBhbmRlZC1jaGFuZ2UgLSBGaXJlcyBhIGN1c3RvbSAnZXhwYW5kZWQtY2hhbmdlJyBldmVudCB3aGVuIHRoZSBleHBhbmRlZCBzdGF0ZSBjaGFuZ2VzXG4gKiBAZmlyZXMgc2VsZWN0ZWQtY2hhbmdlIC0gRmlyZXMgYSBjdXN0b20gJ3NlbGVjdGVkLWNoYW5nZScgZXZlbnQgd2hlbiB0aGUgc2VsZWN0ZWQgc3RhdGUgY2hhbmdlc1xuICpcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGNsYXNzIFRyZWVJdGVtIGV4dGVuZHMgRm91bmRhdGlvbkVsZW1lbnQge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlciguLi5hcmd1bWVudHMpO1xuICAgICAgICAvKipcbiAgICAgICAgICogV2hlbiB0cnVlLCB0aGUgY29udHJvbCB3aWxsIGJlIGFwcGVhciBleHBhbmRlZCBieSB1c2VyIGludGVyYWN0aW9uLlxuICAgICAgICAgKiBAcHVibGljXG4gICAgICAgICAqIEByZW1hcmtzXG4gICAgICAgICAqIEhUTUwgQXR0cmlidXRlOiBleHBhbmRlZFxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5leHBhbmRlZCA9IGZhbHNlO1xuICAgICAgICAvKipcbiAgICAgICAgICogV2hldGhlciB0aGUgaXRlbSBpcyBmb2N1c2FibGVcbiAgICAgICAgICpcbiAgICAgICAgICogQGludGVybmFsXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmZvY3VzYWJsZSA9IGZhbHNlO1xuICAgICAgICAvKipcbiAgICAgICAgICogV2hldGhlciB0aGUgdHJlZSBpcyBuZXN0ZWRcbiAgICAgICAgICpcbiAgICAgICAgICogQHB1YmxpY1xuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5pc05lc3RlZEl0ZW0gPSAoKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gaXNUcmVlSXRlbUVsZW1lbnQodGhpcy5wYXJlbnRFbGVtZW50KTtcbiAgICAgICAgfTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEhhbmRsZSBleHBhbmQgYnV0dG9uIGNsaWNrXG4gICAgICAgICAqXG4gICAgICAgICAqIEBpbnRlcm5hbFxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5oYW5kbGVFeHBhbmRDb2xsYXBzZUJ1dHRvbkNsaWNrID0gKGUpID0+IHtcbiAgICAgICAgICAgIGlmICghdGhpcy5kaXNhYmxlZCAmJiAhZS5kZWZhdWx0UHJldmVudGVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5leHBhbmRlZCA9ICF0aGlzLmV4cGFuZGVkO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICAvKipcbiAgICAgICAgICogSGFuZGxlIGZvY3VzIGV2ZW50c1xuICAgICAgICAgKlxuICAgICAgICAgKiBAaW50ZXJuYWxcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuaGFuZGxlRm9jdXMgPSAoZSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5zZXRBdHRyaWJ1dGUoXCJ0YWJpbmRleFwiLCBcIjBcIik7XG4gICAgICAgIH07XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBIYW5kbGUgYmx1ciBldmVudHNcbiAgICAgICAgICpcbiAgICAgICAgICogQGludGVybmFsXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmhhbmRsZUJsdXIgPSAoZSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5zZXRBdHRyaWJ1dGUoXCJ0YWJpbmRleFwiLCBcIi0xXCIpO1xuICAgICAgICB9O1xuICAgIH1cbiAgICBleHBhbmRlZENoYW5nZWQoKSB7XG4gICAgICAgIGlmICh0aGlzLiRmYXN0Q29udHJvbGxlci5pc0Nvbm5lY3RlZCkge1xuICAgICAgICAgICAgdGhpcy4kZW1pdChcImV4cGFuZGVkLWNoYW5nZVwiLCB0aGlzKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzZWxlY3RlZENoYW5nZWQoKSB7XG4gICAgICAgIGlmICh0aGlzLiRmYXN0Q29udHJvbGxlci5pc0Nvbm5lY3RlZCkge1xuICAgICAgICAgICAgdGhpcy4kZW1pdChcInNlbGVjdGVkLWNoYW5nZVwiLCB0aGlzKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpdGVtc0NoYW5nZWQob2xkVmFsdWUsIG5ld1ZhbHVlKSB7XG4gICAgICAgIGlmICh0aGlzLiRmYXN0Q29udHJvbGxlci5pc0Nvbm5lY3RlZCkge1xuICAgICAgICAgICAgdGhpcy5pdGVtcy5mb3JFYWNoKChub2RlKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGlzVHJlZUl0ZW1FbGVtZW50KG5vZGUpKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFRPRE86IG1heWJlIG5vdCByZXF1aXJlIGl0IHRvIGJlIGEgVHJlZUl0ZW0/XG4gICAgICAgICAgICAgICAgICAgIG5vZGUubmVzdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBQbGFjZXMgZG9jdW1lbnQgZm9jdXMgb24gYSB0cmVlIGl0ZW1cbiAgICAgKlxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcGFyYW0gZWwgLSB0aGUgZWxlbWVudCB0byBmb2N1c1xuICAgICAqL1xuICAgIHN0YXRpYyBmb2N1c0l0ZW0oZWwpIHtcbiAgICAgICAgZWwuZm9jdXNhYmxlID0gdHJ1ZTtcbiAgICAgICAgZWwuZm9jdXMoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0cyBudW1iZXIgb2YgY2hpbGRyZW5cbiAgICAgKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIGNoaWxkSXRlbUxlbmd0aCgpIHtcbiAgICAgICAgY29uc3QgdHJlZUNoaWxkcmVuID0gdGhpcy5jaGlsZEl0ZW1zLmZpbHRlcigoaXRlbSkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIGlzVHJlZUl0ZW1FbGVtZW50KGl0ZW0pO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHRyZWVDaGlsZHJlbiA/IHRyZWVDaGlsZHJlbi5sZW5ndGggOiAwO1xuICAgIH1cbn1cbl9fZGVjb3JhdGUoW1xuICAgIGF0dHIoeyBtb2RlOiBcImJvb2xlYW5cIiB9KVxuXSwgVHJlZUl0ZW0ucHJvdG90eXBlLCBcImV4cGFuZGVkXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBhdHRyKHsgbW9kZTogXCJib29sZWFuXCIgfSlcbl0sIFRyZWVJdGVtLnByb3RvdHlwZSwgXCJzZWxlY3RlZFwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgYXR0cih7IG1vZGU6IFwiYm9vbGVhblwiIH0pXG5dLCBUcmVlSXRlbS5wcm90b3R5cGUsIFwiZGlzYWJsZWRcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIG9ic2VydmFibGVcbl0sIFRyZWVJdGVtLnByb3RvdHlwZSwgXCJmb2N1c2FibGVcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIG9ic2VydmFibGVcbl0sIFRyZWVJdGVtLnByb3RvdHlwZSwgXCJjaGlsZEl0ZW1zXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBvYnNlcnZhYmxlXG5dLCBUcmVlSXRlbS5wcm90b3R5cGUsIFwiaXRlbXNcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIG9ic2VydmFibGVcbl0sIFRyZWVJdGVtLnByb3RvdHlwZSwgXCJuZXN0ZWRcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIG9ic2VydmFibGVcbl0sIFRyZWVJdGVtLnByb3RvdHlwZSwgXCJyZW5kZXJDb2xsYXBzZWRDaGlsZHJlblwiLCB2b2lkIDApO1xuYXBwbHlNaXhpbnMoVHJlZUl0ZW0sIFN0YXJ0RW5kKTtcbiIsImltcG9ydCB7IGNoaWxkcmVuLCBlbGVtZW50cywgaHRtbCwgcmVmLCBzbG90dGVkLCB3aGVuIH0gZnJvbSBcIkBtaWNyb3NvZnQvZmFzdC1lbGVtZW50XCI7XG5pbXBvcnQgeyBlbmRTbG90VGVtcGxhdGUsIHN0YXJ0U2xvdFRlbXBsYXRlIH0gZnJvbSBcIi4uL3BhdHRlcm5zL3N0YXJ0LWVuZC5qc1wiO1xuLyoqXG4gKiBUaGUgdGVtcGxhdGUgZm9yIHRoZSB7QGxpbmsgQG1pY3Jvc29mdC9mYXN0LWZvdW5kYXRpb24jKFRyZWVJdGVtOmNsYXNzKX0gY29tcG9uZW50LlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgY29uc3QgdHJlZUl0ZW1UZW1wbGF0ZSA9IChjb250ZXh0LCBkZWZpbml0aW9uKSA9PiBodG1sIGBcbiAgICA8dGVtcGxhdGVcbiAgICAgICAgcm9sZT1cInRyZWVpdGVtXCJcbiAgICAgICAgc2xvdD1cIiR7eCA9PiAoeC5pc05lc3RlZEl0ZW0oKSA/IFwiaXRlbVwiIDogdm9pZCAwKX1cIlxuICAgICAgICB0YWJpbmRleD1cIi0xXCJcbiAgICAgICAgY2xhc3M9XCIke3ggPT4gKHguZXhwYW5kZWQgPyBcImV4cGFuZGVkXCIgOiBcIlwiKX0gJHt4ID0+IHguc2VsZWN0ZWQgPyBcInNlbGVjdGVkXCIgOiBcIlwifSAke3ggPT4gKHgubmVzdGVkID8gXCJuZXN0ZWRcIiA6IFwiXCIpfVxuICAgICAgICAgICAgJHt4ID0+ICh4LmRpc2FibGVkID8gXCJkaXNhYmxlZFwiIDogXCJcIil9XCJcbiAgICAgICAgYXJpYS1leHBhbmRlZD1cIiR7eCA9PiB4LmNoaWxkSXRlbXMgJiYgeC5jaGlsZEl0ZW1MZW5ndGgoKSA+IDAgPyB4LmV4cGFuZGVkIDogdm9pZCAwfVwiXG4gICAgICAgIGFyaWEtc2VsZWN0ZWQ9XCIke3ggPT4geC5zZWxlY3RlZH1cIlxuICAgICAgICBhcmlhLWRpc2FibGVkPVwiJHt4ID0+IHguZGlzYWJsZWR9XCJcbiAgICAgICAgQGZvY3VzaW49XCIkeyh4LCBjKSA9PiB4LmhhbmRsZUZvY3VzKGMuZXZlbnQpfVwiXG4gICAgICAgIEBmb2N1c291dD1cIiR7KHgsIGMpID0+IHguaGFuZGxlQmx1cihjLmV2ZW50KX1cIlxuICAgICAgICAke2NoaWxkcmVuKHtcbiAgICBwcm9wZXJ0eTogXCJjaGlsZEl0ZW1zXCIsXG4gICAgZmlsdGVyOiBlbGVtZW50cygpLFxufSl9XG4gICAgPlxuICAgICAgICA8ZGl2IGNsYXNzPVwicG9zaXRpb25pbmctcmVnaW9uXCIgcGFydD1cInBvc2l0aW9uaW5nLXJlZ2lvblwiPlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNvbnRlbnQtcmVnaW9uXCIgcGFydD1cImNvbnRlbnQtcmVnaW9uXCI+XG4gICAgICAgICAgICAgICAgJHt3aGVuKHggPT4geC5jaGlsZEl0ZW1zICYmIHguY2hpbGRJdGVtTGVuZ3RoKCkgPiAwLCBodG1sIGBcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcmlhLWhpZGRlbj1cInRydWVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzPVwiZXhwYW5kLWNvbGxhcHNlLWJ1dHRvblwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFydD1cImV4cGFuZC1jb2xsYXBzZS1idXR0b25cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIEBjbGljaz1cIiR7KHgsIGMpID0+IHguaGFuZGxlRXhwYW5kQ29sbGFwc2VCdXR0b25DbGljayhjLmV2ZW50KX1cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICR7cmVmKFwiZXhwYW5kQ29sbGFwc2VCdXR0b25cIil9XG4gICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNsb3QgbmFtZT1cImV4cGFuZC1jb2xsYXBzZS1nbHlwaFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAke2RlZmluaXRpb24uZXhwYW5kQ29sbGFwc2VHbHlwaCB8fCBcIlwifVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc2xvdD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICBgKX1cbiAgICAgICAgICAgICAgICAke3N0YXJ0U2xvdFRlbXBsYXRlKGNvbnRleHQsIGRlZmluaXRpb24pfVxuICAgICAgICAgICAgICAgIDxzbG90Pjwvc2xvdD5cbiAgICAgICAgICAgICAgICAke2VuZFNsb3RUZW1wbGF0ZShjb250ZXh0LCBkZWZpbml0aW9uKX1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgJHt3aGVuKHggPT4geC5jaGlsZEl0ZW1zICYmXG4gICAgeC5jaGlsZEl0ZW1MZW5ndGgoKSA+IDAgJiZcbiAgICAoeC5leHBhbmRlZCB8fCB4LnJlbmRlckNvbGxhcHNlZENoaWxkcmVuKSwgaHRtbCBgXG4gICAgICAgICAgICAgICAgPGRpdiByb2xlPVwiZ3JvdXBcIiBjbGFzcz1cIml0ZW1zXCIgcGFydD1cIml0ZW1zXCI+XG4gICAgICAgICAgICAgICAgICAgIDxzbG90IG5hbWU9XCJpdGVtXCIgJHtzbG90dGVkKFwiaXRlbXNcIil9Pjwvc2xvdD5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIGApfVxuICAgIDwvdGVtcGxhdGU+XG5gO1xuIiwiZXhwb3J0ICogZnJvbSBcIi4vdHJlZS12aWV3LnRlbXBsYXRlLmpzXCI7XG5leHBvcnQgKiBmcm9tIFwiLi90cmVlLXZpZXcuanNcIjtcbiIsImltcG9ydCB7IF9fZGVjb3JhdGUgfSBmcm9tIFwidHNsaWJcIjtcbmltcG9ydCB7IGF0dHIsIERPTSwgb2JzZXJ2YWJsZSB9IGZyb20gXCJAbWljcm9zb2Z0L2Zhc3QtZWxlbWVudFwiO1xuaW1wb3J0IHsgZ2V0RGlzcGxheWVkTm9kZXMsIGlzSFRNTEVsZW1lbnQsIGtleUFycm93RG93biwga2V5QXJyb3dMZWZ0LCBrZXlBcnJvd1JpZ2h0LCBrZXlBcnJvd1VwLCBrZXlFbmQsIGtleUVudGVyLCBrZXlIb21lLCB9IGZyb20gXCJAbWljcm9zb2Z0L2Zhc3Qtd2ViLXV0aWxpdGllc1wiO1xuaW1wb3J0IHsgaXNUcmVlSXRlbUVsZW1lbnQsIFRyZWVJdGVtIH0gZnJvbSBcIi4uL3RyZWUtaXRlbS90cmVlLWl0ZW0uanNcIjtcbmltcG9ydCB7IEZvdW5kYXRpb25FbGVtZW50IH0gZnJvbSBcIi4uL2ZvdW5kYXRpb24tZWxlbWVudC9mb3VuZGF0aW9uLWVsZW1lbnQuanNcIjtcbi8qKlxuICogQSBUcmVlIHZpZXcgQ3VzdG9tIEhUTUwgRWxlbWVudC5cbiAqIEltcGxlbWVudHMgdGhlIHtAbGluayBodHRwczovL3czYy5naXRodWIuaW8vYXJpYS1wcmFjdGljZXMvI1RyZWVWaWV3IHwgQVJJQSBUcmVlVmlldyB9LlxuICpcbiAqIEBzbG90IC0gVGhlIGRlZmF1bHQgc2xvdCBmb3IgdHJlZSBpdGVtc1xuICpcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGNsYXNzIFRyZWVWaWV3IGV4dGVuZHMgRm91bmRhdGlvbkVsZW1lbnQge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlciguLi5hcmd1bWVudHMpO1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIHRyZWUgaXRlbSB0aGF0IGlzIGRlc2lnbmF0ZWQgdG8gYmUgaW4gdGhlIHRhYiBxdWV1ZS5cbiAgICAgICAgICpcbiAgICAgICAgICogQGludGVybmFsXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmN1cnJlbnRGb2N1c2VkID0gbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEhhbmRsZSBmb2N1cyBldmVudHNcbiAgICAgICAgICpcbiAgICAgICAgICogQGludGVybmFsXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmhhbmRsZUZvY3VzID0gKGUpID0+IHtcbiAgICAgICAgICAgIGlmICh0aGlzLnNsb3R0ZWRUcmVlSXRlbXMubGVuZ3RoIDwgMSkge1xuICAgICAgICAgICAgICAgIC8vIG5vIGNoaWxkIGl0ZW1zLCBub3RoaW5nIHRvIGRvXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGUudGFyZ2V0ID09PSB0aGlzKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuY3VycmVudEZvY3VzZWQgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50Rm9jdXNlZCA9IHRoaXMuZ2V0VmFsaWRGb2N1c2FibGVJdGVtKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmN1cnJlbnRGb2N1c2VkICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIFRyZWVJdGVtLmZvY3VzSXRlbSh0aGlzLmN1cnJlbnRGb2N1c2VkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuY29udGFpbnMoZS50YXJnZXQpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRBdHRyaWJ1dGUoXCJ0YWJpbmRleFwiLCBcIi0xXCIpO1xuICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudEZvY3VzZWQgPSBlLnRhcmdldDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEhhbmRsZSBibHVyIGV2ZW50c1xuICAgICAgICAgKlxuICAgICAgICAgKiBAaW50ZXJuYWxcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuaGFuZGxlQmx1ciA9IChlKSA9PiB7XG4gICAgICAgICAgICBpZiAoZS50YXJnZXQgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCAmJlxuICAgICAgICAgICAgICAgIChlLnJlbGF0ZWRUYXJnZXQgPT09IG51bGwgfHwgIXRoaXMuY29udGFpbnMoZS5yZWxhdGVkVGFyZ2V0KSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldEF0dHJpYnV0ZShcInRhYmluZGV4XCIsIFwiMFwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEtleURvd24gaGFuZGxlclxuICAgICAgICAgKlxuICAgICAgICAgKiAgQGludGVybmFsXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmhhbmRsZUtleURvd24gPSAoZSkgPT4ge1xuICAgICAgICAgICAgaWYgKGUuZGVmYXVsdFByZXZlbnRlZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLnNsb3R0ZWRUcmVlSXRlbXMubGVuZ3RoIDwgMSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgdHJlZUl0ZW1zID0gdGhpcy5nZXRWaXNpYmxlTm9kZXMoKTtcbiAgICAgICAgICAgIHN3aXRjaCAoZS5rZXkpIHtcbiAgICAgICAgICAgICAgICBjYXNlIGtleUhvbWU6XG4gICAgICAgICAgICAgICAgICAgIGlmICh0cmVlSXRlbXMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBUcmVlSXRlbS5mb2N1c0l0ZW0odHJlZUl0ZW1zWzBdKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgY2FzZSBrZXlFbmQ6XG4gICAgICAgICAgICAgICAgICAgIGlmICh0cmVlSXRlbXMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBUcmVlSXRlbS5mb2N1c0l0ZW0odHJlZUl0ZW1zW3RyZWVJdGVtcy5sZW5ndGggLSAxXSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIGNhc2Uga2V5QXJyb3dMZWZ0OlxuICAgICAgICAgICAgICAgICAgICBpZiAoZS50YXJnZXQgJiYgdGhpcy5pc0ZvY3VzYWJsZUVsZW1lbnQoZS50YXJnZXQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpdGVtID0gZS50YXJnZXQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXRlbSBpbnN0YW5jZW9mIFRyZWVJdGVtICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbS5jaGlsZEl0ZW1MZW5ndGgoKSA+IDAgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtLmV4cGFuZGVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbS5leHBhbmRlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoaXRlbSBpbnN0YW5jZW9mIFRyZWVJdGVtICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbS5wYXJlbnRFbGVtZW50IGluc3RhbmNlb2YgVHJlZUl0ZW0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBUcmVlSXRlbS5mb2N1c0l0ZW0oaXRlbS5wYXJlbnRFbGVtZW50KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgY2FzZSBrZXlBcnJvd1JpZ2h0OlxuICAgICAgICAgICAgICAgICAgICBpZiAoZS50YXJnZXQgJiYgdGhpcy5pc0ZvY3VzYWJsZUVsZW1lbnQoZS50YXJnZXQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpdGVtID0gZS50YXJnZXQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXRlbSBpbnN0YW5jZW9mIFRyZWVJdGVtICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbS5jaGlsZEl0ZW1MZW5ndGgoKSA+IDAgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAhaXRlbS5leHBhbmRlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0uZXhwYW5kZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoaXRlbSBpbnN0YW5jZW9mIFRyZWVJdGVtICYmIGl0ZW0uY2hpbGRJdGVtTGVuZ3RoKCkgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5mb2N1c05leHROb2RlKDEsIGUudGFyZ2V0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgY2FzZSBrZXlBcnJvd0Rvd246XG4gICAgICAgICAgICAgICAgICAgIGlmIChlLnRhcmdldCAmJiB0aGlzLmlzRm9jdXNhYmxlRWxlbWVudChlLnRhcmdldCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZm9jdXNOZXh0Tm9kZSgxLCBlLnRhcmdldCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIGNhc2Uga2V5QXJyb3dVcDpcbiAgICAgICAgICAgICAgICAgICAgaWYgKGUudGFyZ2V0ICYmIHRoaXMuaXNGb2N1c2FibGVFbGVtZW50KGUudGFyZ2V0KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5mb2N1c05leHROb2RlKC0xLCBlLnRhcmdldCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIGNhc2Uga2V5RW50ZXI6XG4gICAgICAgICAgICAgICAgICAgIC8vIEluIHNpbmdsZS1zZWxlY3QgdHJlZXMgd2hlcmUgc2VsZWN0aW9uIGRvZXMgbm90IGZvbGxvdyBmb2N1cyAoc2VlIG5vdGUgYmVsb3cpLFxuICAgICAgICAgICAgICAgICAgICAvLyB0aGUgZGVmYXVsdCBhY3Rpb24gaXMgdHlwaWNhbGx5IHRvIHNlbGVjdCB0aGUgZm9jdXNlZCBub2RlLlxuICAgICAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZUNsaWNrKGUpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBkb24ndCBwcmV2ZW50IGRlZmF1bHQgaWYgd2UgdG9vayBubyBhY3Rpb25cbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9O1xuICAgICAgICAvKipcbiAgICAgICAgICogSGFuZGxlcyB0aGUgc2VsZWN0ZWQtY2hhbmdlZCBldmVudHMgYnViYmxpbmcgdXBcbiAgICAgICAgICogZnJvbSBjaGlsZCB0cmVlIGl0ZW1zXG4gICAgICAgICAqXG4gICAgICAgICAqICBAaW50ZXJuYWxcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuaGFuZGxlU2VsZWN0ZWRDaGFuZ2UgPSAoZSkgPT4ge1xuICAgICAgICAgICAgaWYgKGUuZGVmYXVsdFByZXZlbnRlZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghKGUudGFyZ2V0IGluc3RhbmNlb2YgRWxlbWVudCkgfHwgIWlzVHJlZUl0ZW1FbGVtZW50KGUudGFyZ2V0KSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgaXRlbSA9IGUudGFyZ2V0O1xuICAgICAgICAgICAgaWYgKGl0ZW0uc2VsZWN0ZWQpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5jdXJyZW50U2VsZWN0ZWQgJiYgdGhpcy5jdXJyZW50U2VsZWN0ZWQgIT09IGl0ZW0pIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50U2VsZWN0ZWQuc2VsZWN0ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gbmV3IHNlbGVjdGVkIGl0ZW1cbiAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRTZWxlY3RlZCA9IGl0ZW07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICghaXRlbS5zZWxlY3RlZCAmJiB0aGlzLmN1cnJlbnRTZWxlY3RlZCA9PT0gaXRlbSkge1xuICAgICAgICAgICAgICAgIC8vIHNlbGVjdGVkIGl0ZW0gZGVzZWxlY3RlZFxuICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudFNlbGVjdGVkID0gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFVwZGF0ZXMgdGhlIHRyZWUgdmlldyB3aGVuIHNsb3R0ZWRUcmVlSXRlbXMgY2hhbmdlc1xuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5zZXRJdGVtcyA9ICgpID0+IHtcbiAgICAgICAgICAgIC8vIGZvcmNlIHNpbmdsZSBzZWxlY3Rpb25cbiAgICAgICAgICAgIC8vIGRlZmF1bHRzIHRvIGZpcnN0IG9uZSBmb3VuZFxuICAgICAgICAgICAgY29uc3Qgc2VsZWN0ZWRJdGVtID0gdGhpcy50cmVlVmlldy5xdWVyeVNlbGVjdG9yKFwiW2FyaWEtc2VsZWN0ZWQ9J3RydWUnXVwiKTtcbiAgICAgICAgICAgIHRoaXMuY3VycmVudFNlbGVjdGVkID0gc2VsZWN0ZWRJdGVtO1xuICAgICAgICAgICAgLy8gaW52YWxpZGF0ZSB0aGUgY3VycmVudCBmb2N1c2VkIGl0ZW0gaWYgaXQgaXMgbm8gbG9uZ2VyIHZhbGlkXG4gICAgICAgICAgICBpZiAodGhpcy5jdXJyZW50Rm9jdXNlZCA9PT0gbnVsbCB8fCAhdGhpcy5jb250YWlucyh0aGlzLmN1cnJlbnRGb2N1c2VkKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudEZvY3VzZWQgPSB0aGlzLmdldFZhbGlkRm9jdXNhYmxlSXRlbSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gdG9nZ2xlIHByb3BlcnRpZXMgb24gY2hpbGQgZWxlbWVudHNcbiAgICAgICAgICAgIHRoaXMubmVzdGVkID0gdGhpcy5jaGVja0Zvck5lc3RlZEl0ZW1zKCk7XG4gICAgICAgICAgICBjb25zdCB0cmVlSXRlbXMgPSB0aGlzLmdldFZpc2libGVOb2RlcygpO1xuICAgICAgICAgICAgdHJlZUl0ZW1zLmZvckVhY2gobm9kZSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGlzVHJlZUl0ZW1FbGVtZW50KG5vZGUpKSB7XG4gICAgICAgICAgICAgICAgICAgIG5vZGUubmVzdGVkID0gdGhpcy5uZXN0ZWQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBjaGVjayBpZiB0aGUgaXRlbSBpcyBmb2N1c2FibGVcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuaXNGb2N1c2FibGVFbGVtZW50ID0gKGVsKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gaXNUcmVlSXRlbUVsZW1lbnQoZWwpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmlzU2VsZWN0ZWRFbGVtZW50ID0gKGVsKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gZWwuc2VsZWN0ZWQ7XG4gICAgICAgIH07XG4gICAgfVxuICAgIHNsb3R0ZWRUcmVlSXRlbXNDaGFuZ2VkKCkge1xuICAgICAgICBpZiAodGhpcy4kZmFzdENvbnRyb2xsZXIuaXNDb25uZWN0ZWQpIHtcbiAgICAgICAgICAgIC8vIHVwZGF0ZSBmb3Igc2xvdHRlZCBjaGlsZHJlbiBjaGFuZ2VcbiAgICAgICAgICAgIHRoaXMuc2V0SXRlbXMoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICAgICAgc3VwZXIuY29ubmVjdGVkQ2FsbGJhY2soKTtcbiAgICAgICAgdGhpcy5zZXRBdHRyaWJ1dGUoXCJ0YWJpbmRleFwiLCBcIjBcIik7XG4gICAgICAgIERPTS5xdWV1ZVVwZGF0ZSgoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnNldEl0ZW1zKCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBIYW5kbGVzIGNsaWNrIGV2ZW50cyBidWJibGluZyB1cFxuICAgICAqXG4gICAgICogIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIGhhbmRsZUNsaWNrKGUpIHtcbiAgICAgICAgaWYgKGUuZGVmYXVsdFByZXZlbnRlZCkge1xuICAgICAgICAgICAgLy8gaGFuZGxlZCwgZG8gbm90aGluZ1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICghKGUudGFyZ2V0IGluc3RhbmNlb2YgRWxlbWVudCkgfHwgIWlzVHJlZUl0ZW1FbGVtZW50KGUudGFyZ2V0KSkge1xuICAgICAgICAgICAgLy8gbm90IGEgdHJlZSBpdGVtLCBpZ25vcmVcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGl0ZW0gPSBlLnRhcmdldDtcbiAgICAgICAgaWYgKCFpdGVtLmRpc2FibGVkKSB7XG4gICAgICAgICAgICBpdGVtLnNlbGVjdGVkID0gIWl0ZW0uc2VsZWN0ZWQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBNb3ZlIGZvY3VzIHRvIGEgdHJlZSBpdGVtIGJhc2VkIG9uIGl0cyBvZmZzZXQgZnJvbSB0aGUgcHJvdmlkZWQgaXRlbVxuICAgICAqL1xuICAgIGZvY3VzTmV4dE5vZGUoZGVsdGEsIGl0ZW0pIHtcbiAgICAgICAgY29uc3QgdmlzaWJsZU5vZGVzID0gdGhpcy5nZXRWaXNpYmxlTm9kZXMoKTtcbiAgICAgICAgaWYgKCF2aXNpYmxlTm9kZXMpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBmb2N1c0l0ZW0gPSB2aXNpYmxlTm9kZXNbdmlzaWJsZU5vZGVzLmluZGV4T2YoaXRlbSkgKyBkZWx0YV07XG4gICAgICAgIGlmIChpc0hUTUxFbGVtZW50KGZvY3VzSXRlbSkpIHtcbiAgICAgICAgICAgIFRyZWVJdGVtLmZvY3VzSXRlbShmb2N1c0l0ZW0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIGNoZWNrcyBpZiB0aGVyZSBhcmUgYW55IG5lc3RlZCB0cmVlIGl0ZW1zXG4gICAgICovXG4gICAgZ2V0VmFsaWRGb2N1c2FibGVJdGVtKCkge1xuICAgICAgICBjb25zdCB0cmVlSXRlbXMgPSB0aGlzLmdldFZpc2libGVOb2RlcygpO1xuICAgICAgICAvLyBkZWZhdWx0IHRvIHNlbGVjdGVkIGVsZW1lbnQgaWYgdGhlcmUgaXMgb25lXG4gICAgICAgIGxldCBmb2N1c0luZGV4ID0gdHJlZUl0ZW1zLmZpbmRJbmRleCh0aGlzLmlzU2VsZWN0ZWRFbGVtZW50KTtcbiAgICAgICAgaWYgKGZvY3VzSW5kZXggPT09IC0xKSB7XG4gICAgICAgICAgICAvLyBvdGhlcndpc2UgZmlyc3QgZm9jdXNhYmxlIHRyZWUgaXRlbVxuICAgICAgICAgICAgZm9jdXNJbmRleCA9IHRyZWVJdGVtcy5maW5kSW5kZXgodGhpcy5pc0ZvY3VzYWJsZUVsZW1lbnQpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChmb2N1c0luZGV4ICE9PSAtMSkge1xuICAgICAgICAgICAgcmV0dXJuIHRyZWVJdGVtc1tmb2N1c0luZGV4XTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogY2hlY2tzIGlmIHRoZXJlIGFyZSBhbnkgbmVzdGVkIHRyZWUgaXRlbXNcbiAgICAgKi9cbiAgICBjaGVja0Zvck5lc3RlZEl0ZW1zKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zbG90dGVkVHJlZUl0ZW1zLnNvbWUoKG5vZGUpID0+IHtcbiAgICAgICAgICAgIHJldHVybiBpc1RyZWVJdGVtRWxlbWVudChub2RlKSAmJiBub2RlLnF1ZXJ5U2VsZWN0b3IoXCJbcm9sZT0ndHJlZWl0ZW0nXVwiKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGdldFZpc2libGVOb2RlcygpIHtcbiAgICAgICAgcmV0dXJuIGdldERpc3BsYXllZE5vZGVzKHRoaXMsIFwiW3JvbGU9J3RyZWVpdGVtJ11cIikgfHwgW107XG4gICAgfVxufVxuX19kZWNvcmF0ZShbXG4gICAgYXR0cih7IGF0dHJpYnV0ZTogXCJyZW5kZXItY29sbGFwc2VkLW5vZGVzXCIgfSlcbl0sIFRyZWVWaWV3LnByb3RvdHlwZSwgXCJyZW5kZXJDb2xsYXBzZWROb2Rlc1wiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgb2JzZXJ2YWJsZVxuXSwgVHJlZVZpZXcucHJvdG90eXBlLCBcImN1cnJlbnRTZWxlY3RlZFwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgb2JzZXJ2YWJsZVxuXSwgVHJlZVZpZXcucHJvdG90eXBlLCBcInNsb3R0ZWRUcmVlSXRlbXNcIiwgdm9pZCAwKTtcbiIsImltcG9ydCB7IGh0bWwsIHJlZiwgc2xvdHRlZCB9IGZyb20gXCJAbWljcm9zb2Z0L2Zhc3QtZWxlbWVudFwiO1xuLyoqXG4gKiBUaGUgdGVtcGxhdGUgZm9yIHRoZSB7QGxpbmsgQG1pY3Jvc29mdC9mYXN0LWZvdW5kYXRpb24jVHJlZVZpZXd9IGNvbXBvbmVudC5cbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGNvbnN0IHRyZWVWaWV3VGVtcGxhdGUgPSAoY29udGV4dCwgZGVmaW5pdGlvbikgPT4gaHRtbCBgXG4gICAgPHRlbXBsYXRlXG4gICAgICAgIHJvbGU9XCJ0cmVlXCJcbiAgICAgICAgJHtyZWYoXCJ0cmVlVmlld1wiKX1cbiAgICAgICAgQGtleWRvd249XCIkeyh4LCBjKSA9PiB4LmhhbmRsZUtleURvd24oYy5ldmVudCl9XCJcbiAgICAgICAgQGZvY3VzaW49XCIkeyh4LCBjKSA9PiB4LmhhbmRsZUZvY3VzKGMuZXZlbnQpfVwiXG4gICAgICAgIEBmb2N1c291dD1cIiR7KHgsIGMpID0+IHguaGFuZGxlQmx1cihjLmV2ZW50KX1cIlxuICAgICAgICBAY2xpY2s9XCIkeyh4LCBjKSA9PiB4LmhhbmRsZUNsaWNrKGMuZXZlbnQpfVwiXG4gICAgICAgIEBzZWxlY3RlZC1jaGFuZ2U9XCIkeyh4LCBjKSA9PiB4LmhhbmRsZVNlbGVjdGVkQ2hhbmdlKGMuZXZlbnQpfVwiXG4gICAgPlxuICAgICAgICA8c2xvdCAke3Nsb3R0ZWQoXCJzbG90dGVkVHJlZUl0ZW1zXCIpfT48L3Nsb3Q+XG4gICAgPC90ZW1wbGF0ZT5cbmA7XG4iLCJpbXBvcnQgeyBBdHRyaWJ1dGVDb25maWd1cmF0aW9uIH0gZnJvbSBcIkBtaWNyb3NvZnQvZmFzdC1lbGVtZW50XCI7XG4vKipcbiAqIEFwcGx5IG1peGlucyB0byBhIGNvbnN0cnVjdG9yLlxuICogU291cmNlZCBmcm9tIHtAbGluayBodHRwczovL3d3dy50eXBlc2NyaXB0bGFuZy5vcmcvZG9jcy9oYW5kYm9vay9taXhpbnMuaHRtbCB8IFR5cGVTY3JpcHQgRG9jdW1lbnRhdGlvbiB9LlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgZnVuY3Rpb24gYXBwbHlNaXhpbnMoZGVyaXZlZEN0b3IsIC4uLmJhc2VDdG9ycykge1xuICAgIGNvbnN0IGRlcml2ZWRBdHRyaWJ1dGVzID0gQXR0cmlidXRlQ29uZmlndXJhdGlvbi5sb2NhdGUoZGVyaXZlZEN0b3IpO1xuICAgIGJhc2VDdG9ycy5mb3JFYWNoKGJhc2VDdG9yID0+IHtcbiAgICAgICAgT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoYmFzZUN0b3IucHJvdG90eXBlKS5mb3JFYWNoKG5hbWUgPT4ge1xuICAgICAgICAgICAgaWYgKG5hbWUgIT09IFwiY29uc3RydWN0b3JcIikge1xuICAgICAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShkZXJpdmVkQ3Rvci5wcm90b3R5cGUsIG5hbWUsIFxuICAgICAgICAgICAgICAgIC8qIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tbm9uLW51bGwtYXNzZXJ0aW9uICovXG4gICAgICAgICAgICAgICAgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihiYXNlQ3Rvci5wcm90b3R5cGUsIG5hbWUpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IGJhc2VBdHRyaWJ1dGVzID0gQXR0cmlidXRlQ29uZmlndXJhdGlvbi5sb2NhdGUoYmFzZUN0b3IpO1xuICAgICAgICBiYXNlQXR0cmlidXRlcy5mb3JFYWNoKHggPT4gZGVyaXZlZEF0dHJpYnV0ZXMucHVzaCh4KSk7XG4gICAgfSk7XG59XG4iLCJpbXBvcnQgeyBjb21wb3NlZFBhcmVudCB9IGZyb20gXCIuL2NvbXBvc2VkLXBhcmVudC5qc1wiO1xuLyoqXG4gKiBEZXRlcm1pbmVzIGlmIHRoZSByZWZlcmVuY2UgZWxlbWVudCBjb250YWlucyB0aGUgdGVzdCBlbGVtZW50IGluIGEgXCJjb21wb3NlZFwiIERPTSB0cmVlIHRoYXRcbiAqIGlnbm9yZXMgc2hhZG93IERPTSBib3VuZGFyaWVzLlxuICpcbiAqIFJldHVybnMgdHJ1ZSBvZiB0aGUgdGVzdCBlbGVtZW50IGlzIGEgZGVzY2VuZGVudCBvZiB0aGUgcmVmZXJlbmNlLCBvciBleGlzdCBpblxuICogYSBzaGFkb3cgRE9NIHRoYXQgaXMgYSBsb2dpY2FsIGRlc2NlbmRlbnQgb2YgdGhlIHJlZmVyZW5jZS4gT3RoZXJ3aXNlIHJldHVybnMgZmFsc2UuXG4gKiBAcGFyYW0gcmVmZXJlbmNlIC0gVGhlIGVsZW1lbnQgdG8gdGVzdCBmb3IgY29udGFpbm1lbnQgYWdhaW5zdC5cbiAqIEBwYXJhbSB0ZXN0IC0gVGhlIGVsZW1lbnQgYmVpbmcgdGVzdGVkIGZvciBjb250YWlubWVudC5cbiAqXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjb21wb3NlZENvbnRhaW5zKHJlZmVyZW5jZSwgdGVzdCkge1xuICAgIGxldCBjdXJyZW50ID0gdGVzdDtcbiAgICB3aGlsZSAoY3VycmVudCAhPT0gbnVsbCkge1xuICAgICAgICBpZiAoY3VycmVudCA9PT0gcmVmZXJlbmNlKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBjdXJyZW50ID0gY29tcG9zZWRQYXJlbnQoY3VycmVudCk7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn1cbiIsIi8qKlxuICogUmV0cmlldmVzIHRoZSBcImNvbXBvc2VkIHBhcmVudFwiIGVsZW1lbnQgb2YgYSBub2RlLCBpZ25vcmluZyBET00gdHJlZSBib3VuZGFyaWVzLlxuICogV2hlbiB0aGUgcGFyZW50IG9mIGEgbm9kZSBpcyBhIHNoYWRvdy1yb290LCBpdCB3aWxsIHJldHVybiB0aGUgaG9zdFxuICogZWxlbWVudCBvZiB0aGUgc2hhZG93IHJvb3QuIE90aGVyd2lzZSBpdCB3aWxsIHJldHVybiB0aGUgcGFyZW50IG5vZGUgb3IgbnVsbCBpZlxuICogbm8gcGFyZW50IG5vZGUgZXhpc3RzLlxuICogQHBhcmFtIGVsZW1lbnQgLSBUaGUgZWxlbWVudCBmb3Igd2hpY2ggdG8gcmV0cmlldmUgdGhlIGNvbXBvc2VkIHBhcmVudFxuICpcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNvbXBvc2VkUGFyZW50KGVsZW1lbnQpIHtcbiAgICBjb25zdCBwYXJlbnROb2RlID0gZWxlbWVudC5wYXJlbnRFbGVtZW50O1xuICAgIGlmIChwYXJlbnROb2RlKSB7XG4gICAgICAgIHJldHVybiBwYXJlbnROb2RlO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgY29uc3Qgcm9vdE5vZGUgPSBlbGVtZW50LmdldFJvb3ROb2RlKCk7XG4gICAgICAgIGlmIChyb290Tm9kZS5ob3N0IGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpIHtcbiAgICAgICAgICAgIC8vIHRoaXMgaXMgc2hhZG93LXJvb3RcbiAgICAgICAgICAgIHJldHVybiByb290Tm9kZS5ob3N0O1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xufVxuIiwiaW1wb3J0IHsgRGlyZWN0aW9uIH0gZnJvbSBcIkBtaWNyb3NvZnQvZmFzdC13ZWItdXRpbGl0aWVzXCI7XG4vKipcbiAqIGEgbWV0aG9kIHRvIGRldGVybWluZSB0aGUgY3VycmVudCBsb2NhbGl6YXRpb24gZGlyZWN0aW9uIG9mIHRoZSB2aWV3XG4gKiBAcGFyYW0gcm9vdE5vZGUgLSB0aGUgSFRNTEVsZW1lbnQgdG8gYmVnaW4gdGhlIHF1ZXJ5IGZyb20sIHVzdWFsbHkgXCJ0aGlzXCIgd2hlbiB1c2VkIGluIGEgY29tcG9uZW50IGNvbnRyb2xsZXJcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGNvbnN0IGdldERpcmVjdGlvbiA9IChyb290Tm9kZSkgPT4ge1xuICAgIGNvbnN0IGRpck5vZGUgPSByb290Tm9kZS5jbG9zZXN0KFwiW2Rpcl1cIik7XG4gICAgcmV0dXJuIGRpck5vZGUgIT09IG51bGwgJiYgZGlyTm9kZS5kaXIgPT09IFwicnRsXCIgPyBEaXJlY3Rpb24ucnRsIDogRGlyZWN0aW9uLmx0cjtcbn07XG4iLCJleHBvcnQgKiBmcm9tIFwiLi9hcHBseS1taXhpbnMuanNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL2NvbXBvc2VkLXBhcmVudC5qc1wiO1xuZXhwb3J0IHsgY29tcG9zZWRDb250YWlucyB9IGZyb20gXCIuL2NvbXBvc2VkLWNvbnRhaW5zLmpzXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9tYXRjaC1tZWRpYS1zdHlsZXNoZWV0LWJlaGF2aW9yLmpzXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9wcm9wZXJ0eS1zdHlsZXNoZWV0LWJlaGF2aW9yLmpzXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9zdHlsZS9pbmRleC5qc1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vZGlyZWN0aW9uLmpzXCI7XG5leHBvcnQgKiBmcm9tIFwiLi93aGl0ZXNwYWNlLWZpbHRlci5qc1wiO1xuIiwiaW1wb3J0IHsgJGdsb2JhbCB9IGZyb20gXCJAbWljcm9zb2Z0L2Zhc3QtZWxlbWVudFwiO1xuLyoqXG4gKiAgQSBzZXJ2aWNlIHRvIGJhdGNoIGludGVyc2VjdGlvbiBldmVudCBjYWxsYmFja3Mgc28gbXVsdGlwbGUgZWxlbWVudHMgY2FuIHNoYXJlIGEgc2luZ2xlIG9ic2VydmVyXG4gKlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgY2xhc3MgSW50ZXJzZWN0aW9uU2VydmljZSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuaW50ZXJzZWN0aW9uRGV0ZWN0b3IgPSBudWxsO1xuICAgICAgICB0aGlzLm9ic2VydmVkRWxlbWVudHMgPSBuZXcgTWFwKCk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBSZXF1ZXN0IHRoZSBwb3NpdGlvbiBvZiBhIHRhcmdldCBlbGVtZW50XG4gICAgICAgICAqXG4gICAgICAgICAqIEBpbnRlcm5hbFxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5yZXF1ZXN0UG9zaXRpb24gPSAodGFyZ2V0LCBjYWxsYmFjaykgPT4ge1xuICAgICAgICAgICAgdmFyIF9hO1xuICAgICAgICAgICAgaWYgKHRoaXMuaW50ZXJzZWN0aW9uRGV0ZWN0b3IgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5vYnNlcnZlZEVsZW1lbnRzLmhhcyh0YXJnZXQpKSB7XG4gICAgICAgICAgICAgICAgKF9hID0gdGhpcy5vYnNlcnZlZEVsZW1lbnRzLmdldCh0YXJnZXQpKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EucHVzaChjYWxsYmFjayk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5vYnNlcnZlZEVsZW1lbnRzLnNldCh0YXJnZXQsIFtjYWxsYmFja10pO1xuICAgICAgICAgICAgdGhpcy5pbnRlcnNlY3Rpb25EZXRlY3Rvci5vYnNlcnZlKHRhcmdldCk7XG4gICAgICAgIH07XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDYW5jZWwgYSBwb3NpdGlvbiByZXF1ZXN0XG4gICAgICAgICAqXG4gICAgICAgICAqIEBpbnRlcm5hbFxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5jYW5jZWxSZXF1ZXN0UG9zaXRpb24gPSAodGFyZ2V0LCBjYWxsYmFjaykgPT4ge1xuICAgICAgICAgICAgY29uc3QgY2FsbGJhY2tzID0gdGhpcy5vYnNlcnZlZEVsZW1lbnRzLmdldCh0YXJnZXQpO1xuICAgICAgICAgICAgaWYgKGNhbGxiYWNrcyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgY2FsbEJhY2tJbmRleCA9IGNhbGxiYWNrcy5pbmRleE9mKGNhbGxiYWNrKTtcbiAgICAgICAgICAgICAgICBpZiAoY2FsbEJhY2tJbmRleCAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2tzLnNwbGljZShjYWxsQmFja0luZGV4LCAxKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBpbml0aWFsaXplIGludGVyc2VjdGlvbiBkZXRlY3RvclxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5pbml0aWFsaXplSW50ZXJzZWN0aW9uRGV0ZWN0b3IgPSAoKSA9PiB7XG4gICAgICAgICAgICBpZiAoISRnbG9iYWwuSW50ZXJzZWN0aW9uT2JzZXJ2ZXIpIHtcbiAgICAgICAgICAgICAgICAvL2ludGVyc2VjdGlvbiBvYnNlcnZlciBub3Qgc3VwcG9ydGVkXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5pbnRlcnNlY3Rpb25EZXRlY3RvciA9IG5ldyBJbnRlcnNlY3Rpb25PYnNlcnZlcih0aGlzLmhhbmRsZUludGVyc2VjdGlvbiwge1xuICAgICAgICAgICAgICAgIHJvb3Q6IG51bGwsXG4gICAgICAgICAgICAgICAgcm9vdE1hcmdpbjogXCIwcHhcIixcbiAgICAgICAgICAgICAgICB0aHJlc2hvbGQ6IFswLCAxXSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICAvKipcbiAgICAgICAgICogIEhhbmRsZSBpbnRlcnNlY3Rpb25zXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmhhbmRsZUludGVyc2VjdGlvbiA9IChlbnRyaWVzKSA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy5pbnRlcnNlY3Rpb25EZXRlY3RvciA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHBlbmRpbmdDYWxsYmFja3MgPSBbXTtcbiAgICAgICAgICAgIGNvbnN0IHBlbmRpbmdDYWxsYmFja1BhcmFtcyA9IFtdO1xuICAgICAgICAgICAgLy8gZ28gdGhyb3VnaCB0aGUgZW50cmllcyB0byBidWlsZCBhIGxpc3Qgb2YgY2FsbGJhY2tzIGFuZCBwYXJhbXMgZm9yIGVhY2hcbiAgICAgICAgICAgIGVudHJpZXMuZm9yRWFjaCgoZW50cnkpID0+IHtcbiAgICAgICAgICAgICAgICB2YXIgX2E7XG4gICAgICAgICAgICAgICAgLy8gc3RvcCB3YXRjaGluZyB0aGlzIGVsZW1lbnQgdW50aWwgd2UgZ2V0IG5ldyB1cGRhdGUgcmVxdWVzdHMgZm9yIGl0XG4gICAgICAgICAgICAgICAgKF9hID0gdGhpcy5pbnRlcnNlY3Rpb25EZXRlY3RvcikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnVub2JzZXJ2ZShlbnRyeS50YXJnZXQpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHRoaXNFbGVtZW50Q2FsbGJhY2tzID0gdGhpcy5vYnNlcnZlZEVsZW1lbnRzLmdldChlbnRyeS50YXJnZXQpO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzRWxlbWVudENhbGxiYWNrcyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXNFbGVtZW50Q2FsbGJhY2tzLmZvckVhY2goKGNhbGxiYWNrKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgdGFyZ2V0Q2FsbGJhY2tJbmRleCA9IHBlbmRpbmdDYWxsYmFja3MuaW5kZXhPZihjYWxsYmFjayk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGFyZ2V0Q2FsbGJhY2tJbmRleCA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRDYWxsYmFja0luZGV4ID0gcGVuZGluZ0NhbGxiYWNrcy5sZW5ndGg7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVuZGluZ0NhbGxiYWNrcy5wdXNoKGNhbGxiYWNrKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZW5kaW5nQ2FsbGJhY2tQYXJhbXMucHVzaChbXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBwZW5kaW5nQ2FsbGJhY2tQYXJhbXNbdGFyZ2V0Q2FsbGJhY2tJbmRleF0ucHVzaChlbnRyeSk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm9ic2VydmVkRWxlbWVudHMuZGVsZXRlKGVudHJ5LnRhcmdldCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAvLyBleGVjdXRlIGNhbGxiYWNrc1xuICAgICAgICAgICAgcGVuZGluZ0NhbGxiYWNrcy5mb3JFYWNoKChjYWxsYmFjaywgaW5kZXgpID0+IHtcbiAgICAgICAgICAgICAgICBjYWxsYmFjayhwZW5kaW5nQ2FsbGJhY2tQYXJhbXNbaW5kZXhdKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmluaXRpYWxpemVJbnRlcnNlY3Rpb25EZXRlY3RvcigpO1xuICAgIH1cbn1cbiIsIi8qKlxuICogQW4gYWJzdHJhY3QgYmVoYXZpb3IgdG8gcmVhY3QgdG8gbWVkaWEgcXVlcmllcy4gSW1wbGVtZW50YXRpb25zIHNob3VsZCBpbXBsZW1lbnRcbiAqIHRoZSBgY29uc3RydWN0TGlzdGVuZXJgIG1ldGhvZCB0byBwZXJmb3JtIHNvbWUgYWN0aW9uIGJhc2VkIG9uIG1lZGlhIHF1ZXJ5IGNoYW5nZXMuXG4gKlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgY2xhc3MgTWF0Y2hNZWRpYUJlaGF2aW9yIHtcbiAgICAvKipcbiAgICAgKlxuICAgICAqIEBwYXJhbSBxdWVyeSAtIFRoZSBtZWRpYSBxdWVyeSB0byBvcGVyYXRlIGZyb20uXG4gICAgICovXG4gICAgY29uc3RydWN0b3IocXVlcnkpIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBiZWhhdmlvciBuZWVkcyB0byBvcGVyYXRlIG9uIGVsZW1lbnQgaW5zdGFuY2VzIGJ1dCBlbGVtZW50cyBtaWdodCBzaGFyZSBhIGJlaGF2aW9yIGluc3RhbmNlLlxuICAgICAgICAgKiBUbyBlbnN1cmUgcHJvcGVyIGF0dGFjaG1lbnQgLyBkZXRhY2htZW50IHBlciBpbnN0YW5jZSwgd2UgY29uc3RydWN0IGEgbGlzdGVuZXIgZm9yXG4gICAgICAgICAqIGVhY2ggYmluZCBpbnZvY2F0aW9uIGFuZCBjYWNoZSB0aGUgbGlzdGVuZXJzIGJ5IGVsZW1lbnQgcmVmZXJlbmNlLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5saXN0ZW5lckNhY2hlID0gbmV3IFdlYWtNYXAoKTtcbiAgICAgICAgdGhpcy5xdWVyeSA9IHF1ZXJ5O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBCaW5kcyB0aGUgYmVoYXZpb3IgdG8gdGhlIGVsZW1lbnQuXG4gICAgICogQHBhcmFtIHNvdXJjZSAtIFRoZSBlbGVtZW50IGZvciB3aGljaCB0aGUgYmVoYXZpb3IgaXMgYm91bmQuXG4gICAgICovXG4gICAgYmluZChzb3VyY2UpIHtcbiAgICAgICAgY29uc3QgeyBxdWVyeSB9ID0gdGhpcztcbiAgICAgICAgY29uc3QgbGlzdGVuZXIgPSB0aGlzLmNvbnN0cnVjdExpc3RlbmVyKHNvdXJjZSk7XG4gICAgICAgIC8vIEludm9rZSBpbW1lZGlhdGVseSB0byBhZGQgaWYgdGhlIHF1ZXJ5IGN1cnJlbnRseSBtYXRjaGVzXG4gICAgICAgIGxpc3RlbmVyLmJpbmQocXVlcnkpKCk7XG4gICAgICAgIHF1ZXJ5LmFkZExpc3RlbmVyKGxpc3RlbmVyKTtcbiAgICAgICAgdGhpcy5saXN0ZW5lckNhY2hlLnNldChzb3VyY2UsIGxpc3RlbmVyKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVW5iaW5kcyB0aGUgYmVoYXZpb3IgZnJvbSB0aGUgZWxlbWVudC5cbiAgICAgKiBAcGFyYW0gc291cmNlIC0gVGhlIGVsZW1lbnQgZm9yIHdoaWNoIHRoZSBiZWhhdmlvciBpcyB1bmJpbmRpbmcuXG4gICAgICovXG4gICAgdW5iaW5kKHNvdXJjZSkge1xuICAgICAgICBjb25zdCBsaXN0ZW5lciA9IHRoaXMubGlzdGVuZXJDYWNoZS5nZXQoc291cmNlKTtcbiAgICAgICAgaWYgKGxpc3RlbmVyKSB7XG4gICAgICAgICAgICB0aGlzLnF1ZXJ5LnJlbW92ZUxpc3RlbmVyKGxpc3RlbmVyKTtcbiAgICAgICAgICAgIHRoaXMubGlzdGVuZXJDYWNoZS5kZWxldGUoc291cmNlKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbi8qKlxuICogQSBiZWhhdmlvciB0byBhZGQgb3IgcmVtb3ZlIGEgc3R5bGVzaGVldCBmcm9tIGFuIGVsZW1lbnQgYmFzZWQgb24gYSBtZWRpYSBxdWVyeS4gVGhlIGJlaGF2aW9yIGVuc3VyZXMgdGhhdFxuICogc3R5bGVzIGFyZSBhcHBsaWVkIHdoaWxlIHRoZSBhIHF1ZXJ5IG1hdGNoZXMgdGhlIGVudmlyb25tZW50IGFuZCB0aGF0IHN0eWxlcyBhcmUgbm90IGFwcGxpZWQgaWYgdGhlIHF1ZXJ5IGRvZXNcbiAqIG5vdCBtYXRjaCB0aGUgZW52aXJvbm1lbnQuXG4gKlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgY2xhc3MgTWF0Y2hNZWRpYVN0eWxlU2hlZXRCZWhhdmlvciBleHRlbmRzIE1hdGNoTWVkaWFCZWhhdmlvciB7XG4gICAgLyoqXG4gICAgICogQ29uc3RydWN0cyBhIHtAbGluayBNYXRjaE1lZGlhU3R5bGVTaGVldEJlaGF2aW9yfSBpbnN0YW5jZS5cbiAgICAgKiBAcGFyYW0gcXVlcnkgLSBUaGUgbWVkaWEgcXVlcnkgdG8gb3BlcmF0ZSBmcm9tLlxuICAgICAqIEBwYXJhbSBzdHlsZXMgLSBUaGUgc3R5bGVzIHRvIGNvb3JkaW5hdGUgd2l0aCB0aGUgcXVlcnkuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IocXVlcnksIHN0eWxlcykge1xuICAgICAgICBzdXBlcihxdWVyeSk7XG4gICAgICAgIHRoaXMuc3R5bGVzID0gc3R5bGVzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBEZWZpbmVzIGEgZnVuY3Rpb24gdG8gY29uc3RydWN0IHtAbGluayBNYXRjaE1lZGlhU3R5bGVTaGVldEJlaGF2aW9yIHwgTWF0Y2hNZWRpYVN0eWxlU2hlZXRCZWhhdmlvcnN9IGZvclxuICAgICAqIGEgcHJvdmlkZWQgcXVlcnkuXG4gICAgICogQHBhcmFtIHF1ZXJ5IC0gVGhlIG1lZGlhIHF1ZXJ5IHRvIG9wZXJhdGUgZnJvbS5cbiAgICAgKlxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogYGBgdHNcbiAgICAgKiBpbXBvcnQgeyBjc3MgfSBmcm9tIFwiQG1pY3Jvc29mdC9mYXN0LWVsZW1lbnRcIjtcbiAgICAgKiBpbXBvcnQgeyBNYXRjaE1lZGlhU3R5bGVTaGVldEJlaGF2aW9yIH0gZnJvbSBcIkBtaWNyb3NvZnQvZmFzdC1mb3VuZGF0aW9uXCI7XG4gICAgICpcbiAgICAgKiBjb25zdCBsYW5kc2NhcGVCZWhhdmlvciA9IE1hdGNoTWVkaWFTdHlsZVNoZWV0QmVoYXZpb3Iud2l0aChcbiAgICAgKiAgIHdpbmRvdy5tYXRjaE1lZGlhKFwiKG9yaWVudGF0aW9uOiBsYW5kc2NhcGUpXCIpXG4gICAgICogKTtcbiAgICAgKiBjb25zdCBzdHlsZXMgPSBjc3NgXG4gICAgICogICA6aG9zdCB7XG4gICAgICogICAgIHdpZHRoOiAyMDBweDtcbiAgICAgKiAgICAgaGVpZ2h0OiA0MDBweDtcbiAgICAgKiAgIH1cbiAgICAgKiBgXG4gICAgICogLndpdGhCZWhhdmlvcnMobGFuZHNjYXBlQmVoYXZpb3IoY3NzYFxuICAgICAqICAgOmhvc3Qge1xuICAgICAqICAgICB3aWR0aDogNDAwcHg7XG4gICAgICogICAgIGhlaWdodDogMjAwcHg7XG4gICAgICogICB9XG4gICAgICogYCkpXG4gICAgICogYGBgXG4gICAgICovXG4gICAgc3RhdGljIHdpdGgocXVlcnkpIHtcbiAgICAgICAgcmV0dXJuIChzdHlsZXMpID0+IHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgTWF0Y2hNZWRpYVN0eWxlU2hlZXRCZWhhdmlvcihxdWVyeSwgc3R5bGVzKTtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ29uc3RydWN0cyBhIG1hdGNoLW1lZGlhIGxpc3RlbmVyIGZvciBhIHByb3ZpZGVkIGVsZW1lbnQuXG4gICAgICogQHBhcmFtIHNvdXJjZSAtIHRoZSBlbGVtZW50IGZvciB3aGljaCB0byBhdHRhY2ggb3IgZGV0YWNoIHN0eWxlcy5cbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RMaXN0ZW5lcihzb3VyY2UpIHtcbiAgICAgICAgbGV0IGF0dGFjaGVkID0gZmFsc2U7XG4gICAgICAgIGNvbnN0IHN0eWxlcyA9IHRoaXMuc3R5bGVzO1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gbGlzdGVuZXIoKSB7XG4gICAgICAgICAgICBjb25zdCB7IG1hdGNoZXMgfSA9IHRoaXM7XG4gICAgICAgICAgICBpZiAobWF0Y2hlcyAmJiAhYXR0YWNoZWQpIHtcbiAgICAgICAgICAgICAgICBzb3VyY2UuJGZhc3RDb250cm9sbGVyLmFkZFN0eWxlcyhzdHlsZXMpO1xuICAgICAgICAgICAgICAgIGF0dGFjaGVkID0gbWF0Y2hlcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKCFtYXRjaGVzICYmIGF0dGFjaGVkKSB7XG4gICAgICAgICAgICAgICAgc291cmNlLiRmYXN0Q29udHJvbGxlci5yZW1vdmVTdHlsZXMoc3R5bGVzKTtcbiAgICAgICAgICAgICAgICBhdHRhY2hlZCA9IG1hdGNoZXM7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFVuYmluZHMgdGhlIGJlaGF2aW9yIGZyb20gdGhlIGVsZW1lbnQuXG4gICAgICogQHBhcmFtIHNvdXJjZSAtIFRoZSBlbGVtZW50IGZvciB3aGljaCB0aGUgYmVoYXZpb3IgaXMgdW5iaW5kaW5nLlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIHVuYmluZChzb3VyY2UpIHtcbiAgICAgICAgc3VwZXIudW5iaW5kKHNvdXJjZSk7XG4gICAgICAgIHNvdXJjZS4kZmFzdENvbnRyb2xsZXIucmVtb3ZlU3R5bGVzKHRoaXMuc3R5bGVzKTtcbiAgICB9XG59XG4vKipcbiAqIFRoaXMgY2FuIGJlIHVzZWQgdG8gY29uc3RydWN0IGEgYmVoYXZpb3IgdG8gYXBwbHkgYSBmb3JjZWQtY29sb3JzIG9ubHkgc3R5bGVzaGVldC5cbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGNvbnN0IGZvcmNlZENvbG9yc1N0eWxlc2hlZXRCZWhhdmlvciA9IE1hdGNoTWVkaWFTdHlsZVNoZWV0QmVoYXZpb3Iud2l0aCh3aW5kb3cubWF0Y2hNZWRpYShcIihmb3JjZWQtY29sb3JzKVwiKSk7XG4vKipcbiAqIFRoaXMgY2FuIGJlIHVzZWQgdG8gY29uc3RydWN0IGEgYmVoYXZpb3IgdG8gYXBwbHkgYSBwcmVmZXJzIGNvbG9yIHNjaGVtZTogZGFyayBvbmx5IHN0eWxlc2hlZXQuXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjb25zdCBkYXJrTW9kZVN0eWxlc2hlZXRCZWhhdmlvciA9IE1hdGNoTWVkaWFTdHlsZVNoZWV0QmVoYXZpb3Iud2l0aCh3aW5kb3cubWF0Y2hNZWRpYShcIihwcmVmZXJzLWNvbG9yLXNjaGVtZTogZGFyaylcIikpO1xuLyoqXG4gKiBUaGlzIGNhbiBiZSB1c2VkIHRvIGNvbnN0cnVjdCBhIGJlaGF2aW9yIHRvIGFwcGx5IGEgcHJlZmVycyBjb2xvciBzY2hlbWU6IGxpZ2h0IG9ubHkgc3R5bGVzaGVldC5cbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGNvbnN0IGxpZ2h0TW9kZVN0eWxlc2hlZXRCZWhhdmlvciA9IE1hdGNoTWVkaWFTdHlsZVNoZWV0QmVoYXZpb3Iud2l0aCh3aW5kb3cubWF0Y2hNZWRpYShcIihwcmVmZXJzLWNvbG9yLXNjaGVtZTogbGlnaHQpXCIpKTtcbiIsImltcG9ydCB7IE9ic2VydmFibGUsIH0gZnJvbSBcIkBtaWNyb3NvZnQvZmFzdC1lbGVtZW50XCI7XG4vKipcbiAqIEEgYmVoYXZpb3IgdG8gYWRkIG9yIHJlbW92ZSBhIHN0eWxlc2hlZXQgZnJvbSBhbiBlbGVtZW50IGJhc2VkIG9uIGEgcHJvcGVydHkuIFRoZSBiZWhhdmlvciBlbnN1cmVzIHRoYXRcbiAqIHN0eWxlcyBhcmUgYXBwbGllZCB3aGlsZSB0aGUgcHJvcGVydHkgbWF0Y2hlcyBhbmQgdGhhdCBzdHlsZXMgYXJlIG5vdCBhcHBsaWVkIGlmIHRoZSBwcm9wZXJ0eSBkb2VzXG4gKiBub3QgbWF0Y2guXG4gKlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgY2xhc3MgUHJvcGVydHlTdHlsZVNoZWV0QmVoYXZpb3Ige1xuICAgIC8qKlxuICAgICAqIENvbnN0cnVjdHMgYSB7QGxpbmsgUHJvcGVydHlTdHlsZVNoZWV0QmVoYXZpb3J9IGluc3RhbmNlLlxuICAgICAqIEBwYXJhbSBwcm9wZXJ0eU5hbWUgLSBUaGUgcHJvcGVydHkgbmFtZSB0byBvcGVyYXRlIGZyb20uXG4gICAgICogQHBhcmFtIHZhbHVlIC0gVGhlIHByb3BlcnR5IHZhbHVlIHRvIG9wZXJhdGUgZnJvbS5cbiAgICAgKiBAcGFyYW0gc3R5bGVzIC0gVGhlIHN0eWxlcyB0byBjb29yZGluYXRlIHdpdGggdGhlIHByb3BlcnR5LlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHByb3BlcnR5TmFtZSwgdmFsdWUsIHN0eWxlcykge1xuICAgICAgICB0aGlzLnByb3BlcnR5TmFtZSA9IHByb3BlcnR5TmFtZTtcbiAgICAgICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xuICAgICAgICB0aGlzLnN0eWxlcyA9IHN0eWxlcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQmluZHMgdGhlIGJlaGF2aW9yIHRvIHRoZSBlbGVtZW50LlxuICAgICAqIEBwYXJhbSBlbGVtZW50SW5zdGFuY2UgLSBUaGUgZWxlbWVudCBmb3Igd2hpY2ggdGhlIHByb3BlcnR5IGlzIGFwcGxpZWQuXG4gICAgICovXG4gICAgYmluZChlbGVtZW50SW5zdGFuY2UpIHtcbiAgICAgICAgT2JzZXJ2YWJsZS5nZXROb3RpZmllcihlbGVtZW50SW5zdGFuY2UpLnN1YnNjcmliZSh0aGlzLCB0aGlzLnByb3BlcnR5TmFtZSk7XG4gICAgICAgIHRoaXMuaGFuZGxlQ2hhbmdlKGVsZW1lbnRJbnN0YW5jZSwgdGhpcy5wcm9wZXJ0eU5hbWUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBVbmJpbmRzIHRoZSBiZWhhdmlvciBmcm9tIHRoZSBlbGVtZW50LlxuICAgICAqIEBwYXJhbSBzb3VyY2UgLSBUaGUgZWxlbWVudCBmb3Igd2hpY2ggdGhlIGJlaGF2aW9yIGlzIHVuYmluZGluZy5cbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICB1bmJpbmQoc291cmNlKSB7XG4gICAgICAgIE9ic2VydmFibGUuZ2V0Tm90aWZpZXIoc291cmNlKS51bnN1YnNjcmliZSh0aGlzLCB0aGlzLnByb3BlcnR5TmFtZSk7XG4gICAgICAgIHNvdXJjZS4kZmFzdENvbnRyb2xsZXIucmVtb3ZlU3R5bGVzKHRoaXMuc3R5bGVzKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2hhbmdlIGV2ZW50IGZvciB0aGUgcHJvdmlkZWQgZWxlbWVudC5cbiAgICAgKiBAcGFyYW0gc291cmNlIC0gdGhlIGVsZW1lbnQgZm9yIHdoaWNoIHRvIGF0dGFjaCBvciBkZXRhY2ggc3R5bGVzLlxuICAgICAqIEBwYXJhbSBrZXkgLSB0aGUga2V5IHRvIGxvb2t1cCB0byBrbm93IGlmIHRoZSBlbGVtZW50IGFscmVhZHkgaGFzIHRoZSBzdHlsZXNcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBoYW5kbGVDaGFuZ2Uoc291cmNlLCBrZXkpIHtcbiAgICAgICAgaWYgKHNvdXJjZVtrZXldID09PSB0aGlzLnZhbHVlKSB7XG4gICAgICAgICAgICBzb3VyY2UuJGZhc3RDb250cm9sbGVyLmFkZFN0eWxlcyh0aGlzLnN0eWxlcyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBzb3VyY2UuJGZhc3RDb250cm9sbGVyLnJlbW92ZVN0eWxlcyh0aGlzLnN0eWxlcyk7XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCIvKipcbiAqIFRoZSBDU1MgdmFsdWUgZm9yIGRpc2FibGVkIGN1cnNvcnMuXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjb25zdCBkaXNhYmxlZEN1cnNvciA9IFwibm90LWFsbG93ZWRcIjtcbiIsIi8qKlxuICogQSBDU1MgZnJhZ21lbnQgdG8gc2V0IGBkaXNwbGF5OiBub25lO2Agd2hlbiB0aGUgaG9zdCBpcyBoaWRkZW4gdXNpbmcgdGhlIFtoaWRkZW5dIGF0dHJpYnV0ZS5cbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGNvbnN0IGhpZGRlbiA9IGA6aG9zdChbaGlkZGVuXSl7ZGlzcGxheTpub25lfWA7XG4vKipcbiAqIEFwcGxpZXMgYSBDU1MgZGlzcGxheSBwcm9wZXJ0eS5cbiAqIEFsc28gYWRkcyBDU1MgcnVsZXMgdG8gbm90IGRpc3BsYXkgdGhlIGVsZW1lbnQgd2hlbiB0aGUgW2hpZGRlbl0gYXR0cmlidXRlIGlzIGFwcGxpZWQgdG8gdGhlIGVsZW1lbnQuXG4gKiBAcGFyYW0gZGlzcGxheSAtIFRoZSBDU1MgZGlzcGxheSBwcm9wZXJ0eSB2YWx1ZVxuICogQHB1YmxpY1xuICovXG5leHBvcnQgZnVuY3Rpb24gZGlzcGxheShkaXNwbGF5VmFsdWUpIHtcbiAgICByZXR1cm4gYCR7aGlkZGVufTpob3N0e2Rpc3BsYXk6JHtkaXNwbGF5VmFsdWV9fWA7XG59XG4iLCJpbXBvcnQgeyBjYW5Vc2VGb2N1c1Zpc2libGUgfSBmcm9tIFwiQG1pY3Jvc29mdC9mYXN0LXdlYi11dGlsaXRpZXNcIjtcbi8qKlxuICogVGhlIHN0cmluZyByZXByZXNlbnRpbmcgdGhlIGZvY3VzIHNlbGVjdG9yIHRvIGJlIHVzZWQuIFZhbHVlXG4gKiB3aWxsIGJlIFwiZm9jdXMtdmlzaWJsZVwiIHdoZW4gaHR0cHM6Ly9kcmFmdHMuY3Nzd2cub3JnL3NlbGVjdG9ycy00LyN0aGUtZm9jdXMtdmlzaWJsZS1wc2V1ZG9cbiAqIGlzIHN1cHBvcnRlZCBhbmQgXCJmb2N1c1wiIHdoZW4gaXQgaXMgbm90LlxuICpcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGNvbnN0IGZvY3VzVmlzaWJsZSA9IGNhblVzZUZvY3VzVmlzaWJsZSgpID8gXCJmb2N1cy12aXNpYmxlXCIgOiBcImZvY3VzXCI7XG4iLCJleHBvcnQgKiBmcm9tIFwiLi9kaXNhYmxlZC5qc1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vZGlzcGxheS5qc1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vZm9jdXMuanNcIjtcbiIsIi8qKlxuICogYSBtZXRob2QgdG8gZmlsdGVyIG91dCBhbnkgd2hpdGVzcGFjZSBfb25seV8gbm9kZXMsIHRvIGJlIHVzZWQgaW5zaWRlIGEgdGVtcGxhdGVcbiAqIEBwYXJhbSB2YWx1ZSAtIFRoZSBOb2RlIHRoYXQgaXMgYmVpbmcgaW5zcGVjdGVkXG4gKiBAcGFyYW0gaW5kZXggLSBUaGUgaW5kZXggb2YgdGhlIG5vZGUgd2l0aGluIHRoZSBhcnJheVxuICogQHBhcmFtIGFycmF5IC0gVGhlIE5vZGUgYXJyYXkgdGhhdCBpcyBiZWluZyBmaWx0ZXJlZFxuICpcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHdoaXRlc3BhY2VGaWx0ZXIodmFsdWUsIGluZGV4LCBhcnJheSkge1xuICAgIHJldHVybiB2YWx1ZS5ub2RlVHlwZSAhPT0gTm9kZS5URVhUX05PREVcbiAgICAgICAgPyB0cnVlXG4gICAgICAgIDogdHlwZW9mIHZhbHVlLm5vZGVWYWx1ZSA9PT0gXCJzdHJpbmdcIiAmJiAhIXZhbHVlLm5vZGVWYWx1ZS50cmltKCkubGVuZ3RoO1xufVxuIiwiLyohICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbkNvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLlxyXG5cclxuUGVybWlzc2lvbiB0byB1c2UsIGNvcHksIG1vZGlmeSwgYW5kL29yIGRpc3RyaWJ1dGUgdGhpcyBzb2Z0d2FyZSBmb3IgYW55XHJcbnB1cnBvc2Ugd2l0aCBvciB3aXRob3V0IGZlZSBpcyBoZXJlYnkgZ3JhbnRlZC5cclxuXHJcblRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIgQU5EIFRIRSBBVVRIT1IgRElTQ0xBSU1TIEFMTCBXQVJSQU5USUVTIFdJVEhcclxuUkVHQVJEIFRPIFRISVMgU09GVFdBUkUgSU5DTFVESU5HIEFMTCBJTVBMSUVEIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZXHJcbkFORCBGSVRORVNTLiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SIEJFIExJQUJMRSBGT1IgQU5ZIFNQRUNJQUwsIERJUkVDVCxcclxuSU5ESVJFQ1QsIE9SIENPTlNFUVVFTlRJQUwgREFNQUdFUyBPUiBBTlkgREFNQUdFUyBXSEFUU09FVkVSIFJFU1VMVElORyBGUk9NXHJcbkxPU1MgT0YgVVNFLCBEQVRBIE9SIFBST0ZJVFMsIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBORUdMSUdFTkNFIE9SXHJcbk9USEVSIFRPUlRJT1VTIEFDVElPTiwgQVJJU0lORyBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBVU0UgT1JcclxuUEVSRk9STUFOQ0UgT0YgVEhJUyBTT0ZUV0FSRS5cclxuKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogKi9cclxuLyogZ2xvYmFsIFJlZmxlY3QsIFByb21pc2UgKi9cclxuXHJcbnZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24oZCwgYikge1xyXG4gICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxyXG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcclxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcclxuICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG59O1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZXh0ZW5kcyhkLCBiKSB7XHJcbiAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XHJcbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XHJcbn1cclxuXHJcbmV4cG9ydCB2YXIgX19hc3NpZ24gPSBmdW5jdGlvbigpIHtcclxuICAgIF9fYXNzaWduID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiBfX2Fzc2lnbih0KSB7XHJcbiAgICAgICAgZm9yICh2YXIgcywgaSA9IDEsIG4gPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgbjsgaSsrKSB7XHJcbiAgICAgICAgICAgIHMgPSBhcmd1bWVudHNbaV07XHJcbiAgICAgICAgICAgIGZvciAodmFyIHAgaW4gcykgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLCBwKSkgdFtwXSA9IHNbcF07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0O1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIF9fYXNzaWduLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3Jlc3QocywgZSkge1xyXG4gICAgdmFyIHQgPSB7fTtcclxuICAgIGZvciAodmFyIHAgaW4gcykgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLCBwKSAmJiBlLmluZGV4T2YocCkgPCAwKVxyXG4gICAgICAgIHRbcF0gPSBzW3BdO1xyXG4gICAgaWYgKHMgIT0gbnVsbCAmJiB0eXBlb2YgT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyA9PT0gXCJmdW5jdGlvblwiKVxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBwID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhzKTsgaSA8IHAubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgaWYgKGUuaW5kZXhPZihwW2ldKSA8IDAgJiYgT2JqZWN0LnByb3RvdHlwZS5wcm9wZXJ0eUlzRW51bWVyYWJsZS5jYWxsKHMsIHBbaV0pKVxyXG4gICAgICAgICAgICAgICAgdFtwW2ldXSA9IHNbcFtpXV07XHJcbiAgICAgICAgfVxyXG4gICAgcmV0dXJuIHQ7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2RlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKSB7XHJcbiAgICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBjIDwgMyA/IHRhcmdldCA6IGRlc2MgPT09IG51bGwgPyBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSkgOiBkZXNjLCBkO1xyXG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0LmRlY29yYXRlID09PSBcImZ1bmN0aW9uXCIpIHIgPSBSZWZsZWN0LmRlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKTtcclxuICAgIGVsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7XHJcbiAgICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19wYXJhbShwYXJhbUluZGV4LCBkZWNvcmF0b3IpIHtcclxuICAgIHJldHVybiBmdW5jdGlvbiAodGFyZ2V0LCBrZXkpIHsgZGVjb3JhdG9yKHRhcmdldCwga2V5LCBwYXJhbUluZGV4KTsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19tZXRhZGF0YShtZXRhZGF0YUtleSwgbWV0YWRhdGFWYWx1ZSkge1xyXG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0Lm1ldGFkYXRhID09PSBcImZ1bmN0aW9uXCIpIHJldHVybiBSZWZsZWN0Lm1ldGFkYXRhKG1ldGFkYXRhS2V5LCBtZXRhZGF0YVZhbHVlKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXdhaXRlcih0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcclxuICAgIGZ1bmN0aW9uIGFkb3B0KHZhbHVlKSB7IHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIFAgPyB2YWx1ZSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUodmFsdWUpOyB9KTsgfVxyXG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxyXG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxyXG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogYWRvcHQocmVzdWx0LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XHJcbiAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2dlbmVyYXRvcih0aGlzQXJnLCBib2R5KSB7XHJcbiAgICB2YXIgXyA9IHsgbGFiZWw6IDAsIHNlbnQ6IGZ1bmN0aW9uKCkgeyBpZiAodFswXSAmIDEpIHRocm93IHRbMV07IHJldHVybiB0WzFdOyB9LCB0cnlzOiBbXSwgb3BzOiBbXSB9LCBmLCB5LCB0LCBnO1xyXG4gICAgcmV0dXJuIGcgPSB7IG5leHQ6IHZlcmIoMCksIFwidGhyb3dcIjogdmVyYigxKSwgXCJyZXR1cm5cIjogdmVyYigyKSB9LCB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgKGdbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpczsgfSksIGc7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4pIHsgcmV0dXJuIGZ1bmN0aW9uICh2KSB7IHJldHVybiBzdGVwKFtuLCB2XSk7IH07IH1cclxuICAgIGZ1bmN0aW9uIHN0ZXAob3ApIHtcclxuICAgICAgICBpZiAoZikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkdlbmVyYXRvciBpcyBhbHJlYWR5IGV4ZWN1dGluZy5cIik7XHJcbiAgICAgICAgd2hpbGUgKF8pIHRyeSB7XHJcbiAgICAgICAgICAgIGlmIChmID0gMSwgeSAmJiAodCA9IG9wWzBdICYgMiA/IHlbXCJyZXR1cm5cIl0gOiBvcFswXSA/IHlbXCJ0aHJvd1wiXSB8fCAoKHQgPSB5W1wicmV0dXJuXCJdKSAmJiB0LmNhbGwoeSksIDApIDogeS5uZXh0KSAmJiAhKHQgPSB0LmNhbGwoeSwgb3BbMV0pKS5kb25lKSByZXR1cm4gdDtcclxuICAgICAgICAgICAgaWYgKHkgPSAwLCB0KSBvcCA9IFtvcFswXSAmIDIsIHQudmFsdWVdO1xyXG4gICAgICAgICAgICBzd2l0Y2ggKG9wWzBdKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDA6IGNhc2UgMTogdCA9IG9wOyBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgNDogXy5sYWJlbCsrOyByZXR1cm4geyB2YWx1ZTogb3BbMV0sIGRvbmU6IGZhbHNlIH07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDU6IF8ubGFiZWwrKzsgeSA9IG9wWzFdOyBvcCA9IFswXTsgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDc6IG9wID0gXy5vcHMucG9wKCk7IF8udHJ5cy5wb3AoKTsgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghKHQgPSBfLnRyeXMsIHQgPSB0Lmxlbmd0aCA+IDAgJiYgdFt0Lmxlbmd0aCAtIDFdKSAmJiAob3BbMF0gPT09IDYgfHwgb3BbMF0gPT09IDIpKSB7IF8gPSAwOyBjb250aW51ZTsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gMyAmJiAoIXQgfHwgKG9wWzFdID4gdFswXSAmJiBvcFsxXSA8IHRbM10pKSkgeyBfLmxhYmVsID0gb3BbMV07IGJyZWFrOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSA2ICYmIF8ubGFiZWwgPCB0WzFdKSB7IF8ubGFiZWwgPSB0WzFdOyB0ID0gb3A7IGJyZWFrOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHQgJiYgXy5sYWJlbCA8IHRbMl0pIHsgXy5sYWJlbCA9IHRbMl07IF8ub3BzLnB1c2gob3ApOyBicmVhazsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0WzJdKSBfLm9wcy5wb3AoKTtcclxuICAgICAgICAgICAgICAgICAgICBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIG9wID0gYm9keS5jYWxsKHRoaXNBcmcsIF8pO1xyXG4gICAgICAgIH0gY2F0Y2ggKGUpIHsgb3AgPSBbNiwgZV07IHkgPSAwOyB9IGZpbmFsbHkgeyBmID0gdCA9IDA7IH1cclxuICAgICAgICBpZiAob3BbMF0gJiA1KSB0aHJvdyBvcFsxXTsgcmV0dXJuIHsgdmFsdWU6IG9wWzBdID8gb3BbMV0gOiB2b2lkIDAsIGRvbmU6IHRydWUgfTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fY3JlYXRlQmluZGluZyhvLCBtLCBrLCBrMikge1xyXG4gICAgaWYgKGsyID09PSB1bmRlZmluZWQpIGsyID0gaztcclxuICAgIG9bazJdID0gbVtrXTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZXhwb3J0U3RhcihtLCBleHBvcnRzKSB7XHJcbiAgICBmb3IgKHZhciBwIGluIG0pIGlmIChwICE9PSBcImRlZmF1bHRcIiAmJiAhZXhwb3J0cy5oYXNPd25Qcm9wZXJ0eShwKSkgZXhwb3J0c1twXSA9IG1bcF07XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3ZhbHVlcyhvKSB7XHJcbiAgICB2YXIgcyA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBTeW1ib2wuaXRlcmF0b3IsIG0gPSBzICYmIG9bc10sIGkgPSAwO1xyXG4gICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7XHJcbiAgICBpZiAobyAmJiB0eXBlb2Ygby5sZW5ndGggPT09IFwibnVtYmVyXCIpIHJldHVybiB7XHJcbiAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAobyAmJiBpID49IG8ubGVuZ3RoKSBvID0gdm9pZCAwO1xyXG4gICAgICAgICAgICByZXR1cm4geyB2YWx1ZTogbyAmJiBvW2krK10sIGRvbmU6ICFvIH07XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIHRocm93IG5ldyBUeXBlRXJyb3IocyA/IFwiT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS5cIiA6IFwiU3ltYm9sLml0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLlwiKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fcmVhZChvLCBuKSB7XHJcbiAgICB2YXIgbSA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvW1N5bWJvbC5pdGVyYXRvcl07XHJcbiAgICBpZiAoIW0pIHJldHVybiBvO1xyXG4gICAgdmFyIGkgPSBtLmNhbGwobyksIHIsIGFyID0gW10sIGU7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIHdoaWxlICgobiA9PT0gdm9pZCAwIHx8IG4tLSA+IDApICYmICEociA9IGkubmV4dCgpKS5kb25lKSBhci5wdXNoKHIudmFsdWUpO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGVycm9yKSB7IGUgPSB7IGVycm9yOiBlcnJvciB9OyB9XHJcbiAgICBmaW5hbGx5IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBpZiAociAmJiAhci5kb25lICYmIChtID0gaVtcInJldHVyblwiXSkpIG0uY2FsbChpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZmluYWxseSB7IGlmIChlKSB0aHJvdyBlLmVycm9yOyB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gYXI7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3NwcmVhZCgpIHtcclxuICAgIGZvciAodmFyIGFyID0gW10sIGkgPSAwOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKVxyXG4gICAgICAgIGFyID0gYXIuY29uY2F0KF9fcmVhZChhcmd1bWVudHNbaV0pKTtcclxuICAgIHJldHVybiBhcjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fc3ByZWFkQXJyYXlzKCkge1xyXG4gICAgZm9yICh2YXIgcyA9IDAsIGkgPSAwLCBpbCA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBpbDsgaSsrKSBzICs9IGFyZ3VtZW50c1tpXS5sZW5ndGg7XHJcbiAgICBmb3IgKHZhciByID0gQXJyYXkocyksIGsgPSAwLCBpID0gMDsgaSA8IGlsOyBpKyspXHJcbiAgICAgICAgZm9yICh2YXIgYSA9IGFyZ3VtZW50c1tpXSwgaiA9IDAsIGpsID0gYS5sZW5ndGg7IGogPCBqbDsgaisrLCBrKyspXHJcbiAgICAgICAgICAgIHJba10gPSBhW2pdO1xyXG4gICAgcmV0dXJuIHI7XHJcbn07XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hd2FpdCh2KSB7XHJcbiAgICByZXR1cm4gdGhpcyBpbnN0YW5jZW9mIF9fYXdhaXQgPyAodGhpcy52ID0gdiwgdGhpcykgOiBuZXcgX19hd2FpdCh2KTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXN5bmNHZW5lcmF0b3IodGhpc0FyZywgX2FyZ3VtZW50cywgZ2VuZXJhdG9yKSB7XHJcbiAgICBpZiAoIVN5bWJvbC5hc3luY0l0ZXJhdG9yKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3ltYm9sLmFzeW5jSXRlcmF0b3IgaXMgbm90IGRlZmluZWQuXCIpO1xyXG4gICAgdmFyIGcgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSksIGksIHEgPSBbXTtcclxuICAgIHJldHVybiBpID0ge30sIHZlcmIoXCJuZXh0XCIpLCB2ZXJiKFwidGhyb3dcIiksIHZlcmIoXCJyZXR1cm5cIiksIGlbU3ltYm9sLmFzeW5jSXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfSwgaTtcclxuICAgIGZ1bmN0aW9uIHZlcmIobikgeyBpZiAoZ1tuXSkgaVtuXSA9IGZ1bmN0aW9uICh2KSB7IHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAoYSwgYikgeyBxLnB1c2goW24sIHYsIGEsIGJdKSA+IDEgfHwgcmVzdW1lKG4sIHYpOyB9KTsgfTsgfVxyXG4gICAgZnVuY3Rpb24gcmVzdW1lKG4sIHYpIHsgdHJ5IHsgc3RlcChnW25dKHYpKTsgfSBjYXRjaCAoZSkgeyBzZXR0bGUocVswXVszXSwgZSk7IH0gfVxyXG4gICAgZnVuY3Rpb24gc3RlcChyKSB7IHIudmFsdWUgaW5zdGFuY2VvZiBfX2F3YWl0ID8gUHJvbWlzZS5yZXNvbHZlKHIudmFsdWUudikudGhlbihmdWxmaWxsLCByZWplY3QpIDogc2V0dGxlKHFbMF1bMl0sIHIpOyB9XHJcbiAgICBmdW5jdGlvbiBmdWxmaWxsKHZhbHVlKSB7IHJlc3VtZShcIm5leHRcIiwgdmFsdWUpOyB9XHJcbiAgICBmdW5jdGlvbiByZWplY3QodmFsdWUpIHsgcmVzdW1lKFwidGhyb3dcIiwgdmFsdWUpOyB9XHJcbiAgICBmdW5jdGlvbiBzZXR0bGUoZiwgdikgeyBpZiAoZih2KSwgcS5zaGlmdCgpLCBxLmxlbmd0aCkgcmVzdW1lKHFbMF1bMF0sIHFbMF1bMV0pOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2FzeW5jRGVsZWdhdG9yKG8pIHtcclxuICAgIHZhciBpLCBwO1xyXG4gICAgcmV0dXJuIGkgPSB7fSwgdmVyYihcIm5leHRcIiksIHZlcmIoXCJ0aHJvd1wiLCBmdW5jdGlvbiAoZSkgeyB0aHJvdyBlOyB9KSwgdmVyYihcInJldHVyblwiKSwgaVtTeW1ib2wuaXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfSwgaTtcclxuICAgIGZ1bmN0aW9uIHZlcmIobiwgZikgeyBpW25dID0gb1tuXSA/IGZ1bmN0aW9uICh2KSB7IHJldHVybiAocCA9ICFwKSA/IHsgdmFsdWU6IF9fYXdhaXQob1tuXSh2KSksIGRvbmU6IG4gPT09IFwicmV0dXJuXCIgfSA6IGYgPyBmKHYpIDogdjsgfSA6IGY7IH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXN5bmNWYWx1ZXMobykge1xyXG4gICAgaWYgKCFTeW1ib2wuYXN5bmNJdGVyYXRvcikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN5bWJvbC5hc3luY0l0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLlwiKTtcclxuICAgIHZhciBtID0gb1tTeW1ib2wuYXN5bmNJdGVyYXRvcl0sIGk7XHJcbiAgICByZXR1cm4gbSA/IG0uY2FsbChvKSA6IChvID0gdHlwZW9mIF9fdmFsdWVzID09PSBcImZ1bmN0aW9uXCIgPyBfX3ZhbHVlcyhvKSA6IG9bU3ltYm9sLml0ZXJhdG9yXSgpLCBpID0ge30sIHZlcmIoXCJuZXh0XCIpLCB2ZXJiKFwidGhyb3dcIiksIHZlcmIoXCJyZXR1cm5cIiksIGlbU3ltYm9sLmFzeW5jSXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfSwgaSk7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4pIHsgaVtuXSA9IG9bbl0gJiYgZnVuY3Rpb24gKHYpIHsgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsgdiA9IG9bbl0odiksIHNldHRsZShyZXNvbHZlLCByZWplY3QsIHYuZG9uZSwgdi52YWx1ZSk7IH0pOyB9OyB9XHJcbiAgICBmdW5jdGlvbiBzZXR0bGUocmVzb2x2ZSwgcmVqZWN0LCBkLCB2KSB7IFByb21pc2UucmVzb2x2ZSh2KS50aGVuKGZ1bmN0aW9uKHYpIHsgcmVzb2x2ZSh7IHZhbHVlOiB2LCBkb25lOiBkIH0pOyB9LCByZWplY3QpOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX21ha2VUZW1wbGF0ZU9iamVjdChjb29rZWQsIHJhdykge1xyXG4gICAgaWYgKE9iamVjdC5kZWZpbmVQcm9wZXJ0eSkgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkoY29va2VkLCBcInJhd1wiLCB7IHZhbHVlOiByYXcgfSk7IH0gZWxzZSB7IGNvb2tlZC5yYXcgPSByYXc7IH1cclxuICAgIHJldHVybiBjb29rZWQ7XHJcbn07XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19pbXBvcnRTdGFyKG1vZCkge1xyXG4gICAgaWYgKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgcmV0dXJuIG1vZDtcclxuICAgIHZhciByZXN1bHQgPSB7fTtcclxuICAgIGlmIChtb2QgIT0gbnVsbCkgZm9yICh2YXIgayBpbiBtb2QpIGlmIChPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtb2QsIGspKSByZXN1bHRba10gPSBtb2Rba107XHJcbiAgICByZXN1bHQuZGVmYXVsdCA9IG1vZDtcclxuICAgIHJldHVybiByZXN1bHQ7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2ltcG9ydERlZmF1bHQobW9kKSB7XHJcbiAgICByZXR1cm4gKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgPyBtb2QgOiB7IGRlZmF1bHQ6IG1vZCB9O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19jbGFzc1ByaXZhdGVGaWVsZEdldChyZWNlaXZlciwgcHJpdmF0ZU1hcCkge1xyXG4gICAgaWYgKCFwcml2YXRlTWFwLmhhcyhyZWNlaXZlcikpIHtcclxuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiYXR0ZW1wdGVkIHRvIGdldCBwcml2YXRlIGZpZWxkIG9uIG5vbi1pbnN0YW5jZVwiKTtcclxuICAgIH1cclxuICAgIHJldHVybiBwcml2YXRlTWFwLmdldChyZWNlaXZlcik7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2NsYXNzUHJpdmF0ZUZpZWxkU2V0KHJlY2VpdmVyLCBwcml2YXRlTWFwLCB2YWx1ZSkge1xyXG4gICAgaWYgKCFwcml2YXRlTWFwLmhhcyhyZWNlaXZlcikpIHtcclxuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiYXR0ZW1wdGVkIHRvIHNldCBwcml2YXRlIGZpZWxkIG9uIG5vbi1pbnN0YW5jZVwiKTtcclxuICAgIH1cclxuICAgIHByaXZhdGVNYXAuc2V0KHJlY2VpdmVyLCB2YWx1ZSk7XHJcbiAgICByZXR1cm4gdmFsdWU7XHJcbn1cclxuIiwiLyoqXG4gKiBSZXR1cm5zIHRoZSBpbmRleCBvZiB0aGUgbGFzdCBlbGVtZW50IGluIHRoZSBhcnJheSB3aGVyZSBwcmVkaWNhdGUgaXMgdHJ1ZSwgYW5kIC0xIG90aGVyd2lzZS5cbiAqXG4gKiBAcGFyYW0gYXJyYXkgLSB0aGUgYXJyYXkgdG8gdGVzdFxuICogQHBhcmFtIHByZWRpY2F0ZSAtIGZpbmQgY2FsbHMgcHJlZGljYXRlIG9uY2UgZm9yIGVhY2ggZWxlbWVudCBvZiB0aGUgYXJyYXksIGluIGRlc2NlbmRpbmcgb3JkZXIsIHVudGlsIGl0IGZpbmRzIG9uZSB3aGVyZSBwcmVkaWNhdGUgcmV0dXJucyB0cnVlLiBJZiBzdWNoIGFuIGVsZW1lbnQgaXMgZm91bmQsIGZpbmRMYXN0SW5kZXggaW1tZWRpYXRlbHkgcmV0dXJucyB0aGF0IGVsZW1lbnQgaW5kZXguIE90aGVyd2lzZSwgZmluZEluZGV4IHJldHVybnMgLTEuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmaW5kTGFzdEluZGV4KGFycmF5LCBwcmVkaWNhdGUpIHtcbiAgICBsZXQgayA9IGFycmF5Lmxlbmd0aDtcbiAgICB3aGlsZSAoay0tKSB7XG4gICAgICAgIGlmIChwcmVkaWNhdGUoYXJyYXlba10sIGssIGFycmF5KSkge1xuICAgICAgICAgICAgcmV0dXJuIGs7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIC0xO1xufVxuIiwiaW1wb3J0IHsgY2FuVXNlRE9NIH0gZnJvbSBcImV4ZW52LWVzNlwiO1xuLyoqXG4gKiBBIHRlc3QgdGhhdCBlbnN1cmVzIHRoYXQgYWxsIGFyZ3VtZW50cyBhcmUgSFRNTCBFbGVtZW50c1xuICovXG5leHBvcnQgZnVuY3Rpb24gaXNIVE1MRWxlbWVudCguLi5hcmdzKSB7XG4gICAgcmV0dXJuIGFyZ3MuZXZlcnkoKGFyZykgPT4gYXJnIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpO1xufVxuLyoqXG4gKiBSZXR1cm5zIGFsbCBkaXNwbGF5ZWQgZWxlbWVudHMgaW5zaWRlIG9mIGEgcm9vdCBub2RlIHRoYXQgbWF0Y2ggYSBwcm92aWRlZCBzZWxlY3RvclxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0RGlzcGxheWVkTm9kZXMocm9vdE5vZGUsIHNlbGVjdG9yKSB7XG4gICAgaWYgKCFyb290Tm9kZSB8fCAhc2VsZWN0b3IgfHwgIWlzSFRNTEVsZW1lbnQocm9vdE5vZGUpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3Qgbm9kZXMgPSBBcnJheS5mcm9tKHJvb3ROb2RlLnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3IpKTtcbiAgICAvLyBvZmZzZXRQYXJlbnQgd2lsbCBiZSBudWxsIGlmIHRoZSBlbGVtZW50IGlzbid0IGN1cnJlbnRseSBkaXNwbGF5ZWQsXG4gICAgLy8gc28gdGhpcyB3aWxsIGFsbG93IHVzIHRvIG9wZXJhdGUgb25seSBvbiB2aXNpYmxlIG5vZGVzXG4gICAgcmV0dXJuIG5vZGVzLmZpbHRlcigobm9kZSkgPT4gbm9kZS5vZmZzZXRQYXJlbnQgIT09IG51bGwpO1xufVxuLyoqXG4gKiBHZXRzIHRoZSBudW1lcmljIGtleSBjb2RlIGFzc29jaWF0ZWQgd2l0aCBhIGtleWJvYXJkIGV2ZW50LiBUaGlzIG1ldGhvZCBpcyBmb3IgdXNlIHdpdGggRE9NIGxldmVsIDMgZXZlbnRzXG4gKiB0aGF0IHN0aWxsIHVzZSB0aGUgZGVwcmVjYXRlZCBrZXlDb2RlIHByb3BlcnR5LlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0S2V5Q29kZShldmVudCkge1xuICAgIHJldHVybiBldmVudCA9PT0gbnVsbCA/IG51bGwgOiBldmVudC53aGljaCB8fCBldmVudC5rZXlDb2RlIHx8IGV2ZW50LmNoYXJDb2RlO1xufVxuLyoqXG4gKiBSZXR1cm5zIHRoZSBub25jZSB1c2VkIGluIHRoZSBwYWdlLCBpZiBhbnkuXG4gKlxuICogQmFzZWQgb24gaHR0cHM6Ly9naXRodWIuY29tL2Nzc2luanMvanNzL2Jsb2IvbWFzdGVyL3BhY2thZ2VzL2pzcy9zcmMvRG9tUmVuZGVyZXIuanNcbiAqL1xuZnVuY3Rpb24gZ2V0Tm9uY2UoKSB7XG4gICAgY29uc3Qgbm9kZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ21ldGFbcHJvcGVydHk9XCJjc3Atbm9uY2VcIl0nKTtcbiAgICBpZiAobm9kZSkge1xuICAgICAgICByZXR1cm4gbm9kZS5nZXRBdHRyaWJ1dGUoXCJjb250ZW50XCIpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxufVxuLyoqXG4gKiBUZXN0IGlmIHRoZSBkb2N1bWVudCBzdXBwb3J0cyA6Zm9jdXMtdmlzaWJsZVxuICovXG5sZXQgX2NhblVzZUZvY3VzVmlzaWJsZTtcbmV4cG9ydCBmdW5jdGlvbiBjYW5Vc2VGb2N1c1Zpc2libGUoKSB7XG4gICAgaWYgKHR5cGVvZiBfY2FuVXNlRm9jdXNWaXNpYmxlID09PSBcImJvb2xlYW5cIikge1xuICAgICAgICByZXR1cm4gX2NhblVzZUZvY3VzVmlzaWJsZTtcbiAgICB9XG4gICAgaWYgKCFjYW5Vc2VET00oKSkge1xuICAgICAgICBfY2FuVXNlRm9jdXNWaXNpYmxlID0gZmFsc2U7XG4gICAgICAgIHJldHVybiBfY2FuVXNlRm9jdXNWaXNpYmxlO1xuICAgIH1cbiAgICAvLyBDaGVjayB0byBzZWUgaWYgdGhlIGRvY3VtZW50IHN1cHBvcnRzIHRoZSBmb2N1cy12aXNpYmxlIGVsZW1lbnRcbiAgICBjb25zdCBzdHlsZUVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3R5bGVcIik7XG4gICAgLy8gSWYgbm9uY2VzIGFyZSBwcmVzZW50IG9uIHRoZSBwYWdlLCB1c2UgaXQgd2hlbiBjcmVhdGluZyB0aGUgc3R5bGUgZWxlbWVudFxuICAgIC8vIHRvIHRlc3QgZm9jdXMtdmlzaWJsZSBzdXBwb3J0LlxuICAgIGNvbnN0IHN0eWxlTm9uY2UgPSBnZXROb25jZSgpO1xuICAgIGlmIChzdHlsZU5vbmNlICE9PSBudWxsKSB7XG4gICAgICAgIHN0eWxlRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJub25jZVwiLCBzdHlsZU5vbmNlKTtcbiAgICB9XG4gICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChzdHlsZUVsZW1lbnQpO1xuICAgIHRyeSB7XG4gICAgICAgIHN0eWxlRWxlbWVudC5zaGVldC5pbnNlcnRSdWxlKFwiZm9vOmZvY3VzLXZpc2libGUge2NvbG9yOmluaGVyaXR9XCIsIDApO1xuICAgICAgICBfY2FuVXNlRm9jdXNWaXNpYmxlID0gdHJ1ZTtcbiAgICB9XG4gICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgX2NhblVzZUZvY3VzVmlzaWJsZSA9IGZhbHNlO1xuICAgIH1cbiAgICBmaW5hbGx5IHtcbiAgICAgICAgZG9jdW1lbnQuaGVhZC5yZW1vdmVDaGlsZChzdHlsZUVsZW1lbnQpO1xuICAgIH1cbiAgICByZXR1cm4gX2NhblVzZUZvY3VzVmlzaWJsZTtcbn1cbmxldCBfY2FuVXNlQ3NzR3JpZDtcbmV4cG9ydCBmdW5jdGlvbiBjYW5Vc2VDc3NHcmlkKCkge1xuICAgIGlmICh0eXBlb2YgX2NhblVzZUNzc0dyaWQgPT09IFwiYm9vbGVhblwiKSB7XG4gICAgICAgIHJldHVybiBfY2FuVXNlQ3NzR3JpZDtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgX2NhblVzZUNzc0dyaWQgPSBDU1Muc3VwcG9ydHMoXCJkaXNwbGF5XCIsIFwiZ3JpZFwiKTtcbiAgICB9XG4gICAgY2F0Y2ggKF9hKSB7XG4gICAgICAgIF9jYW5Vc2VDc3NHcmlkID0gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiBfY2FuVXNlQ3NzR3JpZDtcbn1cbmV4cG9ydCBmdW5jdGlvbiBjYW5Vc2VGb3JjZWRDb2xvcnMoKSB7XG4gICAgcmV0dXJuIChjYW5Vc2VET00oKSAmJlxuICAgICAgICAod2luZG93Lm1hdGNoTWVkaWEoXCIoZm9yY2VkLWNvbG9yczogbm9uZSlcIikubWF0Y2hlcyB8fFxuICAgICAgICAgICAgd2luZG93Lm1hdGNoTWVkaWEoXCIoZm9yY2VkLWNvbG9yczogYWN0aXZlKVwiKS5tYXRjaGVzKSk7XG59XG5leHBvcnQgZnVuY3Rpb24gcmVzZXREb2N1bWVudENhY2hlKCkge1xuICAgIF9jYW5Vc2VDc3NHcmlkID0gdW5kZWZpbmVkO1xuICAgIF9jYW5Vc2VGb2N1c1Zpc2libGUgPSB1bmRlZmluZWQ7XG59XG4vKipcbiAqIEBkZXByZWNhdGVkIFVzZSAnY2FuVXNlRm9yY2VkQ29sb3JzJyBpbnN0ZWFkXG4gKi9cbmV4cG9ydCBjb25zdCBjYW5Vc2VkRm9yY2VkQ29sb3JzID0gY2FuVXNlRm9yY2VkQ29sb3JzO1xuIiwiLyoqXG4gKiBUaGlzIHNldCBvZiBleHBvcnRlZCBzdHJpbmdzIHJlZmVyZW5jZSBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9FdmVudHNcbiAqIGFuZCBzaG91bGQgaW5jbHVkZSBhbGwgbm9uLWRlcHJlY2F0ZWQgYW5kIG5vbi1leHBlcmltZW50YWwgU3RhbmRhcmQgZXZlbnRzXG4gKi9cbmV4cG9ydCBjb25zdCBldmVudEFib3J0ID0gXCJhYm9ydFwiO1xuZXhwb3J0IGNvbnN0IGV2ZW50QWZ0ZXJQcmludCA9IFwiYWZ0ZXJwcmludFwiO1xuZXhwb3J0IGNvbnN0IGV2ZW50QW5pbWF0aW9uQ2FuY2VsID0gXCJhbmltYXRpb25jYW5jZWxcIjtcbmV4cG9ydCBjb25zdCBldmVudEFuaW1hdGlvbkVuZCA9IFwiYW5pbWF0aW9uZW5kXCI7XG5leHBvcnQgY29uc3QgZXZlbnRBbmltYXRpb25JdGVyYXRpb24gPSBcImFuaW1hdGlvbml0ZXJhdGlvblwiO1xuZXhwb3J0IGNvbnN0IGV2ZW50QW5pbWF0aW9uU3RhcnQgPSBcImFuaW1hdGlvbnN0YXJ0XCI7XG5leHBvcnQgY29uc3QgZXZlbnRBcHBJbnN0YWxsZWQgPSBcImFwcGluc3RhbGxlZFwiO1xuZXhwb3J0IGNvbnN0IGV2ZW50QmVmb3JlUHJpbnQgPSBcImJlZm9yZXByaW50XCI7XG5leHBvcnQgY29uc3QgZXZlbnRCZWZvcmVVbmxvYWQgPSBcImJlZm9yZXVubG9hZFwiO1xuZXhwb3J0IGNvbnN0IGV2ZW50QmVnaW5FdmVudCA9IFwiYmVnaW5FdmVudFwiO1xuZXhwb3J0IGNvbnN0IGV2ZW50QmxvY2tlZCA9IFwiYmxvY2tlZFwiO1xuZXhwb3J0IGNvbnN0IGV2ZW50Qmx1ciA9IFwiYmx1clwiO1xuZXhwb3J0IGNvbnN0IGV2ZW50Q2FuUGxheSA9IFwiY2FucGxheVwiO1xuZXhwb3J0IGNvbnN0IGV2ZW50Q2FuUGxheVRocm91Z2ggPSBcImNhbnBsYXl0aHJvdWdoXCI7XG5leHBvcnQgY29uc3QgZXZlbnRDaGFuZ2UgPSBcImNoYW5nZVwiO1xuZXhwb3J0IGNvbnN0IGV2ZW50Q2hhcmdpbmdDaGFuZ2UgPSBcImNoYXJnaW5nY2hhbmdlXCI7XG5leHBvcnQgY29uc3QgZXZlbnRDaGFyZ2luZ1RpbWVDaGFuZ2UgPSBcImNoYXJnaW5ndGltZWNoYW5nZVwiO1xuZXhwb3J0IGNvbnN0IGV2ZW50Q2xpY2sgPSBcImNsaWNrXCI7XG5leHBvcnQgY29uc3QgZXZlbnRDbG9zZSA9IFwiY2xvc2VcIjtcbmV4cG9ydCBjb25zdCBldmVudENvbXBsZXRlID0gXCJjb21wbGV0ZVwiO1xuZXhwb3J0IGNvbnN0IGV2ZW50Q29tcG9zaXRpb25FbmQgPSBcImNvbXBvc2l0aW9uZW5kXCI7XG5leHBvcnQgY29uc3QgZXZlbnRDb21wb3NpdGlvblN0YXJ0ID0gXCJjb21wb3NpdGlvbnN0YXJ0XCI7XG5leHBvcnQgY29uc3QgZXZlbnRDb21wb3NpdGlvblVwZGF0ZSA9IFwiY29tcG9zaXRpb251cGRhdGVcIjtcbmV4cG9ydCBjb25zdCBldmVudENvbnRleHRNZW51ID0gXCJjb250ZXh0bWVudVwiO1xuZXhwb3J0IGNvbnN0IGV2ZW50Q29weSA9IFwiY29weVwiO1xuZXhwb3J0IGNvbnN0IGV2ZW50Q3V0ID0gXCJjdXRcIjtcbmV4cG9ydCBjb25zdCBldmVudERibENsaWNrID0gXCJkYmxjbGlja1wiO1xuZXhwb3J0IGNvbnN0IGV2ZW50RGV2aWNlQ2hhbmdlID0gXCJkZXZpY2VjaGFuZ2VcIjtcbmV4cG9ydCBjb25zdCBldmVudERldmljZU1vdGlvbiA9IFwiZGV2aWNlbW90aW9uXCI7XG5leHBvcnQgY29uc3QgZXZlbnREZXZpY2VPcmllbnRhdGlvbiA9IFwiZGV2aWNlb3JpZW50YXRpb25cIjtcbmV4cG9ydCBjb25zdCBldmVudERpc2NoYXJnaW5nVGltZUNoYW5nZSA9IFwiZGlzY2hhcmdpbmd0aW1lY2hhbmdlXCI7XG5leHBvcnQgY29uc3QgZXZlbnREcmFnID0gXCJkcmFnXCI7XG5leHBvcnQgY29uc3QgZXZlbnREcmFnRW5kID0gXCJkcmFnZW5kXCI7XG5leHBvcnQgY29uc3QgZXZlbnREcmFnRW50ZXIgPSBcImRyYWdlbnRlclwiO1xuZXhwb3J0IGNvbnN0IGV2ZW50RHJhZ0xlYXZlID0gXCJkcmFnbGVhdmVcIjtcbmV4cG9ydCBjb25zdCBldmVudERyYWdPdmVyID0gXCJkcmFnb3ZlclwiO1xuZXhwb3J0IGNvbnN0IGV2ZW50RHJhZ1N0YXJ0ID0gXCJkcmFnc3RhcnRcIjtcbmV4cG9ydCBjb25zdCBldmVudERyb3AgPSBcImRyb3BcIjtcbmV4cG9ydCBjb25zdCBldmVudER1cmF0aW9uQ2hhbmdlID0gXCJkdXJhdGlvbmNoYW5nZVwiO1xuZXhwb3J0IGNvbnN0IGV2ZW50RW1wdGllZCA9IFwiZW1wdGllZFwiO1xuZXhwb3J0IGNvbnN0IGV2ZW50RW5kZWQgPSBcImVuZGVkXCI7XG5leHBvcnQgY29uc3QgZXZlbnRFbmRFdmVudCA9IFwiZW5kZXZlbnRcIjtcbmV4cG9ydCBjb25zdCBldmVudEVycm9yID0gXCJlcnJvclwiO1xuZXhwb3J0IGNvbnN0IGV2ZW50Rm9jdXMgPSBcImZvY3VzXCI7XG5leHBvcnQgY29uc3QgZXZlbnRGb2N1c0luID0gXCJmb2N1c2luXCI7XG5leHBvcnQgY29uc3QgZXZlbnRGb2N1c091dCA9IFwiZm9jdXNvdXRcIjtcbmV4cG9ydCBjb25zdCBldmVudEZ1bGxTY3JlZW5DaGFuZ2UgPSBcImZ1bGxzY3JlZW5jaGFuZ2VcIjtcbmV4cG9ydCBjb25zdCBldmVudEZ1bGxTY3JlZW5FcnJvciA9IFwiZnVsbHNjcmVlbmVycm9yXCI7XG5leHBvcnQgY29uc3QgZXZlbnRHYW1lUGFkQ29ubmVjdGVkID0gXCJnYW1lcGFkY29ubmVjdGVkXCI7XG5leHBvcnQgY29uc3QgZXZlbnRHYW1lUGFkRGlzY29ubmVjdGVkID0gXCJnYW1lcGFkZGlzY29ubmVjdGVkXCI7XG5leHBvcnQgY29uc3QgZXZlbnRHb3RQb2ludGVyQ2FwdHVyZSA9IFwiZ290cG9pbnRlcmNhcHR1cmVcIjtcbmV4cG9ydCBjb25zdCBldmVudEhhc2hDaGFuZ2UgPSBcImhhc2hjaGFuZ2VcIjtcbmV4cG9ydCBjb25zdCBldmVudExvc3RQb2ludGVyQ2FwdHVyZSA9IFwibG9zdHBvaW50ZXJjYXB0dXJlXCI7XG5leHBvcnQgY29uc3QgZXZlbnRJbnB1dCA9IFwiaW5wdXRcIjtcbmV4cG9ydCBjb25zdCBldmVudEludmFsaWQgPSBcImludmFsaWRcIjtcbmV4cG9ydCBjb25zdCBldmVudEtleURvd24gPSBcImtleWRvd25cIjtcbmV4cG9ydCBjb25zdCBldmVudEtleVVwID0gXCJrZXl1cFwiO1xuZXhwb3J0IGNvbnN0IGV2ZW50TGV2ZWxDaGFuZ2UgPSBcImxldmVsY2hhbmdlXCI7XG5leHBvcnQgY29uc3QgZXZlbnRMb2FkID0gXCJsb2FkXCI7XG5leHBvcnQgY29uc3QgZXZlbnRMb2FkZWREYXRhID0gXCJsb2FkZWRkYXRhXCI7XG5leHBvcnQgY29uc3QgZXZlbnRMb2FkZWRNZXRhRGF0YSA9IFwibG9hZGVkbWV0YWRhdGFcIjtcbmV4cG9ydCBjb25zdCBldmVudExvYWRFbmQgPSBcImxvYWRlbmRcIjtcbmV4cG9ydCBjb25zdCBldmVudExvYWRTdGFydCA9IFwibG9hZHN0YXJ0XCI7XG5leHBvcnQgY29uc3QgZXZlbnRNZXNzYWdlID0gXCJtZXNzYWdlXCI7XG5leHBvcnQgY29uc3QgZXZlbnRNZXNzYWdlRXJyb3IgPSBcIm1lc3NhZ2VlcnJvclwiO1xuZXhwb3J0IGNvbnN0IGV2ZW50TW91c2VEb3duID0gXCJtb3VzZWRvd25cIjtcbmV4cG9ydCBjb25zdCBldmVudE1vdXNlRW50ZXIgPSBcIm1vdXNlZW50ZXJcIjtcbmV4cG9ydCBjb25zdCBldmVudE1vdXNlTGVhdmUgPSBcIm1vdXNlbGVhdmVcIjtcbmV4cG9ydCBjb25zdCBldmVudE1vdXNlTW92ZSA9IFwibW91c2Vtb3ZlXCI7XG5leHBvcnQgY29uc3QgZXZlbnRNb3VzZU91dCA9IFwibW91c2VvdXRcIjtcbmV4cG9ydCBjb25zdCBldmVudE1vdXNlT3ZlciA9IFwibW91c2VvdmVyXCI7XG5leHBvcnQgY29uc3QgZXZlbnRNb3VzZVVwID0gXCJtb3VzZXVwXCI7XG5leHBvcnQgY29uc3QgZXZlbnROb3RpZmljYXRpb25DbGljayA9IFwibm90aWZpY2F0aW9uY2xpY2tcIjtcbmV4cG9ydCBjb25zdCBldmVudE9mZmxpbmUgPSBcIm9mZmxpbmVcIjtcbmV4cG9ydCBjb25zdCBldmVudE9ubGluZSA9IFwib25saW5lXCI7XG5leHBvcnQgY29uc3QgZXZlbnRPcGVuID0gXCJvcGVuXCI7XG5leHBvcnQgY29uc3QgZXZlbnRPcmllbnRhdGlvbkNoYW5nZSA9IFwib3JpZW50YXRpb25jaGFuZ2VcIjtcbmV4cG9ydCBjb25zdCBldmVudFBhZ2VIaWRlID0gXCJwYWdlaGlkZVwiO1xuZXhwb3J0IGNvbnN0IGV2ZW50UGFnZVNob3cgPSBcInBhZ2VzaG93XCI7XG5leHBvcnQgY29uc3QgZXZlbnRQYXN0ZSA9IFwicGFzdGVcIjtcbmV4cG9ydCBjb25zdCBldmVudFBhdXNlID0gXCJwYXVzZVwiO1xuZXhwb3J0IGNvbnN0IGV2ZW50UG9pbnRlckNhbmNlbCA9IFwicG9pbnRlcmNhbmNlbFwiO1xuZXhwb3J0IGNvbnN0IGV2ZW50UG9pbnRlckRvd24gPSBcInBvaW50ZXJkb3duXCI7XG5leHBvcnQgY29uc3QgZXZlbnRQb2ludGVyRW50ZXIgPSBcInBvaW50ZXJlbnRlclwiO1xuZXhwb3J0IGNvbnN0IGV2ZW50UG9pbnRlckxlYXZlID0gXCJwb2ludGVybGVhdmVcIjtcbmV4cG9ydCBjb25zdCBldmVudFBvaW50ZXJMb2NrQ2hhbmdlID0gXCJwb2ludGVybG9ja2NoYW5nZVwiO1xuZXhwb3J0IGNvbnN0IGV2ZW50UG9pbnRlckxvY2tFcnJvciA9IFwicG9pbnRlcmxvY2tlcnJvclwiO1xuZXhwb3J0IGNvbnN0IGV2ZW50UG9pbnRlck1vdmUgPSBcInBvaW50ZXJtb3ZlXCI7XG5leHBvcnQgY29uc3QgZXZlbnRQb2ludGVyT3V0ID0gXCJwb2ludGVyb3V0XCI7XG5leHBvcnQgY29uc3QgZXZlbnRQb2ludGVyT3ZlciA9IFwicG9pbnRlcm92ZXJcIjtcbmV4cG9ydCBjb25zdCBldmVudFBvaW50ZXJVcCA9IFwicG9pbnRlcnVwXCI7XG5leHBvcnQgY29uc3QgZXZlbnRQbGF5ID0gXCJwbGF5XCI7XG5leHBvcnQgY29uc3QgZXZlbnRQbGF5aW5nID0gXCJwbGF5aW5nXCI7XG5leHBvcnQgY29uc3QgZXZlbnRQb3BTdGF0ZSA9IFwicG9wc3RhdGVcIjtcbmV4cG9ydCBjb25zdCBldmVudFByb2dyZXNzID0gXCJwcm9ncmVzc1wiO1xuZXhwb3J0IGNvbnN0IGV2ZW50UHVzaCA9IFwicHVzaFwiO1xuZXhwb3J0IGNvbnN0IGV2ZW50UHVzaFN1YnNjcmlwdGlvbkNoYW5nZSA9IFwicHVzaHN1YnNjcmlwdGlvbmNoYW5nZVwiO1xuZXhwb3J0IGNvbnN0IGV2ZW50UmF0ZUNoYW5nZSA9IFwicmF0ZWNoYW5nZVwiO1xuZXhwb3J0IGNvbnN0IGV2ZW50UmVhZHlTdGF0ZUNoYW5nZSA9IFwicmVhZHlzdGF0ZWNoYW5nZVwiO1xuZXhwb3J0IGNvbnN0IGV2ZW50UmVwZWF0RXZlbnQgPSBcInJlcGVhdGV2ZW50XCI7XG5leHBvcnQgY29uc3QgZXZlbnRSZXNldCA9IFwicmVzZXRcIjtcbmV4cG9ydCBjb25zdCBldmVudFJlc2l6ZSA9IFwicmVzaXplXCI7XG5leHBvcnQgY29uc3QgZXZlbnRSZXNvdXJjZVRpbWluZ0J1ZmZlckZ1bGwgPSBcInJlc291cmNldGltaW5nYnVmZmVyZnVsbFwiO1xuZXhwb3J0IGNvbnN0IGV2ZW50U2Nyb2xsID0gXCJzY3JvbGxcIjtcbmV4cG9ydCBjb25zdCBldmVudFNlZWtlZCA9IFwic2Vla2VkXCI7XG5leHBvcnQgY29uc3QgZXZlbnRTZWVraW5nID0gXCJzZWVraW5nXCI7XG5leHBvcnQgY29uc3QgZXZlbnRTZWxlY3QgPSBcInNlbGVjdFwiO1xuZXhwb3J0IGNvbnN0IGV2ZW50U2hvdyA9IFwic2hvd1wiO1xuZXhwb3J0IGNvbnN0IGV2ZW50U2xvdENoYW5nZSA9IFwic2xvdGNoYW5nZVwiO1xuZXhwb3J0IGNvbnN0IGV2ZW50U3RhbGxlZCA9IFwic3RhbGxlZFwiO1xuZXhwb3J0IGNvbnN0IGV2ZW50U3RhcnQgPSBcInN0YXJ0XCI7XG5leHBvcnQgY29uc3QgZXZlbnRTdG9yYWdlID0gXCJzdG9yYWdlXCI7XG5leHBvcnQgY29uc3QgZXZlbnRTdWJtaXQgPSBcInN1Ym1pdFwiO1xuZXhwb3J0IGNvbnN0IGV2ZW50U3VjY2VzcyA9IFwic3VjY2Vzc1wiO1xuZXhwb3J0IGNvbnN0IGV2ZW50U3VzcGVuZCA9IFwic3VzcGVuZFwiO1xuZXhwb3J0IGNvbnN0IGV2ZW50U1ZHQWJvcnQgPSBcIlNWR0Fib3J0XCI7XG5leHBvcnQgY29uc3QgZXZlbnRTVkdFcnJvciA9IFwiU1ZHRXJyb3JcIjtcbmV4cG9ydCBjb25zdCBldmVudFNWR0xvYWQgPSBcIlNWR0xvYWRcIjtcbmV4cG9ydCBjb25zdCBldmVudFNWR1Jlc2l6ZSA9IFwiU1ZHUmVzaXplXCI7XG5leHBvcnQgY29uc3QgZXZlbnRTVkdTY3JvbGwgPSBcIlNWR1Njcm9sbFwiO1xuZXhwb3J0IGNvbnN0IGV2ZW50U1ZHVW5sb2FkID0gXCJTVkdVbmxvYWRcIjtcbmV4cG9ydCBjb25zdCBldmVudFNWR1pvb20gPSBcIlNWR1pvb21cIjtcbmV4cG9ydCBjb25zdCBldmVudFRpbWVPdXQgPSBcInRpbWVvdXRcIjtcbmV4cG9ydCBjb25zdCBldmVudFRpbWVVcGRhdGUgPSBcInRpbWV1cGRhdGVcIjtcbmV4cG9ydCBjb25zdCBldmVudFRvdWNoQ2FuY2VsID0gXCJ0b3VjaGNhbmNlbFwiO1xuZXhwb3J0IGNvbnN0IGV2ZW50VG91Y2hFbmQgPSBcInRvdWNoZW5kXCI7XG5leHBvcnQgY29uc3QgZXZlbnRUb3VjaE1vdmUgPSBcInRvdWNobW92ZVwiO1xuZXhwb3J0IGNvbnN0IGV2ZW50VG91Y2hTdGFydCA9IFwidG91Y2hzdGFydFwiO1xuZXhwb3J0IGNvbnN0IGV2ZW50VHJhbnNpdGlvbkVuZCA9IFwidHJhbnNpdGlvbmVuZFwiO1xuZXhwb3J0IGNvbnN0IGV2ZW50VW5sb2FkID0gXCJ1bmxvYWRcIjtcbmV4cG9ydCBjb25zdCBldmVudFVwZ3JhZGVOZWVkZWQgPSBcInVwZ3JhZGVuZWVkZWRcIjtcbmV4cG9ydCBjb25zdCBldmVudFVzZXJQcm94aW1pdHkgPSBcInVzZXJwcm94aW1pdHlcIjtcbmV4cG9ydCBjb25zdCBldmVudFZlcnNpb25DaGFuZ2UgPSBcInZlcnNpb25jaGFuZ2VcIjtcbmV4cG9ydCBjb25zdCBldmVudFZpc2liaWxpdHlDaGFuZ2UgPSBcInZpc2liaWxpdHljaGFuZ2VcIjtcbmV4cG9ydCBjb25zdCBldmVudFZvbHVtZUNoYW5nZSA9IFwidm9sdW1lY2hhbmdlXCI7XG5leHBvcnQgY29uc3QgZXZlbnRXYWl0aW5nID0gXCJ3YWl0aW5nXCI7XG5leHBvcnQgY29uc3QgZXZlbnRXaGVlbCA9IFwid2hlZWxcIjtcbiIsImxldCB1bmlxdWVJZENvdW50ZXIgPSAwO1xuLyoqXG4gKiBHZW5lcmF0ZXMgYSB1bmlxdWUgSUQgYmFzZWQgb24gaW5jcmVtZW50aW5nIGEgY291bnRlci5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHVuaXF1ZUlkKHByZWZpeCA9IFwiXCIpIHtcbiAgICByZXR1cm4gYCR7cHJlZml4fSR7dW5pcXVlSWRDb3VudGVyKyt9YDtcbn1cbi8qKlxuICogQnVpbGRzIGEgc3RyaW5nIGZyb20gYSBmb3JtYXQgc3BlY2lmaWVyIGFuZCByZXBsYWNlbWVudCBwYXJhbWV0ZXJzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZm9ybWF0KGZvcm1hdFNwZWNpZmllciwgLi4ucGFyYW1ldGVycykge1xuICAgIHJldHVybiBmb3JtYXRTcGVjaWZpZXIucmVwbGFjZSgveyhcXGQrKX0vZywgZnVuY3Rpb24gKG1hdGNoLCBpbmRleCkge1xuICAgICAgICBpZiAoaW5kZXggPj0gcGFyYW1ldGVycy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHJldHVybiBtYXRjaDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB2YWx1ZSA9IHBhcmFtZXRlcnNbaW5kZXhdO1xuICAgICAgICBpZiAodHlwZW9mIHZhbHVlICE9PSBcIm51bWJlclwiICYmICF2YWx1ZSkge1xuICAgICAgICAgICAgcmV0dXJuIFwiXCI7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH0pO1xufVxuLyoqXG4gKiBDaGVjayB0byBzZWUgaWYgb25lIHN0cmluZyBzdGFydHMgd2l0aCBhbm90aGVyXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzdGFydHNXaXRoKHN0cmluZ1RvU2VhcmNoLCBzZWFyY2hGb3IsIHBvc2l0aW9uID0gMCkge1xuICAgIGlmICghc3RyaW5nVG9TZWFyY2ggfHwgIXNlYXJjaEZvcikge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiBzdHJpbmdUb1NlYXJjaC5zdWJzdHIocG9zaXRpb24sIHNlYXJjaEZvci5sZW5ndGgpID09PSBzZWFyY2hGb3I7XG59XG4vKipcbiAqIERldGVybWluZXMgaWYgdGhlIHNwZWNpZmllZCBzdHJpbmcgaXMgdW5kZWZpbmVkLCBudWxsLCBlbXB0eSwgb3Igd2hpdGVzcGFjZS5cbiAqIFRydWUgaWYgdGhlIHZhbHVlIGlzIHVuZGVmaW5lZCwgbnVsbCwgZW1wdHksIG9yIHdoaXRlc3BhY2UsIG90aGVyd2lzZSBmYWxzZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzTnVsbE9yV2hpdGVTcGFjZSh2YWx1ZSkge1xuICAgIHJldHVybiAhdmFsdWUgfHwgIXZhbHVlLnRyaW0oKTtcbn1cbi8qKlxuICogQ29udmVydHMgYSBzdHJpbmcgdG8gUGFzY2FsIENhc2VcbiAqIHdoZXJlIHRoZSBmaXJzdCBsZXR0ZXIgb2YgZWFjaCBjb21wb3VuZCB3b3JkIGlzIGNhcGl0YWxpemVkLlxuICovXG5leHBvcnQgZnVuY3Rpb24gcGFzY2FsQ2FzZSh2YWx1ZSkge1xuICAgIGxldCBuZXdWYWx1ZSA9IGAke3ZhbHVlfWBcbiAgICAgICAgLnJlcGxhY2UobmV3IFJlZ0V4cCgvWy1fXSsvLCBcImdcIiksIFwiIFwiKVxuICAgICAgICAucmVwbGFjZShuZXcgUmVnRXhwKC9bXlxcd1xcc10vLCBcImdcIiksIFwiXCIpXG4gICAgICAgIC5yZXBsYWNlKC9eXFxzK3xcXHMrJHxcXHMrKD89XFxzKS9nLCBcIlwiKVxuICAgICAgICAucmVwbGFjZShuZXcgUmVnRXhwKC9cXHMrKC4pKFxcdyopLywgXCJnXCIpLCAoJDEsICQyLCAkMykgPT4gYCR7JDIudG9VcHBlckNhc2UoKSArICQzLnRvTG93ZXJDYXNlKCl9YClcbiAgICAgICAgLnJlcGxhY2UobmV3IFJlZ0V4cCgvXFx3LyksIHMgPT4gcy50b1VwcGVyQ2FzZSgpKTtcbiAgICBsZXQgZmlyc3RMb3dlcklkeCA9IDA7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBuZXdWYWx1ZS5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCBjdXJyQ2hhciA9IG5ld1ZhbHVlLmNoYXJBdChpKTtcbiAgICAgICAgaWYgKGN1cnJDaGFyID09IGN1cnJDaGFyLnRvTG93ZXJDYXNlKCkpIHtcbiAgICAgICAgICAgIGZpcnN0TG93ZXJJZHggPSBpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKGZpcnN0TG93ZXJJZHggPiAxKSB7XG4gICAgICAgIG5ld1ZhbHVlID1cbiAgICAgICAgICAgIGAke25ld1ZhbHVlLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpfSR7bmV3VmFsdWVcbiAgICAgICAgICAgICAgICAuc2xpY2UoMSwgZmlyc3RMb3dlcklkeCAtIDEpXG4gICAgICAgICAgICAgICAgLnRvTG93ZXJDYXNlKCl9YCArIG5ld1ZhbHVlLnNsaWNlKGZpcnN0TG93ZXJJZHggLSAxKTtcbiAgICB9XG4gICAgcmV0dXJuIG5ld1ZhbHVlO1xufVxuLyoqXG4gKiBjb252ZXJ0cyBhIHN0cmluZyBmcm9tIGNhbWVsQ2FzZSBvciBwYXNjYWxDYXNlIHRvIHNwaW5hbC1jYXNlXG4gKiB3aGljaCBpcyBhbiBsb3dlcmNhc2UgZGFzaCBzZXBhcmF0ZWQgbmFtaW5nIHN0eWxlLlxuICpcbiAqIEFuIGV4YW1wbGUgb2Ygc3BpbmFsIGNhc2U6IGZvby1iYXItYmF0XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzcGluYWxDYXNlKHZhbHVlKSB7XG4gICAgY29uc3QgdmFsdWVXaXRoTG93ZXJDYXNlRmlyc3RMZXR0ZXIgPSBgJHt2YWx1ZVxuICAgICAgICAuY2hhckF0KDApXG4gICAgICAgIC50b0xvd2VyQ2FzZSgpfSR7dmFsdWUuc2xpY2UoMSl9YDtcbiAgICByZXR1cm4gdmFsdWVXaXRoTG93ZXJDYXNlRmlyc3RMZXR0ZXIucmVwbGFjZSgvKFtBLVpdfFswLTldKS9nLCBmdW5jdGlvbiAobWF0Y2gsIGdyb3VwMSkge1xuICAgICAgICByZXR1cm4gYC0ke2dyb3VwMS50b0xvd2VyQ2FzZSgpfWA7XG4gICAgfSk7XG59XG4iLCIvKipcbiAqIENoZWNrcyBpZiB0aGUgRE9NIGlzIGF2YWlsYWJsZSB0byBhY2Nlc3MgYW5kIHVzZVxuICovXG5leHBvcnQgZnVuY3Rpb24gY2FuVXNlRE9NKCkge1xuICAgIHJldHVybiAhISh0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiICYmIHdpbmRvdy5kb2N1bWVudCAmJiB3aW5kb3cuZG9jdW1lbnQuY3JlYXRlRWxlbWVudCk7XG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=