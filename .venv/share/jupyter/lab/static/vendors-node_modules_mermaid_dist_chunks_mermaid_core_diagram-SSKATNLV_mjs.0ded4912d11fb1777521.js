"use strict";
(self["webpackChunk_jupyterlab_application_top"] = self["webpackChunk_jupyterlab_application_top"] || []).push([["vendors-node_modules_mermaid_dist_chunks_mermaid_core_diagram-SSKATNLV_mjs"],{

/***/ "./node_modules/mermaid/dist/chunks/mermaid.core/chunk-4BMEZGHF.mjs":
/*!**************************************************************************!*\
  !*** ./node_modules/mermaid/dist/chunks/mermaid.core/chunk-4BMEZGHF.mjs ***!
  \**************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   populateCommonDb: () => (/* binding */ populateCommonDb)
/* harmony export */ });
/* harmony import */ var _chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./chunk-YTJNT7DU.mjs */ "./node_modules/mermaid/dist/chunks/mermaid.core/chunk-YTJNT7DU.mjs");


// src/diagrams/common/populateCommonDb.ts
function populateCommonDb(ast, db) {
  if (ast.accDescr) {
    db.setAccDescription?.(ast.accDescr);
  }
  if (ast.accTitle) {
    db.setAccTitle?.(ast.accTitle);
  }
  if (ast.title) {
    db.setDiagramTitle?.(ast.title);
  }
}
(0,_chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_0__.__name)(populateCommonDb, "populateCommonDb");




/***/ }),

/***/ "./node_modules/mermaid/dist/chunks/mermaid.core/diagram-SSKATNLV.mjs":
/*!****************************************************************************!*\
  !*** ./node_modules/mermaid/dist/chunks/mermaid.core/diagram-SSKATNLV.mjs ***!
  \****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   diagram: () => (/* binding */ diagram)
/* harmony export */ });
/* harmony import */ var _chunk_4BMEZGHF_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./chunk-4BMEZGHF.mjs */ "./node_modules/mermaid/dist/chunks/mermaid.core/chunk-4BMEZGHF.mjs");
/* harmony import */ var _chunk_O4NI6UNU_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./chunk-O4NI6UNU.mjs */ "./node_modules/mermaid/dist/chunks/mermaid.core/chunk-O4NI6UNU.mjs");
/* harmony import */ var _chunk_7B677QYD_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./chunk-7B677QYD.mjs */ "./node_modules/mermaid/dist/chunks/mermaid.core/chunk-7B677QYD.mjs");
/* harmony import */ var _chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./chunk-YTJNT7DU.mjs */ "./node_modules/mermaid/dist/chunks/mermaid.core/chunk-YTJNT7DU.mjs");
/* harmony import */ var _mermaid_js_parser__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @mermaid-js/parser */ "./node_modules/@mermaid-js/parser/dist/mermaid-parser.core.mjs");





// src/diagrams/radar/db.ts
var defaultOptions = {
  showLegend: true,
  ticks: 5,
  max: null,
  min: 0,
  graticule: "circle"
};
var defaultRadarData = {
  axes: [],
  curves: [],
  options: defaultOptions
};
var data = structuredClone(defaultRadarData);
var DEFAULT_RADAR_CONFIG = _chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.defaultConfig_default.radar;
var getConfig2 = /* @__PURE__ */ (0,_chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.__name)(() => {
  const config = (0,_chunk_O4NI6UNU_mjs__WEBPACK_IMPORTED_MODULE_1__.cleanAndMerge)({
    ...DEFAULT_RADAR_CONFIG,
    ...(0,_chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.getConfig)().radar
  });
  return config;
}, "getConfig");
var getAxes = /* @__PURE__ */ (0,_chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.__name)(() => data.axes, "getAxes");
var getCurves = /* @__PURE__ */ (0,_chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.__name)(() => data.curves, "getCurves");
var getOptions = /* @__PURE__ */ (0,_chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.__name)(() => data.options, "getOptions");
var setAxes = /* @__PURE__ */ (0,_chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.__name)((axes) => {
  data.axes = axes.map((axis) => {
    return {
      name: axis.name,
      label: axis.label ?? axis.name
    };
  });
}, "setAxes");
var setCurves = /* @__PURE__ */ (0,_chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.__name)((curves) => {
  data.curves = curves.map((curve) => {
    return {
      name: curve.name,
      label: curve.label ?? curve.name,
      entries: computeCurveEntries(curve.entries)
    };
  });
}, "setCurves");
var computeCurveEntries = /* @__PURE__ */ (0,_chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.__name)((entries) => {
  if (entries[0].axis == void 0) {
    return entries.map((entry) => entry.value);
  }
  const axes = getAxes();
  if (axes.length === 0) {
    throw new Error("Axes must be populated before curves for reference entries");
  }
  return axes.map((axis) => {
    const entry = entries.find((entry2) => entry2.axis?.$refText === axis.name);
    if (entry === void 0) {
      throw new Error("Missing entry for axis " + axis.label);
    }
    return entry.value;
  });
}, "computeCurveEntries");
var setOptions = /* @__PURE__ */ (0,_chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.__name)((options) => {
  const optionMap = options.reduce(
    (acc, option) => {
      acc[option.name] = option;
      return acc;
    },
    {}
  );
  data.options = {
    showLegend: optionMap.showLegend?.value ?? defaultOptions.showLegend,
    ticks: optionMap.ticks?.value ?? defaultOptions.ticks,
    max: optionMap.max?.value ?? defaultOptions.max,
    min: optionMap.min?.value ?? defaultOptions.min,
    graticule: optionMap.graticule?.value ?? defaultOptions.graticule
  };
}, "setOptions");
var clear2 = /* @__PURE__ */ (0,_chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.__name)(() => {
  (0,_chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.clear)();
  data = structuredClone(defaultRadarData);
}, "clear");
var db = {
  getAxes,
  getCurves,
  getOptions,
  setAxes,
  setCurves,
  setOptions,
  getConfig: getConfig2,
  clear: clear2,
  setAccTitle: _chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.setAccTitle,
  getAccTitle: _chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.getAccTitle,
  setDiagramTitle: _chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.setDiagramTitle,
  getDiagramTitle: _chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.getDiagramTitle,
  getAccDescription: _chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.getAccDescription,
  setAccDescription: _chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.setAccDescription
};

// src/diagrams/radar/parser.ts

var populate = /* @__PURE__ */ (0,_chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.__name)((ast) => {
  (0,_chunk_4BMEZGHF_mjs__WEBPACK_IMPORTED_MODULE_0__.populateCommonDb)(ast, db);
  const { axes, curves, options } = ast;
  db.setAxes(axes);
  db.setCurves(curves);
  db.setOptions(options);
}, "populate");
var parser = {
  parse: /* @__PURE__ */ (0,_chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.__name)(async (input) => {
    const ast = await (0,_mermaid_js_parser__WEBPACK_IMPORTED_MODULE_4__.parse)("radar", input);
    _chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.log.debug(ast);
    populate(ast);
  }, "parse")
};

// src/diagrams/radar/renderer.ts
var draw = /* @__PURE__ */ (0,_chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.__name)((_text, id, _version, diagram2) => {
  const db2 = diagram2.db;
  const axes = db2.getAxes();
  const curves = db2.getCurves();
  const options = db2.getOptions();
  const config = db2.getConfig();
  const title = db2.getDiagramTitle();
  const svg = (0,_chunk_7B677QYD_mjs__WEBPACK_IMPORTED_MODULE_2__.selectSvgElement)(id);
  const g = drawFrame(svg, config);
  const maxValue = options.max ?? Math.max(...curves.map((curve) => Math.max(...curve.entries)));
  const minValue = options.min;
  const radius = Math.min(config.width, config.height) / 2;
  drawGraticule(g, axes, radius, options.ticks, options.graticule);
  drawAxes(g, axes, radius, config);
  drawCurves(g, axes, curves, minValue, maxValue, options.graticule, config);
  drawLegend(g, curves, options.showLegend, config);
  g.append("text").attr("class", "radarTitle").text(title).attr("x", 0).attr("y", -config.height / 2 - config.marginTop);
}, "draw");
var drawFrame = /* @__PURE__ */ (0,_chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.__name)((svg, config) => {
  const totalWidth = config.width + config.marginLeft + config.marginRight;
  const totalHeight = config.height + config.marginTop + config.marginBottom;
  const center = {
    x: config.marginLeft + config.width / 2,
    y: config.marginTop + config.height / 2
  };
  svg.attr("viewbox", `0 0 ${totalWidth} ${totalHeight}`).attr("width", totalWidth).attr("height", totalHeight);
  return svg.append("g").attr("transform", `translate(${center.x}, ${center.y})`);
}, "drawFrame");
var drawGraticule = /* @__PURE__ */ (0,_chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.__name)((g, axes, radius, ticks, graticule) => {
  if (graticule === "circle") {
    for (let i = 0; i < ticks; i++) {
      const r = radius * (i + 1) / ticks;
      g.append("circle").attr("r", r).attr("class", "radarGraticule");
    }
  } else if (graticule === "polygon") {
    const numAxes = axes.length;
    for (let i = 0; i < ticks; i++) {
      const r = radius * (i + 1) / ticks;
      const points = axes.map((_, j) => {
        const angle = 2 * j * Math.PI / numAxes - Math.PI / 2;
        const x = r * Math.cos(angle);
        const y = r * Math.sin(angle);
        return `${x},${y}`;
      }).join(" ");
      g.append("polygon").attr("points", points).attr("class", "radarGraticule");
    }
  }
}, "drawGraticule");
var drawAxes = /* @__PURE__ */ (0,_chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.__name)((g, axes, radius, config) => {
  const numAxes = axes.length;
  for (let i = 0; i < numAxes; i++) {
    const label = axes[i].label;
    const angle = 2 * i * Math.PI / numAxes - Math.PI / 2;
    g.append("line").attr("x1", 0).attr("y1", 0).attr("x2", radius * config.axisScaleFactor * Math.cos(angle)).attr("y2", radius * config.axisScaleFactor * Math.sin(angle)).attr("class", "radarAxisLine");
    g.append("text").text(label).attr("x", radius * config.axisLabelFactor * Math.cos(angle)).attr("y", radius * config.axisLabelFactor * Math.sin(angle)).attr("class", "radarAxisLabel");
  }
}, "drawAxes");
function drawCurves(g, axes, curves, minValue, maxValue, graticule, config) {
  const numAxes = axes.length;
  const radius = Math.min(config.width, config.height) / 2;
  curves.forEach((curve, index) => {
    if (curve.entries.length !== numAxes) {
      return;
    }
    const points = curve.entries.map((entry, i) => {
      const angle = 2 * Math.PI * i / numAxes - Math.PI / 2;
      const r = relativeRadius(entry, minValue, maxValue, radius);
      const x = r * Math.cos(angle);
      const y = r * Math.sin(angle);
      return { x, y };
    });
    if (graticule === "circle") {
      g.append("path").attr("d", closedRoundCurve(points, config.curveTension)).attr("class", `radarCurve-${index}`);
    } else if (graticule === "polygon") {
      g.append("polygon").attr("points", points.map((p) => `${p.x},${p.y}`).join(" ")).attr("class", `radarCurve-${index}`);
    }
  });
}
(0,_chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.__name)(drawCurves, "drawCurves");
function relativeRadius(value, minValue, maxValue, radius) {
  const clippedValue = Math.min(Math.max(value, minValue), maxValue);
  return radius * (clippedValue - minValue) / (maxValue - minValue);
}
(0,_chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.__name)(relativeRadius, "relativeRadius");
function closedRoundCurve(points, tension) {
  const numPoints = points.length;
  let d = `M${points[0].x},${points[0].y}`;
  for (let i = 0; i < numPoints; i++) {
    const p0 = points[(i - 1 + numPoints) % numPoints];
    const p1 = points[i];
    const p2 = points[(i + 1) % numPoints];
    const p3 = points[(i + 2) % numPoints];
    const cp1 = {
      x: p1.x + (p2.x - p0.x) * tension,
      y: p1.y + (p2.y - p0.y) * tension
    };
    const cp2 = {
      x: p2.x - (p3.x - p1.x) * tension,
      y: p2.y - (p3.y - p1.y) * tension
    };
    d += ` C${cp1.x},${cp1.y} ${cp2.x},${cp2.y} ${p2.x},${p2.y}`;
  }
  return `${d} Z`;
}
(0,_chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.__name)(closedRoundCurve, "closedRoundCurve");
function drawLegend(g, curves, showLegend, config) {
  if (!showLegend) {
    return;
  }
  const legendX = (config.width / 2 + config.marginRight) * 3 / 4;
  const legendY = -(config.height / 2 + config.marginTop) * 3 / 4;
  const lineHeight = 20;
  curves.forEach((curve, index) => {
    const itemGroup = g.append("g").attr("transform", `translate(${legendX}, ${legendY + index * lineHeight})`);
    itemGroup.append("rect").attr("width", 12).attr("height", 12).attr("class", `radarLegendBox-${index}`);
    itemGroup.append("text").attr("x", 16).attr("y", 0).attr("class", "radarLegendText").text(curve.label);
  });
}
(0,_chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.__name)(drawLegend, "drawLegend");
var renderer = { draw };

// src/diagrams/radar/styles.ts
var genIndexStyles = /* @__PURE__ */ (0,_chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.__name)((themeVariables, radarOptions) => {
  let sections = "";
  for (let i = 0; i < themeVariables.THEME_COLOR_LIMIT; i++) {
    const indexColor = themeVariables[`cScale${i}`];
    sections += `
		.radarCurve-${i} {
			color: ${indexColor};
			fill: ${indexColor};
			fill-opacity: ${radarOptions.curveOpacity};
			stroke: ${indexColor};
			stroke-width: ${radarOptions.curveStrokeWidth};
		}
		.radarLegendBox-${i} {
			fill: ${indexColor};
			fill-opacity: ${radarOptions.curveOpacity};
			stroke: ${indexColor};
		}
		`;
  }
  return sections;
}, "genIndexStyles");
var buildRadarStyleOptions = /* @__PURE__ */ (0,_chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.__name)((radar) => {
  const defaultThemeVariables = (0,_chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.getThemeVariables)();
  const currentConfig = (0,_chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.getConfig)();
  const themeVariables = (0,_chunk_O4NI6UNU_mjs__WEBPACK_IMPORTED_MODULE_1__.cleanAndMerge)(defaultThemeVariables, currentConfig.themeVariables);
  const radarOptions = (0,_chunk_O4NI6UNU_mjs__WEBPACK_IMPORTED_MODULE_1__.cleanAndMerge)(themeVariables.radar, radar);
  return { themeVariables, radarOptions };
}, "buildRadarStyleOptions");
var styles = /* @__PURE__ */ (0,_chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.__name)(({ radar } = {}) => {
  const { themeVariables, radarOptions } = buildRadarStyleOptions(radar);
  return `
	.radarTitle {
		font-size: ${themeVariables.fontSize};
		color: ${themeVariables.titleColor};
		dominant-baseline: hanging;
		text-anchor: middle;
	}
	.radarAxisLine {
		stroke: ${radarOptions.axisColor};
		stroke-width: ${radarOptions.axisStrokeWidth};
	}
	.radarAxisLabel {
		dominant-baseline: middle;
		text-anchor: middle;
		font-size: ${radarOptions.axisLabelFontSize}px;
		color: ${radarOptions.axisColor};
	}
	.radarGraticule {
		fill: ${radarOptions.graticuleColor};
		fill-opacity: ${radarOptions.graticuleOpacity};
		stroke: ${radarOptions.graticuleColor};
		stroke-width: ${radarOptions.graticuleStrokeWidth};
	}
	.radarLegendText {
		text-anchor: start;
		font-size: ${radarOptions.legendFontSize}px;
		dominant-baseline: hanging;
	}
	${genIndexStyles(themeVariables, radarOptions)}
	`;
}, "styles");

// src/diagrams/radar/diagram.ts
var diagram = {
  parser,
  db,
  renderer,
  styles
};



/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidmVuZG9ycy1ub2RlX21vZHVsZXNfbWVybWFpZF9kaXN0X2NodW5rc19tZXJtYWlkX2NvcmVfZGlhZ3JhbS1TU0tBVE5MVl9tanMuMGRlZDQ5MTJkMTFmYjE3Nzc1MjEuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFFOEI7O0FBRTlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJEQUFNOztBQUlKOzs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ2xCNEI7QUFHQTtBQUdBO0FBY0E7O0FBRTlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIsc0VBQXFCO0FBQ2hELGlDQUFpQywyREFBTTtBQUN2QyxpQkFBaUIsa0VBQWE7QUFDOUI7QUFDQSxPQUFPLDhEQUFTO0FBQ2hCLEdBQUc7QUFDSDtBQUNBLENBQUM7QUFDRCw4QkFBOEIsMkRBQU07QUFDcEMsZ0NBQWdDLDJEQUFNO0FBQ3RDLGlDQUFpQywyREFBTTtBQUN2Qyw4QkFBOEIsMkRBQU07QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxDQUFDO0FBQ0QsZ0NBQWdDLDJEQUFNO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxDQUFDO0FBQ0QsMENBQTBDLDJEQUFNO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILENBQUM7QUFDRCxpQ0FBaUMsMkRBQU07QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNELDZCQUE2QiwyREFBTTtBQUNuQyxFQUFFLDBEQUFLO0FBQ1A7QUFDQSxDQUFDO0FB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QUFZO0FBQ1osa0JBQWtCO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSwrQkFBK0I7QUFDOUMsV0FBVztBQUNYO0FBQ0E7QUFDQSxVQUFVO0FBQ1Ysa0JBQWtCO0FBQ2xCLFlBQVk7QUFDWixrQkFBa0I7QUFDbEI7QUFDQTtBQUNBO0FBQ0EsZUFBZSw0QkFBNEI7QUFDM0M7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLENBQUM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHRSIsInNvdXJjZXMiOlsid2VicGFjazovL0BqdXB5dGVybGFiL2FwcGxpY2F0aW9uLXRvcC8uL25vZGVfbW9kdWxlcy9tZXJtYWlkL2Rpc3QvY2h1bmtzL21lcm1haWQuY29yZS9jaHVuay00Qk1FWkdIRi5tanMiLCJ3ZWJwYWNrOi8vQGp1cHl0ZXJsYWIvYXBwbGljYXRpb24tdG9wLy4vbm9kZV9tb2R1bGVzL21lcm1haWQvZGlzdC9jaHVua3MvbWVybWFpZC5jb3JlL2RpYWdyYW0tU1NLQVROTFYubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gIF9fbmFtZVxufSBmcm9tIFwiLi9jaHVuay1ZVEpOVDdEVS5tanNcIjtcblxuLy8gc3JjL2RpYWdyYW1zL2NvbW1vbi9wb3B1bGF0ZUNvbW1vbkRiLnRzXG5mdW5jdGlvbiBwb3B1bGF0ZUNvbW1vbkRiKGFzdCwgZGIpIHtcbiAgaWYgKGFzdC5hY2NEZXNjcikge1xuICAgIGRiLnNldEFjY0Rlc2NyaXB0aW9uPy4oYXN0LmFjY0Rlc2NyKTtcbiAgfVxuICBpZiAoYXN0LmFjY1RpdGxlKSB7XG4gICAgZGIuc2V0QWNjVGl0bGU/Lihhc3QuYWNjVGl0bGUpO1xuICB9XG4gIGlmIChhc3QudGl0bGUpIHtcbiAgICBkYi5zZXREaWFncmFtVGl0bGU/Lihhc3QudGl0bGUpO1xuICB9XG59XG5fX25hbWUocG9wdWxhdGVDb21tb25EYiwgXCJwb3B1bGF0ZUNvbW1vbkRiXCIpO1xuXG5leHBvcnQge1xuICBwb3B1bGF0ZUNvbW1vbkRiXG59O1xuIiwiaW1wb3J0IHtcbiAgcG9wdWxhdGVDb21tb25EYlxufSBmcm9tIFwiLi9jaHVuay00Qk1FWkdIRi5tanNcIjtcbmltcG9ydCB7XG4gIGNsZWFuQW5kTWVyZ2Vcbn0gZnJvbSBcIi4vY2h1bmstTzROSTZVTlUubWpzXCI7XG5pbXBvcnQge1xuICBzZWxlY3RTdmdFbGVtZW50XG59IGZyb20gXCIuL2NodW5rLTdCNjc3UVlELm1qc1wiO1xuaW1wb3J0IHtcbiAgX19uYW1lLFxuICBjbGVhcixcbiAgZGVmYXVsdENvbmZpZ19kZWZhdWx0LFxuICBnZXRBY2NEZXNjcmlwdGlvbixcbiAgZ2V0QWNjVGl0bGUsXG4gIGdldENvbmZpZyxcbiAgZ2V0RGlhZ3JhbVRpdGxlLFxuICBnZXRUaGVtZVZhcmlhYmxlcyxcbiAgbG9nLFxuICBzZXRBY2NEZXNjcmlwdGlvbixcbiAgc2V0QWNjVGl0bGUsXG4gIHNldERpYWdyYW1UaXRsZVxufSBmcm9tIFwiLi9jaHVuay1ZVEpOVDdEVS5tanNcIjtcblxuLy8gc3JjL2RpYWdyYW1zL3JhZGFyL2RiLnRzXG52YXIgZGVmYXVsdE9wdGlvbnMgPSB7XG4gIHNob3dMZWdlbmQ6IHRydWUsXG4gIHRpY2tzOiA1LFxuICBtYXg6IG51bGwsXG4gIG1pbjogMCxcbiAgZ3JhdGljdWxlOiBcImNpcmNsZVwiXG59O1xudmFyIGRlZmF1bHRSYWRhckRhdGEgPSB7XG4gIGF4ZXM6IFtdLFxuICBjdXJ2ZXM6IFtdLFxuICBvcHRpb25zOiBkZWZhdWx0T3B0aW9uc1xufTtcbnZhciBkYXRhID0gc3RydWN0dXJlZENsb25lKGRlZmF1bHRSYWRhckRhdGEpO1xudmFyIERFRkFVTFRfUkFEQVJfQ09ORklHID0gZGVmYXVsdENvbmZpZ19kZWZhdWx0LnJhZGFyO1xudmFyIGdldENvbmZpZzIgPSAvKiBAX19QVVJFX18gKi8gX19uYW1lKCgpID0+IHtcbiAgY29uc3QgY29uZmlnID0gY2xlYW5BbmRNZXJnZSh7XG4gICAgLi4uREVGQVVMVF9SQURBUl9DT05GSUcsXG4gICAgLi4uZ2V0Q29uZmlnKCkucmFkYXJcbiAgfSk7XG4gIHJldHVybiBjb25maWc7XG59LCBcImdldENvbmZpZ1wiKTtcbnZhciBnZXRBeGVzID0gLyogQF9fUFVSRV9fICovIF9fbmFtZSgoKSA9PiBkYXRhLmF4ZXMsIFwiZ2V0QXhlc1wiKTtcbnZhciBnZXRDdXJ2ZXMgPSAvKiBAX19QVVJFX18gKi8gX19uYW1lKCgpID0+IGRhdGEuY3VydmVzLCBcImdldEN1cnZlc1wiKTtcbnZhciBnZXRPcHRpb25zID0gLyogQF9fUFVSRV9fICovIF9fbmFtZSgoKSA9PiBkYXRhLm9wdGlvbnMsIFwiZ2V0T3B0aW9uc1wiKTtcbnZhciBzZXRBeGVzID0gLyogQF9fUFVSRV9fICovIF9fbmFtZSgoYXhlcykgPT4ge1xuICBkYXRhLmF4ZXMgPSBheGVzLm1hcCgoYXhpcykgPT4ge1xuICAgIHJldHVybiB7XG4gICAgICBuYW1lOiBheGlzLm5hbWUsXG4gICAgICBsYWJlbDogYXhpcy5sYWJlbCA/PyBheGlzLm5hbWVcbiAgICB9O1xuICB9KTtcbn0sIFwic2V0QXhlc1wiKTtcbnZhciBzZXRDdXJ2ZXMgPSAvKiBAX19QVVJFX18gKi8gX19uYW1lKChjdXJ2ZXMpID0+IHtcbiAgZGF0YS5jdXJ2ZXMgPSBjdXJ2ZXMubWFwKChjdXJ2ZSkgPT4ge1xuICAgIHJldHVybiB7XG4gICAgICBuYW1lOiBjdXJ2ZS5uYW1lLFxuICAgICAgbGFiZWw6IGN1cnZlLmxhYmVsID8/IGN1cnZlLm5hbWUsXG4gICAgICBlbnRyaWVzOiBjb21wdXRlQ3VydmVFbnRyaWVzKGN1cnZlLmVudHJpZXMpXG4gICAgfTtcbiAgfSk7XG59LCBcInNldEN1cnZlc1wiKTtcbnZhciBjb21wdXRlQ3VydmVFbnRyaWVzID0gLyogQF9fUFVSRV9fICovIF9fbmFtZSgoZW50cmllcykgPT4ge1xuICBpZiAoZW50cmllc1swXS5heGlzID09IHZvaWQgMCkge1xuICAgIHJldHVybiBlbnRyaWVzLm1hcCgoZW50cnkpID0+IGVudHJ5LnZhbHVlKTtcbiAgfVxuICBjb25zdCBheGVzID0gZ2V0QXhlcygpO1xuICBpZiAoYXhlcy5sZW5ndGggPT09IDApIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJBeGVzIG11c3QgYmUgcG9wdWxhdGVkIGJlZm9yZSBjdXJ2ZXMgZm9yIHJlZmVyZW5jZSBlbnRyaWVzXCIpO1xuICB9XG4gIHJldHVybiBheGVzLm1hcCgoYXhpcykgPT4ge1xuICAgIGNvbnN0IGVudHJ5ID0gZW50cmllcy5maW5kKChlbnRyeTIpID0+IGVudHJ5Mi5heGlzPy4kcmVmVGV4dCA9PT0gYXhpcy5uYW1lKTtcbiAgICBpZiAoZW50cnkgPT09IHZvaWQgMCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTWlzc2luZyBlbnRyeSBmb3IgYXhpcyBcIiArIGF4aXMubGFiZWwpO1xuICAgIH1cbiAgICByZXR1cm4gZW50cnkudmFsdWU7XG4gIH0pO1xufSwgXCJjb21wdXRlQ3VydmVFbnRyaWVzXCIpO1xudmFyIHNldE9wdGlvbnMgPSAvKiBAX19QVVJFX18gKi8gX19uYW1lKChvcHRpb25zKSA9PiB7XG4gIGNvbnN0IG9wdGlvbk1hcCA9IG9wdGlvbnMucmVkdWNlKFxuICAgIChhY2MsIG9wdGlvbikgPT4ge1xuICAgICAgYWNjW29wdGlvbi5uYW1lXSA9IG9wdGlvbjtcbiAgICAgIHJldHVybiBhY2M7XG4gICAgfSxcbiAgICB7fVxuICApO1xuICBkYXRhLm9wdGlvbnMgPSB7XG4gICAgc2hvd0xlZ2VuZDogb3B0aW9uTWFwLnNob3dMZWdlbmQ/LnZhbHVlID8/IGRlZmF1bHRPcHRpb25zLnNob3dMZWdlbmQsXG4gICAgdGlja3M6IG9wdGlvbk1hcC50aWNrcz8udmFsdWUgPz8gZGVmYXVsdE9wdGlvbnMudGlja3MsXG4gICAgbWF4OiBvcHRpb25NYXAubWF4Py52YWx1ZSA/PyBkZWZhdWx0T3B0aW9ucy5tYXgsXG4gICAgbWluOiBvcHRpb25NYXAubWluPy52YWx1ZSA/PyBkZWZhdWx0T3B0aW9ucy5taW4sXG4gICAgZ3JhdGljdWxlOiBvcHRpb25NYXAuZ3JhdGljdWxlPy52YWx1ZSA/PyBkZWZhdWx0T3B0aW9ucy5ncmF0aWN1bGVcbiAgfTtcbn0sIFwic2V0T3B0aW9uc1wiKTtcbnZhciBjbGVhcjIgPSAvKiBAX19QVVJFX18gKi8gX19uYW1lKCgpID0+IHtcbiAgY2xlYXIoKTtcbiAgZGF0YSA9IHN0cnVjdHVyZWRDbG9uZShkZWZhdWx0UmFkYXJEYXRhKTtcbn0sIFwiY2xlYXJcIik7XG52YXIgZGIgPSB7XG4gIGdldEF4ZXMsXG4gIGdldEN1cnZlcyxcbiAgZ2V0T3B0aW9ucyxcbiAgc2V0QXhlcyxcbiAgc2V0Q3VydmVzLFxuICBzZXRPcHRpb25zLFxuICBnZXRDb25maWc6IGdldENvbmZpZzIsXG4gIGNsZWFyOiBjbGVhcjIsXG4gIHNldEFjY1RpdGxlLFxuICBnZXRBY2NUaXRsZSxcbiAgc2V0RGlhZ3JhbVRpdGxlLFxuICBnZXREaWFncmFtVGl0bGUsXG4gIGdldEFjY0Rlc2NyaXB0aW9uLFxuICBzZXRBY2NEZXNjcmlwdGlvblxufTtcblxuLy8gc3JjL2RpYWdyYW1zL3JhZGFyL3BhcnNlci50c1xuaW1wb3J0IHsgcGFyc2UgfSBmcm9tIFwiQG1lcm1haWQtanMvcGFyc2VyXCI7XG52YXIgcG9wdWxhdGUgPSAvKiBAX19QVVJFX18gKi8gX19uYW1lKChhc3QpID0+IHtcbiAgcG9wdWxhdGVDb21tb25EYihhc3QsIGRiKTtcbiAgY29uc3QgeyBheGVzLCBjdXJ2ZXMsIG9wdGlvbnMgfSA9IGFzdDtcbiAgZGIuc2V0QXhlcyhheGVzKTtcbiAgZGIuc2V0Q3VydmVzKGN1cnZlcyk7XG4gIGRiLnNldE9wdGlvbnMob3B0aW9ucyk7XG59LCBcInBvcHVsYXRlXCIpO1xudmFyIHBhcnNlciA9IHtcbiAgcGFyc2U6IC8qIEBfX1BVUkVfXyAqLyBfX25hbWUoYXN5bmMgKGlucHV0KSA9PiB7XG4gICAgY29uc3QgYXN0ID0gYXdhaXQgcGFyc2UoXCJyYWRhclwiLCBpbnB1dCk7XG4gICAgbG9nLmRlYnVnKGFzdCk7XG4gICAgcG9wdWxhdGUoYXN0KTtcbiAgfSwgXCJwYXJzZVwiKVxufTtcblxuLy8gc3JjL2RpYWdyYW1zL3JhZGFyL3JlbmRlcmVyLnRzXG52YXIgZHJhdyA9IC8qIEBfX1BVUkVfXyAqLyBfX25hbWUoKF90ZXh0LCBpZCwgX3ZlcnNpb24sIGRpYWdyYW0yKSA9PiB7XG4gIGNvbnN0IGRiMiA9IGRpYWdyYW0yLmRiO1xuICBjb25zdCBheGVzID0gZGIyLmdldEF4ZXMoKTtcbiAgY29uc3QgY3VydmVzID0gZGIyLmdldEN1cnZlcygpO1xuICBjb25zdCBvcHRpb25zID0gZGIyLmdldE9wdGlvbnMoKTtcbiAgY29uc3QgY29uZmlnID0gZGIyLmdldENvbmZpZygpO1xuICBjb25zdCB0aXRsZSA9IGRiMi5nZXREaWFncmFtVGl0bGUoKTtcbiAgY29uc3Qgc3ZnID0gc2VsZWN0U3ZnRWxlbWVudChpZCk7XG4gIGNvbnN0IGcgPSBkcmF3RnJhbWUoc3ZnLCBjb25maWcpO1xuICBjb25zdCBtYXhWYWx1ZSA9IG9wdGlvbnMubWF4ID8/IE1hdGgubWF4KC4uLmN1cnZlcy5tYXAoKGN1cnZlKSA9PiBNYXRoLm1heCguLi5jdXJ2ZS5lbnRyaWVzKSkpO1xuICBjb25zdCBtaW5WYWx1ZSA9IG9wdGlvbnMubWluO1xuICBjb25zdCByYWRpdXMgPSBNYXRoLm1pbihjb25maWcud2lkdGgsIGNvbmZpZy5oZWlnaHQpIC8gMjtcbiAgZHJhd0dyYXRpY3VsZShnLCBheGVzLCByYWRpdXMsIG9wdGlvbnMudGlja3MsIG9wdGlvbnMuZ3JhdGljdWxlKTtcbiAgZHJhd0F4ZXMoZywgYXhlcywgcmFkaXVzLCBjb25maWcpO1xuICBkcmF3Q3VydmVzKGcsIGF4ZXMsIGN1cnZlcywgbWluVmFsdWUsIG1heFZhbHVlLCBvcHRpb25zLmdyYXRpY3VsZSwgY29uZmlnKTtcbiAgZHJhd0xlZ2VuZChnLCBjdXJ2ZXMsIG9wdGlvbnMuc2hvd0xlZ2VuZCwgY29uZmlnKTtcbiAgZy5hcHBlbmQoXCJ0ZXh0XCIpLmF0dHIoXCJjbGFzc1wiLCBcInJhZGFyVGl0bGVcIikudGV4dCh0aXRsZSkuYXR0cihcInhcIiwgMCkuYXR0cihcInlcIiwgLWNvbmZpZy5oZWlnaHQgLyAyIC0gY29uZmlnLm1hcmdpblRvcCk7XG59LCBcImRyYXdcIik7XG52YXIgZHJhd0ZyYW1lID0gLyogQF9fUFVSRV9fICovIF9fbmFtZSgoc3ZnLCBjb25maWcpID0+IHtcbiAgY29uc3QgdG90YWxXaWR0aCA9IGNvbmZpZy53aWR0aCArIGNvbmZpZy5tYXJnaW5MZWZ0ICsgY29uZmlnLm1hcmdpblJpZ2h0O1xuICBjb25zdCB0b3RhbEhlaWdodCA9IGNvbmZpZy5oZWlnaHQgKyBjb25maWcubWFyZ2luVG9wICsgY29uZmlnLm1hcmdpbkJvdHRvbTtcbiAgY29uc3QgY2VudGVyID0ge1xuICAgIHg6IGNvbmZpZy5tYXJnaW5MZWZ0ICsgY29uZmlnLndpZHRoIC8gMixcbiAgICB5OiBjb25maWcubWFyZ2luVG9wICsgY29uZmlnLmhlaWdodCAvIDJcbiAgfTtcbiAgc3ZnLmF0dHIoXCJ2aWV3Ym94XCIsIGAwIDAgJHt0b3RhbFdpZHRofSAke3RvdGFsSGVpZ2h0fWApLmF0dHIoXCJ3aWR0aFwiLCB0b3RhbFdpZHRoKS5hdHRyKFwiaGVpZ2h0XCIsIHRvdGFsSGVpZ2h0KTtcbiAgcmV0dXJuIHN2Zy5hcHBlbmQoXCJnXCIpLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgYHRyYW5zbGF0ZSgke2NlbnRlci54fSwgJHtjZW50ZXIueX0pYCk7XG59LCBcImRyYXdGcmFtZVwiKTtcbnZhciBkcmF3R3JhdGljdWxlID0gLyogQF9fUFVSRV9fICovIF9fbmFtZSgoZywgYXhlcywgcmFkaXVzLCB0aWNrcywgZ3JhdGljdWxlKSA9PiB7XG4gIGlmIChncmF0aWN1bGUgPT09IFwiY2lyY2xlXCIpIHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRpY2tzOyBpKyspIHtcbiAgICAgIGNvbnN0IHIgPSByYWRpdXMgKiAoaSArIDEpIC8gdGlja3M7XG4gICAgICBnLmFwcGVuZChcImNpcmNsZVwiKS5hdHRyKFwiclwiLCByKS5hdHRyKFwiY2xhc3NcIiwgXCJyYWRhckdyYXRpY3VsZVwiKTtcbiAgICB9XG4gIH0gZWxzZSBpZiAoZ3JhdGljdWxlID09PSBcInBvbHlnb25cIikge1xuICAgIGNvbnN0IG51bUF4ZXMgPSBheGVzLmxlbmd0aDtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRpY2tzOyBpKyspIHtcbiAgICAgIGNvbnN0IHIgPSByYWRpdXMgKiAoaSArIDEpIC8gdGlja3M7XG4gICAgICBjb25zdCBwb2ludHMgPSBheGVzLm1hcCgoXywgaikgPT4ge1xuICAgICAgICBjb25zdCBhbmdsZSA9IDIgKiBqICogTWF0aC5QSSAvIG51bUF4ZXMgLSBNYXRoLlBJIC8gMjtcbiAgICAgICAgY29uc3QgeCA9IHIgKiBNYXRoLmNvcyhhbmdsZSk7XG4gICAgICAgIGNvbnN0IHkgPSByICogTWF0aC5zaW4oYW5nbGUpO1xuICAgICAgICByZXR1cm4gYCR7eH0sJHt5fWA7XG4gICAgICB9KS5qb2luKFwiIFwiKTtcbiAgICAgIGcuYXBwZW5kKFwicG9seWdvblwiKS5hdHRyKFwicG9pbnRzXCIsIHBvaW50cykuYXR0cihcImNsYXNzXCIsIFwicmFkYXJHcmF0aWN1bGVcIik7XG4gICAgfVxuICB9XG59LCBcImRyYXdHcmF0aWN1bGVcIik7XG52YXIgZHJhd0F4ZXMgPSAvKiBAX19QVVJFX18gKi8gX19uYW1lKChnLCBheGVzLCByYWRpdXMsIGNvbmZpZykgPT4ge1xuICBjb25zdCBudW1BeGVzID0gYXhlcy5sZW5ndGg7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgbnVtQXhlczsgaSsrKSB7XG4gICAgY29uc3QgbGFiZWwgPSBheGVzW2ldLmxhYmVsO1xuICAgIGNvbnN0IGFuZ2xlID0gMiAqIGkgKiBNYXRoLlBJIC8gbnVtQXhlcyAtIE1hdGguUEkgLyAyO1xuICAgIGcuYXBwZW5kKFwibGluZVwiKS5hdHRyKFwieDFcIiwgMCkuYXR0cihcInkxXCIsIDApLmF0dHIoXCJ4MlwiLCByYWRpdXMgKiBjb25maWcuYXhpc1NjYWxlRmFjdG9yICogTWF0aC5jb3MoYW5nbGUpKS5hdHRyKFwieTJcIiwgcmFkaXVzICogY29uZmlnLmF4aXNTY2FsZUZhY3RvciAqIE1hdGguc2luKGFuZ2xlKSkuYXR0cihcImNsYXNzXCIsIFwicmFkYXJBeGlzTGluZVwiKTtcbiAgICBnLmFwcGVuZChcInRleHRcIikudGV4dChsYWJlbCkuYXR0cihcInhcIiwgcmFkaXVzICogY29uZmlnLmF4aXNMYWJlbEZhY3RvciAqIE1hdGguY29zKGFuZ2xlKSkuYXR0cihcInlcIiwgcmFkaXVzICogY29uZmlnLmF4aXNMYWJlbEZhY3RvciAqIE1hdGguc2luKGFuZ2xlKSkuYXR0cihcImNsYXNzXCIsIFwicmFkYXJBeGlzTGFiZWxcIik7XG4gIH1cbn0sIFwiZHJhd0F4ZXNcIik7XG5mdW5jdGlvbiBkcmF3Q3VydmVzKGcsIGF4ZXMsIGN1cnZlcywgbWluVmFsdWUsIG1heFZhbHVlLCBncmF0aWN1bGUsIGNvbmZpZykge1xuICBjb25zdCBudW1BeGVzID0gYXhlcy5sZW5ndGg7XG4gIGNvbnN0IHJhZGl1cyA9IE1hdGgubWluKGNvbmZpZy53aWR0aCwgY29uZmlnLmhlaWdodCkgLyAyO1xuICBjdXJ2ZXMuZm9yRWFjaCgoY3VydmUsIGluZGV4KSA9PiB7XG4gICAgaWYgKGN1cnZlLmVudHJpZXMubGVuZ3RoICE9PSBudW1BeGVzKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IHBvaW50cyA9IGN1cnZlLmVudHJpZXMubWFwKChlbnRyeSwgaSkgPT4ge1xuICAgICAgY29uc3QgYW5nbGUgPSAyICogTWF0aC5QSSAqIGkgLyBudW1BeGVzIC0gTWF0aC5QSSAvIDI7XG4gICAgICBjb25zdCByID0gcmVsYXRpdmVSYWRpdXMoZW50cnksIG1pblZhbHVlLCBtYXhWYWx1ZSwgcmFkaXVzKTtcbiAgICAgIGNvbnN0IHggPSByICogTWF0aC5jb3MoYW5nbGUpO1xuICAgICAgY29uc3QgeSA9IHIgKiBNYXRoLnNpbihhbmdsZSk7XG4gICAgICByZXR1cm4geyB4LCB5IH07XG4gICAgfSk7XG4gICAgaWYgKGdyYXRpY3VsZSA9PT0gXCJjaXJjbGVcIikge1xuICAgICAgZy5hcHBlbmQoXCJwYXRoXCIpLmF0dHIoXCJkXCIsIGNsb3NlZFJvdW5kQ3VydmUocG9pbnRzLCBjb25maWcuY3VydmVUZW5zaW9uKSkuYXR0cihcImNsYXNzXCIsIGByYWRhckN1cnZlLSR7aW5kZXh9YCk7XG4gICAgfSBlbHNlIGlmIChncmF0aWN1bGUgPT09IFwicG9seWdvblwiKSB7XG4gICAgICBnLmFwcGVuZChcInBvbHlnb25cIikuYXR0cihcInBvaW50c1wiLCBwb2ludHMubWFwKChwKSA9PiBgJHtwLnh9LCR7cC55fWApLmpvaW4oXCIgXCIpKS5hdHRyKFwiY2xhc3NcIiwgYHJhZGFyQ3VydmUtJHtpbmRleH1gKTtcbiAgICB9XG4gIH0pO1xufVxuX19uYW1lKGRyYXdDdXJ2ZXMsIFwiZHJhd0N1cnZlc1wiKTtcbmZ1bmN0aW9uIHJlbGF0aXZlUmFkaXVzKHZhbHVlLCBtaW5WYWx1ZSwgbWF4VmFsdWUsIHJhZGl1cykge1xuICBjb25zdCBjbGlwcGVkVmFsdWUgPSBNYXRoLm1pbihNYXRoLm1heCh2YWx1ZSwgbWluVmFsdWUpLCBtYXhWYWx1ZSk7XG4gIHJldHVybiByYWRpdXMgKiAoY2xpcHBlZFZhbHVlIC0gbWluVmFsdWUpIC8gKG1heFZhbHVlIC0gbWluVmFsdWUpO1xufVxuX19uYW1lKHJlbGF0aXZlUmFkaXVzLCBcInJlbGF0aXZlUmFkaXVzXCIpO1xuZnVuY3Rpb24gY2xvc2VkUm91bmRDdXJ2ZShwb2ludHMsIHRlbnNpb24pIHtcbiAgY29uc3QgbnVtUG9pbnRzID0gcG9pbnRzLmxlbmd0aDtcbiAgbGV0IGQgPSBgTSR7cG9pbnRzWzBdLnh9LCR7cG9pbnRzWzBdLnl9YDtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBudW1Qb2ludHM7IGkrKykge1xuICAgIGNvbnN0IHAwID0gcG9pbnRzWyhpIC0gMSArIG51bVBvaW50cykgJSBudW1Qb2ludHNdO1xuICAgIGNvbnN0IHAxID0gcG9pbnRzW2ldO1xuICAgIGNvbnN0IHAyID0gcG9pbnRzWyhpICsgMSkgJSBudW1Qb2ludHNdO1xuICAgIGNvbnN0IHAzID0gcG9pbnRzWyhpICsgMikgJSBudW1Qb2ludHNdO1xuICAgIGNvbnN0IGNwMSA9IHtcbiAgICAgIHg6IHAxLnggKyAocDIueCAtIHAwLngpICogdGVuc2lvbixcbiAgICAgIHk6IHAxLnkgKyAocDIueSAtIHAwLnkpICogdGVuc2lvblxuICAgIH07XG4gICAgY29uc3QgY3AyID0ge1xuICAgICAgeDogcDIueCAtIChwMy54IC0gcDEueCkgKiB0ZW5zaW9uLFxuICAgICAgeTogcDIueSAtIChwMy55IC0gcDEueSkgKiB0ZW5zaW9uXG4gICAgfTtcbiAgICBkICs9IGAgQyR7Y3AxLnh9LCR7Y3AxLnl9ICR7Y3AyLnh9LCR7Y3AyLnl9ICR7cDIueH0sJHtwMi55fWA7XG4gIH1cbiAgcmV0dXJuIGAke2R9IFpgO1xufVxuX19uYW1lKGNsb3NlZFJvdW5kQ3VydmUsIFwiY2xvc2VkUm91bmRDdXJ2ZVwiKTtcbmZ1bmN0aW9uIGRyYXdMZWdlbmQoZywgY3VydmVzLCBzaG93TGVnZW5kLCBjb25maWcpIHtcbiAgaWYgKCFzaG93TGVnZW5kKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGNvbnN0IGxlZ2VuZFggPSAoY29uZmlnLndpZHRoIC8gMiArIGNvbmZpZy5tYXJnaW5SaWdodCkgKiAzIC8gNDtcbiAgY29uc3QgbGVnZW5kWSA9IC0oY29uZmlnLmhlaWdodCAvIDIgKyBjb25maWcubWFyZ2luVG9wKSAqIDMgLyA0O1xuICBjb25zdCBsaW5lSGVpZ2h0ID0gMjA7XG4gIGN1cnZlcy5mb3JFYWNoKChjdXJ2ZSwgaW5kZXgpID0+IHtcbiAgICBjb25zdCBpdGVtR3JvdXAgPSBnLmFwcGVuZChcImdcIikuYXR0cihcInRyYW5zZm9ybVwiLCBgdHJhbnNsYXRlKCR7bGVnZW5kWH0sICR7bGVnZW5kWSArIGluZGV4ICogbGluZUhlaWdodH0pYCk7XG4gICAgaXRlbUdyb3VwLmFwcGVuZChcInJlY3RcIikuYXR0cihcIndpZHRoXCIsIDEyKS5hdHRyKFwiaGVpZ2h0XCIsIDEyKS5hdHRyKFwiY2xhc3NcIiwgYHJhZGFyTGVnZW5kQm94LSR7aW5kZXh9YCk7XG4gICAgaXRlbUdyb3VwLmFwcGVuZChcInRleHRcIikuYXR0cihcInhcIiwgMTYpLmF0dHIoXCJ5XCIsIDApLmF0dHIoXCJjbGFzc1wiLCBcInJhZGFyTGVnZW5kVGV4dFwiKS50ZXh0KGN1cnZlLmxhYmVsKTtcbiAgfSk7XG59XG5fX25hbWUoZHJhd0xlZ2VuZCwgXCJkcmF3TGVnZW5kXCIpO1xudmFyIHJlbmRlcmVyID0geyBkcmF3IH07XG5cbi8vIHNyYy9kaWFncmFtcy9yYWRhci9zdHlsZXMudHNcbnZhciBnZW5JbmRleFN0eWxlcyA9IC8qIEBfX1BVUkVfXyAqLyBfX25hbWUoKHRoZW1lVmFyaWFibGVzLCByYWRhck9wdGlvbnMpID0+IHtcbiAgbGV0IHNlY3Rpb25zID0gXCJcIjtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGVtZVZhcmlhYmxlcy5USEVNRV9DT0xPUl9MSU1JVDsgaSsrKSB7XG4gICAgY29uc3QgaW5kZXhDb2xvciA9IHRoZW1lVmFyaWFibGVzW2BjU2NhbGUke2l9YF07XG4gICAgc2VjdGlvbnMgKz0gYFxuXHRcdC5yYWRhckN1cnZlLSR7aX0ge1xuXHRcdFx0Y29sb3I6ICR7aW5kZXhDb2xvcn07XG5cdFx0XHRmaWxsOiAke2luZGV4Q29sb3J9O1xuXHRcdFx0ZmlsbC1vcGFjaXR5OiAke3JhZGFyT3B0aW9ucy5jdXJ2ZU9wYWNpdHl9O1xuXHRcdFx0c3Ryb2tlOiAke2luZGV4Q29sb3J9O1xuXHRcdFx0c3Ryb2tlLXdpZHRoOiAke3JhZGFyT3B0aW9ucy5jdXJ2ZVN0cm9rZVdpZHRofTtcblx0XHR9XG5cdFx0LnJhZGFyTGVnZW5kQm94LSR7aX0ge1xuXHRcdFx0ZmlsbDogJHtpbmRleENvbG9yfTtcblx0XHRcdGZpbGwtb3BhY2l0eTogJHtyYWRhck9wdGlvbnMuY3VydmVPcGFjaXR5fTtcblx0XHRcdHN0cm9rZTogJHtpbmRleENvbG9yfTtcblx0XHR9XG5cdFx0YDtcbiAgfVxuICByZXR1cm4gc2VjdGlvbnM7XG59LCBcImdlbkluZGV4U3R5bGVzXCIpO1xudmFyIGJ1aWxkUmFkYXJTdHlsZU9wdGlvbnMgPSAvKiBAX19QVVJFX18gKi8gX19uYW1lKChyYWRhcikgPT4ge1xuICBjb25zdCBkZWZhdWx0VGhlbWVWYXJpYWJsZXMgPSBnZXRUaGVtZVZhcmlhYmxlcygpO1xuICBjb25zdCBjdXJyZW50Q29uZmlnID0gZ2V0Q29uZmlnKCk7XG4gIGNvbnN0IHRoZW1lVmFyaWFibGVzID0gY2xlYW5BbmRNZXJnZShkZWZhdWx0VGhlbWVWYXJpYWJsZXMsIGN1cnJlbnRDb25maWcudGhlbWVWYXJpYWJsZXMpO1xuICBjb25zdCByYWRhck9wdGlvbnMgPSBjbGVhbkFuZE1lcmdlKHRoZW1lVmFyaWFibGVzLnJhZGFyLCByYWRhcik7XG4gIHJldHVybiB7IHRoZW1lVmFyaWFibGVzLCByYWRhck9wdGlvbnMgfTtcbn0sIFwiYnVpbGRSYWRhclN0eWxlT3B0aW9uc1wiKTtcbnZhciBzdHlsZXMgPSAvKiBAX19QVVJFX18gKi8gX19uYW1lKCh7IHJhZGFyIH0gPSB7fSkgPT4ge1xuICBjb25zdCB7IHRoZW1lVmFyaWFibGVzLCByYWRhck9wdGlvbnMgfSA9IGJ1aWxkUmFkYXJTdHlsZU9wdGlvbnMocmFkYXIpO1xuICByZXR1cm4gYFxuXHQucmFkYXJUaXRsZSB7XG5cdFx0Zm9udC1zaXplOiAke3RoZW1lVmFyaWFibGVzLmZvbnRTaXplfTtcblx0XHRjb2xvcjogJHt0aGVtZVZhcmlhYmxlcy50aXRsZUNvbG9yfTtcblx0XHRkb21pbmFudC1iYXNlbGluZTogaGFuZ2luZztcblx0XHR0ZXh0LWFuY2hvcjogbWlkZGxlO1xuXHR9XG5cdC5yYWRhckF4aXNMaW5lIHtcblx0XHRzdHJva2U6ICR7cmFkYXJPcHRpb25zLmF4aXNDb2xvcn07XG5cdFx0c3Ryb2tlLXdpZHRoOiAke3JhZGFyT3B0aW9ucy5heGlzU3Ryb2tlV2lkdGh9O1xuXHR9XG5cdC5yYWRhckF4aXNMYWJlbCB7XG5cdFx0ZG9taW5hbnQtYmFzZWxpbmU6IG1pZGRsZTtcblx0XHR0ZXh0LWFuY2hvcjogbWlkZGxlO1xuXHRcdGZvbnQtc2l6ZTogJHtyYWRhck9wdGlvbnMuYXhpc0xhYmVsRm9udFNpemV9cHg7XG5cdFx0Y29sb3I6ICR7cmFkYXJPcHRpb25zLmF4aXNDb2xvcn07XG5cdH1cblx0LnJhZGFyR3JhdGljdWxlIHtcblx0XHRmaWxsOiAke3JhZGFyT3B0aW9ucy5ncmF0aWN1bGVDb2xvcn07XG5cdFx0ZmlsbC1vcGFjaXR5OiAke3JhZGFyT3B0aW9ucy5ncmF0aWN1bGVPcGFjaXR5fTtcblx0XHRzdHJva2U6ICR7cmFkYXJPcHRpb25zLmdyYXRpY3VsZUNvbG9yfTtcblx0XHRzdHJva2Utd2lkdGg6ICR7cmFkYXJPcHRpb25zLmdyYXRpY3VsZVN0cm9rZVdpZHRofTtcblx0fVxuXHQucmFkYXJMZWdlbmRUZXh0IHtcblx0XHR0ZXh0LWFuY2hvcjogc3RhcnQ7XG5cdFx0Zm9udC1zaXplOiAke3JhZGFyT3B0aW9ucy5sZWdlbmRGb250U2l6ZX1weDtcblx0XHRkb21pbmFudC1iYXNlbGluZTogaGFuZ2luZztcblx0fVxuXHQke2dlbkluZGV4U3R5bGVzKHRoZW1lVmFyaWFibGVzLCByYWRhck9wdGlvbnMpfVxuXHRgO1xufSwgXCJzdHlsZXNcIik7XG5cbi8vIHNyYy9kaWFncmFtcy9yYWRhci9kaWFncmFtLnRzXG52YXIgZGlhZ3JhbSA9IHtcbiAgcGFyc2VyLFxuICBkYixcbiAgcmVuZGVyZXIsXG4gIHN0eWxlc1xufTtcbmV4cG9ydCB7XG4gIGRpYWdyYW1cbn07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=