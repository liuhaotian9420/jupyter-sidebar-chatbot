"use strict";
(self["webpackChunk_jupyterlab_application_top"] = self["webpackChunk_jupyterlab_application_top"] || []).push([["node_modules_mermaid_dist_chunks_mermaid_core_pieDiagram-IB7DONF6_mjs"],{

/***/ "./node_modules/mermaid/dist/chunks/mermaid.core/chunk-4BMEZGHF.mjs":
/*!**************************************************************************!*\
  !*** ./node_modules/mermaid/dist/chunks/mermaid.core/chunk-4BMEZGHF.mjs ***!
  \**************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   populateCommonDb: () => (/* binding */ populateCommonDb)
/* harmony export */ });
/* harmony import */ var _chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./chunk-YTJNT7DU.mjs */ "./node_modules/mermaid/dist/chunks/mermaid.core/chunk-YTJNT7DU.mjs");


// src/diagrams/common/populateCommonDb.ts
function populateCommonDb(ast, db) {
  if (ast.accDescr) {
    db.setAccDescription?.(ast.accDescr);
  }
  if (ast.accTitle) {
    db.setAccTitle?.(ast.accTitle);
  }
  if (ast.title) {
    db.setDiagramTitle?.(ast.title);
  }
}
(0,_chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_0__.__name)(populateCommonDb, "populateCommonDb");




/***/ }),

/***/ "./node_modules/mermaid/dist/chunks/mermaid.core/pieDiagram-IB7DONF6.mjs":
/*!*******************************************************************************!*\
  !*** ./node_modules/mermaid/dist/chunks/mermaid.core/pieDiagram-IB7DONF6.mjs ***!
  \*******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   diagram: () => (/* binding */ diagram)
/* harmony export */ });
/* harmony import */ var _chunk_4BMEZGHF_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./chunk-4BMEZGHF.mjs */ "./node_modules/mermaid/dist/chunks/mermaid.core/chunk-4BMEZGHF.mjs");
/* harmony import */ var _chunk_O4NI6UNU_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./chunk-O4NI6UNU.mjs */ "./node_modules/mermaid/dist/chunks/mermaid.core/chunk-O4NI6UNU.mjs");
/* harmony import */ var _chunk_7B677QYD_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./chunk-7B677QYD.mjs */ "./node_modules/mermaid/dist/chunks/mermaid.core/chunk-7B677QYD.mjs");
/* harmony import */ var _chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./chunk-YTJNT7DU.mjs */ "./node_modules/mermaid/dist/chunks/mermaid.core/chunk-YTJNT7DU.mjs");
/* harmony import */ var _mermaid_js_parser__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @mermaid-js/parser */ "./node_modules/@mermaid-js/parser/dist/mermaid-parser.core.mjs");
/* harmony import */ var d3__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! d3 */ "./node_modules/d3/src/index.js");





// src/diagrams/pie/pieParser.ts


// src/diagrams/pie/pieDb.ts
var DEFAULT_PIE_CONFIG = _chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.defaultConfig_default.pie;
var DEFAULT_PIE_DB = {
  sections: /* @__PURE__ */ new Map(),
  showData: false,
  config: DEFAULT_PIE_CONFIG
};
var sections = DEFAULT_PIE_DB.sections;
var showData = DEFAULT_PIE_DB.showData;
var config = structuredClone(DEFAULT_PIE_CONFIG);
var getConfig2 = /* @__PURE__ */ (0,_chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.__name)(() => structuredClone(config), "getConfig");
var clear2 = /* @__PURE__ */ (0,_chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.__name)(() => {
  sections = /* @__PURE__ */ new Map();
  showData = DEFAULT_PIE_DB.showData;
  (0,_chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.clear)();
}, "clear");
var addSection = /* @__PURE__ */ (0,_chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.__name)(({ label, value }) => {
  if (!sections.has(label)) {
    sections.set(label, value);
    _chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.log.debug(`added new section: ${label}, with value: ${value}`);
  }
}, "addSection");
var getSections = /* @__PURE__ */ (0,_chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.__name)(() => sections, "getSections");
var setShowData = /* @__PURE__ */ (0,_chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.__name)((toggle) => {
  showData = toggle;
}, "setShowData");
var getShowData = /* @__PURE__ */ (0,_chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.__name)(() => showData, "getShowData");
var db = {
  getConfig: getConfig2,
  clear: clear2,
  setDiagramTitle: _chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.setDiagramTitle,
  getDiagramTitle: _chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.getDiagramTitle,
  setAccTitle: _chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.setAccTitle,
  getAccTitle: _chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.getAccTitle,
  setAccDescription: _chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.setAccDescription,
  getAccDescription: _chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.getAccDescription,
  addSection,
  getSections,
  setShowData,
  getShowData
};

// src/diagrams/pie/pieParser.ts
var populateDb = /* @__PURE__ */ (0,_chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.__name)((ast, db2) => {
  (0,_chunk_4BMEZGHF_mjs__WEBPACK_IMPORTED_MODULE_0__.populateCommonDb)(ast, db2);
  db2.setShowData(ast.showData);
  ast.sections.map(db2.addSection);
}, "populateDb");
var parser = {
  parse: /* @__PURE__ */ (0,_chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.__name)(async (input) => {
    const ast = await (0,_mermaid_js_parser__WEBPACK_IMPORTED_MODULE_4__.parse)("pie", input);
    _chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.log.debug(ast);
    populateDb(ast, db);
  }, "parse")
};

// src/diagrams/pie/pieStyles.ts
var getStyles = /* @__PURE__ */ (0,_chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.__name)((options) => `
  .pieCircle{
    stroke: ${options.pieStrokeColor};
    stroke-width : ${options.pieStrokeWidth};
    opacity : ${options.pieOpacity};
  }
  .pieOuterCircle{
    stroke: ${options.pieOuterStrokeColor};
    stroke-width: ${options.pieOuterStrokeWidth};
    fill: none;
  }
  .pieTitleText {
    text-anchor: middle;
    font-size: ${options.pieTitleTextSize};
    fill: ${options.pieTitleTextColor};
    font-family: ${options.fontFamily};
  }
  .slice {
    font-family: ${options.fontFamily};
    fill: ${options.pieSectionTextColor};
    font-size:${options.pieSectionTextSize};
    // fill: white;
  }
  .legend text {
    fill: ${options.pieLegendTextColor};
    font-family: ${options.fontFamily};
    font-size: ${options.pieLegendTextSize};
  }
`, "getStyles");
var pieStyles_default = getStyles;

// src/diagrams/pie/pieRenderer.ts

var createPieArcs = /* @__PURE__ */ (0,_chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.__name)((sections2) => {
  const pieData = [...sections2.entries()].map((element) => {
    return {
      label: element[0],
      value: element[1]
    };
  }).sort((a, b) => {
    return b.value - a.value;
  });
  const pie = (0,d3__WEBPACK_IMPORTED_MODULE_5__.pie)().value(
    (d3Section) => d3Section.value
  );
  return pie(pieData);
}, "createPieArcs");
var draw = /* @__PURE__ */ (0,_chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.__name)((text, id, _version, diagObj) => {
  _chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.log.debug("rendering pie chart\n" + text);
  const db2 = diagObj.db;
  const globalConfig = (0,_chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.getConfig2)();
  const pieConfig = (0,_chunk_O4NI6UNU_mjs__WEBPACK_IMPORTED_MODULE_1__.cleanAndMerge)(db2.getConfig(), globalConfig.pie);
  const MARGIN = 40;
  const LEGEND_RECT_SIZE = 18;
  const LEGEND_SPACING = 4;
  const height = 450;
  const pieWidth = height;
  const svg = (0,_chunk_7B677QYD_mjs__WEBPACK_IMPORTED_MODULE_2__.selectSvgElement)(id);
  const group = svg.append("g");
  group.attr("transform", "translate(" + pieWidth / 2 + "," + height / 2 + ")");
  const { themeVariables } = globalConfig;
  let [outerStrokeWidth] = (0,_chunk_O4NI6UNU_mjs__WEBPACK_IMPORTED_MODULE_1__.parseFontSize)(themeVariables.pieOuterStrokeWidth);
  outerStrokeWidth ??= 2;
  const textPosition = pieConfig.textPosition;
  const radius = Math.min(pieWidth, height) / 2 - MARGIN;
  const arcGenerator = (0,d3__WEBPACK_IMPORTED_MODULE_5__.arc)().innerRadius(0).outerRadius(radius);
  const labelArcGenerator = (0,d3__WEBPACK_IMPORTED_MODULE_5__.arc)().innerRadius(radius * textPosition).outerRadius(radius * textPosition);
  group.append("circle").attr("cx", 0).attr("cy", 0).attr("r", radius + outerStrokeWidth / 2).attr("class", "pieOuterCircle");
  const sections2 = db2.getSections();
  const arcs = createPieArcs(sections2);
  const myGeneratedColors = [
    themeVariables.pie1,
    themeVariables.pie2,
    themeVariables.pie3,
    themeVariables.pie4,
    themeVariables.pie5,
    themeVariables.pie6,
    themeVariables.pie7,
    themeVariables.pie8,
    themeVariables.pie9,
    themeVariables.pie10,
    themeVariables.pie11,
    themeVariables.pie12
  ];
  const color = (0,d3__WEBPACK_IMPORTED_MODULE_5__.scaleOrdinal)(myGeneratedColors);
  group.selectAll("mySlices").data(arcs).enter().append("path").attr("d", arcGenerator).attr("fill", (datum) => {
    return color(datum.data.label);
  }).attr("class", "pieCircle");
  let sum = 0;
  sections2.forEach((section) => {
    sum += section;
  });
  group.selectAll("mySlices").data(arcs).enter().append("text").text((datum) => {
    return (datum.data.value / sum * 100).toFixed(0) + "%";
  }).attr("transform", (datum) => {
    return "translate(" + labelArcGenerator.centroid(datum) + ")";
  }).style("text-anchor", "middle").attr("class", "slice");
  group.append("text").text(db2.getDiagramTitle()).attr("x", 0).attr("y", -(height - 50) / 2).attr("class", "pieTitleText");
  const legend = group.selectAll(".legend").data(color.domain()).enter().append("g").attr("class", "legend").attr("transform", (_datum, index) => {
    const height2 = LEGEND_RECT_SIZE + LEGEND_SPACING;
    const offset = height2 * color.domain().length / 2;
    const horizontal = 12 * LEGEND_RECT_SIZE;
    const vertical = index * height2 - offset;
    return "translate(" + horizontal + "," + vertical + ")";
  });
  legend.append("rect").attr("width", LEGEND_RECT_SIZE).attr("height", LEGEND_RECT_SIZE).style("fill", color).style("stroke", color);
  legend.data(arcs).append("text").attr("x", LEGEND_RECT_SIZE + LEGEND_SPACING).attr("y", LEGEND_RECT_SIZE - LEGEND_SPACING).text((datum) => {
    const { label, value } = datum.data;
    if (db2.getShowData()) {
      return `${label} [${value}]`;
    }
    return label;
  });
  const longestTextWidth = Math.max(
    ...legend.selectAll("text").nodes().map((node) => node?.getBoundingClientRect().width ?? 0)
  );
  const totalWidth = pieWidth + MARGIN + LEGEND_RECT_SIZE + LEGEND_SPACING + longestTextWidth;
  svg.attr("viewBox", `0 0 ${totalWidth} ${height}`);
  (0,_chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.configureSvgSize)(svg, height, totalWidth, pieConfig.useMaxWidth);
}, "draw");
var renderer = { draw };

// src/diagrams/pie/pieDiagram.ts
var diagram = {
  parser,
  db,
  renderer,
  styles: pieStyles_default
};



/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibm9kZV9tb2R1bGVzX21lcm1haWRfZGlzdF9jaHVua3NfbWVybWFpZF9jb3JlX3BpZURpYWdyYW0tSUI3RE9ORjZfbWpzLjI4MDAzYmMxMzUyYmE5MzQ2ODEwLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBRThCOztBQUU5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyREFBTTs7QUFJSjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDbEI0QjtBQUlBO0FBR0E7QUFjQTs7QUFFOUI7QUFDMkM7O0FBRTNDO0FBQ0EseUJBQXlCLHNFQUFxQjtBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDLDJEQUFNO0FBQ3ZDLDZCQUE2QiwyREFBTTtBQUNuQztBQUNBO0FBQ0EsRUFBRSwwREFBSztBQUNQLENBQUM7QUFDRCxpQ0FBaUMsMkRBQU0sSUFBSSxjQUFjO0FBQ3pEO0FBQ0E7QUFDQSxJQUFJLG9EQUFHLDZCQUE2QixNQUFNLGdCQUFnQixNQUFNO0FBQ2hFO0FBQ0EsQ0FBQztBQUNELGtDQUFrQywyREFBTTtBQUN4QyxrQ0FBa0MsMkRBQU07QUFDeEM7QUFDQSxDQUFDO0FBQ0Qsa0NBQWtDLDJEQUFNO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQixpQkFBaUI7QUFDakIsYUFBYTtBQUNiLGFBQWE7QUFDYixtQkFBbUI7QUFDbkIsbUJBQW1CO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxpQ0FBaUMsMkRBQU07QUFDdkMsRUFBRSxxRUFBZ0I7QUFDbEI7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBLHlCQUF5QiwyREFBTTtBQUMvQixzQkFBc0IseURBQUs7QUFDM0IsSUFBSSxvREFBRztBQUNQO0FBQ0EsR0FBRztBQUNIOztBQUVBO0FBQ0EsZ0NBQWdDLDJEQUFNO0FBQ3RDO0FBQ0EsY0FBYztBQUNkLHFCQUFxQjtBQUNyQixnQkFBZ0I7QUFDaEI7QUFDQTtBQUNBLGNBQWM7QUFDZCxvQkFBb0I7QUFDcEI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakIsWUFBWTtBQUNaLG1CQUFtQjtBQUNuQjtBQUNBO0FBQ0EsbUJBQW1CO0FBQ25CLFlBQVk7QUFDWixnQkFBZ0I7QUFDaEI7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaLG1CQUFtQjtBQUNuQixpQkFBaUI7QUFDakI7QUFDQTtBQUNBOztBQUVBO0FBQ3FEO0FBQ3JELG9DQUFvQywyREFBTTtBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0EsR0FBRztBQUNILGNBQWMsdUNBQUs7QUFDbkI7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNELDJCQUEyQiwyREFBTTtBQUNqQyxFQUFFLG9EQUFHO0FBQ0w7QUFDQSx1QkFBdUIsK0RBQVM7QUFDaEMsb0JBQW9CLGtFQUFhO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjLHFFQUFnQjtBQUM5QjtBQUNBO0FBQ0EsVUFBVSxpQkFBaUI7QUFDM0IsMkJBQTJCLGtFQUFhO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBLHVCQUF1Qix1Q0FBRztBQUMxQiw0QkFBNEIsdUNBQUc7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixnREFBWTtBQUM1QjtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxZQUFZLGVBQWU7QUFDM0I7QUFDQSxnQkFBZ0IsT0FBTyxHQUFHLE1BQU07QUFDaEM7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QixZQUFZLEVBQUUsT0FBTztBQUNsRCxFQUFFLHFFQUFnQjtBQUNsQixDQUFDO0FBQ0QsaUJBQWlCOztBQUVqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vQGp1cHl0ZXJsYWIvYXBwbGljYXRpb24tdG9wLy4vbm9kZV9tb2R1bGVzL21lcm1haWQvZGlzdC9jaHVua3MvbWVybWFpZC5jb3JlL2NodW5rLTRCTUVaR0hGLm1qcyIsIndlYnBhY2s6Ly9AanVweXRlcmxhYi9hcHBsaWNhdGlvbi10b3AvLi9ub2RlX21vZHVsZXMvbWVybWFpZC9kaXN0L2NodW5rcy9tZXJtYWlkLmNvcmUvcGllRGlhZ3JhbS1JQjdET05GNi5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgX19uYW1lXG59IGZyb20gXCIuL2NodW5rLVlUSk5UN0RVLm1qc1wiO1xuXG4vLyBzcmMvZGlhZ3JhbXMvY29tbW9uL3BvcHVsYXRlQ29tbW9uRGIudHNcbmZ1bmN0aW9uIHBvcHVsYXRlQ29tbW9uRGIoYXN0LCBkYikge1xuICBpZiAoYXN0LmFjY0Rlc2NyKSB7XG4gICAgZGIuc2V0QWNjRGVzY3JpcHRpb24/Lihhc3QuYWNjRGVzY3IpO1xuICB9XG4gIGlmIChhc3QuYWNjVGl0bGUpIHtcbiAgICBkYi5zZXRBY2NUaXRsZT8uKGFzdC5hY2NUaXRsZSk7XG4gIH1cbiAgaWYgKGFzdC50aXRsZSkge1xuICAgIGRiLnNldERpYWdyYW1UaXRsZT8uKGFzdC50aXRsZSk7XG4gIH1cbn1cbl9fbmFtZShwb3B1bGF0ZUNvbW1vbkRiLCBcInBvcHVsYXRlQ29tbW9uRGJcIik7XG5cbmV4cG9ydCB7XG4gIHBvcHVsYXRlQ29tbW9uRGJcbn07XG4iLCJpbXBvcnQge1xuICBwb3B1bGF0ZUNvbW1vbkRiXG59IGZyb20gXCIuL2NodW5rLTRCTUVaR0hGLm1qc1wiO1xuaW1wb3J0IHtcbiAgY2xlYW5BbmRNZXJnZSxcbiAgcGFyc2VGb250U2l6ZVxufSBmcm9tIFwiLi9jaHVuay1PNE5JNlVOVS5tanNcIjtcbmltcG9ydCB7XG4gIHNlbGVjdFN2Z0VsZW1lbnRcbn0gZnJvbSBcIi4vY2h1bmstN0I2NzdRWUQubWpzXCI7XG5pbXBvcnQge1xuICBfX25hbWUsXG4gIGNsZWFyLFxuICBjb25maWd1cmVTdmdTaXplLFxuICBkZWZhdWx0Q29uZmlnX2RlZmF1bHQsXG4gIGdldEFjY0Rlc2NyaXB0aW9uLFxuICBnZXRBY2NUaXRsZSxcbiAgZ2V0Q29uZmlnMiBhcyBnZXRDb25maWcsXG4gIGdldERpYWdyYW1UaXRsZSxcbiAgbG9nLFxuICBzZXRBY2NEZXNjcmlwdGlvbixcbiAgc2V0QWNjVGl0bGUsXG4gIHNldERpYWdyYW1UaXRsZVxufSBmcm9tIFwiLi9jaHVuay1ZVEpOVDdEVS5tanNcIjtcblxuLy8gc3JjL2RpYWdyYW1zL3BpZS9waWVQYXJzZXIudHNcbmltcG9ydCB7IHBhcnNlIH0gZnJvbSBcIkBtZXJtYWlkLWpzL3BhcnNlclwiO1xuXG4vLyBzcmMvZGlhZ3JhbXMvcGllL3BpZURiLnRzXG52YXIgREVGQVVMVF9QSUVfQ09ORklHID0gZGVmYXVsdENvbmZpZ19kZWZhdWx0LnBpZTtcbnZhciBERUZBVUxUX1BJRV9EQiA9IHtcbiAgc2VjdGlvbnM6IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCksXG4gIHNob3dEYXRhOiBmYWxzZSxcbiAgY29uZmlnOiBERUZBVUxUX1BJRV9DT05GSUdcbn07XG52YXIgc2VjdGlvbnMgPSBERUZBVUxUX1BJRV9EQi5zZWN0aW9ucztcbnZhciBzaG93RGF0YSA9IERFRkFVTFRfUElFX0RCLnNob3dEYXRhO1xudmFyIGNvbmZpZyA9IHN0cnVjdHVyZWRDbG9uZShERUZBVUxUX1BJRV9DT05GSUcpO1xudmFyIGdldENvbmZpZzIgPSAvKiBAX19QVVJFX18gKi8gX19uYW1lKCgpID0+IHN0cnVjdHVyZWRDbG9uZShjb25maWcpLCBcImdldENvbmZpZ1wiKTtcbnZhciBjbGVhcjIgPSAvKiBAX19QVVJFX18gKi8gX19uYW1lKCgpID0+IHtcbiAgc2VjdGlvbnMgPSAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpO1xuICBzaG93RGF0YSA9IERFRkFVTFRfUElFX0RCLnNob3dEYXRhO1xuICBjbGVhcigpO1xufSwgXCJjbGVhclwiKTtcbnZhciBhZGRTZWN0aW9uID0gLyogQF9fUFVSRV9fICovIF9fbmFtZSgoeyBsYWJlbCwgdmFsdWUgfSkgPT4ge1xuICBpZiAoIXNlY3Rpb25zLmhhcyhsYWJlbCkpIHtcbiAgICBzZWN0aW9ucy5zZXQobGFiZWwsIHZhbHVlKTtcbiAgICBsb2cuZGVidWcoYGFkZGVkIG5ldyBzZWN0aW9uOiAke2xhYmVsfSwgd2l0aCB2YWx1ZTogJHt2YWx1ZX1gKTtcbiAgfVxufSwgXCJhZGRTZWN0aW9uXCIpO1xudmFyIGdldFNlY3Rpb25zID0gLyogQF9fUFVSRV9fICovIF9fbmFtZSgoKSA9PiBzZWN0aW9ucywgXCJnZXRTZWN0aW9uc1wiKTtcbnZhciBzZXRTaG93RGF0YSA9IC8qIEBfX1BVUkVfXyAqLyBfX25hbWUoKHRvZ2dsZSkgPT4ge1xuICBzaG93RGF0YSA9IHRvZ2dsZTtcbn0sIFwic2V0U2hvd0RhdGFcIik7XG52YXIgZ2V0U2hvd0RhdGEgPSAvKiBAX19QVVJFX18gKi8gX19uYW1lKCgpID0+IHNob3dEYXRhLCBcImdldFNob3dEYXRhXCIpO1xudmFyIGRiID0ge1xuICBnZXRDb25maWc6IGdldENvbmZpZzIsXG4gIGNsZWFyOiBjbGVhcjIsXG4gIHNldERpYWdyYW1UaXRsZSxcbiAgZ2V0RGlhZ3JhbVRpdGxlLFxuICBzZXRBY2NUaXRsZSxcbiAgZ2V0QWNjVGl0bGUsXG4gIHNldEFjY0Rlc2NyaXB0aW9uLFxuICBnZXRBY2NEZXNjcmlwdGlvbixcbiAgYWRkU2VjdGlvbixcbiAgZ2V0U2VjdGlvbnMsXG4gIHNldFNob3dEYXRhLFxuICBnZXRTaG93RGF0YVxufTtcblxuLy8gc3JjL2RpYWdyYW1zL3BpZS9waWVQYXJzZXIudHNcbnZhciBwb3B1bGF0ZURiID0gLyogQF9fUFVSRV9fICovIF9fbmFtZSgoYXN0LCBkYjIpID0+IHtcbiAgcG9wdWxhdGVDb21tb25EYihhc3QsIGRiMik7XG4gIGRiMi5zZXRTaG93RGF0YShhc3Quc2hvd0RhdGEpO1xuICBhc3Quc2VjdGlvbnMubWFwKGRiMi5hZGRTZWN0aW9uKTtcbn0sIFwicG9wdWxhdGVEYlwiKTtcbnZhciBwYXJzZXIgPSB7XG4gIHBhcnNlOiAvKiBAX19QVVJFX18gKi8gX19uYW1lKGFzeW5jIChpbnB1dCkgPT4ge1xuICAgIGNvbnN0IGFzdCA9IGF3YWl0IHBhcnNlKFwicGllXCIsIGlucHV0KTtcbiAgICBsb2cuZGVidWcoYXN0KTtcbiAgICBwb3B1bGF0ZURiKGFzdCwgZGIpO1xuICB9LCBcInBhcnNlXCIpXG59O1xuXG4vLyBzcmMvZGlhZ3JhbXMvcGllL3BpZVN0eWxlcy50c1xudmFyIGdldFN0eWxlcyA9IC8qIEBfX1BVUkVfXyAqLyBfX25hbWUoKG9wdGlvbnMpID0+IGBcbiAgLnBpZUNpcmNsZXtcbiAgICBzdHJva2U6ICR7b3B0aW9ucy5waWVTdHJva2VDb2xvcn07XG4gICAgc3Ryb2tlLXdpZHRoIDogJHtvcHRpb25zLnBpZVN0cm9rZVdpZHRofTtcbiAgICBvcGFjaXR5IDogJHtvcHRpb25zLnBpZU9wYWNpdHl9O1xuICB9XG4gIC5waWVPdXRlckNpcmNsZXtcbiAgICBzdHJva2U6ICR7b3B0aW9ucy5waWVPdXRlclN0cm9rZUNvbG9yfTtcbiAgICBzdHJva2Utd2lkdGg6ICR7b3B0aW9ucy5waWVPdXRlclN0cm9rZVdpZHRofTtcbiAgICBmaWxsOiBub25lO1xuICB9XG4gIC5waWVUaXRsZVRleHQge1xuICAgIHRleHQtYW5jaG9yOiBtaWRkbGU7XG4gICAgZm9udC1zaXplOiAke29wdGlvbnMucGllVGl0bGVUZXh0U2l6ZX07XG4gICAgZmlsbDogJHtvcHRpb25zLnBpZVRpdGxlVGV4dENvbG9yfTtcbiAgICBmb250LWZhbWlseTogJHtvcHRpb25zLmZvbnRGYW1pbHl9O1xuICB9XG4gIC5zbGljZSB7XG4gICAgZm9udC1mYW1pbHk6ICR7b3B0aW9ucy5mb250RmFtaWx5fTtcbiAgICBmaWxsOiAke29wdGlvbnMucGllU2VjdGlvblRleHRDb2xvcn07XG4gICAgZm9udC1zaXplOiR7b3B0aW9ucy5waWVTZWN0aW9uVGV4dFNpemV9O1xuICAgIC8vIGZpbGw6IHdoaXRlO1xuICB9XG4gIC5sZWdlbmQgdGV4dCB7XG4gICAgZmlsbDogJHtvcHRpb25zLnBpZUxlZ2VuZFRleHRDb2xvcn07XG4gICAgZm9udC1mYW1pbHk6ICR7b3B0aW9ucy5mb250RmFtaWx5fTtcbiAgICBmb250LXNpemU6ICR7b3B0aW9ucy5waWVMZWdlbmRUZXh0U2l6ZX07XG4gIH1cbmAsIFwiZ2V0U3R5bGVzXCIpO1xudmFyIHBpZVN0eWxlc19kZWZhdWx0ID0gZ2V0U3R5bGVzO1xuXG4vLyBzcmMvZGlhZ3JhbXMvcGllL3BpZVJlbmRlcmVyLnRzXG5pbXBvcnQgeyBhcmMsIHBpZSBhcyBkM3BpZSwgc2NhbGVPcmRpbmFsIH0gZnJvbSBcImQzXCI7XG52YXIgY3JlYXRlUGllQXJjcyA9IC8qIEBfX1BVUkVfXyAqLyBfX25hbWUoKHNlY3Rpb25zMikgPT4ge1xuICBjb25zdCBwaWVEYXRhID0gWy4uLnNlY3Rpb25zMi5lbnRyaWVzKCldLm1hcCgoZWxlbWVudCkgPT4ge1xuICAgIHJldHVybiB7XG4gICAgICBsYWJlbDogZWxlbWVudFswXSxcbiAgICAgIHZhbHVlOiBlbGVtZW50WzFdXG4gICAgfTtcbiAgfSkuc29ydCgoYSwgYikgPT4ge1xuICAgIHJldHVybiBiLnZhbHVlIC0gYS52YWx1ZTtcbiAgfSk7XG4gIGNvbnN0IHBpZSA9IGQzcGllKCkudmFsdWUoXG4gICAgKGQzU2VjdGlvbikgPT4gZDNTZWN0aW9uLnZhbHVlXG4gICk7XG4gIHJldHVybiBwaWUocGllRGF0YSk7XG59LCBcImNyZWF0ZVBpZUFyY3NcIik7XG52YXIgZHJhdyA9IC8qIEBfX1BVUkVfXyAqLyBfX25hbWUoKHRleHQsIGlkLCBfdmVyc2lvbiwgZGlhZ09iaikgPT4ge1xuICBsb2cuZGVidWcoXCJyZW5kZXJpbmcgcGllIGNoYXJ0XFxuXCIgKyB0ZXh0KTtcbiAgY29uc3QgZGIyID0gZGlhZ09iai5kYjtcbiAgY29uc3QgZ2xvYmFsQ29uZmlnID0gZ2V0Q29uZmlnKCk7XG4gIGNvbnN0IHBpZUNvbmZpZyA9IGNsZWFuQW5kTWVyZ2UoZGIyLmdldENvbmZpZygpLCBnbG9iYWxDb25maWcucGllKTtcbiAgY29uc3QgTUFSR0lOID0gNDA7XG4gIGNvbnN0IExFR0VORF9SRUNUX1NJWkUgPSAxODtcbiAgY29uc3QgTEVHRU5EX1NQQUNJTkcgPSA0O1xuICBjb25zdCBoZWlnaHQgPSA0NTA7XG4gIGNvbnN0IHBpZVdpZHRoID0gaGVpZ2h0O1xuICBjb25zdCBzdmcgPSBzZWxlY3RTdmdFbGVtZW50KGlkKTtcbiAgY29uc3QgZ3JvdXAgPSBzdmcuYXBwZW5kKFwiZ1wiKTtcbiAgZ3JvdXAuYXR0cihcInRyYW5zZm9ybVwiLCBcInRyYW5zbGF0ZShcIiArIHBpZVdpZHRoIC8gMiArIFwiLFwiICsgaGVpZ2h0IC8gMiArIFwiKVwiKTtcbiAgY29uc3QgeyB0aGVtZVZhcmlhYmxlcyB9ID0gZ2xvYmFsQ29uZmlnO1xuICBsZXQgW291dGVyU3Ryb2tlV2lkdGhdID0gcGFyc2VGb250U2l6ZSh0aGVtZVZhcmlhYmxlcy5waWVPdXRlclN0cm9rZVdpZHRoKTtcbiAgb3V0ZXJTdHJva2VXaWR0aCA/Pz0gMjtcbiAgY29uc3QgdGV4dFBvc2l0aW9uID0gcGllQ29uZmlnLnRleHRQb3NpdGlvbjtcbiAgY29uc3QgcmFkaXVzID0gTWF0aC5taW4ocGllV2lkdGgsIGhlaWdodCkgLyAyIC0gTUFSR0lOO1xuICBjb25zdCBhcmNHZW5lcmF0b3IgPSBhcmMoKS5pbm5lclJhZGl1cygwKS5vdXRlclJhZGl1cyhyYWRpdXMpO1xuICBjb25zdCBsYWJlbEFyY0dlbmVyYXRvciA9IGFyYygpLmlubmVyUmFkaXVzKHJhZGl1cyAqIHRleHRQb3NpdGlvbikub3V0ZXJSYWRpdXMocmFkaXVzICogdGV4dFBvc2l0aW9uKTtcbiAgZ3JvdXAuYXBwZW5kKFwiY2lyY2xlXCIpLmF0dHIoXCJjeFwiLCAwKS5hdHRyKFwiY3lcIiwgMCkuYXR0cihcInJcIiwgcmFkaXVzICsgb3V0ZXJTdHJva2VXaWR0aCAvIDIpLmF0dHIoXCJjbGFzc1wiLCBcInBpZU91dGVyQ2lyY2xlXCIpO1xuICBjb25zdCBzZWN0aW9uczIgPSBkYjIuZ2V0U2VjdGlvbnMoKTtcbiAgY29uc3QgYXJjcyA9IGNyZWF0ZVBpZUFyY3Moc2VjdGlvbnMyKTtcbiAgY29uc3QgbXlHZW5lcmF0ZWRDb2xvcnMgPSBbXG4gICAgdGhlbWVWYXJpYWJsZXMucGllMSxcbiAgICB0aGVtZVZhcmlhYmxlcy5waWUyLFxuICAgIHRoZW1lVmFyaWFibGVzLnBpZTMsXG4gICAgdGhlbWVWYXJpYWJsZXMucGllNCxcbiAgICB0aGVtZVZhcmlhYmxlcy5waWU1LFxuICAgIHRoZW1lVmFyaWFibGVzLnBpZTYsXG4gICAgdGhlbWVWYXJpYWJsZXMucGllNyxcbiAgICB0aGVtZVZhcmlhYmxlcy5waWU4LFxuICAgIHRoZW1lVmFyaWFibGVzLnBpZTksXG4gICAgdGhlbWVWYXJpYWJsZXMucGllMTAsXG4gICAgdGhlbWVWYXJpYWJsZXMucGllMTEsXG4gICAgdGhlbWVWYXJpYWJsZXMucGllMTJcbiAgXTtcbiAgY29uc3QgY29sb3IgPSBzY2FsZU9yZGluYWwobXlHZW5lcmF0ZWRDb2xvcnMpO1xuICBncm91cC5zZWxlY3RBbGwoXCJteVNsaWNlc1wiKS5kYXRhKGFyY3MpLmVudGVyKCkuYXBwZW5kKFwicGF0aFwiKS5hdHRyKFwiZFwiLCBhcmNHZW5lcmF0b3IpLmF0dHIoXCJmaWxsXCIsIChkYXR1bSkgPT4ge1xuICAgIHJldHVybiBjb2xvcihkYXR1bS5kYXRhLmxhYmVsKTtcbiAgfSkuYXR0cihcImNsYXNzXCIsIFwicGllQ2lyY2xlXCIpO1xuICBsZXQgc3VtID0gMDtcbiAgc2VjdGlvbnMyLmZvckVhY2goKHNlY3Rpb24pID0+IHtcbiAgICBzdW0gKz0gc2VjdGlvbjtcbiAgfSk7XG4gIGdyb3VwLnNlbGVjdEFsbChcIm15U2xpY2VzXCIpLmRhdGEoYXJjcykuZW50ZXIoKS5hcHBlbmQoXCJ0ZXh0XCIpLnRleHQoKGRhdHVtKSA9PiB7XG4gICAgcmV0dXJuIChkYXR1bS5kYXRhLnZhbHVlIC8gc3VtICogMTAwKS50b0ZpeGVkKDApICsgXCIlXCI7XG4gIH0pLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgKGRhdHVtKSA9PiB7XG4gICAgcmV0dXJuIFwidHJhbnNsYXRlKFwiICsgbGFiZWxBcmNHZW5lcmF0b3IuY2VudHJvaWQoZGF0dW0pICsgXCIpXCI7XG4gIH0pLnN0eWxlKFwidGV4dC1hbmNob3JcIiwgXCJtaWRkbGVcIikuYXR0cihcImNsYXNzXCIsIFwic2xpY2VcIik7XG4gIGdyb3VwLmFwcGVuZChcInRleHRcIikudGV4dChkYjIuZ2V0RGlhZ3JhbVRpdGxlKCkpLmF0dHIoXCJ4XCIsIDApLmF0dHIoXCJ5XCIsIC0oaGVpZ2h0IC0gNTApIC8gMikuYXR0cihcImNsYXNzXCIsIFwicGllVGl0bGVUZXh0XCIpO1xuICBjb25zdCBsZWdlbmQgPSBncm91cC5zZWxlY3RBbGwoXCIubGVnZW5kXCIpLmRhdGEoY29sb3IuZG9tYWluKCkpLmVudGVyKCkuYXBwZW5kKFwiZ1wiKS5hdHRyKFwiY2xhc3NcIiwgXCJsZWdlbmRcIikuYXR0cihcInRyYW5zZm9ybVwiLCAoX2RhdHVtLCBpbmRleCkgPT4ge1xuICAgIGNvbnN0IGhlaWdodDIgPSBMRUdFTkRfUkVDVF9TSVpFICsgTEVHRU5EX1NQQUNJTkc7XG4gICAgY29uc3Qgb2Zmc2V0ID0gaGVpZ2h0MiAqIGNvbG9yLmRvbWFpbigpLmxlbmd0aCAvIDI7XG4gICAgY29uc3QgaG9yaXpvbnRhbCA9IDEyICogTEVHRU5EX1JFQ1RfU0laRTtcbiAgICBjb25zdCB2ZXJ0aWNhbCA9IGluZGV4ICogaGVpZ2h0MiAtIG9mZnNldDtcbiAgICByZXR1cm4gXCJ0cmFuc2xhdGUoXCIgKyBob3Jpem9udGFsICsgXCIsXCIgKyB2ZXJ0aWNhbCArIFwiKVwiO1xuICB9KTtcbiAgbGVnZW5kLmFwcGVuZChcInJlY3RcIikuYXR0cihcIndpZHRoXCIsIExFR0VORF9SRUNUX1NJWkUpLmF0dHIoXCJoZWlnaHRcIiwgTEVHRU5EX1JFQ1RfU0laRSkuc3R5bGUoXCJmaWxsXCIsIGNvbG9yKS5zdHlsZShcInN0cm9rZVwiLCBjb2xvcik7XG4gIGxlZ2VuZC5kYXRhKGFyY3MpLmFwcGVuZChcInRleHRcIikuYXR0cihcInhcIiwgTEVHRU5EX1JFQ1RfU0laRSArIExFR0VORF9TUEFDSU5HKS5hdHRyKFwieVwiLCBMRUdFTkRfUkVDVF9TSVpFIC0gTEVHRU5EX1NQQUNJTkcpLnRleHQoKGRhdHVtKSA9PiB7XG4gICAgY29uc3QgeyBsYWJlbCwgdmFsdWUgfSA9IGRhdHVtLmRhdGE7XG4gICAgaWYgKGRiMi5nZXRTaG93RGF0YSgpKSB7XG4gICAgICByZXR1cm4gYCR7bGFiZWx9IFske3ZhbHVlfV1gO1xuICAgIH1cbiAgICByZXR1cm4gbGFiZWw7XG4gIH0pO1xuICBjb25zdCBsb25nZXN0VGV4dFdpZHRoID0gTWF0aC5tYXgoXG4gICAgLi4ubGVnZW5kLnNlbGVjdEFsbChcInRleHRcIikubm9kZXMoKS5tYXAoKG5vZGUpID0+IG5vZGU/LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoID8/IDApXG4gICk7XG4gIGNvbnN0IHRvdGFsV2lkdGggPSBwaWVXaWR0aCArIE1BUkdJTiArIExFR0VORF9SRUNUX1NJWkUgKyBMRUdFTkRfU1BBQ0lORyArIGxvbmdlc3RUZXh0V2lkdGg7XG4gIHN2Zy5hdHRyKFwidmlld0JveFwiLCBgMCAwICR7dG90YWxXaWR0aH0gJHtoZWlnaHR9YCk7XG4gIGNvbmZpZ3VyZVN2Z1NpemUoc3ZnLCBoZWlnaHQsIHRvdGFsV2lkdGgsIHBpZUNvbmZpZy51c2VNYXhXaWR0aCk7XG59LCBcImRyYXdcIik7XG52YXIgcmVuZGVyZXIgPSB7IGRyYXcgfTtcblxuLy8gc3JjL2RpYWdyYW1zL3BpZS9waWVEaWFncmFtLnRzXG52YXIgZGlhZ3JhbSA9IHtcbiAgcGFyc2VyLFxuICBkYixcbiAgcmVuZGVyZXIsXG4gIHN0eWxlczogcGllU3R5bGVzX2RlZmF1bHRcbn07XG5leHBvcnQge1xuICBkaWFncmFtXG59O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9