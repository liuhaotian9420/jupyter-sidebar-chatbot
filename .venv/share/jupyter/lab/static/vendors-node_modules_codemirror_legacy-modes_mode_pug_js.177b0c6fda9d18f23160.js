"use strict";
(self["webpackChunk_jupyterlab_application_top"] = self["webpackChunk_jupyterlab_application_top"] || []).push([["vendors-node_modules_codemirror_legacy-modes_mode_pug_js"],{

/***/ "./node_modules/@codemirror/legacy-modes/mode/pug.js":
/*!***********************************************************!*\
  !*** ./node_modules/@codemirror/legacy-modes/mode/pug.js ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   pug: () => (/* binding */ pug)
/* harmony export */ });
/* harmony import */ var _javascript_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./javascript.js */ "./node_modules/@codemirror/legacy-modes/mode/javascript.js");


var ATTRS_NEST = {
  '{': '}',
  '(': ')',
  '[': ']'
}

function defaultCopyState(state) {
  if (typeof state != "object") return state
  let newState = {}
  for (let prop in state) {
    let val = state[prop]
    newState[prop] = val instanceof Array ? val.slice() : val
  }
  return newState
}

class State {
  constructor(indentUnit) {
    this.indentUnit = indentUnit

    this.javaScriptLine = false
    this.javaScriptLineExcludesColon = false

    this.javaScriptArguments = false
    this.javaScriptArgumentsDepth = 0

    this.isInterpolating = false
    this.interpolationNesting = 0

    this.jsState = _javascript_js__WEBPACK_IMPORTED_MODULE_0__.javascript.startState(indentUnit)

    this.restOfLine = ''

    this.isIncludeFiltered = false
    this.isEach = false

    this.lastTag = ''

    // Attributes Mode
    this.isAttrs = false
    this.attrsNest = []
    this.inAttributeName = true
    this.attributeIsType = false
    this.attrValue = ''

    // Indented Mode
    this.indentOf = Infinity
    this.indentToken = ''
  }

  copy() {
    var res = new State(this.indentUnit)
    res.javaScriptLine = this.javaScriptLine
    res.javaScriptLineExcludesColon = this.javaScriptLineExcludesColon
    res.javaScriptArguments = this.javaScriptArguments
    res.javaScriptArgumentsDepth = this.javaScriptArgumentsDepth
    res.isInterpolating = this.isInterpolating
    res.interpolationNesting = this.interpolationNesting

    res.jsState = (_javascript_js__WEBPACK_IMPORTED_MODULE_0__.javascript.copyState || defaultCopyState)(this.jsState)

    res.restOfLine = this.restOfLine

    res.isIncludeFiltered = this.isIncludeFiltered
    res.isEach = this.isEach
    res.lastTag = this.lastTag
    res.isAttrs = this.isAttrs
    res.attrsNest = this.attrsNest.slice()
    res.inAttributeName = this.inAttributeName
    res.attributeIsType = this.attributeIsType
    res.attrValue = this.attrValue
    res.indentOf = this.indentOf
    res.indentToken = this.indentToken

    return res
  }
}

function javaScript(stream, state) {
  if (stream.sol()) {
    // if javaScriptLine was set at end of line, ignore it
    state.javaScriptLine = false
    state.javaScriptLineExcludesColon = false
  }
  if (state.javaScriptLine) {
    if (state.javaScriptLineExcludesColon && stream.peek() === ':') {
      state.javaScriptLine = false
      state.javaScriptLineExcludesColon = false
      return
    }
    var tok = _javascript_js__WEBPACK_IMPORTED_MODULE_0__.javascript.token(stream, state.jsState)
    if (stream.eol()) state.javaScriptLine = false
    return tok || true
  }
}
function javaScriptArguments(stream, state) {
  if (state.javaScriptArguments) {
    if (state.javaScriptArgumentsDepth === 0 && stream.peek() !== '(') {
      state.javaScriptArguments = false
      return
    }
    if (stream.peek() === '(') {
      state.javaScriptArgumentsDepth++
    } else if (stream.peek() === ')') {
      state.javaScriptArgumentsDepth--
    }
    if (state.javaScriptArgumentsDepth === 0) {
      state.javaScriptArguments = false
      return
    }

    var tok = _javascript_js__WEBPACK_IMPORTED_MODULE_0__.javascript.token(stream, state.jsState)
    return tok || true
  }
}

function yieldStatement(stream) {
  if (stream.match(/^yield\b/)) {
    return 'keyword'
  }
}

function doctype(stream) {
  if (stream.match(/^(?:doctype) *([^\n]+)?/)) return 'meta'
}

function interpolation(stream, state) {
  if (stream.match('#{')) {
    state.isInterpolating = true
    state.interpolationNesting = 0
    return 'punctuation'
  }
}

function interpolationContinued(stream, state) {
  if (state.isInterpolating) {
    if (stream.peek() === '}') {
      state.interpolationNesting--
      if (state.interpolationNesting < 0) {
        stream.next()
        state.isInterpolating = false
        return 'punctuation'
      }
    } else if (stream.peek() === '{') {
      state.interpolationNesting++
    }
    return _javascript_js__WEBPACK_IMPORTED_MODULE_0__.javascript.token(stream, state.jsState) || true
  }
}

function caseStatement(stream, state) {
  if (stream.match(/^case\b/)) {
    state.javaScriptLine = true
    return 'keyword'
  }
}

function when(stream, state) {
  if (stream.match(/^when\b/)) {
    state.javaScriptLine = true
    state.javaScriptLineExcludesColon = true
    return 'keyword'
  }
}

function defaultStatement(stream) {
  if (stream.match(/^default\b/)) {
    return 'keyword'
  }
}

function extendsStatement(stream, state) {
  if (stream.match(/^extends?\b/)) {
    state.restOfLine = 'string'
    return 'keyword'
  }
}

function append(stream, state) {
  if (stream.match(/^append\b/)) {
    state.restOfLine = 'variable'
    return 'keyword'
  }
}
function prepend(stream, state) {
  if (stream.match(/^prepend\b/)) {
    state.restOfLine = 'variable'
    return 'keyword'
  }
}
function block(stream, state) {
  if (stream.match(/^block\b *(?:(prepend|append)\b)?/)) {
    state.restOfLine = 'variable'
    return 'keyword'
  }
}

function include(stream, state) {
  if (stream.match(/^include\b/)) {
    state.restOfLine = 'string'
    return 'keyword'
  }
}

function includeFiltered(stream, state) {
  if (stream.match(/^include:([a-zA-Z0-9\-]+)/, false) && stream.match('include')) {
    state.isIncludeFiltered = true
    return 'keyword'
  }
}

function includeFilteredContinued(stream, state) {
  if (state.isIncludeFiltered) {
    var tok = filter(stream, state)
    state.isIncludeFiltered = false
    state.restOfLine = 'string'
    return tok
  }
}

function mixin(stream, state) {
  if (stream.match(/^mixin\b/)) {
    state.javaScriptLine = true
    return 'keyword'
  }
}

function call(stream, state) {
  if (stream.match(/^\+([-\w]+)/)) {
    if (!stream.match(/^\( *[-\w]+ *=/, false)) {
      state.javaScriptArguments = true
      state.javaScriptArgumentsDepth = 0
    }
    return 'variable'
  }
  if (stream.match('+#{', false)) {
    stream.next()
    state.mixinCallAfter = true
    return interpolation(stream, state)
  }
}
function callArguments(stream, state) {
  if (state.mixinCallAfter) {
    state.mixinCallAfter = false
    if (!stream.match(/^\( *[-\w]+ *=/, false)) {
      state.javaScriptArguments = true
      state.javaScriptArgumentsDepth = 0
    }
    return true
  }
}

function conditional(stream, state) {
  if (stream.match(/^(if|unless|else if|else)\b/)) {
    state.javaScriptLine = true
    return 'keyword'
  }
}

function each(stream, state) {
  if (stream.match(/^(- *)?(each|for)\b/)) {
    state.isEach = true
    return 'keyword'
  }
}
function eachContinued(stream, state) {
  if (state.isEach) {
    if (stream.match(/^ in\b/)) {
      state.javaScriptLine = true
      state.isEach = false
      return 'keyword'
    } else if (stream.sol() || stream.eol()) {
      state.isEach = false
    } else if (stream.next()) {
      while (!stream.match(/^ in\b/, false) && stream.next()) {}
      return 'variable'
    }
  }
}

function whileStatement(stream, state) {
  if (stream.match(/^while\b/)) {
    state.javaScriptLine = true
    return 'keyword'
  }
}

function tag(stream, state) {
  var captures
  if (captures = stream.match(/^(\w(?:[-:\w]*\w)?)\/?/)) {
    state.lastTag = captures[1].toLowerCase()
    return 'tag'
  }
}

function filter(stream, state) {
  if (stream.match(/^:([\w\-]+)/)) {
    setStringMode(stream, state)
    return 'atom'
  }
}

function code(stream, state) {
  if (stream.match(/^(!?=|-)/)) {
    state.javaScriptLine = true
    return 'punctuation'
  }
}

function id(stream) {
  if (stream.match(/^#([\w-]+)/)) {
    return 'builtin'
  }
}

function className(stream) {
  if (stream.match(/^\.([\w-]+)/)) {
    return 'className'
  }
}

function attrs(stream, state) {
  if (stream.peek() == '(') {
    stream.next()
    state.isAttrs = true
    state.attrsNest = []
    state.inAttributeName = true
    state.attrValue = ''
    state.attributeIsType = false
    return 'punctuation'
  }
}

function attrsContinued(stream, state) {
  if (state.isAttrs) {
    if (ATTRS_NEST[stream.peek()]) {
      state.attrsNest.push(ATTRS_NEST[stream.peek()])
    }
    if (state.attrsNest[state.attrsNest.length - 1] === stream.peek()) {
      state.attrsNest.pop()
    } else if (stream.eat(')')) {
      state.isAttrs = false
      return 'punctuation'
    }
    if (state.inAttributeName && stream.match(/^[^=,\)!]+/)) {
      if (stream.peek() === '=' || stream.peek() === '!') {
        state.inAttributeName = false
        state.jsState = _javascript_js__WEBPACK_IMPORTED_MODULE_0__.javascript.startState(2)
        if (state.lastTag === 'script' && stream.current().trim().toLowerCase() === 'type') {
          state.attributeIsType = true
        } else {
          state.attributeIsType = false
        }
      }
      return 'attribute'
    }

    var tok = _javascript_js__WEBPACK_IMPORTED_MODULE_0__.javascript.token(stream, state.jsState)
    if (state.attrsNest.length === 0 && (tok === 'string' || tok === 'variable' || tok === 'keyword')) {
      try {
        Function('', 'var x ' + state.attrValue.replace(/,\s*$/, '').replace(/^!/, ''))
        state.inAttributeName = true
        state.attrValue = ''
        stream.backUp(stream.current().length)
        return attrsContinued(stream, state)
      } catch (ex) {
        //not the end of an attribute
      }
    }
    state.attrValue += stream.current()
    return tok || true
  }
}

function attributesBlock(stream, state) {
  if (stream.match(/^&attributes\b/)) {
    state.javaScriptArguments = true
    state.javaScriptArgumentsDepth = 0
    return 'keyword'
  }
}

function indent(stream) {
  if (stream.sol() && stream.eatSpace()) {
    return 'indent'
  }
}

function comment(stream, state) {
  if (stream.match(/^ *\/\/(-)?([^\n]*)/)) {
    state.indentOf = stream.indentation()
    state.indentToken = 'comment'
    return 'comment'
  }
}

function colon(stream) {
  if (stream.match(/^: */)) {
    return 'colon'
  }
}

function text(stream, state) {
  if (stream.match(/^(?:\| ?| )([^\n]+)/)) {
    return 'string'
  }
  if (stream.match(/^(<[^\n]*)/, false)) {
    // html string
    setStringMode(stream, state)
    stream.skipToEnd()
    return state.indentToken
  }
}

function dot(stream, state) {
  if (stream.eat('.')) {
    setStringMode(stream, state)
    return 'dot'
  }
}

function fail(stream) {
  stream.next()
  return null
}


function setStringMode(stream, state) {
  state.indentOf = stream.indentation()
  state.indentToken = 'string'
}
function restOfLine(stream, state) {
  if (stream.sol()) {
    // if restOfLine was set at end of line, ignore it
    state.restOfLine = ''
  }
  if (state.restOfLine) {
    stream.skipToEnd()
    var tok = state.restOfLine
    state.restOfLine = ''
    return tok
  }
}


function startState(indentUnit) {
  return new State(indentUnit)
}
function copyState(state) {
  return state.copy()
}
function nextToken(stream, state) {
  var tok = restOfLine(stream, state)
      || interpolationContinued(stream, state)
      || includeFilteredContinued(stream, state)
      || eachContinued(stream, state)
      || attrsContinued(stream, state)
      || javaScript(stream, state)
      || javaScriptArguments(stream, state)
      || callArguments(stream, state)

      || yieldStatement(stream)
      || doctype(stream)
      || interpolation(stream, state)
      || caseStatement(stream, state)
      || when(stream, state)
      || defaultStatement(stream)
      || extendsStatement(stream, state)
      || append(stream, state)
      || prepend(stream, state)
      || block(stream, state)
      || include(stream, state)
      || includeFiltered(stream, state)
      || mixin(stream, state)
      || call(stream, state)
      || conditional(stream, state)
      || each(stream, state)
      || whileStatement(stream, state)
      || tag(stream, state)
      || filter(stream, state)
      || code(stream, state)
      || id(stream)
      || className(stream)
      || attrs(stream, state)
      || attributesBlock(stream, state)
      || indent(stream)
      || text(stream, state)
      || comment(stream, state)
      || colon(stream)
      || dot(stream, state)
      || fail(stream)

  return tok === true ? null : tok
}

const pug = {
  startState: startState,
  copyState: copyState,
  token: nextToken
}


/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidmVuZG9ycy1ub2RlX21vZHVsZXNfY29kZW1pcnJvcl9sZWdhY3ktbW9kZXNfbW9kZV9wdWdfanMuMTc3YjBjNmZkYTlkMThmMjMxNjAuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFBMEM7O0FBRTFDO0FBQ0EsSUFBSSxLQUFLO0FBQ1Q7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUEsbUJBQW1CLHNEQUFVOztBQUU3Qjs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLG1CQUFtQixzREFBVTs7QUFFN0I7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsc0RBQVU7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxjQUFjLHNEQUFVO0FBQ3hCO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLHNCQUFzQjtBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSw0QkFBNEI7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTSw2QkFBNkI7QUFDbkM7QUFDQTtBQUNBLFdBQVcsc0RBQVU7QUFDckI7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QjtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixzREFBVTtBQUNsQztBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsY0FBYyxzREFBVTtBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRU87QUFDUDtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL0BqdXB5dGVybGFiL2FwcGxpY2F0aW9uLXRvcC8uL25vZGVfbW9kdWxlcy9AY29kZW1pcnJvci9sZWdhY3ktbW9kZXMvbW9kZS9wdWcuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtqYXZhc2NyaXB0fSBmcm9tIFwiLi9qYXZhc2NyaXB0LmpzXCJcblxudmFyIEFUVFJTX05FU1QgPSB7XG4gICd7JzogJ30nLFxuICAnKCc6ICcpJyxcbiAgJ1snOiAnXSdcbn1cblxuZnVuY3Rpb24gZGVmYXVsdENvcHlTdGF0ZShzdGF0ZSkge1xuICBpZiAodHlwZW9mIHN0YXRlICE9IFwib2JqZWN0XCIpIHJldHVybiBzdGF0ZVxuICBsZXQgbmV3U3RhdGUgPSB7fVxuICBmb3IgKGxldCBwcm9wIGluIHN0YXRlKSB7XG4gICAgbGV0IHZhbCA9IHN0YXRlW3Byb3BdXG4gICAgbmV3U3RhdGVbcHJvcF0gPSB2YWwgaW5zdGFuY2VvZiBBcnJheSA/IHZhbC5zbGljZSgpIDogdmFsXG4gIH1cbiAgcmV0dXJuIG5ld1N0YXRlXG59XG5cbmNsYXNzIFN0YXRlIHtcbiAgY29uc3RydWN0b3IoaW5kZW50VW5pdCkge1xuICAgIHRoaXMuaW5kZW50VW5pdCA9IGluZGVudFVuaXRcblxuICAgIHRoaXMuamF2YVNjcmlwdExpbmUgPSBmYWxzZVxuICAgIHRoaXMuamF2YVNjcmlwdExpbmVFeGNsdWRlc0NvbG9uID0gZmFsc2VcblxuICAgIHRoaXMuamF2YVNjcmlwdEFyZ3VtZW50cyA9IGZhbHNlXG4gICAgdGhpcy5qYXZhU2NyaXB0QXJndW1lbnRzRGVwdGggPSAwXG5cbiAgICB0aGlzLmlzSW50ZXJwb2xhdGluZyA9IGZhbHNlXG4gICAgdGhpcy5pbnRlcnBvbGF0aW9uTmVzdGluZyA9IDBcblxuICAgIHRoaXMuanNTdGF0ZSA9IGphdmFzY3JpcHQuc3RhcnRTdGF0ZShpbmRlbnRVbml0KVxuXG4gICAgdGhpcy5yZXN0T2ZMaW5lID0gJydcblxuICAgIHRoaXMuaXNJbmNsdWRlRmlsdGVyZWQgPSBmYWxzZVxuICAgIHRoaXMuaXNFYWNoID0gZmFsc2VcblxuICAgIHRoaXMubGFzdFRhZyA9ICcnXG5cbiAgICAvLyBBdHRyaWJ1dGVzIE1vZGVcbiAgICB0aGlzLmlzQXR0cnMgPSBmYWxzZVxuICAgIHRoaXMuYXR0cnNOZXN0ID0gW11cbiAgICB0aGlzLmluQXR0cmlidXRlTmFtZSA9IHRydWVcbiAgICB0aGlzLmF0dHJpYnV0ZUlzVHlwZSA9IGZhbHNlXG4gICAgdGhpcy5hdHRyVmFsdWUgPSAnJ1xuXG4gICAgLy8gSW5kZW50ZWQgTW9kZVxuICAgIHRoaXMuaW5kZW50T2YgPSBJbmZpbml0eVxuICAgIHRoaXMuaW5kZW50VG9rZW4gPSAnJ1xuICB9XG5cbiAgY29weSgpIHtcbiAgICB2YXIgcmVzID0gbmV3IFN0YXRlKHRoaXMuaW5kZW50VW5pdClcbiAgICByZXMuamF2YVNjcmlwdExpbmUgPSB0aGlzLmphdmFTY3JpcHRMaW5lXG4gICAgcmVzLmphdmFTY3JpcHRMaW5lRXhjbHVkZXNDb2xvbiA9IHRoaXMuamF2YVNjcmlwdExpbmVFeGNsdWRlc0NvbG9uXG4gICAgcmVzLmphdmFTY3JpcHRBcmd1bWVudHMgPSB0aGlzLmphdmFTY3JpcHRBcmd1bWVudHNcbiAgICByZXMuamF2YVNjcmlwdEFyZ3VtZW50c0RlcHRoID0gdGhpcy5qYXZhU2NyaXB0QXJndW1lbnRzRGVwdGhcbiAgICByZXMuaXNJbnRlcnBvbGF0aW5nID0gdGhpcy5pc0ludGVycG9sYXRpbmdcbiAgICByZXMuaW50ZXJwb2xhdGlvbk5lc3RpbmcgPSB0aGlzLmludGVycG9sYXRpb25OZXN0aW5nXG5cbiAgICByZXMuanNTdGF0ZSA9IChqYXZhc2NyaXB0LmNvcHlTdGF0ZSB8fCBkZWZhdWx0Q29weVN0YXRlKSh0aGlzLmpzU3RhdGUpXG5cbiAgICByZXMucmVzdE9mTGluZSA9IHRoaXMucmVzdE9mTGluZVxuXG4gICAgcmVzLmlzSW5jbHVkZUZpbHRlcmVkID0gdGhpcy5pc0luY2x1ZGVGaWx0ZXJlZFxuICAgIHJlcy5pc0VhY2ggPSB0aGlzLmlzRWFjaFxuICAgIHJlcy5sYXN0VGFnID0gdGhpcy5sYXN0VGFnXG4gICAgcmVzLmlzQXR0cnMgPSB0aGlzLmlzQXR0cnNcbiAgICByZXMuYXR0cnNOZXN0ID0gdGhpcy5hdHRyc05lc3Quc2xpY2UoKVxuICAgIHJlcy5pbkF0dHJpYnV0ZU5hbWUgPSB0aGlzLmluQXR0cmlidXRlTmFtZVxuICAgIHJlcy5hdHRyaWJ1dGVJc1R5cGUgPSB0aGlzLmF0dHJpYnV0ZUlzVHlwZVxuICAgIHJlcy5hdHRyVmFsdWUgPSB0aGlzLmF0dHJWYWx1ZVxuICAgIHJlcy5pbmRlbnRPZiA9IHRoaXMuaW5kZW50T2ZcbiAgICByZXMuaW5kZW50VG9rZW4gPSB0aGlzLmluZGVudFRva2VuXG5cbiAgICByZXR1cm4gcmVzXG4gIH1cbn1cblxuZnVuY3Rpb24gamF2YVNjcmlwdChzdHJlYW0sIHN0YXRlKSB7XG4gIGlmIChzdHJlYW0uc29sKCkpIHtcbiAgICAvLyBpZiBqYXZhU2NyaXB0TGluZSB3YXMgc2V0IGF0IGVuZCBvZiBsaW5lLCBpZ25vcmUgaXRcbiAgICBzdGF0ZS5qYXZhU2NyaXB0TGluZSA9IGZhbHNlXG4gICAgc3RhdGUuamF2YVNjcmlwdExpbmVFeGNsdWRlc0NvbG9uID0gZmFsc2VcbiAgfVxuICBpZiAoc3RhdGUuamF2YVNjcmlwdExpbmUpIHtcbiAgICBpZiAoc3RhdGUuamF2YVNjcmlwdExpbmVFeGNsdWRlc0NvbG9uICYmIHN0cmVhbS5wZWVrKCkgPT09ICc6Jykge1xuICAgICAgc3RhdGUuamF2YVNjcmlwdExpbmUgPSBmYWxzZVxuICAgICAgc3RhdGUuamF2YVNjcmlwdExpbmVFeGNsdWRlc0NvbG9uID0gZmFsc2VcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICB2YXIgdG9rID0gamF2YXNjcmlwdC50b2tlbihzdHJlYW0sIHN0YXRlLmpzU3RhdGUpXG4gICAgaWYgKHN0cmVhbS5lb2woKSkgc3RhdGUuamF2YVNjcmlwdExpbmUgPSBmYWxzZVxuICAgIHJldHVybiB0b2sgfHwgdHJ1ZVxuICB9XG59XG5mdW5jdGlvbiBqYXZhU2NyaXB0QXJndW1lbnRzKHN0cmVhbSwgc3RhdGUpIHtcbiAgaWYgKHN0YXRlLmphdmFTY3JpcHRBcmd1bWVudHMpIHtcbiAgICBpZiAoc3RhdGUuamF2YVNjcmlwdEFyZ3VtZW50c0RlcHRoID09PSAwICYmIHN0cmVhbS5wZWVrKCkgIT09ICcoJykge1xuICAgICAgc3RhdGUuamF2YVNjcmlwdEFyZ3VtZW50cyA9IGZhbHNlXG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgaWYgKHN0cmVhbS5wZWVrKCkgPT09ICcoJykge1xuICAgICAgc3RhdGUuamF2YVNjcmlwdEFyZ3VtZW50c0RlcHRoKytcbiAgICB9IGVsc2UgaWYgKHN0cmVhbS5wZWVrKCkgPT09ICcpJykge1xuICAgICAgc3RhdGUuamF2YVNjcmlwdEFyZ3VtZW50c0RlcHRoLS1cbiAgICB9XG4gICAgaWYgKHN0YXRlLmphdmFTY3JpcHRBcmd1bWVudHNEZXB0aCA9PT0gMCkge1xuICAgICAgc3RhdGUuamF2YVNjcmlwdEFyZ3VtZW50cyA9IGZhbHNlXG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICB2YXIgdG9rID0gamF2YXNjcmlwdC50b2tlbihzdHJlYW0sIHN0YXRlLmpzU3RhdGUpXG4gICAgcmV0dXJuIHRvayB8fCB0cnVlXG4gIH1cbn1cblxuZnVuY3Rpb24geWllbGRTdGF0ZW1lbnQoc3RyZWFtKSB7XG4gIGlmIChzdHJlYW0ubWF0Y2goL155aWVsZFxcYi8pKSB7XG4gICAgcmV0dXJuICdrZXl3b3JkJ1xuICB9XG59XG5cbmZ1bmN0aW9uIGRvY3R5cGUoc3RyZWFtKSB7XG4gIGlmIChzdHJlYW0ubWF0Y2goL14oPzpkb2N0eXBlKSAqKFteXFxuXSspPy8pKSByZXR1cm4gJ21ldGEnXG59XG5cbmZ1bmN0aW9uIGludGVycG9sYXRpb24oc3RyZWFtLCBzdGF0ZSkge1xuICBpZiAoc3RyZWFtLm1hdGNoKCcjeycpKSB7XG4gICAgc3RhdGUuaXNJbnRlcnBvbGF0aW5nID0gdHJ1ZVxuICAgIHN0YXRlLmludGVycG9sYXRpb25OZXN0aW5nID0gMFxuICAgIHJldHVybiAncHVuY3R1YXRpb24nXG4gIH1cbn1cblxuZnVuY3Rpb24gaW50ZXJwb2xhdGlvbkNvbnRpbnVlZChzdHJlYW0sIHN0YXRlKSB7XG4gIGlmIChzdGF0ZS5pc0ludGVycG9sYXRpbmcpIHtcbiAgICBpZiAoc3RyZWFtLnBlZWsoKSA9PT0gJ30nKSB7XG4gICAgICBzdGF0ZS5pbnRlcnBvbGF0aW9uTmVzdGluZy0tXG4gICAgICBpZiAoc3RhdGUuaW50ZXJwb2xhdGlvbk5lc3RpbmcgPCAwKSB7XG4gICAgICAgIHN0cmVhbS5uZXh0KClcbiAgICAgICAgc3RhdGUuaXNJbnRlcnBvbGF0aW5nID0gZmFsc2VcbiAgICAgICAgcmV0dXJuICdwdW5jdHVhdGlvbidcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHN0cmVhbS5wZWVrKCkgPT09ICd7Jykge1xuICAgICAgc3RhdGUuaW50ZXJwb2xhdGlvbk5lc3RpbmcrK1xuICAgIH1cbiAgICByZXR1cm4gamF2YXNjcmlwdC50b2tlbihzdHJlYW0sIHN0YXRlLmpzU3RhdGUpIHx8IHRydWVcbiAgfVxufVxuXG5mdW5jdGlvbiBjYXNlU3RhdGVtZW50KHN0cmVhbSwgc3RhdGUpIHtcbiAgaWYgKHN0cmVhbS5tYXRjaCgvXmNhc2VcXGIvKSkge1xuICAgIHN0YXRlLmphdmFTY3JpcHRMaW5lID0gdHJ1ZVxuICAgIHJldHVybiAna2V5d29yZCdcbiAgfVxufVxuXG5mdW5jdGlvbiB3aGVuKHN0cmVhbSwgc3RhdGUpIHtcbiAgaWYgKHN0cmVhbS5tYXRjaCgvXndoZW5cXGIvKSkge1xuICAgIHN0YXRlLmphdmFTY3JpcHRMaW5lID0gdHJ1ZVxuICAgIHN0YXRlLmphdmFTY3JpcHRMaW5lRXhjbHVkZXNDb2xvbiA9IHRydWVcbiAgICByZXR1cm4gJ2tleXdvcmQnXG4gIH1cbn1cblxuZnVuY3Rpb24gZGVmYXVsdFN0YXRlbWVudChzdHJlYW0pIHtcbiAgaWYgKHN0cmVhbS5tYXRjaCgvXmRlZmF1bHRcXGIvKSkge1xuICAgIHJldHVybiAna2V5d29yZCdcbiAgfVxufVxuXG5mdW5jdGlvbiBleHRlbmRzU3RhdGVtZW50KHN0cmVhbSwgc3RhdGUpIHtcbiAgaWYgKHN0cmVhbS5tYXRjaCgvXmV4dGVuZHM/XFxiLykpIHtcbiAgICBzdGF0ZS5yZXN0T2ZMaW5lID0gJ3N0cmluZydcbiAgICByZXR1cm4gJ2tleXdvcmQnXG4gIH1cbn1cblxuZnVuY3Rpb24gYXBwZW5kKHN0cmVhbSwgc3RhdGUpIHtcbiAgaWYgKHN0cmVhbS5tYXRjaCgvXmFwcGVuZFxcYi8pKSB7XG4gICAgc3RhdGUucmVzdE9mTGluZSA9ICd2YXJpYWJsZSdcbiAgICByZXR1cm4gJ2tleXdvcmQnXG4gIH1cbn1cbmZ1bmN0aW9uIHByZXBlbmQoc3RyZWFtLCBzdGF0ZSkge1xuICBpZiAoc3RyZWFtLm1hdGNoKC9ecHJlcGVuZFxcYi8pKSB7XG4gICAgc3RhdGUucmVzdE9mTGluZSA9ICd2YXJpYWJsZSdcbiAgICByZXR1cm4gJ2tleXdvcmQnXG4gIH1cbn1cbmZ1bmN0aW9uIGJsb2NrKHN0cmVhbSwgc3RhdGUpIHtcbiAgaWYgKHN0cmVhbS5tYXRjaCgvXmJsb2NrXFxiICooPzoocHJlcGVuZHxhcHBlbmQpXFxiKT8vKSkge1xuICAgIHN0YXRlLnJlc3RPZkxpbmUgPSAndmFyaWFibGUnXG4gICAgcmV0dXJuICdrZXl3b3JkJ1xuICB9XG59XG5cbmZ1bmN0aW9uIGluY2x1ZGUoc3RyZWFtLCBzdGF0ZSkge1xuICBpZiAoc3RyZWFtLm1hdGNoKC9eaW5jbHVkZVxcYi8pKSB7XG4gICAgc3RhdGUucmVzdE9mTGluZSA9ICdzdHJpbmcnXG4gICAgcmV0dXJuICdrZXl3b3JkJ1xuICB9XG59XG5cbmZ1bmN0aW9uIGluY2x1ZGVGaWx0ZXJlZChzdHJlYW0sIHN0YXRlKSB7XG4gIGlmIChzdHJlYW0ubWF0Y2goL15pbmNsdWRlOihbYS16QS1aMC05XFwtXSspLywgZmFsc2UpICYmIHN0cmVhbS5tYXRjaCgnaW5jbHVkZScpKSB7XG4gICAgc3RhdGUuaXNJbmNsdWRlRmlsdGVyZWQgPSB0cnVlXG4gICAgcmV0dXJuICdrZXl3b3JkJ1xuICB9XG59XG5cbmZ1bmN0aW9uIGluY2x1ZGVGaWx0ZXJlZENvbnRpbnVlZChzdHJlYW0sIHN0YXRlKSB7XG4gIGlmIChzdGF0ZS5pc0luY2x1ZGVGaWx0ZXJlZCkge1xuICAgIHZhciB0b2sgPSBmaWx0ZXIoc3RyZWFtLCBzdGF0ZSlcbiAgICBzdGF0ZS5pc0luY2x1ZGVGaWx0ZXJlZCA9IGZhbHNlXG4gICAgc3RhdGUucmVzdE9mTGluZSA9ICdzdHJpbmcnXG4gICAgcmV0dXJuIHRva1xuICB9XG59XG5cbmZ1bmN0aW9uIG1peGluKHN0cmVhbSwgc3RhdGUpIHtcbiAgaWYgKHN0cmVhbS5tYXRjaCgvXm1peGluXFxiLykpIHtcbiAgICBzdGF0ZS5qYXZhU2NyaXB0TGluZSA9IHRydWVcbiAgICByZXR1cm4gJ2tleXdvcmQnXG4gIH1cbn1cblxuZnVuY3Rpb24gY2FsbChzdHJlYW0sIHN0YXRlKSB7XG4gIGlmIChzdHJlYW0ubWF0Y2goL15cXCsoWy1cXHddKykvKSkge1xuICAgIGlmICghc3RyZWFtLm1hdGNoKC9eXFwoICpbLVxcd10rICo9LywgZmFsc2UpKSB7XG4gICAgICBzdGF0ZS5qYXZhU2NyaXB0QXJndW1lbnRzID0gdHJ1ZVxuICAgICAgc3RhdGUuamF2YVNjcmlwdEFyZ3VtZW50c0RlcHRoID0gMFxuICAgIH1cbiAgICByZXR1cm4gJ3ZhcmlhYmxlJ1xuICB9XG4gIGlmIChzdHJlYW0ubWF0Y2goJysjeycsIGZhbHNlKSkge1xuICAgIHN0cmVhbS5uZXh0KClcbiAgICBzdGF0ZS5taXhpbkNhbGxBZnRlciA9IHRydWVcbiAgICByZXR1cm4gaW50ZXJwb2xhdGlvbihzdHJlYW0sIHN0YXRlKVxuICB9XG59XG5mdW5jdGlvbiBjYWxsQXJndW1lbnRzKHN0cmVhbSwgc3RhdGUpIHtcbiAgaWYgKHN0YXRlLm1peGluQ2FsbEFmdGVyKSB7XG4gICAgc3RhdGUubWl4aW5DYWxsQWZ0ZXIgPSBmYWxzZVxuICAgIGlmICghc3RyZWFtLm1hdGNoKC9eXFwoICpbLVxcd10rICo9LywgZmFsc2UpKSB7XG4gICAgICBzdGF0ZS5qYXZhU2NyaXB0QXJndW1lbnRzID0gdHJ1ZVxuICAgICAgc3RhdGUuamF2YVNjcmlwdEFyZ3VtZW50c0RlcHRoID0gMFxuICAgIH1cbiAgICByZXR1cm4gdHJ1ZVxuICB9XG59XG5cbmZ1bmN0aW9uIGNvbmRpdGlvbmFsKHN0cmVhbSwgc3RhdGUpIHtcbiAgaWYgKHN0cmVhbS5tYXRjaCgvXihpZnx1bmxlc3N8ZWxzZSBpZnxlbHNlKVxcYi8pKSB7XG4gICAgc3RhdGUuamF2YVNjcmlwdExpbmUgPSB0cnVlXG4gICAgcmV0dXJuICdrZXl3b3JkJ1xuICB9XG59XG5cbmZ1bmN0aW9uIGVhY2goc3RyZWFtLCBzdGF0ZSkge1xuICBpZiAoc3RyZWFtLm1hdGNoKC9eKC0gKik/KGVhY2h8Zm9yKVxcYi8pKSB7XG4gICAgc3RhdGUuaXNFYWNoID0gdHJ1ZVxuICAgIHJldHVybiAna2V5d29yZCdcbiAgfVxufVxuZnVuY3Rpb24gZWFjaENvbnRpbnVlZChzdHJlYW0sIHN0YXRlKSB7XG4gIGlmIChzdGF0ZS5pc0VhY2gpIHtcbiAgICBpZiAoc3RyZWFtLm1hdGNoKC9eIGluXFxiLykpIHtcbiAgICAgIHN0YXRlLmphdmFTY3JpcHRMaW5lID0gdHJ1ZVxuICAgICAgc3RhdGUuaXNFYWNoID0gZmFsc2VcbiAgICAgIHJldHVybiAna2V5d29yZCdcbiAgICB9IGVsc2UgaWYgKHN0cmVhbS5zb2woKSB8fCBzdHJlYW0uZW9sKCkpIHtcbiAgICAgIHN0YXRlLmlzRWFjaCA9IGZhbHNlXG4gICAgfSBlbHNlIGlmIChzdHJlYW0ubmV4dCgpKSB7XG4gICAgICB3aGlsZSAoIXN0cmVhbS5tYXRjaCgvXiBpblxcYi8sIGZhbHNlKSAmJiBzdHJlYW0ubmV4dCgpKSB7fVxuICAgICAgcmV0dXJuICd2YXJpYWJsZSdcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gd2hpbGVTdGF0ZW1lbnQoc3RyZWFtLCBzdGF0ZSkge1xuICBpZiAoc3RyZWFtLm1hdGNoKC9ed2hpbGVcXGIvKSkge1xuICAgIHN0YXRlLmphdmFTY3JpcHRMaW5lID0gdHJ1ZVxuICAgIHJldHVybiAna2V5d29yZCdcbiAgfVxufVxuXG5mdW5jdGlvbiB0YWcoc3RyZWFtLCBzdGF0ZSkge1xuICB2YXIgY2FwdHVyZXNcbiAgaWYgKGNhcHR1cmVzID0gc3RyZWFtLm1hdGNoKC9eKFxcdyg/OlstOlxcd10qXFx3KT8pXFwvPy8pKSB7XG4gICAgc3RhdGUubGFzdFRhZyA9IGNhcHR1cmVzWzFdLnRvTG93ZXJDYXNlKClcbiAgICByZXR1cm4gJ3RhZydcbiAgfVxufVxuXG5mdW5jdGlvbiBmaWx0ZXIoc3RyZWFtLCBzdGF0ZSkge1xuICBpZiAoc3RyZWFtLm1hdGNoKC9eOihbXFx3XFwtXSspLykpIHtcbiAgICBzZXRTdHJpbmdNb2RlKHN0cmVhbSwgc3RhdGUpXG4gICAgcmV0dXJuICdhdG9tJ1xuICB9XG59XG5cbmZ1bmN0aW9uIGNvZGUoc3RyZWFtLCBzdGF0ZSkge1xuICBpZiAoc3RyZWFtLm1hdGNoKC9eKCE/PXwtKS8pKSB7XG4gICAgc3RhdGUuamF2YVNjcmlwdExpbmUgPSB0cnVlXG4gICAgcmV0dXJuICdwdW5jdHVhdGlvbidcbiAgfVxufVxuXG5mdW5jdGlvbiBpZChzdHJlYW0pIHtcbiAgaWYgKHN0cmVhbS5tYXRjaCgvXiMoW1xcdy1dKykvKSkge1xuICAgIHJldHVybiAnYnVpbHRpbidcbiAgfVxufVxuXG5mdW5jdGlvbiBjbGFzc05hbWUoc3RyZWFtKSB7XG4gIGlmIChzdHJlYW0ubWF0Y2goL15cXC4oW1xcdy1dKykvKSkge1xuICAgIHJldHVybiAnY2xhc3NOYW1lJ1xuICB9XG59XG5cbmZ1bmN0aW9uIGF0dHJzKHN0cmVhbSwgc3RhdGUpIHtcbiAgaWYgKHN0cmVhbS5wZWVrKCkgPT0gJygnKSB7XG4gICAgc3RyZWFtLm5leHQoKVxuICAgIHN0YXRlLmlzQXR0cnMgPSB0cnVlXG4gICAgc3RhdGUuYXR0cnNOZXN0ID0gW11cbiAgICBzdGF0ZS5pbkF0dHJpYnV0ZU5hbWUgPSB0cnVlXG4gICAgc3RhdGUuYXR0clZhbHVlID0gJydcbiAgICBzdGF0ZS5hdHRyaWJ1dGVJc1R5cGUgPSBmYWxzZVxuICAgIHJldHVybiAncHVuY3R1YXRpb24nXG4gIH1cbn1cblxuZnVuY3Rpb24gYXR0cnNDb250aW51ZWQoc3RyZWFtLCBzdGF0ZSkge1xuICBpZiAoc3RhdGUuaXNBdHRycykge1xuICAgIGlmIChBVFRSU19ORVNUW3N0cmVhbS5wZWVrKCldKSB7XG4gICAgICBzdGF0ZS5hdHRyc05lc3QucHVzaChBVFRSU19ORVNUW3N0cmVhbS5wZWVrKCldKVxuICAgIH1cbiAgICBpZiAoc3RhdGUuYXR0cnNOZXN0W3N0YXRlLmF0dHJzTmVzdC5sZW5ndGggLSAxXSA9PT0gc3RyZWFtLnBlZWsoKSkge1xuICAgICAgc3RhdGUuYXR0cnNOZXN0LnBvcCgpXG4gICAgfSBlbHNlIGlmIChzdHJlYW0uZWF0KCcpJykpIHtcbiAgICAgIHN0YXRlLmlzQXR0cnMgPSBmYWxzZVxuICAgICAgcmV0dXJuICdwdW5jdHVhdGlvbidcbiAgICB9XG4gICAgaWYgKHN0YXRlLmluQXR0cmlidXRlTmFtZSAmJiBzdHJlYW0ubWF0Y2goL15bXj0sXFwpIV0rLykpIHtcbiAgICAgIGlmIChzdHJlYW0ucGVlaygpID09PSAnPScgfHwgc3RyZWFtLnBlZWsoKSA9PT0gJyEnKSB7XG4gICAgICAgIHN0YXRlLmluQXR0cmlidXRlTmFtZSA9IGZhbHNlXG4gICAgICAgIHN0YXRlLmpzU3RhdGUgPSBqYXZhc2NyaXB0LnN0YXJ0U3RhdGUoMilcbiAgICAgICAgaWYgKHN0YXRlLmxhc3RUYWcgPT09ICdzY3JpcHQnICYmIHN0cmVhbS5jdXJyZW50KCkudHJpbSgpLnRvTG93ZXJDYXNlKCkgPT09ICd0eXBlJykge1xuICAgICAgICAgIHN0YXRlLmF0dHJpYnV0ZUlzVHlwZSA9IHRydWVcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzdGF0ZS5hdHRyaWJ1dGVJc1R5cGUgPSBmYWxzZVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gJ2F0dHJpYnV0ZSdcbiAgICB9XG5cbiAgICB2YXIgdG9rID0gamF2YXNjcmlwdC50b2tlbihzdHJlYW0sIHN0YXRlLmpzU3RhdGUpXG4gICAgaWYgKHN0YXRlLmF0dHJzTmVzdC5sZW5ndGggPT09IDAgJiYgKHRvayA9PT0gJ3N0cmluZycgfHwgdG9rID09PSAndmFyaWFibGUnIHx8IHRvayA9PT0gJ2tleXdvcmQnKSkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgRnVuY3Rpb24oJycsICd2YXIgeCAnICsgc3RhdGUuYXR0clZhbHVlLnJlcGxhY2UoLyxcXHMqJC8sICcnKS5yZXBsYWNlKC9eIS8sICcnKSlcbiAgICAgICAgc3RhdGUuaW5BdHRyaWJ1dGVOYW1lID0gdHJ1ZVxuICAgICAgICBzdGF0ZS5hdHRyVmFsdWUgPSAnJ1xuICAgICAgICBzdHJlYW0uYmFja1VwKHN0cmVhbS5jdXJyZW50KCkubGVuZ3RoKVxuICAgICAgICByZXR1cm4gYXR0cnNDb250aW51ZWQoc3RyZWFtLCBzdGF0ZSlcbiAgICAgIH0gY2F0Y2ggKGV4KSB7XG4gICAgICAgIC8vbm90IHRoZSBlbmQgb2YgYW4gYXR0cmlidXRlXG4gICAgICB9XG4gICAgfVxuICAgIHN0YXRlLmF0dHJWYWx1ZSArPSBzdHJlYW0uY3VycmVudCgpXG4gICAgcmV0dXJuIHRvayB8fCB0cnVlXG4gIH1cbn1cblxuZnVuY3Rpb24gYXR0cmlidXRlc0Jsb2NrKHN0cmVhbSwgc3RhdGUpIHtcbiAgaWYgKHN0cmVhbS5tYXRjaCgvXiZhdHRyaWJ1dGVzXFxiLykpIHtcbiAgICBzdGF0ZS5qYXZhU2NyaXB0QXJndW1lbnRzID0gdHJ1ZVxuICAgIHN0YXRlLmphdmFTY3JpcHRBcmd1bWVudHNEZXB0aCA9IDBcbiAgICByZXR1cm4gJ2tleXdvcmQnXG4gIH1cbn1cblxuZnVuY3Rpb24gaW5kZW50KHN0cmVhbSkge1xuICBpZiAoc3RyZWFtLnNvbCgpICYmIHN0cmVhbS5lYXRTcGFjZSgpKSB7XG4gICAgcmV0dXJuICdpbmRlbnQnXG4gIH1cbn1cblxuZnVuY3Rpb24gY29tbWVudChzdHJlYW0sIHN0YXRlKSB7XG4gIGlmIChzdHJlYW0ubWF0Y2goL14gKlxcL1xcLygtKT8oW15cXG5dKikvKSkge1xuICAgIHN0YXRlLmluZGVudE9mID0gc3RyZWFtLmluZGVudGF0aW9uKClcbiAgICBzdGF0ZS5pbmRlbnRUb2tlbiA9ICdjb21tZW50J1xuICAgIHJldHVybiAnY29tbWVudCdcbiAgfVxufVxuXG5mdW5jdGlvbiBjb2xvbihzdHJlYW0pIHtcbiAgaWYgKHN0cmVhbS5tYXRjaCgvXjogKi8pKSB7XG4gICAgcmV0dXJuICdjb2xvbidcbiAgfVxufVxuXG5mdW5jdGlvbiB0ZXh0KHN0cmVhbSwgc3RhdGUpIHtcbiAgaWYgKHN0cmVhbS5tYXRjaCgvXig/OlxcfCA/fCApKFteXFxuXSspLykpIHtcbiAgICByZXR1cm4gJ3N0cmluZydcbiAgfVxuICBpZiAoc3RyZWFtLm1hdGNoKC9eKDxbXlxcbl0qKS8sIGZhbHNlKSkge1xuICAgIC8vIGh0bWwgc3RyaW5nXG4gICAgc2V0U3RyaW5nTW9kZShzdHJlYW0sIHN0YXRlKVxuICAgIHN0cmVhbS5za2lwVG9FbmQoKVxuICAgIHJldHVybiBzdGF0ZS5pbmRlbnRUb2tlblxuICB9XG59XG5cbmZ1bmN0aW9uIGRvdChzdHJlYW0sIHN0YXRlKSB7XG4gIGlmIChzdHJlYW0uZWF0KCcuJykpIHtcbiAgICBzZXRTdHJpbmdNb2RlKHN0cmVhbSwgc3RhdGUpXG4gICAgcmV0dXJuICdkb3QnXG4gIH1cbn1cblxuZnVuY3Rpb24gZmFpbChzdHJlYW0pIHtcbiAgc3RyZWFtLm5leHQoKVxuICByZXR1cm4gbnVsbFxufVxuXG5cbmZ1bmN0aW9uIHNldFN0cmluZ01vZGUoc3RyZWFtLCBzdGF0ZSkge1xuICBzdGF0ZS5pbmRlbnRPZiA9IHN0cmVhbS5pbmRlbnRhdGlvbigpXG4gIHN0YXRlLmluZGVudFRva2VuID0gJ3N0cmluZydcbn1cbmZ1bmN0aW9uIHJlc3RPZkxpbmUoc3RyZWFtLCBzdGF0ZSkge1xuICBpZiAoc3RyZWFtLnNvbCgpKSB7XG4gICAgLy8gaWYgcmVzdE9mTGluZSB3YXMgc2V0IGF0IGVuZCBvZiBsaW5lLCBpZ25vcmUgaXRcbiAgICBzdGF0ZS5yZXN0T2ZMaW5lID0gJydcbiAgfVxuICBpZiAoc3RhdGUucmVzdE9mTGluZSkge1xuICAgIHN0cmVhbS5za2lwVG9FbmQoKVxuICAgIHZhciB0b2sgPSBzdGF0ZS5yZXN0T2ZMaW5lXG4gICAgc3RhdGUucmVzdE9mTGluZSA9ICcnXG4gICAgcmV0dXJuIHRva1xuICB9XG59XG5cblxuZnVuY3Rpb24gc3RhcnRTdGF0ZShpbmRlbnRVbml0KSB7XG4gIHJldHVybiBuZXcgU3RhdGUoaW5kZW50VW5pdClcbn1cbmZ1bmN0aW9uIGNvcHlTdGF0ZShzdGF0ZSkge1xuICByZXR1cm4gc3RhdGUuY29weSgpXG59XG5mdW5jdGlvbiBuZXh0VG9rZW4oc3RyZWFtLCBzdGF0ZSkge1xuICB2YXIgdG9rID0gcmVzdE9mTGluZShzdHJlYW0sIHN0YXRlKVxuICAgICAgfHwgaW50ZXJwb2xhdGlvbkNvbnRpbnVlZChzdHJlYW0sIHN0YXRlKVxuICAgICAgfHwgaW5jbHVkZUZpbHRlcmVkQ29udGludWVkKHN0cmVhbSwgc3RhdGUpXG4gICAgICB8fCBlYWNoQ29udGludWVkKHN0cmVhbSwgc3RhdGUpXG4gICAgICB8fCBhdHRyc0NvbnRpbnVlZChzdHJlYW0sIHN0YXRlKVxuICAgICAgfHwgamF2YVNjcmlwdChzdHJlYW0sIHN0YXRlKVxuICAgICAgfHwgamF2YVNjcmlwdEFyZ3VtZW50cyhzdHJlYW0sIHN0YXRlKVxuICAgICAgfHwgY2FsbEFyZ3VtZW50cyhzdHJlYW0sIHN0YXRlKVxuXG4gICAgICB8fCB5aWVsZFN0YXRlbWVudChzdHJlYW0pXG4gICAgICB8fCBkb2N0eXBlKHN0cmVhbSlcbiAgICAgIHx8IGludGVycG9sYXRpb24oc3RyZWFtLCBzdGF0ZSlcbiAgICAgIHx8IGNhc2VTdGF0ZW1lbnQoc3RyZWFtLCBzdGF0ZSlcbiAgICAgIHx8IHdoZW4oc3RyZWFtLCBzdGF0ZSlcbiAgICAgIHx8IGRlZmF1bHRTdGF0ZW1lbnQoc3RyZWFtKVxuICAgICAgfHwgZXh0ZW5kc1N0YXRlbWVudChzdHJlYW0sIHN0YXRlKVxuICAgICAgfHwgYXBwZW5kKHN0cmVhbSwgc3RhdGUpXG4gICAgICB8fCBwcmVwZW5kKHN0cmVhbSwgc3RhdGUpXG4gICAgICB8fCBibG9jayhzdHJlYW0sIHN0YXRlKVxuICAgICAgfHwgaW5jbHVkZShzdHJlYW0sIHN0YXRlKVxuICAgICAgfHwgaW5jbHVkZUZpbHRlcmVkKHN0cmVhbSwgc3RhdGUpXG4gICAgICB8fCBtaXhpbihzdHJlYW0sIHN0YXRlKVxuICAgICAgfHwgY2FsbChzdHJlYW0sIHN0YXRlKVxuICAgICAgfHwgY29uZGl0aW9uYWwoc3RyZWFtLCBzdGF0ZSlcbiAgICAgIHx8IGVhY2goc3RyZWFtLCBzdGF0ZSlcbiAgICAgIHx8IHdoaWxlU3RhdGVtZW50KHN0cmVhbSwgc3RhdGUpXG4gICAgICB8fCB0YWcoc3RyZWFtLCBzdGF0ZSlcbiAgICAgIHx8IGZpbHRlcihzdHJlYW0sIHN0YXRlKVxuICAgICAgfHwgY29kZShzdHJlYW0sIHN0YXRlKVxuICAgICAgfHwgaWQoc3RyZWFtKVxuICAgICAgfHwgY2xhc3NOYW1lKHN0cmVhbSlcbiAgICAgIHx8IGF0dHJzKHN0cmVhbSwgc3RhdGUpXG4gICAgICB8fCBhdHRyaWJ1dGVzQmxvY2soc3RyZWFtLCBzdGF0ZSlcbiAgICAgIHx8IGluZGVudChzdHJlYW0pXG4gICAgICB8fCB0ZXh0KHN0cmVhbSwgc3RhdGUpXG4gICAgICB8fCBjb21tZW50KHN0cmVhbSwgc3RhdGUpXG4gICAgICB8fCBjb2xvbihzdHJlYW0pXG4gICAgICB8fCBkb3Qoc3RyZWFtLCBzdGF0ZSlcbiAgICAgIHx8IGZhaWwoc3RyZWFtKVxuXG4gIHJldHVybiB0b2sgPT09IHRydWUgPyBudWxsIDogdG9rXG59XG5cbmV4cG9ydCBjb25zdCBwdWcgPSB7XG4gIHN0YXJ0U3RhdGU6IHN0YXJ0U3RhdGUsXG4gIGNvcHlTdGF0ZTogY29weVN0YXRlLFxuICB0b2tlbjogbmV4dFRva2VuXG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=